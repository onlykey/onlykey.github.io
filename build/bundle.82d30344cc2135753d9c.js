(function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){!__webpack_require__.o(exports,name)&&Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default']}:function getModuleExports(){return module};return __webpack_require__.d(getter,'a',getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p='',__webpack_require__(__webpack_require__.s=178)})([function(module,exports){module.exports=typeof Object.create==='function'?function inherits(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},function(module,exports,__webpack_require__){'use strict';var _Mathfloor=Math.floor;var _Mathpow=Math.pow;var _StringfromCharCode=String.fromCharCode;var _Mathmin=Math.min;(function(global){function typedArraySupport(){try{var arr=new Uint8Array(1);return arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},arr.foo()===42&&typeof arr.subarray==='function'&&arr.subarray(1,1).byteLength===0}catch(e){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length)throw new RangeError('Invalid typed array length');return Buffer.TYPED_ARRAY_SUPPORT?(that=new Uint8Array(length),that.__proto__=Buffer.prototype):(that===null&&(that=new Buffer(length)),that.length=length),that}function Buffer(arg,encodingOrOffset,length){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer))return new Buffer(arg,encodingOrOffset,length);if(typeof arg==='number'){if(typeof encodingOrOffset==='string')throw new Error('If encoding is specified then the first argument must be a string');return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}function from(that,value,encodingOrOffset,length){if(typeof value==='number')throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!=='undefined'&&value instanceof ArrayBuffer?fromArrayBuffer(that,value,encodingOrOffset,length):typeof value==='string'?fromString(that,value,encodingOrOffset):fromObject(that,value)}function assertSize(size){if(typeof size!=='number')throw new TypeError('"size" argument must be a number');else if(size<0)throw new RangeError('"size" argument must not be negative')}function alloc(that,size,fill,encoding){return assertSize(size),size<=0?createBuffer(that,size):fill===undefined?createBuffer(that,size):typeof encoding==='string'?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill)}function allocUnsafe(that,size){if(assertSize(size),that=createBuffer(that,size<0?0:checked(size)|0),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;i<size;++i)that[i]=0;return that}function fromString(that,string,encoding){if((typeof encoding!=='string'||encoding==='')&&(encoding='utf8'),!Buffer.isEncoding(encoding))throw new TypeError('"encoding" must be a valid string encoding');var length=byteLength(string,encoding)|0;that=createBuffer(that,length);var actual=that.write(string,encoding);return actual!==length&&(that=that.slice(0,actual)),that}function fromArrayLike(that,array){var length=array.length<0?0:checked(array.length)|0;that=createBuffer(that,length);for(var i=0;i<length;i+=1)that[i]=array[i]&255;return that}function fromArrayBuffer(that,array,byteOffset,length){if(array.byteLength,byteOffset<0||array.byteLength<byteOffset)throw new RangeError('\'offset\' is out of bounds');if(array.byteLength<byteOffset+(length||0))throw new RangeError('\'length\' is out of bounds');return array=byteOffset===undefined&&length===undefined?new Uint8Array(array):length===undefined?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length),Buffer.TYPED_ARRAY_SUPPORT?(that=array,that.__proto__=Buffer.prototype):that=fromArrayLike(that,array),that}function fromObject(that,obj){if(Buffer.isBuffer(obj)){var len=checked(obj.length)|0;return(that=createBuffer(that,len),that.length===0)?that:(obj.copy(that,0,0,len),that)}if(obj){if(typeof ArrayBuffer!=='undefined'&&obj.buffer instanceof ArrayBuffer||'length'in obj)return typeof obj.length!=='number'||isnan(obj.length)?createBuffer(that,0):fromArrayLike(that,obj);if(obj.type==='Buffer'&&isArray(obj.data))return fromArrayLike(that,obj.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function checked(length){if(length>=kMaxLength())throw new RangeError('Attempt to allocate Buffer larger than maximum '+'size: 0x'+kMaxLength().toString(16)+' bytes');return length|0}function SlowBuffer(length){return+length!=length&&(length=0),Buffer.alloc(+length)}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if(typeof ArrayBuffer!=='undefined'&&typeof ArrayBuffer.isView==='function'&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer))return string.byteLength;typeof string!=='string'&&(string=''+string);var len=string.length;if(len===0)return 0;for(var loweredCase=!1;;)switch(encoding){case'ascii':case'latin1':case'binary':return len;case'utf8':case'utf-8':case undefined:return utf8ToBytes(string).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return len*2;case'hex':return len>>>1;case'base64':return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(''+encoding).toLowerCase(),loweredCase=!0;}}function slowToString(encoding,start,end){var loweredCase=!1;if((start===undefined||start<0)&&(start=0),start>this.length)return'';if((end===undefined||end>this.length)&&(end=this.length),end<=0)return'';if(end>>>=0,start>>>=0,end<=start)return'';for(!encoding&&(encoding='utf8');!0;)switch(encoding){case'hex':return hexSlice(this,start,end);case'utf8':case'utf-8':return utf8Slice(this,start,end);case'ascii':return asciiSlice(this,start,end);case'latin1':case'binary':return latin1Slice(this,start,end);case'base64':return base64Slice(this,start,end);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError('Unknown encoding: '+encoding);encoding=(encoding+'').toLowerCase(),loweredCase=!0;}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1;if(typeof byteOffset==='string'?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset=+byteOffset,isNaN(byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0)if(dir)byteOffset=0;else return-1;if(typeof val==='string'&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return val.length===0?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if(typeof val==='number')return val&=255,Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==='function'?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError('val must be string, number or Buffer')}function arrayIndexOf(arr,val,byteOffset,encoding,dir){function read(buf,i){return indexSize===1?buf[i]:buf.readUInt16BE(i*indexSize)}var indexSize=1;var arrLength=arr.length;var valLength=val.length;if(encoding!==undefined&&(encoding=(encoding+'').toLowerCase(),encoding==='ucs2'||encoding==='ucs-2'||encoding==='utf16le'||encoding==='utf-16le')){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)!==read(val,foundIndex===-1?0:i-foundIndex))foundIndex!==-1&&(i-=i-foundIndex),foundIndex=-1;else if(foundIndex===-1&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){var found=!0;for(var j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=+offset||0;var remaining=buf.length-offset;length?(length=+length,length>remaining&&(length=remaining)):length=remaining;var strLen=string.length;if(strLen%2!==0)throw new TypeError('Invalid hex string');length>strLen/2&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return start===0&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=_Mathmin(buf.length,end);var res=[];for(var i=start;i<end;){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;bytesPerSequence===1?firstByte<128&&(codePoint=firstByte):bytesPerSequence===2?(secondByte=buf[i+1],(secondByte&192)===128&&(tempCodePoint=(firstByte&31)<<6|secondByte&63,tempCodePoint>127&&(codePoint=tempCodePoint))):bytesPerSequence===3?(secondByte=buf[i+1],thirdByte=buf[i+2],(secondByte&192)===128&&(thirdByte&192)===128&&(tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63,tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint))):bytesPerSequence===4?(secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],(secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128&&(tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63,tempCodePoint>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint))):void 0}codePoint===null?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|codePoint&1023),res.push(codePoint),i+=bytesPerSequence}return decodeCodePointsArray(res)}function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH)return _StringfromCharCode.apply(String,codePoints);var res='';for(var i=0;i<len;)res+=_StringfromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}function asciiSlice(buf,start,end){var ret='';end=_Mathmin(buf.length,end);for(var i=start;i<end;++i)ret+=_StringfromCharCode(buf[i]&127);return ret}function latin1Slice(buf,start,end){var ret='';end=_Mathmin(buf.length,end);for(var i=start;i<end;++i)ret+=_StringfromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);var out='';for(var i=start;i<end;++i)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res='';for(var i=0;i<bytes.length;i+=2)res+=_StringfromCharCode(bytes[i]+bytes[i+1]*256);return res}function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError('offset is not uint');if(offset+ext>length)throw new RangeError('Trying to access beyond buffer length')}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError('Index out of range')}function objectWriteUInt16(buf,value,offset,littleEndian){value<0&&(value=65535+value+1);for(var i=0,j=_Mathmin(buf.length-offset,2);i<j;++i)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8}function objectWriteUInt32(buf,value,offset,littleEndian){value<0&&(value=4294967295+value+1);for(var i=0,j=_Mathmin(buf.length-offset,4);i<j;++i)buf[offset+i]=value>>>(littleEndian?i:3-i)*8&255}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError('Index out of range');if(offset<0)throw new RangeError('Index out of range')}function writeFloat(buf,value,offset,littleEndian,noAssert){return!noAssert&&checkIEEE754(buf,value,offset,4,3.4028234663852886e+38,-3.4028234663852886e+38),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return!noAssert&&checkIEEE754(buf,value,offset,8,1.7976931348623157e+308,-1.7976931348623157e+308),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}function base64clean(str){if(str=stringtrim(str).replace(INVALID_BASE64_RE,''),str.length<2)return'';for(;str.length%4!==0;)str+='=';return str}function stringtrim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,'')}function toHex(n){return n<16?'0'+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;++i){if(codePoint=string.charCodeAt(i),codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}else if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else throw new Error('Invalid code point')}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;++i)byteArray.push(str.charCodeAt(i)&255);return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length&&!((units-=2)<0);++i)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}function isnan(val){return val!==val}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var base64=__webpack_require__(86);var ieee754=__webpack_require__(138);var isArray=__webpack_require__(55);exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=global.TYPED_ARRAY_SUPPORT===undefined?typedArraySupport():global.TYPED_ARRAY_SUPPORT,exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(arr){return arr.__proto__=Buffer.prototype,arr},Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,typeof Symbol!=='undefined'&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(size,fill,encoding){return alloc(null,size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)},Buffer.isBuffer=function isBuffer(b){return!!(b!=null&&b._isBuffer)},Buffer.compare=function compare(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError('Arguments must be Buffers');if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=_Mathmin(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function isEncoding(encoding){switch((encoding+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},Buffer.concat=function concat(list,length){if(!isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(list.length===0)return Buffer.alloc(0);var i;if(length===undefined)for(length=0,i=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer.allocUnsafe(length);var pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!Buffer.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!==0)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!==0)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!==0)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function toString(){var length=this.length|0;return length===0?'':arguments.length===0?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError('Argument must be a Buffer');return this===b||Buffer.compare(this,b)===0},Buffer.prototype.inspect=function inspect(){var str='';var max=exports.INSPECT_MAX_BYTES;return this.length>0&&(str=this.toString('hex',0,max).match(/.{2}/g).join(' '),this.length>max&&(str+=' ... ')),'<Buffer '+str+'>'},Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target))throw new TypeError('Argument must be a Buffer');if(start===undefined&&(start=0),end===undefined&&(end=target?target.length:0),thisStart===undefined&&(thisStart=0),thisEnd===undefined&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError('out of range index');if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(start>>>=0,end>>>=0,thisStart>>>=0,thisEnd>>>=0,this===target)return 0;var x=thisEnd-thisStart;var y=end-start;var len=_Mathmin(x,y);var thisCopy=this.slice(thisStart,thisEnd);var targetCopy=target.slice(start,end);for(var i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1},Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined)encoding='utf8',length=this.length,offset=0;else if(length===undefined&&typeof offset==='string')encoding=offset,length=this.length,offset=0;else if(isFinite(offset))offset|=0,isFinite(length)?(length|=0,encoding===undefined&&(encoding='utf8')):(encoding=length,length=undefined);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var remaining=this.length-offset;if((length===undefined||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError('Attempt to write outside buffer bounds');!encoding&&(encoding='utf8');for(var loweredCase=!1;;)switch(encoding){case'hex':return hexWrite(this,string,offset,length);case'utf8':case'utf-8':return utf8Write(this,string,offset,length);case'ascii':return asciiWrite(this,string,offset,length);case'latin1':case'binary':return latin1Write(this,string,offset,length);case'base64':return base64Write(this,string,offset,length);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError('Unknown encoding: '+encoding);encoding=(''+encoding).toLowerCase(),loweredCase=!0;}},Buffer.prototype.toJSON=function toJSON(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start,end=end===undefined?len:~~end,start<0?(start+=len,start<0&&(start=0)):start>len&&(start=len),end<0?(end+=len,end<0&&(end=0)):end>len&&(end=len),end<start&&(end=start);var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT)newBuf=this.subarray(start,end),newBuf.__proto__=Buffer.prototype;else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,undefined);for(var i=0;i<sliceLen;++i)newBuf[i]=this[i+start]}return newBuf},Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset|=0,byteLength|=0,!noAssert&&checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;for(var i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset|=0,byteLength|=0,!noAssert&&checkOffset(offset,byteLength,this.length);var val=this[offset+--byteLength];for(var mul=1;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){return!noAssert&&checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){return!noAssert&&checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){return!noAssert&&checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){return!noAssert&&checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216},Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){return!noAssert&&checkOffset(offset,4,this.length),this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset|=0,byteLength|=0,!noAssert&&checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;for(var i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return mul*=128,val>=mul&&(val-=_Mathpow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset|=0,byteLength|=0,!noAssert&&checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;for(var val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return mul*=128,val>=mul&&(val-=_Mathpow(2,8*byteLength)),val},Buffer.prototype.readInt8=function readInt8(offset,noAssert){return!noAssert&&checkOffset(offset,1,this.length),this[offset]&128?(255-this[offset]+1)*-1:this[offset]},Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){!noAssert&&checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val},Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){!noAssert&&checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val},Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){return!noAssert&&checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){return!noAssert&&checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){return!noAssert&&checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){return!noAssert&&checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){return!noAssert&&checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){return!noAssert&&checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){if(value=+value,offset|=0,byteLength|=0,!noAssert){var maxBytes=_Mathpow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var mul=1;var i=0;for(this[offset]=value&255;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){if(value=+value,offset|=0,byteLength|=0,!noAssert){var maxBytes=_Mathpow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var i=byteLength-1;var mul=1;for(this[offset+i]=value&255;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){return value=+value,offset|=0,!noAssert&&checkInt(this,value,offset,1,255,0),!Buffer.TYPED_ARRAY_SUPPORT&&(value=_Mathfloor(value)),this[offset]=value&255,offset+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){return value=+value,offset|=0,!noAssert&&checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value&255,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){return value=+value,offset|=0,!noAssert&&checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=value&255):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){return value=+value,offset|=0,!noAssert&&checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=value&255):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){return value=+value,offset|=0,!noAssert&&checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=value&255):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=_Mathpow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0;var mul=1;var sub=0;for(this[offset]=value&255;++i<byteLength&&(mul*=256);)value<0&&sub===0&&this[offset+i-1]!==0&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){if(value=+value,offset|=0,!noAssert){var limit=_Mathpow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1;var mul=1;var sub=0;for(this[offset+i]=value&255;--i>=0&&(mul*=256);)value<0&&sub===0&&this[offset+i+1]!==0&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){return value=+value,offset|=0,!noAssert&&checkInt(this,value,offset,1,127,-128),!Buffer.TYPED_ARRAY_SUPPORT&&(value=_Mathfloor(value)),value<0&&(value=255+value+1),this[offset]=value&255,offset+1},Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){return value=+value,offset|=0,!noAssert&&checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value&255,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){return value=+value,offset|=0,!noAssert&&checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=value&255):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){return value=+value,offset|=0,!noAssert&&checkInt(this,value,offset,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value&255,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){return value=+value,offset|=0,!noAssert&&checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=value&255):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!start&&(start=0),!end&&end!==0&&(end=this.length),targetStart>=target.length&&(targetStart=target.length),!targetStart&&(targetStart=0),end>0&&end<start&&(end=start),end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0)throw new RangeError('targetStart out of bounds');if(start<0||start>=this.length)throw new RangeError('sourceStart out of bounds');if(end<0)throw new RangeError('sourceEnd out of bounds');end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var len=end-start;var i;if(this===target&&start<targetStart&&targetStart<end)for(i=len-1;i>=0;--i)target[i+targetStart]=this[i+start];else if(len<1000||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<len;++i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len},Buffer.prototype.fill=function fill(val,start,end,encoding){if(typeof val==='string'){if(typeof start==='string'?(encoding=start,start=0,end=this.length):typeof end==='string'&&(encoding=end,end=this.length),val.length===1){var code=val.charCodeAt(0);code<256&&(val=code)}if(encoding!==undefined&&typeof encoding!=='string')throw new TypeError('encoding must be a string');if(typeof encoding==='string'&&!Buffer.isEncoding(encoding))throw new TypeError('Unknown encoding: '+encoding)}else typeof val==='number'&&(val&=255);if(start<0||this.length<start||this.length<end)throw new RangeError('Out of range index');if(end<=start)return this;start>>>=0,end=end===undefined?this.length:end>>>0,!val&&(val=0);var i;if(typeof val==='number')for(i=start;i<end;++i)this[i]=val;else{var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString());var len=bytes.length;for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g}).call(exports,__webpack_require__(7))},function(module,exports,__webpack_require__){var _Mathround=Math.round;var _Mathmax=Math.max;var _Mathceil=Math.ceil;var _Mathmin2=Math.min;(function(module){(function(module,exports){'use strict';function assert(val,msg){if(!val)throw new Error(msg||'Assertion failed')}function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}function BN(number,base,endian){return BN.isBN(number)?number:void(this.negative=0,this.words=null,this.length=0,this.red=null,number!==null&&((base==='le'||base==='be')&&(endian=base,base=10),this._init(number||0,base||10,endian||'be')))}function parseHex(str,start,end){var r=0;var len=_Mathmin2(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r<<=4,r|=c>=49&&c<=54?c-49+10:c>=17&&c<=22?c-17+10:c&15}return r}function parseBase(str,start,end,mul){var r=0;var len=_Mathmin2(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r*=mul,r+=c>=49?c-49+10:c>=17?c-17+10:c}return r}function toBitArray(num){var w=Array(num.bitLength());for(var bit=0;bit<w.length;bit++){var off=bit/26|0;var wbit=bit%26;w[bit]=(num.words[off]&1<<wbit)>>>wbit}return w}function smallMulTo(self,num,out){out.negative=num.negative^self.negative;var len=self.length+num.length|0;out.length=len,len=len-1|0;var a=self.words[0]|0;var b=num.words[0]|0;var r=a*b;var lo=r&67108863;var carry=r/67108864|0;out.words[0]=lo;for(var k=1;k<len;k++){var ncarry=carry>>>26;var rword=carry&67108863;var maxJ=_Mathmin2(k,num.length-1);for(var j=_Mathmax(0,k-self.length+1);j<=maxJ;j++){var i=k-j|0;a=self.words[i]|0,b=num.words[j]|0,r=a*b+rword,ncarry+=r/67108864|0,rword=r&67108863}out.words[k]=rword|0,carry=ncarry|0}return carry===0?out.length--:out.words[k]=carry|0,out.strip()}function bigMulTo(self,num,out){out.negative=num.negative^self.negative,out.length=self.length+num.length;var carry=0;var hncarry=0;for(var k=0;k<out.length-1;k++){var ncarry=hncarry;hncarry=0;var rword=carry&67108863;var maxJ=_Mathmin2(k,num.length-1);for(var j=_Mathmax(0,k-self.length+1);j<=maxJ;j++){var i=k-j;var a=self.words[i]|0;var b=num.words[j]|0;var r=a*b;var lo=r&67108863;ncarry=ncarry+(r/67108864|0)|0,lo=lo+rword|0,rword=lo&67108863,ncarry=ncarry+(lo>>>26)|0,hncarry+=ncarry>>>26,ncarry&=67108863}out.words[k]=rword,carry=ncarry,ncarry=hncarry}return carry===0?out.length--:out.words[k]=carry,out.strip()}function jumboMulTo(self,num,out){var fftm=new FFTM;return fftm.mulp(self,num,out)}function FFTM(x,y){this.x=x,this.y=y}function MPrime(name,p){this.name=name,this.p=new BN(p,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f')}function P224(){MPrime.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001')}function P192(){MPrime.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff')}function P25519(){MPrime.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed')}function Red(m){if(typeof m==='string'){var prime=BN._prime(m);this.m=prime.p,this.prime=prime}else assert(m.gtn(1),'modulus must be greater than 1'),this.m=m,this.prime=null}function Mont(m){Red.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}var _Mathimul=Math.imul;var _Mathclz=Math.clz32;typeof module==='object'?module.exports=BN:exports.BN=BN,BN.BN=BN,BN.wordSize=26;var Buffer;try{Buffer=__webpack_require__(175).Buffer}catch(e){}BN.isBN=function isBN(num){return!!(num instanceof BN)||num!==null&&typeof num==='object'&&num.constructor.wordSize===BN.wordSize&&Array.isArray(num.words)},BN.max=function max(left,right){return left.cmp(right)>0?left:right},BN.min=function min(left,right){return left.cmp(right)<0?left:right},BN.prototype._init=function init(number,base,endian){if(typeof number==='number')return this._initNumber(number,base,endian);if(typeof number==='object')return this._initArray(number,base,endian);base==='hex'&&(base=16),assert(base===(base|0)&&base>=2&&base<=36),number=number.toString().replace(/\s+/g,'');var start=0;number[0]==='-'&&start++,base===16?this._parseHex(number,start):this._parseBase(number,base,start),number[0]==='-'&&(this.negative=1),this.strip();endian!=='le'||this._initArray(this.toArray(),base,endian)},BN.prototype._initNumber=function _initNumber(number,base,endian){number<0&&(this.negative=1,number=-number),number<67108864?(this.words=[number&67108863],this.length=1):number<4503599627370496?(this.words=[number&67108863,number/67108864&67108863],this.length=2):(assert(number<9007199254740992),this.words=[number&67108863,number/67108864&67108863,1],this.length=3);endian!=='le'||this._initArray(this.toArray(),base,endian)},BN.prototype._initArray=function _initArray(number,base,endian){if(assert(typeof number.length==='number'),number.length<=0)return this.words=[0],this.length=1,this;this.length=_Mathceil(number.length/3),this.words=Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var j,w;var off=0;if(endian==='be')for(i=number.length-1,j=0;i>=0;i-=3)w=number[i]|number[i-1]<<8|number[i-2]<<16,this.words[j]|=w<<off&67108863,this.words[j+1]=w>>>26-off&67108863,off+=24,off>=26&&(off-=26,j++);else if(endian==='le')for(i=0,j=0;i<number.length;i+=3)w=number[i]|number[i+1]<<8|number[i+2]<<16,this.words[j]|=w<<off&67108863,this.words[j+1]=w>>>26-off&67108863,off+=24,off>=26&&(off-=26,j++);return this.strip()},BN.prototype._parseHex=function _parseHex(number,start){this.length=_Mathceil((number.length-start)/6),this.words=Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var j,w;var off=0;for(i=number.length-6,j=0;i>=start;i-=6)w=parseHex(number,i,i+6),this.words[j]|=w<<off&67108863,this.words[j+1]|=w>>>26-off&4194303,off+=24,off>=26&&(off-=26,j++);i+6!==start&&(w=parseHex(number,start,i+6),this.words[j]|=w<<off&67108863,this.words[j+1]|=w>>>26-off&4194303),this.strip()},BN.prototype._parseBase=function _parseBase(number,base,start){this.words=[0],this.length=1;for(var limbLen=0,limbPow=1;limbPow<=67108863;limbPow*=base)limbLen++;limbLen--,limbPow=limbPow/base|0;var total=number.length-start;var mod=total%limbLen;var end=_Mathmin2(total,total-mod)+start;var word=0;for(var i=start;i<end;i+=limbLen)word=parseBase(number,i,i+limbLen,base),this.imuln(limbPow),this.words[0]+word<67108864?this.words[0]+=word:this._iaddn(word);if(mod!==0){var pow=1;for(word=parseBase(number,i,number.length,base),i=0;i<mod;i++)pow*=base;this.imuln(pow),this.words[0]+word<67108864?this.words[0]+=word:this._iaddn(word)}},BN.prototype.copy=function copy(dest){dest.words=Array(this.length);for(var i=0;i<this.length;i++)dest.words[i]=this.words[i];dest.length=this.length,dest.negative=this.negative,dest.red=this.red},BN.prototype.clone=function clone(){var r=new BN(null);return this.copy(r),r},BN.prototype._expand=function _expand(size){for(;this.length<size;)this.words[this.length++]=0;return this},BN.prototype.strip=function strip(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},BN.prototype.inspect=function inspect(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>'};var zeros=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'];var groupSizes=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var groupBases=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];BN.prototype.toString=function toString(base,padding){base=base||10,padding=padding|0||1;var out;if(base===16||base==='hex'){out='';var off=0;var carry=0;for(var i=0;i<this.length;i++){var w=this.words[i];var word=((w<<off|carry)&16777215).toString(16);carry=w>>>24-off&16777215,out=carry!==0||i!==this.length-1?zeros[6-word.length]+word+out:word+out,off+=2,off>=26&&(off-=26,i--)}for(carry!==0&&(out=carry.toString(16)+out);out.length%padding!==0;)out='0'+out;return this.negative!==0&&(out='-'+out),out}if(base===(base|0)&&base>=2&&base<=36){var groupSize=groupSizes[base];var groupBase=groupBases[base];out='';var c=this.clone();for(c.negative=0;!c.isZero();){var r=c.modn(groupBase).toString(base);c=c.idivn(groupBase),out=c.isZero()?r+out:zeros[groupSize-r.length]+r+out}for(this.isZero()&&(out='0'+out);out.length%padding!==0;)out='0'+out;return this.negative!==0&&(out='-'+out),out}assert(!1,'Base should be between 2 and 36')},BN.prototype.toNumber=function toNumber(){var ret=this.words[0];return this.length===2?ret+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ret+=4503599627370496+this.words[1]*67108864:this.length>2&&assert(!1,'Number can only safely store up to 53 bits'),this.negative===0?ret:-ret},BN.prototype.toJSON=function toJSON(){return this.toString(16)},BN.prototype.toBuffer=function toBuffer(endian,length){return assert(typeof Buffer!=='undefined'),this.toArrayLike(Buffer,endian,length)},BN.prototype.toArray=function toArray(endian,length){return this.toArrayLike(Array,endian,length)},BN.prototype.toArrayLike=function toArrayLike(ArrayType,endian,length){var byteLength=this.byteLength();var reqLength=length||_Mathmax(1,byteLength);assert(byteLength<=reqLength,'byte array longer than desired length'),assert(reqLength>0,'Requested array length <= 0'),this.strip();var littleEndian=endian==='le';var res=new ArrayType(reqLength);var b,i;var q=this.clone();if(!littleEndian){for(i=0;i<reqLength-byteLength;i++)res[i]=0;for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),res[reqLength-i-1]=b}else{for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),res[i]=b;for(;i<reqLength;i++)res[i]=0}return res},BN.prototype._countBits=_Mathclz?function _countBits(w){return 32-_Mathclz(w)}:function _countBits(w){var t=w;var r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},BN.prototype._zeroBits=function _zeroBits(w){if(w===0)return 26;var t=w;var r=0;return(t&8191)===0&&(r+=13,t>>>=13),(t&127)===0&&(r+=7,t>>>=7),(t&15)===0&&(r+=4,t>>>=4),(t&3)===0&&(r+=2,t>>>=2),(t&1)===0&&r++,r},BN.prototype.bitLength=function bitLength(){var w=this.words[this.length-1];var hi=this._countBits(w);return(this.length-1)*26+hi},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;var r=0;for(var i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);if(r+=b,b!==26)break}return r},BN.prototype.byteLength=function byteLength(){return _Mathceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(width){return this.negative===0?this.clone():this.abs().inotn(width).iaddn(1)},BN.prototype.fromTwos=function fromTwos(width){return this.testn(width-1)?this.notn(width).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return this.negative!==0},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return!this.isZero()&&(this.negative^=1),this},BN.prototype.iuor=function iuor(num){for(;this.length<num.length;)this.words[this.length++]=0;for(var i=0;i<num.length;i++)this.words[i]|=num.words[i];return this.strip()},BN.prototype.ior=function ior(num){return assert((this.negative|num.negative)===0),this.iuor(num)},BN.prototype.or=function or(num){return this.length>num.length?this.clone().ior(num):num.clone().ior(this)},BN.prototype.uor=function uor(num){return this.length>num.length?this.clone().iuor(num):num.clone().iuor(this)},BN.prototype.iuand=function iuand(num){var b;b=this.length>num.length?num:this;for(var i=0;i<b.length;i++)this.words[i]&=num.words[i];return this.length=b.length,this.strip()},BN.prototype.iand=function iand(num){return assert((this.negative|num.negative)===0),this.iuand(num)},BN.prototype.and=function and(num){return this.length>num.length?this.clone().iand(num):num.clone().iand(this)},BN.prototype.uand=function uand(num){return this.length>num.length?this.clone().iuand(num):num.clone().iuand(this)},BN.prototype.iuxor=function iuxor(num){var a;var b;this.length>num.length?(a=this,b=num):(a=num,b=this);for(var i=0;i<b.length;i++)this.words[i]=a.words[i]^b.words[i];if(this!==a)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=a.length,this.strip()},BN.prototype.ixor=function ixor(num){return assert((this.negative|num.negative)===0),this.iuxor(num)},BN.prototype.xor=function xor(num){return this.length>num.length?this.clone().ixor(num):num.clone().ixor(this)},BN.prototype.uxor=function uxor(num){return this.length>num.length?this.clone().iuxor(num):num.clone().iuxor(this)},BN.prototype.inotn=function inotn(width){assert(typeof width==='number'&&width>=0);var bytesNeeded=_Mathceil(width/26)|0;var bitsLeft=width%26;this._expand(bytesNeeded),bitsLeft>0&&bytesNeeded--;for(var i=0;i<bytesNeeded;i++)this.words[i]=~this.words[i]&67108863;return bitsLeft>0&&(this.words[i]=~this.words[i]&67108863>>26-bitsLeft),this.strip()},BN.prototype.notn=function notn(width){return this.clone().inotn(width)},BN.prototype.setn=function setn(bit,val){assert(typeof bit==='number'&&bit>=0);var off=bit/26|0;var wbit=bit%26;return this._expand(off+1),val?this.words[off]|=1<<wbit:this.words[off]&=~(1<<wbit),this.strip()},BN.prototype.iadd=function iadd(num){var r;if(this.negative!==0&&num.negative===0)return this.negative=0,r=this.isub(num),this.negative^=1,this._normSign();if(this.negative===0&&num.negative!==0)return num.negative=0,r=this.isub(num),num.negative=1,r._normSign();var a,b;this.length>num.length?(a=this,b=num):(a=num,b=this);var carry=0;for(var i=0;i<b.length;i++)r=(a.words[i]|0)+(b.words[i]|0)+carry,this.words[i]=r&67108863,carry=r>>>26;for(;carry!==0&&i<a.length;i++)r=(a.words[i]|0)+carry,this.words[i]=r&67108863,carry=r>>>26;if(this.length=a.length,carry!==0)this.words[this.length]=carry,this.length++;else if(a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this},BN.prototype.add=function add(num){var res;return num.negative!==0&&this.negative===0?(num.negative=0,res=this.sub(num),num.negative^=1,res):num.negative===0&&this.negative!==0?(this.negative=0,res=num.sub(this),this.negative=1,res):this.length>num.length?this.clone().iadd(num):num.clone().iadd(this)},BN.prototype.isub=function isub(num){if(num.negative!==0){num.negative=0;var r=this.iadd(num);return num.negative=1,r._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(num),this.negative=1,this._normSign();var cmp=this.cmp(num);if(cmp===0)return this.negative=0,this.length=1,this.words[0]=0,this;var a,b;cmp>0?(a=this,b=num):(a=num,b=this);var carry=0;for(var i=0;i<b.length;i++)r=(a.words[i]|0)-(b.words[i]|0)+carry,carry=r>>26,this.words[i]=r&67108863;for(;carry!==0&&i<a.length;i++)r=(a.words[i]|0)+carry,carry=r>>26,this.words[i]=r&67108863;if(carry===0&&i<a.length&&a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=_Mathmax(this.length,i),a!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function sub(num){return this.clone().isub(num)};var comb10MulTo=function comb10MulTo(self,num,out){var a=self.words;var b=num.words;var o=out.words;var c=0;var lo;var mid;var hi;var a0=a[0]|0;var al0=a0&8191;var ah0=a0>>>13;var a1=a[1]|0;var al1=a1&8191;var ah1=a1>>>13;var a2=a[2]|0;var al2=a2&8191;var ah2=a2>>>13;var a3=a[3]|0;var al3=a3&8191;var ah3=a3>>>13;var a4=a[4]|0;var al4=a4&8191;var ah4=a4>>>13;var a5=a[5]|0;var al5=a5&8191;var ah5=a5>>>13;var a6=a[6]|0;var al6=a6&8191;var ah6=a6>>>13;var a7=a[7]|0;var al7=a7&8191;var ah7=a7>>>13;var a8=a[8]|0;var al8=a8&8191;var ah8=a8>>>13;var a9=a[9]|0;var al9=a9&8191;var ah9=a9>>>13;var b0=b[0]|0;var bl0=b0&8191;var bh0=b0>>>13;var b1=b[1]|0;var bl1=b1&8191;var bh1=b1>>>13;var b2=b[2]|0;var bl2=b2&8191;var bh2=b2>>>13;var b3=b[3]|0;var bl3=b3&8191;var bh3=b3>>>13;var b4=b[4]|0;var bl4=b4&8191;var bh4=b4>>>13;var b5=b[5]|0;var bl5=b5&8191;var bh5=b5>>>13;var b6=b[6]|0;var bl6=b6&8191;var bh6=b6>>>13;var b7=b[7]|0;var bl7=b7&8191;var bh7=b7>>>13;var b8=b[8]|0;var bl8=b8&8191;var bh8=b8>>>13;var b9=b[9]|0;var bl9=b9&8191;var bh9=b9>>>13;out.negative=self.negative^num.negative,out.length=19,lo=_Mathimul(al0,bl0),mid=_Mathimul(al0,bh0),mid=mid+_Mathimul(ah0,bl0)|0,hi=_Mathimul(ah0,bh0);var w0=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w0>>>26)|0,w0&=67108863,lo=_Mathimul(al1,bl0),mid=_Mathimul(al1,bh0),mid=mid+_Mathimul(ah1,bl0)|0,hi=_Mathimul(ah1,bh0),lo=lo+_Mathimul(al0,bl1)|0,mid=mid+_Mathimul(al0,bh1)|0,mid=mid+_Mathimul(ah0,bl1)|0,hi=hi+_Mathimul(ah0,bh1)|0;var w1=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w1>>>26)|0,w1&=67108863,lo=_Mathimul(al2,bl0),mid=_Mathimul(al2,bh0),mid=mid+_Mathimul(ah2,bl0)|0,hi=_Mathimul(ah2,bh0),lo=lo+_Mathimul(al1,bl1)|0,mid=mid+_Mathimul(al1,bh1)|0,mid=mid+_Mathimul(ah1,bl1)|0,hi=hi+_Mathimul(ah1,bh1)|0,lo=lo+_Mathimul(al0,bl2)|0,mid=mid+_Mathimul(al0,bh2)|0,mid=mid+_Mathimul(ah0,bl2)|0,hi=hi+_Mathimul(ah0,bh2)|0;var w2=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w2>>>26)|0,w2&=67108863,lo=_Mathimul(al3,bl0),mid=_Mathimul(al3,bh0),mid=mid+_Mathimul(ah3,bl0)|0,hi=_Mathimul(ah3,bh0),lo=lo+_Mathimul(al2,bl1)|0,mid=mid+_Mathimul(al2,bh1)|0,mid=mid+_Mathimul(ah2,bl1)|0,hi=hi+_Mathimul(ah2,bh1)|0,lo=lo+_Mathimul(al1,bl2)|0,mid=mid+_Mathimul(al1,bh2)|0,mid=mid+_Mathimul(ah1,bl2)|0,hi=hi+_Mathimul(ah1,bh2)|0,lo=lo+_Mathimul(al0,bl3)|0,mid=mid+_Mathimul(al0,bh3)|0,mid=mid+_Mathimul(ah0,bl3)|0,hi=hi+_Mathimul(ah0,bh3)|0;var w3=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w3>>>26)|0,w3&=67108863,lo=_Mathimul(al4,bl0),mid=_Mathimul(al4,bh0),mid=mid+_Mathimul(ah4,bl0)|0,hi=_Mathimul(ah4,bh0),lo=lo+_Mathimul(al3,bl1)|0,mid=mid+_Mathimul(al3,bh1)|0,mid=mid+_Mathimul(ah3,bl1)|0,hi=hi+_Mathimul(ah3,bh1)|0,lo=lo+_Mathimul(al2,bl2)|0,mid=mid+_Mathimul(al2,bh2)|0,mid=mid+_Mathimul(ah2,bl2)|0,hi=hi+_Mathimul(ah2,bh2)|0,lo=lo+_Mathimul(al1,bl3)|0,mid=mid+_Mathimul(al1,bh3)|0,mid=mid+_Mathimul(ah1,bl3)|0,hi=hi+_Mathimul(ah1,bh3)|0,lo=lo+_Mathimul(al0,bl4)|0,mid=mid+_Mathimul(al0,bh4)|0,mid=mid+_Mathimul(ah0,bl4)|0,hi=hi+_Mathimul(ah0,bh4)|0;var w4=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w4>>>26)|0,w4&=67108863,lo=_Mathimul(al5,bl0),mid=_Mathimul(al5,bh0),mid=mid+_Mathimul(ah5,bl0)|0,hi=_Mathimul(ah5,bh0),lo=lo+_Mathimul(al4,bl1)|0,mid=mid+_Mathimul(al4,bh1)|0,mid=mid+_Mathimul(ah4,bl1)|0,hi=hi+_Mathimul(ah4,bh1)|0,lo=lo+_Mathimul(al3,bl2)|0,mid=mid+_Mathimul(al3,bh2)|0,mid=mid+_Mathimul(ah3,bl2)|0,hi=hi+_Mathimul(ah3,bh2)|0,lo=lo+_Mathimul(al2,bl3)|0,mid=mid+_Mathimul(al2,bh3)|0,mid=mid+_Mathimul(ah2,bl3)|0,hi=hi+_Mathimul(ah2,bh3)|0,lo=lo+_Mathimul(al1,bl4)|0,mid=mid+_Mathimul(al1,bh4)|0,mid=mid+_Mathimul(ah1,bl4)|0,hi=hi+_Mathimul(ah1,bh4)|0,lo=lo+_Mathimul(al0,bl5)|0,mid=mid+_Mathimul(al0,bh5)|0,mid=mid+_Mathimul(ah0,bl5)|0,hi=hi+_Mathimul(ah0,bh5)|0;var w5=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w5>>>26)|0,w5&=67108863,lo=_Mathimul(al6,bl0),mid=_Mathimul(al6,bh0),mid=mid+_Mathimul(ah6,bl0)|0,hi=_Mathimul(ah6,bh0),lo=lo+_Mathimul(al5,bl1)|0,mid=mid+_Mathimul(al5,bh1)|0,mid=mid+_Mathimul(ah5,bl1)|0,hi=hi+_Mathimul(ah5,bh1)|0,lo=lo+_Mathimul(al4,bl2)|0,mid=mid+_Mathimul(al4,bh2)|0,mid=mid+_Mathimul(ah4,bl2)|0,hi=hi+_Mathimul(ah4,bh2)|0,lo=lo+_Mathimul(al3,bl3)|0,mid=mid+_Mathimul(al3,bh3)|0,mid=mid+_Mathimul(ah3,bl3)|0,hi=hi+_Mathimul(ah3,bh3)|0,lo=lo+_Mathimul(al2,bl4)|0,mid=mid+_Mathimul(al2,bh4)|0,mid=mid+_Mathimul(ah2,bl4)|0,hi=hi+_Mathimul(ah2,bh4)|0,lo=lo+_Mathimul(al1,bl5)|0,mid=mid+_Mathimul(al1,bh5)|0,mid=mid+_Mathimul(ah1,bl5)|0,hi=hi+_Mathimul(ah1,bh5)|0,lo=lo+_Mathimul(al0,bl6)|0,mid=mid+_Mathimul(al0,bh6)|0,mid=mid+_Mathimul(ah0,bl6)|0,hi=hi+_Mathimul(ah0,bh6)|0;var w6=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w6>>>26)|0,w6&=67108863,lo=_Mathimul(al7,bl0),mid=_Mathimul(al7,bh0),mid=mid+_Mathimul(ah7,bl0)|0,hi=_Mathimul(ah7,bh0),lo=lo+_Mathimul(al6,bl1)|0,mid=mid+_Mathimul(al6,bh1)|0,mid=mid+_Mathimul(ah6,bl1)|0,hi=hi+_Mathimul(ah6,bh1)|0,lo=lo+_Mathimul(al5,bl2)|0,mid=mid+_Mathimul(al5,bh2)|0,mid=mid+_Mathimul(ah5,bl2)|0,hi=hi+_Mathimul(ah5,bh2)|0,lo=lo+_Mathimul(al4,bl3)|0,mid=mid+_Mathimul(al4,bh3)|0,mid=mid+_Mathimul(ah4,bl3)|0,hi=hi+_Mathimul(ah4,bh3)|0,lo=lo+_Mathimul(al3,bl4)|0,mid=mid+_Mathimul(al3,bh4)|0,mid=mid+_Mathimul(ah3,bl4)|0,hi=hi+_Mathimul(ah3,bh4)|0,lo=lo+_Mathimul(al2,bl5)|0,mid=mid+_Mathimul(al2,bh5)|0,mid=mid+_Mathimul(ah2,bl5)|0,hi=hi+_Mathimul(ah2,bh5)|0,lo=lo+_Mathimul(al1,bl6)|0,mid=mid+_Mathimul(al1,bh6)|0,mid=mid+_Mathimul(ah1,bl6)|0,hi=hi+_Mathimul(ah1,bh6)|0,lo=lo+_Mathimul(al0,bl7)|0,mid=mid+_Mathimul(al0,bh7)|0,mid=mid+_Mathimul(ah0,bl7)|0,hi=hi+_Mathimul(ah0,bh7)|0;var w7=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w7>>>26)|0,w7&=67108863,lo=_Mathimul(al8,bl0),mid=_Mathimul(al8,bh0),mid=mid+_Mathimul(ah8,bl0)|0,hi=_Mathimul(ah8,bh0),lo=lo+_Mathimul(al7,bl1)|0,mid=mid+_Mathimul(al7,bh1)|0,mid=mid+_Mathimul(ah7,bl1)|0,hi=hi+_Mathimul(ah7,bh1)|0,lo=lo+_Mathimul(al6,bl2)|0,mid=mid+_Mathimul(al6,bh2)|0,mid=mid+_Mathimul(ah6,bl2)|0,hi=hi+_Mathimul(ah6,bh2)|0,lo=lo+_Mathimul(al5,bl3)|0,mid=mid+_Mathimul(al5,bh3)|0,mid=mid+_Mathimul(ah5,bl3)|0,hi=hi+_Mathimul(ah5,bh3)|0,lo=lo+_Mathimul(al4,bl4)|0,mid=mid+_Mathimul(al4,bh4)|0,mid=mid+_Mathimul(ah4,bl4)|0,hi=hi+_Mathimul(ah4,bh4)|0,lo=lo+_Mathimul(al3,bl5)|0,mid=mid+_Mathimul(al3,bh5)|0,mid=mid+_Mathimul(ah3,bl5)|0,hi=hi+_Mathimul(ah3,bh5)|0,lo=lo+_Mathimul(al2,bl6)|0,mid=mid+_Mathimul(al2,bh6)|0,mid=mid+_Mathimul(ah2,bl6)|0,hi=hi+_Mathimul(ah2,bh6)|0,lo=lo+_Mathimul(al1,bl7)|0,mid=mid+_Mathimul(al1,bh7)|0,mid=mid+_Mathimul(ah1,bl7)|0,hi=hi+_Mathimul(ah1,bh7)|0,lo=lo+_Mathimul(al0,bl8)|0,mid=mid+_Mathimul(al0,bh8)|0,mid=mid+_Mathimul(ah0,bl8)|0,hi=hi+_Mathimul(ah0,bh8)|0;var w8=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w8>>>26)|0,w8&=67108863,lo=_Mathimul(al9,bl0),mid=_Mathimul(al9,bh0),mid=mid+_Mathimul(ah9,bl0)|0,hi=_Mathimul(ah9,bh0),lo=lo+_Mathimul(al8,bl1)|0,mid=mid+_Mathimul(al8,bh1)|0,mid=mid+_Mathimul(ah8,bl1)|0,hi=hi+_Mathimul(ah8,bh1)|0,lo=lo+_Mathimul(al7,bl2)|0,mid=mid+_Mathimul(al7,bh2)|0,mid=mid+_Mathimul(ah7,bl2)|0,hi=hi+_Mathimul(ah7,bh2)|0,lo=lo+_Mathimul(al6,bl3)|0,mid=mid+_Mathimul(al6,bh3)|0,mid=mid+_Mathimul(ah6,bl3)|0,hi=hi+_Mathimul(ah6,bh3)|0,lo=lo+_Mathimul(al5,bl4)|0,mid=mid+_Mathimul(al5,bh4)|0,mid=mid+_Mathimul(ah5,bl4)|0,hi=hi+_Mathimul(ah5,bh4)|0,lo=lo+_Mathimul(al4,bl5)|0,mid=mid+_Mathimul(al4,bh5)|0,mid=mid+_Mathimul(ah4,bl5)|0,hi=hi+_Mathimul(ah4,bh5)|0,lo=lo+_Mathimul(al3,bl6)|0,mid=mid+_Mathimul(al3,bh6)|0,mid=mid+_Mathimul(ah3,bl6)|0,hi=hi+_Mathimul(ah3,bh6)|0,lo=lo+_Mathimul(al2,bl7)|0,mid=mid+_Mathimul(al2,bh7)|0,mid=mid+_Mathimul(ah2,bl7)|0,hi=hi+_Mathimul(ah2,bh7)|0,lo=lo+_Mathimul(al1,bl8)|0,mid=mid+_Mathimul(al1,bh8)|0,mid=mid+_Mathimul(ah1,bl8)|0,hi=hi+_Mathimul(ah1,bh8)|0,lo=lo+_Mathimul(al0,bl9)|0,mid=mid+_Mathimul(al0,bh9)|0,mid=mid+_Mathimul(ah0,bl9)|0,hi=hi+_Mathimul(ah0,bh9)|0;var w9=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w9>>>26)|0,w9&=67108863,lo=_Mathimul(al9,bl1),mid=_Mathimul(al9,bh1),mid=mid+_Mathimul(ah9,bl1)|0,hi=_Mathimul(ah9,bh1),lo=lo+_Mathimul(al8,bl2)|0,mid=mid+_Mathimul(al8,bh2)|0,mid=mid+_Mathimul(ah8,bl2)|0,hi=hi+_Mathimul(ah8,bh2)|0,lo=lo+_Mathimul(al7,bl3)|0,mid=mid+_Mathimul(al7,bh3)|0,mid=mid+_Mathimul(ah7,bl3)|0,hi=hi+_Mathimul(ah7,bh3)|0,lo=lo+_Mathimul(al6,bl4)|0,mid=mid+_Mathimul(al6,bh4)|0,mid=mid+_Mathimul(ah6,bl4)|0,hi=hi+_Mathimul(ah6,bh4)|0,lo=lo+_Mathimul(al5,bl5)|0,mid=mid+_Mathimul(al5,bh5)|0,mid=mid+_Mathimul(ah5,bl5)|0,hi=hi+_Mathimul(ah5,bh5)|0,lo=lo+_Mathimul(al4,bl6)|0,mid=mid+_Mathimul(al4,bh6)|0,mid=mid+_Mathimul(ah4,bl6)|0,hi=hi+_Mathimul(ah4,bh6)|0,lo=lo+_Mathimul(al3,bl7)|0,mid=mid+_Mathimul(al3,bh7)|0,mid=mid+_Mathimul(ah3,bl7)|0,hi=hi+_Mathimul(ah3,bh7)|0,lo=lo+_Mathimul(al2,bl8)|0,mid=mid+_Mathimul(al2,bh8)|0,mid=mid+_Mathimul(ah2,bl8)|0,hi=hi+_Mathimul(ah2,bh8)|0,lo=lo+_Mathimul(al1,bl9)|0,mid=mid+_Mathimul(al1,bh9)|0,mid=mid+_Mathimul(ah1,bl9)|0,hi=hi+_Mathimul(ah1,bh9)|0;var w10=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w10>>>26)|0,w10&=67108863,lo=_Mathimul(al9,bl2),mid=_Mathimul(al9,bh2),mid=mid+_Mathimul(ah9,bl2)|0,hi=_Mathimul(ah9,bh2),lo=lo+_Mathimul(al8,bl3)|0,mid=mid+_Mathimul(al8,bh3)|0,mid=mid+_Mathimul(ah8,bl3)|0,hi=hi+_Mathimul(ah8,bh3)|0,lo=lo+_Mathimul(al7,bl4)|0,mid=mid+_Mathimul(al7,bh4)|0,mid=mid+_Mathimul(ah7,bl4)|0,hi=hi+_Mathimul(ah7,bh4)|0,lo=lo+_Mathimul(al6,bl5)|0,mid=mid+_Mathimul(al6,bh5)|0,mid=mid+_Mathimul(ah6,bl5)|0,hi=hi+_Mathimul(ah6,bh5)|0,lo=lo+_Mathimul(al5,bl6)|0,mid=mid+_Mathimul(al5,bh6)|0,mid=mid+_Mathimul(ah5,bl6)|0,hi=hi+_Mathimul(ah5,bh6)|0,lo=lo+_Mathimul(al4,bl7)|0,mid=mid+_Mathimul(al4,bh7)|0,mid=mid+_Mathimul(ah4,bl7)|0,hi=hi+_Mathimul(ah4,bh7)|0,lo=lo+_Mathimul(al3,bl8)|0,mid=mid+_Mathimul(al3,bh8)|0,mid=mid+_Mathimul(ah3,bl8)|0,hi=hi+_Mathimul(ah3,bh8)|0,lo=lo+_Mathimul(al2,bl9)|0,mid=mid+_Mathimul(al2,bh9)|0,mid=mid+_Mathimul(ah2,bl9)|0,hi=hi+_Mathimul(ah2,bh9)|0;var w11=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w11>>>26)|0,w11&=67108863,lo=_Mathimul(al9,bl3),mid=_Mathimul(al9,bh3),mid=mid+_Mathimul(ah9,bl3)|0,hi=_Mathimul(ah9,bh3),lo=lo+_Mathimul(al8,bl4)|0,mid=mid+_Mathimul(al8,bh4)|0,mid=mid+_Mathimul(ah8,bl4)|0,hi=hi+_Mathimul(ah8,bh4)|0,lo=lo+_Mathimul(al7,bl5)|0,mid=mid+_Mathimul(al7,bh5)|0,mid=mid+_Mathimul(ah7,bl5)|0,hi=hi+_Mathimul(ah7,bh5)|0,lo=lo+_Mathimul(al6,bl6)|0,mid=mid+_Mathimul(al6,bh6)|0,mid=mid+_Mathimul(ah6,bl6)|0,hi=hi+_Mathimul(ah6,bh6)|0,lo=lo+_Mathimul(al5,bl7)|0,mid=mid+_Mathimul(al5,bh7)|0,mid=mid+_Mathimul(ah5,bl7)|0,hi=hi+_Mathimul(ah5,bh7)|0,lo=lo+_Mathimul(al4,bl8)|0,mid=mid+_Mathimul(al4,bh8)|0,mid=mid+_Mathimul(ah4,bl8)|0,hi=hi+_Mathimul(ah4,bh8)|0,lo=lo+_Mathimul(al3,bl9)|0,mid=mid+_Mathimul(al3,bh9)|0,mid=mid+_Mathimul(ah3,bl9)|0,hi=hi+_Mathimul(ah3,bh9)|0;var w12=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w12>>>26)|0,w12&=67108863,lo=_Mathimul(al9,bl4),mid=_Mathimul(al9,bh4),mid=mid+_Mathimul(ah9,bl4)|0,hi=_Mathimul(ah9,bh4),lo=lo+_Mathimul(al8,bl5)|0,mid=mid+_Mathimul(al8,bh5)|0,mid=mid+_Mathimul(ah8,bl5)|0,hi=hi+_Mathimul(ah8,bh5)|0,lo=lo+_Mathimul(al7,bl6)|0,mid=mid+_Mathimul(al7,bh6)|0,mid=mid+_Mathimul(ah7,bl6)|0,hi=hi+_Mathimul(ah7,bh6)|0,lo=lo+_Mathimul(al6,bl7)|0,mid=mid+_Mathimul(al6,bh7)|0,mid=mid+_Mathimul(ah6,bl7)|0,hi=hi+_Mathimul(ah6,bh7)|0,lo=lo+_Mathimul(al5,bl8)|0,mid=mid+_Mathimul(al5,bh8)|0,mid=mid+_Mathimul(ah5,bl8)|0,hi=hi+_Mathimul(ah5,bh8)|0,lo=lo+_Mathimul(al4,bl9)|0,mid=mid+_Mathimul(al4,bh9)|0,mid=mid+_Mathimul(ah4,bl9)|0,hi=hi+_Mathimul(ah4,bh9)|0;var w13=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w13>>>26)|0,w13&=67108863,lo=_Mathimul(al9,bl5),mid=_Mathimul(al9,bh5),mid=mid+_Mathimul(ah9,bl5)|0,hi=_Mathimul(ah9,bh5),lo=lo+_Mathimul(al8,bl6)|0,mid=mid+_Mathimul(al8,bh6)|0,mid=mid+_Mathimul(ah8,bl6)|0,hi=hi+_Mathimul(ah8,bh6)|0,lo=lo+_Mathimul(al7,bl7)|0,mid=mid+_Mathimul(al7,bh7)|0,mid=mid+_Mathimul(ah7,bl7)|0,hi=hi+_Mathimul(ah7,bh7)|0,lo=lo+_Mathimul(al6,bl8)|0,mid=mid+_Mathimul(al6,bh8)|0,mid=mid+_Mathimul(ah6,bl8)|0,hi=hi+_Mathimul(ah6,bh8)|0,lo=lo+_Mathimul(al5,bl9)|0,mid=mid+_Mathimul(al5,bh9)|0,mid=mid+_Mathimul(ah5,bl9)|0,hi=hi+_Mathimul(ah5,bh9)|0;var w14=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w14>>>26)|0,w14&=67108863,lo=_Mathimul(al9,bl6),mid=_Mathimul(al9,bh6),mid=mid+_Mathimul(ah9,bl6)|0,hi=_Mathimul(ah9,bh6),lo=lo+_Mathimul(al8,bl7)|0,mid=mid+_Mathimul(al8,bh7)|0,mid=mid+_Mathimul(ah8,bl7)|0,hi=hi+_Mathimul(ah8,bh7)|0,lo=lo+_Mathimul(al7,bl8)|0,mid=mid+_Mathimul(al7,bh8)|0,mid=mid+_Mathimul(ah7,bl8)|0,hi=hi+_Mathimul(ah7,bh8)|0,lo=lo+_Mathimul(al6,bl9)|0,mid=mid+_Mathimul(al6,bh9)|0,mid=mid+_Mathimul(ah6,bl9)|0,hi=hi+_Mathimul(ah6,bh9)|0;var w15=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w15>>>26)|0,w15&=67108863,lo=_Mathimul(al9,bl7),mid=_Mathimul(al9,bh7),mid=mid+_Mathimul(ah9,bl7)|0,hi=_Mathimul(ah9,bh7),lo=lo+_Mathimul(al8,bl8)|0,mid=mid+_Mathimul(al8,bh8)|0,mid=mid+_Mathimul(ah8,bl8)|0,hi=hi+_Mathimul(ah8,bh8)|0,lo=lo+_Mathimul(al7,bl9)|0,mid=mid+_Mathimul(al7,bh9)|0,mid=mid+_Mathimul(ah7,bl9)|0,hi=hi+_Mathimul(ah7,bh9)|0;var w16=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w16>>>26)|0,w16&=67108863,lo=_Mathimul(al9,bl8),mid=_Mathimul(al9,bh8),mid=mid+_Mathimul(ah9,bl8)|0,hi=_Mathimul(ah9,bh8),lo=lo+_Mathimul(al8,bl9)|0,mid=mid+_Mathimul(al8,bh9)|0,mid=mid+_Mathimul(ah8,bl9)|0,hi=hi+_Mathimul(ah8,bh9)|0;var w17=(c+lo|0)+((mid&8191)<<13)|0;c=(hi+(mid>>>13)|0)+(w17>>>26)|0,w17&=67108863,lo=_Mathimul(al9,bl9),mid=_Mathimul(al9,bh9),mid=mid+_Mathimul(ah9,bl9)|0,hi=_Mathimul(ah9,bh9);var w18=(c+lo|0)+((mid&8191)<<13)|0;return c=(hi+(mid>>>13)|0)+(w18>>>26)|0,w18&=67108863,o[0]=w0,o[1]=w1,o[2]=w2,o[3]=w3,o[4]=w4,o[5]=w5,o[6]=w6,o[7]=w7,o[8]=w8,o[9]=w9,o[10]=w10,o[11]=w11,o[12]=w12,o[13]=w13,o[14]=w14,o[15]=w15,o[16]=w16,o[17]=w17,o[18]=w18,c!==0&&(o[19]=c,out.length++),out};!_Mathimul&&(comb10MulTo=smallMulTo),BN.prototype.mulTo=function mulTo(num,out){var res;var len=this.length+num.length;return res=this.length===10&&num.length===10?comb10MulTo(this,num,out):len<63?smallMulTo(this,num,out):len<1024?bigMulTo(this,num,out):jumboMulTo(this,num,out),res},FFTM.prototype.makeRBT=function makeRBT(N){var t=Array(N);var l=BN.prototype._countBits(N)-1;for(var i=0;i<N;i++)t[i]=this.revBin(i,l,N);return t},FFTM.prototype.revBin=function revBin(x,l,N){if(x===0||x===N-1)return x;var rb=0;for(var i=0;i<l;i++)rb|=(x&1)<<l-i-1,x>>=1;return rb},FFTM.prototype.permute=function permute(rbt,rws,iws,rtws,itws,N){for(var i=0;i<N;i++)rtws[i]=rws[rbt[i]],itws[i]=iws[rbt[i]]},FFTM.prototype.transform=function transform(rws,iws,rtws,itws,N,rbt){var _MathPI=Math.PI;this.permute(rbt,rws,iws,rtws,itws,N);for(var s=1;s<N;s<<=1){var l=s<<1;var rtwdf=Math.cos(2*_MathPI/l);var itwdf=Math.sin(2*_MathPI/l);for(var p=0;p<N;p+=l){var rtwdf_=rtwdf;var itwdf_=itwdf;for(var j=0;j<s;j++){var re=rtws[p+j];var ie=itws[p+j];var ro=rtws[p+j+s];var io=itws[p+j+s];var rx=rtwdf_*ro-itwdf_*io;io=rtwdf_*io+itwdf_*ro,ro=rx,rtws[p+j]=re+ro,itws[p+j]=ie+io,rtws[p+j+s]=re-ro,itws[p+j+s]=ie-io,j!==l&&(rx=rtwdf*rtwdf_-itwdf*itwdf_,itwdf_=rtwdf*itwdf_+itwdf*rtwdf_,rtwdf_=rx)}}}},FFTM.prototype.guessLen13b=function guessLen13b(n,m){var N=_Mathmax(m,n)|1;var odd=N&1;var i=0;for(N=N/2|0;N;N>>>=1)i++;return 1<<i+1+odd},FFTM.prototype.conjugate=function conjugate(rws,iws,N){if(!(N<=1))for(var i=0;i<N/2;i++){var t=rws[i];rws[i]=rws[N-i-1],rws[N-i-1]=t,t=iws[i],iws[i]=-iws[N-i-1],iws[N-i-1]=-t}},FFTM.prototype.normalize13b=function normalize13b(ws,N){var carry=0;for(var i=0;i<N/2;i++){var w=_Mathround(ws[2*i+1]/N)*8192+_Mathround(ws[2*i]/N)+carry;ws[i]=w&67108863,carry=w<67108864?0:w/67108864|0}return ws},FFTM.prototype.convert13b=function convert13b(ws,len,rws,N){var carry=0;for(var i=0;i<len;i++)carry+=ws[i]|0,rws[2*i]=carry&8191,carry>>>=13,rws[2*i+1]=carry&8191,carry>>>=13;for(i=2*len;i<N;++i)rws[i]=0;assert(carry===0),assert((carry&~8191)===0)},FFTM.prototype.stub=function stub(N){var ph=Array(N);for(var i=0;i<N;i++)ph[i]=0;return ph},FFTM.prototype.mulp=function mulp(x,y,out){var N=2*this.guessLen13b(x.length,y.length);var rbt=this.makeRBT(N);var _=this.stub(N);var rws=Array(N);var rwst=Array(N);var iwst=Array(N);var nrws=Array(N);var nrwst=Array(N);var niwst=Array(N);var rmws=out.words;rmws.length=N,this.convert13b(x.words,x.length,rws,N),this.convert13b(y.words,y.length,nrws,N),this.transform(rws,_,rwst,iwst,N,rbt),this.transform(nrws,_,nrwst,niwst,N,rbt);for(var i=0;i<N;i++){var rx=rwst[i]*nrwst[i]-iwst[i]*niwst[i];iwst[i]=rwst[i]*niwst[i]+iwst[i]*nrwst[i],rwst[i]=rx}return this.conjugate(rwst,iwst,N),this.transform(rwst,iwst,rmws,_,N,rbt),this.conjugate(rmws,_,N),this.normalize13b(rmws,N),out.negative=x.negative^y.negative,out.length=x.length+y.length,out.strip()},BN.prototype.mul=function mul(num){var out=new BN(null);return out.words=Array(this.length+num.length),this.mulTo(num,out)},BN.prototype.mulf=function mulf(num){var out=new BN(null);return out.words=Array(this.length+num.length),jumboMulTo(this,num,out)},BN.prototype.imul=function imul(num){return this.clone().mulTo(num,this)},BN.prototype.imuln=function imuln(num){assert(typeof num==='number'),assert(num<67108864);var carry=0;for(var i=0;i<this.length;i++){var w=(this.words[i]|0)*num;var lo=(w&67108863)+(carry&67108863);carry>>=26,carry+=w/67108864|0,carry+=lo>>>26,this.words[i]=lo&67108863}return carry!==0&&(this.words[i]=carry,this.length++),this},BN.prototype.muln=function muln(num){return this.clone().imuln(num)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(num){var w=toBitArray(num);if(w.length===0)return new BN(1);var res=this;for(var i=0;i<w.length&&!(w[i]!==0);i++,res=res.sqr());if(++i<w.length)for(var q=res.sqr();i<w.length;i++,q=q.sqr())w[i]!==0&&(res=res.mul(q));return res},BN.prototype.iushln=function iushln(bits){assert(typeof bits==='number'&&bits>=0);var r=bits%26;var s=(bits-r)/26;var carryMask=67108863>>>26-r<<26-r;var i;if(r!==0){var carry=0;for(i=0;i<this.length;i++){var newCarry=this.words[i]&carryMask;var c=(this.words[i]|0)-newCarry<<r;this.words[i]=c|carry,carry=newCarry>>>26-r}carry&&(this.words[i]=carry,this.length++)}if(s!==0){for(i=this.length-1;i>=0;i--)this.words[i+s]=this.words[i];for(i=0;i<s;i++)this.words[i]=0;this.length+=s}return this.strip()},BN.prototype.ishln=function ishln(bits){return assert(this.negative===0),this.iushln(bits)},BN.prototype.iushrn=function iushrn(bits,hint,extended){assert(typeof bits==='number'&&bits>=0);var h;h=hint?(hint-hint%26)/26:0;var r=bits%26;var s=_Mathmin2((bits-r)/26,this.length);var mask=67108863^67108863>>>r<<r;var maskedWords=extended;if(h-=s,h=_Mathmax(0,h),maskedWords){for(var i=0;i<s;i++)maskedWords.words[i]=this.words[i];maskedWords.length=s}if(s===0);else if(this.length>s)for(this.length-=s,i=0;i<this.length;i++)this.words[i]=this.words[i+s];else this.words[0]=0,this.length=1;var carry=0;for(i=this.length-1;i>=0&&(carry!==0||i>=h);i--){var word=this.words[i]|0;this.words[i]=carry<<26-r|word>>>r,carry=word&mask}return maskedWords&&carry!==0&&(maskedWords.words[maskedWords.length++]=carry),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function ishrn(bits,hint,extended){return assert(this.negative===0),this.iushrn(bits,hint,extended)},BN.prototype.shln=function shln(bits){return this.clone().ishln(bits)},BN.prototype.ushln=function ushln(bits){return this.clone().iushln(bits)},BN.prototype.shrn=function shrn(bits){return this.clone().ishrn(bits)},BN.prototype.ushrn=function ushrn(bits){return this.clone().iushrn(bits)},BN.prototype.testn=function testn(bit){assert(typeof bit==='number'&&bit>=0);var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s)return!1;var w=this.words[s];return!!(w&q)},BN.prototype.imaskn=function imaskn(bits){assert(typeof bits==='number'&&bits>=0);var r=bits%26;var s=(bits-r)/26;if(assert(this.negative===0,'imaskn works only with positive numbers'),this.length<=s)return this;if(r!==0&&s++,this.length=_Mathmin2(s,this.length),r!==0){var mask=67108863^67108863>>>r<<r;this.words[this.length-1]&=mask}return this.strip()},BN.prototype.maskn=function maskn(bits){return this.clone().imaskn(bits)},BN.prototype.iaddn=function iaddn(num){return assert(typeof num==='number'),assert(num<67108864),num<0?this.isubn(-num):this.negative===0?this._iaddn(num):this.length===1&&(this.words[0]|0)<num?(this.words[0]=num-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(num),this.negative=1,this)},BN.prototype._iaddn=function _iaddn(num){this.words[0]+=num;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=_Mathmax(this.length,i+1),this},BN.prototype.isubn=function isubn(num){if(assert(typeof num==='number'),assert(num<67108864),num<0)return this.iaddn(-num);if(this.negative!==0)return this.negative=0,this.iaddn(num),this.negative=1,this;if(this.words[0]-=num,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.strip()},BN.prototype.addn=function addn(num){return this.clone().iaddn(num)},BN.prototype.subn=function subn(num){return this.clone().isubn(num)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(num,mul,shift){var len=num.length+shift;var i;this._expand(len);var w;var carry=0;for(i=0;i<num.length;i++){w=(this.words[i+shift]|0)+carry;var right=(num.words[i]|0)*mul;w-=right&67108863,carry=(w>>26)-(right/67108864|0),this.words[i+shift]=w&67108863}for(;i<this.length-shift;i++)w=(this.words[i+shift]|0)+carry,carry=w>>26,this.words[i+shift]=w&67108863;if(carry===0)return this.strip();for(assert(carry===-1),carry=0,i=0;i<this.length;i++)w=-(this.words[i]|0)+carry,carry=w>>26,this.words[i]=w&67108863;return this.negative=1,this.strip()},BN.prototype._wordDiv=function _wordDiv(num,mode){var shift=this.length-num.length;var a=this.clone();var b=num;var bhi=b.words[b.length-1]|0;var bhiBits=this._countBits(bhi);shift=26-bhiBits,shift!==0&&(b=b.ushln(shift),a.iushln(shift),bhi=b.words[b.length-1]|0);var m=a.length-b.length;var q;if(mode!=='mod'){q=new BN(null),q.length=m+1,q.words=Array(q.length);for(var i=0;i<q.length;i++)q.words[i]=0}var diff=a.clone()._ishlnsubmul(b,1,m);diff.negative===0&&(a=diff,q&&(q.words[m]=1));for(var j=m-1;j>=0;j--){var qj=(a.words[b.length+j]|0)*67108864+(a.words[b.length+j-1]|0);for(qj=_Mathmin2(qj/bhi|0,67108863),a._ishlnsubmul(b,qj,j);a.negative!==0;)qj--,a.negative=0,a._ishlnsubmul(b,1,j),!a.isZero()&&(a.negative^=1);q&&(q.words[j]=qj)}return q&&q.strip(),a.strip(),mode!=='div'&&shift!==0&&a.iushrn(shift),{div:q||null,mod:a}},BN.prototype.divmod=function divmod(num,mode,positive){if(assert(!num.isZero()),this.isZero())return{div:new BN(0),mod:new BN(0)};var div,mod,res;return this.negative!==0&&num.negative===0?(res=this.neg().divmod(num,mode),mode!=='mod'&&(div=res.div.neg()),mode!=='div'&&(mod=res.mod.neg(),positive&&mod.negative!==0&&mod.iadd(num)),{div:div,mod:mod}):this.negative===0&&num.negative!==0?(res=this.divmod(num.neg(),mode),mode!=='mod'&&(div=res.div.neg()),{div:div,mod:res.mod}):(this.negative&num.negative)===0?num.length>this.length||this.cmp(num)<0?{div:new BN(0),mod:this}:num.length===1?mode==='div'?{div:this.divn(num.words[0]),mod:null}:mode==='mod'?{div:null,mod:new BN(this.modn(num.words[0]))}:{div:this.divn(num.words[0]),mod:new BN(this.modn(num.words[0]))}:this._wordDiv(num,mode):(res=this.neg().divmod(num.neg(),mode),mode!=='div'&&(mod=res.mod.neg(),positive&&mod.negative!==0&&mod.isub(num)),{div:res.div,mod:mod})},BN.prototype.div=function div(num){return this.divmod(num,'div',!1).div},BN.prototype.mod=function mod(num){return this.divmod(num,'mod',!1).mod},BN.prototype.umod=function umod(num){return this.divmod(num,'mod',!0).mod},BN.prototype.divRound=function divRound(num){var dm=this.divmod(num);if(dm.mod.isZero())return dm.div;var mod=dm.div.negative===0?dm.mod:dm.mod.isub(num);var half=num.ushrn(1);var r2=num.andln(1);var cmp=mod.cmp(half);return cmp<0||r2===1&&cmp===0?dm.div:dm.div.negative===0?dm.div.iaddn(1):dm.div.isubn(1)},BN.prototype.modn=function modn(num){assert(num<=67108863);var p=(1<<26)%num;var acc=0;for(var i=this.length-1;i>=0;i--)acc=(p*acc+(this.words[i]|0))%num;return acc},BN.prototype.idivn=function idivn(num){assert(num<=67108863);var carry=0;for(var i=this.length-1;i>=0;i--){var w=(this.words[i]|0)+carry*67108864;this.words[i]=w/num|0,carry=w%num}return this.strip()},BN.prototype.divn=function divn(num){return this.clone().idivn(num)},BN.prototype.egcd=function egcd(p){assert(p.negative===0),assert(!p.isZero());var x=this;var y=p.clone();x=x.negative===0?x.clone():x.umod(p);var A=new BN(1);var B=new BN(0);var C=new BN(0);var D=new BN(1);for(var g=0;x.isEven()&&y.isEven();)x.iushrn(1),y.iushrn(1),++g;var yp=y.clone();for(var xp=x.clone();!x.isZero();){for(var i=0,im=1;(x.words[0]&im)===0&&i<26;++i,im<<=1);if(i>0)for(x.iushrn(i);i-->0;)(A.isOdd()||B.isOdd())&&(A.iadd(yp),B.isub(xp)),A.iushrn(1),B.iushrn(1);for(var j=0,jm=1;(y.words[0]&jm)===0&&j<26;++j,jm<<=1);if(j>0)for(y.iushrn(j);j-->0;)(C.isOdd()||D.isOdd())&&(C.iadd(yp),D.isub(xp)),C.iushrn(1),D.iushrn(1);x.cmp(y)>=0?(x.isub(y),A.isub(C),B.isub(D)):(y.isub(x),C.isub(A),D.isub(B))}return{a:C,b:D,gcd:y.iushln(g)}},BN.prototype._invmp=function _invmp(p){assert(p.negative===0),assert(!p.isZero());var a=this;var b=p.clone();a=a.negative===0?a.clone():a.umod(p);var x1=new BN(1);var x2=new BN(0);for(var delta=b.clone();a.cmpn(1)>0&&b.cmpn(1)>0;){for(var i=0,im=1;(a.words[0]&im)===0&&i<26;++i,im<<=1);if(i>0)for(a.iushrn(i);i-->0;)x1.isOdd()&&x1.iadd(delta),x1.iushrn(1);for(var j=0,jm=1;(b.words[0]&jm)===0&&j<26;++j,jm<<=1);if(j>0)for(b.iushrn(j);j-->0;)x2.isOdd()&&x2.iadd(delta),x2.iushrn(1);a.cmp(b)>=0?(a.isub(b),x1.isub(x2)):(b.isub(a),x2.isub(x1))}var res;return res=a.cmpn(1)===0?x1:x2,res.cmpn(0)<0&&res.iadd(p),res},BN.prototype.gcd=function gcd(num){if(this.isZero())return num.abs();if(num.isZero())return this.abs();var a=this.clone();var b=num.clone();a.negative=0,b.negative=0;for(var shift=0;a.isEven()&&b.isEven();shift++)a.iushrn(1),b.iushrn(1);do{for(;a.isEven();)a.iushrn(1);for(;b.isEven();)b.iushrn(1);var r=a.cmp(b);if(r<0){var t=a;a=b,b=t}else if(r===0||b.cmpn(1)===0)break;a.isub(b)}while(!0);return b.iushln(shift)},BN.prototype.invm=function invm(num){return this.egcd(num).a.umod(num)},BN.prototype.isEven=function isEven(){return(this.words[0]&1)===0},BN.prototype.isOdd=function isOdd(){return(this.words[0]&1)===1},BN.prototype.andln=function andln(num){return this.words[0]&num},BN.prototype.bincn=function bincn(bit){assert(typeof bit==='number');var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s)return this._expand(s+1),this.words[s]|=q,this;var carry=q;for(var i=s;carry!==0&&i<this.length;i++){var w=this.words[i]|0;w+=carry,carry=w>>>26,w&=67108863,this.words[i]=w}return carry!==0&&(this.words[i]=carry,this.length++),this},BN.prototype.isZero=function isZero(){return this.length===1&&this.words[0]===0},BN.prototype.cmpn=function cmpn(num){var negative=num<0;if(this.negative!==0&&!negative)return-1;if(this.negative===0&&negative)return 1;this.strip();var res;if(this.length>1)res=1;else{negative&&(num=-num),assert(num<=67108863,'Number is too big');var w=this.words[0]|0;res=w===num?0:w<num?-1:1}return this.negative===0?res:-res|0},BN.prototype.cmp=function cmp(num){if(this.negative!==0&&num.negative===0)return-1;if(this.negative===0&&num.negative!==0)return 1;var res=this.ucmp(num);return this.negative===0?res:-res|0},BN.prototype.ucmp=function ucmp(num){if(this.length>num.length)return 1;if(this.length<num.length)return-1;var res=0;for(var i=this.length-1;i>=0;i--){var a=this.words[i]|0;var b=num.words[i]|0;if(a!==b){a<b?res=-1:a>b&&(res=1);break}}return res},BN.prototype.gtn=function gtn(num){return this.cmpn(num)===1},BN.prototype.gt=function gt(num){return this.cmp(num)===1},BN.prototype.gten=function gten(num){return this.cmpn(num)>=0},BN.prototype.gte=function gte(num){return this.cmp(num)>=0},BN.prototype.ltn=function ltn(num){return this.cmpn(num)===-1},BN.prototype.lt=function lt(num){return this.cmp(num)===-1},BN.prototype.lten=function lten(num){return this.cmpn(num)<=0},BN.prototype.lte=function lte(num){return this.cmp(num)<=0},BN.prototype.eqn=function eqn(num){return this.cmpn(num)===0},BN.prototype.eq=function eq(num){return this.cmp(num)===0},BN.red=function red(num){return new Red(num)},BN.prototype.toRed=function toRed(ctx){return assert(!this.red,'Already a number in reduction context'),assert(this.negative===0,'red works only with positives'),ctx.convertTo(this)._forceRed(ctx)},BN.prototype.fromRed=function fromRed(){return assert(this.red,'fromRed works only with numbers in reduction context'),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(ctx){return this.red=ctx,this},BN.prototype.forceRed=function forceRed(ctx){return assert(!this.red,'Already a number in reduction context'),this._forceRed(ctx)},BN.prototype.redAdd=function redAdd(num){return assert(this.red,'redAdd works only with red numbers'),this.red.add(this,num)},BN.prototype.redIAdd=function redIAdd(num){return assert(this.red,'redIAdd works only with red numbers'),this.red.iadd(this,num)},BN.prototype.redSub=function redSub(num){return assert(this.red,'redSub works only with red numbers'),this.red.sub(this,num)},BN.prototype.redISub=function redISub(num){return assert(this.red,'redISub works only with red numbers'),this.red.isub(this,num)},BN.prototype.redShl=function redShl(num){return assert(this.red,'redShl works only with red numbers'),this.red.shl(this,num)},BN.prototype.redMul=function redMul(num){return assert(this.red,'redMul works only with red numbers'),this.red._verify2(this,num),this.red.mul(this,num)},BN.prototype.redIMul=function redIMul(num){return assert(this.red,'redMul works only with red numbers'),this.red._verify2(this,num),this.red.imul(this,num)},BN.prototype.redSqr=function redSqr(){return assert(this.red,'redSqr works only with red numbers'),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,'redISqr works only with red numbers'),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,'redSqrt works only with red numbers'),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,'redInvm works only with red numbers'),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,'redNeg works only with red numbers'),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(num){return assert(this.red&&!num.red,'redPow(normalNum)'),this.red._verify1(this),this.red.pow(this,num)};var primes={k256:null,p224:null,p192:null,p25519:null};MPrime.prototype._tmp=function _tmp(){var tmp=new BN(null);return tmp.words=Array(_Mathceil(this.n/13)),tmp},MPrime.prototype.ireduce=function ireduce(num){var r=num;var rlen;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),rlen=r.bitLength();while(rlen>this.n);var cmp=rlen<this.n?-1:r.ucmp(this.p);return cmp===0?(r.words[0]=0,r.length=1):cmp>0?r.isub(this.p):r.strip(),r},MPrime.prototype.split=function split(input,out){input.iushrn(this.n,0,out)},MPrime.prototype.imulK=function imulK(num){return num.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(input,output){var mask=4194303;var outLen=_Mathmin2(input.length,9);for(var i=0;i<outLen;i++)output.words[i]=input.words[i];if(output.length=outLen,input.length<=9)return input.words[0]=0,void(input.length=1);var prev=input.words[9];for(output.words[output.length++]=prev&mask,i=10;i<input.length;i++){var next=input.words[i]|0;input.words[i-10]=(next&mask)<<4|prev>>>22,prev=next}prev>>>=22,input.words[i-10]=prev,input.length-=prev===0&&input.length>10?10:9},K256.prototype.imulK=function imulK(num){num.words[num.length]=0,num.words[num.length+1]=0,num.length+=2;var lo=0;for(var i=0;i<num.length;i++){var w=num.words[i]|0;lo+=w*977,num.words[i]=lo&67108863,lo=w*64+(lo/67108864|0)}return num.words[num.length-1]===0&&(num.length--,num.words[num.length-1]===0&&num.length--),num},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(num){var carry=0;for(var i=0;i<num.length;i++){var hi=(num.words[i]|0)*19+carry;var lo=hi&67108863;hi>>>=26,num.words[i]=lo,carry=hi}return carry!==0&&(num.words[num.length++]=carry),num},BN._prime=function prime(name){if(primes[name])return primes[name];var prime;if(name==='k256')prime=new K256;else if(name==='p224')prime=new P224;else if(name==='p192')prime=new P192;else if(name==='p25519')prime=new P25519;else throw new Error('Unknown prime '+name);return primes[name]=prime,prime},Red.prototype._verify1=function _verify1(a){assert(a.negative===0,'red works only with positives'),assert(a.red,'red works only with red numbers')},Red.prototype._verify2=function _verify2(a,b){assert((a.negative|b.negative)===0,'red works only with positives'),assert(a.red&&a.red===b.red,'red works only with red numbers')},Red.prototype.imod=function imod(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},Red.prototype.neg=function neg(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},Red.prototype.add=function add(a,b){this._verify2(a,b);var res=a.add(b);return res.cmp(this.m)>=0&&res.isub(this.m),res._forceRed(this)},Red.prototype.iadd=function iadd(a,b){this._verify2(a,b);var res=a.iadd(b);return res.cmp(this.m)>=0&&res.isub(this.m),res},Red.prototype.sub=function sub(a,b){this._verify2(a,b);var res=a.sub(b);return res.cmpn(0)<0&&res.iadd(this.m),res._forceRed(this)},Red.prototype.isub=function isub(a,b){this._verify2(a,b);var res=a.isub(b);return res.cmpn(0)<0&&res.iadd(this.m),res},Red.prototype.shl=function shl(a,num){return this._verify1(a),this.imod(a.ushln(num))},Red.prototype.imul=function imul(a,b){return this._verify2(a,b),this.imod(a.imul(b))},Red.prototype.mul=function mul(a,b){return this._verify2(a,b),this.imod(a.mul(b))},Red.prototype.isqr=function isqr(a){return this.imul(a,a.clone())},Red.prototype.sqr=function sqr(a){return this.mul(a,a)},Red.prototype.sqrt=function sqrt(a){if(a.isZero())return a.clone();var mod3=this.m.andln(3);if(assert(mod3%2===1),mod3===3){var pow=this.m.add(new BN(1)).iushrn(2);return this.pow(a,pow)}var q=this.m.subn(1);for(var s=0;!q.isZero()&&q.andln(1)===0;)s++,q.iushrn(1);assert(!q.isZero());var one=new BN(1).toRed(this);var nOne=one.redNeg();var lpow=this.m.subn(1).iushrn(1);var z=this.m.bitLength();for(z=new BN(2*z*z).toRed(this);this.pow(z,lpow).cmp(nOne)!==0;)z.redIAdd(nOne);var c=this.pow(z,q);var r=this.pow(a,q.addn(1).iushrn(1));var t=this.pow(a,q);for(var m=s;t.cmp(one)!==0;){var tmp=t;for(var i=0;tmp.cmp(one)!==0;i++)tmp=tmp.redSqr();assert(i<m);var b=this.pow(c,new BN(1).iushln(m-i-1));r=r.redMul(b),c=b.redSqr(),t=t.redMul(c),m=i}return r},Red.prototype.invm=function invm(a){var inv=a._invmp(this.m);return inv.negative===0?this.imod(inv):(inv.negative=0,this.imod(inv).redNeg())},Red.prototype.pow=function pow(a,num){if(num.isZero())return new BN(1).toRed(this);if(num.cmpn(1)===0)return a.clone();var windowSize=4;var wnd=Array(1<<windowSize);wnd[0]=new BN(1).toRed(this),wnd[1]=a;for(var i=2;i<wnd.length;i++)wnd[i]=this.mul(wnd[i-1],a);var res=wnd[0];var current=0;var currentLen=0;var start=num.bitLength()%26;for(start===0&&(start=26),i=num.length-1;i>=0;i--){var word=num.words[i];for(var j=start-1;j>=0;j--){var bit=word>>j&1;if(res!==wnd[0]&&(res=this.sqr(res)),bit===0&&current===0){currentLen=0;continue}current<<=1,current|=bit,currentLen++,(currentLen===windowSize||i===0&&j===0)&&(res=this.mul(res,wnd[current]),currentLen=0,current=0)}start=26}return res},Red.prototype.convertTo=function convertTo(num){var r=num.umod(this.m);return r===num?r.clone():r},Red.prototype.convertFrom=function convertFrom(num){var res=num.clone();return res.red=null,res},BN.mont=function mont(num){return new Mont(num)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(num){return this.imod(num.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(num){var r=this.imod(num.mul(this.rinv));return r.red=null,r},Mont.prototype.imul=function imul(a,b){if(a.isZero()||b.isZero())return a.words[0]=0,a.length=1,a;var t=a.imul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;return u.cmp(this.m)>=0?res=u.isub(this.m):u.cmpn(0)<0&&(res=u.iadd(this.m)),res._forceRed(this)},Mont.prototype.mul=function mul(a,b){if(a.isZero()||b.isZero())return new BN(0)._forceRed(this);var t=a.mul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;return u.cmp(this.m)>=0?res=u.isub(this.m):u.cmpn(0)<0&&(res=u.iadd(this.m)),res._forceRed(this)},Mont.prototype.invm=function invm(a){var res=this.imod(a._invmp(this.m).mul(this.r2));return res._forceRed(this)}})(typeof module==='undefined'||module,this)}).call(exports,__webpack_require__(38)(module))},function(module,exports,__webpack_require__){function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}var buffer=__webpack_require__(1);var Buffer=buffer.Buffer;Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if(typeof arg==='number')throw new TypeError('Argument must not be a number');return Buffer(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if(typeof size!=='number')throw new TypeError('Argument must be a number');var buf=Buffer(size);return fill===undefined?buf.fill(0):typeof encoding==='string'?buf.fill(fill,encoding):buf.fill(fill),buf},SafeBuffer.allocUnsafe=function(size){if(typeof size!=='number')throw new TypeError('Argument must be a number');return Buffer(size)},SafeBuffer.allocUnsafeSlow=function(size){if(typeof size!=='number')throw new TypeError('Argument must be a number');return buffer.SlowBuffer(size)}},function(module,exports,__webpack_require__){'use strict';var elliptic=exports;elliptic.version=__webpack_require__(129).version,elliptic.utils=__webpack_require__(128),elliptic.rand=__webpack_require__(43),elliptic.curve=__webpack_require__(20),elliptic.curves=__webpack_require__(120),elliptic.ec=__webpack_require__(121),elliptic.eddsa=__webpack_require__(124)},function(module,exports){function assert(val,msg){if(!val)throw new Error(msg||'Assertion failed')}module.exports=assert,assert.equal=function assertEqual(l,r,msg){if(l!=r)throw new Error(msg||'Assertion failed: '+l+' != '+r)}},function(module,exports,__webpack_require__){'use strict';function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if(!(typeof msg==='string'))for(i=0;i<msg.length;i++)res[i]=msg[i]|0;else if(!enc)for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i);var hi=c>>8;var lo=c&255;hi?res.push(hi,lo):res.push(lo)}else if(enc==='hex')for(msg=msg.replace(/[^a-z0-9]+/ig,''),msg.length%2!==0&&(msg='0'+msg),i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16));return res}function toHex(msg){var res='';for(var i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res}function htonl(w){var res=w>>>24|w>>>8&65280|w<<8&16711680|(w&255)<<24;return res>>>0}function toHex32(msg,endian){var res='';for(var i=0;i<msg.length;i++){var w=msg[i];endian==='little'&&(w=htonl(w)),res+=zero8(w.toString(16))}return res}function zero2(word){return word.length===1?'0'+word:word}function zero8(word){return word.length===7?'0'+word:word.length===6?'00'+word:word.length===5?'000'+word:word.length===4?'0000'+word:word.length===3?'00000'+word:word.length===2?'000000'+word:word.length===1?'0000000'+word:word}function join32(msg,start,end,endian){var len=end-start;assert(len%4===0);var res=Array(len/4);for(var i=0,k=start;i<res.length;i++,k+=4){var w;w=endian==='big'?msg[k]<<24|msg[k+1]<<16|msg[k+2]<<8|msg[k+3]:msg[k+3]<<24|msg[k+2]<<16|msg[k+1]<<8|msg[k],res[i]=w>>>0}return res}function split32(msg,endian){var res=Array(msg.length*4);for(var i=0,k=0;i<msg.length;i++,k+=4){var m=msg[i];endian==='big'?(res[k]=m>>>24,res[k+1]=m>>>16&255,res[k+2]=m>>>8&255,res[k+3]=m&255):(res[k+3]=m>>>24,res[k+2]=m>>>16&255,res[k+1]=m>>>8&255,res[k]=m&255)}return res}function rotr32(w,b){return w>>>b|w<<32-b}function rotl32(w,b){return w<<b|w>>>32-b}function sum32(a,b){return a+b>>>0}function sum32_3(a,b,c){return a+b+c>>>0}function sum32_4(a,b,c,d){return a+b+c+d>>>0}function sum32_5(a,b,c,d,e){return a+b+c+d+e>>>0}function sum64(buf,pos,ah,al){var bh=buf[pos];var bl=buf[pos+1];var lo=al+bl>>>0;var hi=(lo<al?1:0)+ah+bh;buf[pos]=hi>>>0,buf[pos+1]=lo}function sum64_hi(ah,al,bh,bl){var lo=al+bl>>>0;var hi=(lo<al?1:0)+ah+bh;return hi>>>0}function sum64_lo(ah,al,bh,bl){var lo=al+bl;return lo>>>0}function sum64_4_hi(ah,al,bh,bl,ch,cl,dh,dl){var carry=0;var lo=al;lo=lo+bl>>>0,carry+=lo<al?1:0,lo=lo+cl>>>0,carry+=lo<cl?1:0,lo=lo+dl>>>0,carry+=lo<dl?1:0;var hi=ah+bh+ch+dh+carry;return hi>>>0}function sum64_4_lo(ah,al,bh,bl,ch,cl,dh,dl){var lo=al+bl+cl+dl;return lo>>>0}function sum64_5_hi(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var carry=0;var lo=al;lo=lo+bl>>>0,carry+=lo<al?1:0,lo=lo+cl>>>0,carry+=lo<cl?1:0,lo=lo+dl>>>0,carry+=lo<dl?1:0,lo=lo+el>>>0,carry+=lo<el?1:0;var hi=ah+bh+ch+dh+eh+carry;return hi>>>0}function sum64_5_lo(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var lo=al+bl+cl+dl+el;return lo>>>0}function rotr64_hi(ah,al,num){var r=al<<32-num|ah>>>num;return r>>>0}function rotr64_lo(ah,al,num){var r=ah<<32-num|al>>>num;return r>>>0}function shr64_hi(ah,al,num){return ah>>>num}function shr64_lo(ah,al,num){var r=ah<<32-num|al>>>num;return r>>>0}var assert=__webpack_require__(5);var inherits=__webpack_require__(0);exports.inherits=inherits,exports.toArray=toArray,exports.toHex=toHex,exports.htonl=htonl,exports.toHex32=toHex32,exports.zero2=zero2,exports.zero8=zero8,exports.join32=join32,exports.split32=split32,exports.rotr32=rotr32,exports.rotl32=rotl32,exports.sum32=sum32,exports.sum32_3=sum32_3,exports.sum32_4=sum32_4,exports.sum32_5=sum32_5,exports.sum64=sum64,exports.sum64_hi=sum64_hi,exports.sum64_lo=sum64_lo,exports.sum64_4_hi=sum64_4_hi,exports.sum64_4_lo=sum64_4_lo,exports.sum64_5_hi=sum64_5_hi,exports.sum64_5_lo=sum64_5_lo,exports.rotr64_hi=rotr64_hi,exports.rotr64_lo=rotr64_lo,exports.shr64_hi=shr64_hi,exports.shr64_lo=shr64_lo},function(module,exports){var g;g=function(){return this}();try{g=g||Function('return this')()||(1,eval)('this')}catch(e){typeof window==='object'&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){function CipherBase(hashMode){Transform.call(this),this.hashMode=typeof hashMode==='string',this.hashMode?this[hashMode]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}var Buffer=__webpack_require__(3).Buffer;var Transform=__webpack_require__(24).Transform;var StringDecoder=__webpack_require__(32).StringDecoder;var inherits=__webpack_require__(0);inherits(CipherBase,Transform),CipherBase.prototype.update=function(data,inputEnc,outputEnc){typeof data==='string'&&(data=Buffer.from(data,inputEnc));var outData=this._update(data);return this.hashMode?this:(outputEnc&&(outData=this._toString(outData,outputEnc)),outData)},CipherBase.prototype.setAutoPadding=function(){},CipherBase.prototype.getAuthTag=function(){throw new Error('trying to get auth tag in unsupported state')},CipherBase.prototype.setAuthTag=function(){throw new Error('trying to set auth tag in unsupported state')},CipherBase.prototype.setAAD=function(){throw new Error('trying to set aad in unsupported state')},CipherBase.prototype._transform=function(data,_,next){var err;try{this.hashMode?this._update(data):this.push(this._update(data))}catch(e){err=e}finally{next(err)}},CipherBase.prototype._flush=function(done){var err;try{this.push(this.__final())}catch(e){err=e}done(err)},CipherBase.prototype._finalOrDigest=function(outputEnc){var outData=this.__final()||Buffer.alloc(0);return outputEnc&&(outData=this._toString(outData,outputEnc,!0)),outData},CipherBase.prototype._toString=function(value,enc,fin){if(!this._decoder&&(this._decoder=new StringDecoder(enc),this._encoding=enc),this._encoding!==enc)throw new Error('can\'t switch encodings');var out=this._decoder.write(value);return fin&&(out+=this._decoder.end()),out},module.exports=CipherBase},function(module,exports){function defaultSetTimout(){throw new Error('setTimeout has not been defined')}function defaultClearTimeout(){throw new Error('clearTimeout has not been defined')}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;(function(){try{cachedSetTimeout=typeof setTimeout==='function'?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout=typeof clearTimeout==='function'?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}})();var queue=[];var draining=!1;var currentQueue;var queueIndex=-1;process.nextTick=function(fun){var args=Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),queue.length===1&&!draining&&runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title='browser',process.browser=!0,process.env={},process.argv=[],process.version='',process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error('process.binding is not supported')},process.cwd=function(){return'/'},process.chdir=function(dir){throw new Error('process.chdir is not supported')},process.umask=function(){return 0}},function(module,exports,__webpack_require__){'use strict';function Duplex(options){return this instanceof Duplex?void(Readable.call(this,options),Writable.call(this,options),options&&options.readable===!1&&(this.readable=!1),options&&options.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,options&&options.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once('end',onend)):new Duplex(options)}function onend(){this.allowHalfOpen||this._writableState.ended||processNextTick(onEndNT,this)}function onEndNT(self){self.end()}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++)f(xs[i],i)}var processNextTick=__webpack_require__(23);var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var util=__webpack_require__(15);util.inherits=__webpack_require__(0);var Readable=__webpack_require__(65);var Writable=__webpack_require__(33);util.inherits(Duplex,Readable);var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];!Duplex.prototype[method]&&(Duplex.prototype[method]=Writable.prototype[method])}Object.defineProperty(Duplex.prototype,'destroyed',{get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&this._readableState.destroyed&&this._writableState.destroyed},set:function(value){this._readableState===undefined||this._writableState===undefined||(this._readableState.destroyed=value,this._writableState.destroyed=value)}}),Duplex.prototype._destroy=function(err,cb){this.push(null),this.end(),processNextTick(cb,err)}},function(module,exports,__webpack_require__){(function(Buffer){function Hash(blockSize,finalSize){this._block=new Buffer(blockSize),this._finalSize=finalSize,this._blockSize=blockSize,this._len=0,this._s=0}Hash.prototype.update=function(data,enc){typeof data==='string'&&(enc=enc||'utf8',data=new Buffer(data,enc));var l=this._len+=data.length;var s=this._s||0;var f=0;for(var buffer=this._block;s<l;){var t=Math.min(data.length,f+this._blockSize-s%this._blockSize);var ch=t-f;for(var i=0;i<ch;i++)buffer[s%this._blockSize+i]=data[i+f];s+=ch,f+=ch,s%this._blockSize===0&&this._update(buffer)}return this._s=s,this},Hash.prototype.digest=function(enc){var l=this._len*8;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),l%(this._blockSize*8)>=this._finalSize*8&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(l,this._blockSize-4);var hash=this._update(this._block)||this._hash();return enc?hash.toString(enc):hash},Hash.prototype._update=function(){throw new Error('_update must be implemented by subclass')},module.exports=Hash}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){var asn1=exports;asn1.bignum=__webpack_require__(2),asn1.define=__webpack_require__(78).define,asn1.base=__webpack_require__(13),asn1.constants=__webpack_require__(40),asn1.decoders=__webpack_require__(82),asn1.encoders=__webpack_require__(84)},function(module,exports,__webpack_require__){var base=exports;base.Reporter=__webpack_require__(80).Reporter,base.DecoderBuffer=__webpack_require__(39).DecoderBuffer,base.EncoderBuffer=__webpack_require__(39).EncoderBuffer,base.Node=__webpack_require__(79)},function(module,exports,__webpack_require__){(function(Buffer){module.exports=function xor(a,b){var length=Math.min(a.length,b.length);var buffer=new Buffer(length);for(var i=0;i<length;++i)buffer[i]=a[i]^b[i];return buffer}}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){function isArray(arg){return Array.isArray?Array.isArray(arg):objectToString(arg)==='[object Array]'}function isBoolean(arg){return typeof arg==='boolean'}function isNull(arg){return arg===null}function isNullOrUndefined(arg){return arg==null}function isNumber(arg){return typeof arg==='number'}function isString(arg){return typeof arg==='string'}function isSymbol(arg){return typeof arg==='symbol'}function isUndefined(arg){return arg===void 0}function isRegExp(re){return objectToString(re)==='[object RegExp]'}function isObject(arg){return typeof arg==='object'&&arg!==null}function isDate(d){return objectToString(d)==='[object Date]'}function isError(e){return objectToString(e)==='[object Error]'||e instanceof Error}function isFunction(arg){return typeof arg==='function'}function isPrimitive(arg){return arg===null||typeof arg==='boolean'||typeof arg==='number'||typeof arg==='string'||typeof arg==='symbol'||typeof arg==='undefined'}function objectToString(o){return Object.prototype.toString.call(o)}exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=Buffer.isBuffer}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){'use strict';(function(Buffer){function HashNoConstructor(hash){Base.call(this,'digest'),this._hash=hash,this.buffers=[]}function Hash(hash){Base.call(this,'digest'),this._hash=hash}var inherits=__webpack_require__(0);var md5=__webpack_require__(28);var RIPEMD160=__webpack_require__(35);var sha=__webpack_require__(36);var Base=__webpack_require__(8);inherits(HashNoConstructor,Base),HashNoConstructor.prototype._update=function(data){this.buffers.push(data)},HashNoConstructor.prototype._final=function(){var buf=Buffer.concat(this.buffers);var r=this._hash(buf);return this.buffers=null,r},inherits(Hash,Base),Hash.prototype._update=function(data){this._hash.update(data)},Hash.prototype._final=function(){return this._hash.digest()},module.exports=function createHash(alg){return alg=alg.toLowerCase(),alg==='md5'?new HashNoConstructor(md5):alg==='rmd160'||alg==='ripemd160'?new Hash(new RIPEMD160()):new Hash(sha(alg))}}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){'use strict';function BlockHash(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian='big',this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var utils=__webpack_require__(6);var assert=__webpack_require__(5);exports.BlockHash=BlockHash,BlockHash.prototype.update=function update(msg,enc){if(msg=utils.toArray(msg,enc),this.pending=this.pending?this.pending.concat(msg):msg,this.pendingTotal+=msg.length,this.pending.length>=this._delta8){msg=this.pending;var r=msg.length%this._delta8;this.pending=msg.slice(msg.length-r,msg.length),this.pending.length===0&&(this.pending=null),msg=utils.join32(msg,0,msg.length-r,this.endian);for(var i=0;i<msg.length;i+=this._delta32)this._update(msg,i,i+this._delta32)}return this},BlockHash.prototype.digest=function digest(enc){return this.update(this._pad()),assert(this.pending===null),this._digest(enc)},BlockHash.prototype._pad=function pad(){var len=this.pendingTotal;var bytes=this._delta8;var k=bytes-(len+this.padLength)%bytes;var res=Array(k+this.padLength);res[0]=128;for(var i=1;i<k;i++)res[i]=0;if(len<<=3,this.endian==='big'){for(var t=8;t<this.padLength;t++)res[i++]=0;res[i++]=0,res[i++]=0,res[i++]=0,res[i++]=0,res[i++]=len>>>24&255,res[i++]=len>>>16&255,res[i++]=len>>>8&255,res[i++]=len&255}else for(res[i++]=len&255,res[i++]=len>>>8&255,res[i++]=len>>>16&255,res[i++]=len>>>24&255,res[i++]=0,res[i++]=0,res[i++]=0,res[i++]=0,t=8;t<this.padLength;t++)res[i++]=0;return res}},function(module,exports,__webpack_require__){'use strict';(function(global,process){function oldBrowser(){throw new Error('secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11')}function randomBytes(size,cb){if(size>65536)throw new Error('requested too many random bytes');var rawBytes=new global.Uint8Array(size);size>0&&crypto.getRandomValues(rawBytes);var bytes=Buffer.from(rawBytes.buffer);return typeof cb==='function'?process.nextTick(function(){cb(null,bytes)}):bytes}var Buffer=__webpack_require__(3).Buffer;var crypto=global.crypto||global.msCrypto;module.exports=crypto&&crypto.getRandomValues?randomBytes:oldBrowser}).call(exports,__webpack_require__(7),__webpack_require__(9))},function(module,exports,__webpack_require__){function asUInt32Array(buf){!Buffer.isBuffer(buf)&&(buf=Buffer.from(buf));var len=buf.length/4|0;var out=Array(len);for(var i=0;i<len;i++)out[i]=buf.readUInt32BE(i*4);return out}function scrubVec(v){for(var i=0;i<v.length;v++)v[i]=0}function cryptBlock(M,keySchedule,SUB_MIX,SBOX,nRounds){var SUB_MIX0=SUB_MIX[0];var SUB_MIX1=SUB_MIX[1];var SUB_MIX2=SUB_MIX[2];var SUB_MIX3=SUB_MIX[3];var s0=M[0]^keySchedule[0];var s1=M[1]^keySchedule[1];var s2=M[2]^keySchedule[2];var s3=M[3]^keySchedule[3];var t0,t1,t2,t3;var ksRow=4;for(var round=1;round<nRounds;round++)t0=SUB_MIX0[s0>>>24]^SUB_MIX1[s1>>>16&255]^SUB_MIX2[s2>>>8&255]^SUB_MIX3[s3&255]^keySchedule[ksRow++],t1=SUB_MIX0[s1>>>24]^SUB_MIX1[s2>>>16&255]^SUB_MIX2[s3>>>8&255]^SUB_MIX3[s0&255]^keySchedule[ksRow++],t2=SUB_MIX0[s2>>>24]^SUB_MIX1[s3>>>16&255]^SUB_MIX2[s0>>>8&255]^SUB_MIX3[s1&255]^keySchedule[ksRow++],t3=SUB_MIX0[s3>>>24]^SUB_MIX1[s0>>>16&255]^SUB_MIX2[s1>>>8&255]^SUB_MIX3[s2&255]^keySchedule[ksRow++],s0=t0,s1=t1,s2=t2,s3=t3;return t0=(SBOX[s0>>>24]<<24|SBOX[s1>>>16&255]<<16|SBOX[s2>>>8&255]<<8|SBOX[s3&255])^keySchedule[ksRow++],t1=(SBOX[s1>>>24]<<24|SBOX[s2>>>16&255]<<16|SBOX[s3>>>8&255]<<8|SBOX[s0&255])^keySchedule[ksRow++],t2=(SBOX[s2>>>24]<<24|SBOX[s3>>>16&255]<<16|SBOX[s0>>>8&255]<<8|SBOX[s1&255])^keySchedule[ksRow++],t3=(SBOX[s3>>>24]<<24|SBOX[s0>>>16&255]<<16|SBOX[s1>>>8&255]<<8|SBOX[s2&255])^keySchedule[ksRow++],t0>>>=0,t1>>>=0,t2>>>=0,t3>>>=0,[t0,t1,t2,t3]}function AES(key){this._key=asUInt32Array(key),this._reset()}var Buffer=__webpack_require__(3).Buffer;var RCON=[0,1,2,4,8,16,32,64,128,27,54];var G=function(){var d=Array(256);for(var j=0;j<256;j++)d[j]=j<128?j<<1:j<<1^283;var SBOX=[];var INV_SBOX=[];var SUB_MIX=[[],[],[],[]];var INV_SUB_MIX=[[],[],[],[]];var x=0;var xi=0;for(var i=0;i<256;++i){var sx=xi^xi<<1^xi<<2^xi<<3^xi<<4;sx=sx>>>8^sx&255^99,SBOX[x]=sx,INV_SBOX[sx]=x;var x2=d[x];var x4=d[x2];var x8=d[x4];var t=d[sx]*257^sx*16843008;SUB_MIX[0][x]=t<<24|t>>>8,SUB_MIX[1][x]=t<<16|t>>>16,SUB_MIX[2][x]=t<<8|t>>>24,SUB_MIX[3][x]=t,t=x8*16843009^x4*65537^x2*257^x*16843008,INV_SUB_MIX[0][sx]=t<<24|t>>>8,INV_SUB_MIX[1][sx]=t<<16|t>>>16,INV_SUB_MIX[2][sx]=t<<8|t>>>24,INV_SUB_MIX[3][sx]=t,x===0?x=xi=1:(x=x2^d[d[d[x8^x2]]],xi^=d[d[xi]])}return{SBOX:SBOX,INV_SBOX:INV_SBOX,SUB_MIX:SUB_MIX,INV_SUB_MIX:INV_SUB_MIX}}();AES.blockSize=4*4,AES.keySize=256/8,AES.prototype.blockSize=AES.blockSize,AES.prototype.keySize=AES.keySize,AES.prototype._reset=function(){var keyWords=this._key;var keySize=keyWords.length;var nRounds=keySize+6;var ksRows=(nRounds+1)*4;var keySchedule=[];for(var k=0;k<keySize;k++)keySchedule[k]=keyWords[k];for(k=keySize;k<ksRows;k++){var t=keySchedule[k-1];k%keySize===0?(t=t<<8|t>>>24,t=G.SBOX[t>>>24]<<24|G.SBOX[t>>>16&255]<<16|G.SBOX[t>>>8&255]<<8|G.SBOX[t&255],t^=RCON[k/keySize|0]<<24):keySize>6&&k%keySize===4&&(t=G.SBOX[t>>>24]<<24|G.SBOX[t>>>16&255]<<16|G.SBOX[t>>>8&255]<<8|G.SBOX[t&255]),keySchedule[k]=keySchedule[k-keySize]^t}var invKeySchedule=[];for(var ik=0;ik<ksRows;ik++){var ksR=ksRows-ik;var tt=keySchedule[ksR-(ik%4?0:4)];invKeySchedule[ik]=ik<4||ksR<=4?tt:G.INV_SUB_MIX[0][G.SBOX[tt>>>24]]^G.INV_SUB_MIX[1][G.SBOX[tt>>>16&255]]^G.INV_SUB_MIX[2][G.SBOX[tt>>>8&255]]^G.INV_SUB_MIX[3][G.SBOX[tt&255]]}this._nRounds=nRounds,this._keySchedule=keySchedule,this._invKeySchedule=invKeySchedule},AES.prototype.encryptBlockRaw=function(M){return M=asUInt32Array(M),cryptBlock(M,this._keySchedule,G.SUB_MIX,G.SBOX,this._nRounds)},AES.prototype.encryptBlock=function(M){var out=this.encryptBlockRaw(M);var buf=Buffer.allocUnsafe(16);return buf.writeUInt32BE(out[0],0),buf.writeUInt32BE(out[1],4),buf.writeUInt32BE(out[2],8),buf.writeUInt32BE(out[3],12),buf},AES.prototype.decryptBlock=function(M){M=asUInt32Array(M);var m1=M[1];M[1]=M[3],M[3]=m1;var out=cryptBlock(M,this._invKeySchedule,G.INV_SUB_MIX,G.INV_SBOX,this._nRounds);var buf=Buffer.allocUnsafe(16);return buf.writeUInt32BE(out[0],0),buf.writeUInt32BE(out[3],4),buf.writeUInt32BE(out[2],8),buf.writeUInt32BE(out[1],12),buf},AES.prototype.scrub=function(){scrubVec(this._keySchedule),scrubVec(this._invKeySchedule),scrubVec(this._key)},module.exports.AES=AES},function(module,exports,__webpack_require__){'use strict';var curve=exports;curve.base=__webpack_require__(116),curve.short=__webpack_require__(119),curve.mont=__webpack_require__(118),curve.edwards=__webpack_require__(117)},function(module,exports,__webpack_require__){function EVP_BytesToKey(password,salt,keyBits,ivLen){if(!Buffer.isBuffer(password)&&(password=Buffer.from(password,'binary')),salt&&(!Buffer.isBuffer(salt)&&(salt=Buffer.from(salt,'binary')),salt.length!==8))throw new RangeError('salt should be Buffer with 8 byte length');var keyLen=keyBits/8;var key=Buffer.alloc(keyLen);var iv=Buffer.alloc(ivLen||0);for(var tmp=Buffer.alloc(0);keyLen>0||ivLen>0;){var hash=new MD5;hash.update(tmp),hash.update(password),salt&&hash.update(salt),tmp=hash.digest();var used=0;if(keyLen>0){var keyStart=key.length-keyLen;used=_Mathmin3(keyLen,tmp.length),tmp.copy(key,keyStart,0,used),keyLen-=used}if(used<tmp.length&&ivLen>0){var ivStart=iv.length-ivLen;var length=_Mathmin3(ivLen,tmp.length-used);tmp.copy(iv,ivStart,used,used+length),ivLen-=length}}return tmp.fill(0),{key:key,iv:iv}}var _Mathmin3=Math.min;var Buffer=__webpack_require__(3).Buffer;var MD5=__webpack_require__(140);module.exports=EVP_BytesToKey},function(module,exports,__webpack_require__){(function(Buffer){function parseKeys(buffer){var password;typeof buffer==='object'&&!Buffer.isBuffer(buffer)&&(password=buffer.passphrase,buffer=buffer.key),typeof buffer==='string'&&(buffer=new Buffer(buffer));var stripped=fixProc(buffer,password);var type=stripped.tag;var data=stripped.data;var subtype,ndata;switch(type){case'CERTIFICATE':ndata=asn1.certificate.decode(data,'der').tbsCertificate.subjectPublicKeyInfo;case'PUBLIC KEY':switch(!ndata&&(ndata=asn1.PublicKey.decode(data,'der')),subtype=ndata.algorithm.algorithm.join('.'),subtype){case'1.2.840.113549.1.1.1':return asn1.RSAPublicKey.decode(ndata.subjectPublicKey.data,'der');case'1.2.840.10045.2.1':return ndata.subjectPrivateKey=ndata.subjectPublicKey,{type:'ec',data:ndata};case'1.2.840.10040.4.1':return ndata.algorithm.params.pub_key=asn1.DSAparam.decode(ndata.subjectPublicKey.data,'der'),{type:'dsa',data:ndata.algorithm.params};default:throw new Error('unknown key id '+subtype);}throw new Error('unknown key type '+type);case'ENCRYPTED PRIVATE KEY':data=asn1.EncryptedPrivateKey.decode(data,'der'),data=decrypt(data,password);case'PRIVATE KEY':switch(ndata=asn1.PrivateKey.decode(data,'der'),subtype=ndata.algorithm.algorithm.join('.'),subtype){case'1.2.840.113549.1.1.1':return asn1.RSAPrivateKey.decode(ndata.subjectPrivateKey,'der');case'1.2.840.10045.2.1':return{curve:ndata.algorithm.curve,privateKey:asn1.ECPrivateKey.decode(ndata.subjectPrivateKey,'der').privateKey};case'1.2.840.10040.4.1':return ndata.algorithm.params.priv_key=asn1.DSAparam.decode(ndata.subjectPrivateKey,'der'),{type:'dsa',params:ndata.algorithm.params};default:throw new Error('unknown key id '+subtype);}throw new Error('unknown key type '+type);case'RSA PUBLIC KEY':return asn1.RSAPublicKey.decode(data,'der');case'RSA PRIVATE KEY':return asn1.RSAPrivateKey.decode(data,'der');case'DSA PRIVATE KEY':return{type:'dsa',params:asn1.DSAPrivateKey.decode(data,'der')};case'EC PRIVATE KEY':return data=asn1.ECPrivateKey.decode(data,'der'),{curve:data.parameters.value,privateKey:data.privateKey};default:throw new Error('unknown key type '+type);}}function decrypt(data,password){var salt=data.algorithm.decrypt.kde.kdeparams.salt;var iters=parseInt(data.algorithm.decrypt.kde.kdeparams.iters.toString(),10);var algo=aesid[data.algorithm.decrypt.cipher.algo.join('.')];var iv=data.algorithm.decrypt.cipher.iv;var cipherText=data.subjectPrivateKey;var keylen=parseInt(algo.split('-')[1],10)/8;var key=compat.pbkdf2Sync(password,salt,iters,keylen);var cipher=ciphers.createDecipheriv(algo,key,iv);var out=[];return out.push(cipher.update(cipherText)),out.push(cipher.final()),Buffer.concat(out)}var asn1=__webpack_require__(143);var aesid=__webpack_require__(142);var fixProc=__webpack_require__(145);var ciphers=__webpack_require__(25);var compat=__webpack_require__(58);module.exports=parseKeys,parseKeys.signature=asn1.signature}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){'use strict';(function(process){function nextTick(fn,arg1,arg2,arg3){if(typeof fn!=='function')throw new TypeError('"callback" argument must be a function');var len=arguments.length;var args,i;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick(function afterTickOne(){fn.call(null,arg1)});case 3:return process.nextTick(function afterTickTwo(){fn.call(null,arg1,arg2)});case 4:return process.nextTick(function afterTickThree(){fn.call(null,arg1,arg2,arg3)});default:for(args=Array(len-1),i=0;i<args.length;)args[i++]=arguments[i];return process.nextTick(function afterTick(){fn.apply(null,args)});}}module.exports=process.version&&process.version.indexOf('v0.')!==0&&(process.version.indexOf('v1.')!==0||process.version.indexOf('v1.8.')===0)?process.nextTick:nextTick}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){function Stream(){EE.call(this)}module.exports=Stream;var EE=__webpack_require__(30).EventEmitter;var inherits=__webpack_require__(0);inherits(Stream,EE),Stream.Readable=__webpack_require__(34),Stream.Writable=__webpack_require__(160),Stream.Duplex=__webpack_require__(155),Stream.Transform=__webpack_require__(159),Stream.PassThrough=__webpack_require__(158),Stream.Stream=Stream,Stream.prototype.pipe=function(dest,options){function ondata(chunk){dest.writable&&!1===dest.write(chunk)&&source.pause&&source.pause()}function ondrain(){source.readable&&source.resume&&source.resume()}function onend(){didOnEnd||(didOnEnd=!0,dest.end())}function onclose(){didOnEnd||(didOnEnd=!0,typeof dest.destroy==='function'&&dest.destroy())}function onerror(er){if(cleanup(),EE.listenerCount(this,'error')===0)throw er}function cleanup(){source.removeListener('data',ondata),dest.removeListener('drain',ondrain),source.removeListener('end',onend),source.removeListener('close',onclose),source.removeListener('error',onerror),dest.removeListener('error',onerror),source.removeListener('end',cleanup),source.removeListener('close',cleanup),dest.removeListener('close',cleanup)}var source=this;source.on('data',ondata),dest.on('drain',ondrain),!dest._isStdio&&(!options||options.end!==!1)&&(source.on('end',onend),source.on('close',onclose));var didOnEnd=!1;return source.on('error',onerror),dest.on('error',onerror),source.on('end',cleanup),source.on('close',cleanup),dest.on('close',cleanup),dest.emit('pipe',source),dest}},function(module,exports,__webpack_require__){function getCiphers(){return Object.keys(modes)}var ciphers=__webpack_require__(88);var deciphers=__webpack_require__(87);var modes=__webpack_require__(46);exports.createCipher=exports.Cipher=ciphers.createCipher,exports.createCipheriv=exports.Cipheriv=ciphers.createCipheriv,exports.createDecipher=exports.Decipher=deciphers.createDecipher,exports.createDecipheriv=exports.Decipheriv=deciphers.createDecipheriv,exports.listCiphers=exports.getCiphers=getCiphers},function(module,exports,__webpack_require__){var modeModules={ECB:__webpack_require__(94),CBC:__webpack_require__(90),CFB:__webpack_require__(91),CFB8:__webpack_require__(93),CFB1:__webpack_require__(92),OFB:__webpack_require__(95),CTR:__webpack_require__(45),GCM:__webpack_require__(45)};var modes=__webpack_require__(46);for(var key in modes)modes[key].module=modeModules[modes[key].mode];module.exports=modes},function(module,exports,__webpack_require__){(function(Buffer){function blind(priv){var r=getr(priv);var blinder=r.toRed(bn.mont(priv.modulus)).redPow(new bn(priv.publicExponent)).fromRed();return{blinder:blinder,unblinder:r.invm(priv.modulus)}}function crt(msg,priv){var blinds=blind(priv);var len=priv.modulus.byteLength();var mod=bn.mont(priv.modulus);var blinded=new bn(msg).mul(blinds.blinder).umod(priv.modulus);var c1=blinded.toRed(bn.mont(priv.prime1));var c2=blinded.toRed(bn.mont(priv.prime2));var qinv=priv.coefficient;var p=priv.prime1;var q=priv.prime2;var m1=c1.redPow(priv.exponent1);var m2=c2.redPow(priv.exponent2);m1=m1.fromRed(),m2=m2.fromRed();var h=m1.isub(m2).imul(qinv).umod(p);return h.imul(q),m2.iadd(h),new Buffer(m2.imul(blinds.unblinder).umod(priv.modulus).toArray(!1,len))}function getr(priv){var len=priv.modulus.byteLength();for(var r=new bn(randomBytes(len));r.cmp(priv.modulus)>=0||!r.umod(priv.prime1)||!r.umod(priv.prime2);)r=new bn(randomBytes(len));return r}var bn=__webpack_require__(2);var randomBytes=__webpack_require__(18);module.exports=crt,crt.getr=getr}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){'use strict';function core_md5(x,len){x[len>>5]|=128<<len%32,x[(len+64>>>9<<4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16){var olda=a;var oldb=b;var oldc=c;var oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936),d=md5_ff(d,a,b,c,x[i+1],12,-389564586),c=md5_ff(c,d,a,b,x[i+2],17,606105819),b=md5_ff(b,c,d,a,x[i+3],22,-1044525330),a=md5_ff(a,b,c,d,x[i+4],7,-176418897),d=md5_ff(d,a,b,c,x[i+5],12,1200080426),c=md5_ff(c,d,a,b,x[i+6],17,-1473231341),b=md5_ff(b,c,d,a,x[i+7],22,-45705983),a=md5_ff(a,b,c,d,x[i+8],7,1770035416),d=md5_ff(d,a,b,c,x[i+9],12,-1958414417),c=md5_ff(c,d,a,b,x[i+10],17,-42063),b=md5_ff(b,c,d,a,x[i+11],22,-1990404162),a=md5_ff(a,b,c,d,x[i+12],7,1804603682),d=md5_ff(d,a,b,c,x[i+13],12,-40341101),c=md5_ff(c,d,a,b,x[i+14],17,-1502002290),b=md5_ff(b,c,d,a,x[i+15],22,1236535329),a=md5_gg(a,b,c,d,x[i+1],5,-165796510),d=md5_gg(d,a,b,c,x[i+6],9,-1069501632),c=md5_gg(c,d,a,b,x[i+11],14,643717713),b=md5_gg(b,c,d,a,x[i+0],20,-373897302),a=md5_gg(a,b,c,d,x[i+5],5,-701558691),d=md5_gg(d,a,b,c,x[i+10],9,38016083),c=md5_gg(c,d,a,b,x[i+15],14,-660478335),b=md5_gg(b,c,d,a,x[i+4],20,-405537848),a=md5_gg(a,b,c,d,x[i+9],5,568446438),d=md5_gg(d,a,b,c,x[i+14],9,-1019803690),c=md5_gg(c,d,a,b,x[i+3],14,-187363961),b=md5_gg(b,c,d,a,x[i+8],20,1163531501),a=md5_gg(a,b,c,d,x[i+13],5,-1444681467),d=md5_gg(d,a,b,c,x[i+2],9,-51403784),c=md5_gg(c,d,a,b,x[i+7],14,1735328473),b=md5_gg(b,c,d,a,x[i+12],20,-1926607734),a=md5_hh(a,b,c,d,x[i+5],4,-378558),d=md5_hh(d,a,b,c,x[i+8],11,-2022574463),c=md5_hh(c,d,a,b,x[i+11],16,1839030562),b=md5_hh(b,c,d,a,x[i+14],23,-35309556),a=md5_hh(a,b,c,d,x[i+1],4,-1530992060),d=md5_hh(d,a,b,c,x[i+4],11,1272893353),c=md5_hh(c,d,a,b,x[i+7],16,-155497632),b=md5_hh(b,c,d,a,x[i+10],23,-1094730640),a=md5_hh(a,b,c,d,x[i+13],4,681279174),d=md5_hh(d,a,b,c,x[i+0],11,-358537222),c=md5_hh(c,d,a,b,x[i+3],16,-722521979),b=md5_hh(b,c,d,a,x[i+6],23,76029189),a=md5_hh(a,b,c,d,x[i+9],4,-640364487),d=md5_hh(d,a,b,c,x[i+12],11,-421815835),c=md5_hh(c,d,a,b,x[i+15],16,530742520),b=md5_hh(b,c,d,a,x[i+2],23,-995338651),a=md5_ii(a,b,c,d,x[i+0],6,-198630844),d=md5_ii(d,a,b,c,x[i+7],10,1126891415),c=md5_ii(c,d,a,b,x[i+14],15,-1416354905),b=md5_ii(b,c,d,a,x[i+5],21,-57434055),a=md5_ii(a,b,c,d,x[i+12],6,1700485571),d=md5_ii(d,a,b,c,x[i+3],10,-1894986606),c=md5_ii(c,d,a,b,x[i+10],15,-1051523),b=md5_ii(b,c,d,a,x[i+1],21,-2054922799),a=md5_ii(a,b,c,d,x[i+8],6,1873313359),d=md5_ii(d,a,b,c,x[i+15],10,-30611744),c=md5_ii(c,d,a,b,x[i+6],15,-1560198380),b=md5_ii(b,c,d,a,x[i+13],21,1309151649),a=md5_ii(a,b,c,d,x[i+4],6,-145523070),d=md5_ii(d,a,b,c,x[i+11],10,-1120210379),c=md5_ii(c,d,a,b,x[i+2],15,718787259),b=md5_ii(b,c,d,a,x[i+9],21,-343485551),a=safe_add(a,olda),b=safe_add(b,oldb),c=safe_add(c,oldc),d=safe_add(d,oldd)}return[a,b,c,d]}function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b)}function md5_ff(a,b,c,d,x,s,t){return md5_cmn(b&c|~b&d,a,b,x,s,t)}function md5_gg(a,b,c,d,x,s,t){return md5_cmn(b&d|c&~d,a,b,x,s,t)}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t)}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|~d),a,b,x,s,t)}function safe_add(x,y){var lsw=(x&65535)+(y&65535);var msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}function bit_rol(num,cnt){return num<<cnt|num>>>32-cnt}var makeHash=__webpack_require__(105);module.exports=function md5(buf){return makeHash(buf,core_md5)}},function(module,exports,__webpack_require__){'use strict';exports.utils=__webpack_require__(112),exports.Cipher=__webpack_require__(109),exports.DES=__webpack_require__(110),exports.CBC=__webpack_require__(108),exports.EDE=__webpack_require__(111)},function(module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||undefined}function isFunction(arg){return typeof arg==='function'}function isNumber(arg){return typeof arg==='number'}function isObject(arg){return typeof arg==='object'&&arg!==null}function isUndefined(arg){return arg===void 0}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=undefined,EventEmitter.prototype._maxListeners=undefined,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError('n must be a positive number');return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events&&(this._events={}),type==='error'&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length))if(er=arguments[1],er instanceof Error)throw er;else{var err=new Error('Uncaught, unspecified "error" event. ('+er+')');throw err.context=er,err}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1),handler.apply(this,args);}else if(isObject(handler))for(args=Array.prototype.slice.call(arguments,1),listeners=handler.slice(),len=listeners.length,i=0;i<len;i++)listeners[i].apply(this,args);return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError('listener must be a function');return!this._events&&(this._events={}),this._events.newListener&&this.emit('newListener',type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned&&(m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,void 0,void 0)),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),!fired&&(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError('listener must be a function');var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError('listener must be a function');if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit('removeListener',type,listener);else if(isObject(list)){for(i=length;i-->0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(position<0)return this;list.length===1?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit('removeListener',type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[type]&&delete this._events[type],this;if(arguments.length===0){for(key in this._events)key!=='removeListener'&&this.removeAllListeners(key);return this.removeAllListeners('removeListener'),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else if(listeners)for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[],ret},EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;if(evlistener)return evlistener.length}return 0},EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)}},function(module,exports,__webpack_require__){var hash=exports;hash.utils=__webpack_require__(6),hash.common=__webpack_require__(17),hash.sha=__webpack_require__(133),hash.ripemd=__webpack_require__(132),hash.hmac=__webpack_require__(131),hash.sha1=hash.sha.sha1,hash.sha256=hash.sha.sha256,hash.sha224=hash.sha.sha224,hash.sha384=hash.sha.sha384,hash.sha512=hash.sha.sha512,hash.ripemd160=hash.ripemd.ripemd160},function(module,exports,__webpack_require__){function assertEncoding(encoding){if(encoding&&!isBufferEncoding(encoding))throw new Error('Unknown encoding: '+encoding)}function passThroughWrite(buffer){return buffer.toString(this.encoding)}function utf16DetectIncompleteChar(buffer){this.charReceived=buffer.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(buffer){this.charReceived=buffer.length%3,this.charLength=this.charReceived?3:0}var Buffer=__webpack_require__(1).Buffer;var isBufferEncoding=Buffer.isEncoding||function(encoding){switch(encoding&&encoding.toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':case'raw':return!0;default:return!1;}};var StringDecoder=exports.StringDecoder=function(encoding){switch(this.encoding=(encoding||'utf8').toLowerCase().replace(/[-_]/,''),assertEncoding(encoding),this.encoding){case'utf8':this.surrogateSize=3;break;case'ucs2':case'utf16le':this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case'base64':this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite);}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};StringDecoder.prototype.write=function(buffer){for(var charStr='';this.charLength;){var available=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;if(buffer.copy(this.charBuffer,this.charReceived,0,available),this.charReceived+=available,this.charReceived<this.charLength)return'';buffer=buffer.slice(available,buffer.length),charStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var charCode=charStr.charCodeAt(charStr.length-1);if(charCode>=55296&&charCode<=56319){this.charLength+=this.surrogateSize,charStr='';continue}if(this.charReceived=this.charLength=0,buffer.length===0)return charStr;break}this.detectIncompleteChar(buffer);var end=buffer.length;this.charLength&&(buffer.copy(this.charBuffer,0,buffer.length-this.charReceived,end),end-=this.charReceived),charStr+=buffer.toString(this.encoding,0,end);var end=charStr.length-1;var charCode=charStr.charCodeAt(end);if(charCode>=55296&&charCode<=56319){var size=this.surrogateSize;return this.charLength+=size,this.charReceived+=size,this.charBuffer.copy(this.charBuffer,size,0,size),buffer.copy(this.charBuffer,0,0,size),charStr.substring(0,end)}return charStr},StringDecoder.prototype.detectIncompleteChar=function(buffer){for(var i=buffer.length>=3?3:buffer.length;i>0;i--){var c=buffer[buffer.length-i];if(i==1&&c>>5==6){this.charLength=2;break}if(i<=2&&c>>4==14){this.charLength=3;break}if(i<=3&&c>>3==30){this.charLength=4;break}}this.charReceived=i},StringDecoder.prototype.end=function(buffer){var res='';if(buffer&&buffer.length&&(res=this.write(buffer)),this.charReceived){var cr=this.charReceived;var buf=this.charBuffer;var enc=this.encoding;res+=buf.slice(0,cr).toString(enc)}return res}},function(module,exports,__webpack_require__){'use strict';(function(process,setImmediate,global){function WriteReq(chunk,encoding,cb){this.chunk=chunk,this.encoding=encoding,this.callback=cb,this.next=null}function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish(_this,state)}}function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}function nop(){}function WritableState(options,stream){Duplex=Duplex||__webpack_require__(10),options=options||{},this.objectMode=!!options.objectMode,stream instanceof Duplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode);var hwm=options.highWaterMark;var defaultHwm=this.objectMode?16:16*1024;this.highWaterMark=hwm||hwm===0?hwm:defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var noDecode=options.decodeStrings===!1;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||'utf8',this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){onwrite(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(options){return Duplex=Duplex||__webpack_require__(10),realHasInstance.call(Writable,this)||this instanceof Duplex?void(this._writableState=new WritableState(options,this),this.writable=!0,options&&(typeof options.write==='function'&&(this._write=options.write),typeof options.writev==='function'&&(this._writev=options.writev),typeof options.destroy==='function'&&(this._destroy=options.destroy),typeof options.final==='function'&&(this._final=options.final)),Stream.call(this)):new Writable(options)}function writeAfterEnd(stream,cb){var er=new Error('write after end');stream.emit('error',er),processNextTick(cb,er)}function validChunk(stream,state,chunk,cb){var valid=!0;var er=!1;return chunk===null?er=new TypeError('May not write null values to stream'):typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode&&(er=new TypeError('Invalid non-string/buffer chunk')),er&&(stream.emit('error',er),processNextTick(cb,er),valid=!1),valid}function decodeChunk(state,chunk,encoding){return!state.objectMode&&state.decodeStrings!==!1&&typeof chunk==='string'&&(chunk=Buffer.from(chunk,encoding)),chunk}function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);chunk!==newChunk&&(isBuf=!0,encoding='buffer',chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret&&(state.needDrain=!0),state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function onwriteError(stream,state,sync,er,cb){--state.pendingcb,sync?(processNextTick(cb,er),processNextTick(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,stream.emit('error',er)):(cb(er),stream._writableState.errorEmitted=!0,stream.emit('error',er),finishMaybe(stream,state))}function onwriteStateUpdate(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;if(onwriteStateUpdate(state),er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest&&clearBuffer(stream,state),sync?asyncWrite(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}function afterWrite(stream,state,finished,cb){!finished&&onwriteDrain(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function onwriteDrain(stream,state){state.length===0&&state.needDrain&&(state.needDrain=!1,stream.emit('drain'))}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;for(var allBuffers=!0;entry;)buffer[count]=entry,!entry.isBuf&&(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,'',holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state)}else{for(;entry;){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;if(doWrite(stream,state,!1,len,chunk,encoding,cb),entry=entry.next,state.writing)break}entry===null&&(state.lastBufferedRequest=null)}state.bufferedRequestCount=0,state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final(function(err){state.pendingcb--,err&&stream.emit('error',err),state.prefinished=!0,stream.emit('prefinish'),finishMaybe(stream,state)})}function prefinish(stream,state){!state.prefinished&&!state.finalCalled&&(typeof stream._final==='function'?(state.pendingcb++,state.finalCalled=!0,processNextTick(callFinal,stream,state)):(state.prefinished=!0,stream.emit('prefinish')))}function finishMaybe(stream,state){var need=needFinish(state);return need&&(prefinish(stream,state),state.pendingcb===0&&(state.finished=!0,stream.emit('finish'))),need}function endWritable(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?processNextTick(cb):stream.once('finish',cb)),state.ended=!0,stream.writable=!1}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;for(corkReq.entry=null;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree?state.corkedRequestsFree.next=corkReq:state.corkedRequestsFree=corkReq}var processNextTick=__webpack_require__(23);module.exports=Writable;var asyncWrite=!process.browser&&['v0.10','v0.9.'].indexOf(process.version.slice(0,5))>-1?setImmediate:processNextTick;var Duplex;Writable.WritableState=WritableState;var util=__webpack_require__(15);util.inherits=__webpack_require__(0);var internalUtil={deprecate:__webpack_require__(173)};var Stream=__webpack_require__(68);var Buffer=__webpack_require__(3).Buffer;var OurUint8Array=global.Uint8Array||function(){};var destroyImpl=__webpack_require__(67);util.inherits(Writable,Stream),WritableState.prototype.getBuffer=function getBuffer(){var current=this.bufferedRequest;for(var out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,'buffer',{get:internalUtil.deprecate(function(){return this.getBuffer()},'_writableState.buffer is deprecated. Use _writableState.getBuffer '+'instead.','DEP0003')})}catch(_){}}();var realHasInstance;typeof Symbol==='function'&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==='function'?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){return!!realHasInstance.call(this,object)||object&&object._writableState instanceof WritableState}})):realHasInstance=function(object){return object instanceof this},Writable.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe, not readable'))},Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=!1;var isBuf=_isUint8Array(chunk)&&!state.objectMode;return isBuf&&!Buffer.isBuffer(chunk)&&(chunk=_uint8ArrayToBuffer(chunk)),typeof encoding==='function'&&(cb=encoding,encoding=null),isBuf?encoding='buffer':!encoding&&(encoding=state.defaultEncoding),typeof cb!=='function'&&(cb=nop),state.ended?writeAfterEnd(this,cb):(isBuf||validChunk(this,state,chunk,cb))&&(state.pendingcb++,ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){var state=this._writableState;state.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,!state.writing&&!state.corked&&!state.finished&&!state.bufferProcessing&&state.bufferedRequest&&clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==='string'&&(encoding=encoding.toLowerCase()),!(['hex','utf8','utf-8','ascii','binary','base64','ucs2','ucs-2','utf16le','utf-16le','raw'].indexOf((encoding+'').toLowerCase())>-1))throw new TypeError('Unknown encoding: '+encoding);return this._writableState.defaultEncoding=encoding,this},Writable.prototype._write=function(chunk,encoding,cb){cb(new Error('_write() is not implemented'))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;typeof chunk==='function'?(cb=chunk,chunk=null,encoding=null):typeof encoding==='function'&&(cb=encoding,encoding=null),chunk!==null&&chunk!==undefined&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),!state.ending&&!state.finished&&endWritable(this,state,cb)},Object.defineProperty(Writable.prototype,'destroyed',{get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(value){!this._writableState||(this._writableState.destroyed=value)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(err,cb){this.end(),cb(err)}}).call(exports,__webpack_require__(9),__webpack_require__(37).setImmediate,__webpack_require__(7))},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(65),exports.Stream=exports,exports.Readable=exports,exports.Writable=__webpack_require__(33),exports.Duplex=__webpack_require__(10),exports.Transform=__webpack_require__(66),exports.PassThrough=__webpack_require__(156)},function(module,exports,__webpack_require__){'use strict';(function(Buffer){function RIPEMD160(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function rotl(x,n){return x<<n|x>>>32-n}function fn1(a,b,c,d,e,m,k,s){return rotl(a+(b^c^d)+m+k|0,s)+e|0}function fn2(a,b,c,d,e,m,k,s){return rotl(a+(b&c|~b&d)+m+k|0,s)+e|0}function fn3(a,b,c,d,e,m,k,s){return rotl(a+((b|~c)^d)+m+k|0,s)+e|0}function fn4(a,b,c,d,e,m,k,s){return rotl(a+(b&d|c&~d)+m+k|0,s)+e|0}function fn5(a,b,c,d,e,m,k,s){return rotl(a+(b^(c|~d))+m+k|0,s)+e|0}var inherits=__webpack_require__(0);var HashBase=__webpack_require__(130);inherits(RIPEMD160,HashBase),RIPEMD160.prototype._update=function(){var m=Array(16);for(var i=0;i<16;++i)m[i]=this._block.readInt32LE(i*4);var al=this._a;var bl=this._b;var cl=this._c;var dl=this._d;var el=this._e;al=fn1(al,bl,cl,dl,el,m[0],0,11),cl=rotl(cl,10),el=fn1(el,al,bl,cl,dl,m[1],0,14),bl=rotl(bl,10),dl=fn1(dl,el,al,bl,cl,m[2],0,15),al=rotl(al,10),cl=fn1(cl,dl,el,al,bl,m[3],0,12),el=rotl(el,10),bl=fn1(bl,cl,dl,el,al,m[4],0,5),dl=rotl(dl,10),al=fn1(al,bl,cl,dl,el,m[5],0,8),cl=rotl(cl,10),el=fn1(el,al,bl,cl,dl,m[6],0,7),bl=rotl(bl,10),dl=fn1(dl,el,al,bl,cl,m[7],0,9),al=rotl(al,10),cl=fn1(cl,dl,el,al,bl,m[8],0,11),el=rotl(el,10),bl=fn1(bl,cl,dl,el,al,m[9],0,13),dl=rotl(dl,10),al=fn1(al,bl,cl,dl,el,m[10],0,14),cl=rotl(cl,10),el=fn1(el,al,bl,cl,dl,m[11],0,15),bl=rotl(bl,10),dl=fn1(dl,el,al,bl,cl,m[12],0,6),al=rotl(al,10),cl=fn1(cl,dl,el,al,bl,m[13],0,7),el=rotl(el,10),bl=fn1(bl,cl,dl,el,al,m[14],0,9),dl=rotl(dl,10),al=fn1(al,bl,cl,dl,el,m[15],0,8),cl=rotl(cl,10),el=fn2(el,al,bl,cl,dl,m[7],1518500249,7),bl=rotl(bl,10),dl=fn2(dl,el,al,bl,cl,m[4],1518500249,6),al=rotl(al,10),cl=fn2(cl,dl,el,al,bl,m[13],1518500249,8),el=rotl(el,10),bl=fn2(bl,cl,dl,el,al,m[1],1518500249,13),dl=rotl(dl,10),al=fn2(al,bl,cl,dl,el,m[10],1518500249,11),cl=rotl(cl,10),el=fn2(el,al,bl,cl,dl,m[6],1518500249,9),bl=rotl(bl,10),dl=fn2(dl,el,al,bl,cl,m[15],1518500249,7),al=rotl(al,10),cl=fn2(cl,dl,el,al,bl,m[3],1518500249,15),el=rotl(el,10),bl=fn2(bl,cl,dl,el,al,m[12],1518500249,7),dl=rotl(dl,10),al=fn2(al,bl,cl,dl,el,m[0],1518500249,12),cl=rotl(cl,10),el=fn2(el,al,bl,cl,dl,m[9],1518500249,15),bl=rotl(bl,10),dl=fn2(dl,el,al,bl,cl,m[5],1518500249,9),al=rotl(al,10),cl=fn2(cl,dl,el,al,bl,m[2],1518500249,11),el=rotl(el,10),bl=fn2(bl,cl,dl,el,al,m[14],1518500249,7),dl=rotl(dl,10),al=fn2(al,bl,cl,dl,el,m[11],1518500249,13),cl=rotl(cl,10),el=fn2(el,al,bl,cl,dl,m[8],1518500249,12),bl=rotl(bl,10),dl=fn3(dl,el,al,bl,cl,m[3],1859775393,11),al=rotl(al,10),cl=fn3(cl,dl,el,al,bl,m[10],1859775393,13),el=rotl(el,10),bl=fn3(bl,cl,dl,el,al,m[14],1859775393,6),dl=rotl(dl,10),al=fn3(al,bl,cl,dl,el,m[4],1859775393,7),cl=rotl(cl,10),el=fn3(el,al,bl,cl,dl,m[9],1859775393,14),bl=rotl(bl,10),dl=fn3(dl,el,al,bl,cl,m[15],1859775393,9),al=rotl(al,10),cl=fn3(cl,dl,el,al,bl,m[8],1859775393,13),el=rotl(el,10),bl=fn3(bl,cl,dl,el,al,m[1],1859775393,15),dl=rotl(dl,10),al=fn3(al,bl,cl,dl,el,m[2],1859775393,14),cl=rotl(cl,10),el=fn3(el,al,bl,cl,dl,m[7],1859775393,8),bl=rotl(bl,10),dl=fn3(dl,el,al,bl,cl,m[0],1859775393,13),al=rotl(al,10),cl=fn3(cl,dl,el,al,bl,m[6],1859775393,6),el=rotl(el,10),bl=fn3(bl,cl,dl,el,al,m[13],1859775393,5),dl=rotl(dl,10),al=fn3(al,bl,cl,dl,el,m[11],1859775393,12),cl=rotl(cl,10),el=fn3(el,al,bl,cl,dl,m[5],1859775393,7),bl=rotl(bl,10),dl=fn3(dl,el,al,bl,cl,m[12],1859775393,5),al=rotl(al,10),cl=fn4(cl,dl,el,al,bl,m[1],2400959708,11),el=rotl(el,10),bl=fn4(bl,cl,dl,el,al,m[9],2400959708,12),dl=rotl(dl,10),al=fn4(al,bl,cl,dl,el,m[11],2400959708,14),cl=rotl(cl,10),el=fn4(el,al,bl,cl,dl,m[10],2400959708,15),bl=rotl(bl,10),dl=fn4(dl,el,al,bl,cl,m[0],2400959708,14),al=rotl(al,10),cl=fn4(cl,dl,el,al,bl,m[8],2400959708,15),el=rotl(el,10),bl=fn4(bl,cl,dl,el,al,m[12],2400959708,9),dl=rotl(dl,10),al=fn4(al,bl,cl,dl,el,m[4],2400959708,8),cl=rotl(cl,10),el=fn4(el,al,bl,cl,dl,m[13],2400959708,9),bl=rotl(bl,10),dl=fn4(dl,el,al,bl,cl,m[3],2400959708,14),al=rotl(al,10),cl=fn4(cl,dl,el,al,bl,m[7],2400959708,5),el=rotl(el,10),bl=fn4(bl,cl,dl,el,al,m[15],2400959708,6),dl=rotl(dl,10),al=fn4(al,bl,cl,dl,el,m[14],2400959708,8),cl=rotl(cl,10),el=fn4(el,al,bl,cl,dl,m[5],2400959708,6),bl=rotl(bl,10),dl=fn4(dl,el,al,bl,cl,m[6],2400959708,5),al=rotl(al,10),cl=fn4(cl,dl,el,al,bl,m[2],2400959708,12),el=rotl(el,10),bl=fn5(bl,cl,dl,el,al,m[4],2840853838,9),dl=rotl(dl,10),al=fn5(al,bl,cl,dl,el,m[0],2840853838,15),cl=rotl(cl,10),el=fn5(el,al,bl,cl,dl,m[5],2840853838,5),bl=rotl(bl,10),dl=fn5(dl,el,al,bl,cl,m[9],2840853838,11),al=rotl(al,10),cl=fn5(cl,dl,el,al,bl,m[7],2840853838,6),el=rotl(el,10),bl=fn5(bl,cl,dl,el,al,m[12],2840853838,8),dl=rotl(dl,10),al=fn5(al,bl,cl,dl,el,m[2],2840853838,13),cl=rotl(cl,10),el=fn5(el,al,bl,cl,dl,m[10],2840853838,12),bl=rotl(bl,10),dl=fn5(dl,el,al,bl,cl,m[14],2840853838,5),al=rotl(al,10),cl=fn5(cl,dl,el,al,bl,m[1],2840853838,12),el=rotl(el,10),bl=fn5(bl,cl,dl,el,al,m[3],2840853838,13),dl=rotl(dl,10),al=fn5(al,bl,cl,dl,el,m[8],2840853838,14),cl=rotl(cl,10),el=fn5(el,al,bl,cl,dl,m[11],2840853838,11),bl=rotl(bl,10),dl=fn5(dl,el,al,bl,cl,m[6],2840853838,8),al=rotl(al,10),cl=fn5(cl,dl,el,al,bl,m[15],2840853838,5),el=rotl(el,10),bl=fn5(bl,cl,dl,el,al,m[13],2840853838,6),dl=rotl(dl,10);var ar=this._a;var br=this._b;var cr=this._c;var dr=this._d;var er=this._e;ar=fn5(ar,br,cr,dr,er,m[5],1352829926,8),cr=rotl(cr,10),er=fn5(er,ar,br,cr,dr,m[14],1352829926,9),br=rotl(br,10),dr=fn5(dr,er,ar,br,cr,m[7],1352829926,9),ar=rotl(ar,10),cr=fn5(cr,dr,er,ar,br,m[0],1352829926,11),er=rotl(er,10),br=fn5(br,cr,dr,er,ar,m[9],1352829926,13),dr=rotl(dr,10),ar=fn5(ar,br,cr,dr,er,m[2],1352829926,15),cr=rotl(cr,10),er=fn5(er,ar,br,cr,dr,m[11],1352829926,15),br=rotl(br,10),dr=fn5(dr,er,ar,br,cr,m[4],1352829926,5),ar=rotl(ar,10),cr=fn5(cr,dr,er,ar,br,m[13],1352829926,7),er=rotl(er,10),br=fn5(br,cr,dr,er,ar,m[6],1352829926,7),dr=rotl(dr,10),ar=fn5(ar,br,cr,dr,er,m[15],1352829926,8),cr=rotl(cr,10),er=fn5(er,ar,br,cr,dr,m[8],1352829926,11),br=rotl(br,10),dr=fn5(dr,er,ar,br,cr,m[1],1352829926,14),ar=rotl(ar,10),cr=fn5(cr,dr,er,ar,br,m[10],1352829926,14),er=rotl(er,10),br=fn5(br,cr,dr,er,ar,m[3],1352829926,12),dr=rotl(dr,10),ar=fn5(ar,br,cr,dr,er,m[12],1352829926,6),cr=rotl(cr,10),er=fn4(er,ar,br,cr,dr,m[6],1548603684,9),br=rotl(br,10),dr=fn4(dr,er,ar,br,cr,m[11],1548603684,13),ar=rotl(ar,10),cr=fn4(cr,dr,er,ar,br,m[3],1548603684,15),er=rotl(er,10),br=fn4(br,cr,dr,er,ar,m[7],1548603684,7),dr=rotl(dr,10),ar=fn4(ar,br,cr,dr,er,m[0],1548603684,12),cr=rotl(cr,10),er=fn4(er,ar,br,cr,dr,m[13],1548603684,8),br=rotl(br,10),dr=fn4(dr,er,ar,br,cr,m[5],1548603684,9),ar=rotl(ar,10),cr=fn4(cr,dr,er,ar,br,m[10],1548603684,11),er=rotl(er,10),br=fn4(br,cr,dr,er,ar,m[14],1548603684,7),dr=rotl(dr,10),ar=fn4(ar,br,cr,dr,er,m[15],1548603684,7),cr=rotl(cr,10),er=fn4(er,ar,br,cr,dr,m[8],1548603684,12),br=rotl(br,10),dr=fn4(dr,er,ar,br,cr,m[12],1548603684,7),ar=rotl(ar,10),cr=fn4(cr,dr,er,ar,br,m[4],1548603684,6),er=rotl(er,10),br=fn4(br,cr,dr,er,ar,m[9],1548603684,15),dr=rotl(dr,10),ar=fn4(ar,br,cr,dr,er,m[1],1548603684,13),cr=rotl(cr,10),er=fn4(er,ar,br,cr,dr,m[2],1548603684,11),br=rotl(br,10),dr=fn3(dr,er,ar,br,cr,m[15],1836072691,9),ar=rotl(ar,10),cr=fn3(cr,dr,er,ar,br,m[5],1836072691,7),er=rotl(er,10),br=fn3(br,cr,dr,er,ar,m[1],1836072691,15),dr=rotl(dr,10),ar=fn3(ar,br,cr,dr,er,m[3],1836072691,11),cr=rotl(cr,10),er=fn3(er,ar,br,cr,dr,m[7],1836072691,8),br=rotl(br,10),dr=fn3(dr,er,ar,br,cr,m[14],1836072691,6),ar=rotl(ar,10),cr=fn3(cr,dr,er,ar,br,m[6],1836072691,6),er=rotl(er,10),br=fn3(br,cr,dr,er,ar,m[9],1836072691,14),dr=rotl(dr,10),ar=fn3(ar,br,cr,dr,er,m[11],1836072691,12),cr=rotl(cr,10),er=fn3(er,ar,br,cr,dr,m[8],1836072691,13),br=rotl(br,10),dr=fn3(dr,er,ar,br,cr,m[12],1836072691,5),ar=rotl(ar,10),cr=fn3(cr,dr,er,ar,br,m[2],1836072691,14),er=rotl(er,10),br=fn3(br,cr,dr,er,ar,m[10],1836072691,13),dr=rotl(dr,10),ar=fn3(ar,br,cr,dr,er,m[0],1836072691,13),cr=rotl(cr,10),er=fn3(er,ar,br,cr,dr,m[4],1836072691,7),br=rotl(br,10),dr=fn3(dr,er,ar,br,cr,m[13],1836072691,5),ar=rotl(ar,10),cr=fn2(cr,dr,er,ar,br,m[8],2053994217,15),er=rotl(er,10),br=fn2(br,cr,dr,er,ar,m[6],2053994217,5),dr=rotl(dr,10),ar=fn2(ar,br,cr,dr,er,m[4],2053994217,8),cr=rotl(cr,10),er=fn2(er,ar,br,cr,dr,m[1],2053994217,11),br=rotl(br,10),dr=fn2(dr,er,ar,br,cr,m[3],2053994217,14),ar=rotl(ar,10),cr=fn2(cr,dr,er,ar,br,m[11],2053994217,14),er=rotl(er,10),br=fn2(br,cr,dr,er,ar,m[15],2053994217,6),dr=rotl(dr,10),ar=fn2(ar,br,cr,dr,er,m[0],2053994217,14),cr=rotl(cr,10),er=fn2(er,ar,br,cr,dr,m[5],2053994217,6),br=rotl(br,10),dr=fn2(dr,er,ar,br,cr,m[12],2053994217,9),ar=rotl(ar,10),cr=fn2(cr,dr,er,ar,br,m[2],2053994217,12),er=rotl(er,10),br=fn2(br,cr,dr,er,ar,m[13],2053994217,9),dr=rotl(dr,10),ar=fn2(ar,br,cr,dr,er,m[9],2053994217,12),cr=rotl(cr,10),er=fn2(er,ar,br,cr,dr,m[7],2053994217,5),br=rotl(br,10),dr=fn2(dr,er,ar,br,cr,m[10],2053994217,15),ar=rotl(ar,10),cr=fn2(cr,dr,er,ar,br,m[14],2053994217,8),er=rotl(er,10),br=fn1(br,cr,dr,er,ar,m[12],0,8),dr=rotl(dr,10),ar=fn1(ar,br,cr,dr,er,m[15],0,5),cr=rotl(cr,10),er=fn1(er,ar,br,cr,dr,m[10],0,12),br=rotl(br,10),dr=fn1(dr,er,ar,br,cr,m[4],0,9),ar=rotl(ar,10),cr=fn1(cr,dr,er,ar,br,m[1],0,12),er=rotl(er,10),br=fn1(br,cr,dr,er,ar,m[5],0,5),dr=rotl(dr,10),ar=fn1(ar,br,cr,dr,er,m[8],0,14),cr=rotl(cr,10),er=fn1(er,ar,br,cr,dr,m[7],0,6),br=rotl(br,10),dr=fn1(dr,er,ar,br,cr,m[6],0,8),ar=rotl(ar,10),cr=fn1(cr,dr,er,ar,br,m[2],0,13),er=rotl(er,10),br=fn1(br,cr,dr,er,ar,m[13],0,6),dr=rotl(dr,10),ar=fn1(ar,br,cr,dr,er,m[14],0,5),cr=rotl(cr,10),er=fn1(er,ar,br,cr,dr,m[0],0,15),br=rotl(br,10),dr=fn1(dr,er,ar,br,cr,m[3],0,13),ar=rotl(ar,10),cr=fn1(cr,dr,er,ar,br,m[9],0,11),er=rotl(er,10),br=fn1(br,cr,dr,er,ar,m[11],0,11),dr=rotl(dr,10);var t=this._b+cl+dr|0;this._b=this._c+dl+er|0,this._c=this._d+el+ar|0,this._d=this._e+al+br|0,this._e=this._a+bl+cr|0,this._a=t},RIPEMD160.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var buffer=new Buffer(20);return buffer.writeInt32LE(this._a,0),buffer.writeInt32LE(this._b,4),buffer.writeInt32LE(this._c,8),buffer.writeInt32LE(this._d,12),buffer.writeInt32LE(this._e,16),buffer},module.exports=RIPEMD160}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){var exports=module.exports=function SHA(algorithm){algorithm=algorithm.toLowerCase();var Algorithm=exports[algorithm];if(!Algorithm)throw new Error(algorithm+' is not supported (we accept pull requests)');return new Algorithm};exports.sha=__webpack_require__(162),exports.sha1=__webpack_require__(163),exports.sha224=__webpack_require__(164),exports.sha256=__webpack_require__(69),exports.sha384=__webpack_require__(165),exports.sha512=__webpack_require__(70)},function(module,exports,__webpack_require__){function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}var apply=Function.prototype.apply;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout&&timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout(function onTimeout(){item._onTimeout&&item._onTimeout()},msecs))},__webpack_require__(161),exports.setImmediate=setImmediate,exports.clearImmediate=clearImmediate},function(module,exports){module.exports=function(module){return!module.webpackPolyfill&&(module.deprecate=function(){},module.paths=[],!module.children&&(module.children=[]),Object.defineProperty(module,'loaded',{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,'id',{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){function DecoderBuffer(base,options){return Reporter.call(this,options),Buffer.isBuffer(base)?void(this.base=base,this.offset=0,this.length=base.length):void this.error('Input not Buffer')}function EncoderBuffer(value,reporter){if(Array.isArray(value))this.length=0,this.value=value.map(function(item){return!(item instanceof EncoderBuffer)&&(item=new EncoderBuffer(item,reporter)),this.length+=item.length,item},this);else if(typeof value==='number'){if(!(0<=value&&value<=255))return reporter.error('non-byte EncoderBuffer value');this.value=value,this.length=1}else if(typeof value==='string')this.value=value,this.length=Buffer.byteLength(value);else if(Buffer.isBuffer(value))this.value=value,this.length=value.length;else return reporter.error('Unsupported type: '+typeof value)}var inherits=__webpack_require__(0);var Reporter=__webpack_require__(13).Reporter;var Buffer=__webpack_require__(1).Buffer;inherits(DecoderBuffer,Reporter),exports.DecoderBuffer=DecoderBuffer,DecoderBuffer.prototype.save=function save(){return{offset:this.offset,reporter:Reporter.prototype.save.call(this)}},DecoderBuffer.prototype.restore=function restore(save){var res=new DecoderBuffer(this.base);return res.offset=save.offset,res.length=this.offset,this.offset=save.offset,Reporter.prototype.restore.call(this,save.reporter),res},DecoderBuffer.prototype.isEmpty=function isEmpty(){return this.offset===this.length},DecoderBuffer.prototype.readUInt8=function readUInt8(fail){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(fail||'DecoderBuffer overrun')},DecoderBuffer.prototype.skip=function skip(bytes,fail){if(!(this.offset+bytes<=this.length))return this.error(fail||'DecoderBuffer overrun');var res=new DecoderBuffer(this.base);return res._reporterState=this._reporterState,res.offset=this.offset,res.length=this.offset+bytes,this.offset+=bytes,res},DecoderBuffer.prototype.raw=function raw(save){return this.base.slice(save?save.offset:this.offset,this.length)},exports.EncoderBuffer=EncoderBuffer,EncoderBuffer.prototype.join=function join(out,offset){return(!out&&(out=new Buffer(this.length)),!offset&&(offset=0),this.length===0)?out:(Array.isArray(this.value)?this.value.forEach(function(item){item.join(out,offset),offset+=item.length}):(typeof this.value==='number'?out[offset]=this.value:typeof this.value==='string'?out.write(this.value,offset):Buffer.isBuffer(this.value)&&this.value.copy(out,offset),offset+=this.length),out)}},function(module,exports,__webpack_require__){var constants=exports;constants._reverse=function reverse(map){var res={};return Object.keys(map).forEach(function(key){(key|0)==key&&(key|=0);var value=map[key];res[value]=key}),res},constants.der=__webpack_require__(81)},function(module,exports,__webpack_require__){function DERDecoder(entity){this.enc='der',this.name=entity.name,this.entity=entity,this.tree=new DERNode,this.tree._init(entity.body)}function DERNode(parent){base.Node.call(this,'der',parent)}function derDecodeTag(buf,fail){var tag=buf.readUInt8(fail);if(buf.isError(tag))return tag;var cls=der.tagClass[tag>>6];var primitive=(tag&32)===0;if((tag&31)===31){var oct=tag;for(tag=0;(oct&128)===128;){if(oct=buf.readUInt8(fail),buf.isError(oct))return oct;tag<<=7,tag|=oct&127}}else tag&=31;var tagStr=der.tag[tag];return{cls:cls,primitive:primitive,tag:tag,tagStr:tagStr}}function derDecodeLen(buf,primitive,fail){var len=buf.readUInt8(fail);if(buf.isError(len))return len;if(!primitive&&len===128)return null;if((len&128)===0)return len;var num=len&127;if(num>4)return buf.error('length octect is too long');len=0;for(var i=0;i<num;i++){len<<=8;var j=buf.readUInt8(fail);if(buf.isError(j))return j;len|=j}return len}var inherits=__webpack_require__(0);var asn1=__webpack_require__(12);var base=asn1.base;var bignum=asn1.bignum;var der=asn1.constants.der;;module.exports=DERDecoder,DERDecoder.prototype.decode=function decode(data,options){return!(data instanceof base.DecoderBuffer)&&(data=new base.DecoderBuffer(data,options)),this.tree._decode(data,options)},inherits(DERNode,base.Node),DERNode.prototype._peekTag=function peekTag(buffer,tag,any){if(buffer.isEmpty())return!1;var state=buffer.save();var decodedTag=derDecodeTag(buffer,'Failed to peek tag: "'+tag+'"');return buffer.isError(decodedTag)?decodedTag:(buffer.restore(state),decodedTag.tag===tag||decodedTag.tagStr===tag||decodedTag.tagStr+'of'===tag||any)},DERNode.prototype._decodeTag=function decodeTag(buffer,tag,any){var decodedTag=derDecodeTag(buffer,'Failed to decode tag of "'+tag+'"');if(buffer.isError(decodedTag))return decodedTag;var len=derDecodeLen(buffer,decodedTag.primitive,'Failed to get length of "'+tag+'"');if(buffer.isError(len))return len;if(!any&&decodedTag.tag!==tag&&decodedTag.tagStr!==tag&&decodedTag.tagStr+'of'!==tag)return buffer.error('Failed to match tag: "'+tag+'"');if(decodedTag.primitive||len!==null)return buffer.skip(len,'Failed to match body of: "'+tag+'"');var state=buffer.save();var res=this._skipUntilEnd(buffer,'Failed to skip indefinite length body: "'+this.tag+'"');return buffer.isError(res)?res:(len=buffer.offset-state.offset,buffer.restore(state),buffer.skip(len,'Failed to match body of: "'+tag+'"'))},DERNode.prototype._skipUntilEnd=function skipUntilEnd(buffer,fail){for(;!0;){var tag=derDecodeTag(buffer,fail);if(buffer.isError(tag))return tag;var len=derDecodeLen(buffer,tag.primitive,fail);if(buffer.isError(len))return len;var res;if(res=tag.primitive||len!==null?buffer.skip(len):this._skipUntilEnd(buffer,fail),buffer.isError(res))return res;if(tag.tagStr==='end')break}},DERNode.prototype._decodeList=function decodeList(buffer,tag,decoder,options){for(var result=[];!buffer.isEmpty();){var possibleEnd=this._peekTag(buffer,'end');if(buffer.isError(possibleEnd))return possibleEnd;var res=decoder.decode(buffer,'der',options);if(buffer.isError(res)&&possibleEnd)break;result.push(res)}return result},DERNode.prototype._decodeStr=function decodeStr(buffer,tag){if(tag==='bitstr'){var unused=buffer.readUInt8();return buffer.isError(unused)?unused:{unused:unused,data:buffer.raw()}}if(tag==='bmpstr'){var raw=buffer.raw();if(raw.length%2===1)return buffer.error('Decoding of string type: bmpstr length mismatch');var str='';for(var i=0;i<raw.length/2;i++)str+=String.fromCharCode(raw.readUInt16BE(i*2));return str}if(tag==='numstr'){var numstr=buffer.raw().toString('ascii');return this._isNumstr(numstr)?numstr:buffer.error('Decoding of string type: '+'numstr unsupported characters')}if(tag==='octstr')return buffer.raw();if(tag==='objDesc')return buffer.raw();if(tag==='printstr'){var printstr=buffer.raw().toString('ascii');return this._isPrintstr(printstr)?printstr:buffer.error('Decoding of string type: '+'printstr unsupported characters')}return /str$/.test(tag)?buffer.raw().toString():buffer.error('Decoding of string type: '+tag+' unsupported')},DERNode.prototype._decodeObjid=function decodeObjid(buffer,values,relative){var result;var identifiers=[];for(var ident=0;!buffer.isEmpty();){var subident=buffer.readUInt8();ident<<=7,ident|=subident&127,(subident&128)===0&&(identifiers.push(ident),ident=0)}subident&128&&identifiers.push(ident);var first=identifiers[0]/40|0;var second=identifiers[0]%40;if(result=relative?identifiers:[first,second].concat(identifiers.slice(1)),values){var tmp=values[result.join(' ')];tmp===undefined&&(tmp=values[result.join('.')]),tmp!==undefined&&(result=tmp)}return result},DERNode.prototype._decodeTime=function decodeTime(buffer,tag){var str=buffer.raw().toString();if(tag==='gentime'){var year=str.slice(0,4)|0;var mon=str.slice(4,6)|0;var day=str.slice(6,8)|0;var hour=str.slice(8,10)|0;var min=str.slice(10,12)|0;var sec=str.slice(12,14)|0}else if(tag==='utctime'){var year=str.slice(0,2)|0;var mon=str.slice(2,4)|0;var day=str.slice(4,6)|0;var hour=str.slice(6,8)|0;var min=str.slice(8,10)|0;var sec=str.slice(10,12)|0;year=year<70?2000+year:1900+year}else return buffer.error('Decoding '+tag+' time is not supported yet');return Date.UTC(year,mon-1,day,hour,min,sec,0)},DERNode.prototype._decodeNull=function decodeNull(buffer){return null},DERNode.prototype._decodeBool=function decodeBool(buffer){var res=buffer.readUInt8();return buffer.isError(res)?res:res!==0},DERNode.prototype._decodeInt=function decodeInt(buffer,values){var raw=buffer.raw();var res=new bignum(raw);return values&&(res=values[res.toString(10)]||res),res},DERNode.prototype._use=function use(entity,obj){return typeof entity==='function'&&(entity=entity(obj)),entity._getDecoder('der').tree}},function(module,exports,__webpack_require__){function DEREncoder(entity){this.enc='der',this.name=entity.name,this.entity=entity,this.tree=new DERNode,this.tree._init(entity.body)}function DERNode(parent){base.Node.call(this,'der',parent)}function two(num){return num<10?'0'+num:num}function encodeTag(tag,primitive,cls,reporter){var res;if(tag==='seqof'?tag='seq':tag==='setof'&&(tag='set'),der.tagByName.hasOwnProperty(tag))res=der.tagByName[tag];else if(typeof tag==='number'&&(tag|0)===tag)res=tag;else return reporter.error('Unknown tag: '+tag);return res>=31?reporter.error('Multi-octet tag encoding unsupported'):(!primitive&&(res|=32),res|=der.tagClassByName[cls||'universal']<<6,res)}var inherits=__webpack_require__(0);var Buffer=__webpack_require__(1).Buffer;var asn1=__webpack_require__(12);var base=asn1.base;var der=asn1.constants.der;;module.exports=DEREncoder,DEREncoder.prototype.encode=function encode(data,reporter){return this.tree._encode(data,reporter).join()},inherits(DERNode,base.Node),DERNode.prototype._encodeComposite=function encodeComposite(tag,primitive,cls,content){var encodedTag=encodeTag(tag,primitive,cls,this.reporter);if(content.length<128){var header=new Buffer(2);return header[0]=encodedTag,header[1]=content.length,this._createEncoderBuffer([header,content])}var lenOctets=1;for(var i=content.length;i>=256;i>>=8)lenOctets++;var header=new Buffer(1+1+lenOctets);header[0]=encodedTag,header[1]=128|lenOctets;for(var i=1+lenOctets,j=content.length;j>0;i--,j>>=8)header[i]=j&255;return this._createEncoderBuffer([header,content])},DERNode.prototype._encodeStr=function encodeStr(str,tag){if(tag==='bitstr')return this._createEncoderBuffer([str.unused|0,str.data]);if(tag==='bmpstr'){var buf=new Buffer(str.length*2);for(var i=0;i<str.length;i++)buf.writeUInt16BE(str.charCodeAt(i),i*2);return this._createEncoderBuffer(buf)}return tag==='numstr'?this._isNumstr(str)?this._createEncoderBuffer(str):this.reporter.error('Encoding of string type: numstr supports '+'only digits and space'):tag==='printstr'?this._isPrintstr(str)?this._createEncoderBuffer(str):this.reporter.error('Encoding of string type: printstr supports '+'only latin upper and lower case letters, '+'digits, space, apostrophe, left and rigth '+'parenthesis, plus sign, comma, hyphen, '+'dot, slash, colon, equal sign, '+'question mark'):/str$/.test(tag)?this._createEncoderBuffer(str):tag==='objDesc'?this._createEncoderBuffer(str):this.reporter.error('Encoding of string type: '+tag+' unsupported')},DERNode.prototype._encodeObjid=function encodeObjid(id,values,relative){if(typeof id==='string'){if(!values)return this.reporter.error('string objid given, but no values map found');if(!values.hasOwnProperty(id))return this.reporter.error('objid not found in values map');id=values[id].split(/[\s\.]+/g);for(var i=0;i<id.length;i++)id[i]|=0}else if(Array.isArray(id)){id=id.slice();for(var i=0;i<id.length;i++)id[i]|=0}if(!Array.isArray(id))return this.reporter.error('objid() should be either array or string, '+'got: '+JSON.stringify(id));if(!relative){if(id[1]>=40)return this.reporter.error('Second objid identifier OOB');id.splice(0,2,id[0]*40+id[1])}var size=0;for(var i=0;i<id.length;i++){var ident=id[i];for(size++;ident>=128;ident>>=7)size++}var objid=new Buffer(size);var offset=objid.length-1;for(var i=id.length-1;i>=0;i--){var ident=id[i];for(objid[offset--]=ident&127;(ident>>=7)>0;)objid[offset--]=128|ident&127}return this._createEncoderBuffer(objid)},DERNode.prototype._encodeTime=function encodeTime(time,tag){var str;var date=new Date(time);return tag==='gentime'?str=[two(date.getFullYear()),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),'Z'].join(''):tag==='utctime'?str=[two(date.getFullYear()%100),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),'Z'].join(''):this.reporter.error('Encoding '+tag+' time is not supported yet'),this._encodeStr(str,'octstr')},DERNode.prototype._encodeNull=function encodeNull(){return this._createEncoderBuffer('')},DERNode.prototype._encodeInt=function encodeInt(num,values){if(typeof num==='string'){if(!values)return this.reporter.error('String int or enum given, but no values map');if(!values.hasOwnProperty(num))return this.reporter.error('Values map doesn\'t contain: '+JSON.stringify(num));num=values[num]}if(typeof num!=='number'&&!Buffer.isBuffer(num)){var numArray=num.toArray();!num.sign&&numArray[0]&128&&numArray.unshift(0),num=new Buffer(numArray)}if(Buffer.isBuffer(num)){var size=num.length;num.length===0&&size++;var out=new Buffer(size);return num.copy(out),num.length===0&&(out[0]=0),this._createEncoderBuffer(out)}if(num<128)return this._createEncoderBuffer(num);if(num<256)return this._createEncoderBuffer([0,num]);var size=1;for(var i=num;i>=256;i>>=8)size++;var out=Array(size);for(var i=out.length-1;i>=0;i--)out[i]=num&255,num>>=8;return out[0]&128&&out.unshift(0),this._createEncoderBuffer(new Buffer(out))},DERNode.prototype._encodeBool=function encodeBool(value){return this._createEncoderBuffer(value?255:0)},DERNode.prototype._use=function use(entity,obj){return typeof entity==='function'&&(entity=entity(obj)),entity._getEncoder('der').tree},DERNode.prototype._skipDefault=function skipDefault(dataBuffer,reporter,parent){var state=this._baseState;var i;if(state['default']===null)return!1;var data=dataBuffer.join();if(state.defaultBuffer===undefined&&(state.defaultBuffer=this._encodeValue(state['default'],reporter,parent).join()),data.length!==state.defaultBuffer.length)return!1;for(i=0;i<data.length;i++)if(data[i]!==state.defaultBuffer[i])return!1;return!0}},function(module,exports,__webpack_require__){function Rand(rand){this.rand=rand}var r;if(module.exports=function rand(len){return!r&&(r=new Rand(null)),r.generate(len)},module.exports.Rand=Rand,Rand.prototype.generate=function generate(len){return this._rand(len)},Rand.prototype._rand=function _rand(n){if(this.rand.getBytes)return this.rand.getBytes(n);var res=new Uint8Array(n);for(var i=0;i<res.length;i++)res[i]=this.rand.getByte();return res},typeof self==='object')self.crypto&&self.crypto.getRandomValues?Rand.prototype._rand=function _rand(n){var arr=new Uint8Array(n);return self.crypto.getRandomValues(arr),arr}:self.msCrypto&&self.msCrypto.getRandomValues?Rand.prototype._rand=function _rand(n){var arr=new Uint8Array(n);return self.msCrypto.getRandomValues(arr),arr}:typeof window==='object'&&(Rand.prototype._rand=function(){throw new Error('Not implemented yet')});else try{var crypto=__webpack_require__(176);if(typeof crypto.randomBytes!=='function')throw new Error('Not supported');Rand.prototype._rand=function _rand(n){return crypto.randomBytes(n)}}catch(e){}},function(module,exports,__webpack_require__){function xorTest(a,b){var out=0;a.length!==b.length&&out++;var len=Math.min(a.length,b.length);for(var i=0;i<len;++i)out+=a[i]^b[i];return out}function StreamCipher(mode,key,iv,decrypt){Transform.call(this),this._finID=Buffer.concat([iv,Buffer.from([0,0,0,1])]),iv=Buffer.concat([iv,Buffer.from([0,0,0,2])]),this._cipher=new aes.AES(key),this._prev=Buffer.from(iv),this._cache=Buffer.allocUnsafe(0),this._secCache=Buffer.allocUnsafe(0),this._decrypt=decrypt,this._alen=0,this._len=0,this._mode=mode;var h=Buffer.alloc(4,0);this._ghash=new GHASH(this._cipher.encryptBlock(h)),this._authTag=null,this._called=!1}var aes=__webpack_require__(19);var Buffer=__webpack_require__(3).Buffer;var Transform=__webpack_require__(8);var inherits=__webpack_require__(0);var GHASH=__webpack_require__(89);var xor=__webpack_require__(14);inherits(StreamCipher,Transform),StreamCipher.prototype._update=function(chunk){if(!this._called&&this._alen){var rump=16-this._alen%16;rump<16&&(rump=Buffer.alloc(rump,0),this._ghash.update(rump))}this._called=!0;var out=this._mode.encrypt(this,chunk);return this._decrypt?this._ghash.update(chunk):this._ghash.update(out),this._len+=chunk.length,out},StreamCipher.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error('Unsupported state or unable to authenticate data');var tag=xor(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&xorTest(tag,this._authTag))throw new Error('Unsupported state or unable to authenticate data');this._authTag=tag,this._cipher.scrub()},StreamCipher.prototype.getAuthTag=function getAuthTag(){if(this._decrypt||!Buffer.isBuffer(this._authTag))throw new Error('Attempting to get auth tag in unsupported state');return this._authTag},StreamCipher.prototype.setAuthTag=function setAuthTag(tag){if(!this._decrypt)throw new Error('Attempting to set auth tag in unsupported state');this._authTag=tag},StreamCipher.prototype.setAAD=function setAAD(buf){if(this._called)throw new Error('Attempting to set AAD in unsupported state');this._ghash.update(buf),this._alen+=buf.length},module.exports=StreamCipher},function(module,exports,__webpack_require__){(function(Buffer){function incr32(iv){var len=iv.length;for(var item;len--;)if(item=iv.readUInt8(len),item===255)iv.writeUInt8(0,len);else{item++,iv.writeUInt8(item,len);break}}function getBlock(self){var out=self._cipher.encryptBlockRaw(self._prev);return incr32(self._prev),out}var xor=__webpack_require__(14);var blockSize=16;exports.encrypt=function(self,chunk){var chunkNum=Math.ceil(chunk.length/blockSize);var start=self._cache.length;self._cache=Buffer.concat([self._cache,Buffer.allocUnsafe(chunkNum*blockSize)]);for(var i=0;i<chunkNum;i++){var out=getBlock(self);var offset=start+i*blockSize;self._cache.writeUInt32BE(out[0],offset+0),self._cache.writeUInt32BE(out[1],offset+4),self._cache.writeUInt32BE(out[2],offset+8),self._cache.writeUInt32BE(out[3],offset+12)}var pad=self._cache.slice(0,chunk.length);return self._cache=self._cache.slice(chunk.length),xor(chunk,pad)}}).call(exports,__webpack_require__(1).Buffer)},function(module,exports){module.exports={'aes-128-ecb':{'cipher':'AES','key':128,'iv':0,'mode':'ECB','type':'block'},'aes-192-ecb':{'cipher':'AES','key':192,'iv':0,'mode':'ECB','type':'block'},'aes-256-ecb':{'cipher':'AES','key':256,'iv':0,'mode':'ECB','type':'block'},'aes-128-cbc':{'cipher':'AES','key':128,'iv':16,'mode':'CBC','type':'block'},'aes-192-cbc':{'cipher':'AES','key':192,'iv':16,'mode':'CBC','type':'block'},'aes-256-cbc':{'cipher':'AES','key':256,'iv':16,'mode':'CBC','type':'block'},'aes128':{'cipher':'AES','key':128,'iv':16,'mode':'CBC','type':'block'},'aes192':{'cipher':'AES','key':192,'iv':16,'mode':'CBC','type':'block'},'aes256':{'cipher':'AES','key':256,'iv':16,'mode':'CBC','type':'block'},'aes-128-cfb':{'cipher':'AES','key':128,'iv':16,'mode':'CFB','type':'stream'},'aes-192-cfb':{'cipher':'AES','key':192,'iv':16,'mode':'CFB','type':'stream'},'aes-256-cfb':{'cipher':'AES','key':256,'iv':16,'mode':'CFB','type':'stream'},'aes-128-cfb8':{'cipher':'AES','key':128,'iv':16,'mode':'CFB8','type':'stream'},'aes-192-cfb8':{'cipher':'AES','key':192,'iv':16,'mode':'CFB8','type':'stream'},'aes-256-cfb8':{'cipher':'AES','key':256,'iv':16,'mode':'CFB8','type':'stream'},'aes-128-cfb1':{'cipher':'AES','key':128,'iv':16,'mode':'CFB1','type':'stream'},'aes-192-cfb1':{'cipher':'AES','key':192,'iv':16,'mode':'CFB1','type':'stream'},'aes-256-cfb1':{'cipher':'AES','key':256,'iv':16,'mode':'CFB1','type':'stream'},'aes-128-ofb':{'cipher':'AES','key':128,'iv':16,'mode':'OFB','type':'stream'},'aes-192-ofb':{'cipher':'AES','key':192,'iv':16,'mode':'OFB','type':'stream'},'aes-256-ofb':{'cipher':'AES','key':256,'iv':16,'mode':'OFB','type':'stream'},'aes-128-ctr':{'cipher':'AES','key':128,'iv':16,'mode':'CTR','type':'stream'},'aes-192-ctr':{'cipher':'AES','key':192,'iv':16,'mode':'CTR','type':'stream'},'aes-256-ctr':{'cipher':'AES','key':256,'iv':16,'mode':'CTR','type':'stream'},'aes-128-gcm':{'cipher':'AES','key':128,'iv':12,'mode':'GCM','type':'auth'},'aes-192-gcm':{'cipher':'AES','key':192,'iv':12,'mode':'GCM','type':'auth'},'aes-256-gcm':{'cipher':'AES','key':256,'iv':12,'mode':'GCM','type':'auth'}}},function(module,exports,__webpack_require__){function StreamCipher(mode,key,iv,decrypt){Transform.call(this),this._cipher=new aes.AES(key),this._prev=Buffer.from(iv),this._cache=Buffer.allocUnsafe(0),this._secCache=Buffer.allocUnsafe(0),this._decrypt=decrypt,this._mode=mode}var aes=__webpack_require__(19);var Buffer=__webpack_require__(3).Buffer;var Transform=__webpack_require__(8);var inherits=__webpack_require__(0);inherits(StreamCipher,Transform),StreamCipher.prototype._update=function(chunk){return this._mode.encrypt(this,chunk,this._decrypt)},StreamCipher.prototype._final=function(){this._cipher.scrub()},module.exports=StreamCipher},function(module,exports){module.exports={'sha224WithRSAEncryption':{'sign':'rsa','hash':'sha224','id':'302d300d06096086480165030402040500041c'},'RSA-SHA224':{'sign':'ecdsa/rsa','hash':'sha224','id':'302d300d06096086480165030402040500041c'},'sha256WithRSAEncryption':{'sign':'rsa','hash':'sha256','id':'3031300d060960864801650304020105000420'},'RSA-SHA256':{'sign':'ecdsa/rsa','hash':'sha256','id':'3031300d060960864801650304020105000420'},'sha384WithRSAEncryption':{'sign':'rsa','hash':'sha384','id':'3041300d060960864801650304020205000430'},'RSA-SHA384':{'sign':'ecdsa/rsa','hash':'sha384','id':'3041300d060960864801650304020205000430'},'sha512WithRSAEncryption':{'sign':'rsa','hash':'sha512','id':'3051300d060960864801650304020305000440'},'RSA-SHA512':{'sign':'ecdsa/rsa','hash':'sha512','id':'3051300d060960864801650304020305000440'},'RSA-SHA1':{'sign':'rsa','hash':'sha1','id':'3021300906052b0e03021a05000414'},'ecdsa-with-SHA1':{'sign':'ecdsa','hash':'sha1','id':''},'sha256':{'sign':'ecdsa','hash':'sha256','id':''},'sha224':{'sign':'ecdsa','hash':'sha224','id':''},'sha384':{'sign':'ecdsa','hash':'sha384','id':''},'sha512':{'sign':'ecdsa','hash':'sha512','id':''},'DSA-SHA':{'sign':'dsa','hash':'sha1','id':''},'DSA-SHA1':{'sign':'dsa','hash':'sha1','id':''},'DSA':{'sign':'dsa','hash':'sha1','id':''},'DSA-WITH-SHA224':{'sign':'dsa','hash':'sha224','id':''},'DSA-SHA224':{'sign':'dsa','hash':'sha224','id':''},'DSA-WITH-SHA256':{'sign':'dsa','hash':'sha256','id':''},'DSA-SHA256':{'sign':'dsa','hash':'sha256','id':''},'DSA-WITH-SHA384':{'sign':'dsa','hash':'sha384','id':''},'DSA-SHA384':{'sign':'dsa','hash':'sha384','id':''},'DSA-WITH-SHA512':{'sign':'dsa','hash':'sha512','id':''},'DSA-SHA512':{'sign':'dsa','hash':'sha512','id':''},'DSA-RIPEMD160':{'sign':'dsa','hash':'rmd160','id':''},'ripemd160WithRSA':{'sign':'rsa','hash':'rmd160','id':'3021300906052b2403020105000414'},'RSA-RIPEMD160':{'sign':'rsa','hash':'rmd160','id':'3021300906052b2403020105000414'},'md5WithRSAEncryption':{'sign':'rsa','hash':'md5','id':'3020300c06082a864886f70d020505000410'},'RSA-MD5':{'sign':'rsa','hash':'md5','id':'3020300c06082a864886f70d020505000410'}}},function(module,exports){module.exports={'1.3.132.0.10':'secp256k1','1.3.132.0.33':'p224','1.2.840.10045.3.1.1':'p192','1.2.840.10045.3.1.7':'p256','1.3.132.0.34':'p384','1.3.132.0.35':'p521'}},function(module,exports,__webpack_require__){'use strict';function Hmac(alg,key){Base.call(this,'digest'),typeof key==='string'&&(key=Buffer.from(key));var blocksize=alg==='sha512'||alg==='sha384'?128:64;if(this._alg=alg,this._key=key,key.length>blocksize){var hash=alg==='rmd160'?new RIPEMD160:sha(alg);key=hash.update(key).digest()}else key.length<blocksize&&(key=Buffer.concat([key,ZEROS],blocksize));var ipad=this._ipad=Buffer.allocUnsafe(blocksize);var opad=this._opad=Buffer.allocUnsafe(blocksize);for(var i=0;i<blocksize;i++)ipad[i]=key[i]^54,opad[i]=key[i]^92;this._hash=alg==='rmd160'?new RIPEMD160:sha(alg),this._hash.update(ipad)}var inherits=__webpack_require__(0);var Legacy=__webpack_require__(106);var Base=__webpack_require__(8);var Buffer=__webpack_require__(3).Buffer;var md5=__webpack_require__(28);var RIPEMD160=__webpack_require__(35);var sha=__webpack_require__(36);var ZEROS=Buffer.alloc(128);inherits(Hmac,Base),Hmac.prototype._update=function(data){this._hash.update(data)},Hmac.prototype._final=function(){var h=this._hash.digest();var hash=this._alg==='rmd160'?new RIPEMD160:sha(this._alg);return hash.update(this._opad).update(h).digest()},module.exports=function createHmac(alg,key){return alg=alg.toLowerCase(),alg==='rmd160'||alg==='ripemd160'?new Hmac('rmd160',key):alg==='md5'?new Legacy(md5,key):new Hmac(alg,key)}},function(module,exports,__webpack_require__){function _getPrimes(){if(primes!==null)return primes;var limit=1048576;var res=[];res[0]=2;for(var i=1,k=3;k<limit;k+=2){var sqrt=_Mathceil2(Math.sqrt(k));for(var j=0;j<i&&res[j]<=sqrt&&k%res[j]!==0;j++);!(i!==j&&res[j]<=sqrt)&&(res[i++]=k)}return primes=res,res}function simpleSieve(p){var primes=_getPrimes();for(var i=0;i<primes.length;i++)if(p.modn(primes[i])===0)return p.cmpn(primes[i])===0;return!0}function fermatTest(p){var red=BN.mont(p);return TWO.toRed(red).redPow(p.subn(1)).fromRed().cmpn(1)===0}function findPrime(bits,gen){if(bits<16)return gen===2||gen===5?new BN([140,123]):new BN([140,39]);gen=new BN(gen);for(var num,n2;!0;){for(num=new BN(randomBytes(_Mathceil2(bits/8)));num.bitLength()>bits;)num.ishrn(1);if(num.isEven()&&num.iadd(ONE),!num.testn(1)&&num.iadd(TWO),!gen.cmp(TWO))for(;num.mod(TWENTYFOUR).cmp(ELEVEN);)num.iadd(FOUR);else if(!gen.cmp(FIVE))for(;num.mod(TEN).cmp(THREE);)num.iadd(FOUR);if(n2=num.shrn(1),simpleSieve(n2)&&simpleSieve(num)&&fermatTest(n2)&&fermatTest(num)&&millerRabin.test(n2)&&millerRabin.test(num))return num}}var _Mathceil2=Math.ceil;var randomBytes=__webpack_require__(18);module.exports=findPrime,findPrime.simpleSieve=simpleSieve,findPrime.fermatTest=fermatTest;var BN=__webpack_require__(2);var TWENTYFOUR=new BN(24);var MillerRabin=__webpack_require__(56);var millerRabin=new MillerRabin;var ONE=new BN(1);var TWO=new BN(2);var FIVE=new BN(5);var SIXTEEN=new BN(16);var EIGHT=new BN(8);var TEN=new BN(10);var THREE=new BN(3);var SEVEN=new BN(7);var ELEVEN=new BN(11);var FOUR=new BN(4);var TWELVE=new BN(12);var primes=null},function(module,exports,__webpack_require__){'use strict';function SHA256(){return this instanceof SHA256?void(BlockHash.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=Array(64)):new SHA256}var utils=__webpack_require__(6);var common=__webpack_require__(17);var shaCommon=__webpack_require__(54);var assert=__webpack_require__(5);var sum32=utils.sum32;var sum32_4=utils.sum32_4;var sum32_5=utils.sum32_5;var ch32=shaCommon.ch32;var maj32=shaCommon.maj32;var s0_256=shaCommon.s0_256;var s1_256=shaCommon.s1_256;var g0_256=shaCommon.g0_256;var g1_256=shaCommon.g1_256;var BlockHash=common.BlockHash;var sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];utils.inherits(SHA256,BlockHash),module.exports=SHA256,SHA256.blockSize=512,SHA256.outSize=256,SHA256.hmacStrength=192,SHA256.padLength=64,SHA256.prototype._update=function _update(msg,start){var W=this.W;for(var i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=sum32_4(g1_256(W[i-2]),W[i-7],g0_256(W[i-15]),W[i-16]);var a=this.h[0];var b=this.h[1];var c=this.h[2];var d=this.h[3];var e=this.h[4];var f=this.h[5];var g=this.h[6];var h=this.h[7];for(assert(this.k.length===W.length),i=0;i<W.length;i++){var T1=sum32_5(h,s1_256(e),ch32(e,f,g),this.k[i],W[i]);var T2=sum32(s0_256(a),maj32(a,b,c));h=g,g=f,f=e,e=sum32(d,T1),d=c,c=b,b=a,a=sum32(T1,T2)}this.h[0]=sum32(this.h[0],a),this.h[1]=sum32(this.h[1],b),this.h[2]=sum32(this.h[2],c),this.h[3]=sum32(this.h[3],d),this.h[4]=sum32(this.h[4],e),this.h[5]=sum32(this.h[5],f),this.h[6]=sum32(this.h[6],g),this.h[7]=sum32(this.h[7],h)},SHA256.prototype._digest=function digest(enc){return enc==='hex'?utils.toHex32(this.h,'big'):utils.split32(this.h,'big')}},function(module,exports,__webpack_require__){'use strict';function SHA512(){return this instanceof SHA512?void(BlockHash.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=Array(160)):new SHA512}function ch64_hi(xh,xl,yh,yl,zh){var r=xh&yh^~xh&zh;return r<0&&(r+=4294967296),r}function ch64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^~xl&zl;return r<0&&(r+=4294967296),r}function maj64_hi(xh,xl,yh,yl,zh){var r=xh&yh^xh&zh^yh&zh;return r<0&&(r+=4294967296),r}function maj64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^xl&zl^yl&zl;return r<0&&(r+=4294967296),r}function s0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,28);var c1_hi=rotr64_hi(xl,xh,2);var c2_hi=rotr64_hi(xl,xh,7);var r=c0_hi^c1_hi^c2_hi;return r<0&&(r+=4294967296),r}function s0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,28);var c1_lo=rotr64_lo(xl,xh,2);var c2_lo=rotr64_lo(xl,xh,7);var r=c0_lo^c1_lo^c2_lo;return r<0&&(r+=4294967296),r}function s1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,14);var c1_hi=rotr64_hi(xh,xl,18);var c2_hi=rotr64_hi(xl,xh,9);var r=c0_hi^c1_hi^c2_hi;return r<0&&(r+=4294967296),r}function s1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,14);var c1_lo=rotr64_lo(xh,xl,18);var c2_lo=rotr64_lo(xl,xh,9);var r=c0_lo^c1_lo^c2_lo;return r<0&&(r+=4294967296),r}function g0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,1);var c1_hi=rotr64_hi(xh,xl,8);var c2_hi=shr64_hi(xh,xl,7);var r=c0_hi^c1_hi^c2_hi;return r<0&&(r+=4294967296),r}function g0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,1);var c1_lo=rotr64_lo(xh,xl,8);var c2_lo=shr64_lo(xh,xl,7);var r=c0_lo^c1_lo^c2_lo;return r<0&&(r+=4294967296),r}function g1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,19);var c1_hi=rotr64_hi(xl,xh,29);var c2_hi=shr64_hi(xh,xl,6);var r=c0_hi^c1_hi^c2_hi;return r<0&&(r+=4294967296),r}function g1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,19);var c1_lo=rotr64_lo(xl,xh,29);var c2_lo=shr64_lo(xh,xl,6);var r=c0_lo^c1_lo^c2_lo;return r<0&&(r+=4294967296),r}var utils=__webpack_require__(6);var common=__webpack_require__(17);var assert=__webpack_require__(5);var rotr64_hi=utils.rotr64_hi;var rotr64_lo=utils.rotr64_lo;var shr64_hi=utils.shr64_hi;var shr64_lo=utils.shr64_lo;var sum64=utils.sum64;var sum64_hi=utils.sum64_hi;var sum64_lo=utils.sum64_lo;var sum64_4_hi=utils.sum64_4_hi;var sum64_4_lo=utils.sum64_4_lo;var sum64_5_hi=utils.sum64_5_hi;var sum64_5_lo=utils.sum64_5_lo;var BlockHash=common.BlockHash;var sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];utils.inherits(SHA512,BlockHash),module.exports=SHA512,SHA512.blockSize=1024,SHA512.outSize=512,SHA512.hmacStrength=192,SHA512.padLength=128,SHA512.prototype._prepareBlock=function _prepareBlock(msg,start){var W=this.W;for(var i=0;i<32;i++)W[i]=msg[start+i];for(;i<W.length;i+=2){var c0_hi=g1_512_hi(W[i-4],W[i-3]);var c0_lo=g1_512_lo(W[i-4],W[i-3]);var c1_hi=W[i-14];var c1_lo=W[i-13];var c2_hi=g0_512_hi(W[i-30],W[i-29]);var c2_lo=g0_512_lo(W[i-30],W[i-29]);var c3_hi=W[i-32];var c3_lo=W[i-31];W[i]=sum64_4_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo),W[i+1]=sum64_4_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo)}},SHA512.prototype._update=function _update(msg,start){this._prepareBlock(msg,start);var W=this.W;var ah=this.h[0];var al=this.h[1];var bh=this.h[2];var bl=this.h[3];var ch=this.h[4];var cl=this.h[5];var dh=this.h[6];var dl=this.h[7];var eh=this.h[8];var el=this.h[9];var fh=this.h[10];var fl=this.h[11];var gh=this.h[12];var gl=this.h[13];var hh=this.h[14];var hl=this.h[15];assert(this.k.length===W.length);for(var i=0;i<W.length;i+=2){var c0_hi=hh;var c0_lo=hl;var c1_hi=s1_512_hi(eh,el);var c1_lo=s1_512_lo(eh,el);var c2_hi=ch64_hi(eh,el,fh,fl,gh,gl);var c2_lo=ch64_lo(eh,el,fh,fl,gh,gl);var c3_hi=this.k[i];var c3_lo=this.k[i+1];var c4_hi=W[i];var c4_lo=W[i+1];var T1_hi=sum64_5_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);var T1_lo=sum64_5_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);c0_hi=s0_512_hi(ah,al),c0_lo=s0_512_lo(ah,al),c1_hi=maj64_hi(ah,al,bh,bl,ch,cl),c1_lo=maj64_lo(ah,al,bh,bl,ch,cl);var T2_hi=sum64_hi(c0_hi,c0_lo,c1_hi,c1_lo);var T2_lo=sum64_lo(c0_hi,c0_lo,c1_hi,c1_lo);hh=gh,hl=gl,gh=fh,gl=fl,fh=eh,fl=el,eh=sum64_hi(dh,dl,T1_hi,T1_lo),el=sum64_lo(dl,dl,T1_hi,T1_lo),dh=ch,dl=cl,ch=bh,cl=bl,bh=ah,bl=al,ah=sum64_hi(T1_hi,T1_lo,T2_hi,T2_lo),al=sum64_lo(T1_hi,T1_lo,T2_hi,T2_lo)}sum64(this.h,0,ah,al),sum64(this.h,2,bh,bl),sum64(this.h,4,ch,cl),sum64(this.h,6,dh,dl),sum64(this.h,8,eh,el),sum64(this.h,10,fh,fl),sum64(this.h,12,gh,gl),sum64(this.h,14,hh,hl)},SHA512.prototype._digest=function digest(enc){return enc==='hex'?utils.toHex32(this.h,'big'):utils.split32(this.h,'big')}},function(module,exports,__webpack_require__){'use strict';function ft_1(s,x,y,z){return s===0?ch32(x,y,z):s===1||s===3?p32(x,y,z):s===2?maj32(x,y,z):void 0}function ch32(x,y,z){return x&y^~x&z}function maj32(x,y,z){return x&y^x&z^y&z}function p32(x,y,z){return x^y^z}function s0_256(x){return rotr32(x,2)^rotr32(x,13)^rotr32(x,22)}function s1_256(x){return rotr32(x,6)^rotr32(x,11)^rotr32(x,25)}function g0_256(x){return rotr32(x,7)^rotr32(x,18)^x>>>3}function g1_256(x){return rotr32(x,17)^rotr32(x,19)^x>>>10}var utils=__webpack_require__(6);var rotr32=utils.rotr32;exports.ft_1=ft_1,exports.ch32=ch32,exports.maj32=maj32,exports.p32=p32,exports.s0_256=s0_256,exports.s1_256=s1_256,exports.g0_256=g0_256,exports.g1_256=g1_256},function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return toString.call(arr)=='[object Array]'}},function(module,exports,__webpack_require__){function MillerRabin(rand){this.rand=rand||new brorand.Rand}var _Mathmax2=Math.max;var bn=__webpack_require__(2);var brorand=__webpack_require__(43);module.exports=MillerRabin,MillerRabin.create=function create(rand){return new MillerRabin(rand)},MillerRabin.prototype._rand=function _rand(n){var len=n.bitLength();var buf=this.rand.generate(Math.ceil(len/8));buf[0]|=3;var mask=len&7;return mask!==0&&(buf[buf.length-1]>>=7-mask),new bn(buf)},MillerRabin.prototype.test=function test(n,k,cb){var len=n.bitLength();var red=bn.mont(n);var rone=new bn(1).toRed(red);!k&&(k=_Mathmax2(1,len/48|0));var n1=n.subn(1);var n2=n1.subn(1);for(var s=0;!n1.testn(s);s++);var d=n.shrn(s);var rn1=n1.toRed(red);for(var prime=!0;k>0;k--){var a=this._rand(n2);cb&&cb(a);var x=a.toRed(red).redPow(d);if(x.cmp(rone)!==0&&x.cmp(rn1)!==0){for(var i=1;i<s;i++){if(x=x.redSqr(),x.cmp(rone)===0)return!1;if(x.cmp(rn1)===0)break}if(i===s)return!1}}return prime},MillerRabin.prototype.getDivisor=function getDivisor(n,k){var len=n.bitLength();var red=bn.mont(n);var rone=new bn(1).toRed(red);!k&&(k=_Mathmax2(1,len/48|0));var n1=n.subn(1);var n2=n1.subn(1);for(var s=0;!n1.testn(s);s++);var d=n.shrn(s);for(var rn1=n1.toRed(red);k>0;k--){var a=this._rand(n2);var g=n.gcd(a);if(g.cmpn(1)!==0)return g;var x=a.toRed(red).redPow(d);if(x.cmp(rone)!==0&&x.cmp(rn1)!==0){for(var i=1;i<s;i++){if(x=x.redSqr(),x.cmp(rone)===0)return x.fromRed().subn(1).gcd(n);if(x.cmp(rn1)===0)break}if(i===s)return x=x.redSqr(),x.fromRed().subn(1).gcd(n)}}return!1}},function(module,exports,__webpack_require__){'use strict';function toArray(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if(typeof msg!=='string'){for(var i=0;i<msg.length;i++)res[i]=msg[i]|0;return res}if(enc==='hex'){msg=msg.replace(/[^a-z0-9]+/ig,''),msg.length%2!==0&&(msg='0'+msg);for(var i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16))}else for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i);var hi=c>>8;var lo=c&255;hi?res.push(hi,lo):res.push(lo)}return res}function zero2(word){return word.length===1?'0'+word:word}function toHex(msg){var res='';for(var i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res}var utils=exports;utils.toArray=toArray,utils.zero2=zero2,utils.toHex=toHex,utils.encode=function encode(arr,enc){return enc==='hex'?toHex(arr):arr}},function(module,exports,__webpack_require__){exports.pbkdf2=__webpack_require__(146),exports.pbkdf2Sync=__webpack_require__(61)},function(module,exports,__webpack_require__){(function(process){var defaultEncoding;if(process.browser)defaultEncoding='utf-8';else{var pVersionMajor=parseInt(process.version.split('.')[0].slice(1),10);defaultEncoding=pVersionMajor>=6?'utf-8':'binary'}module.exports=defaultEncoding}).call(exports,__webpack_require__(9))},function(module,exports){var MAX_ALLOC=1073741824-1;module.exports=function(iterations,keylen){if(typeof iterations!=='number')throw new TypeError('Iterations not a number');if(iterations<0)throw new TypeError('Bad iterations');if(typeof keylen!=='number')throw new TypeError('Key length not a number');if(keylen<0||keylen>MAX_ALLOC||keylen!==keylen)throw new TypeError('Bad key length')}},function(module,exports,__webpack_require__){function Hmac(alg,key,saltLen){var hash=getDigest(alg);var blocksize=alg==='sha512'||alg==='sha384'?128:64;key.length>blocksize?key=hash(key):key.length<blocksize&&(key=Buffer.concat([key,ZEROS],blocksize));var ipad=Buffer.allocUnsafe(blocksize+sizes[alg]);var opad=Buffer.allocUnsafe(blocksize+sizes[alg]);for(var i=0;i<blocksize;i++)ipad[i]=key[i]^54,opad[i]=key[i]^92;var ipad1=Buffer.allocUnsafe(blocksize+saltLen+4);ipad.copy(ipad1,0,0,blocksize),this.ipad1=ipad1,this.ipad2=ipad,this.opad=opad,this.alg=alg,this.blocksize=blocksize,this.hash=hash,this.size=sizes[alg]}function getDigest(alg){function shaFunc(data){return sha(alg).update(data).digest()}return alg==='rmd160'||alg==='ripemd160'?rmd160:alg==='md5'?md5:shaFunc}function pbkdf2(password,salt,iterations,keylen,digest){!Buffer.isBuffer(password)&&(password=Buffer.from(password,defaultEncoding)),!Buffer.isBuffer(salt)&&(salt=Buffer.from(salt,defaultEncoding)),checkParameters(iterations,keylen),digest=digest||'sha1';var hmac=new Hmac(digest,password,salt.length);var DK=Buffer.allocUnsafe(keylen);var block1=Buffer.allocUnsafe(salt.length+4);salt.copy(block1,0,0,salt.length);var destPos=0;var hLen=sizes[digest];var l=Math.ceil(keylen/hLen);for(var i=1;i<=l;i++){block1.writeUInt32BE(i,salt.length);var T=hmac.run(block1,hmac.ipad1);var U=T;for(var j=1;j<iterations;j++){U=hmac.run(U,hmac.ipad2);for(var k=0;k<hLen;k++)T[k]^=U[k]}T.copy(DK,destPos),destPos+=hLen}return DK}var md5=__webpack_require__(28);var rmd160=__webpack_require__(35);var sha=__webpack_require__(36);var checkParameters=__webpack_require__(60);var defaultEncoding=__webpack_require__(59);var Buffer=__webpack_require__(3).Buffer;var ZEROS=Buffer.alloc(128);var sizes={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};Hmac.prototype.run=function(data,ipad){data.copy(ipad,this.blocksize);var h=this.hash(ipad);return h.copy(this.opad,this.blocksize),this.hash(this.opad)},module.exports=pbkdf2},function(module,exports,__webpack_require__){(function(Buffer){function i2ops(c){var out=new Buffer(4);return out.writeUInt32BE(c,0),out}var createHash=__webpack_require__(16);module.exports=function(seed,len){var t=new Buffer('');for(var i=0,c;t.length<len;)c=i2ops(i++),t=Buffer.concat([t,createHash('sha1').update(seed).update(c).digest()]);return t.slice(0,len)}}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){function withPublic(paddedMsg,key){return new Buffer(paddedMsg.toRed(bn.mont(key.modulus)).redPow(new bn(key.publicExponent)).fromRed().toArray())}var bn=__webpack_require__(2);module.exports=withPublic}).call(exports,__webpack_require__(1).Buffer)},function(module,exports){module.exports=function xor(a,b){var len=a.length;for(var i=-1;++i<len;)a[i]^=b[i];return a}},function(module,exports,__webpack_require__){'use strict';(function(global,process){function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}function prependListener(emitter,event,fn){return typeof emitter.prependListener==='function'?emitter.prependListener(event,fn):void(emitter._events&&emitter._events[event]?isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]:emitter.on(event,fn))}function ReadableState(options,stream){Duplex=Duplex||__webpack_require__(10),options=options||{},this.objectMode=!!options.objectMode,stream instanceof Duplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode);var hwm=options.highWaterMark;var defaultHwm=this.objectMode?16:16*1024;this.highWaterMark=hwm||hwm===0?hwm:defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||'utf8',this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(!StringDecoder&&(StringDecoder=__webpack_require__(32).StringDecoder),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){return Duplex=Duplex||__webpack_require__(10),this instanceof Readable?void(this._readableState=new ReadableState(options,this),this.readable=!0,options&&(typeof options.read==='function'&&(this._read=options.read),typeof options.destroy==='function'&&(this._destroy=options.destroy)),Stream.call(this)):new Readable(options)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var state=stream._readableState;if(chunk===null)state.reading=!1,onEofChunk(stream,state);else{var er;!skipChunkCheck&&(er=chunkInvalid(state,chunk)),er?stream.emit('error',er):state.objectMode||chunk&&chunk.length>0?(typeof chunk!=='string'&&!state.objectMode&&Object.getPrototypeOf(chunk)!==Buffer.prototype&&(chunk=_uint8ArrayToBuffer(chunk)),addToFront?state.endEmitted?stream.emit('error',new Error('stream.unshift() after end event')):addChunk(stream,state,chunk,!0):state.ended?stream.emit('error',new Error('stream.push() after EOF')):(state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||chunk.length!==0?addChunk(stream,state,chunk,!1):maybeReadMore(stream,state)):addChunk(stream,state,chunk,!1))):!addToFront&&(state.reading=!1)}return needMoreData(state)}function addChunk(stream,state,chunk,addToFront){state.flowing&&state.length===0&&!state.sync?(stream.emit('data',chunk),stream.read(0)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}function chunkInvalid(state,chunk){var er;return!_isUint8Array(chunk)&&typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode&&(er=new TypeError('Invalid non-string/buffer chunk')),er}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0)}function computeNewHighWaterMark(n){return n>=MAX_HWM?n=MAX_HWM:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}function howMuchToRead(n,state){return n<=0||state.length===0&&state.ended?0:state.objectMode?1:n===n?(n>state.highWaterMark&&(state.highWaterMark=computeNewHighWaterMark(n)),n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0)):state.flowing&&state.length?state.buffer.head.data.length:state.length}function onEofChunk(stream,state){if(!state.ended){if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,emitReadable(stream)}}function emitReadable(stream){var state=stream._readableState;state.needReadable=!1,!state.emittedReadable&&(debug('emitReadable',state.flowing),state.emittedReadable=!0,state.sync?processNextTick(emitReadable_,stream):emitReadable_(stream))}function emitReadable_(stream){debug('emit readable'),stream.emit('readable'),flow(stream)}function maybeReadMore(stream,state){!state.readingMore&&(state.readingMore=!0,processNextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(var len=state.length;!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark&&(debug('maybeReadMore read 0'),stream.read(0),len!==state.length);)len=state.length;state.readingMore=!1}function pipeOnDrain(src){return function(){var state=src._readableState;debug('pipeOnDrain',state.awaitDrain),state.awaitDrain&&state.awaitDrain--,state.awaitDrain===0&&EElistenerCount(src,'data')&&(state.flowing=!0,flow(src))}}function nReadingNextTick(self){debug('readable nexttick read 0'),self.read(0)}function resume(stream,state){!state.resumeScheduled&&(state.resumeScheduled=!0,processNextTick(resume_,stream,state))}function resume_(stream,state){!state.reading&&(debug('resume read 0'),stream.read(0)),state.resumeScheduled=!1,state.awaitDrain=0,stream.emit('resume'),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug('flow',state.flowing);state.flowing&&stream.read()!==null;);}function fromList(n,state){if(state.length===0)return null;var ret;return state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(ret=state.decoder?state.buffer.join(''):state.buffer.length===1?state.buffer.head.data:state.buffer.concat(state.length),state.buffer.clear()):ret=fromListPartial(n,state.buffer,state.decoder),ret}function fromListPartial(n,list,hasStrings){var ret;return n<list.head.data.length?(ret=list.head.data.slice(0,n),list.head.data=list.head.data.slice(n)):n===list.head.data.length?ret=list.shift():ret=hasStrings?copyFromBufferString(n,list):copyFromBuffer(n,list),ret}function copyFromBufferString(n,list){var p=list.head;var c=1;var ret=p.data;for(n-=ret.length;p=p.next;){var str=p.data;var nb=n>str.length?str.length:n;if(ret+=nb===str.length?str:str.slice(0,n),n-=nb,n===0){nb===str.length?(++c,list.head=p.next?p.next:list.tail=null):(list.head=p,p.data=str.slice(nb));break}++c}return list.length-=c,ret}function copyFromBuffer(n,list){var ret=Buffer.allocUnsafe(n);var p=list.head;var c=1;for(p.data.copy(ret),n-=p.data.length;p=p.next;){var buf=p.data;var nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),n-=nb,n===0){nb===buf.length?(++c,list.head=p.next?p.next:list.tail=null):(list.head=p,p.data=buf.slice(nb));break}++c}return list.length-=c,ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');!state.endEmitted&&(state.ended=!0,processNextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){!state.endEmitted&&state.length===0&&(state.endEmitted=!0,stream.readable=!1,stream.emit('end'))}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++)f(xs[i],i)}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}var processNextTick=__webpack_require__(23);module.exports=Readable;var isArray=__webpack_require__(55);var Duplex;Readable.ReadableState=ReadableState;var EE=__webpack_require__(30).EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length};var Stream=__webpack_require__(68);var Buffer=__webpack_require__(3).Buffer;var OurUint8Array=global.Uint8Array||function(){};var util=__webpack_require__(15);util.inherits=__webpack_require__(0);var debugUtil=__webpack_require__(177);var debug=void 0;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog('stream'):function(){};var BufferList=__webpack_require__(157);var destroyImpl=__webpack_require__(67);var StringDecoder;util.inherits(Readable,Stream);var kProxyEvents=['error','close','destroy','pause','resume'];Object.defineProperty(Readable.prototype,'destroyed',{get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(value){!this._readableState||(this._readableState.destroyed=value)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(err,cb){this.push(null),cb(err)},Readable.prototype.push=function(chunk,encoding){var state=this._readableState;var skipChunkCheck;return state.objectMode?skipChunkCheck=!0:typeof chunk==='string'&&(encoding=encoding||state.defaultEncoding,encoding!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=''),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)},Readable.prototype.isPaused=function(){return this._readableState.flowing===!1},Readable.prototype.setEncoding=function(enc){return!StringDecoder&&(StringDecoder=__webpack_require__(32).StringDecoder),this._readableState.decoder=new StringDecoder(enc),this._readableState.encoding=enc,this};var MAX_HWM=8388608;Readable.prototype.read=function(n){debug('read',n),n=parseInt(n,10);var state=this._readableState;var nOrig=n;if(n!==0&&(state.emittedReadable=!1),n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended))return debug('read: emitReadable',state.length,state.ended),state.length===0&&state.ended?endReadable(this):emitReadable(this),null;if(n=howMuchToRead(n,state),n===0&&state.ended)return state.length===0&&endReadable(this),null;var doRead=state.needReadable;debug('need readable',doRead),(state.length===0||state.length-n<state.highWaterMark)&&(doRead=!0,debug('length less than watermark',doRead)),state.ended||state.reading?(doRead=!1,debug('reading or ended',doRead)):doRead&&(debug('do read'),state.reading=!0,state.sync=!0,state.length===0&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,!state.reading&&(n=howMuchToRead(nOrig,state)));var ret;return ret=n>0?fromList(n,state):null,ret===null?(state.needReadable=!0,n=0):state.length-=n,state.length===0&&(!state.ended&&(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),ret!==null&&this.emit('data',ret),ret},Readable.prototype._read=function(n){this.emit('error',new Error('_read() is not implemented'))},Readable.prototype.pipe=function(dest,pipeOpts){function onunpipe(readable,unpipeInfo){debug('onunpipe'),readable===src&&unpipeInfo&&unpipeInfo.hasUnpiped===!1&&(unpipeInfo.hasUnpiped=!0,cleanup())}function onend(){debug('onend'),dest.end()}function cleanup(){debug('cleanup'),dest.removeListener('close',onclose),dest.removeListener('finish',onfinish),dest.removeListener('drain',ondrain),dest.removeListener('error',onerror),dest.removeListener('unpipe',onunpipe),src.removeListener('end',onend),src.removeListener('end',unpipe),src.removeListener('data',ondata),cleanedUp=!0,state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain)&&ondrain()}function ondata(chunk){debug('ondata'),increasedAwaitDrain=!1;var ret=dest.write(chunk);!1===ret&&!increasedAwaitDrain&&((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp&&(debug('false write response, pause',src._readableState.awaitDrain),src._readableState.awaitDrain++,increasedAwaitDrain=!0),src.pause())}function onerror(er){debug('onerror',er),unpipe(),dest.removeListener('error',onerror),EElistenerCount(dest,'error')===0&&dest.emit('error',er)}function onclose(){dest.removeListener('finish',onfinish),unpipe()}function onfinish(){debug('onfinish'),dest.removeListener('close',onclose),unpipe()}function unpipe(){debug('unpipe'),src.unpipe(dest)}var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);}state.pipesCount+=1,debug('pipe count=%d opts=%j',state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==!1)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:unpipe;state.endEmitted?processNextTick(endFn):src.once('end',endFn),dest.on('unpipe',onunpipe);var ondrain=pipeOnDrain(src);dest.on('drain',ondrain);var cleanedUp=!1;var increasedAwaitDrain=!1;return src.on('data',ondata),prependListener(dest,'error',onerror),dest.once('close',onclose),dest.once('finish',onfinish),dest.emit('pipe',src),!state.flowing&&(debug('pipe resume'),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState;var unpipeInfo={hasUnpiped:!1};if(state.pipesCount===0)return this;if(state.pipesCount===1)return dest&&dest!==state.pipes?this:(!dest&&(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit('unpipe',this,unpipeInfo),this);if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit('unpipe',this,unpipeInfo);return this}var index=indexOf(state.pipes,dest);return index===-1?this:(state.pipes.splice(index,1),state.pipesCount-=1,state.pipesCount===1&&(state.pipes=state.pipes[0]),dest.emit('unpipe',this,unpipeInfo),this)},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==='data')this._readableState.flowing!==!1&&this.resume();else if(ev==='readable'){var state=this._readableState;!state.endEmitted&&!state.readableListening&&(state.readableListening=state.needReadable=!0,state.emittedReadable=!1,state.reading?state.length&&emitReadable(this):processNextTick(nReadingNextTick,this))}return res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var state=this._readableState;return!state.flowing&&(debug('resume'),state.flowing=!0,resume(this,state)),this},Readable.prototype.pause=function(){return debug('call pause flowing=%j',this._readableState.flowing),!1!==this._readableState.flowing&&(debug('pause'),this._readableState.flowing=!1,this.emit('pause')),this},Readable.prototype.wrap=function(stream){var state=this._readableState;var paused=!1;var self=this;for(var i in stream.on('end',function(){if(debug('wrapped end'),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&self.push(chunk)}self.push(null)}),stream.on('data',function(chunk){if((debug('wrapped data'),state.decoder&&(chunk=state.decoder.write(chunk)),!(state.objectMode&&(chunk===null||chunk===undefined)))&&(state.objectMode||chunk&&chunk.length)){var ret=self.push(chunk);!ret&&(paused=!0,stream.pause())}}),stream)this[i]===undefined&&typeof stream[i]==='function'&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],self.emit.bind(self,kProxyEvents[n]));return self._read=function(n){debug('wrapped _read',n),paused&&(paused=!1,stream.resume())},self},Readable._fromList=fromList}).call(exports,__webpack_require__(7),__webpack_require__(9))},function(module,exports,__webpack_require__){'use strict';function TransformState(stream){this.afterTransform=function(er,data){return afterTransform(stream,er,data)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(stream,er,data){var ts=stream._transformState;ts.transforming=!1;var cb=ts.writecb;if(!cb)return stream.emit('error',new Error('write callback called multiple times'));ts.writechunk=null,ts.writecb=null,data!==null&&data!==undefined&&stream.push(data),cb(er);var rs=stream._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&stream._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState=new TransformState(this);var stream=this;this._readableState.needReadable=!0,this._readableState.sync=!1,options&&(typeof options.transform==='function'&&(this._transform=options.transform),typeof options.flush==='function'&&(this._flush=options.flush)),this.once('prefinish',function(){typeof this._flush==='function'?this._flush(function(er,data){done(stream,er,data)}):done(stream)})}function done(stream,er,data){if(er)return stream.emit('error',er);data!==null&&data!==undefined&&stream.push(data);var ws=stream._writableState;var ts=stream._transformState;if(ws.length)throw new Error('Calling transform done when ws.length != 0');if(ts.transforming)throw new Error('Calling transform done when still transforming');return stream.push(null)}module.exports=Transform;var Duplex=__webpack_require__(10);var util=__webpack_require__(15);util.inherits=__webpack_require__(0),util.inherits(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){throw new Error('_transform() is not implemented')},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;ts.writechunk!==null&&ts.writecb&&!ts.transforming?(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)):ts.needTransform=!0},Transform.prototype._destroy=function(err,cb){var _this=this;Duplex.prototype._destroy.call(this,err,function(err2){cb(err2),_this.emit('close')})}},function(module,exports,__webpack_require__){'use strict';function destroy(err,cb){var _this=this;var readableDestroyed=this._readableState&&this._readableState.destroyed;var writableDestroyed=this._writableState&&this._writableState.destroyed;return readableDestroyed||writableDestroyed?void(cb?cb(err):err&&(!this._writableState||!this._writableState.errorEmitted)&&processNextTick(emitErrorNT,this,err)):void(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,function(err){!cb&&err?(processNextTick(emitErrorNT,_this,err),_this._writableState&&(_this._writableState.errorEmitted=!0)):cb&&cb(err)}))}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(self,err){self.emit('error',err)}var processNextTick=__webpack_require__(23);module.exports={destroy:destroy,undestroy:undestroy}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(30).EventEmitter},function(module,exports,__webpack_require__){(function(Buffer){function Sha256(){this.init(),this._w=W,Hash.call(this,64,56)}function ch(x,y,z){return z^x&(y^z)}function maj(x,y,z){return x&y|z&(x|y)}function sigma0(x){return(x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10)}function sigma1(x){return(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7)}function gamma0(x){return(x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3}function gamma1(x){return(x>>>17|x<<15)^(x>>>19|x<<13)^x>>>10}var inherits=__webpack_require__(0);var Hash=__webpack_require__(11);var K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var W=Array(64);inherits(Sha256,Hash),Sha256.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},Sha256.prototype._update=function(M){var W=this._w;var a=this._a|0;var b=this._b|0;var c=this._c|0;var d=this._d|0;var e=this._e|0;var f=this._f|0;var g=this._g|0;var h=this._h|0;for(var i=0;i<16;++i)W[i]=M.readInt32BE(i*4);for(;i<64;++i)W[i]=gamma1(W[i-2])+W[i-7]+gamma0(W[i-15])+W[i-16]|0;for(var j=0;j<64;++j){var T1=h+sigma1(e)+ch(e,f,g)+K[j]+W[j]|0;var T2=sigma0(a)+maj(a,b,c)|0;h=g,g=f,f=e,e=d+T1|0,d=c,c=b,b=a,a=T1+T2|0}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0,this._f=f+this._f|0,this._g=g+this._g|0,this._h=h+this._h|0},Sha256.prototype._hash=function(){var H=new Buffer(32);return H.writeInt32BE(this._a,0),H.writeInt32BE(this._b,4),H.writeInt32BE(this._c,8),H.writeInt32BE(this._d,12),H.writeInt32BE(this._e,16),H.writeInt32BE(this._f,20),H.writeInt32BE(this._g,24),H.writeInt32BE(this._h,28),H},module.exports=Sha256}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){function Sha512(){this.init(),this._w=W,Hash.call(this,128,112)}function Ch(x,y,z){return z^x&(y^z)}function maj(x,y,z){return x&y|z&(x|y)}function sigma0(x,xl){return(x>>>28|xl<<4)^(xl>>>2|x<<30)^(xl>>>7|x<<25)}function sigma1(x,xl){return(x>>>14|xl<<18)^(x>>>18|xl<<14)^(xl>>>9|x<<23)}function Gamma0(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^x>>>7}function Gamma0l(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^(x>>>7|xl<<25)}function Gamma1(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^x>>>6}function Gamma1l(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^(x>>>6|xl<<26)}function getCarry(a,b){return a>>>0<b>>>0?1:0}var inherits=__webpack_require__(0);var Hash=__webpack_require__(11);var K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];var W=Array(160);inherits(Sha512,Hash),Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},Sha512.prototype._update=function(M){var W=this._w;var ah=this._ah|0;var bh=this._bh|0;var ch=this._ch|0;var dh=this._dh|0;var eh=this._eh|0;var fh=this._fh|0;var gh=this._gh|0;var hh=this._hh|0;var al=this._al|0;var bl=this._bl|0;var cl=this._cl|0;var dl=this._dl|0;var el=this._el|0;var fl=this._fl|0;var gl=this._gl|0;var hl=this._hl|0;for(var i=0;i<32;i+=2)W[i]=M.readInt32BE(i*4),W[i+1]=M.readInt32BE(i*4+4);for(;i<160;i+=2){var xh=W[i-15*2];var xl=W[i-15*2+1];var gamma0=Gamma0(xh,xl);var gamma0l=Gamma0l(xl,xh);xh=W[i-2*2],xl=W[i-2*2+1];var gamma1=Gamma1(xh,xl);var gamma1l=Gamma1l(xl,xh);var Wi7h=W[i-7*2];var Wi7l=W[i-7*2+1];var Wi16h=W[i-16*2];var Wi16l=W[i-16*2+1];var Wil=gamma0l+Wi7l|0;var Wih=gamma0+Wi7h+getCarry(Wil,gamma0l)|0;Wil=Wil+gamma1l|0,Wih=Wih+gamma1+getCarry(Wil,gamma1l)|0,Wil=Wil+Wi16l|0,Wih=Wih+Wi16h+getCarry(Wil,Wi16l)|0,W[i]=Wih,W[i+1]=Wil}for(var j=0;j<160;j+=2){Wih=W[j],Wil=W[j+1];var majh=maj(ah,bh,ch);var majl=maj(al,bl,cl);var sigma0h=sigma0(ah,al);var sigma0l=sigma0(al,ah);var sigma1h=sigma1(eh,el);var sigma1l=sigma1(el,eh);var Kih=K[j];var Kil=K[j+1];var chh=Ch(eh,fh,gh);var chl=Ch(el,fl,gl);var t1l=hl+sigma1l|0;var t1h=hh+sigma1h+getCarry(t1l,hl)|0;t1l=t1l+chl|0,t1h=t1h+chh+getCarry(t1l,chl)|0,t1l=t1l+Kil|0,t1h=t1h+Kih+getCarry(t1l,Kil)|0,t1l=t1l+Wil|0,t1h=t1h+Wih+getCarry(t1l,Wil)|0;var t2l=sigma0l+majl|0;var t2h=sigma0h+majh+getCarry(t2l,sigma0l)|0;hh=gh,hl=gl,gh=fh,gl=fl,fh=eh,fl=el,el=dl+t1l|0,eh=dh+t1h+getCarry(el,dl)|0,dh=ch,dl=cl,ch=bh,cl=bl,bh=ah,bl=al,al=t1l+t2l|0,ah=t1h+t2h+getCarry(al,t1l)|0}this._al=this._al+al|0,this._bl=this._bl+bl|0,this._cl=this._cl+cl|0,this._dl=this._dl+dl|0,this._el=this._el+el|0,this._fl=this._fl+fl|0,this._gl=this._gl+gl|0,this._hl=this._hl+hl|0,this._ah=this._ah+ah+getCarry(this._al,al)|0,this._bh=this._bh+bh+getCarry(this._bl,bl)|0,this._ch=this._ch+ch+getCarry(this._cl,cl)|0,this._dh=this._dh+dh+getCarry(this._dl,dl)|0,this._eh=this._eh+eh+getCarry(this._el,el)|0,this._fh=this._fh+fh+getCarry(this._fl,fl)|0,this._gh=this._gh+gh+getCarry(this._gl,gl)|0,this._hh=this._hh+hh+getCarry(this._hl,hl)|0},Sha512.prototype._hash=function(){function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset),H.writeInt32BE(l,offset+4)}var H=new Buffer(64);return writeInt64BE(this._ah,this._al,0),writeInt64BE(this._bh,this._bl,8),writeInt64BE(this._ch,this._cl,16),writeInt64BE(this._dh,this._dl,24),writeInt64BE(this._eh,this._el,32),writeInt64BE(this._fh,this._fl,40),writeInt64BE(this._gh,this._gl,48),writeInt64BE(this._hh,this._hl,56),H},module.exports=Sha512}).call(exports,__webpack_require__(1).Buffer)},function(module,exports){function isObject(obj){return null!==obj&&'object'===typeof obj}module.exports=isObject},function(module,exports,__webpack_require__){function setButtonTimerMessage(seconds){const msg=`You have ${seconds} seconds to enter challenge code ${pin} on OnlyKey.`;button.textContent=msg}const url=__webpack_require__(171);const request=__webpack_require__(166);const randomColor=__webpack_require__(154);const urlinputbox=document.getElementById('pgpkeyurl');const urlinputbox2=document.getElementById('pgpkeyurl2');const messagebox=document.getElementById('message');const button=document.getElementById('onlykey_start');var ring=new kbpgp.keyring.KeyRing;var sender_private_key;var sender_public_key;var recipient_public_key;var test_pgp_key='-----BEGIN PGP PRIVATE KEY BLOCK-----\n'+'Version: Mailvelope v1.8.0\n'+'Comment: https://www.mailvelope.com\n'+'\n'+'xcaGBFms0QoBEAC9hQ0tnhwnSYlLQmVTsvVWyYnnS8woQnLLr0gz9gb2ZSxE\n'+'gh7SMQewx5xff7zsxhcRoID00tarP4KueEOx2sPwFFgbK5jhN1UDEA0zG3oA\n'+'/bkEet6c7Q4Y25wlp0eYRpW2KIEdVH9uzNyUS7S5Phw8QtvxWLI+rudmhrNk\n'+'Pvjm4c7kPT1TpfCYDMQmF7RVSaXYDH6vE/gqLKjiD/71LQZmQzDtLkvC2fh4\n'+'frBhdZUVHmIuZaDZ/8QtcslODovqAe6stBtCsgZ1lEx8otbTpt88PIYbPNGi\n'+'kiHrbjK3CYusoq1Rl4/LN/jFkJnO9J8KpfA5R+lnQ6GfzacQ3BfpkQ7Ib2Tu\n'+'NSwHOe5nSGIpbsujWh6GAmRzo+AOHmbUj6gbuaA8qIdD+VDXNh/O4g26be+l\n'+'RO12pz6VOCk2W+Gmvwmbk789atmNOIk0eUeJ/jPFyXVqM5DMfHuBssydqQr8\n'+'9EoQo+id2ev8glfmx1kT7oiN5d/WCpEq4SSxf7TxNawqIEK5LAgv6dONd8e0\n'+'GsTxibRVxqrTDc8q07dIgXU4nybCBHRrcd1gj785uJcSsuSSB5TnRRmcst+q\n'+'BsunUZbM8iw9g8OUqZj2k70utgIaP5kIIFhMgne9iLYd/g47pMLdoAWcQXdL\n'+'pwcHfB3jF8ukuQCpHg1FaKP8oU1jO6Yrk9FHwwARAQAB/gkDCHD+rb/6JEKx\n'+'YOw4tTZ1yyHEQRjSoFuwx2vsi1T96TTF4JlTvncVkaFsbvYrTdybEUjc8e6a\n'+'UuKDZoMKzr3VBJXbXXhtZLZlWhd+LWN4bFixn9wifoGHN9ptNzobMo3dibjA\n'+'cMkNB6ocxWrlbvq44WNYXPezFIloSzf6vb2puZjVcd1nJSLxHY5HaykTdqwi\n'+'2TCQhOTa3EBwlQpNNgUdetA3erf22r+FesfYSVjUt8bO6b7jwaXHUAg0RU9D\n'+'SCLPCrAqz4WY9RUxziMiUY531LeKffpALwoA8Qwt9F4i03ecrBw7XKbHvL9O\n'+'KRcg+3HUNxT9+3P3v4r3Vyqa80g2iYfiA/yd5f6wKWiYbuhaHiHnFljnPqjr\n'+'ufSB1hWJoQVfK7Lau/PIZQqZ3vpo3xQJkG7QyYF5hM5ZKlFd9vqxUQhn2mI4\n'+'zC1aOhg/CDLvatspb2J9JxH457YxWsXK4garUl0g6EYTdSZRalLfQ1EHpvzM\n'+'jSwwFN8d+UgaqO/X/I3G4oHfnaNRY4YdpIpAZZ1JvKS7v2O/r5ct46bVKQUg\n'+'TKffG+4QI/g9sizhmBzOTFWO2i8wdu5gvVxvl7dnPrgxyPBlZK9lryBW2++l\n'+'YsjQ41TxPmdzZGfzE3MPvQZ+Sni5QXA3icKDWzEcp8Zd8KukVyvKnVJiMM5F\n'+'mpvtcQbhnphpiFFt9aEPO1soid02lNG3qlO97EpS1KExZOW95hF9u2F2q9p/\n'+'0BTcahyxjoE1oinakjg/BEqcF8TgaEmpTtDYoljz87vpRyEHKAOl3IXyiubB\n'+'WMyZfraF6hZ3mRGKofOX8A7hdqFx1j/6myzywf1JsRSa6u8Dp4m38mDKKhcf\n'+'ERqDcVWuJafZBWOXPcdxIVBDmopTn7uM8Ii0wEYWBFqgf6dN2p6BprDcm2Om\n'+'qiqhDE3UoqjQXgHqh7Bn8AjpfqSkXFRsrkOhcbyqzYGt+kEbnFPFP1QhyWSj\n'+'60p7eMxW7bG6rJcyOWvq5GZaaVime3+sXTV37vYzuNWc0RQ3FklKbiLvVCjL\n'+'NHbWOUtQpHE/i39UUK31/Rncqzgoenn6ThqXZZZl+LP8FFIOZ80VnlSxM71U\n'+'d7XRqk1wjFE7NBzbtTypaDXbm3Wilq9SJ68kfOxZUC9asAvU5B1teiVshFA2\n'+'QmMTCz0hng8/HldlntUOVQjmh/gC5E52cva6QF0Cu8JKfVGoAC5wEIuV3gVx\n'+'Zu+IVEtHWpCA8bOudtYx4QZvKVCbjSaK6Rf1UE+cUfLESCnXt9BHzcPq0q90\n'+'WVMXNVSS0CQ84FCk3zAZgnrZBmOFuiXvXXqrpS8w2k8LFiP5or4ZCYTc0qUp\n'+'pSFk8QBnfdX63IXifBQtuaD1Iz49Lf2Vpfxv+F/qXaPQ6Bl3bfv1QY9nNh48\n'+'+OVZBpnMas8W4co/Ke7GiOJKqScpcW/MlaKZVLR2ywthC4vpTjFBiK3epLOF\n'+'J63bR/0TV5Koj62CdyVENtecbfWce5yx9s5AAdKDoA3Q18mMm13OJb868Nu0\n'+'O2ZlAXb/3PMWp8zS6zd6gP8Aw8q1a+NlZVtyFA7aaBEQyRbHMG/Qeyy6wmlE\n'+'nP/rfuWVuPLmSD7GsS6TkofmLsk/fuWbuAFBnYuoWM+XrRwWX0SOmZJzYELV\n'+'shnhPaTO+71B4vsCbuQVfNcMYBmpt7iAG23Ky1FNnKy8jszwq4S2XPRukT0+\n'+'kKbexsjiSgRLeEeURnbNTVdV22hAm2G/9rj4xWrql/YLKkf9JRVQNIxFHjKk\n'+'0kaoM9l5Ju38Jm02BQqFxlcEBTbNGnRlc3RjcnAzIDx0ZXN0Y3JwM0BjcnAu\n'+'dG8+wsF4BBMBCAAsBQJZrNEKCRAan+C56LYFgQIbAwUJHhM4AAIZAQQLBwkD\n'+'BRUICgIDBBYAAQIAALXZEACyRUJS/eaI6L3LYm13grCU072EFkXjdFapAi8R\n'+'7BaG+5nePCNn+hCzi4FhfNvk8vWfubza8xhwbKwrVJWjA+TZZeeOPOxkkqj3\n'+'kTYxUdKx5VT+b3ifb+Tfn+MtH7ZWC4g9w+4dK0zjf23jBuR6fJxfpo2fBF8h\n'+'Qaz2ik8wv0Dn7miCtzC8gxXgUXcG4XWC9lZ7d7fcTQoO8RCmJmdNHG8Jsr12\n'+'RsJUgCHGq2sM4Dcr8ggfoUTBUlobLzkJpHSA7McTz17PMh7FGVHRfGjFZqGs\n'+'b+G8/Ln5HkPHr5SNfHlxqgvYWYWPog1pB9ASf6Aap8tRHijWHedIc3O+i8Hx\n'+'yylcTauusl3qMY6O/AlmI8DqWQYYEUluG9i+sPdAOZDl42tFAP5ZA28OmoJ1\n'+'PFoIvPrO0gBwkEdGDOnmc3RAHZazxyXJDjbGyo1Rexg9UxprZWDR8ySlUTdw\n'+'DFkEMDkwwMZioBwZMR2ZevOwZe6OQYUhpwUNeIfSmvLUAaxEMYnr9peYKswv\n'+'TdCjjkw8ltNi/UGMxKQ2Kbfa2rg+rc3Qn7fqsJRkG6IIqsRsQAthVa5Ychwb\n'+'kxKovp44hEZyFfswRZuBDdO/VCJ+G9gKQVP7JVTeRcx/e5se3XXY3CF5fUg+\n'+'LxGIT2qnqbmCrVwtmR3qr9ZB0/Jvw7bb0J8FkVp8hw37i8fGhgRZrNEKARAA\n'+'yWB602RZce8GwQ8p5qAfd0JAQjZT75prtFW2Snm7BMt1YB7hVaPoxybrOcpe\n'+'oiKtz5WolVKh/jwIn8RZhCQCdczIC/jULh1HYbD4285OsJT4b6+0qUq3YkZm\n'+'LN4CDLhvhYy/7d1nP01L0Q2pCjlGzFHARWjbmz2bgvUeTGqkXtzsknzwvkne\n'+'X9A4WzpmfU61nl0n3vlptzf0gEWzPhLqk/c3c7zrpZo0ZjiBhGj8XLG3q+IE\n'+'Bi8f477/jYho8qMRnnPQ2PlIG/BUyHixY+B2QWIo71MPOC0BKvVHYWqjC/H0\n'+'ok2lXAn90WqHE4OL1e+TX44O6qA2178qERB61Kg42I0oDwZ2/WUMuFGMUuGh\n'+'l8eOSujmXll32Fi/TnEFCkgDaOUbViYkLkIZs7PB4CBtS3UEsSv/unQtvUmz\n'+'LuyOwP+O1ojSnKY934TJmHykSKCu46ema0bIGTGfiGZTZzTUOnELOPkDTfvp\n'+'6FigDdjxNfz9vXDsftLWf1w08Sov9rcPqd8/aVnGTnuDZ8r3+e0Nh5NpcfIP\n'+'o11Iym2RKEt7aY5RYVk7YuBtxc9egQQInDsTCMJU2IGIRPcS4KZs42G55Z0F\n'+'hJ/ptqme39FAXNImuWA7r3VMR4F+1knyC8mwpDFITJ2r3t+w7Qmy9kOzgDVm\n'+'SUeMmfz+1r7oBE/HNAcc9yMAEQEAAf4JAwj9HN4KKhQ9xWCLHh5NvkoMaVdA\n'+'VhMtnGD/xwzE+XI0uG3ngkFIaDyDf+xOu6UXF5cWscS2AdNmrChXurx6Qqd9\n'+'PlhAprLwM4qoO/Nf+bZ+liT9fEHdpTbFE0PMAxAU4T74YIYVtyxVgEuzvhPt\n'+'PRijVEfZRa2UzKQp+sPhn5EM/bv+fmbUrIgs58R0i8gcub5+qu/HdbpXqMzy\n'+'Jfd+ouYIavew/4stjbhniMJ++8SzMpA8hK7C7C1MA8rU1jt9ORh1HvCBV75v\n'+'GZEuHubTSPSQCmisnDlft6aPv4z1cf1IDl1pKt/tek7h6pI4eHaPLvqwdtLr\n'+'YDLxtH2aNZjL4PugSZhpDfBbeZYlSSz3pMtHpClCGhQp+ekYL3SYBuj8VSXb\n'+'9IjM0Z3ymQjCQVZmuxUrlKISG3CayTwed3vOunCEH2vNoplF2HD7018PE5xZ\n'+'wXCLA9Se27xOaq4K+IKnFSJYKenfqDxEVufXF/aRRN4MGsu40QQq6HGOu4BI\n'+'Jk4mde7LhGcl2q0bktwklnEUl9uc7DSQ7xOopQj6A8CCjh+sVhrrGNpIKGQ+\n'+'wLodZXrUrMgVop2cOPcTCZmFGsqQFkx7aKZ7ZhucYptHV2SmMe7zL8DPls3r\n'+'KkHy2eFCyfA+7Px9Kc83RAyrQzlnLmFobw+QXOXu2tj65jGoF5xPeS1uLXR+\n'+'GekZfYu29babcHes75+tT0O/1yTpawQTxi5+3j7DcuHXOa5dAiQWt3fg69Vd\n'+'jr9zvlWQSDdfeSXcvY82XIleK91YZDyqe+cRlG5f8RKzU68efETRlHqkxtgD\n'+'iCMTbc+9z6wFTsGkSK0vN30KMUCKt4r/x77B69qDxRoAQVVteicE267dWKPF\n'+'Ph44n/qbOev7NrGNPR+4i6of1uJ+J7LG505mqgD5sHHcSreCzbB399LrbUBM\n'+'sn1beqThPJSDzUFI9h/wQ14dk06pbdqlWXu8s90o6Or2BIew4K4HDFuQ0ilO\n'+'W7KmXbV5sluY6dQQhf21/T8Rhfz6HUCN9RD+EObJ2KAngAwXm4PB8gi+TM7K\n'+'6jiuXOGQtqi2YIagqGgMbzVPYxe7BZorCAWw0+VxqUZ5YMTIyx5v+OO3wK+e\n'+'agafyTxstArtJTG4OfDHAcCCCZ0GwrLOGbV6rkHqKVZYa7tf4qsKamS0ARbt\n'+'ghI2Mp17lMbG/0IIYaCfSkTOyPwGS+9hoCwjPngxXWKMCg46UYQZSFKBEbqw\n'+'yOIBM4hrafLkFf7+IdsNthHMUXV2EiJ/6eE5xS28DbODSxACkBwNfnZX18HY\n'+'vJHtRpIGc0MxT+M/pUH6FhyhoCLh/Z7UdAeiSeiRJsYUtE2fd4n2ViePfYx+\n'+'Bwes2nAw1T1+HLzX6K2hY8im9BW6oOcgRlbFLP3AYElI2snT1ShT3Qs06PgM\n'+'/zXDvMkYetyEn5vh/u1x1vT4sxn7sxd/MLyxf/qE7IB97l6BRwXR6Qcegklo\n'+'rspqfWZbf+Q4qiJ8jF7flhp8YMul78nC7i+HnRyPmG5I/aJwMSn0qR5jjBf5\n'+'OEgaGpdONexmWOzcNbTBv6aT1EOSDdkM0epXw7YdT7VftP+L4pnTrhNtpUNH\n'+'hX7bhaYVDebSgqdZGFj6W1TXxFtZWnqWbtbwulUMOZ98a20CTadZYE1qJwWo\n'+'z8ioOPr9LEcmwufHZ/zI0IxKgi9l6pi+bi+HyqIwTTjQx7x/MAhXvClc0FkZ\n'+'+AmNthz5nY/yEqvcVONjPy/Wl2lPx/50P+f8BnWnjt6LiK/t34vM+Zzefjbj\n'+'Jw/2Bg/YeYz4wsF1BBgBCAApBQJZrNEKCRAan+C56LYFgQIbDAUJHhM4AAQL\n'+'BwkDBRUICgIDBBYAAQIAALjmEABy83c24kaDfx9QHwETp5Wh3AVW1EcyphXC\n'+'N6C5PLKZ6FobdZbIZbXaNDkRdFzTNl7JnWvb0oyy54/Vc3bcKlNQ+Y/BzFoG\n'+'YIzU8eoqw+a/rT67gENRCxNsdg9BSBplC+hT+7LVKiWNBBokfd0ud7VI2lld\n'+'LPlD+23IMCftrqvdEnom7E+cP45B32Kvbgma+GHHVbtR6O8T1m0iWMSViOO7\n'+'9W954NTS+Y4LEMuQiZlHdl1169E+RTZM1iPiWu8lKxeyNO8zHgU3jQYmR8dY\n'+'4ovwEqQ3biIXDLSAXKgk+ga+Q8pM0CetcKZI/iwcPYtmPnBUrNc8ZswwMmI2\n'+'jpRYBRSCriLS6nRmW+pX1Y+5RqUVPEYbUqCfz97NklSSyhVtXhTK/h8pEHZW\n'+'0KZJAwBaR16Opzu2+RpZ6GfvIVvOlYf97xwRHARrvkF4wN66qldwePr2o/N3\n'+'UrnqD/+H1aVo443fmuvquB0FuCtWgCv47Ak4S7c5uk/IdzyGzuj5vCE8ZGDu\n'+'TZ+PdUwKuBikrubuRujQC2sblQ0PxI3zZgd0mPWsqo8+qKu2iO8ZDnB942ce\n'+'W3Uv9O0FAWVecGfcb3FONGskgoaQNMQSr9bITRMB+6BDj8ut4HMnrRzhSANL\n'+'AAuXXx+QEJsopLffeE+9q0owSCwX1E/dydgryRSga90BZT0k/g==\n'+'=ayNx\n'+'-----END PGP PRIVATE KEY BLOCK-----';class ok2go{constructor(){document.getElementsByTagName('fieldset')[0].style.backgroundColor=randomColor({luminosity:'bright',format:'rgba'})}startDecryption(){button.classList.remove('error'),button.classList.add('working');let keyurl=url.parse(urlinputbox.value);keyurl.hostname?(sender_public_key=this.downloadUrl(),this.decryptText(sender_public_key,messagebox.value)):this.decryptText(urlinputbox.value,messagebox.value)}decryptText(key,ct){switch(_status){case'Decrypt and Verify':this.loadPublic(key),button.textContent='Decrypting and verifying message ...';break;case'Decrypt Only':button.textContent='Decrypting message ...';break;default:}this.loadPrivate(),button.textContent='Decrypting message ...',kbpgp.unbox({keyfetch:ring,armored:ct},(err,ct)=>{if(err)return void this.showError(err);button.textContent='Done :)',messagebox.value=ct,messagebox.focus(),messagebox.select();var ds=recipient_public_key=null;if(ds=ct[0].get_data_signer(),void 0,ds&&(recipient_public_key=ds.get_key_manager()),recipient_public_key){var keyid=recipient_public_key.get_pgp_fingerprint().toString('hex').toUpperCase();keyid=keyid.slice(24,40);var userid=recipient_public_key.userids[0].components.email.split('@')[0];void 0,void 0,button.textContent='Done :)    Signed by '+userid+' (Key ID: '+keyid+')'}button.classList.remove('working')})}startEncryption(){if(button.classList.remove('error'),button.classList.add('working'),urlinputbox.value==''&&(_status=='Encrypt and Sign'||_status=='Encrypt Only'))return void this.showError(new Error('I need recipient\'s public pgp key :('));if(urlinputbox2.value==''&&(_status=='Encrypt and Sign'||_status=='Sign Only'))return void this.showError(new Error('I need sender\'s public pgp key :('));let keyurl=url.parse(urlinputbox.value);let keyurl2=url.parse(urlinputbox2.value);keyurl.hostname?(sender_public_key=this.downloadPublicKey(urlinputbox.value),void 0):sender_public_key=urlinputbox.value,keyurl2.hostname?(recipient_public_key=this.downloadPublicKey(urlinputbox2.value),void 0):recipient_public_key=urlinputbox2.value,setTimeout(()=>{this.encryptText(sender_public_key,recipient_public_key,messagebox.value)},3000)}downloadPublicKey(url){button.textContent='Downloading public key ...',request.get(url).end((err,key)=>err?(err.message+=' Try to directly paste the public PGP key in.',void this.showError(err)):key.text)}encryptText(key1,key2,msg){switch(_status){case'Encrypt and Sign':this.loadPublic(key1),this.loadPublicSignerID(key2),this.loadPrivate();var params={msg:msg,encrypt_for:recipient_public_key,sign_with:sender_private_key};button.textContent='Encrypting and signing message ...';break;case'Encrypt Only':this.loadPublic(key1);var params={msg:msg,encrypt_for:recipient_public_key};button.textContent='Encrypting message ...';break;case'Sign Only':this.loadPublicSignerID(key2),this.loadPrivate();var params={msg:msg,sign_with:sender_private_key};button.textContent='Signing message ...';break;default:}kbpgp.box(params,(err,results)=>err?void this.showError(err):void(button.textContent='Done :)  Encrypted message copied to clipboard you can paste into an email, IM, whatever.',messagebox.value=results,messagebox.focus(),messagebox.select(),document.execCommand('SelectAll'),document.execCommand('Copy',!1,null),button.classList.remove('working')))}loadPublic(key){return button.textContent='Checking recipient\'s public key...',key==''?void this.showError(new Error('I need recipient\'s public pgp key :(')):void kbpgp.KeyManager.import_from_armored_pgp({armored:key},(error,recipient)=>error?void this.showError(error):void(recipient_public_key=recipient,ring.add_key_manager(recipient)))}loadPublicSignerID(key){return button.textContent='Checking sender\'s public key...',key==''?void this.showError(new Error('I need sender\'s public pgp key :(')):void kbpgp.KeyManager.import_from_armored_pgp({armored:key},(error,sender)=>{if(error)return void this.showError(error);sender_public_key=sender;var keyids=sender_public_key.get_all_pgp_key_ids();if(typeof keyids[2]!=='undefined'){poll_delay=3;var subkey=2}else{poll_delay=11;var subkey=0}custom_keyid=keyids[subkey].toString('hex').toUpperCase(),custom_keyid=custom_keyid.match(/.{2}/g).map(hexStrToDec),void 0})}loadPrivate(){var _this=this;kbpgp.KeyManager.import_from_armored_pgp({armored:test_pgp_key},(err,sender)=>{if(err)return void this.showError(err);if(sender.is_pgp_locked()){let passphrase='test123';sender.unlock_pgp({passphrase:passphrase},err=>{!err&&(void 0,sender_private_key=sender,ring.add_key_manager(sender))})}else;})}showError(error){void 0,button.textContent=error.message,button.classList.remove('working'),button.classList.add('error')}}let p2g=new ok2go;button.onclick=function(){switch(_status){case'Encrypt and Sign':case'Encrypt Only':case'Sign Only':poll_type=4,p2g.startEncryption();break;case'Decrypt and Verify':case'Decrypt Only':poll_type=3,poll_delay=3,p2g.startDecryption();break;case'pending_pin':_status='done_pin';break;case'done_pin':}return!1},window.doPinTimer=function(seconds){return new Promise(function updateTimer(resolve,reject,secondsRemaining){if(secondsRemaining=typeof secondsRemaining==='number'?secondsRemaining:seconds||20,secondsRemaining<=0){const err='Time expired for PIN confirmation';return p2g.showError({message:err}),updateStatusFromSelection(!0),reject(err)}return _status==='done_pin'?(button.textContent='Confirming PIN...',msg(`Delay ${poll_delay} seconds`),enroll_polling({type:poll_type,delay:poll_delay},(err,data)=>{msg(`Executed enroll_polling after PIN confirmation: skey = ${data}`),updateStatusFromSelection(),resolve(data)})):void(setButtonTimerMessage(secondsRemaining),setTimeout(updateTimer.bind(null,resolve,reject,--secondsRemaining),1000))})},urlinputbox.onkeyup=function(){let rows_current=Math.trunc(urlinputbox.value.length*parseFloat(window.getComputedStyle(urlinputbox,null).getPropertyValue('font-size'))/(urlinputbox.offsetWidth*1.5))+1;urlinputbox.rows=rows_current>10?10:rows_current}},function(module,exports,__webpack_require__){var _Mathabs=Math.abs;var _Mathmax3=Math.max;var _Mathceil3=Math.ceil;var _Mathfloor2=Math.floor;var _Mathpow2=Math.pow;var _StringfromCharCode2=String.fromCharCode;var _Mathmin4=Math.min;(function(process,setImmediate,Buffer){!function(e,t){!0?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports.forge=t():e.forge=t()}(this,function(){return function(e){function t(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,'a',r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=42)}([function(e,t){e.exports={options:{usePureJavaScript:!1}}},function(e,t,r){function a(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error('Only 8, 16, 24, or 32 bits supported: '+e)}function n(e){if(this.data='',this.read=0,'string'==typeof e)this.data=e;else if(o.isArrayBuffer(e)||o.isArrayBufferView(e)){var t=new Uint8Array(e);try{this.data=_StringfromCharCode2.apply(null,t)}catch(e){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof n||'object'==typeof e&&'string'==typeof e.data&&'number'==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}function i(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=o.isArrayBuffer(e),a=o.isArrayBufferView(e);return r||a?(this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write='writeOffset'in t?t.writeOffset:this.data.byteLength)):(this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==e&&void 0!==e&&this.putBytes(e),void('writeOffset'in t&&(this.write=t.writeOffset)))}var s=r(0),o=e.exports=s.util=s.util||{};!function(){function e(e){if(e.source===window&&e.data===t){e.stopPropagation();var a=r.slice();r.length=0,a.forEach(function(e){e()})}}if('undefined'!=typeof process&&process.nextTick)return o.nextTick=process.nextTick,void('function'==typeof setImmediate?o.setImmediate=setImmediate:o.setImmediate=o.nextTick);if('function'==typeof setImmediate)return o.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(o.nextTick=function(e){return setImmediate(e)});if(o.setImmediate=function(e){setTimeout(e,0)},'undefined'!=typeof window&&'function'==typeof window.postMessage){var t='forge.setImmediate',r=[];o.setImmediate=function(e){r.push(e),1===r.length&&window.postMessage(t,'*')},window.addEventListener('message',e,!0)}if('undefined'!=typeof MutationObserver){var a=Date.now(),n=!0,i=document.createElement('div'),r=[];new MutationObserver(function(){var e=r.slice();r.length=0,e.forEach(function(e){e()})}).observe(i,{attributes:!0});var s=o.setImmediate;o.setImmediate=function(e){Date.now()-a>15?(a=Date.now(),s(e)):(r.push(e),1===r.length&&i.setAttribute('a',n=!n))}}o.nextTick=o.setImmediate}(),o.isNodejs='undefined'!=typeof process&&process.versions&&process.versions.node,o.isArray=Array.isArray||function(e){return'[object Array]'===Object.prototype.toString.call(e)},o.isArrayBuffer=function(e){return'undefined'!=typeof ArrayBuffer&&e instanceof ArrayBuffer},o.isArrayBufferView=function(e){return e&&o.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},o.ByteBuffer=n,o.ByteStringBuffer=n;var c=4096;o.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>c&&(this.data.substr(0,1),this._constructedStringLength=0)},o.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},o.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},o.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(_StringfromCharCode2(e))},o.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=_StringfromCharCode2(e);for(var r=this.data;t>0;)1&t&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},o.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},o.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(o.encodeUtf8(e))},o.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(_StringfromCharCode2(e>>8&255)+_StringfromCharCode2(255&e))},o.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(_StringfromCharCode2(e>>16&255)+_StringfromCharCode2(e>>8&255)+_StringfromCharCode2(255&e))},o.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(_StringfromCharCode2(e>>24&255)+_StringfromCharCode2(e>>16&255)+_StringfromCharCode2(e>>8&255)+_StringfromCharCode2(255&e))},o.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(_StringfromCharCode2(255&e)+_StringfromCharCode2(e>>8&255))},o.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(_StringfromCharCode2(255&e)+_StringfromCharCode2(e>>8&255)+_StringfromCharCode2(e>>16&255))},o.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(_StringfromCharCode2(255&e)+_StringfromCharCode2(e>>8&255)+_StringfromCharCode2(e>>16&255)+_StringfromCharCode2(e>>24&255))},o.ByteStringBuffer.prototype.putInt=function(e,t){a(t);var r='';do t-=8,r+=_StringfromCharCode2(e>>t&255);while(t>0);return this.putBytes(r)},o.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},o.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},o.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},o.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},o.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},o.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},o.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},o.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},o.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},o.ByteStringBuffer.prototype.getInt=function(e){a(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t},o.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},o.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=_Mathmin4(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t='':(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},o.ByteStringBuffer.prototype.bytes=function(e){return'undefined'==typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},o.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},o.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+_StringfromCharCode2(t)+this.data.substr(this.read+e+1),this},o.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},o.ByteStringBuffer.prototype.copy=function(){var e=o.createBuffer(this.data);return e.read=this.read,e},o.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},o.ByteStringBuffer.prototype.clear=function(){return this.data='',this.read=0,this},o.ByteStringBuffer.prototype.truncate=function(e){var t=_Mathmax3(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},o.ByteStringBuffer.prototype.toHex=function(){for(var e='',t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+='0'),e+=r.toString(16)}return e},o.ByteStringBuffer.prototype.toString=function(){return o.decodeUtf8(this.bytes())},o.DataBuffer=i,o.DataBuffer.prototype.length=function(){return this.write-this.read},o.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},o.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=_Mathmax3(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),a=new Uint8Array(this.length()+t);return a.set(r),this.data=new DataView(a.buffer),this},o.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},o.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},o.DataBuffer.prototype.putBytes=function(e,t){if(o.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a=r.byteLength-r.byteOffset;this.accommodate(a);var n=new Uint8Array(this.data.buffer,this.write);return n.set(r),this.write+=a,this}if(o.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var n=new Uint8Array(this.data.buffer);return n.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof o.DataBuffer||'object'==typeof e&&'number'==typeof e.read&&'number'==typeof e.write&&o.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var n=new Uint8Array(e.data.byteLength,this.write);return n.set(r),this.write+=r.byteLength,this}if(e instanceof o.ByteStringBuffer&&(e=e.data,t='binary'),t=t||'binary','string'==typeof e){var i;if('hex'===t)return this.accommodate(_Mathceil3(e.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.hex.decode(e,i,this.write),this;if('base64'===t)return this.accommodate(3*_Mathceil3(e.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.base64.decode(e,i,this.write),this;if('utf8'===t&&(e=o.encodeUtf8(e),t='binary'),'binary'===t||'raw'===t)return this.accommodate(e.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.raw.decode(i),this;if('utf16'===t)return this.accommodate(2*e.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=o.text.utf16.encode(i),this;throw new Error('Invalid encoding: '+t)}throw Error('Invalid parameter: '+e)},o.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},o.DataBuffer.prototype.putString=function(e){return this.putBytes(e,'utf16')},o.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},o.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},o.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},o.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},o.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},o.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},o.DataBuffer.prototype.putInt=function(e,t){a(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this},o.DataBuffer.prototype.putSignedInt=function(e,t){return a(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},o.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},o.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},o.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},o.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},o.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},o.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},o.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},o.DataBuffer.prototype.getInt=function(e){a(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t},o.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},o.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=_Mathmin4(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t='':(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},o.DataBuffer.prototype.bytes=function(e){return'undefined'==typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},o.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},o.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},o.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},o.DataBuffer.prototype.copy=function(){return new o.DataBuffer(this)},o.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},o.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},o.DataBuffer.prototype.truncate=function(e){return this.write=_Mathmax3(0,this.length()-e),this.read=_Mathmin4(this.read,this.write),this},o.DataBuffer.prototype.toHex=function(){for(var e='',t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+='0'),e+=r.toString(16)}return e},o.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||'utf8','binary'===e||'raw'===e)return o.binary.raw.encode(t);if('hex'===e)return o.binary.hex.encode(t);if('base64'===e)return o.binary.base64.encode(t);if('utf8'===e)return o.text.utf8.decode(t);if('utf16'===e)return o.text.utf16.decode(t);throw new Error('Invalid encoding: '+e)},o.createBuffer=function(e,t){return t=t||'raw',void 0!==e&&'utf8'===t&&(e=o.encodeUtf8(e)),new o.ByteBuffer(e)},o.fillString=function(e,t){for(var r='';t>0;)1&t&&(r+=e),t>>>=1,t>0&&(e+=e);return r},o.xorBytes=function(e,t,r){for(var a='',n='',i='',s=0,o=0;r>0;--r,++s)n=e.charCodeAt(s)^t.charCodeAt(s),o>=10&&(a+=i,i='',o=0),i+=_StringfromCharCode2(n),++o;return a+=i},o.hexToBytes=function(e){var t='',r=0;for(e.length&!0&&(r=1,t+=_StringfromCharCode2(parseInt(e[0],16)));r<e.length;r+=2)t+=_StringfromCharCode2(parseInt(e.substr(r,2),16));return t},o.bytesToHex=function(e){return o.createBuffer(e).toHex()},o.int32ToBytes=function(e){return _StringfromCharCode2(e>>24&255)+_StringfromCharCode2(e>>16&255)+_StringfromCharCode2(e>>8&255)+_StringfromCharCode2(255&e)};var u='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',l=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];o.encode64=function(e,t){for(var i='',s='',o=0,r,a,n;o<e.length;)r=e.charCodeAt(o++),a=e.charCodeAt(o++),n=e.charCodeAt(o++),i+=u.charAt(r>>2),i+=u.charAt((3&r)<<4|a>>4),isNaN(a)?i+='==':(i+=u.charAt((15&a)<<2|n>>6),i+=isNaN(n)?'=':u.charAt(63&n)),t&&i.length>t&&(s+=i.substr(0,t)+'\r\n',i=i.substr(t));return s+=i},o.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,'');for(var i='',s=0,t,r,a,n;s<e.length;)t=l[e.charCodeAt(s++)-43],r=l[e.charCodeAt(s++)-43],a=l[e.charCodeAt(s++)-43],n=l[e.charCodeAt(s++)-43],i+=_StringfromCharCode2(t<<2|r>>4),64!==a&&(i+=_StringfromCharCode2((15&r)<<4|a>>2),64!==n&&(i+=_StringfromCharCode2((3&a)<<6|n)));return i},o.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},o.decodeUtf8=function(e){return decodeURIComponent(escape(e))},o.binary={raw:{},hex:{},base64:{}},o.binary.raw.encode=function(e){return _StringfromCharCode2.apply(null,e)},o.binary.raw.decode=function(e,t,r){var a=t;a||(a=new Uint8Array(e.length)),r=r||0;for(var n=r,i=0;i<e.length;++i)a[n++]=e.charCodeAt(i);return t?n-r:a},o.binary.hex.encode=o.bytesToHex,o.binary.hex.decode=function(e,t,r){var a=t;a||(a=new Uint8Array(_Mathceil3(e.length/2))),r=r||0;var n=0,i=r;for(1&e.length&&(n=1,a[i++]=parseInt(e[0],16));n<e.length;n+=2)a[i++]=parseInt(e.substr(n,2),16);return t?i-r:a},o.binary.base64.encode=function(e,t){for(var i='',s='',o=0,r,a,n;o<e.byteLength;)r=e[o++],a=e[o++],n=e[o++],i+=u.charAt(r>>2),i+=u.charAt((3&r)<<4|a>>4),isNaN(a)?i+='==':(i+=u.charAt((15&a)<<2|n>>6),i+=isNaN(n)?'=':u.charAt(63&n)),t&&i.length>t&&(s+=i.substr(0,t)+'\r\n',i=i.substr(t));return s+=i},o.binary.base64.decode=function(e,t,r){var a=t;a||(a=new Uint8Array(3*_Mathceil3(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,''),r=r||0;for(var c=0,u=r,n,i,s,o;c<e.length;)n=l[e.charCodeAt(c++)-43],i=l[e.charCodeAt(c++)-43],s=l[e.charCodeAt(c++)-43],o=l[e.charCodeAt(c++)-43],a[u++]=n<<2|i>>4,64!==s&&(a[u++]=(15&i)<<4|s>>2,64!==o&&(a[u++]=(3&s)<<6|o));return t?u-r:a.subarray(0,u)},o.text={utf8:{},utf16:{}},o.text.utf8.encode=function(e,t,r){e=o.encodeUtf8(e);var a=t;a||(a=new Uint8Array(e.length)),r=r||0;for(var n=r,i=0;i<e.length;++i)a[n++]=e.charCodeAt(i);return t?n-r:a},o.text.utf8.decode=function(e){return o.decodeUtf8(_StringfromCharCode2.apply(null,e))},o.text.utf16.encode=function(e,t,r){var a=t;a||(a=new Uint8Array(2*e.length));var n=new Uint16Array(a.buffer);r=r||0;for(var i=r,s=r,o=0;o<e.length;++o)n[s++]=e.charCodeAt(o),i+=2;return t?i-r:a},o.text.utf16.decode=function(e){return _StringfromCharCode2.apply(null,new Uint16Array(e.buffer))},o.deflate=function(e,t,r){if(t=o.decode64(e.deflate(o.encode64(t)).rval),r){var a=2,n=t.charCodeAt(1);32&n&&(a=6),t=t.substring(a,t.length-4)}return t},o.inflate=function(e,t,r){var a=e.inflate(o.encode64(t)).rval;return null===a?null:o.decode64(a)};var p=function(e,t,r){if(!e)throw new Error('WebStorage not available.');var a;if(null===r?a=e.removeItem(t):(r=o.encode64(JSON.stringify(r)),a=e.setItem(t,r)),'undefined'!=typeof a&&a.rval!==!0){var n=new Error(a.error.message);throw n.id=a.error.id,n.name=a.error.name,n}},h=function(e,t){if(!e)throw new Error('WebStorage not available.');var r=e.getItem(t);if(e.init)if(null===r.rval){if(r.error){var a=new Error(r.error.message);throw a.id=r.error.id,a.name=r.error.name,a}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(o.decode64(r))),r},f=function(e,t,r,a){var n=h(e,t);null===n&&(n={}),n[r]=a,p(e,t,n)},d=function(e,t,r){var a=h(e,t);return null!==a&&(a=r in a?a[r]:null),a},y=function(e,t,r){var a=h(e,t);if(null!==a&&r in a){delete a[r];var n=!0;for(var i in a){n=!1;break}n&&(a=null),p(e,t,a)}},g=function(e,t){p(e,t,null)},v=function(e,t,r){var a=null;'undefined'==typeof r&&(r=['web','flash']);var i=!1,s=null,n;for(var o in r){n=r[o];try{if('flash'===n||'both'===n){if(null===t[0])throw new Error('Flash local storage not available.');a=e.apply(this,t),i='flash'===n}'web'!==n&&'both'!==n||(t[0]=localStorage,a=e.apply(this,t),i=!0)}catch(e){s=e}if(i)break}if(!i)throw s;return a};o.setItem=function(e,t,r,a,n){v(f,arguments,n)},o.getItem=function(e,t,r,a){return v(d,arguments,a)},o.removeItem=function(e,t,r,a){v(y,arguments,a)},o.clearItems=function(e,t,r){v(g,arguments,r)},o.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var r=t.exec(e),a=null===r?null:{full:e,scheme:r[1],host:r[2],port:r[3],path:r[4]};return a&&(a.fullHost=a.host,a.port?80!==a.port&&'http'===a.scheme?a.fullHost+=':'+a.port:443!==a.port&&'https'===a.scheme&&(a.fullHost+=':'+a.port):'http'===a.scheme?a.port=80:'https'===a.scheme&&(a.port=443),a.full=a.scheme+'://'+a.fullHost),a};var m=null;o.getQueryVariables=function(e){var r=function(e){for(var t={},r=e.split('&'),a=0;a<r.length;a++){var s=r[a].indexOf('='),n,i;s>0?(n=r[a].substring(0,s),i=r[a].substring(s+1)):(n=r[a],i=null),n in t||(t[n]=[]),n in Object.prototype||null===i||t[n].push(unescape(i))}return t},t;return'undefined'==typeof e?(null===m&&(m='undefined'!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),t=m):t=r(e),t},o.parseFragment=function(e){var t=e,r='',a=e.indexOf('?');a>0&&(t=e.substring(0,a),r=e.substring(a+1));var n=t.split('/');n.length>0&&''===n[0]&&n.shift();var i=''===r?{}:o.getQueryVariables(r);return{pathString:t,queryString:r,path:n,query:i}},o.makeRequest=function(e){var t=o.parseFragment(e),r={path:t.pathString,query:t.queryString,getPath:function(e){return'undefined'==typeof e?t.path:t.path[e]},getQuery:function(e,r){var a;return'undefined'==typeof e?a=t.query:(a=t.query[e],a&&'undefined'!=typeof r&&(a=a[r])),a},getQueryLast:function(e,t){var n=r.getQuery(e),a;return a=n?n[n.length-1]:t}};return r},o.makeLink=function(e,t,r){e=jQuery.isArray(e)?e.join('/'):e;var a=jQuery.param(t||{});return r=r||'',e+(a.length>0?'?'+a:'')+(r.length>0?'#'+r:'')},o.setPath=function(e,t,r){if('object'==typeof e&&null!==e)for(var a=0,n=t.length;a<n;){var i=t[a++];if(a==n)e[i]=r;else{var s=i in e;(!s||s&&'object'!=typeof e[i]||s&&null===e[i])&&(e[i]={}),e=e[i]}}},o.getPath=function(e,t,r){for(var a=0,n=t.length,i=!0;i&&a<n&&'object'==typeof e&&null!==e;){var s=t[a++];i=s in e,i&&(e=e[s])}return i?e:r},o.deletePath=function(e,t){if('object'==typeof e&&null!==e)for(var r=0,a=t.length;r<a;){var n=t[r++];if(r==a)delete e[n];else{if(!(n in e)||'object'!=typeof e[n]||null===e[n])break;e=e[n]}}},o.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},o.format=function(e){for(var a=/%./g,n=0,i=[],s=0,t,r;t=a.exec(e);){r=e.substring(s,a.lastIndex-2),r.length>0&&i.push(r),s=a.lastIndex;var o=t[0][1];o==='s'||o==='o'?n<arguments.length?i.push(arguments[n++ +1]):i.push('<?>'):o==='%'?i.push('%'):i.push('<%'+o+'?>')}return i.push(e.substring(s)),i.join('')},o.formatNumber=function(e,t,r,a){var n=e,i=isNaN(t=_Mathabs(t))?2:t,s=void 0===r?',':r,o=void 0===a?'.':a,c=n<0?'-':'',u=parseInt(n=_Mathabs(+n||0).toFixed(i),10)+'',l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+o:'')+u.substr(l).replace(/(\d{3})(?=\d)/g,'$1'+o)+(i?s+_Mathabs(n-u).toFixed(i).slice(2):'')},o.formatSize=function(e){return e=e>=1073741824?o.formatNumber(e/1073741824,2,'.','')+' GiB':e>=1048576?o.formatNumber(e/1048576,2,'.','')+' MiB':e>=1024?o.formatNumber(e/1024,0)+' KiB':o.formatNumber(e,0)+' bytes'},o.bytesFromIP=function(e){return e.indexOf('.')===-1?e.indexOf(':')===-1?null:o.bytesFromIPv6(e):o.bytesFromIPv4(e)},o.bytesFromIPv4=function(e){if(e=e.split('.'),4!==e.length)return null;for(var t=o.createBuffer(),r=0;r<e.length;++r){var a=parseInt(e[r],10);if(isNaN(a))return null;t.putByte(a)}return t.getBytes()},o.bytesFromIPv6=function(e){var t=0;e=e.split(':').filter(function(e){return 0===e.length&&++t,!0});for(var r=2*(8-e.length+t),a=o.createBuffer(),n=0;n<8;++n)if(e[n]&&0!==e[n].length){var i=o.hexToBytes(e[n]);i.length<2&&a.putByte(0),a.putBytes(i)}else a.fillWithByte(0,r),r=0;return a.getBytes()},o.bytesToIP=function(e){return 4===e.length?o.bytesToIPv4(e):16===e.length?o.bytesToIPv6(e):null},o.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join('.')},o.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],r=[],a=0,n=0;n<e.length;n+=2){for(var i=o.bytesToHex(e[n]+e[n+1]);'0'===i[0]&&'0'!==i;)i=i.substr(1);if('0'===i){var s=r[r.length-1],c=t.length;s&&c===s.end+1?(s.end=c,s.end-s.start>r[a].end-r[a].start&&(a=r.length-1)):r.push({start:c,end:c})}t.push(i)}if(r.length>0){var u=r[a];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,''),0===u.start&&t.unshift(''),7===u.end&&t.push(''))}return t.join(':')},o.estimateCores=function(e,t){function r(e,s,c){if(0===s){var u=_Mathfloor2(e.reduce(function(e,t){return e+t},0)/e.length);return o.cores=_Mathmax3(1,u),URL.revokeObjectURL(i),t(null,o.cores)}a(c,function(t,a){e.push(n(c,a)),r(e,s-1,c)})}function a(e,t){for(var r=[],a=[],n=0;n<e;++n){var s=new Worker(i);s.addEventListener('message',function(n){if(a.push(n.data),a.length===e){for(var i=0;i<e;++i)r[i].terminate();t(null,a)}}),r.push(s)}for(var n=0;n<e;++n)r[n].postMessage(n)}function n(e,t){for(var r=[],a=0;a<e;++a)for(var n=t[a],i=r[a]=[],s=0;s<e;++s)if(a!==s){var o=t[s];(n.st>o.st&&n.st<o.et||o.st>n.st&&o.st<n.et)&&i.push(s)}return r.reduce(function(e,t){return _Mathmax3(e,t.length)},0)}if('function'==typeof e&&(t=e,e={}),e=e||{},'cores'in o&&!e.update)return t(null,o.cores);if('undefined'!=typeof navigator&&'hardwareConcurrency'in navigator&&navigator.hardwareConcurrency>0)return o.cores=navigator.hardwareConcurrency,t(null,o.cores);if('undefined'==typeof Worker)return o.cores=1,t(null,o.cores);if('undefined'==typeof Blob)return o.cores=2,t(null,o.cores);var i=URL.createObjectURL(new Blob(['(',function(){self.addEventListener('message',function(e){for(var t=Date.now(),r=t+4;Date.now()<r;);self.postMessage({st:t,et:r})})}.toString(),')()'],{type:'application/javascript'}));r([],5,16)}},function(e,t,r){var a=r(0);r(5),r(30),r(28),r(1),function(){return a.random&&a.random.getBytes?void(e.exports=a.random):void function(t){function r(){var e=a.prng.create(n);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}var n={},i=[,,,,],s=a.util.createBuffer();n.formatKey=function(e){var t=a.util.createBuffer(e);return e=[,,,,],e[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),a.aes._expandKey(e,!1)},n.formatSeed=function(e){var t=a.util.createBuffer(e);return e=[,,,,],e[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},n.cipher=function(e,t){return a.aes._updateBlock(e,t,i,!1),s.putInt32(i[0]),s.putInt32(i[1]),s.putInt32(i[2]),s.putInt32(i[3]),s.getBytes()},n.increment=function(e){return++e[3],e},n.md=a.md.sha256;var o=r(),c=null;if('undefined'!=typeof window){var u=window.crypto||window.msCrypto;u&&u.getRandomValues&&(c=function(e){return u.getRandomValues(e)})}if(a.options.usePureJavaScript||!a.util.isNodejs&&!c){if('undefined'==typeof window||void 0===window.document,o.collectInt(+new Date,32),'undefined'!=typeof navigator){var l='';for(var p in navigator)try{'string'==typeof navigator[p]&&(l+=navigator[p])}catch(e){}o.collect(l),l=null}t&&(t().mousemove(function(e){o.collectInt(e.clientX,16),o.collectInt(e.clientY,16)}),t().keypress(function(e){o.collectInt(e.charCode,8)}))}if(a.random)for(var p in o)a.random[p]=o[p];else a.random=o;a.random.createInstance=r,e.exports=a.random}('undefined'==typeof jQuery?null:jQuery)}()},function(e,t,r){function a(e,t,r){if(r>t){var a=new Error('Too few bytes to parse DER.');throw a.available=e.length(),a.remaining=t,a.requested=r,a}}function n(e,t,r,i){var c;a(e,t,2);var u=e.getByte();t--;var l=192&u,p=31&u;c=e.length();var h=o(e,t);if(t-=c-e.length(),void 0!==h&&h>t){if(i.strict){var f=new Error('Too few bytes to read ASN.1 value.');throw f.available=e.length(),f.remaining=t,f.requested=h,f}h=t}var g=32===(32&u),d,y;if(g)if(d=[],void 0===h)for(;;){if(a(e,t,2),e.bytes(2)==='\0\0'){e.getBytes(2),t-=2;break}c=e.length(),d.push(n(e,t,r+1,i)),t-=c-e.length()}else for(;h>0;)c=e.length(),d.push(n(e,h,r+1,i)),t-=c-e.length(),h-=c-e.length();if(void 0===d&&l===s.Class.UNIVERSAL&&p===s.Type.BITSTRING&&(y=e.bytes(h)),void 0===d&&i.decodeBitStrings&&l===s.Class.UNIVERSAL&&p===s.Type.BITSTRING&&h>1){var v=e.read,m=t,C=0;if(p===s.Type.BITSTRING&&(a(e,t,1),C=e.getByte(),t--),0===C)try{c=e.length();var E={verbose:i.verbose,strict:!0,decodeBitStrings:!0},S=n(e,t,r+1,E),T=c-e.length();t-=T,p==s.Type.BITSTRING&&T++;var I=S.tagClass;T!==h||I!==s.Class.UNIVERSAL&&I!==s.Class.CONTEXT_SPECIFIC||(d=[S])}catch(e){}void 0===d&&(e.read=v,t=m)}if(void 0===d){if(void 0===h){if(i.strict)throw new Error('Non-constructed ASN.1 object of indefinite length.');h=t}if(p===s.Type.BMPSTRING)for(d='';h>0;h-=2)a(e,t,2),d+=_StringfromCharCode2(e.getInt16()),t-=2;else d=e.getBytes(h)}var A=void 0===y?null:{bitStringContents:y};return s.create(l,p,g,d,A)}var i=r(0);r(1),r(6);var s=e.exports=i.asn1=i.asn1||{};s.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},s.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},s.create=function(e,t,r,a,n){if(i.util.isArray(a)){for(var o=[],c=0;c<a.length;++c)void 0!==a[c]&&o.push(a[c]);a=o}var u={tagClass:e,type:t,constructed:r,composed:r||i.util.isArray(a),value:a};return n&&'bitStringContents'in n&&(u.bitStringContents=n.bitStringContents,u.original=s.copy(u)),u},s.copy=function(e,t){var r;if(i.util.isArray(e)){r=[];for(var a=0;a<e.length;++a)r.push(s.copy(e[a],t));return r}return'string'==typeof e?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:s.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},s.equals=function(e,t,r){if(i.util.isArray(e)){if(!i.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var a=0;a<e.length;++a)return!!s.equals(e[a],t[a])}if(typeof e!=typeof t)return!1;if('string'==typeof e)return e===t;var n=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&s.equals(e.value,t.value);return r&&r.includeBitStringContents&&(n=n&&e.bitStringContents===t.bitStringContents),n},s.getBerValueLength=function(e){var t=e.getByte();if(128!==t){var a=128&t,r;return r=a?e.getInt((127&t)<<3):t}};var o=function(e,t){var r=e.getByte();if(t--,128!==r){var i=128&r,n;if(i){var s=127&r;a(e,t,s),n=e.getInt(s<<3)}else n=r;if(n<0)throw new Error('Negative length: '+n);return n}};s.fromDer=function(e,t){return void 0===t&&(t={strict:!0,decodeBitStrings:!0}),'boolean'==typeof t&&(t={strict:t,decodeBitStrings:!0}),'strict'in t||(t.strict=!0),'decodeBitStrings'in t||(t.decodeBitStrings=!0),'string'==typeof e&&(e=i.util.createBuffer(e)),n(e,e.length(),0,t)},s.toDer=function(e){var t=i.util.createBuffer(),r=e.tagClass|e.type,a=i.util.createBuffer(),n=!1;if('bitStringContents'in e&&(n=!0,e.original&&(n=s.equals(e,e.original))),n)a.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:a.putByte(0);for(var o=0;o<e.value.length;++o)void 0!==e.value[o]&&a.putBuffer(s.toDer(e.value[o]))}else if(e.type===s.Type.BMPSTRING)for(var o=0;o<e.value.length;++o)a.putInt16(e.value.charCodeAt(o));else e.type===s.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0===(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128===(128&e.value.charCodeAt(1)))?a.putBytes(e.value.substr(1)):a.putBytes(e.value);if(t.putByte(r),a.length()<=127)t.putByte(127&a.length());else{var c=a.length(),u='';do u+=_StringfromCharCode2(255&c),c>>>=8;while(c>0);t.putByte(128|u.length);for(var o=u.length-1;o>=0;--o)t.putByte(u.charCodeAt(o))}return t.putBuffer(a),t},s.oidToDer=function(e){var t=e.split('.'),r=i.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var c=2,a,n,s,o;c<t.length;++c){a=!0,n=[],s=parseInt(t[c],10);do o=127&s,s>>>=7,a||(o|=128),n.push(o),a=!1;while(s>0);for(var u=n.length-1;u>=0;--u)r.putByte(n[u])}return r},s.derToOid=function(e){var t;'string'==typeof e&&(e=i.util.createBuffer(e));var r=e.getByte();t=_Mathfloor2(r/40)+'.'+r%40;for(var a=0;e.length()>0;)r=e.getByte(),a<<=7,128&r?a+=127&r:(t+='.'+(a+r),a=0);return t},s.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var a=parseInt(e.substr(2,2),10)-1,n=parseInt(e.substr(4,2),10),i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var c=e.charAt(10),u=10;'+'!==c&&'-'!==c&&(o=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(r,a,n),t.setUTCHours(i,s,o,0),u&&(c=e.charAt(u),'+'===c||'-'===c)){var l=parseInt(e.substr(u+1,2),10),p=parseInt(e.substr(u+4,2),10),h=60*l+p;h*=6e4,'+'===c?t.setTime(+t-h):t.setTime(+t+h)}return t},s.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),a=parseInt(e.substr(4,2),10)-1,n=parseInt(e.substr(6,2),10),i=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),c=0,u=0,l=!1;'Z'===e.charAt(e.length-1)&&(l=!0);var p=e.length-5,h=e.charAt(p);if('+'===h||'-'===h){var f=parseInt(e.substr(p+1,2),10),d=parseInt(e.substr(p+4,2),10);u=60*f+d,u*=6e4,'+'===h&&(u*=-1),l=!0}return'.'===e.charAt(14)&&(c=1e3*parseFloat(e.substr(14),10)),l?(t.setUTCFullYear(r,a,n),t.setUTCHours(i,s,o,c),t.setTime(+t+u)):(t.setFullYear(r,a,n),t.setHours(i,s,o,c)),t},s.dateToUtcTime=function(e){if('string'==typeof e)return e;var t='',r=[];r.push((''+e.getUTCFullYear()).substr(2)),r.push(''+(e.getUTCMonth()+1)),r.push(''+e.getUTCDate()),r.push(''+e.getUTCHours()),r.push(''+e.getUTCMinutes()),r.push(''+e.getUTCSeconds());for(var a=0;a<r.length;++a)r[a].length<2&&(t+='0'),t+=r[a];return t+='Z'},s.dateToGeneralizedTime=function(e){if('string'==typeof e)return e;var t='',r=[];r.push(''+e.getUTCFullYear()),r.push(''+(e.getUTCMonth()+1)),r.push(''+e.getUTCDate()),r.push(''+e.getUTCHours()),r.push(''+e.getUTCMinutes()),r.push(''+e.getUTCSeconds());for(var a=0;a<r.length;++a)r[a].length<2&&(t+='0'),t+=r[a];return t+='Z'},s.integerToDer=function(e){var t=i.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error('Integer too large; max is 32-bits.');throw r.integer=e,r},s.derToInteger=function(e){'string'==typeof e&&(e=i.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error('Integer too large; max is 32-bits.');return e.getSignedInt(t)},s.validate=function(e,t,r,a){var n=!1;if(e.tagClass!==t.tagClass&&'undefined'!=typeof t.tagClass||e.type!==t.type&&'undefined'!=typeof t.type)a&&(e.tagClass!==t.tagClass&&a.push('['+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&a.push('['+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||'undefined'==typeof t.constructed){if(n=!0,t.value&&i.util.isArray(t.value))for(var o=0,c=0;n&&c<t.value.length;++c)n=t.value[c].optional||!1,e.value[o]&&(n=s.validate(e.value[o],t.value[c],r,a),n?++o:t.value[c].optional&&(n=!0)),!n&&a&&a.push('['+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(n&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&'bitStringContents'in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&'bitStringContents'in e))if(e.bitStringContents.length<2)r[t.captureBitStringValue]='';else{var u=e.bitStringContents.charCodeAt(0);if(0!==u)throw new Error('captureBitStringValue only supported for zero unused bits');r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else a&&a.push('['+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return n};var c=/[^\\u0000-\\u00ff]/;s.prettyPrint=function(e,t,r){var a='';t=t||0,r=r||2,t>0&&(a+='\n');for(var n='',o=0;o<t*r;++o)n+=' ';switch(a+=n+'Tag: ',e.tagClass){case s.Class.UNIVERSAL:a+='Universal:';break;case s.Class.APPLICATION:a+='Application:';break;case s.Class.CONTEXT_SPECIFIC:a+='Context-Specific:';break;case s.Class.PRIVATE:a+='Private:';}if(e.tagClass===s.Class.UNIVERSAL)switch(a+=e.type,e.type){case s.Type.NONE:a+=' (None)';break;case s.Type.BOOLEAN:a+=' (Boolean)';break;case s.Type.INTEGER:a+=' (Integer)';break;case s.Type.BITSTRING:a+=' (Bit string)';break;case s.Type.OCTETSTRING:a+=' (Octet string)';break;case s.Type.NULL:a+=' (Null)';break;case s.Type.OID:a+=' (Object Identifier)';break;case s.Type.ODESC:a+=' (Object Descriptor)';break;case s.Type.EXTERNAL:a+=' (External or Instance of)';break;case s.Type.REAL:a+=' (Real)';break;case s.Type.ENUMERATED:a+=' (Enumerated)';break;case s.Type.EMBEDDED:a+=' (Embedded PDV)';break;case s.Type.UTF8:a+=' (UTF8)';break;case s.Type.ROID:a+=' (Relative Object Identifier)';break;case s.Type.SEQUENCE:a+=' (Sequence)';break;case s.Type.SET:a+=' (Set)';break;case s.Type.PRINTABLESTRING:a+=' (Printable String)';break;case s.Type.IA5String:a+=' (IA5String (ASCII))';break;case s.Type.UTCTIME:a+=' (UTC time)';break;case s.Type.GENERALIZEDTIME:a+=' (Generalized time)';break;case s.Type.BMPSTRING:a+=' (BMP String)';}else a+=e.type;if(a+='\n',a+=n+'Constructed: '+e.constructed+'\n',e.composed){for(var u=0,l='',o=0;o<e.value.length;++o)void 0!==e.value[o]&&(u+=1,l+=s.prettyPrint(e.value[o],t+1,r),o+1<e.value.length&&(l+=','));a+=n+'Sub values: '+u+l}else{if(a+=n+'Value: ',e.type===s.Type.OID){var p=s.derToOid(e.value);a+=p,i.pki&&i.pki.oids&&p in i.pki.oids&&(a+=' ('+i.pki.oids[p]+') ')}if(e.type===s.Type.INTEGER)try{a+=s.derToInteger(e.value)}catch(t){a+='0x'+i.util.bytesToHex(e.value)}else if(e.type!==s.Type.BITSTRING)e.type===s.Type.OCTETSTRING?(c.test(e.value)||(a+='('+e.value+') '),a+='0x'+i.util.bytesToHex(e.value)):a+=e.type===s.Type.UTF8?i.util.decodeUtf8(e.value):e.type===s.Type.PRINTABLESTRING||e.type===s.Type.IA5String?e.value:c.test(e.value)?'0x'+i.util.bytesToHex(e.value):0===e.value.length?'[null]':e.value;else if(a+=e.value.length>1?'0x'+i.util.bytesToHex(e.value.slice(1)):'(none)',e.value.length>0){var h=e.value.charCodeAt(0);1==h?a+=' (1 unused bit shown)':h>1&&(a+=' ('+h+' unused bits shown)')}}return a}},function(e,t,r){var a=r(0);e.exports=a.md=a.md||{},a.md.algorithms=a.md.algorithms||{}},function(e,t,r){function a(e,t){var r=function(){return new c.aes.Algorithm(e,t)};c.cipher.registerAlgorithm(e,r)}function n(){d=!0,p=[0,1,2,4,8,16,32,64,128,27,54];for(var e=Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;u=Array(256),l=Array(256),h=[,,,,],f=[,,,,];for(var t=0;t<4;++t)h[t]=Array(256),f[t]=Array(256);for(var y=0,g=0,t=0,r,a,n,i,s,o,c;t<256;++t){i=g^g<<1^g<<2^g<<3^g<<4,i=i>>8^255&i^99,u[y]=i,l[i]=y,s=e[i],r=e[y],a=e[r],n=e[a],o=s<<24^i<<16^i<<8^(i^s),c=(r^a^n)<<24^(y^n)<<16^(y^a^n)<<8^(y^r^n);for(var v=0;v<4;++v)h[v][y]=o,f[v][i]=c,o=o<<24|o>>>8,c=c<<24|c>>>8;0===y?y=g=1:(y=r^e[e[e[r^n]]],g^=e[e[g]])}}function i(e,t){for(var a=e.slice(0),n=1,i=a.length,s=i+6+1,o=y*s,c=i,r;c<o;++c)r=a[c-1],c%i===0?(r=u[r>>>16&255]<<24^u[r>>>8&255]<<16^u[255&r]<<8^u[r>>>24]^p[n]<<24,n++):i>6&&c%i===4&&(r=u[r>>>24]<<24^u[r>>>16&255]<<16^u[r>>>8&255]<<8^u[255&r]),a[c]=a[c-i]^r;if(t){var h=f[0],d=f[1],g=f[2],v=f[3],m=a.slice(0),l;o=a.length;for(var c=0,C=o-y;c<o;c+=y,C-=y)if(0===c||c===o-y)m[c]=a[C],m[c+1]=a[C+3],m[c+2]=a[C+2],m[c+3]=a[C+1];else for(var E=0;E<y;++E)l=a[C+E],m[c+(3&-E)]=h[u[l>>>24]]^d[u[l>>>16&255]]^g[u[l>>>8&255]]^v[u[255&l]];a=m}return a}function s(e,t,r,a){var p=e.length/4-1,n,i,s,o,c;a?(n=f[0],i=f[1],s=f[2],o=f[3],c=l):(n=h[0],i=h[1],s=h[2],o=h[3],c=u);var d,y,g,v,m,C,E;d=t[0]^e[0],y=t[a?3:1]^e[1],g=t[2]^e[2],v=t[a?1:3]^e[3];for(var S=3,T=1;T<p;++T)m=n[d>>>24]^i[y>>>16&255]^s[g>>>8&255]^o[255&v]^e[++S],C=n[y>>>24]^i[g>>>16&255]^s[v>>>8&255]^o[255&d]^e[++S],E=n[g>>>24]^i[v>>>16&255]^s[d>>>8&255]^o[255&y]^e[++S],v=n[v>>>24]^i[d>>>16&255]^s[y>>>8&255]^o[255&g]^e[++S],d=m,y=C,g=E;r[0]=c[d>>>24]<<24^c[y>>>16&255]<<16^c[g>>>8&255]<<8^c[255&v]^e[++S],r[a?3:1]=c[y>>>24]<<24^c[g>>>16&255]<<16^c[v>>>8&255]<<8^c[255&d]^e[++S],r[2]=c[g>>>24]<<24^c[v>>>16&255]<<16^c[d>>>8&255]<<8^c[255&y]^e[++S],r[a?1:3]=c[v>>>24]<<24^c[d>>>16&255]<<16^c[y>>>8&255]<<8^c[255&g]^e[++S]}function o(e){e=e||{};var r=(e.mode||'CBC').toUpperCase(),a='AES-'+r,t;t=e.decrypt?c.cipher.createDecipher(a,e.key):c.cipher.createCipher(a,e.key);var n=t.start;return t.start=function(e,r){var a=null;r instanceof c.util.ByteBuffer&&(a=r,r={}),r=r||{},r.output=a,r.iv=e,n.call(t,r)},t}var c=r(0);r(12),r(18),r(1),e.exports=c.aes=c.aes||{},c.aes.startEncrypting=function(e,t,r,a){var n=o({key:e,output:r,decrypt:!1,mode:a});return n.start(t),n},c.aes.createEncryptionCipher=function(e,t){return o({key:e,output:null,decrypt:!1,mode:t})},c.aes.startDecrypting=function(e,t,r,a){var n=o({key:e,output:r,decrypt:!0,mode:a});return n.start(t),n},c.aes.createDecryptionCipher=function(e,t){return o({key:e,output:null,decrypt:!0,mode:t})},c.aes.Algorithm=function(e,t){d||n();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return s(r._w,e,t,!1)},decrypt:function(e,t){return s(r._w,e,t,!0)}}}),r._init=!1},c.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var r=e.key,t;if(!('string'!=typeof r||16!==r.length&&24!==r.length&&32!==r.length))r=c.util.createBuffer(r);else if(c.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){t=r,r=c.util.createBuffer();for(var a=0;a<t.length;++a)r.putByte(t[a])}if(!c.util.isArray(r)){t=r,r=[];var n=t.length();if(16===n||24===n||32===n){n>>>=2;for(var a=0;a<n;++a)r.push(t.getInt32())}}if(!c.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error('Invalid key parameter.');var s=this.mode.name,o=['CFB','OFB','CTR','GCM'].indexOf(s)!==-1;this._w=i(r,e.decrypt&&!o),this._init=!0}},c.aes._expandKey=function(e,t){return d||n(),i(e,t)},c.aes._updateBlock=s,a('AES-ECB',c.cipher.modes.ecb),a('AES-CBC',c.cipher.modes.cbc),a('AES-CFB',c.cipher.modes.cfb),a('AES-OFB',c.cipher.modes.ofb),a('AES-CTR',c.cipher.modes.ctr),a('AES-GCM',c.cipher.modes.gcm);var d=!1,y=4,u,l,p,h,f},function(e,t,r){function a(e,t){s[e]=t,s[t]=e}function n(e,t){s[e]=t}var i=r(0);i.pki=i.pki||{};var s=e.exports=i.pki.oids=i.oids=i.oids||{};a('1.2.840.113549.1.1.1','rsaEncryption'),a('1.2.840.113549.1.1.4','md5WithRSAEncryption'),a('1.2.840.113549.1.1.5','sha1WithRSAEncryption'),a('1.2.840.113549.1.1.7','RSAES-OAEP'),a('1.2.840.113549.1.1.8','mgf1'),a('1.2.840.113549.1.1.9','pSpecified'),a('1.2.840.113549.1.1.10','RSASSA-PSS'),a('1.2.840.113549.1.1.11','sha256WithRSAEncryption'),a('1.2.840.113549.1.1.12','sha384WithRSAEncryption'),a('1.2.840.113549.1.1.13','sha512WithRSAEncryption'),a('1.3.14.3.2.7','desCBC'),a('1.3.14.3.2.26','sha1'),a('2.16.840.1.101.3.4.2.1','sha256'),a('2.16.840.1.101.3.4.2.2','sha384'),a('2.16.840.1.101.3.4.2.3','sha512'),a('1.2.840.113549.2.5','md5'),a('1.2.840.113549.1.7.1','data'),a('1.2.840.113549.1.7.2','signedData'),a('1.2.840.113549.1.7.3','envelopedData'),a('1.2.840.113549.1.7.4','signedAndEnvelopedData'),a('1.2.840.113549.1.7.5','digestedData'),a('1.2.840.113549.1.7.6','encryptedData'),a('1.2.840.113549.1.9.1','emailAddress'),a('1.2.840.113549.1.9.2','unstructuredName'),a('1.2.840.113549.1.9.3','contentType'),a('1.2.840.113549.1.9.4','messageDigest'),a('1.2.840.113549.1.9.5','signingTime'),a('1.2.840.113549.1.9.6','counterSignature'),a('1.2.840.113549.1.9.7','challengePassword'),a('1.2.840.113549.1.9.8','unstructuredAddress'),a('1.2.840.113549.1.9.14','extensionRequest'),a('1.2.840.113549.1.9.20','friendlyName'),a('1.2.840.113549.1.9.21','localKeyId'),a('1.2.840.113549.1.9.22.1','x509Certificate'),a('1.2.840.113549.1.12.10.1.1','keyBag'),a('1.2.840.113549.1.12.10.1.2','pkcs8ShroudedKeyBag'),a('1.2.840.113549.1.12.10.1.3','certBag'),a('1.2.840.113549.1.12.10.1.4','crlBag'),a('1.2.840.113549.1.12.10.1.5','secretBag'),a('1.2.840.113549.1.12.10.1.6','safeContentsBag'),a('1.2.840.113549.1.5.13','pkcs5PBES2'),a('1.2.840.113549.1.5.12','pkcs5PBKDF2'),a('1.2.840.113549.1.12.1.1','pbeWithSHAAnd128BitRC4'),a('1.2.840.113549.1.12.1.2','pbeWithSHAAnd40BitRC4'),a('1.2.840.113549.1.12.1.3','pbeWithSHAAnd3-KeyTripleDES-CBC'),a('1.2.840.113549.1.12.1.4','pbeWithSHAAnd2-KeyTripleDES-CBC'),a('1.2.840.113549.1.12.1.5','pbeWithSHAAnd128BitRC2-CBC'),a('1.2.840.113549.1.12.1.6','pbewithSHAAnd40BitRC2-CBC'),a('1.2.840.113549.2.7','hmacWithSHA1'),a('1.2.840.113549.2.8','hmacWithSHA224'),a('1.2.840.113549.2.9','hmacWithSHA256'),a('1.2.840.113549.2.10','hmacWithSHA384'),a('1.2.840.113549.2.11','hmacWithSHA512'),a('1.2.840.113549.3.7','des-EDE3-CBC'),a('2.16.840.1.101.3.4.1.2','aes128-CBC'),a('2.16.840.1.101.3.4.1.22','aes192-CBC'),a('2.16.840.1.101.3.4.1.42','aes256-CBC'),a('2.5.4.3','commonName'),a('2.5.4.5','serialName'),a('2.5.4.6','countryName'),a('2.5.4.7','localityName'),a('2.5.4.8','stateOrProvinceName'),a('2.5.4.10','organizationName'),a('2.5.4.11','organizationalUnitName'),a('2.16.840.1.113730.1.1','nsCertType'),n('2.5.29.1','authorityKeyIdentifier'),n('2.5.29.2','keyAttributes'),n('2.5.29.3','certificatePolicies'),n('2.5.29.4','keyUsageRestriction'),n('2.5.29.5','policyMapping'),n('2.5.29.6','subtreesConstraint'),n('2.5.29.7','subjectAltName'),n('2.5.29.8','issuerAltName'),n('2.5.29.9','subjectDirectoryAttributes'),n('2.5.29.10','basicConstraints'),n('2.5.29.11','nameConstraints'),n('2.5.29.12','policyConstraints'),n('2.5.29.13','basicConstraints'),a('2.5.29.14','subjectKeyIdentifier'),a('2.5.29.15','keyUsage'),n('2.5.29.16','privateKeyUsagePeriod'),a('2.5.29.17','subjectAltName'),a('2.5.29.18','issuerAltName'),a('2.5.29.19','basicConstraints'),n('2.5.29.20','cRLNumber'),n('2.5.29.21','cRLReason'),n('2.5.29.22','expirationDate'),n('2.5.29.23','instructionCode'),n('2.5.29.24','invalidityDate'),n('2.5.29.25','cRLDistributionPoints'),n('2.5.29.26','issuingDistributionPoint'),n('2.5.29.27','deltaCRLIndicator'),n('2.5.29.28','issuingDistributionPoint'),n('2.5.29.29','certificateIssuer'),n('2.5.29.30','nameConstraints'),a('2.5.29.31','cRLDistributionPoints'),a('2.5.29.32','certificatePolicies'),n('2.5.29.33','policyMappings'),n('2.5.29.34','policyConstraints'),a('2.5.29.35','authorityKeyIdentifier'),n('2.5.29.36','policyConstraints'),a('2.5.29.37','extKeyUsage'),n('2.5.29.46','freshestCRL'),n('2.5.29.54','inhibitAnyPolicy'),a('1.3.6.1.4.1.11129.2.4.2','timestampList'),a('1.3.6.1.5.5.7.1.1','authorityInfoAccess'),a('1.3.6.1.5.5.7.3.1','serverAuth'),a('1.3.6.1.5.5.7.3.2','clientAuth'),a('1.3.6.1.5.5.7.3.3','codeSigning'),a('1.3.6.1.5.5.7.3.4','emailProtection'),a('1.3.6.1.5.5.7.3.8','timeStamping')},function(e,t,r){function a(e){for(var t=e.name+': ',r=[],a=function(e,t){return' '+t},n=0;n<e.values.length;++n)r.push(e.values[n].replace(/^(\S+\r\n)/,a));t+=r.join(',')+'\r\n';for(var i=0,s=-1,n=0;n<t.length;++n,++i)if(i>65&&s!==-1){var o=t[s];','===o?(++s,t=t.substr(0,s)+'\r\n '+t.substr(s)):t=t.substr(0,s)+'\r\n'+o+t.substr(s+1),i=n-s-1,s=-1,++n}else' '!==t[n]&&'\t'!==t[n]&&','!==t[n]||(s=n);return t}function n(e){return e.replace(/^\s+/,'')}var i=r(0);r(1);var s=e.exports=i.pem=i.pem||{};s.encode=function(e,t){t=t||{};var n='-----BEGIN '+e.type+'-----\r\n',r;if(e.procType&&(r={name:'Proc-Type',values:[e.procType.version+'',e.procType.type]},n+=a(r)),e.contentDomain&&(r={name:'Content-Domain',values:[e.contentDomain]},n+=a(r)),e.dekInfo&&(r={name:'DEK-Info',values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),n+=a(r)),e.headers)for(var s=0;s<e.headers.length;++s)n+=a(e.headers[s]);return e.procType&&(n+='\r\n'),n+=i.util.encode64(e.body,t.maxline||64)+'\r\n',n+='-----END '+e.type+'-----\r\n'},s.decode=function(e){for(var r=[],a=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,s=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,o=/\r?\n/,t;;){if(t=a.exec(e),!t)break;var c={type:t[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:i.util.decode64(t[3])};if(r.push(c),t[2]){for(var u=t[2].split(o),l=0;t&&l<u.length;){for(var p=u[l].replace(/\s+$/,''),h=l+1;h<u.length;++h){var f=u[h];if(!/\s/.test(f[0]))break;p+=f,l=h}if(t=p.match(s)){for(var d={name:t[1],values:[]},y=t[2].split(','),g=0;g<y.length;++g)d.values.push(n(y[g]));if(!c.procType){if('Proc-Type'!==d.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==d.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:y[0],type:y[1]}}else if(!(c.contentDomain||'Content-Domain'!==d.name))c.contentDomain=y[0]||'';else if(c.dekInfo||'DEK-Info'!==d.name)c.headers.push(d);else{if(0===d.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:y[0],parameters:y[1]||null}}}++l}if('ENCRYPTED'===c.procType&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error('Invalid PEM formatted message.');return r}},function(e,t,r){var a=r(0);r(4),r(1);var n=e.exports=a.hmac=a.hmac||{};n.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(i,s){if(null!==i)if('string'==typeof i){if(i=i.toLowerCase(),!(i in a.md.algorithms))throw new Error('Unknown hash algorithm "'+i+'"');t=a.md.algorithms[i].create()}else t=i;if(null===s)s=e;else{if('string'==typeof s)s=a.util.createBuffer(s);else if(a.util.isArray(s)){var o=s;s=a.util.createBuffer();for(var c=0;c<o.length;++c)s.putByte(o[c])}var u=s.length();u>t.blockLength&&(t.start(),t.update(s.bytes()),s=t.digest()),r=a.util.createBuffer(),n=a.util.createBuffer(),u=s.length();for(var c=0;c<u;++c){var o=s.at(c);r.putByte(54^o),n.putByte(92^o)}if(u<t.blockLength)for(var o=t.blockLength-u,c=0;c<o;++c)r.putByte(54),n.putByte(92);e=s,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(e){t.update(e)},i.getMac=function(){var e=t.digest().bytes();return t.start(),t.update(n),t.update(e),t.digest()},i.digest=i.getMac,i}},function(e,t,r){function a(){o='\x80',o+=i.util.fillString('\0',64),c=!0}function n(e,t,r){for(var p=r.length(),a,n,i,s,o,c,u,l;p>=64;){for(n=e.h0,i=e.h1,s=e.h2,o=e.h3,c=e.h4,l=0;l<16;++l)a=r.getInt32(),t[l]=a,u=o^i&(s^o),a=(n<<5|n>>>27)+u+c+1518500249+a,c=o,o=s,s=(i<<30|i>>>2)>>>0,i=n,n=a;for(;l<20;++l)a=t[l-3]^t[l-8]^t[l-14]^t[l-16],a=a<<1|a>>>31,t[l]=a,u=o^i&(s^o),a=(n<<5|n>>>27)+u+c+1518500249+a,c=o,o=s,s=(i<<30|i>>>2)>>>0,i=n,n=a;for(;l<32;++l)a=t[l-3]^t[l-8]^t[l-14]^t[l-16],a=a<<1|a>>>31,t[l]=a,u=i^s^o,a=(n<<5|n>>>27)+u+c+1859775393+a,c=o,o=s,s=(i<<30|i>>>2)>>>0,i=n,n=a;for(;l<40;++l)a=t[l-6]^t[l-16]^t[l-28]^t[l-32],a=a<<2|a>>>30,t[l]=a,u=i^s^o,a=(n<<5|n>>>27)+u+c+1859775393+a,c=o,o=s,s=(i<<30|i>>>2)>>>0,i=n,n=a;for(;l<60;++l)a=t[l-6]^t[l-16]^t[l-28]^t[l-32],a=a<<2|a>>>30,t[l]=a,u=i&s|o&(i^s),a=(n<<5|n>>>27)+u+c+2400959708+a,c=o,o=s,s=(i<<30|i>>>2)>>>0,i=n,n=a;for(;l<80;++l)a=t[l-6]^t[l-16]^t[l-28]^t[l-32],a=a<<2|a>>>30,t[l]=a,u=i^s^o,a=(n<<5|n>>>27)+u+c+3395469782+a,c=o,o=s,s=(i<<30|i>>>2)>>>0,i=n,n=a;e.h0=e.h0+n|0,e.h1=e.h1+i|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,e.h4=e.h4+c|0,p-=64}}var i=r(0);r(4),r(1);var s=e.exports=i.sha1=i.sha1||{};i.md.sha1=i.md.algorithms.sha1=s,s.create=function(){c||a();var e=null,t=i.util.createBuffer(),r=Array(80),s={algorithm:'sha1',blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return s.start=function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var r=s.messageLengthSize/4,a=0;a<r;++a)s.fullMessageLength.push(0);return t=i.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},s},s.start(),s.update=function(a,o){'utf8'===o&&(a=i.util.encodeUtf8(a));var c=a.length;s.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var u=s.fullMessageLength.length-1;u>=0;--u)s.fullMessageLength[u]+=c[1],c[1]=c[0]+(s.fullMessageLength[u]/4294967296>>>0),s.fullMessageLength[u]>>>=0,c[0]=c[1]/4294967296>>>0;return t.putBytes(a),n(e,r,t),(t.read>2048||0===t.length())&&t.compact(),s},s.digest=function(){var a=i.util.createBuffer();a.putBytes(t.bytes());var c=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize,u=c&s.blockLength-1;a.putBytes(o.substr(0,s.blockLength-u));for(var h=8*s.fullMessageLength[0],f=0,l,p;f<s.fullMessageLength.length-1;++f)l=8*s.fullMessageLength[f+1],p=l/4294967296>>>0,h+=p,a.putInt32(h>>>0),h=l>>>0;a.putInt32(h);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};n(d,r,a);var y=i.util.createBuffer();return y.putInt32(d.h0),y.putInt32(d.h1),y.putInt32(d.h2),y.putInt32(d.h3),y.putInt32(d.h4),y},s};var o=null,c=!1},function(e,t,r){function a(e,t){var r=function(){return new o.des.Algorithm(e,t)};o.cipher.registerAlgorithm(e,r)}function n(e){for(var r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],a=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],p=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],f=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],y=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=e.length()>8?3:1,v=[],m=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],C=0,E=0,t;E<g;E++){var S=e.getInt32(),T=e.getInt32();t=252645135&(S>>>4^T),T^=t,S^=t<<4,t=65535&(T>>>-16^S),S^=t,T^=t<<-16,t=858993459&(S>>>2^T),T^=t,S^=t<<2,t=65535&(T>>>-16^S),S^=t,T^=t<<-16,t=1431655765&(S>>>1^T),T^=t,S^=t<<1,t=16711935&(T>>>8^S),S^=t,T^=t<<8,t=1431655765&(S>>>1^T),T^=t,S^=t<<1,t=S<<8|T>>>20&240,S=T<<24|T<<8&16711680|T>>>8&65280|T>>>24&240,T=t;for(var I=0;I<m.length;++I){m[I]?(S=S<<2|S>>>26,T=T<<2|T>>>26):(S=S<<1|S>>>27,T=T<<1|T>>>27),S&=-15,T&=-15;var A=r[S>>>28]|a[S>>>24&15]|n[S>>>20&15]|i[S>>>16&15]|s[S>>>12&15]|o[S>>>8&15]|c[S>>>4&15],b=u[T>>>28]|l[T>>>24&15]|p[T>>>20&15]|h[T>>>16&15]|f[T>>>12&15]|d[T>>>8&15]|y[T>>>4&15];t=65535&(b>>>16^A),v[C++]=A^t,v[C++]=b^t<<16}}return v}function i(e,t,r,a){var i=32===e.length?3:9,n;n=3===i?a?[30,-2,-2]:[0,32,2]:a?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o=t[0],g=t[1],s;s=252645135&(o>>>4^g),g^=s,o^=s<<4,s=65535&(o>>>16^g),g^=s,o^=s<<16,s=858993459&(g>>>2^o),o^=s,g^=s<<2,s=16711935&(g>>>8^o),o^=s,g^=s<<8,s=1431655765&(o>>>1^g),g^=s,o^=s<<1,o=o<<1|o>>>31,g=g<<1|g>>>31;for(var v=0;v<i;v+=3){for(var m=n[v+1],C=n[v+2],E=n[v];E!=m;E+=C){var S=g^e[E],T=(g>>>4|g<<28)^e[E+1];s=o,o=g,g=s^(u[S>>>24&63]|p[S>>>16&63]|f[S>>>8&63]|y[63&S]|c[T>>>24&63]|l[T>>>16&63]|h[T>>>8&63]|d[63&T])}s=o,o=g,g=s}o=o>>>1|o<<31,g=g>>>1|g<<31,s=1431655765&(o>>>1^g),g^=s,o^=s<<1,s=16711935&(g>>>8^o),o^=s,g^=s<<8,s=858993459&(g>>>2^o),o^=s,g^=s<<2,s=65535&(o>>>16^g),g^=s,o^=s<<16,s=252645135&(o>>>4^g),g^=s,o^=s<<4,r[0]=o,r[1]=g}function s(e){e=e||{};var r=(e.mode||'CBC').toUpperCase(),a='DES-'+r,t;t=e.decrypt?o.cipher.createDecipher(a,e.key):o.cipher.createCipher(a,e.key);var n=t.start;return t.start=function(e,r){var a=null;r instanceof o.util.ByteBuffer&&(a=r,r={}),r=r||{},r.output=a,r.iv=e,n.call(t,r)},t}var o=r(0);r(12),r(18),r(1),e.exports=o.des=o.des||{},o.des.startEncrypting=function(e,t,r,a){var n=s({key:e,output:r,decrypt:!1,mode:a||(null===t?'ECB':'CBC')});return n.start(t),n},o.des.createEncryptionCipher=function(e,t){return s({key:e,output:null,decrypt:!1,mode:t})},o.des.startDecrypting=function(e,t,r,a){var n=s({key:e,output:r,decrypt:!0,mode:a||(null===t?'ECB':'CBC')});return n.start(t),n},o.des.createDecryptionCipher=function(e,t){return s({key:e,output:null,decrypt:!0,mode:t})},o.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return i(r._keys,e,t,!1)},decrypt:function(e,t){return i(r._keys,e,t,!0)}}}),r._init=!1},o.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=o.util.createBuffer(e.key);if(0===this.name.indexOf('3DES')&&24!==t.length())throw new Error('Invalid Triple-DES key size: '+8*t.length());this._keys=n(t),this._init=!0}},a('DES-ECB',o.cipher.modes.ecb),a('DES-CBC',o.cipher.modes.cbc),a('DES-CFB',o.cipher.modes.cfb),a('DES-OFB',o.cipher.modes.ofb),a('DES-CTR',o.cipher.modes.ctr),a('3DES-ECB',o.cipher.modes.ecb),a('3DES-CBC',o.cipher.modes.cbc),a('3DES-CFB',o.cipher.modes.cfb),a('3DES-OFB',o.cipher.modes.ofb),a('3DES-CTR',o.cipher.modes.ctr);var c=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],u=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],l=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],p=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],h=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],f=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],d=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],y=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696]},function(e,t,r){function a(e,t,r){var a=p.util.createBuffer(),n=_Mathceil3(t.n.bitLength()/8);if(e.length>n-11){var i=new Error('Message is too long for PKCS#1 v1.5 padding.');throw i.length=e.length,i.max=n-11,i}a.putByte(0),a.putByte(r);var o=n-3-e.length,s;if(0===r||1===r){s=0===r?0:255;for(var c=0;c<o;++c)a.putByte(s)}else for(;o>0;){for(var u=0,l=p.random.getBytes(o),c=0;c<o;++c)s=l.charCodeAt(c),0===s?++u:a.putByte(s);o=u}return a.putByte(0),a.putBytes(e),a}function n(e,t,r,a){var n=_Mathceil3(t.n.bitLength()/8),i=p.util.createBuffer(e),s=i.getByte(),o=i.getByte();if(0!==s||r&&0!==o&&1!==o||!r&&2!=o||r&&0===o&&'undefined'==typeof a)throw new Error('Encryption block is invalid.');var c=0;if(0===o){c=n-3-a;for(var u=0;u<c;++u)if(0!==i.getByte())throw new Error('Encryption block is invalid.')}else if(1===o)for(c=0;i.length()>1;){if(255!==i.getByte()){--i.read;break}++c}else if(2===o)for(c=0;i.length()>1;){if(0===i.getByte()){--i.read;break}++c}var l=i.getByte();if(0!==l||c!==n-3-i.length())throw new Error('Encryption block is invalid.');return i.getBytes()}function i(e,t,r){function a(){n(e.pBits,function(t,a){return t?r(t):(e.p=a,null===e.q?void n(e.qBits,i):i(t,e.q))})}function n(e,t){p.prime.generateProbablePrime(e,s,t)}function i(t,s){if(t)return r(t);if(e.q=s,e.p.compareTo(e.q)<0){var o=e.p;e.p=e.q,e.q=o}if(0!==e.p.subtract(h.ONE).gcd(e.e).compareTo(h.ONE))return e.p=null,void a();if(0!==e.q.subtract(h.ONE).gcd(e.e).compareTo(h.ONE))return e.q=null,void n(e.qBits,i);if(e.p1=e.p.subtract(h.ONE),e.q1=e.q.subtract(h.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(h.ONE))return e.p=e.q=null,void a();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void n(e.qBits,i);var c=e.e.modInverse(e.phi);e.keys={privateKey:d.rsa.setPrivateKey(e.n,e.e,c,e.p,e.q,c.mod(e.p1),c.mod(e.q1),e.q.modInverse(e.p)),publicKey:d.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}'function'==typeof t&&(r=t,t={}),t=t||{};var s={algorithm:{name:t.algorithm||'PRIMEINC',options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};'prng'in t&&(s.prng=t.prng),a()}function s(e){var t=e.toString(16);t[0]>='8'&&(t='00'+t);var r=p.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0===(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128===(128&r.charCodeAt(1)))?r.substr(1):r}function o(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function c(e){return'undefined'!=typeof window&&'object'==typeof window.crypto&&'object'==typeof window.crypto.subtle&&'function'==typeof window.crypto.subtle[e]}function u(e){return'undefined'!=typeof window&&'object'==typeof window.msCrypto&&'object'==typeof window.msCrypto.subtle&&'function'==typeof window.msCrypto.subtle[e]}function l(e){for(var t=p.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),a=0;a<t.length;++a)r[a]=t.charCodeAt(a);return r}var p=r(0);if(r(3),r(13),r(6),r(23),r(27),r(2),r(1),'undefined'==typeof h)var h=p.jsbn.BigInteger;var f=p.asn1;p.pki=p.pki||{},e.exports=p.pki.rsa=p.rsa=p.rsa||{};var d=p.pki,y=[6,4,2,4,2,4,6,2],g={name:'PrivateKeyInfo',tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:'PrivateKeyInfo.version',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyVersion'},{name:'PrivateKeyInfo.privateKeyAlgorithm',tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:'AlgorithmIdentifier.algorithm',tagClass:f.Class.UNIVERSAL,type:f.Type.OID,constructed:!1,capture:'privateKeyOid'}]},{name:'PrivateKeyInfo',tagClass:f.Class.UNIVERSAL,type:f.Type.OCTETSTRING,constructed:!1,capture:'privateKey'}]},v={name:'RSAPrivateKey',tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:'RSAPrivateKey.version',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyVersion'},{name:'RSAPrivateKey.modulus',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyModulus'},{name:'RSAPrivateKey.publicExponent',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyPublicExponent'},{name:'RSAPrivateKey.privateExponent',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyPrivateExponent'},{name:'RSAPrivateKey.prime1',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyPrime1'},{name:'RSAPrivateKey.prime2',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyPrime2'},{name:'RSAPrivateKey.exponent1',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyExponent1'},{name:'RSAPrivateKey.exponent2',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyExponent2'},{name:'RSAPrivateKey.coefficient',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'privateKeyCoefficient'}]},m={name:'RSAPublicKey',tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:'RSAPublicKey.modulus',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'publicKeyModulus'},{name:'RSAPublicKey.exponent',tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:'publicKeyExponent'}]},C=p.pki.rsa.publicKeyValidator={name:'SubjectPublicKeyInfo',tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,captureAsn1:'subjectPublicKeyInfo',value:[{name:'SubjectPublicKeyInfo.AlgorithmIdentifier',tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:'AlgorithmIdentifier.algorithm',tagClass:f.Class.UNIVERSAL,type:f.Type.OID,constructed:!1,capture:'publicKeyOid'}]},{name:'SubjectPublicKeyInfo.subjectPublicKey',tagClass:f.Class.UNIVERSAL,type:f.Type.BITSTRING,constructed:!1,value:[{name:'SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey',tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:'rsaPublicKey'}]}]},E=function(e){var t;if(!(e.algorithm in d.oids)){var r=new Error('Unknown message digest algorithm.');throw r.algorithm=e.algorithm,r}t=d.oids[e.algorithm];var a=f.oidToDer(t).getBytes(),n=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[]),i=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[]);i.value.push(f.create(f.Class.UNIVERSAL,f.Type.OID,!1,a)),i.value.push(f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,''));var s=f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,e.digest().getBytes());return n.value.push(i),n.value.push(s),f.toDer(n).getBytes()},S=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(h.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(h.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var a;do a=new h(p.util.bytesToHex(p.random.getBytes(t.n.bitLength()/8)),16);while(a.compareTo(t.n)>=0||!a.gcd(t.n).equals(h.ONE));e=e.multiply(a.modPow(t.e,t.n)).mod(t.n);for(var n=e.mod(t.p).modPow(t.dP,t.p),i=e.mod(t.q).modPow(t.dQ,t.q);n.compareTo(i)<0;)n=n.add(t.p);var s=n.subtract(i).multiply(t.qInv).mod(t.p).multiply(t.q).add(i);return s=s.multiply(a.modInverse(t.n)).mod(t.n)};d.rsa.encrypt=function(e,t,r){var i=r,s=_Mathceil3(t.n.bitLength()/8),n;r!==!1&&r!==!0?(i=2===r,n=a(e,t,r)):(n=p.util.createBuffer(),n.putBytes(e));for(var o=new h(n.toHex(),16),c=S(o,t,i),u=c.toString(16),l=p.util.createBuffer(),f=s-_Mathceil3(u.length/2);f>0;)l.putByte(0),--f;return l.putBytes(p.util.hexToBytes(u)),l.getBytes()},d.rsa.decrypt=function(e,t,r,a){var i=_Mathceil3(t.n.bitLength()/8);if(e.length!==i){var s=new Error('Encrypted message length is invalid.');throw s.length=e.length,s.expected=i,s}var o=new h(p.util.createBuffer(e).toHex(),16);if(o.compareTo(t.n)>=0)throw new Error('Encrypted message is invalid.');for(var c=S(o,t,r),u=c.toString(16),l=p.util.createBuffer(),f=i-_Mathceil3(u.length/2);f>0;)l.putByte(0),--f;return l.putBytes(p.util.hexToBytes(u)),a===!1?l.getBytes():n(l.getBytes(),t,r)},d.rsa.createKeyPairGenerationState=function(e,t,r){'string'==typeof e&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||p.random,i={nextBytes:function(e){for(var t=n.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},s=r.algorithm||'PRIMEINC',a;if('PRIMEINC'!==s)throw new Error('Invalid key generation algorithm: '+s);return a={algorithm:s,state:0,bits:e,rng:i,eInt:t||65537,e:new h(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt),a},d.rsa.stepKeyPairGenerationState=function(e,t){'algorithm'in e||(e.algorithm='PRIMEINC');var r=new h(null);r.fromInt(30);for(var n=0,i=function(e,t){return e|t},s=+new Date,c=0,a;null===e.keys&&(t<=0||c<t);){if(0===e.state){var u=null===e.p?e.pBits:e.qBits,l=u-1;0===e.pqState?(e.num=new h(u,e.rng),e.num.testBit(l)||e.num.bitwiseTo(h.ONE.shiftLeft(l),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):1===e.pqState?e.num.bitLength()>u?e.pqState=0:e.num.isProbablePrime(o(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(y[n++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(h.ONE).gcd(e.e).compareTo(h.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(h.ONE),e.q1=e.q.subtract(h.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(h.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var p=e.e.modInverse(e.phi);e.keys={privateKey:d.rsa.setPrivateKey(e.n,e.e,p,e.p,e.q,p.mod(e.p1),p.mod(e.q1),e.q.modInverse(e.p)),publicKey:d.rsa.setPublicKey(e.n,e.e)}}a=+new Date,c+=a-s,s=a}return null!==e.keys},d.rsa.generateKeyPair=function(e,t,r,a){if(1===arguments.length?'object'==typeof e?(r=e,e=void 0):'function'==typeof e&&(a=e,e=void 0):2===arguments.length?'number'==typeof e?'function'==typeof t?(a=t,t=void 0):'number'!=typeof t&&(r=t,t=void 0):(r=e,a=t,e=void 0,t=void 0):3===arguments.length&&('number'==typeof t?'function'==typeof r&&(a=r,r=void 0):(a=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537),!p.options.usePureJavaScript&&a&&e>=256&&e<=16384&&(65537===t||3===t)){if(c('generateKey')&&c('exportKey'))return window.crypto.subtle.generateKey({name:'RSASSA-PKCS1-v1_5',modulusLength:e,publicExponent:l(t),hash:{name:'SHA-256'}},!0,['sign','verify']).then(function(e){return window.crypto.subtle.exportKey('pkcs8',e.privateKey)}).then(void 0,function(e){a(e)}).then(function(e){if(e){var t=d.privateKeyFromAsn1(f.fromDer(p.util.createBuffer(e)));a(null,{privateKey:t,publicKey:d.setRsaPublicKey(t.n,t.e)})}});if(u('generateKey')&&u('exportKey')){var n=window.msCrypto.subtle.generateKey({name:'RSASSA-PKCS1-v1_5',modulusLength:e,publicExponent:l(t),hash:{name:'SHA-256'}},!0,['sign','verify']);return n.oncomplete=function(e){var t=e.target.result,r=window.msCrypto.subtle.exportKey('pkcs8',t.privateKey);r.oncomplete=function(e){var t=e.target.result,r=d.privateKeyFromAsn1(f.fromDer(p.util.createBuffer(t)));a(null,{privateKey:r,publicKey:d.setRsaPublicKey(r.n,r.e)})},r.onerror=function(e){a(e)}},void(n.onerror=function(e){a(e)})}}var s=d.rsa.createKeyPairGenerationState(e,t,r);return a?void i(s,r,a):(d.rsa.stepKeyPairGenerationState(s,0),s.keys)},d.setRsaPublicKey=d.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(e,t,n){if('string'==typeof t?t=t.toUpperCase():void 0===t&&(t='RSAES-PKCS1-V1_5'),'RSAES-PKCS1-V1_5'===t)t={encode:function(e,t,r){return a(e,t,2).getBytes()}};else if('RSA-OAEP'===t||'RSAES-OAEP'===t)t={encode:function(e,t){return p.pkcs1.encode_rsa_oaep(t,e,n)}};else if(['RAW','NONE','NULL',null].indexOf(t)!==-1)t={encode:function(e){return e}};else if('string'==typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var i=t.encode(e,r,!0);return d.rsa.encrypt(i,r,!0)},r.verify=function(e,t,a){'string'==typeof a?a=a.toUpperCase():void 0===a&&(a='RSASSA-PKCS1-V1_5'),'RSASSA-PKCS1-V1_5'===a?a={verify:function(e,t){t=n(t,r,!0);var a=f.fromDer(t);return e===a.value[1].value}}:'NONE'!==a&&'NULL'!==a&&null!==a||(a={verify:function(e,t){return t=n(t,r,!0),e===t}});var i=d.rsa.decrypt(t,r,!0,!1);return a.verify(e,i,r.n.bitLength())},r},d.setRsaPrivateKey=d.rsa.setPrivateKey=function(e,t,r,a,i,s,o,c){var u={n:e,e:t,d:r,p:a,q:i,dP:s,dQ:o,qInv:c};return u.decrypt=function(e,t,r){'string'==typeof t?t=t.toUpperCase():void 0===t&&(t='RSAES-PKCS1-V1_5');var a=d.rsa.decrypt(e,u,!1,!1);if('RSAES-PKCS1-V1_5'===t)t={decode:n};else if('RSA-OAEP'===t||'RSAES-OAEP'===t)t={decode:function(e,t){return p.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(['RAW','NONE','NULL',null].indexOf(t)===-1)throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(a,u,!1)},u.sign=function(e,t){var r=!1;'string'==typeof t&&(t=t.toUpperCase()),void 0===t||'RSASSA-PKCS1-V1_5'===t?(t={encode:E},r=1):'NONE'!==t&&'NULL'!==t&&null!==t||(t={encode:function(){return e}},r=1);var a=t.encode(e,u.n.bitLength());return d.rsa.encrypt(a,u,r)},u},d.wrapRsaPrivateKey=function(e){return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(0).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(d.oids.rsaEncryption).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,'')]),f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,f.toDer(e).getBytes())])},d.privateKeyFromAsn1=function(e){var t={},r=[];if(f.validate(e,g,t,r)&&(e=f.fromDer(p.util.createBuffer(t.privateKey))),t={},r=[],!f.validate(e,v,t,r)){var a=new Error('Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.');throw a.errors=r,a}var n,i,s,o,c,u,l,y;return n=p.util.createBuffer(t.privateKeyModulus).toHex(),i=p.util.createBuffer(t.privateKeyPublicExponent).toHex(),s=p.util.createBuffer(t.privateKeyPrivateExponent).toHex(),o=p.util.createBuffer(t.privateKeyPrime1).toHex(),c=p.util.createBuffer(t.privateKeyPrime2).toHex(),u=p.util.createBuffer(t.privateKeyExponent1).toHex(),l=p.util.createBuffer(t.privateKeyExponent2).toHex(),y=p.util.createBuffer(t.privateKeyCoefficient).toHex(),d.setRsaPrivateKey(new h(n,16),new h(i,16),new h(s,16),new h(o,16),new h(c,16),new h(u,16),new h(l,16),new h(y,16))},d.privateKeyToAsn1=d.privateKeyToRSAPrivateKey=function(e){return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,f.integerToDer(0).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.n)),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.e)),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.d)),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.p)),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.q)),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.dP)),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.dQ)),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.qInv))])},d.publicKeyFromAsn1=function(e){var t={},r=[];if(f.validate(e,C,t,r)){var a=f.derToOid(t.publicKeyOid);if(a!==d.oids.rsaEncryption){var n=new Error('Cannot read public key. Unknown OID.');throw n.oid=a,n}e=t.rsaPublicKey}if(r=[],!f.validate(e,m,t,r)){var n=new Error('Cannot read public key. ASN.1 object does not contain an RSAPublicKey.');throw n.errors=r,n}var i=p.util.createBuffer(t.publicKeyModulus).toHex(),s=p.util.createBuffer(t.publicKeyExponent).toHex();return d.setRsaPublicKey(new h(i,16),new h(s,16))},d.publicKeyToAsn1=d.publicKeyToSubjectPublicKeyInfo=function(e){return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(d.oids.rsaEncryption).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,'')]),f.create(f.Class.UNIVERSAL,f.Type.BITSTRING,!1,[d.publicKeyToRSAPublicKey(e)])])},d.publicKeyToRSAPublicKey=function(e){return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.n)),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,s(e.e))])}},function(e,t,r){var a=r(0);r(1),e.exports=a.cipher=a.cipher||{},a.cipher.algorithms=a.cipher.algorithms||{},a.cipher.createCipher=function(e,t){var r=e;if('string'==typeof r&&(r=a.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error('Unsupported algorithm: '+e);return new a.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},a.cipher.createDecipher=function(e,t){var r=e;if('string'==typeof r&&(r=a.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error('Unsupported algorithm: '+e);return new a.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},a.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),a.cipher.algorithms[e]=t},a.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in a.cipher.algorithms?a.cipher.algorithms[e]:null};var n=a.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};n.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=a.util.createBuffer(),this.output=e.output||a.util.createBuffer(),this.mode.start(t)},n.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},n.prototype.finish=function(e){!e||'ECB'!==this.mode.name&&'CBC'!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,(this._decrypt||!this.mode.pad||this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&(!this.mode.afterFinish||this.mode.afterFinish(this.output,t)))}},function(e,t,r){function a(e,t,r){this.data=[],null!=e&&('number'==typeof e?this.fromNumber(e,t,r):null==t&&'string'!=typeof e?this.fromString(e,256):this.fromString(e,t))}function n(){return new a(null)}function i(e,t,r,a,n,i){for(;--i>=0;){var s=t*this.data[e++]+r.data[a]+n;n=_Mathfloor2(s/67108864),r.data[a++]=67108863&s}return n}function s(e,t,r,a,n,i){for(var s=32767&t,o=t>>15;--i>=0;){var c=32767&this.data[e],u=this.data[e++]>>15,l=o*c+u*s;c=s*c+((32767&l)<<15)+r.data[a]+(1073741823&n),n=(c>>>30)+(l>>>15)+o*u+(n>>>30),r.data[a++]=1073741823&c}return n}function o(e,t,r,a,n,i){for(var s=16383&t,o=t>>14;--i>=0;){var c=16383&this.data[e],u=this.data[e++]>>14,l=o*c+u*s;c=s*c+((16383&l)<<14)+r.data[a]+n,n=(c>>28)+(l>>14)+o*u,r.data[a++]=268435455&c}return n}function c(e){return ct.charAt(e)}function u(e,t){var r=ut[e.charCodeAt(t)];return null==r?-1:r}function l(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function p(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function h(e){var t=n();return t.fromInt(e),t}function f(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,s=0;--n>=0;){var o=8==r?255&e[n]:u(e,n);o<0?'-'==e.charAt(n)&&(i=!0):(i=!1,0==s?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&a.ZERO.subTo(this,this)}function d(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function y(e){if(this.s<0)return'-'+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var a=(1<<t)-1,n=!1,i='',s=this.t,o=this.DB-s*this.DB%t,r;if(s-->0)for(o<this.DB&&(r=this.data[s]>>o)>0&&(n=!0,i=c(r));s>=0;)o<t?(r=(this.data[s]&(1<<o)-1)<<t-o,r|=this.data[--s]>>(o+=this.DB-t)):(r=this.data[s]>>(o-=t)&a,o<=0&&(o+=this.DB,--s)),r>0&&(n=!0),n&&(i+=c(r));return n?i:'0'}function g(){var e=n();return a.ZERO.subTo(this,e),e}function v(){return this.s<0?this.negate():this}function m(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(t=r-e.t,0!=t)return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0}function C(e){var r=1,t;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function E(){return this.t<=0?0:this.DB*(this.t-1)+C(this.data[this.t-1]^this.s&this.DM)}function S(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function T(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=_Mathmax3(this.t-e,0),t.s=this.s}function I(e,t){var a=e%this.DB,n=this.DB-a,i=(1<<n)-1,s=_Mathfloor2(e/this.DB),o=this.s<<a&this.DM,r;for(r=this.t-1;r>=0;--r)t.data[r+s+1]=this.data[r]>>n|o,o=(this.data[r]&i)<<a;for(r=s-1;r>=0;--r)t.data[r]=0;t.data[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()}function A(e,t){t.s=this.s;var r=_Mathfloor2(e/this.DB);if(r>=this.t)return void(t.t=0);var a=e%this.DB,n=this.DB-a,i=(1<<a)-1;t.data[0]=this.data[r]>>a;for(var s=r+1;s<this.t;++s)t.data[s-r-1]|=(this.data[s]&i)<<n,t.data[s-r]=this.data[s]>>a;a>0&&(t.data[this.t-r-1]|=(this.s&i)<<n),t.t=this.t-r,t.clamp()}function b(e,t){for(var r=0,a=0,n=_Mathmin4(e.t,this.t);r<n;)a+=this.data[r]-e.data[r],t.data[r++]=a&this.DM,a>>=this.DB;if(e.t<this.t){for(a-=e.s;r<this.t;)a+=this.data[r],t.data[r++]=a&this.DM,a>>=this.DB;a+=this.s}else{for(a+=this.s;r<e.t;)a-=e.data[r],t.data[r++]=a&this.DM,a>>=this.DB;a-=e.s}t.s=a<0?-1:0,a<-1?t.data[r++]=this.DV+a:a>0&&(t.data[r++]=a),t.t=r,t.clamp()}function B(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&a.ZERO.subTo(t,t)}function N(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var a=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,a,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function k(e,t,r){var i=e.abs();if(!(i.t<=0)){var s=this.abs();if(s.t<i.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=n());var o=n(),c=this.s,u=e.s,l=this.DB-C(i.data[i.t-1]);l>0?(i.lShiftTo(l,o),s.lShiftTo(l,r)):(i.copyTo(o),s.copyTo(r));var p=o.t,h=o.data[p-1];if(0!=h){var f=h*(1<<this.F1)+(p>1?o.data[p-2]>>this.F2:0),d=this.FV/f,y=(1<<this.F1)/f,g=1<<this.F2,v=r.t,m=v-p,E=null==t?n():t;for(o.dlShiftTo(m,E),r.compareTo(E)>=0&&(r.data[r.t++]=1,r.subTo(E,r)),a.ONE.dlShiftTo(p,E),E.subTo(o,o);o.t<p;)o.data[o.t++]=0;for(;--m>=0;){var S=r.data[--v]==h?this.DM:_Mathfloor2(r.data[v]*d+(r.data[v-1]+g)*y);if((r.data[v]+=o.am(0,S,r,m,0,p))<S)for(o.dlShiftTo(m,E),r.subTo(E,r);r.data[v]<--S;)r.subTo(E,r)}null!=t&&(r.drShiftTo(p,t),c!=u&&a.ZERO.subTo(t,t)),r.t=p,r.clamp(),l>0&&r.rShiftTo(l,r),c<0&&a.ZERO.subTo(r,r)}}}function R(e){var t=n();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(a.ZERO)>0&&e.subTo(t,t),t}function w(e){this.m=e}function L(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function _(e){return e}function U(e){e.divRemTo(this.m,null,e)}function D(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function P(e,t){e.squareTo(t),this.reduce(t)}function V(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function O(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function x(e){var t=n();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(a.ZERO)>0&&this.m.subTo(t,t),t}function K(e){var t=n();return e.copyTo(t),this.reduce(t),t}function M(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],a=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,a,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function F(e,t){e.squareTo(t),this.reduce(t)}function q(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function j(){return 0==(this.t>0?1&this.data[0]:this.s)}function H(e,t){if(e>4294967295||e<1)return a.ONE;var r=n(),i=n(),s=t.convert(this),o=C(e)-1;for(s.copyTo(r);--o>=0;)if(t.sqrTo(r,i),(e&1<<o)>0)t.mulTo(i,s,r);else{var c=r;r=i,i=c}return t.revert(r)}function G(e,t){var r;return r=e<256||t.isEven()?new w(t):new O(t),this.exp(e,r)}function Q(){var e=n();return this.copyTo(e),e}function z(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function W(){return 0==this.t?this.s:this.data[0]<<24>>24}function X(){return 0==this.t?this.s:this.data[0]<<16>>16}function Y(e){return _Mathfloor2(Math.LN2*this.DB/Math.log(e))}function Z(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function J(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return'0';var t=this.chunkSize(e),r=_Mathpow2(e,t),a=h(r),i=n(),s=n(),o='';for(this.divRemTo(a,i,s);i.signum()>0;)o=(r+s.intValue()).toString(e).substr(1)+o,i.divRemTo(a,i,s);return s.intValue().toString(e)+o}function $(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=_Mathpow2(t,r),i=!1,s=0,o=0,c=0;c<e.length;++c){var l=u(e,c);l<0?'-'==e.charAt(c)&&0==this.signum()&&(i=!0):(o=t*o+l,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(_Mathpow2(t,s)),this.dAddOffset(o,0)),i&&a.ZERO.subTo(this,this)}function ee(e,t,r){if(!('number'==typeof t)){var n=[],i=7&e;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}else if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(a.ONE.shiftLeft(e-1),ce,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(a.ONE.shiftLeft(e-1),this)}function te(){var e=this.t,t=[];t[0]=this.s;var a=this.DB-e*this.DB%8,n=0,r;if(e-->0)for(a<this.DB&&(r=this.data[e]>>a)!=(this.s&this.DM)>>a&&(t[n++]=r|this.s<<this.DB-a);e>=0;)a<8?(r=(this.data[e]&(1<<a)-1)<<8-a,r|=this.data[--e]>>(a+=this.DB-8)):(r=this.data[e]>>(a-=8)&255,a<=0&&(a+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==n&&(128&this.s)!=(128&r)&&++n,(n>0||r!=this.s)&&(t[n++]=r);return t}function re(e){return 0==this.compareTo(e)}function ae(e){return this.compareTo(e)<0?this:e}function ne(e){return this.compareTo(e)>0?this:e}function ie(e,t,r){var i=_Mathmin4(e.t,this.t),a,n;for(a=0;a<i;++a)r.data[a]=t(this.data[a],e.data[a]);if(e.t<this.t){for(n=e.s&this.DM,a=i;a<this.t;++a)r.data[a]=t(this.data[a],n);r.t=this.t}else{for(n=this.s&this.DM,a=i;a<e.t;++a)r.data[a]=t(n,e.data[a]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function se(e,t){return e&t}function oe(e){var t=n();return this.bitwiseTo(e,se,t),t}function ce(e,t){return e|t}function ue(e){var t=n();return this.bitwiseTo(e,ce,t),t}function le(e,t){return e^t}function pe(e){var t=n();return this.bitwiseTo(e,le,t),t}function he(e,t){return e&~t}function fe(e){var t=n();return this.bitwiseTo(e,he,t),t}function de(){for(var e=n(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function ye(e){var t=n();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function ge(e){var t=n();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function ve(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function me(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+ve(this.data[e]);return this.s<0?this.t*this.DB:-1}function Ce(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function Ee(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=Ce(this.data[r]^t);return e}function Se(e){var t=_Mathfloor2(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)}function Te(e,t){var r=a.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function Ie(e){return this.changeBit(e,ce)}function Ae(e){return this.changeBit(e,he)}function be(e){return this.changeBit(e,le)}function Be(e,t){for(var r=0,a=0,n=_Mathmin4(e.t,this.t);r<n;)a+=this.data[r]+e.data[r],t.data[r++]=a&this.DM,a>>=this.DB;if(e.t<this.t){for(a+=e.s;r<this.t;)a+=this.data[r],t.data[r++]=a&this.DM,a>>=this.DB;a+=this.s}else{for(a+=this.s;r<e.t;)a+=e.data[r],t.data[r++]=a&this.DM,a>>=this.DB;a+=e.s}t.s=a<0?-1:0,a>0?t.data[r++]=a:a<-1&&(t.data[r++]=this.DV+a),t.t=r,t.clamp()}function Ne(e){var t=n();return this.addTo(e,t),t}function ke(e){var t=n();return this.subTo(e,t),t}function Re(e){var t=n();return this.multiplyTo(e,t),t}function we(e){var t=n();return this.divRemTo(e,t,null),t}function Le(e){var t=n();return this.divRemTo(e,null,t),t}function _e(e){var t=n(),r=n();return this.divRemTo(e,t,r),[t,r]}function Ue(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function De(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Pe(){}function Ve(e){return e}function Oe(e,t,r){e.multiplyTo(t,r)}function xe(e,t){e.squareTo(t)}function Ke(e){return this.exp(e,new Pe)}function Me(e,t,r){var a=_Mathmin4(this.t+e.t,t);for(r.s=0,r.t=a;a>0;)r.data[--a]=0;var n;for(n=r.t-this.t;a<n;++a)r.data[a+this.t]=this.am(0,e.data[a],r,a,0,this.t);for(n=_Mathmin4(e.t,t);a<n;++a)this.am(0,e.data[a],r,a,0,t-a);r.clamp()}function Fe(e,t,r){--t;var a=r.t=this.t+e.t-t;for(r.s=0;--a>=0;)r.data[a]=0;for(a=_Mathmax3(t-this.t,0);a<e.t;++a)r.data[this.t+a-t]=this.am(t-a,e.data[a],r,0,0,this.t+a-t);r.clamp(),r.drShiftTo(1,r)}function qe(e){this.r2=n(),this.q3=n(),a.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function je(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=n();return e.copyTo(t),this.reduce(t),t}function He(e){return e}function Ge(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Qe(e,t){e.squareTo(t),this.reduce(t)}function ze(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function We(e,t){var i=e.bitLength(),s=h(1),r,a;if(i<=0)return s;r=i<18?1:i<48?3:i<144?4:i<768?5:6,a=i<8?new w(t):t.isEven()?new qe(t):new O(t);var o=[],c=3,u=r-1,l=(1<<r)-1;if(o[1]=a.convert(this),r>1){var p=n();for(a.sqrTo(o[1],p);c<=l;)o[c]=n(),a.mulTo(p,o[c-2],o[c]),c+=2}var y=e.t-1,g=!0,v=n(),f,d;for(i=C(e.data[y])-1;y>=0;){for(i>=u?f=e.data[y]>>i-u&l:(f=(e.data[y]&(1<<i+1)-1)<<u-i,y>0&&(f|=e.data[y-1]>>this.DB+i-u)),c=r;0==(1&f);)f>>=1,--c;if((i-=c)<0&&(i+=this.DB,--y),g)o[f].copyTo(s),g=!1;else{for(;c>1;)a.sqrTo(s,v),a.sqrTo(v,s),c-=2;c>0?a.sqrTo(s,v):(d=s,s=v,v=d),a.mulTo(v,o[f],s)}for(;y>=0&&0==(e.data[y]&1<<i);)a.sqrTo(s,v),d=s,s=v,v=d,--i<0&&(i=this.DB-1,--y)}return a.revert(s)}function Xe(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var a=t;t=r,r=a}var n=t.getLowestSetBit(),i=r.getLowestSetBit();if(i<0)return t;for(n<i&&(i=n),i>0&&(t.rShiftTo(i,t),r.rShiftTo(i,r));t.signum()>0;)(n=t.getLowestSetBit())>0&&t.rShiftTo(n,t),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return i>0&&r.lShiftTo(i,r),r}function Ye(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var a=this.t-1;a>=0;--a)r=(t*r+this.data[a])%e;return r}function Ze(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return a.ZERO;for(var r=e.clone(),n=this.clone(),i=h(1),s=h(0),o=h(0),c=h(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&c.isEven()||(o.addTo(this,o),c.subTo(e,c)),o.rShiftTo(1,o)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(o,i),s.subTo(c,s)):(n.subTo(r,n),t&&o.subTo(i,o),c.subTo(s,c))}return 0==n.compareTo(a.ONE)?c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c:a.ZERO}function Je(e){var r=this.abs(),t;if(1==r.t&&r.data[0]<=lt[lt.length-1]){for(t=0;t<lt.length;++t)if(r.data[0]==lt[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<lt.length;){for(var a=lt[t],n=t+1;n<lt.length&&a<pt;)a*=lt[n++];for(a=r.modInt(a);t<n;)if(a%lt[t++]==0)return!1}return r.millerRabin(e)}function $e(e){var t=this.subtract(a.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var i=t.shiftRight(r),s=et(),o=0,n;o<e;++o){do n=new a(this.bitLength(),s);while(n.compareTo(a.ONE)<=0||n.compareTo(t)>=0);var c=n.modPow(i,this);if(0!=c.compareTo(a.ONE)&&0!=c.compareTo(t)){for(var u=1;u++<r&&0!=c.compareTo(t);)if(c=c.modPowInt(2,this),0==c.compareTo(a.ONE))return!1;if(0!=c.compareTo(t))return!1}}return!0}function et(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=_Mathfloor2(256*Math.random())}}}var tt=r(0);e.exports=tt.jsbn=tt.jsbn||{};var at=0xdeadbeefcafe,nt=15715070==(16777215&at),rt;tt.jsbn.BigInteger=a,'undefined'==typeof navigator?(a.prototype.am=o,rt=28):'Microsoft Internet Explorer'==navigator.appName?(a.prototype.am=s,rt=30):'Netscape'!=navigator.appName?(a.prototype.am=i,rt=26):(a.prototype.am=o,rt=28),a.prototype.DB=rt,a.prototype.DM=(1<<rt)-1,a.prototype.DV=1<<rt;var it=52;a.prototype.FV=4503599627370496,a.prototype.F1=it-rt,a.prototype.F2=2*rt-it;var ct='0123456789abcdefghijklmnopqrstuvwxyz',ut=[],st,ot;for(st='0'.charCodeAt(0),ot=0;ot<=9;++ot)ut[st++]=ot;for(st='a'.charCodeAt(0),ot=10;ot<36;++ot)ut[st++]=ot;for(st='A'.charCodeAt(0),ot=10;ot<36;++ot)ut[st++]=ot;w.prototype.convert=L,w.prototype.revert=_,w.prototype.reduce=U,w.prototype.mulTo=D,w.prototype.sqrTo=P,O.prototype.convert=x,O.prototype.revert=K,O.prototype.reduce=M,O.prototype.mulTo=q,O.prototype.sqrTo=F,a.prototype.copyTo=l,a.prototype.fromInt=p,a.prototype.fromString=f,a.prototype.clamp=d,a.prototype.dlShiftTo=S,a.prototype.drShiftTo=T,a.prototype.lShiftTo=I,a.prototype.rShiftTo=A,a.prototype.subTo=b,a.prototype.multiplyTo=B,a.prototype.squareTo=N,a.prototype.divRemTo=k,a.prototype.invDigit=V,a.prototype.isEven=j,a.prototype.exp=H,a.prototype.toString=y,a.prototype.negate=g,a.prototype.abs=v,a.prototype.compareTo=m,a.prototype.bitLength=E,a.prototype.mod=R,a.prototype.modPowInt=G,a.ZERO=h(0),a.ONE=h(1),Pe.prototype.convert=Ve,Pe.prototype.revert=Ve,Pe.prototype.mulTo=Oe,Pe.prototype.sqrTo=xe,qe.prototype.convert=je,qe.prototype.revert=He,qe.prototype.reduce=Ge,qe.prototype.mulTo=ze,qe.prototype.sqrTo=Qe;var lt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],pt=(1<<26)/lt[lt.length-1];a.prototype.chunkSize=Y,a.prototype.toRadix=J,a.prototype.fromRadix=$,a.prototype.fromNumber=ee,a.prototype.bitwiseTo=ie,a.prototype.changeBit=Te,a.prototype.addTo=Be,a.prototype.dMultiply=Ue,a.prototype.dAddOffset=De,a.prototype.multiplyLowerTo=Me,a.prototype.multiplyUpperTo=Fe,a.prototype.modInt=Ye,a.prototype.millerRabin=$e,a.prototype.clone=Q,a.prototype.intValue=z,a.prototype.byteValue=W,a.prototype.shortValue=X,a.prototype.signum=Z,a.prototype.toByteArray=te,a.prototype.equals=re,a.prototype.min=ae,a.prototype.max=ne,a.prototype.and=oe,a.prototype.or=ue,a.prototype.xor=pe,a.prototype.andNot=fe,a.prototype.not=de,a.prototype.shiftLeft=ye,a.prototype.shiftRight=ge,a.prototype.getLowestSetBit=me,a.prototype.bitCount=Ee,a.prototype.testBit=Se,a.prototype.setBit=Ie,a.prototype.clearBit=Ae,a.prototype.flipBit=be,a.prototype.add=Ne,a.prototype.subtract=ke,a.prototype.multiply=Re,a.prototype.divide=we,a.prototype.remainder=Le,a.prototype.divideAndRemainder=_e,a.prototype.modPow=We,a.prototype.modInverse=Ze,a.prototype.pow=Ke,a.prototype.gcd=Xe,a.prototype.isProbablePrime=Je},function(e,t,r){function a(){o='\x80',o+=i.util.fillString('\0',64),c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],u=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],l=Array(64);for(var e=0;e<64;++e)l[e]=_Mathfloor2(4294967296*_Mathabs(Math.sin(e+1)));p=!0}function n(e,t,r){for(var d=r.length(),a,n,i,s,o,p,h,f;d>=64;){for(n=e.h0,i=e.h1,s=e.h2,o=e.h3,f=0;f<16;++f)t[f]=r.getInt32Le(),p=o^i&(s^o),a=n+p+l[f]+t[f],h=u[f],n=o,o=s,s=i,i+=a<<h|a>>>32-h;for(;f<32;++f)p=s^o&(i^s),a=n+p+l[f]+t[c[f]],h=u[f],n=o,o=s,s=i,i+=a<<h|a>>>32-h;for(;f<48;++f)p=i^s^o,a=n+p+l[f]+t[c[f]],h=u[f],n=o,o=s,s=i,i+=a<<h|a>>>32-h;for(;f<64;++f)p=s^(i|~o),a=n+p+l[f]+t[c[f]],h=u[f],n=o,o=s,s=i,i+=a<<h|a>>>32-h;e.h0=e.h0+n|0,e.h1=e.h1+i|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,d-=64}}var i=r(0);r(4),r(1);var s=e.exports=i.md5=i.md5||{};i.md.md5=i.md.algorithms.md5=s,s.create=function(){p||a();var e=null,t=i.util.createBuffer(),r=Array(16),s={algorithm:'md5',blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return s.start=function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var r=s.messageLengthSize/4,a=0;a<r;++a)s.fullMessageLength.push(0);return t=i.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},s},s.start(),s.update=function(a,o){'utf8'===o&&(a=i.util.encodeUtf8(a));var c=a.length;s.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var u=s.fullMessageLength.length-1;u>=0;--u)s.fullMessageLength[u]+=c[1],c[1]=c[0]+(s.fullMessageLength[u]/4294967296>>>0),s.fullMessageLength[u]>>>=0,c[0]=c[1]/4294967296>>>0;return t.putBytes(a),n(e,r,t),(t.read>2048||0===t.length())&&t.compact(),s},s.digest=function(){var a=i.util.createBuffer();a.putBytes(t.bytes());var c=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize,u=c&s.blockLength-1;a.putBytes(o.substr(0,s.blockLength-u));for(var p=0,h=s.fullMessageLength.length-1,l;h>=0;--h)l=8*s.fullMessageLength[h]+p,p=l/4294967296>>>0,a.putInt32Le(l>>>0);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};n(f,r,a);var d=i.util.createBuffer();return d.putInt32Le(f.h0),d.putInt32Le(f.h1),d.putInt32Le(f.h2),d.putInt32Le(f.h3),d},s};var o=null,c=null,u=null,l=null,p=!1},function(e,t,r){var a=r(0);r(8),r(4),r(1);var i=a.pkcs5=a.pkcs5||{},n;a.util.isNodejs&&!a.options.usePureJavaScript&&(n=r(32)),e.exports=a.pbkdf2=i.pbkdf2=function(e,t,r,i,s,o){function c(){return C>h?o(null,m):(d.start(null,null),d.update(t),d.update(a.util.int32ToBytes(C)),y=v=d.digest().getBytes(),E=2,void u())}function u(){return E<=r?(d.start(null,null),d.update(v),g=d.digest().getBytes(),y=a.util.xorBytes(y,g,l),v=g,++E,a.util.setImmediate(u)):(m+=C<h?y:y.substr(0,f),++C,void c())}if('function'==typeof s&&(o=s,s=null),a.util.isNodejs&&!a.options.usePureJavaScript&&n.pbkdf2&&(null===s||'object'!=typeof s)&&(n.pbkdf2Sync.length>4||!s||'sha1'===s))return'string'!=typeof s&&(s='sha1'),e=new Buffer(e,'binary'),t=new Buffer(t,'binary'),o?4===n.pbkdf2Sync.length?n.pbkdf2(e,t,r,i,function(e,t){return e?o(e):void o(null,t.toString('binary'))}):n.pbkdf2(e,t,r,i,s,function(e,t){return e?o(e):void o(null,t.toString('binary'))}):4===n.pbkdf2Sync.length?n.pbkdf2Sync(e,t,r,i).toString('binary'):n.pbkdf2Sync(e,t,r,i,s).toString('binary');if('undefined'!=typeof s&&null!==s||(s='sha1'),'string'==typeof s){if(!(s in a.md.algorithms))throw new Error('Unknown hash algorithm: '+s);s=a.md[s].create()}var l=s.digestLength;if(i>4294967295*l){var p=new Error('Derived key is too long.');if(o)return o(p);throw p}var h=_Mathceil3(i/l),f=i-(h-1)*l,d=a.hmac.create();d.start(s,e);var m='',y,g,v;if(!o){for(var C=1;C<=h;++C){d.start(null,null),d.update(t),d.update(a.util.int32ToBytes(C)),y=v=d.digest().getBytes();for(var E=2;E<=r;++E)d.start(null,null),d.update(v),g=d.digest().getBytes(),y=a.util.xorBytes(y,g,l),v=g;m+=C<h?y:y.substr(0,f)}return m}var C=1,E;c()}},function(e,t,r){var a=r(0);r(2),r(1);var n=e.exports=a.pss=a.pss||{};n.create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,r=e.mgf,n=t.digestLength,i=e.salt||null;'string'==typeof i&&(i=a.util.createBuffer(i));var s;if('saltLength'in e)s=e.saltLength;else{if(null===i)throw new Error('Salt length not specified or specific salt not given.');s=i.length()}if(null!==i&&i.length()!==s)throw new Error('Given salt length does not match length of given salt.');var o=e.prng||a.random,c={};return c.encode=function(e,c){var l=c-1,p=_Mathceil3(l/8),h=e.digest().getBytes(),u;if(p<n+s+2)throw new Error('Message is too long to encrypt.');var f;f=null===i?o.getBytesSync(s):i.bytes();var d=new a.util.ByteBuffer;d.fillWithByte(0,8),d.putBytes(h),d.putBytes(f),t.start(),t.update(d.getBytes());var y=t.digest().getBytes(),g=new a.util.ByteBuffer;g.fillWithByte(0,p-s-n-2),g.putByte(1),g.putBytes(f);var v=g.getBytes(),m=p-n-1,C=r.generate(y,m),E='';for(u=0;u<m;u++)E+=_StringfromCharCode2(v.charCodeAt(u)^C.charCodeAt(u));var S=65280>>8*p-l&255;return E=_StringfromCharCode2(E.charCodeAt(0)&~S)+E.substr(1),E+y+'\xBC'},c.verify=function(e,i,o){var u=o-1,l=_Mathceil3(u/8),c;if(i=i.substr(-l),l<n+s+2)throw new Error('Inconsistent parameters to PSS signature verification.');if(188!==i.charCodeAt(l-1))throw new Error('Encoded message does not end in 0xBC.');var p=l-n-1,h=i.substr(0,p),f=i.substr(p,n),d=65280>>8*l-u&255;if(0!==(h.charCodeAt(0)&d))throw new Error('Bits beyond keysize not zero as expected.');var y=r.generate(f,p),g='';for(c=0;c<p;c++)g+=_StringfromCharCode2(h.charCodeAt(c)^y.charCodeAt(c));g=_StringfromCharCode2(g.charCodeAt(0)&~d)+g.substr(1);var v=l-n-s-2;for(c=0;c<v;c++)if(0!==g.charCodeAt(c))throw new Error('Leftmost octets not zero as expected');if(1!==g.charCodeAt(v))throw new Error('Inconsistent PSS signature, 0x01 marker not found');var m=g.substr(-s),C=new a.util.ByteBuffer;C.fillWithByte(0,8),C.putBytes(e),C.putBytes(m),t.start(),t.update(C.getBytes());var E=t.digest().getBytes();return f===E},c}},function(e,t,r){function a(e,t){'string'==typeof t&&(t={shortName:t});for(var a=null,n=0,r;null===a&&n<e.attributes.length;++n)r=e.attributes[n],t.type&&t.type===r.type?a=r:t.name&&t.name===r.name?a=r:t.shortName&&t.shortName===r.shortName&&(a=r);return a}function n(e){for(var a=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]),n=e.attributes,i=0,t,r;i<n.length;++i){t=n[i];var s=t.value,o=l.Type.PRINTABLESTRING;'valueTagClass'in t&&(o=t.valueTagClass,o===l.Type.UTF8&&(s=u.util.encodeUtf8(s))),r=l.create(l.Class.UNIVERSAL,l.Type.SET,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(t.type).getBytes()),l.create(l.Class.UNIVERSAL,o,!1,s)])]),a.value.push(r)}return a}function i(e){for(var r=0,t;r<e.length;++r){if(t=e[r],'undefined'==typeof t.name&&(t.type&&t.type in p.oids?t.name=p.oids[t.type]:t.shortName&&t.shortName in f&&(t.name=p.oids[f[t.shortName]])),'undefined'==typeof t.type){if(!(t.name&&t.name in p.oids)){var a=new Error('Attribute type not specified.');throw a.attribute=t,a}t.type=p.oids[t.name]}if('undefined'==typeof t.shortName&&t.name&&t.name in f&&(t.shortName=f[t.name]),t.type===h.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=l.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var n=0;n<t.extensions.length;++n)t.value.push(p.certificateExtensionToAsn1(s(t.extensions[n])))}if('undefined'==typeof t.value){var a=new Error('Attribute value not specified.');throw a.attribute=t,a}}}function s(e,t){if(t=t||{},'undefined'==typeof e.name&&e.id&&e.id in p.oids&&(e.name=p.oids[e.id]),'undefined'==typeof e.id){if(!(e.name&&e.name in p.oids)){var r=new Error('Extension ID not specified.');throw r.extension=e,r}e.id=p.oids[e.name]}if('undefined'!=typeof e.value)return e;if('keyUsage'===e.name){var a=0,i=0,s=0;e.digitalSignature&&(i|=128,a=7),e.nonRepudiation&&(i|=64,a=6),e.keyEncipherment&&(i|=32,a=5),e.dataEncipherment&&(i|=16,a=4),e.keyAgreement&&(i|=8,a=3),e.keyCertSign&&(i|=4,a=2),e.cRLSign&&(i|=2,a=1),e.encipherOnly&&(i|=1,a=0),e.decipherOnly&&(s|=128,a=7);var o=_StringfromCharCode2(a);0===s?0!==i&&(o+=_StringfromCharCode2(i)):o+=_StringfromCharCode2(i)+_StringfromCharCode2(s),e.value=l.create(l.Class.UNIVERSAL,l.Type.BITSTRING,!1,o)}else if('basicConstraints'===e.name)e.value=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(l.create(l.Class.UNIVERSAL,l.Type.BOOLEAN,!1,'\xFF')),'pathLenConstraint'in e&&e.value.value.push(l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(e.pathLenConstraint).getBytes()));else if('extKeyUsage'===e.name){e.value=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]);var c=e.value.value;for(var f in e)e[f]===!0&&(f in h?c.push(l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(h[f]).getBytes())):f.indexOf('.')!==-1&&c.push(l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(f).getBytes())))}else if('nsCertType'===e.name){var a=0,i=0;e.client&&(i|=128,a=7),e.server&&(i|=64,a=6),e.email&&(i|=32,a=5),e.objsign&&(i|=16,a=4),e.reserved&&(i|=8,a=3),e.sslCA&&(i|=4,a=2),e.emailCA&&(i|=2,a=1),e.objCA&&(i|=1,a=0);var o=_StringfromCharCode2(a);0!==i&&(o+=_StringfromCharCode2(i)),e.value=l.create(l.Class.UNIVERSAL,l.Type.BITSTRING,!1,o)}else if('subjectAltName'===e.name||'issuerAltName'===e.name){e.value=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]);for(var y=0,d;y<e.altNames.length;++y){d=e.altNames[y];var o=d.value;if(!(7===d.type&&d.ip))8===d.type&&(o=d.oid?l.oidToDer(l.oidToDer(d.oid)):l.oidToDer(o));else if(o=u.util.bytesFromIP(d.ip),null===o){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}e.value.value.push(l.create(l.Class.CONTEXT_SPECIFIC,d.type,!1,o))}}else if('subjectKeyIdentifier'===e.name&&t.cert){var g=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=g.toHex(),e.value=l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,g.getBytes())}else if('authorityKeyIdentifier'===e.name&&t.cert){e.value=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]);var c=e.value.value;if(e.keyIdentifier){var v=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;c.push(l.create(l.Class.CONTEXT_SPECIFIC,0,!1,v))}if(e.authorityCertIssuer){var m=[l.create(l.Class.CONTEXT_SPECIFIC,4,!0,[n(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];c.push(l.create(l.Class.CONTEXT_SPECIFIC,1,!0,m))}if(e.serialNumber){var C=u.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);c.push(l.create(l.Class.CONTEXT_SPECIFIC,2,!1,C))}}else if('cRLDistributionPoints'===e.name){e.value=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]);for(var c=e.value.value,E=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]),S=l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[]),y=0,d;y<e.altNames.length;++y){d=e.altNames[y];var o=d.value;if(!(7===d.type&&d.ip))8===d.type&&(o=d.oid?l.oidToDer(l.oidToDer(d.oid)):l.oidToDer(o));else if(o=u.util.bytesFromIP(d.ip),null===o){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}S.value.push(l.create(l.Class.CONTEXT_SPECIFIC,d.type,!1,o))}E.value.push(l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[S])),c.push(E)}if('undefined'==typeof e.value){var r=new Error('Extension value not specified.');throw r.extension=e,r}return e}function o(e,t){switch(e){case h['RSASSA-PSS']:var r=[];return void 0!==t.hash.algorithmOid&&r.push(l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(t.hash.algorithmOid).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,'')])])),void 0!==t.mgf.algorithmOid&&r.push(l.create(l.Class.CONTEXT_SPECIFIC,1,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(t.mgf.algorithmOid).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(t.mgf.hash.algorithmOid).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,'')])])])),void 0!==t.saltLength&&r.push(l.create(l.Class.CONTEXT_SPECIFIC,2,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(t.saltLength).getBytes())])),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,r);default:return l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,'');}}function c(e){var t=l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var r=e.attributes,a=0;a<r.length;++a){var n=r[a],i=n.value,s=l.Type.UTF8;'valueTagClass'in n&&(s=n.valueTagClass),s===l.Type.UTF8&&(i=u.util.encodeUtf8(i));var o=!1;'valueConstructed'in n&&(o=n.valueConstructed);var c=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(n.type).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SET,!0,[l.create(l.Class.UNIVERSAL,s,o,i)])]);t.value.push(c)}return t}var u=r(0);r(5),r(3),r(10),r(4),r(37),r(6),r(7),r(16),r(11),r(1);var l=u.asn1,p=e.exports=u.pki=u.pki||{},h=p.oids,f={};f.CN=h.commonName,f.commonName='CN',f.C=h.countryName,f.countryName='C',f.L=h.localityName,f.localityName='L',f.ST=h.stateOrProvinceName,f.stateOrProvinceName='ST',f.O=h.organizationName,f.organizationName='O',f.OU=h.organizationalUnitName,f.organizationalUnitName='OU',f.E=h.emailAddress,f.emailAddress='E';var d=u.pki.rsa.publicKeyValidator,y={name:'Certificate',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:'Certificate.TBSCertificate',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,captureAsn1:'tbsCertificate',value:[{name:'Certificate.TBSCertificate.version',tagClass:l.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:'Certificate.TBSCertificate.version.integer',tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:'certVersion'}]},{name:'Certificate.TBSCertificate.serialNumber',tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:'certSerialNumber'},{name:'Certificate.TBSCertificate.signature',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:'Certificate.TBSCertificate.signature.algorithm',tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:'certinfoSignatureOid'},{name:'Certificate.TBSCertificate.signature.parameters',tagClass:l.Class.UNIVERSAL,optional:!0,captureAsn1:'certinfoSignatureParams'}]},{name:'Certificate.TBSCertificate.issuer',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,captureAsn1:'certIssuer'},{name:'Certificate.TBSCertificate.validity',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:'Certificate.TBSCertificate.validity.notBefore (utc)',tagClass:l.Class.UNIVERSAL,type:l.Type.UTCTIME,constructed:!1,optional:!0,capture:'certValidity1UTCTime'},{name:'Certificate.TBSCertificate.validity.notBefore (generalized)',tagClass:l.Class.UNIVERSAL,type:l.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:'certValidity2GeneralizedTime'},{name:'Certificate.TBSCertificate.validity.notAfter (utc)',tagClass:l.Class.UNIVERSAL,type:l.Type.UTCTIME,constructed:!1,optional:!0,capture:'certValidity3UTCTime'},{name:'Certificate.TBSCertificate.validity.notAfter (generalized)',tagClass:l.Class.UNIVERSAL,type:l.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:'certValidity4GeneralizedTime'}]},{name:'Certificate.TBSCertificate.subject',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,captureAsn1:'certSubject'},d,{name:'Certificate.TBSCertificate.issuerUniqueID',tagClass:l.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:'Certificate.TBSCertificate.issuerUniqueID.id',tagClass:l.Class.UNIVERSAL,type:l.Type.BITSTRING,constructed:!1,captureBitStringValue:'certIssuerUniqueId'}]},{name:'Certificate.TBSCertificate.subjectUniqueID',tagClass:l.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:'Certificate.TBSCertificate.subjectUniqueID.id',tagClass:l.Class.UNIVERSAL,type:l.Type.BITSTRING,constructed:!1,captureBitStringValue:'certSubjectUniqueId'}]},{name:'Certificate.TBSCertificate.extensions',tagClass:l.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:'certExtensions',optional:!0}]},{name:'Certificate.signatureAlgorithm',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:'Certificate.signatureAlgorithm.algorithm',tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:'certSignatureOid'},{name:'Certificate.TBSCertificate.signature.parameters',tagClass:l.Class.UNIVERSAL,optional:!0,captureAsn1:'certSignatureParams'}]},{name:'Certificate.signatureValue',tagClass:l.Class.UNIVERSAL,type:l.Type.BITSTRING,constructed:!1,captureBitStringValue:'certSignature'}]},g={name:'rsapss',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:'rsapss.hashAlgorithm',tagClass:l.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:'rsapss.hashAlgorithm.AlgorithmIdentifier',tagClass:l.Class.UNIVERSAL,type:l.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:'rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm',tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:'hashOid'}]}]},{name:'rsapss.maskGenAlgorithm',tagClass:l.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:'rsapss.maskGenAlgorithm.AlgorithmIdentifier',tagClass:l.Class.UNIVERSAL,type:l.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:'rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm',tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:'maskGenOid'},{name:'rsapss.maskGenAlgorithm.AlgorithmIdentifier.params',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:'rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm',tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:'maskGenHashOid'}]}]}]},{name:'rsapss.saltLength',tagClass:l.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:'rsapss.saltLength.saltLength',tagClass:l.Class.UNIVERSAL,type:l.Class.INTEGER,constructed:!1,capture:'saltLength'}]},{name:'rsapss.trailerField',tagClass:l.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:'rsapss.trailer.trailer',tagClass:l.Class.UNIVERSAL,type:l.Class.INTEGER,constructed:!1,capture:'trailer'}]}]},v={name:'CertificationRequestInfo',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,captureAsn1:'certificationRequestInfo',value:[{name:'CertificationRequestInfo.integer',tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:'certificationRequestInfoVersion'},{name:'CertificationRequestInfo.subject',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,captureAsn1:'certificationRequestInfoSubject'},d,{name:'CertificationRequestInfo.attributes',tagClass:l.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:'certificationRequestInfoAttributes',value:[{name:'CertificationRequestInfo.attributes',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:'CertificationRequestInfo.attributes.type',tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1},{name:'CertificationRequestInfo.attributes.value',tagClass:l.Class.UNIVERSAL,type:l.Type.SET,constructed:!0}]}]}]},m={name:'CertificationRequest',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,captureAsn1:'csr',value:[v,{name:'CertificationRequest.signatureAlgorithm',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:'CertificationRequest.signatureAlgorithm.algorithm',tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:'csrSignatureOid'},{name:'CertificationRequest.signatureAlgorithm.parameters',tagClass:l.Class.UNIVERSAL,optional:!0,captureAsn1:'csrSignatureParams'}]},{name:'CertificationRequest.signature',tagClass:l.Class.UNIVERSAL,type:l.Type.BITSTRING,constructed:!1,captureBitStringValue:'csrSignature'}]};p.RDNAttributesAsArray=function(e,t){for(var i=[],s=0,r,a,n;s<e.value.length;++s){r=e.value[s];for(var o=0;o<r.value.length;++o)n={},a=r.value[o],n.type=l.derToOid(a.value[0].value),n.value=a.value[1].value,n.valueTagClass=a.value[1].type,n.type in h&&(n.name=h[n.type],n.name in f&&(n.shortName=f[n.name])),t&&(t.update(n.type),t.update(n.value)),i.push(n)}return i},p.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var a=e[r],n=l.derToOid(a.value[0].value),i=a.value[1].value,s=0;s<i.length;++s){var o={};if(o.type=n,o.value=i[s].value,o.valueTagClass=i[s].type,o.type in h&&(o.name=h[o.type],o.name in f&&(o.shortName=f[o.name])),o.type===h.extensionRequest){o.extensions=[];for(var c=0;c<o.value.length;++c)o.extensions.push(p.certificateExtensionFromAsn1(o.value[c]))}t.push(o)}return t};var C=function(e,t,r){var a={};if(e!==h['RSASSA-PSS'])return a;r&&(a={hash:{algorithmOid:h.sha1},mgf:{algorithmOid:h.mgf1,hash:{algorithmOid:h.sha1}},saltLength:20});var n={},i=[];if(!l.validate(t,g,n,i)){var s=new Error('Cannot read RSASSA-PSS parameter block.');throw s.errors=i,s}return void 0!==n.hashOid&&(a.hash=a.hash||{},a.hash.algorithmOid=l.derToOid(n.hashOid)),void 0!==n.maskGenOid&&(a.mgf=a.mgf||{},a.mgf.algorithmOid=l.derToOid(n.maskGenOid),a.mgf.hash=a.mgf.hash||{},a.mgf.hash.algorithmOid=l.derToOid(n.maskGenHashOid)),void 0!==n.saltLength&&(a.saltLength=n.saltLength.charCodeAt(0)),a};p.certificateFromPem=function(e,t,r){var a=u.pem.decode(e)[0];if('CERTIFICATE'!==a.type&&'X509 CERTIFICATE'!==a.type&&'TRUSTED CERTIFICATE'!==a.type){var n=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw n.headerType=a.type,n}if(a.procType&&'ENCRYPTED'===a.procType.type)throw new Error('Could not convert certificate from PEM; PEM is encrypted.');var i=l.fromDer(a.body,r);return p.certificateFromAsn1(i,t)},p.certificateToPem=function(e,t){var r={type:'CERTIFICATE',body:l.toDer(p.certificateToAsn1(e)).getBytes()};return u.pem.encode(r,{maxline:t})},p.publicKeyFromPem=function(e){var t=u.pem.decode(e)[0];if('PUBLIC KEY'!==t.type&&'RSA PUBLIC KEY'!==t.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&'ENCRYPTED'===t.procType.type)throw new Error('Could not convert public key from PEM; PEM is encrypted.');var a=l.fromDer(t.body);return p.publicKeyFromAsn1(a)},p.publicKeyToPem=function(e,t){var r={type:'PUBLIC KEY',body:l.toDer(p.publicKeyToAsn1(e)).getBytes()};return u.pem.encode(r,{maxline:t})},p.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:'RSA PUBLIC KEY',body:l.toDer(p.publicKeyToRSAPublicKey(e)).getBytes()};return u.pem.encode(r,{maxline:t})},p.getPublicKeyFingerprint=function(e,t){t=t||{};var a=t.md||u.md.sha1.create(),n=t.type||'RSAPublicKey',r;switch(n){case'RSAPublicKey':r=l.toDer(p.publicKeyToRSAPublicKey(e)).getBytes();break;case'SubjectPublicKeyInfo':r=l.toDer(p.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".');}a.start(),a.update(r);var i=a.digest();if('hex'===t.encoding){var s=i.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}if('binary'===t.encoding)return i.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return i},p.certificationRequestFromPem=function(e,t,r){var a=u.pem.decode(e)[0];if('CERTIFICATE REQUEST'!==a.type){var n=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw n.headerType=a.type,n}if(a.procType&&'ENCRYPTED'===a.procType.type)throw new Error('Could not convert certification request from PEM; PEM is encrypted.');var i=l.fromDer(a.body,r);return p.certificationRequestFromAsn1(i,t)},p.certificationRequestToPem=function(e,t){var r={type:'CERTIFICATE REQUEST',body:l.toDer(p.certificationRequestToAsn1(e)).getBytes()};return u.pem.encode(r,{maxline:t})},p.createCertificate=function(){var e={};return e.version=2,e.serialNumber='00',e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return a(e.issuer,t)},e.issuer.addField=function(t){i([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return a(e.subject,t)},e.subject.addField=function(t){i([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){i(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){i(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)s(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){'string'==typeof t&&(t={name:t});for(var a=null,n=0,r;null===a&&n<e.extensions.length;++n)r=e.extensions[n],t.id&&r.id===t.id?a=r:t.name&&r.name===t.name&&(a=r);return a},e.sign=function(t,r){e.md=r||u.md.sha1.create();var a=h[e.md.algorithm+'WithRSAEncryption'];if(!a){var n=new Error('Could not compute certificate digest. Unknown message digest algorithm OID.');throw n.algorithm=e.md.algorithm,n}e.signatureOid=e.siginfo.algorithmOid=a,e.tbsCertificate=p.getTBSCertificate(e);var i=l.toDer(e.tbsCertificate);e.md.update(i.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var a=t.issuer,n=e.subject,i=new Error('The parent certificate did not issue the given child certificate; the child certificate\'s issuer does not match the parent\'s subject.');throw i.expectedIssuer=a.attributes,i.actualIssuer=n.attributes,i}var s=t.md;if(null===s){if(t.signatureOid in h){var o=h[t.signatureOid];o==='sha1WithRSAEncryption'?s=u.md.sha1.create():o==='md5WithRSAEncryption'?s=u.md.md5.create():o==='sha256WithRSAEncryption'?s=u.md.sha256.create():o==='sha512WithRSAEncryption'?s=u.md.sha512.create():o==='RSASSA-PSS'?s=u.md.sha256.create():void 0}if(null===s){var i=new Error('Could not compute certificate digest. Unknown signature OID.');throw i.signatureOid=t.signatureOid,i}var c=t.tbsCertificate||p.getTBSCertificate(t),f=l.toDer(c);s.update(f.getBytes())}if(null!==s){var d;switch(t.signatureOid){case h.sha1WithRSAEncryption:d=void 0;break;case h['RSASSA-PSS']:var y,g;if(y=h[t.signatureParameters.mgf.hash.algorithmOid],void 0===y||void 0===u.md[y]){var i=new Error('Unsupported MGF hash function.');throw i.oid=t.signatureParameters.mgf.hash.algorithmOid,i.name=y,i}if(g=h[t.signatureParameters.mgf.algorithmOid],void 0===g||void 0===u.mgf[g]){var i=new Error('Unsupported MGF function.');throw i.oid=t.signatureParameters.mgf.algorithmOid,i.name=g,i}if(g=u.mgf[g].create(u.md[y].create()),y=h[t.signatureParameters.hash.algorithmOid],void 0===y||void 0===u.md[y])throw{message:'Unsupported RSASSA-PSS hash function.',oid:t.signatureParameters.hash.algorithmOid,name:y};d=u.pss.create(u.md[y].create(),g,t.signatureParameters.saltLength);}r=e.publicKey.verify(s.digest().getBytes(),t.signature,d)}return r},e.isIssuer=function(t){var r=!1,a=e.issuer,n=t.subject;if(a.hash&&n.hash)r=a.hash===n.hash;else if(a.attributes.length===n.attributes.length){r=!0;for(var o=0,i,s;r&&o<a.attributes.length;++o)i=a.attributes[o],s=n.attributes[o],i.type===s.type&&i.value===s.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return p.getPublicKeyFingerprint(e.publicKey,{type:'RSAPublicKey'})},e.verifySubjectKeyIdentifier=function(){for(var t=h.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var a=e.extensions[r];if(a.id===t){var n=e.generateSubjectKeyIdentifier().getBytes();return u.util.hexToBytes(a.subjectKeyIdentifier)===n}}return!1},e},p.certificateFromAsn1=function(e,t){var r={},n=[];if(!l.validate(e,y,r,n)){var s=new Error('Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.');throw s.errors=n,s}var o=l.derToOid(r.publicKeyOid);if(o!==p.oids.rsaEncryption)throw new Error('Cannot read public key. OID is not RSA.');var c=p.createCertificate();c.version=r.certVersion?r.certVersion.charCodeAt(0):0;var f=u.util.createBuffer(r.certSerialNumber);c.serialNumber=f.toHex(),c.signatureOid=u.asn1.derToOid(r.certSignatureOid),c.signatureParameters=C(c.signatureOid,r.certSignatureParams,!0),c.siginfo.algorithmOid=u.asn1.derToOid(r.certinfoSignatureOid),c.siginfo.parameters=C(c.siginfo.algorithmOid,r.certinfoSignatureParams,!1),c.signature=r.certSignature;var d=[];if(void 0!==r.certValidity1UTCTime&&d.push(l.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&d.push(l.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&d.push(l.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&d.push(l.generalizedTimeToDate(r.certValidity4GeneralizedTime)),d.length>2)throw new Error('Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.');if(d.length<2)throw new Error('Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.');if(c.validity.notBefore=d[0],c.validity.notAfter=d[1],c.tbsCertificate=r.tbsCertificate,t){if(c.md=null,c.signatureOid in h){var o=h[c.signatureOid];o==='sha1WithRSAEncryption'?c.md=u.md.sha1.create():o==='md5WithRSAEncryption'?c.md=u.md.md5.create():o==='sha256WithRSAEncryption'?c.md=u.md.sha256.create():o==='sha512WithRSAEncryption'?c.md=u.md.sha512.create():o==='RSASSA-PSS'?c.md=u.md.sha256.create():void 0}if(null===c.md){var s=new Error('Could not compute certificate digest. Unknown signature OID.');throw s.signatureOid=c.signatureOid,s}var g=l.toDer(c.tbsCertificate);c.md.update(g.getBytes())}var v=u.md.sha1.create();c.issuer.getField=function(e){return a(c.issuer,e)},c.issuer.addField=function(e){i([e]),c.issuer.attributes.push(e)},c.issuer.attributes=p.RDNAttributesAsArray(r.certIssuer,v),r.certIssuerUniqueId&&(c.issuer.uniqueId=r.certIssuerUniqueId),c.issuer.hash=v.digest().toHex();var m=u.md.sha1.create();return c.subject.getField=function(e){return a(c.subject,e)},c.subject.addField=function(e){i([e]),c.subject.attributes.push(e)},c.subject.attributes=p.RDNAttributesAsArray(r.certSubject,m),r.certSubjectUniqueId&&(c.subject.uniqueId=r.certSubjectUniqueId),c.subject.hash=m.digest().toHex(),c.extensions=r.certExtensions?p.certificateExtensionsFromAsn1(r.certExtensions):[],c.publicKey=p.publicKeyFromAsn1(r.subjectPublicKeyInfo),c},p.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var a=e.value[r],n=0;n<a.value.length;++n)t.push(p.certificateExtensionFromAsn1(a.value[n]));return t},p.certificateExtensionFromAsn1=function(e){var t={};if(t.id=l.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===l.Type.BOOLEAN?(t.critical=0!==e.value[1].value.charCodeAt(0),t.value=e.value[2].value):t.value=e.value[1].value,t.id in h)if(t.name=h[t.id],'keyUsage'===t.name){var r=l.fromDer(t.value),a=0,n=0;r.value.length>1&&(a=r.value.charCodeAt(1),n=r.value.length>2?r.value.charCodeAt(2):0),t.digitalSignature=128===(128&a),t.nonRepudiation=64===(64&a),t.keyEncipherment=32===(32&a),t.dataEncipherment=16===(16&a),t.keyAgreement=8===(8&a),t.keyCertSign=4===(4&a),t.cRLSign=2===(2&a),t.encipherOnly=1===(1&a),t.decipherOnly=128===(128&n)}else if('basicConstraints'===t.name){var r=l.fromDer(t.value);t.cA=!!(r.value.length>0&&r.value[0].type===l.Type.BOOLEAN)&&0!==r.value[0].value.charCodeAt(0);var i=null;r.value.length>0&&r.value[0].type===l.Type.INTEGER?i=r.value[0].value:r.value.length>1&&(i=r.value[1].value),null!==i&&(t.pathLenConstraint=l.derToInteger(i))}else if('extKeyUsage'===t.name)for(var r=l.fromDer(t.value),s=0;s<r.value.length;++s){var o=l.derToOid(r.value[s].value);o in h?t[h[o]]=!0:t[o]=!0}else if('nsCertType'===t.name){var r=l.fromDer(t.value),a=0;r.value.length>1&&(a=r.value.charCodeAt(1)),t.client=128===(128&a),t.server=64===(64&a),t.email=32===(32&a),t.objsign=16===(16&a),t.reserved=8===(8&a),t.sslCA=4===(4&a),t.emailCA=2===(2&a),t.objCA=1===(1&a)}else if('subjectAltName'===t.name||'issuerAltName'===t.name){t.altNames=[];for(var r=l.fromDer(t.value),p=0,c;p<r.value.length;++p){c=r.value[p];var f={type:c.type,value:c.value};switch(t.altNames.push(f),c.type){case 1:case 2:case 6:break;case 7:f.ip=u.util.bytesToIP(c.value);break;case 8:f.oid=l.derToOid(c.value);}}}else if('subjectKeyIdentifier'===t.name){var r=l.fromDer(t.value);t.subjectKeyIdentifier=u.util.bytesToHex(r.value)}return t},p.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!l.validate(e,m,r,n)){var s=new Error('Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.');throw s.errors=n,s}var o=l.derToOid(r.publicKeyOid);if(o!==p.oids.rsaEncryption)throw new Error('Cannot read public key. OID is not RSA.');var c=p.createCertificationRequest();if(c.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,c.signatureOid=u.asn1.derToOid(r.csrSignatureOid),c.signatureParameters=C(c.signatureOid,r.csrSignatureParams,!0),c.siginfo.algorithmOid=u.asn1.derToOid(r.csrSignatureOid),c.siginfo.parameters=C(c.siginfo.algorithmOid,r.csrSignatureParams,!1),c.signature=r.csrSignature,c.certificationRequestInfo=r.certificationRequestInfo,t){if(c.md=null,c.signatureOid in h){var o=h[c.signatureOid];o==='sha1WithRSAEncryption'?c.md=u.md.sha1.create():o==='md5WithRSAEncryption'?c.md=u.md.md5.create():o==='sha256WithRSAEncryption'?c.md=u.md.sha256.create():o==='sha512WithRSAEncryption'?c.md=u.md.sha512.create():o==='RSASSA-PSS'?c.md=u.md.sha256.create():void 0}if(null===c.md){var s=new Error('Could not compute certification request digest. Unknown signature OID.');throw s.signatureOid=c.signatureOid,s}var f=l.toDer(c.certificationRequestInfo);c.md.update(f.getBytes())}var d=u.md.sha1.create();return c.subject.getField=function(e){return a(c.subject,e)},c.subject.addField=function(e){i([e]),c.subject.attributes.push(e)},c.subject.attributes=p.RDNAttributesAsArray(r.certificationRequestInfoSubject,d),c.subject.hash=d.digest().toHex(),c.publicKey=p.publicKeyFromAsn1(r.subjectPublicKeyInfo),c.getAttribute=function(e){return a(c,e)},c.addAttribute=function(e){i([e]),c.attributes.push(e)},c.attributes=p.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),c},p.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return a(e.subject,t)},e.subject.addField=function(t){i([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return a(e,t)},e.addAttribute=function(t){i([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){i(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){i(t),e.attributes=t},e.sign=function(t,r){e.md=r||u.md.sha1.create();var a=h[e.md.algorithm+'WithRSAEncryption'];if(!a){var n=new Error('Could not compute certification request digest. Unknown message digest algorithm OID.');throw n.algorithm=e.md.algorithm,n}e.signatureOid=e.siginfo.algorithmOid=a,e.certificationRequestInfo=p.getCertificationRequestInfo(e);var i=l.toDer(e.certificationRequestInfo);e.md.update(i.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(null===r){if(e.signatureOid in h){var a=h[e.signatureOid];a==='sha1WithRSAEncryption'?r=u.md.sha1.create():a==='md5WithRSAEncryption'?r=u.md.md5.create():a==='sha256WithRSAEncryption'?r=u.md.sha256.create():a==='sha512WithRSAEncryption'?r=u.md.sha512.create():a==='RSASSA-PSS'?r=u.md.sha256.create():void 0}if(null===r){var n=new Error('Could not compute certification request digest. Unknown signature OID.');throw n.signatureOid=e.signatureOid,n}var i=e.certificationRequestInfo||p.getCertificationRequestInfo(e),s=l.toDer(i);r.update(s.getBytes())}if(null!==r){var o;switch(e.signatureOid){case h.sha1WithRSAEncryption:break;case h['RSASSA-PSS']:var c,f;if(c=h[e.signatureParameters.mgf.hash.algorithmOid],void 0===c||void 0===u.md[c]){var n=new Error('Unsupported MGF hash function.');throw n.oid=e.signatureParameters.mgf.hash.algorithmOid,n.name=c,n}if(f=h[e.signatureParameters.mgf.algorithmOid],void 0===f||void 0===u.mgf[f]){var n=new Error('Unsupported MGF function.');throw n.oid=e.signatureParameters.mgf.algorithmOid,n.name=f,n}if(f=u.mgf[f].create(u.md[c].create()),c=h[e.signatureParameters.hash.algorithmOid],void 0===c||void 0===u.md[c]){var n=new Error('Unsupported RSASSA-PSS hash function.');throw n.oid=e.signatureParameters.hash.algorithmOid,n.name=c,n}o=u.pss.create(u.md[c].create(),f,e.signatureParameters.saltLength);}t=e.publicKey.verify(r.digest().getBytes(),e.signature,o)}return t},e},p.getTBSCertificate=function(e){var t=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(e.version).getBytes())]),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,u.util.hexToBytes(e.serialNumber)),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(e.siginfo.algorithmOid).getBytes()),o(e.siginfo.algorithmOid,e.siginfo.parameters)]),n(e.issuer),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.UTCTIME,!1,l.dateToUtcTime(e.validity.notBefore)),l.create(l.Class.UNIVERSAL,l.Type.UTCTIME,!1,l.dateToUtcTime(e.validity.notAfter))]),n(e.subject),p.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&t.value.push(l.create(l.Class.CONTEXT_SPECIFIC,1,!0,[l.create(l.Class.UNIVERSAL,l.Type.BITSTRING,!1,'\0'+e.issuer.uniqueId)])),e.subject.uniqueId&&t.value.push(l.create(l.Class.CONTEXT_SPECIFIC,2,!0,[l.create(l.Class.UNIVERSAL,l.Type.BITSTRING,!1,'\0'+e.subject.uniqueId)])),e.extensions.length>0&&t.value.push(p.certificateExtensionsToAsn1(e.extensions)),t},p.getCertificationRequestInfo=function(e){var t=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(e.version).getBytes()),n(e.subject),p.publicKeyToAsn1(e.publicKey),c(e)]);return t},p.distinguishedNameToAsn1=function(e){return n(e)},p.certificateToAsn1=function(e){var t=e.tbsCertificate||p.getTBSCertificate(e);return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[t,l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(e.signatureOid).getBytes()),o(e.signatureOid,e.signatureParameters)]),l.create(l.Class.UNIVERSAL,l.Type.BITSTRING,!1,'\0'+e.signature)])},p.certificateExtensionsToAsn1=function(e){var t=l.create(l.Class.CONTEXT_SPECIFIC,3,!0,[]),r=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]);t.value.push(r);for(var a=0;a<e.length;++a)r.value.push(p.certificateExtensionToAsn1(e[a]));return t},p.certificateExtensionToAsn1=function(e){var t=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]);t.value.push(l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(e.id).getBytes())),e.critical&&t.value.push(l.create(l.Class.UNIVERSAL,l.Type.BOOLEAN,!1,'\xFF'));var r=e.value;return'string'!=typeof e.value&&(r=l.toDer(r).getBytes()),t.value.push(l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,r)),t},p.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||p.getCertificationRequestInfo(e);return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[t,l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(e.signatureOid).getBytes()),o(e.signatureOid,e.signatureParameters)]),l.create(l.Class.UNIVERSAL,l.Type.BITSTRING,!1,'\0'+e.signature)])},p.createCaStore=function(e){function t(e){return r(e),a.certs[e.hash]||null}function r(e){if(!e.hash){var t=u.md.sha1.create();e.attributes=p.RDNAttributesAsArray(n(e),t),e.hash=t.digest().toHex()}}var a={certs:{}};if(a.getIssuer=function(e){var r=t(e.issuer);return r},a.addCertificate=function(e){if('string'==typeof e&&(e=u.pki.certificateFromPem(e)),r(e.subject),!a.hasCertificate(e))if(e.subject.hash in a.certs){var t=a.certs[e.subject.hash];u.util.isArray(t)||(t=[t]),t.push(e),a.certs[e.subject.hash]=t}else a.certs[e.subject.hash]=e},a.hasCertificate=function(e){'string'==typeof e&&(e=u.pki.certificateFromPem(e));var r=t(e.subject);if(!r)return!1;u.util.isArray(r)||(r=[r]);for(var a=l.toDer(p.certificateToAsn1(e)).getBytes(),n=0;n<r.length;++n){var i=l.toDer(p.certificateToAsn1(r[n])).getBytes();if(a===i)return!0}return!1},a.listAllCertificates=function(){var e=[];for(var t in a.certs)if(a.certs.hasOwnProperty(t)){var r=a.certs[t];if(u.util.isArray(r))for(var n=0;n<r.length;++n)e.push(r[n]);else e.push(r)}return e},a.removeCertificate=function(e){var n;if('string'==typeof e&&(e=u.pki.certificateFromPem(e)),r(e.subject),!a.hasCertificate(e))return null;var i=t(e.subject);if(!u.util.isArray(i))return n=a.certs[e.subject.hash],delete a.certs[e.subject.hash],n;for(var s=l.toDer(p.certificateToAsn1(e)).getBytes(),o=0;o<i.length;++o){var c=l.toDer(p.certificateToAsn1(i[o])).getBytes();s===c&&(n=i[o],i.splice(o,1))}return 0===i.length&&delete a.certs[e.subject.hash],n},e)for(var i=0;i<e.length;++i){var s=e[i];a.addCertificate(s)}return a},p.certificateError={bad_certificate:'forge.pki.BadCertificate',unsupported_certificate:'forge.pki.UnsupportedCertificate',certificate_revoked:'forge.pki.CertificateRevoked',certificate_expired:'forge.pki.CertificateExpired',certificate_unknown:'forge.pki.CertificateUnknown',unknown_ca:'forge.pki.UnknownCertificateAuthority'},p.verifyCertificateChain=function(e,t,r){t=t.slice(0);var a=t.slice(0),n=new Date,i=!0,s=null,o=0;do{var c=t.shift(),l=null,h=!1;if((n<c.validity.notBefore||n>c.validity.notAfter)&&(s={message:'Certificate is not valid yet or has expired.',error:p.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:n}),null===s){if(l=t[0]||e.getIssuer(c),null===l&&c.isIssuer(c)&&(h=!0,l=c),l){var f=l;u.util.isArray(f)||(f=[f]);for(var d=!1;!d&&f.length>0;){l=f.shift();try{d=l.verify(c)}catch(e){}}d||(s={message:'Certificate signature is invalid.',error:p.certificateError.bad_certificate})}null!==s||l&&!h||e.hasCertificate(c)||(s={message:'Certificate is not trusted.',error:p.certificateError.unknown_ca})}if(null===s&&l&&!c.isIssuer(l)&&(s={message:'Certificate issuer is invalid.',error:p.certificateError.bad_certificate}),null===s)for(var y={keyUsage:!0,basicConstraints:!0},g=0;null===s&&g<c.extensions.length;++g){var v=c.extensions[g];!v.critical||v.name in y||(s={message:'Certificate has an unsupported critical extension.',error:p.certificateError.unsupported_certificate})}if(null===s&&(!i||0===t.length&&(!l||h))){var m=c.getExtension('basicConstraints'),C=c.getExtension('keyUsage');if(null!==C&&(C.keyCertSign&&null!==m||(s={message:'Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn\'t the first then the certificate must be a valid CA.',error:p.certificateError.bad_certificate})),null!==s||null===m||m.cA||(s={message:'Certificate basicConstraints indicates the certificate is not a CA.',error:p.certificateError.bad_certificate}),null===s&&null!==C&&'pathLenConstraint'in m){var E=o-1;E>m.pathLenConstraint&&(s={message:'Certificate basicConstraints pathLenConstraint violated.',error:p.certificateError.bad_certificate})}}var S=null===s||s.error,T=r?r(S,o,a):S;if(T!==!0)throw S===!0&&(s={message:'The application rejected the certificate.',error:p.certificateError.bad_certificate}),(T||0===T)&&('object'!=typeof T||u.util.isArray(T)?'string'==typeof T&&(s.error=T):(T.message&&(s.message=T.message),T.error&&(s.error=T.error))),s;s=null,i=!1,++o}while(t.length>0);return!0}},function(e,t,r){function a(e){if('string'==typeof e&&(e=s.util.createBuffer(e)),s.util.isArray(e)&&e.length>4){var t=e;e=s.util.createBuffer();for(var r=0;r<t.length;++r)e.putByte(t[r])}return s.util.isArray(e)||(e=[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]),e}function n(e){e[e.length-1]=e[e.length-1]+1&4294967295}function i(e){return[e/4294967296|0,4294967295&e]}var s=r(0);r(1),s.cipher=s.cipher||{};var o=e.exports=s.cipher.modes=s.cipher.modes||{};o.ecb=function(e){e=e||{},this.name='ECB',this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=Array(this._ints),this._outBlock=Array(this._ints)},o.ecb.prototype.start=function(e){},o.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a])},o.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a])},o.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},o.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),a=e.at(r-1);return!(a>this.blockSize<<2)&&(e.truncate(a),!0)},o.cbc=function(e){e=e||{},this.name='CBC',this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=Array(this._ints),this._outBlock=Array(this._ints)},o.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error('Invalid IV parameter.');this._iv=this._prev.slice(0)}else{if(!('iv'in e))throw new Error('Invalid IV parameter.');this._iv=a(e.iv),this._prev=this._iv.slice(0)}},o.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=this._prev[a]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]);this._prev=this._outBlock},o.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._prev[a]^this._outBlock[a]);this._prev=this._inBlock.slice(0)},o.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},o.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),a=e.at(r-1);return!(a>this.blockSize<<2)&&(e.truncate(a),!0)},o.cfb=function(e){e=e||{},this.name='CFB',this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=Array(this._ints),this._partialBlock=Array(this._ints),this._partialOutput=s.util.createBuffer(),this._partialBytes=0},o.cfb.prototype.start=function(e){if(!('iv'in e))throw new Error('Invalid IV parameter.');this._iv=a(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.cfb.prototype.encrypt=function(e,t,r){var a=e.length();if(0===a)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&a>=this.blockSize)for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32()^this._outBlock[n],t.putInt32(this._inBlock[n]);else{var i=(this.blockSize-a)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=e.getInt32()^this._outBlock[n],this._partialOutput.putInt32(this._partialBlock[n]);if(i>0)e.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}},o.cfb.prototype.decrypt=function(e,t,r){var a=e.length();if(0===a)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&a>=this.blockSize)for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32(),t.putInt32(this._inBlock[n]^this._outBlock[n]);else{var i=(this.blockSize-a)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[n]^this._outBlock[n]);if(i>0)e.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}},o.ofb=function(e){e=e||{},this.name='OFB',this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=Array(this._ints),this._partialOutput=s.util.createBuffer(),this._partialBytes=0},o.ofb.prototype.start=function(e){if(!('iv'in e))throw new Error('Invalid IV parameter.');this._iv=a(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.ofb.prototype.encrypt=function(e,t,r){var a=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&a>=this.blockSize)for(var n=0;n<this._ints;++n)t.putInt32(e.getInt32()^this._outBlock[n]),this._inBlock[n]=this._outBlock[n];else{var i=(this.blockSize-a)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(e.getInt32()^this._outBlock[n]);if(i>0)e.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._outBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}},o.ofb.prototype.decrypt=o.ofb.prototype.encrypt,o.ctr=function(e){e=e||{},this.name='CTR',this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=Array(this._ints),this._partialOutput=s.util.createBuffer(),this._partialBytes=0},o.ctr.prototype.start=function(e){if(!('iv'in e))throw new Error('Invalid IV parameter.');this._iv=a(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.ctr.prototype.encrypt=function(e,t,r){var a=e.length();if(0===a)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&a>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-a)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}n(this._inBlock)},o.ctr.prototype.decrypt=o.ctr.prototype.encrypt,o.gcm=function(e){e=e||{},this.name='GCM',this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=Array(this._ints),this._outBlock=Array(this._ints),this._partialOutput=s.util.createBuffer(),this._partialBytes=0,this._R=3774873600},o.gcm.prototype.start=function(e){if(!('iv'in e))throw new Error('Invalid IV parameter.');var t=s.util.createBuffer(e.iv);this._cipherLength=0;var r;if(r='additionalData'in e?s.util.createBuffer(e.additionalData):s.util.createBuffer(),this._tagLength='tagLength'in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=s.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error('Authentication tag does not match tag length.');this._hashBlock=Array(this._ints),this.tag=null,this._hashSubkey=Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var a=t.length();if(12===a)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(i(8*a)))}this._inBlock=this._j0.slice(0),n(this._inBlock),this._partialBytes=0,r=s.util.createBuffer(r),this._aDataLength=i(8*r.length());var o=r.length()%this.blockSize;for(o&&r.fillWithByte(0,this.blockSize-o),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])},o.gcm.prototype.encrypt=function(e,t,r){var a=e.length();if(0===a)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&a>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-a)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(0===s||r){if(r){var o=a%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),n(this._inBlock)},o.gcm.prototype.decrypt=function(e,t,r){var a=e.length();if(a<this.blockSize&&!(r&&a>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),n(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);this._cipherLength+=a<this.blockSize?a%this.blockSize:this.blockSize},o.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=s.util.createBuffer();var a=this._aDataLength.concat(i(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,a);var n=[];this.cipher.encrypt(this._j0,n);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^n[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},o.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],a=t.slice(0),n=0;n<128;++n){var i=e[n/32|0]&1<<31-n%32;i&&(r[0]^=a[0],r[1]^=a[1],r[2]^=a[2],r[3]^=a[3]),this.pow(a,a)}return r},o.gcm.prototype.pow=function(e,t){for(var r=1&e[3],a=3;a>0;--a)t[a]=e[a]>>>1|(1&e[a-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},o.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var a=r/8|0,n=e[a]>>>4*(7-r%8)&15,i=this._m[r][n];t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3]}return t},o.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},o.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,a=4*r,n=16*r,i=Array(n),s=0;s<n;++s){var o=[0,0,0,0],c=s/a|0,u=(a-1-s%a)*t;o[c]=1<<t-1<<u,i[s]=this.generateSubHashTable(this.multiply(o,e),t)}return i},o.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,a=r>>>1,n=Array(r);n[a]=e.slice(0);for(var i=a>>>1;i>0;)this.pow(n[2*i],n[i]=[]),i>>=1;for(i=2;i<a;){for(var s=1;s<i;++s){var o=n[i],c=n[s];n[i+s]=[o[0]^c[0],o[1]^c[1],o[2]^c[2],o[3]^c[3]]}i*=2}for(n[0]=[0,0,0,0],i=a+1;i<r;++i){var u=n[i^a];n[i]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return n}},function(e,t,r){var a=r(0);e.exports=a.debug=a.debug||{},a.debug.storage={},a.debug.get=function(e,t){var r;return'undefined'==typeof e?r=a.debug.storage:e in a.debug.storage&&(r='undefined'==typeof t?a.debug.storage[e]:a.debug.storage[e][t]),r},a.debug.set=function(e,t,r){e in a.debug.storage||(a.debug.storage[e]={}),a.debug.storage[e][t]=r},a.debug.clear=function(e,t){'undefined'==typeof e?a.debug.storage={}:e in a.debug.storage&&('undefined'==typeof t?delete a.debug.storage[e]:delete a.debug.storage[e][t])}},function(e,t,r){var a=r(0);r(1),e.exports=a.log=a.log||{},a.log.levels=['none','error','warning','info','debug','verbose','max'];var n={},i=[],s=null;a.log.LEVEL_LOCKED=2,a.log.NO_LEVEL_CHECK=4,a.log.INTERPOLATE=8;for(var o=0;o<a.log.levels.length;++o){var c=a.log.levels[o];n[c]={index:o,name:c.toUpperCase()}}a.log.logMessage=function(e){for(var t=n[e.level].index,r=0;r<i.length;++r){var s=i[r];if(s.flags&a.log.NO_LEVEL_CHECK)s.f(e);else{var o=n[s.level].index;t<=o&&s.f(s,e)}}},a.log.prepareStandard=function(e){'standard'in e||(e.standard=n[e.level].name+' ['+e.category+'] '+e.message)},a.log.prepareFull=function(e){if(!('full'in e)){var t=[e.message];t=t.concat([]),e.full=a.util.format.apply(this,t)}},a.log.prepareStandardFull=function(e){'standardFull'in e||(a.log.prepareStandard(e),e.standardFull=e.standard)};for(var u=['error','warning','info','debug','verbose'],o=0;o<u.length;++o)!function(e){a.log[e]=function(t,r){var n=Array.prototype.slice.call(arguments).slice(2),i={timestamp:new Date,level:e,category:t,message:r,arguments:n};a.log.logMessage(i)}}(u[o]);if(a.log.makeLogger=function(e){var t={flags:0,f:e};return a.log.setLevel(t,'none'),t},a.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&a.log.LEVEL_LOCKED))for(var n=0;n<a.log.levels.length;++n){var i=a.log.levels[n];if(t==i){e.level=t,r=!0;break}}return r},a.log.lock=function(e,t){'undefined'==typeof t||t?e.flags|=a.log.LEVEL_LOCKED:e.flags&=~a.log.LEVEL_LOCKED},a.log.addLogger=function(e){i.push(e)},'undefined'!=typeof console&&'log'in console){var l;if(function(){}&&function(){}&&function(){}&&function(){}){var p={error:function(){},warning:function(){},info:function(){},debug:function(){},verbose:function(){}},h=function(e,t){a.log.prepareStandard(t);var r=p[t.level],n=[t.standard];n=n.concat(t.arguments.slice()),r.apply(console,n)};l=a.log.makeLogger(h)}else{var h=function(e,t){a.log.prepareStandardFull(t),void 0};l=a.log.makeLogger(h)}a.log.setLevel(l,'debug'),a.log.addLogger(l),s=l}else console={log:function(){}};if(null!==s){var f=a.util.getQueryVariables();if('console.level'in f&&a.log.setLevel(s,f['console.level'].slice(-1)[0]),'console.lock'in f){var d=f['console.lock'].slice(-1)[0];'true'==d&&a.log.lock(s)}}a.log.consoleLogger=s},function(e,t,r){var a=r(0);r(1),a.mgf=a.mgf||{};var n=e.exports=a.mgf.mgf1=a.mgf1=a.mgf1||{};n.create=function(e){var t={generate:function(t,r){for(var n=new a.util.ByteBuffer,i=_Mathceil3(r/e.digestLength),s=0;s<i;s++){var o=new a.util.ByteBuffer;o.putInt32(s),e.start(),e.update(t+o.getBytes()),n.putBuffer(e.digest())}return n.truncate(n.length()-r),n.getBytes()}};return t}},function(e,t,r){function a(e,t){return e.start().update(t).digest().getBytes()}function n(e){var t;if(!e)t='hmacWithSHA1';else if(t=l.oids[u.derToOid(e)],!t){var r=new Error('Unsupported PRF OID.');throw r.oid=e,r.supported=['hmacWithSHA1','hmacWithSHA224','hmacWithSHA256','hmacWithSHA384','hmacWithSHA512'],r}return i(t)}function i(e){var t=o.md;switch(e){case'hmacWithSHA224':t=o.md.sha512;case'hmacWithSHA1':case'hmacWithSHA256':case'hmacWithSHA384':case'hmacWithSHA512':e=e.substr(8).toLowerCase();break;default:var r=new Error('Unsupported PRF algorithm.');throw r.algorithm=e,r.supported=['hmacWithSHA1','hmacWithSHA224','hmacWithSHA256','hmacWithSHA384','hmacWithSHA512'],r;}if(!(t&&e in t))throw new Error('Unknown hash algorithm: '+e);return t[e].create()}function s(e,t,r,a){var n=u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.OCTETSTRING,!1,e),u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,t.getBytes())]);return'hmacWithSHA1'!==a&&n.value.push(u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,o.util.hexToBytes(r.toString(16))),u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.OID,!1,u.oidToDer(l.oids[a]).getBytes()),u.create(u.Class.UNIVERSAL,u.Type.NULL,!1,'')])),n}var o=r(0);if(r(5),r(3),r(10),r(4),r(6),r(15),r(7),r(2),r(29),r(11),r(1),'undefined'==typeof c)var c=o.jsbn.BigInteger;var u=o.asn1,l=o.pki=o.pki||{};e.exports=l.pbe=o.pbe=o.pbe||{};var p=l.oids,h={name:'EncryptedPrivateKeyInfo',tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:'EncryptedPrivateKeyInfo.encryptionAlgorithm',tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:'AlgorithmIdentifier.algorithm',tagClass:u.Class.UNIVERSAL,type:u.Type.OID,constructed:!1,capture:'encryptionOid'},{name:'AlgorithmIdentifier.parameters',tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,captureAsn1:'encryptionParams'}]},{name:'EncryptedPrivateKeyInfo.encryptedData',tagClass:u.Class.UNIVERSAL,type:u.Type.OCTETSTRING,constructed:!1,capture:'encryptedData'}]},f={name:'PBES2Algorithms',tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:'PBES2Algorithms.keyDerivationFunc',tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:'PBES2Algorithms.keyDerivationFunc.oid',tagClass:u.Class.UNIVERSAL,type:u.Type.OID,constructed:!1,capture:'kdfOid'},{name:'PBES2Algorithms.params',tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:'PBES2Algorithms.params.salt',tagClass:u.Class.UNIVERSAL,type:u.Type.OCTETSTRING,constructed:!1,capture:'kdfSalt'},{name:'PBES2Algorithms.params.iterationCount',tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:'kdfIterationCount'},{name:'PBES2Algorithms.params.keyLength',tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,optional:!0,capture:'keyLength'},{name:'PBES2Algorithms.params.prf',tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:'PBES2Algorithms.params.prf.algorithm',tagClass:u.Class.UNIVERSAL,type:u.Type.OID,constructed:!1,capture:'prfOid'}]}]}]},{name:'PBES2Algorithms.encryptionScheme',tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:'PBES2Algorithms.encryptionScheme.oid',tagClass:u.Class.UNIVERSAL,type:u.Type.OID,constructed:!1,capture:'encOid'},{name:'PBES2Algorithms.encryptionScheme.iv',tagClass:u.Class.UNIVERSAL,type:u.Type.OCTETSTRING,constructed:!1,capture:'encIv'}]}]},d={name:'pkcs-12PbeParams',tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:'pkcs-12PbeParams.salt',tagClass:u.Class.UNIVERSAL,type:u.Type.OCTETSTRING,constructed:!1,capture:'salt'},{name:'pkcs-12PbeParams.iterations',tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:'iterations'}]};l.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||'aes128',r.prfAlgorithm=r.prfAlgorithm||'sha1';var h=o.random.getBytesSync(r.saltSize),f=r.count,d=u.integerToDer(f),a,n,c;if(0===r.algorithm.indexOf('aes')||'des'===r.algorithm){var y,g,v;switch(r.algorithm){case'aes128':a=16,y=16,g=p['aes128-CBC'],v=o.aes.createEncryptionCipher;break;case'aes192':a=24,y=16,g=p['aes192-CBC'],v=o.aes.createEncryptionCipher;break;case'aes256':a=32,y=16,g=p['aes256-CBC'],v=o.aes.createEncryptionCipher;break;case'des':a=8,y=8,g=p.desCBC,v=o.des.createEncryptionCipher;break;default:var m=new Error('Cannot encrypt private key. Unknown encryption algorithm.');throw m.algorithm=r.algorithm,m;}var C='hmacWith'+r.prfAlgorithm.toUpperCase(),E=i(C),S=o.pkcs5.pbkdf2(t,h,f,a,E),T=o.random.getBytesSync(y),I=v(S);I.start(T),I.update(u.toDer(e)),I.finish(),c=I.output.getBytes();var A=s(h,d,a,C);n=u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.OID,!1,u.oidToDer(p.pkcs5PBES2).getBytes()),u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.OID,!1,u.oidToDer(p.pkcs5PBKDF2).getBytes()),A]),u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.OID,!1,u.oidToDer(g).getBytes()),u.create(u.Class.UNIVERSAL,u.Type.OCTETSTRING,!1,T)])])])}else{if('3des'!==r.algorithm){var m=new Error('Cannot encrypt private key. Unknown encryption algorithm.');throw m.algorithm=r.algorithm,m}a=24;var b=new o.util.ByteBuffer(h),S=l.pbe.generatePkcs12Key(t,b,1,f,a),T=l.pbe.generatePkcs12Key(t,b,2,f,a),I=o.des.createEncryptionCipher(S);I.start(T),I.update(u.toDer(e)),I.finish(),c=I.output.getBytes(),n=u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.OID,!1,u.oidToDer(p['pbeWithSHAAnd3-KeyTripleDES-CBC']).getBytes()),u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.OCTETSTRING,!1,h),u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,d.getBytes())])])}var B=u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[n,u.create(u.Class.UNIVERSAL,u.Type.OCTETSTRING,!1,c)]);return B},l.decryptPrivateKeyInfo=function(e,t){var r=null,a={},n=[];if(!u.validate(e,h,a,n)){var i=new Error('Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.');throw i.errors=n,i}var s=u.derToOid(a.encryptionOid),c=l.pbe.getCipher(s,a.encryptionParams,t),p=o.util.createBuffer(a.encryptedData);return c.update(p),c.finish()&&(r=u.fromDer(c.output)),r},l.encryptedPrivateKeyToPem=function(e,t){var r={type:'ENCRYPTED PRIVATE KEY',body:u.toDer(e).getBytes()};return o.pem.encode(r,{maxline:t})},l.encryptedPrivateKeyFromPem=function(e){var t=o.pem.decode(e)[0];if('ENCRYPTED PRIVATE KEY'!==t.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&'ENCRYPTED'===t.procType.type)throw new Error('Could not convert encrypted private key from PEM; PEM is encrypted.');return u.fromDer(t.body)},l.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var a=l.wrapRsaPrivateKey(l.privateKeyToAsn1(e));return a=l.encryptPrivateKeyInfo(a,t,r),l.encryptedPrivateKeyToPem(a)}var n,i,s,c;switch(r.algorithm){case'aes128':n='AES-128-CBC',s=16,i=o.random.getBytesSync(16),c=o.aes.createEncryptionCipher;break;case'aes192':n='AES-192-CBC',s=24,i=o.random.getBytesSync(16),c=o.aes.createEncryptionCipher;break;case'aes256':n='AES-256-CBC',s=32,i=o.random.getBytesSync(16),c=o.aes.createEncryptionCipher;break;case'3des':n='DES-EDE3-CBC',s=24,i=o.random.getBytesSync(8),c=o.des.createEncryptionCipher;break;case'des':n='DES-CBC',s=8,i=o.random.getBytesSync(8),c=o.des.createEncryptionCipher;break;default:var p=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw p.algorithm=r.algorithm,p;}var h=o.pbe.opensslDeriveBytes(t,i.substr(0,8),s),f=c(h);f.start(i),f.update(u.toDer(l.privateKeyToAsn1(e))),f.finish();var d={type:'RSA PRIVATE KEY',procType:{version:'4',type:'ENCRYPTED'},dekInfo:{algorithm:n,parameters:o.util.bytesToHex(i).toUpperCase()},body:f.output.getBytes()};return o.pem.encode(d)},l.decryptRsaPrivateKey=function(e,t){var r=null,a=o.pem.decode(e)[0];if('ENCRYPTED PRIVATE KEY'!==a.type&&'PRIVATE KEY'!==a.type&&'RSA PRIVATE KEY'!==a.type){var n=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw n.headerType=n,n}if(a.procType&&'ENCRYPTED'===a.procType.type){var i,s;switch(a.dekInfo.algorithm){case'DES-CBC':i=8,s=o.des.createDecryptionCipher;break;case'DES-EDE3-CBC':i=24,s=o.des.createDecryptionCipher;break;case'AES-128-CBC':i=16,s=o.aes.createDecryptionCipher;break;case'AES-192-CBC':i=24,s=o.aes.createDecryptionCipher;break;case'AES-256-CBC':i=32,s=o.aes.createDecryptionCipher;break;case'RC2-40-CBC':i=5,s=function(e){return o.rc2.createDecryptionCipher(e,40)};break;case'RC2-64-CBC':i=8,s=function(e){return o.rc2.createDecryptionCipher(e,64)};break;case'RC2-128-CBC':i=16,s=function(e){return o.rc2.createDecryptionCipher(e,128)};break;default:var n=new Error('Could not decrypt private key; unsupported encryption algorithm "'+a.dekInfo.algorithm+'".');throw n.algorithm=a.dekInfo.algorithm,n;}var c=o.util.hexToBytes(a.dekInfo.parameters),p=o.pbe.opensslDeriveBytes(t,c.substr(0,8),i),h=s(p);if(h.start(c),h.update(o.util.createBuffer(a.body)),!h.finish())return r;r=h.output.getBytes()}else r=a.body;return r='ENCRYPTED PRIVATE KEY'===a.type?l.decryptPrivateKeyInfo(u.fromDer(r),t):u.fromDer(r),null!==r&&(r=l.privateKeyFromAsn1(r)),r},l.pbe.generatePkcs12Key=function(e,t,r,a,n,i){var s,c;if('undefined'==typeof i||null===i){if(!('sha1'in o.md))throw new Error('"sha1" hash algorithm unavailable.');i=o.md.sha1.create()}var u=i.digestLength,l=i.blockLength,p=new o.util.ByteBuffer,h=new o.util.ByteBuffer;if(null!==e&&void 0!==e){for(c=0;c<e.length;c++)h.putInt16(e.charCodeAt(c));h.putInt16(0)}var f=h.length(),d=t.length(),y=new o.util.ByteBuffer;y.fillWithByte(r,l);var g=l*_Mathceil3(d/l),v=new o.util.ByteBuffer;for(c=0;c<g;c++)v.putByte(t.at(c%d));var m=l*_Mathceil3(f/l),C=new o.util.ByteBuffer;for(c=0;c<m;c++)C.putByte(h.at(c%f));var E=v;E.putBuffer(C);for(var S=_Mathceil3(n/u),T=1;T<=S;T++){var I=new o.util.ByteBuffer;I.putBytes(y.bytes()),I.putBytes(E.bytes());for(var A=0;A<a;A++)i.start(),i.update(I.getBytes()),I=i.digest();var b=new o.util.ByteBuffer;for(c=0;c<l;c++)b.putByte(I.at(c%u));var B=_Mathceil3(d/l)+_Mathceil3(f/l),N=new o.util.ByteBuffer;for(s=0;s<B;s++){var k=new o.util.ByteBuffer(E.getBytes(l)),R=511;for(c=b.length()-1;c>=0;c--)R>>=8,R+=b.at(c)+k.at(c),k.setAt(c,255&R);N.putBuffer(k)}E=N,p.putBuffer(I)}return p.truncate(p.length()-n),p},l.pbe.getCipher=function(e,t,r){switch(e){case l.oids.pkcs5PBES2:return l.pbe.getCipherForPBES2(e,t,r);case l.oids['pbeWithSHAAnd3-KeyTripleDES-CBC']:case l.oids['pbewithSHAAnd40BitRC2-CBC']:return l.pbe.getCipherForPKCS12PBE(e,t,r);default:var a=new Error('Cannot read encrypted PBE data block. Unsupported OID.');throw a.oid=e,a.supportedOids=['pkcs5PBES2','pbeWithSHAAnd3-KeyTripleDES-CBC','pbewithSHAAnd40BitRC2-CBC'],a;}},l.pbe.getCipherForPBES2=function(e,t,r){var a={},i=[];if(!u.validate(t,f,a,i)){var s=new Error('Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.');throw s.errors=i,s}if(e=u.derToOid(a.kdfOid),e!==l.oids.pkcs5PBKDF2){var s=new Error('Cannot read encrypted private key. Unsupported key derivation function OID.');throw s.oid=e,s.supportedOids=['pkcs5PBKDF2'],s}if(e=u.derToOid(a.encOid),e!==l.oids['aes128-CBC']&&e!==l.oids['aes192-CBC']&&e!==l.oids['aes256-CBC']&&e!==l.oids['des-EDE3-CBC']&&e!==l.oids.desCBC){var s=new Error('Cannot read encrypted private key. Unsupported encryption scheme OID.');throw s.oid=e,s.supportedOids=['aes128-CBC','aes192-CBC','aes256-CBC','des-EDE3-CBC','desCBC'],s}var c=a.kdfSalt,p=o.util.createBuffer(a.kdfIterationCount);p=p.getInt(p.length()<<3);var h,d;switch(l.oids[e]){case'aes128-CBC':h=16,d=o.aes.createDecryptionCipher;break;case'aes192-CBC':h=24,d=o.aes.createDecryptionCipher;break;case'aes256-CBC':h=32,d=o.aes.createDecryptionCipher;break;case'des-EDE3-CBC':h=24,d=o.des.createDecryptionCipher;break;case'desCBC':h=8,d=o.des.createDecryptionCipher;}var y=n(a.prfOid),g=o.pkcs5.pbkdf2(r,c,p,h,y),v=a.encIv,m=d(g);return m.start(v),m},l.pbe.getCipherForPKCS12PBE=function(e,t,r){var a={},i=[];if(!u.validate(t,d,a,i)){var s=new Error('Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.');throw s.errors=i,s}var c=o.util.createBuffer(a.salt),p=o.util.createBuffer(a.iterations);p=p.getInt(p.length()<<3);var h,f,y;switch(e){case l.oids['pbeWithSHAAnd3-KeyTripleDES-CBC']:h=24,f=8,y=o.des.startDecrypting;break;case l.oids['pbewithSHAAnd40BitRC2-CBC']:h=5,f=8,y=function(e,t){var r=o.rc2.createDecryptionCipher(e,40);return r.start(t,null),r};break;default:var s=new Error('Cannot read PKCS #12 PBE data block. Unsupported OID.');throw s.oid=e,s;}var g=n(a.prfOid),v=l.pbe.generatePkcs12Key(r,c,1,p,h,g);g.start();var m=l.pbe.generatePkcs12Key(r,c,2,p,f,g);return y(v,m)},l.pbe.opensslDeriveBytes=function(e,t,r,n){if('undefined'==typeof n||null===n){if(!('md5'in o.md))throw new Error('"md5" hash algorithm unavailable.');n=o.md.md5.create()}null===t&&(t='');for(var i=[a(n,e+t)],s=16,c=1;s<r;++c,s+=16)i.push(a(n,i[c-1]+e+t));return i.join('').substr(0,r)}},function(e,t,r){function a(e,t,r){r||(r=n.md.sha1.create());for(var a='',i=_Mathceil3(t/r.digestLength),s=0;s<i;++s){var o=_StringfromCharCode2(s>>24&255,s>>16&255,s>>8&255,255&s);r.start(),r.update(e+o),a+=r.digest().getBytes()}return a.substring(0,t)}var n=r(0);r(1),r(2),r(9);var i=e.exports=n.pkcs1=n.pkcs1||{};i.encode_rsa_oaep=function(e,t,r){var i,s,o,c;'string'==typeof r?(i=r,s=arguments[3]||void 0,o=arguments[4]||void 0):r&&(i=r.label||void 0,s=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(c=r.mgf1.md)),o?o.start():o=n.md.sha1.create(),c||(c=o);var u=_Mathceil3(e.n.bitLength()/8),l=u-2*o.digestLength-2;if(t.length>l){var p=new Error('RSAES-OAEP input message length is too long.');throw p.length=t.length,p.maxLength=l,p}i||(i=''),o.update(i,'raw');for(var h=o.digest(),f='',d=l-t.length,y=0;y<d;y++)f+='\0';var g=h.getBytes()+f+'\x01'+t;if(!s)s=n.random.getBytes(o.digestLength);else if(s.length!==o.digestLength){var p=new Error('Invalid RSAES-OAEP seed. The seed length must match the digest length.');throw p.seedLength=s.length,p.digestLength=o.digestLength,p}var v=a(s,u-o.digestLength-1,c),m=n.util.xorBytes(g,v,g.length),C=a(m,o.digestLength,c),E=n.util.xorBytes(s,C,s.length);return'\0'+E+m},i.decode_rsa_oaep=function(e,t,r){var i,s,o;'string'==typeof r?(i=r,s=arguments[3]||void 0):r&&(i=r.label||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var c=_Mathceil3(e.n.bitLength()/8);if(t.length!==c){var u=new Error('RSAES-OAEP encoded message length is invalid.');throw u.length=t.length,u.expectedLength=c,u}if(void 0===s?s=n.md.sha1.create():s.start(),o||(o=s),c<2*s.digestLength+2)throw new Error('RSAES-OAEP key is too short for the hash function.');i||(i=''),s.update(i,'raw');for(var l=s.digest().getBytes(),p=t.charAt(0),h=t.substring(1,s.digestLength+1),f=t.substring(1+s.digestLength),d=a(f,s.digestLength,o),y=n.util.xorBytes(h,d,h.length),g=a(y,c-s.digestLength-1,o),v=n.util.xorBytes(f,g,f.length),m=v.substring(0,s.digestLength),u='\0'!==p,C=0;C<s.digestLength;++C)u|=l.charAt(C)!==m.charAt(C);for(var E=1,S=s.digestLength,T=s.digestLength;T<v.length;T++){var I=v.charCodeAt(T),A=1&I^1,b=E?65534:0;u|=I&b,E&=A,S+=E}if(u||1!==v.charCodeAt(S))throw new Error('Invalid RSAES-OAEP padding.');return v.substring(S+1)}},function(e,t,r){function a(e,t,r,a){for(var n=[],i=0;i<e.length;i++)for(var s=0;s<e[i].safeBags.length;s++){var o=e[i].safeBags[s];void 0!==a&&o.type!==a||(null===t?n.push(o):void 0!==o.attributes[t]&&o.attributes[t].indexOf(r)>=0&&n.push(o))}return n}function n(e){if(e.composed||e.constructed){for(var t=u.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function i(e,t,r,a){if(t=l.fromDer(t,r),t.tagClass!==l.Class.UNIVERSAL||t.type!==l.Type.SEQUENCE||t.constructed!==!0)throw new Error('PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo');for(var i=0;i<t.value.length;i++){var c=t.value[i],u={},h=[];if(!l.validate(c,f,u,h)){var d=new Error('Cannot read ContentInfo.');throw d.errors=h,d}var y={encrypted:!1},g=null,v=u.content.value[0];switch(l.derToOid(u.contentType)){case p.oids.data:if(v.tagClass!==l.Class.UNIVERSAL||v.type!==l.Type.OCTETSTRING)throw new Error('PKCS#12 SafeContents Data is not an OCTET STRING.');g=n(v).value;break;case p.oids.encryptedData:g=s(v,a),y.encrypted=!0;break;default:var d=new Error('Unsupported PKCS#12 contentType.');throw d.contentType=l.derToOid(u.contentType),d;}y.safeBags=o(g,r,a),e.safeContents.push(y)}}function s(e,t){var r={},a=[];if(!l.validate(e,u.pkcs7.asn1.encryptedDataValidator,r,a)){var i=new Error('Cannot read EncryptedContentInfo.');throw i.errors=a,i}var s=l.derToOid(r.contentType);if(s!==p.oids.data){var i=new Error('PKCS#12 EncryptedContentInfo ContentType is not Data.');throw i.oid=s,i}s=l.derToOid(r.encAlgorithm);var o=p.pbe.getCipher(s,r.encParameter,t),c=n(r.encryptedContentAsn1),h=u.util.createBuffer(c.value);if(o.update(h),!o.finish())throw new Error('Failed to decrypt PKCS#12 SafeContents.');return o.output.getBytes()}function o(e,t,r){if(!t&&0===e.length)return[];if(e=l.fromDer(e,t),e.tagClass!==l.Class.UNIVERSAL||e.type!==l.Type.SEQUENCE||e.constructed!==!0)throw new Error('PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.');for(var a=[],n=0;n<e.value.length;n++){var i=e.value[n],s={},o=[];if(!l.validate(i,y,s,o)){var u=new Error('Cannot read SafeBag.');throw u.errors=o,u}var h={type:l.derToOid(s.bagId),attributes:c(s.bagAttributes)};a.push(h);var g=s.bagValue.value[0],f,d;switch(h.type){case p.oids.pkcs8ShroudedKeyBag:if(g=p.decryptPrivateKeyInfo(g,r),null===g)throw new Error('Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?');case p.oids.keyBag:try{h.key=p.privateKeyFromAsn1(g)}catch(e){h.key=null,h.asn1=g}continue;case p.oids.certBag:f=v,d=function(){if(l.derToOid(s.certId)!==p.oids.x509Certificate){var e=new Error('Unsupported certificate type, only X.509 supported.');throw e.oid=l.derToOid(s.certId),e}var r=l.fromDer(s.cert,t);try{h.cert=p.certificateFromAsn1(r,!0)}catch(e){h.cert=null,h.asn1=r}};break;default:var u=new Error('Unsupported PKCS#12 SafeBag type.');throw u.oid=h.type,u;}if(void 0!==f&&!l.validate(g,f,s,o)){var u=new Error('Cannot read PKCS#12 '+f.name);throw u.errors=o,u}d()}return a}function c(e){var t={};if(void 0!==e)for(var r=0;r<e.length;++r){var a={},n=[];if(!l.validate(e[r],g,a,n)){var i=new Error('Cannot read PKCS#12 BagAttribute.');throw i.errors=n,i}var s=l.derToOid(a.oid);if(void 0!==p.oids[s]){t[p.oids[s]]=[];for(var o=0;o<a.values.length;++o)t[p.oids[s]].push(a.values[o].value)}}return t}var u=r(0);r(3),r(8),r(6),r(25),r(22),r(2),r(11),r(9),r(1),r(17);var l=u.asn1,p=u.pki,h=e.exports=u.pkcs12=u.pkcs12||{},f={name:'ContentInfo',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:'ContentInfo.contentType',tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:'contentType'},{name:'ContentInfo.content',tagClass:l.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:'content'}]},d={name:'PFX',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:'PFX.version',tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:'version'},f,{name:'PFX.macData',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:'mac',value:[{name:'PFX.macData.mac',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:'PFX.macData.mac.digestAlgorithm',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:'PFX.macData.mac.digestAlgorithm.algorithm',tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:'macAlgorithm'},{name:'PFX.macData.mac.digestAlgorithm.parameters',tagClass:l.Class.UNIVERSAL,captureAsn1:'macAlgorithmParameters'}]},{name:'PFX.macData.mac.digest',tagClass:l.Class.UNIVERSAL,type:l.Type.OCTETSTRING,constructed:!1,capture:'macDigest'}]},{name:'PFX.macData.macSalt',tagClass:l.Class.UNIVERSAL,type:l.Type.OCTETSTRING,constructed:!1,capture:'macSalt'},{name:'PFX.macData.iterations',tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,optional:!0,capture:'macIterations'}]}]},y={name:'SafeBag',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:'SafeBag.bagId',tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:'bagId'},{name:'SafeBag.bagValue',tagClass:l.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:'bagValue'},{name:'SafeBag.bagAttributes',tagClass:l.Class.UNIVERSAL,type:l.Type.SET,constructed:!0,optional:!0,capture:'bagAttributes'}]},g={name:'Attribute',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:'Attribute.attrId',tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:'oid'},{name:'Attribute.attrValues',tagClass:l.Class.UNIVERSAL,type:l.Type.SET,constructed:!0,capture:'values'}]},v={name:'CertBag',tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:'CertBag.certId',tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:'certId'},{name:'CertBag.certValue',tagClass:l.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:'CertBag.certValue[0]',tagClass:l.Class.UNIVERSAL,type:l.Class.OCTETSTRING,constructed:!1,capture:'cert'}]}]};h.pkcs12FromAsn1=function(e,t,r){'string'==typeof t?(r=t,t=!0):void 0===t&&(t=!0);var s={},o=[];if(!l.validate(e,d,s,o)){var c=new Error('Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.');throw c.errors=c,c}var f={version:s.version.charCodeAt(0),safeContents:[],getBags:function(e){var r={},t;return'localKeyId'in e?t=e.localKeyId:'localKeyIdHex'in e&&(t=u.util.hexToBytes(e.localKeyIdHex)),void 0===t&&!('friendlyName'in e)&&'bagType'in e&&(r[e.bagType]=a(f.safeContents,null,null,e.bagType)),void 0!==t&&(r.localKeyId=a(f.safeContents,'localKeyId',t,e.bagType)),'friendlyName'in e&&(r.friendlyName=a(f.safeContents,'friendlyName',e.friendlyName,e.bagType)),r},getBagsByFriendlyName:function(e,t){return a(f.safeContents,'friendlyName',e,t)},getBagsByLocalKeyId:function(e,t){return a(f.safeContents,'localKeyId',e,t)}};if(3!==s.version.charCodeAt(0)){var c=new Error('PKCS#12 PFX of version other than 3 not supported.');throw c.version=s.version.charCodeAt(0),c}if(l.derToOid(s.contentType)!==p.oids.data){var c=new Error('Only PKCS#12 PFX in password integrity mode supported.');throw c.oid=l.derToOid(s.contentType),c}var y=s.content.value[0];if(y.tagClass!==l.Class.UNIVERSAL||y.type!==l.Type.OCTETSTRING)throw new Error('PKCS#12 authSafe content data is not an OCTET STRING.');if(y=n(y),s.mac){var g=null,v=0,m=l.derToOid(s.macAlgorithm);if(m===p.oids.sha1?(g=u.md.sha1.create(),v=20):m===p.oids.sha256?(g=u.md.sha256.create(),v=32):m===p.oids.sha384?(g=u.md.sha384.create(),v=48):m===p.oids.sha512?(g=u.md.sha512.create(),v=64):m===p.oids.md5?(g=u.md.md5.create(),v=16):void 0,null===g)throw new Error('PKCS#12 uses unsupported MAC algorithm: '+m);var C=new u.util.ByteBuffer(s.macSalt),E='macIterations'in s?parseInt(u.util.bytesToHex(s.macIterations),16):1,S=h.generateKey(r,C,3,E,v,g),T=u.hmac.create();T.start(g,S),T.update(y.value);var I=T.getMac();if(I.getBytes()!==s.macDigest)throw new Error('PKCS#12 MAC could not be verified. Invalid password?')}return i(f,y.value,t,r),f},h.toPkcs12Asn1=function(e,t,r,a){a=a||{},a.saltSize=a.saltSize||8,a.count=a.count||2048,a.algorithm=a.algorithm||a.encAlgorithm||'aes128','useMac'in a||(a.useMac=!0),'localKeyId'in a||(a.localKeyId=null),'generateLocalKeyId'in a||(a.generateLocalKeyId=!0);var i=a.localKeyId,n;if(null!==i)i=u.util.hexToBytes(i);else if(a.generateLocalKeyId)if(t){var s=u.util.isArray(t)?t[0]:t;'string'==typeof s&&(s=p.certificateFromPem(s));var o=u.md.sha1.create();o.update(l.toDer(p.certificateToAsn1(s)).getBytes()),i=o.digest().getBytes()}else i=u.random.getBytes(20);var c=[];null!==i&&c.push(l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.localKeyId).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SET,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,i)])])),'friendlyName'in a&&c.push(l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.friendlyName).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SET,!0,[l.create(l.Class.UNIVERSAL,l.Type.BMPSTRING,!1,a.friendlyName)])])),c.length>0&&(n=l.create(l.Class.UNIVERSAL,l.Type.SET,!0,c));var f=[],d=[];null!==t&&(d=u.util.isArray(t)?t:[t]);for(var y=[],g=0;g<d.length;++g){t=d[g],'string'==typeof t&&(t=p.certificateFromPem(t));var v=0===g?n:void 0,m=p.certificateToAsn1(t),C=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.certBag).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.x509Certificate).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,l.toDer(m).getBytes())])])]),v]);y.push(C)}if(y.length>0){var E=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,y),S=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.data).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,l.toDer(E).getBytes())])]);f.push(S)}var T=null;if(null!==e){var I=p.wrapRsaPrivateKey(p.privateKeyToAsn1(e));T=null===r?l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.keyBag).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[I]),n]):l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.pkcs8ShroudedKeyBag).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[p.encryptPrivateKeyInfo(I,r,a)]),n]);var A=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[T]),b=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.data).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,l.toDer(A).getBytes())])]);f.push(b)}var N=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,f),B;if(a.useMac){var o=u.md.sha1.create(),k=new u.util.ByteBuffer(u.random.getBytes(a.saltSize)),R=a.count,e=h.generateKey(r,k,3,R,20),w=u.hmac.create();w.start(o,e),w.update(l.toDer(N).getBytes());var L=w.getMac();B=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.sha1).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,'')]),l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,L.getBytes())]),l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,k.getBytes()),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(R).getBytes())])}return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(3).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.data).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,l.toDer(N).getBytes())])]),B])},h.generateKey=u.pbe.generatePkcs12Key},function(e,t,r){var a=r(0);r(3),r(1);var n=a.asn1,i=e.exports=a.pkcs7asn1=a.pkcs7asn1||{};a.pkcs7=a.pkcs7||{},a.pkcs7.asn1=i;var s={name:'ContentInfo',tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:'ContentInfo.ContentType',tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:'contentType'},{name:'ContentInfo.content',tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:'content'}]};i.contentInfoValidator=s;var o={name:'EncryptedContentInfo',tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:'EncryptedContentInfo.contentType',tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:'contentType'},{name:'EncryptedContentInfo.contentEncryptionAlgorithm',tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:'EncryptedContentInfo.contentEncryptionAlgorithm.algorithm',tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:'encAlgorithm'},{name:'EncryptedContentInfo.contentEncryptionAlgorithm.parameter',tagClass:n.Class.UNIVERSAL,captureAsn1:'encParameter'}]},{name:'EncryptedContentInfo.encryptedContent',tagClass:n.Class.CONTEXT_SPECIFIC,type:0,capture:'encryptedContent',captureAsn1:'encryptedContentAsn1'}]};i.envelopedDataValidator={name:'EnvelopedData',tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:'EnvelopedData.Version',tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:'version'},{name:'EnvelopedData.RecipientInfos',tagClass:n.Class.UNIVERSAL,type:n.Type.SET,constructed:!0,captureAsn1:'recipientInfos'}].concat(o)},i.encryptedDataValidator={name:'EncryptedData',tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:'EncryptedData.Version',tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:'version'}].concat(o)};var c={name:'SignerInfo',tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:'SignerInfo.version',tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1},{name:'SignerInfo.issuerAndSerialNumber',tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:'SignerInfo.issuerAndSerialNumber.issuer',tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:'issuer'},{name:'SignerInfo.issuerAndSerialNumber.serialNumber',tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:'serial'}]},{name:'SignerInfo.digestAlgorithm',tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:'SignerInfo.digestAlgorithm.algorithm',tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:'digestAlgorithm'},{name:'SignerInfo.digestAlgorithm.parameter',tagClass:n.Class.UNIVERSAL,constructed:!1,captureAsn1:'digestParameter',optional:!0}]},{name:'SignerInfo.authenticatedAttributes',tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:'authenticatedAttributes'},{name:'SignerInfo.digestEncryptionAlgorithm',tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,capture:'signatureAlgorithm'},{name:'SignerInfo.encryptedDigest',tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:'signature'},{name:'SignerInfo.unauthenticatedAttributes',tagClass:n.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:'unauthenticatedAttributes'}]};i.signedDataValidator={name:'SignedData',tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:'SignedData.Version',tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:'version'},{name:'SignedData.DigestAlgorithms',tagClass:n.Class.UNIVERSAL,type:n.Type.SET,constructed:!0,captureAsn1:'digestAlgorithms'},s,{name:'SignedData.Certificates',tagClass:n.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:'certificates'},{name:'SignedData.CertificateRevocationLists',tagClass:n.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:'crls'},{name:'SignedData.SignerInfos',tagClass:n.Class.UNIVERSAL,type:n.Type.SET,capture:'signerInfos',optional:!0,value:[c]}]},i.recipientInfoValidator={name:'RecipientInfo',tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:'RecipientInfo.version',tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:'version'},{name:'RecipientInfo.issuerAndSerial',tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:'RecipientInfo.issuerAndSerial.issuer',tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:'issuer'},{name:'RecipientInfo.issuerAndSerial.serialNumber',tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:'serial'}]},{name:'RecipientInfo.keyEncryptionAlgorithm',tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:'RecipientInfo.keyEncryptionAlgorithm.algorithm',tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:'encAlgorithm'},{name:'RecipientInfo.keyEncryptionAlgorithm.parameter',tagClass:n.Class.UNIVERSAL,constructed:!1,captureAsn1:'encParameter'}]},{name:'RecipientInfo.encryptedKey',tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:'encKey'}]}},function(e,t,r){var a=r(0);r(3),r(6),r(22),r(7),r(15),r(24),r(16),r(11),r(1),r(17);var n=a.asn1,i=e.exports=a.pki=a.pki||{};i.pemToDer=function(e){var t=a.pem.decode(e)[0];if(t.procType&&'ENCRYPTED'===t.procType.type)throw new Error('Could not convert PEM to DER; PEM is encrypted.');return a.util.createBuffer(t.body)},i.privateKeyFromPem=function(e){var t=a.pem.decode(e)[0];if('PRIVATE KEY'!==t.type&&'RSA PRIVATE KEY'!==t.type){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&'ENCRYPTED'===t.procType.type)throw new Error('Could not convert private key from PEM; PEM is encrypted.');var s=n.fromDer(t.body);return i.privateKeyFromAsn1(s)},i.privateKeyToPem=function(e,t){var r={type:'RSA PRIVATE KEY',body:n.toDer(i.privateKeyToAsn1(e)).getBytes()};return a.pem.encode(r,{maxline:t})},i.privateKeyInfoToPem=function(e,t){var r={type:'PRIVATE KEY',body:n.toDer(e).getBytes()};return a.pem.encode(r,{maxline:t})}},function(e,t,r){var a=r(0);r(1),r(13),r(2),function(){function t(e,t,a,n){return'workers'in a?i(e,t,a,n):r(e,t,a,n)}function r(e,t,r,a){var i=s(e,t),c=0,u=o(i.bitLength());'millerRabinTests'in r&&(u=r.millerRabinTests);var l=10;'maxBlockTime'in r&&(l=r.maxBlockTime),n(i,e,t,c,u,l,a)}function n(e,t,r,i,o,c,u){var p=+new Date;do{if(e.bitLength()>t&&(e=s(t,r)),e.isProbablePrime(o))return u(null,e);e.dAddOffset(l[i++%8],0)}while(c<0||+new Date-p<c);a.util.setImmediate(function(){n(e,t,r,i,o,c,u)})}function i(e,t,n,i){function o(){function r(r){if(!d){--o;var n=r.data;if(n.found){for(var l=0;l<a.length;++l)a[l].terminate();return d=!0,i(null,new u(n.prime,16))}c.bitLength()>e&&(c=s(e,t));var f=c.toString(16);r.target.postMessage({hex:f,workLoad:p}),c.dAddOffset(h,0)}}l=_Mathmax3(1,l);for(var a=[],n=0;n<l;++n)a[n]=new Worker(f);for(var o=l,n=0;n<l;++n)a[n].addEventListener('message',r);var d=!1}if('undefined'==typeof Worker)return r(e,t,n,i);var c=s(e,t),l=n.workers,p=n.workLoad||100,h=30*p/8,f=n.workerScript||'forge/prime.worker.js';return l===-1?a.util.estimateCores(function(e,t){e&&(t=2),l=t-1,o()}):void o()}function s(e,t){var r=new u(e,t),a=e-1;return r.testBit(a)||r.bitwiseTo(u.ONE.shiftLeft(a),h,r),r.dAddOffset(31-r.mod(p).byteValue(),0),r}function o(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}if(a.prime)return void(e.exports=a.prime);var c=e.exports=a.prime=a.prime||{},u=a.jsbn.BigInteger,l=[6,4,2,4,2,4,6,2],p=new u(null);p.fromInt(30);var h=function(e,t){return e|t};c.generateProbablePrime=function(e,r,n){'function'==typeof r&&(n=r,r={}),r=r||{};var i=r.algorithm||'PRIMEINC';'string'==typeof i&&(i={name:i}),i.options=i.options||{};var s=r.prng||a.random,o={nextBytes:function(e){for(var t=s.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if('PRIMEINC'===i.name)return t(e,o,i.options,n);throw new Error('Invalid prime generation algorithm: '+i.name)}}()},function(e,t,r){var a=r(0);r(1);var n=null;!a.util.isNodejs||a.options.usePureJavaScript||process.versions['node-webkit']||(n=r(32));var i=e.exports=a.prng=a.prng||{};i.create=function(e){function t(e){if(o.pools[0].messageLength>=32)return i(),e();var t=32-o.pools[0].messageLength<<5;o.seedFile(t,function(t,r){return t?e(t):(o.collect(r),i(),void e())})}function r(){if(o.pools[0].messageLength>=32)return i();var e=32-o.pools[0].messageLength<<5;o.collect(o.seedFileSync(e)),i()}function i(){var e=o.plugin.md.create();e.update(o.pools[0].digest().getBytes()),o.pools[0].start();for(var t=1,r=1;r<32;++r)t=31===t?2147483648:t<<2,t%o.reseeds===0&&(e.update(o.pools[r].digest().getBytes()),o.pools[r].start());var a=e.digest().getBytes();e.start(),e.update(a);var n=e.digest().getBytes();o.key=o.plugin.formatKey(a),o.seed=o.plugin.formatSeed(n),o.reseeds=4294967295===o.reseeds?0:o.reseeds+1,o.generated=0}function s(e){var t=null;if('undefined'!=typeof window){var r=window.crypto||window.msCrypto;r&&r.getRandomValues&&(t=function(e){return r.getRandomValues(e)})}var n=a.util.createBuffer();if(t)for(;n.length()<e;){var i=_Mathmax3(1,_Mathmin4(e-n.length(),65536)/4),s=new Uint32Array(_Mathfloor2(i));try{t(s);for(var o=0;o<s.length;++o)n.putInt32(s[o])}catch(e){if(!('undefined'!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(n.length()<e)for(var p=_Mathfloor2(65536*Math.random()),c,u,l;n.length()<e;){u=16807*(65535&p),c=16807*(p>>16),u+=(32767&c)<<16,u+=c>>15,u=(2147483647&u)+(u>>31),p=4294967295&u;for(var o=0;o<3;++o)l=p>>>(o<<3),l^=_Mathfloor2(256*Math.random()),n.putByte(_StringfromCharCode2(255&l))}return n.getBytes(e)}for(var o={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0},c=e.md,u=Array(32),l=0;l<32;++l)u[l]=c.create();return o.pools=u,o.pool=0,o.generate=function(e,r){function n(p){if(p)return r(p);if(l.length()>=e)return r(null,l.getBytes(e));if(o.generated>1048575&&(o.key=null),null===o.key)return a.util.nextTick(function(){t(n)});var h=i(o.key,o.seed);o.generated+=h.length,l.putBytes(h),o.key=c(i(o.key,s(o.seed))),o.seed=u(i(o.key,o.seed)),a.util.setImmediate(n)}if(!r)return o.generateSync(e);var i=o.plugin.cipher,s=o.plugin.increment,c=o.plugin.formatKey,u=o.plugin.formatSeed,l=a.util.createBuffer();o.key=null,n()},o.generateSync=function(e){var t=o.plugin.cipher,n=o.plugin.increment,i=o.plugin.formatKey,s=o.plugin.formatSeed;o.key=null;for(var c=a.util.createBuffer();c.length()<e;){o.generated>1048575&&(o.key=null),null===o.key&&r();var u=t(o.key,o.seed);o.generated+=u.length,c.putBytes(u),o.key=i(t(o.key,n(o.seed))),o.seed=s(t(o.key,o.seed))}return c.getBytes(e)},n?(o.seedFile=function(e,t){n.randomBytes(e,function(e,r){return e?t(e):void t(null,r.toString())})},o.seedFileSync=function(e){return n.randomBytes(e).toString()}):(o.seedFile=function(e,t){try{t(null,s(e))}catch(e){t(e)}},o.seedFileSync=s),o.collect=function(e){for(var t=e.length,r=0;r<t;++r)o.pools[o.pool].update(e.substr(r,1)),o.pool=31===o.pool?0:o.pool+1},o.collectInt=function(e,t){for(var r='',a=0;a<t;a+=8)r+=_StringfromCharCode2(e>>a&255);o.collect(r)},o.registerWorker=function(e){if(e===self)o.seedFile=function(e,t){function r(e){var a=e.data;a.forge&&a.forge.prng&&(self.removeEventListener('message',r),t(a.forge.prng.err,a.forge.prng.bytes))}self.addEventListener('message',r),self.postMessage({forge:{prng:{needed:e}}})};else{var t=function(t){var r=t.data;r.forge&&r.forge.prng&&o.seedFile(r.forge.prng.needed,function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})})};e.addEventListener('message',t)}},o}},function(e,t,r){var a=r(0);r(1);var n=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],i=[1,2,3,5],s=function(e,t){return e<<t&65535|(65535&e)>>16-t},o=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.exports=a.rc2=a.rc2||{},a.rc2.expandKey=function(e,t){'string'==typeof e&&(e=a.util.createBuffer(e)),t=t||128;var i=e,s=e.length(),o=t,c=_Mathceil3(o/8),u=255>>(7&o),r;for(r=s;r<128;r++)i.putByte(n[i.at(r-1)+i.at(r-s)&255]);for(i.setAt(128-c,n[i.at(128-c)&u]),r=127-c;r>=0;r--)i.setAt(r,n[i.at(r+1)^i.at(r+c)]);return i};var c=function(e,t,r){var p=!1,h=null,f=null,d=null,y=[],n,c,u,l;for(e=a.rc2.expandKey(e,t),u=0;u<64;u++)y.push(e.getInt16Le());r?(n=function(e){for(u=0;u<4;u++)e[u]+=y[l]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),e[u]=s(e[u],i[u]),l++},c=function(e){for(u=0;u<4;u++)e[u]+=y[63&e[(u+3)%4]]}):(n=function(e){for(u=3;u>=0;u--)e[u]=o(e[u],i[u]),e[u]-=y[l]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),l--},c=function(e){for(u=3;u>=0;u--)e[u]-=y[63&e[(u+3)%4]]});var g=function(e){var t=[];for(u=0;u<4;u++){var a=h.getInt16Le();null!==d&&(r?a^=d.getInt16Le():d.putInt16Le(a)),t.push(65535&a)}l=r?0:63;for(var n=0;n<e.length;n++)for(var i=0;i<e[n][0];i++)e[n][1](t);for(u=0;u<4;u++)null!==d&&(r?d.putInt16Le(t[u]):t[u]^=d.getInt16Le()),f.putInt16Le(t[u])},v=null;return v={start:function(e,t){e&&'string'==typeof e&&(e=a.util.createBuffer(e)),p=!1,h=a.util.createBuffer(),f=t||new a.util.createBuffer,d=e,v.output=f},update:function(e){for(p||h.putBuffer(e);h.length()>=8;)g([[5,n],[1,c],[6,n],[1,c],[5,n]])},finish:function(e){var t=!0;if(r)if(e)t=e(8,h,!r);else{var a=8===h.length()?8:8-h.length();h.fillWithByte(a,a)}if(t&&(p=!0,v.update()),!r&&(t=0===h.length()))if(e)t=e(8,f,!r);else{var n=f.length(),i=f.at(n-1);i>n?t=!1:f.truncate(i)}return t}}};a.rc2.startEncrypting=function(e,t,r){var n=a.rc2.createEncryptionCipher(e,128);return n.start(t,r),n},a.rc2.createEncryptionCipher=function(e,t){return c(e,t,!0)},a.rc2.startDecrypting=function(e,t,r){var n=a.rc2.createDecryptionCipher(e,128);return n.start(t,r),n},a.rc2.createDecryptionCipher=function(e,t){return c(e,t,!1)}},function(e,t,r){function a(){o='\x80',o+=i.util.fillString('\0',64),u=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],c=!0}function n(e,t,r){for(var C=r.length(),a,n,i,s,o,c,l,p,h,f,d,y,g,v,m;C>=64;){for(l=0;l<16;++l)t[l]=r.getInt32();for(;l<64;++l)a=t[l-2],a=(a>>>17|a<<15)^(a>>>19|a<<13)^a>>>10,n=t[l-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,t[l]=a+t[l-7]+n+t[l-16]|0;for(p=e.h0,h=e.h1,f=e.h2,d=e.h3,y=e.h4,g=e.h5,v=e.h6,m=e.h7,l=0;l<64;++l)s=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),o=v^y&(g^v),i=(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),c=p&h|f&(p^h),a=m+s+o+u[l]+t[l],n=i+c,m=v,v=g,g=y,y=d+a>>>0,d=f,f=h,h=p,p=a+n>>>0;e.h0=e.h0+p|0,e.h1=e.h1+h|0,e.h2=e.h2+f|0,e.h3=e.h3+d|0,e.h4=e.h4+y|0,e.h5=e.h5+g|0,e.h6=e.h6+v|0,e.h7=e.h7+m|0,C-=64}}var i=r(0);r(4),r(1);var s=e.exports=i.sha256=i.sha256||{};i.md.sha256=i.md.algorithms.sha256=s,s.create=function(){c||a();var e=null,t=i.util.createBuffer(),r=Array(64),s={algorithm:'sha256',blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return s.start=function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var r=s.messageLengthSize/4,a=0;a<r;++a)s.fullMessageLength.push(0);return t=i.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},s},s.start(),s.update=function(a,o){'utf8'===o&&(a=i.util.encodeUtf8(a));var c=a.length;s.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var u=s.fullMessageLength.length-1;u>=0;--u)s.fullMessageLength[u]+=c[1],c[1]=c[0]+(s.fullMessageLength[u]/4294967296>>>0),s.fullMessageLength[u]>>>=0,c[0]=c[1]/4294967296>>>0;return t.putBytes(a),n(e,r,t),(t.read>2048||0===t.length())&&t.compact(),s},s.digest=function(){var a=i.util.createBuffer();a.putBytes(t.bytes());var c=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize,u=c&s.blockLength-1;a.putBytes(o.substr(0,s.blockLength-u));for(var h=8*s.fullMessageLength[0],f=0,l,p;f<s.fullMessageLength.length-1;++f)l=8*s.fullMessageLength[f+1],p=l/4294967296>>>0,h+=p,a.putInt32(h>>>0),h=l>>>0;a.putInt32(h);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};n(d,r,a);var y=i.util.createBuffer();return y.putInt32(d.h0),y.putInt32(d.h1),y.putInt32(d.h2),y.putInt32(d.h3),y.putInt32(d.h4),y.putInt32(d.h5),y.putInt32(d.h6),y.putInt32(d.h7),y},s};var o=null,c=!1,u=null},function(e,t,r){var a=r(0);r(3),r(8),r(14),r(7),r(26),r(2),r(9),r(1);var n=function(e,t,r,n){var i=a.util.createBuffer(),s=e.length>>1,o=s+(1&e.length),c=e.substr(0,o),u=e.substr(s,o),l=a.util.createBuffer(),p=a.hmac.create();r=t+r;var h=_Mathceil3(n/16),f=_Mathceil3(n/20);p.start('MD5',c);var d=a.util.createBuffer();l.putBytes(r);for(var y=0;y<h;++y)p.start(null,null),p.update(l.getBytes()),l.putBuffer(p.digest()),p.start(null,null),p.update(l.bytes()+r),d.putBuffer(p.digest());p.start('SHA1',u);var g=a.util.createBuffer();l.clear(),l.putBytes(r);for(var y=0;y<f;++y)p.start(null,null),p.update(l.getBytes()),l.putBuffer(p.digest()),p.start(null,null),p.update(l.bytes()+r),g.putBuffer(p.digest());return i.putBytes(a.util.xorBytes(d.getBytes(),g.getBytes(),n)),i},i=function(e,t,r){var n=a.hmac.create();n.start('SHA1',e);var i=a.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},s=function(e,t,r){var n=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=a.util.createBuffer(i),t.length=i.length,n=!0}catch(e){}return n},o=function(e,t,r){var n=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=a.util.createBuffer(i),t.length=i.length,n=!0}catch(e){}return n},c=function(e,t){var r=0;return t===1?r=e.getByte():t===2?r=e.getInt16():t===3?r=e.getInt24():t===4?r=e.getInt32():void 0,a.util.createBuffer(e.getBytes(r))},u=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},l={};l.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}},l.SupportedVersions=[l.Versions.TLS_1_1,l.Versions.TLS_1_0],l.Version=l.SupportedVersions[0],l.MaxFragment=15360,l.ConnectionEnd={server:0,client:1},l.PRFAlgorithm={tls_prf_sha256:0},l.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},l.CipherType={stream:0,block:1,aead:2},l.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},l.CompressionMethod={none:0,deflate:1},l.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},l.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},l.Alert={},l.Alert.Level={warning:1,fatal:2},l.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},l.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},l.CipherSuites={},l.getCipherSuite=function(e){var t=null;for(var r in l.CipherSuites){var a=l.CipherSuites[r];if(a.id[0]===e.charCodeAt(0)&&a.id[1]===e.charCodeAt(1)){t=a;break}}return t},l.handleUnexpected=function(e,t){var r=!e.open&&e.entity===l.ConnectionEnd.client;r||e.error(e,{message:'Unexpected message. Received TLS record out of order.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unexpected_message}})},l.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(l.queue(e,l.createAlert(e,{level:l.Alert.Level.warning,description:l.Alert.Description.no_renegotiation})),l.flush(e)),e.process()},l.parseHelloMessage=function(e,t,r){var n=null,i=e.entity===l.ConnectionEnd.client;if(r<38)e.error(e,{message:i?'Invalid ServerHello message. Message too short.':'Invalid ClientHello message. Message too short.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});else{var s=t.fragment,o=s.length();if(n={version:{major:s.getByte(),minor:s.getByte()},random:a.util.createBuffer(s.getBytes(32)),session_id:c(s,1),extensions:[]},i?(n.cipher_suite=s.getBytes(2),n.compression_method=s.getByte()):(n.cipher_suites=c(s,2),n.compression_methods=c(s,1)),o=r-(o-s.length()),o>0){for(var u=c(s,2);u.length()>0;)n.extensions.push({type:[u.getByte(),u.getByte()],data:c(u,2)});if(!i)for(var p=0;p<n.extensions.length;++p){var h=n.extensions[p];if(0===h.type[0]&&0===h.type[1])for(var f=c(h.data,2);f.length()>0;){var d=f.getByte();if(0!==d)break;e.session.extensions.server_name.serverNameList.push(c(f,2).getBytes())}}}if(e.session.version&&(n.version.major!==e.session.version.major||n.version.minor!==e.session.version.minor))return e.error(e,{message:'TLS version change is disallowed during renegotiation.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=l.getCipherSuite(n.cipher_suite);else for(var y=a.util.createBuffer(n.cipher_suites.bytes());y.length()>0&&(e.session.cipherSuite=l.getCipherSuite(y.getBytes(2)),null===e.session.cipherSuite););if(null===e.session.cipherSuite)return e.error(e,{message:'No cipher suites in common.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.handshake_failure},cipherSuite:a.util.bytesToHex(n.cipher_suite)});e.session.compressionMethod=i?n.compression_method:l.CompressionMethod.none}return n},l.createSecurityParameters=function(e,t){var r=e.entity===l.ConnectionEnd.client,a=t.random.bytes(),n=r?e.session.sp.client_random:a,i=r?a:l.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:l.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:n,server_random:i}},l.handleServerHello=function(e,t,r){var a=l.parseHelloMessage(e,t,r);if(!e.fail){if(!(a.version.minor<=e.version.minor))return e.error(e,{message:'Incompatible TLS version.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.protocol_version}});e.version.minor=a.version.minor,e.session.version=e.version;var n=a.session_id.bytes();n.length>0&&n===e.session.id?(e.expect=g,e.session.resuming=!0,e.session.sp.server_random=a.random.bytes()):(e.expect=h,e.session.resuming=!1,l.createSecurityParameters(e,a)),e.session.id=n,e.process()}},l.handleClientHello=function(e,t,r){var n=l.parseHelloMessage(e,t,r);if(!e.fail){var i=n.session_id.bytes(),s=null;if(e.sessionCache&&(s=e.sessionCache.getSession(i),null===s?i='':(s.version.major!==n.version.major||s.version.minor>n.version.minor)&&(s=null,i='')),0===i.length&&(i=a.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=n.version,e.session.sp={},s)e.version=e.session.version=s.version,e.session.sp=s.sp;else{for(var c=1,o;c<l.SupportedVersions.length&&(o=l.SupportedVersions[c],!(o.minor<=n.version.minor));++c);e.version={major:o.major,minor:o.minor},e.session.version=e.version}null===s?(e.expect=e.verifyClient===!1?T:S,e.session.resuming=!1,l.createSecurityParameters(e,n)):(e.expect=A,e.session.resuming=!0,e.session.sp.client_random=n.random.bytes()),e.open=!0,l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createServerHello(e)})),e.session.resuming?(l.queue(e,l.createRecord(e,{type:l.ContentType.change_cipher_spec,data:l.createChangeCipherSpec()})),e.state.pending=l.createConnectionState(e),e.state.current.write=e.state.pending.write,l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createFinished(e)}))):(l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createCertificate(e)})),e.fail||(l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createServerKeyExchange(e)})),e.verifyClient!==!1&&l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createCertificateRequest(e)})),l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createServerHelloDone(e)})))),l.flush(e),e.process()}},l.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:'Invalid Certificate message. Message too short.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var s=t.fragment,o={certificate_list:c(s,3)},u=[],n,i;try{for(;o.certificate_list.length()>0;)n=c(o.certificate_list,3),i=a.asn1.fromDer(n),n=a.pki.certificateFromAsn1(i,!0),u.push(n)}catch(t){return e.error(e,{message:'Could not parse certificate list.',cause:t,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.bad_certificate}})}var p=e.entity===l.ConnectionEnd.client;(p||e.verifyClient===!0)&&0===u.length?e.error(e,{message:p?'No server certificate provided.':'No client certificate provided.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}}):0===u.length?e.expect=p?f:T:(p?e.session.serverCertificate=u[0]:e.session.clientCertificate=u[0],l.verifyCertificateChain(e,u)&&(e.expect=p?f:T)),e.process()},l.handleServerKeyExchange=function(e,t,r){return r>0?e.error(e,{message:'Invalid key parameters. Only RSA is supported.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unsupported_certificate}}):(e.expect=d,void e.process())},l.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:'Invalid key parameters. Only RSA is supported.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unsupported_certificate}});var n=t.fragment,i={enc_pre_master_secret:c(n,2).getBytes()},s=null;if(e.getPrivateKey)try{s=e.getPrivateKey(e,e.session.serverCertificate),s=a.pki.privateKeyFromPem(s)}catch(t){e.error(e,{message:'Could not get private key.',cause:t,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}})}if(null===s)return e.error(e,{message:'No private key set.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}});try{var o=e.session.sp;o.pre_master_secret=s.decrypt(i.enc_pre_master_secret);var u=e.session.clientHelloVersion;if(u.major!==o.pre_master_secret.charCodeAt(0)||u.minor!==o.pre_master_secret.charCodeAt(1))throw new Error('TLS version rollback attack detected.')}catch(e){o.pre_master_secret=a.random.getBytes(48)}e.expect=A,null!==e.session.clientCertificate&&(e.expect=I),e.process()},l.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:'Invalid CertificateRequest. Message too short.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var a=t.fragment,n={certificate_types:c(a,1),certificate_authorities:c(a,2)};e.session.certificateRequest=n,e.expect=y,e.process()},l.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:'Invalid CertificateVerify. Message too short.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s={signature:c(n,2).getBytes()},o=a.util.createBuffer();o.putBuffer(e.session.md5.digest()),o.putBuffer(e.session.sha1.digest()),o=o.getBytes();try{var u=e.session.clientCertificate;if(!u.publicKey.verify(o,s.signature,'NONE'))throw new Error('CertificateVerify signature does not match.');e.session.md5.update(i),e.session.sha1.update(i)}catch(t){return e.error(e,{message:'Bad signature in CertificateVerify.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.handshake_failure}})}e.expect=A,e.process()},l.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:'Invalid ServerHelloDone message. Invalid length.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.record_overflow}});if(null===e.serverCertificate){var n={message:'No server certificate provided. Not enough security.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.insufficient_security}},i=0,s=e.verify(e,n.alert.description,i,[]);if(s!==!0)return(s||0===s)&&('object'!=typeof s||a.util.isArray(s)?'number'==typeof s&&(n.alert.description=s):(s.message&&(n.message=s.message),s.alert&&(n.alert.description=s.alert))),e.error(e,n)}null!==e.session.certificateRequest&&(t=l.createRecord(e,{type:l.ContentType.handshake,data:l.createCertificate(e)}),l.queue(e,t)),t=l.createRecord(e,{type:l.ContentType.handshake,data:l.createClientKeyExchange(e)}),l.queue(e,t),e.expect=C;var o=function(e,t){null!==e.session.certificateRequest&&null!==e.session.clientCertificate&&l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createCertificateVerify(e,t)})),l.queue(e,l.createRecord(e,{type:l.ContentType.change_cipher_spec,data:l.createChangeCipherSpec()})),e.state.pending=l.createConnectionState(e),e.state.current.write=e.state.pending.write,l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createFinished(e)})),e.expect=g,l.flush(e),e.process()};return null===e.session.certificateRequest||null===e.session.clientCertificate?o(e,null):void l.getClientSignature(e,o)},l.handleChangeCipherSpec=function(e,t){if(1!==t.fragment.getByte())return e.error(e,{message:'Invalid ChangeCipherSpec message received.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var r=e.entity===l.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=l.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?v:b,e.process()},l.handleFinished=function(e,t,r){var i=t.fragment;i.read-=4;var s=i.bytes();i.read+=4;var o=t.fragment.getBytes();i=a.util.createBuffer(),i.putBuffer(e.session.md5.digest()),i.putBuffer(e.session.sha1.digest());var c=e.entity===l.ConnectionEnd.client,u=c?'server finished':'client finished',p=e.session.sp,h=12,f=n;return i=f(p.master_secret,u,i.getBytes(),h),i.getBytes()===o?(e.session.md5.update(s),e.session.sha1.update(s),(e.session.resuming&&c||!e.session.resuming&&!c)&&(l.queue(e,l.createRecord(e,{type:l.ContentType.change_cipher_spec,data:l.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createFinished(e)}))),e.expect=c?m:B,e.handshaking=!1,++e.handshakes,e.peerCertificate=c?e.session.serverCertificate:e.session.clientCertificate,l.flush(e),e.isConnected=!0,e.connected(e),void e.process()):e.error(e,{message:'Invalid verify_data in Finished message.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.decrypt_error}})},l.handleAlert=function(e,t){var a=t.fragment,n={level:a.getByte(),description:a.getByte()},r;switch(n.description){case l.Alert.Description.close_notify:r='Connection closed.';break;case l.Alert.Description.unexpected_message:r='Unexpected message.';break;case l.Alert.Description.bad_record_mac:r='Bad record MAC.';break;case l.Alert.Description.decryption_failed:r='Decryption failed.';break;case l.Alert.Description.record_overflow:r='Record overflow.';break;case l.Alert.Description.decompression_failure:r='Decompression failed.';break;case l.Alert.Description.handshake_failure:r='Handshake failure.';break;case l.Alert.Description.bad_certificate:r='Bad certificate.';break;case l.Alert.Description.unsupported_certificate:r='Unsupported certificate.';break;case l.Alert.Description.certificate_revoked:r='Certificate revoked.';break;case l.Alert.Description.certificate_expired:r='Certificate expired.';break;case l.Alert.Description.certificate_unknown:r='Certificate unknown.';break;case l.Alert.Description.illegal_parameter:r='Illegal parameter.';break;case l.Alert.Description.unknown_ca:r='Unknown certificate authority.';break;case l.Alert.Description.access_denied:r='Access denied.';break;case l.Alert.Description.decode_error:r='Decode error.';break;case l.Alert.Description.decrypt_error:r='Decrypt error.';break;case l.Alert.Description.export_restriction:r='Export restriction.';break;case l.Alert.Description.protocol_version:r='Unsupported protocol version.';break;case l.Alert.Description.insufficient_security:r='Insufficient security.';break;case l.Alert.Description.internal_error:r='Internal error.';break;case l.Alert.Description.user_canceled:r='User canceled.';break;case l.Alert.Description.no_renegotiation:r='Renegotiation not supported.';break;default:r='Unknown error.';}return n.description===l.Alert.Description.close_notify?e.close():(e.error(e,{message:r,send:!1,origin:e.entity===l.ConnectionEnd.client?'server':'client',alert:n}),void e.process())},l.handleHandshake=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return e.fragmented=t,t.fragment=a.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var s=r.bytes(i+4);r.read+=4,n in F[e.entity][e.expect]?(e.entity!==l.ConnectionEnd.server||e.open||e.fail||(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:a.md.md5.create(),sha1:a.md.sha1.create()}),n!==l.HandshakeType.hello_request&&n!==l.HandshakeType.certificate_verify&&n!==l.HandshakeType.finished&&(e.session.md5.update(s),e.session.sha1.update(s)),F[e.entity][e.expect][n](e,t,i)):l.handleUnexpected(e,t)},l.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},l.handleHeartbeat=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt16(),s=r.getBytes(i);if(n===l.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>s.length)return e.process();l.queue(e,l.createRecord(e,{type:l.ContentType.heartbeat,data:l.createHeartbeat(l.HeartbeatMessageType.heartbeat_response,s)})),l.flush(e)}else if(n===l.HeartbeatMessageType.heartbeat_response){if(s!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,a.util.createBuffer(s))}e.process()};var p=0,h=1,f=2,d=3,y=4,g=5,v=6,m=7,C=8,E=0,S=1,T=2,I=3,A=4,b=5,B=6,N=l.handleUnexpected,k=l.handleChangeCipherSpec,R=l.handleAlert,w=l.handleHandshake,L=l.handleApplicationData,_=l.handleHeartbeat,U=[];U[l.ConnectionEnd.client]=[[N,R,w,N,_],[N,R,w,N,_],[N,R,w,N,_],[N,R,w,N,_],[N,R,w,N,_],[k,R,N,N,_],[N,R,w,N,_],[N,R,w,L,_],[N,R,w,N,_]],U[l.ConnectionEnd.server]=[[N,R,w,N,_],[N,R,w,N,_],[N,R,w,N,_],[N,R,w,N,_],[k,R,N,N,_],[N,R,w,N,_],[N,R,w,L,_],[N,R,w,N,_]];var D=l.handleHelloRequest,P=l.handleServerHello,V=l.handleCertificate,O=l.handleServerKeyExchange,x=l.handleCertificateRequest,K=l.handleServerHelloDone,M=l.handleFinished,F=[];F[l.ConnectionEnd.client]=[[N,N,P,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N],[D,N,N,N,N,N,N,N,N,N,N,V,O,x,K,N,N,N,N,N,N],[D,N,N,N,N,N,N,N,N,N,N,N,O,x,K,N,N,N,N,N,N],[D,N,N,N,N,N,N,N,N,N,N,N,N,x,K,N,N,N,N,N,N],[D,N,N,N,N,N,N,N,N,N,N,N,N,N,K,N,N,N,N,N,N],[D,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N],[D,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,M],[D,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N],[D,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N]];var q=l.handleClientHello,j=l.handleClientKeyExchange,H=l.handleCertificateVerify;F[l.ConnectionEnd.server]=[[N,q,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N],[N,N,N,N,N,N,N,N,N,N,N,V,N,N,N,N,N,N,N,N,N],[N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,j,N,N,N,N],[N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,H,N,N,N,N,N],[N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N],[N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,M],[N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N],[N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N]],l.generateKeys=function(e,t){var r=n,a=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,'master secret',a,48).bytes(),t.pre_master_secret=null),a=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,s=e.version.major===l.Versions.TLS_1_0.major&&e.version.minor===l.Versions.TLS_1_0.minor;s&&(i+=2*t.fixed_iv_length);var o=r(t.master_secret,'key expansion',a,i),c={client_write_MAC_key:o.getBytes(t.mac_key_length),server_write_MAC_key:o.getBytes(t.mac_key_length),client_write_key:o.getBytes(t.enc_key_length),server_write_key:o.getBytes(t.enc_key_length)};return s&&(c.client_write_IV=o.getBytes(t.fixed_iv_length),c.server_write_IV=o.getBytes(t.fixed_iv_length)),c},l.createConnectionState=function(e){var t=e.entity===l.ConnectionEnd.client,r=function(){var e={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(e){return!0},compressionState:null,compressFunction:function(e){return!0},updateSequenceNumber:function(){4294967295===e.sequenceNumber[1]?(e.sequenceNumber[1]=0,++e.sequenceNumber[0]):++e.sequenceNumber[1]}};return e},a={read:r(),write:r()};if(a.read.update=function(e,t){return a.read.cipherFunction(t,a.read)?a.read.compressFunction(e,t,a.read)||e.error(e,{message:'Could not decompress record.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.decompression_failure}}):e.error(e,{message:'Could not decrypt record or bad MAC.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.bad_record_mac}}),!e.fail},a.write.update=function(e,t){return a.write.compressFunction(e,t,a.write)?a.write.cipherFunction(t,a.write)||e.error(e,{message:'Could not encrypt record.',send:!1,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}}):e.error(e,{message:'Could not compress record.',send:!1,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}}),!e.fail},e.session){var n=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(n),n.keys=l.generateKeys(e,n),a.read.macKey=t?n.keys.server_write_MAC_key:n.keys.client_write_MAC_key,a.write.macKey=t?n.keys.client_write_MAC_key:n.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(a,e,n),n.compression_algorithm){case l.CompressionMethod.none:break;case l.CompressionMethod.deflate:a.read.compressFunction=o,a.write.compressFunction=s;break;default:throw new Error('Unsupported compression algorithm.');}}return a},l.createRandom=function(){var e=new Date,t=+e+6e4*e.getTimezoneOffset(),r=a.util.createBuffer();return r.putInt32(t),r.putBytes(a.random.getBytes(28)),r},l.createRecord=function(e,t){if(!t.data)return null;var r={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return r},l.createAlert=function(e,t){var r=a.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),l.createRecord(e,{type:l.ContentType.alert,data:r})},l.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=a.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var n=e.cipherSuites[r];t.putByte(n.id[0]),t.putByte(n.id[1])}var i=t.length(),s=a.util.createBuffer();s.putByte(l.CompressionMethod.none);var o=s.length(),c=a.util.createBuffer();if(e.virtualHost){var p=a.util.createBuffer();p.putByte(0),p.putByte(0);var h=a.util.createBuffer();h.putByte(0),u(h,2,a.util.createBuffer(e.virtualHost));var f=a.util.createBuffer();u(f,2,h),u(p,2,f),c.putBuffer(p)}var d=c.length();d>0&&(d+=2);var y=e.session.id,g=y.length+1+2+4+28+2+i+1+o+d,v=a.util.createBuffer();return v.putByte(l.HandshakeType.client_hello),v.putInt24(g),v.putByte(e.version.major),v.putByte(e.version.minor),v.putBytes(e.session.sp.client_random),u(v,1,a.util.createBuffer(y)),u(v,2,t),u(v,1,s),d>0&&u(v,2,c),v},l.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,n=a.util.createBuffer();return n.putByte(l.HandshakeType.server_hello),n.putInt24(r),n.putByte(e.version.major),n.putByte(e.version.minor),n.putBytes(e.session.sp.server_random),u(n,1,a.util.createBuffer(t)),n.putByte(e.session.cipherSuite.id[0]),n.putByte(e.session.cipherSuite.id[1]),n.putByte(e.session.compressionMethod),n},l.createCertificate=function(e){var t=e.entity===l.ConnectionEnd.client,r=null;if(e.getCertificate){var n;n=t?e.session.certificateRequest:e.session.extensions.server_name.serverNameList,r=e.getCertificate(e,n)}var i=a.util.createBuffer();if(null!==r)try{a.util.isArray(r)||(r=[r]);for(var s=null,o=0;o<r.length;++o){var c=a.pem.decode(r[o])[0];if('CERTIFICATE'!==c.type&&'X509 CERTIFICATE'!==c.type&&'TRUSTED CERTIFICATE'!==c.type){var p=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw p.headerType=c.type,p}if(c.procType&&'ENCRYPTED'===c.procType.type)throw new Error('Could not convert certificate from PEM; PEM is encrypted.');var h=a.util.createBuffer(c.body);null===s&&(s=a.asn1.fromDer(h.bytes(),!1));var f=a.util.createBuffer();u(f,3,h),i.putBuffer(f)}r=a.pki.certificateFromAsn1(s),t?e.session.clientCertificate=r:e.session.serverCertificate=r}catch(t){return e.error(e,{message:'Could not send certificate list.',cause:t,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.bad_certificate}})}var d=3+i.length(),y=a.util.createBuffer();return y.putByte(l.HandshakeType.certificate),y.putInt24(d),u(y,3,i),y},l.createClientKeyExchange=function(e){var t=a.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(a.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var n=e.session.serverCertificate.publicKey;t=n.encrypt(r.pre_master_secret);var i=t.length+2,s=a.util.createBuffer();return s.putByte(l.HandshakeType.client_key_exchange),s.putInt24(i),s.putInt16(t.length),s.putBytes(t),s},l.createServerKeyExchange=function(e){var t=0,r=a.util.createBuffer();return!1,r},l.getClientSignature=function(e,t){var r=a.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(e,t,r){var n=null;if(e.getPrivateKey)try{n=e.getPrivateKey(e,e.session.clientCertificate),n=a.pki.privateKeyFromPem(n)}catch(t){e.error(e,{message:'Could not get private key.',cause:t,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}})}null===n?e.error(e,{message:'No private key set.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}}):t=n.sign(t,null),r(e,t)},e.getSignature(e,r,t)},l.createCertificateVerify=function(e,t){var r=t.length+2,n=a.util.createBuffer();return n.putByte(l.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(t.length),n.putBytes(t),n},l.createCertificateRequest=function(e){var t=a.util.createBuffer();t.putByte(1);var r=a.util.createBuffer();for(var n in e.caStore.certs){var i=e.caStore.certs[n],s=a.pki.distinguishedNameToAsn1(i.subject),o=a.asn1.toDer(s);r.putInt16(o.length()),r.putBuffer(o)}var c=1+t.length()+2+r.length(),p=a.util.createBuffer();return p.putByte(l.HandshakeType.certificate_request),p.putInt24(c),u(p,1,t),u(p,2,r),p},l.createServerHelloDone=function(e){var t=a.util.createBuffer();return t.putByte(l.HandshakeType.server_hello_done),t.putInt24(0),t},l.createChangeCipherSpec=function(){var e=a.util.createBuffer();return e.putByte(1),e},l.createFinished=function(e){var t=a.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===l.ConnectionEnd.client,i=e.session.sp,s=12,o=n,c=r?'client finished':'server finished';t=o(i.master_secret,c,t.getBytes(),s);var u=a.util.createBuffer();return u.putByte(l.HandshakeType.finished),u.putInt24(t.length()),u.putBuffer(t),u},l.createHeartbeat=function(e,t,r){'undefined'==typeof r&&(r=t.length);var n=a.util.createBuffer();n.putByte(e),n.putInt16(r),n.putBytes(t);var i=n.length(),s=_Mathmax3(16,i-r-3);return n.putBytes(a.random.getBytes(s)),n},l.queue=function(e,t){if(t&&(0!==t.fragment.length()||t.type!==l.ContentType.handshake&&t.type!==l.ContentType.alert&&t.type!==l.ContentType.change_cipher_spec)){if(t.type===l.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null}var n;if(t.fragment.length()<=l.MaxFragment)n=[t];else{n=[];for(var i=t.fragment.bytes();i.length>l.MaxFragment;)n.push(l.createRecord(e,{type:t.type,data:a.util.createBuffer(i.slice(0,l.MaxFragment))})),i=i.slice(l.MaxFragment);i.length>0&&n.push(l.createRecord(e,{type:t.type,data:a.util.createBuffer(i)}))}for(var s=0;s<n.length&&!e.fail;++s){var o=n[s],c=e.state.current.write;c.update(e,o)&&e.records.push(o)}}},l.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var G=function(e){return e===!0||(e===a.pki.certificateError.bad_certificate?l.Alert.Description.bad_certificate:e===a.pki.certificateError.unsupported_certificate?l.Alert.Description.unsupported_certificate:e===a.pki.certificateError.certificate_revoked?l.Alert.Description.certificate_revoked:e===a.pki.certificateError.certificate_expired?l.Alert.Description.certificate_expired:e===a.pki.certificateError.certificate_unknown?l.Alert.Description.certificate_unknown:e===a.pki.certificateError.unknown_ca?l.Alert.Description.unknown_ca:l.Alert.Description.bad_certificate)},Q=function(e){return e===!0||(e===l.Alert.Description.bad_certificate?a.pki.certificateError.bad_certificate:e===l.Alert.Description.unsupported_certificate?a.pki.certificateError.unsupported_certificate:e===l.Alert.Description.certificate_revoked?a.pki.certificateError.certificate_revoked:e===l.Alert.Description.certificate_expired?a.pki.certificateError.certificate_expired:e===l.Alert.Description.certificate_unknown?a.pki.certificateError.certificate_unknown:e===l.Alert.Description.unknown_ca?a.pki.certificateError.unknown_ca:a.pki.certificateError.bad_certificate)};for(var z in l.verifyCertificateChain=function(e,t){try{a.pki.verifyCertificateChain(e.caStore,t,function(t,r,n){var i=(G(t),e.verify(e,t,r,n));if(i!==!0){if('object'==typeof i&&!a.util.isArray(i)){var s=new Error('The application rejected the certificate.');throw s.send=!0,s.alert={level:l.Alert.Level.fatal,description:l.Alert.Description.bad_certificate},i.message&&(s.message=i.message),i.alert&&(s.alert.description=i.alert),s}i!==t&&(i=Q(i))}return i})}catch(t){var r=t;('object'!=typeof r||a.util.isArray(r))&&(r={send:!0,alert:{level:l.Alert.Level.fatal,description:G(t)}}),'send'in r||(r.send=!0),'alert'in r||(r.alert={level:l.Alert.Level.fatal,description:G(r.error)}),e.error(e,r)}return!e.fail},l.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else{for(var n in r={},r.cache=e||{},r.capacity=_Mathmax3(t||100,1),r.order=[],e)r.order.length<=t?r.order.push(n):delete e[n];r.getSession=function(e){var t=null,n=null;if(e?n=a.util.bytesToHex(e):r.order.length>0&&(n=r.order[0]),null!==n&&n in r.cache)for(var i in t=r.cache[n],delete r.cache[n],r.order)if(r.order[i]===n){r.order.splice(i,1);break}return t},r.setSession=function(e,t){if(r.order.length===r.capacity){var n=r.order.shift();delete r.cache[n]}var n=a.util.bytesToHex(e);r.order.push(n),r.cache[n]=t}}return r},l.createConnection=function(e){var t=null;t=e.caStore?a.util.isArray(e.caStore)?a.pki.createCaStore(e.caStore):e.caStore:a.pki.createCaStore();var r=e.cipherSuites||null;if(null===r)for(var n in r=[],l.CipherSuites)r.push(l.CipherSuites[n]);var i=e.server?l.ConnectionEnd.server:l.ConnectionEnd.client,s=e.sessionCache?l.createSessionCache(e.sessionCache):null,o={version:{major:l.Version.major,minor:l.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:s,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(e,t,r,a){return t},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:a.util.createBuffer(),tlsData:a.util.createBuffer(),data:a.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(t,r){r.origin=r.origin||(t.entity===l.ConnectionEnd.client?'client':'server'),r.send&&(l.queue(t,l.createAlert(t,r.alert)),l.flush(t));var a=r.fatal!==!1;a&&(t.fail=!0),e.error(t,r),a&&t.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};o.reset=function(e){o.version={major:l.Version.major,minor:l.Version.minor},o.record=null,o.session=null,o.peerCertificate=null,o.state={pending:null,current:null},o.expect=o.entity===l.ConnectionEnd.client?p:E,o.fragmented=null,o.records=[],o.open=!1,o.handshakes=0,o.handshaking=!1,o.isConnected=!1,o.fail=!(e||'undefined'==typeof e),o.input.clear(),o.tlsData.clear(),o.data.clear(),o.state.current=l.createConnectionState(o)},o.reset();var c=function(e,t){var r=t.type-l.ContentType.change_cipher_spec,a=U[e.entity][e.expect];r in a?a[r](e,t):l.handleUnexpected(e,t)},u=function(e){var t=0,r=e.input,n=r.length();if(n<5)t=5-n;else{e.record={type:r.getByte(),version:{major:r.getByte(),minor:r.getByte()},length:r.getInt16(),fragment:a.util.createBuffer(),ready:!1};var i=e.record.version.major===e.version.major;i&&e.session&&e.session.version&&(i=e.record.version.minor===e.version.minor),i||e.error(e,{message:'Incompatible TLS version.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.protocol_version}})}return t},h=function(e){var t=0,r=e.input,a=r.length();if(a<e.record.length)t=e.record.length-a;else{e.record.fragment.putBytes(r.getBytes(e.record.length)),r.compact();var n=e.state.current.read;n.update(e,e.record)&&(null!==e.fragmented&&(e.fragmented.type===e.record.type?(e.fragmented.fragment.putBuffer(e.record.fragment),e.record=e.fragmented):e.error(e,{message:'Invalid fragmented record.',send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unexpected_message}})),e.record.ready=!0)}return t};return o.handshake=function(e){if(o.entity!==l.ConnectionEnd.client)o.error(o,{message:'Cannot initiate handshake as a server.',fatal:!1});else if(o.handshaking)o.error(o,{message:'Handshake already in progress.',fatal:!1});else{o.fail&&!o.open&&0===o.handshakes&&(o.fail=!1),o.handshaking=!0,e=e||'';var t=null;e.length>0&&(o.sessionCache&&(t=o.sessionCache.getSession(e)),null===t&&(e='')),0===e.length&&o.sessionCache&&(t=o.sessionCache.getSession(),null!==t&&(e=t.id)),o.session={id:e,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:a.md.md5.create(),sha1:a.md.sha1.create()},t&&(o.version=t.version,o.session.sp=t.sp),o.session.sp.client_random=l.createRandom().getBytes(),o.open=!0,l.queue(o,l.createRecord(o,{type:l.ContentType.handshake,data:l.createClientHello(o)})),l.flush(o)}},o.process=function(e){var t=0;return e&&o.input.putBytes(e),o.fail||(null!==o.record&&o.record.ready&&o.record.fragment.isEmpty()&&(o.record=null),null===o.record&&(t=u(o)),o.fail||null===o.record||o.record.ready||(t=h(o)),!o.fail&&null!==o.record&&o.record.ready&&c(o,o.record)),t},o.prepare=function(e){return l.queue(o,l.createRecord(o,{type:l.ContentType.application_data,data:a.util.createBuffer(e)})),l.flush(o)},o.prepareHeartbeatRequest=function(e,t){return e instanceof a.util.ByteBuffer&&(e=e.bytes()),'undefined'==typeof t&&(t=e.length),o.expectedHeartbeatPayload=e,l.queue(o,l.createRecord(o,{type:l.ContentType.heartbeat,data:l.createHeartbeat(l.HeartbeatMessageType.heartbeat_request,e,t)})),l.flush(o)},o.close=function(e){if(!o.fail&&o.sessionCache&&o.session){var t={id:o.session.id,version:o.session.version,sp:o.session.sp};t.sp.keys=null,o.sessionCache.setSession(t.id,t)}o.open&&(o.open=!1,o.input.clear(),(o.isConnected||o.handshaking)&&(o.isConnected=o.handshaking=!1,l.queue(o,l.createAlert(o,{level:l.Alert.Level.warning,description:l.Alert.Description.close_notify})),l.flush(o)),o.closed(o)),o.reset(e)},o},e.exports=a.tls=a.tls||{},l)'function'!=typeof l[z]&&(a.tls[z]=l[z]);a.tls.prf_tls1=n,a.tls.hmac_sha1=i,a.tls.createSessionCache=l.createSessionCache,a.tls.createConnection=l.createConnection},function(e,t){},function(e,t,r){e.exports=r(0),r(5),r(34),r(3),r(12),r(19),r(10),r(8),r(35),r(20),r(36),r(21),r(15),r(7),r(23),r(24),r(38),r(26),r(27),r(28),r(16),r(2),r(29),r(40),r(41),r(31),r(1)},function(e,t,r){function a(e,t,r){var a=t.entity===u.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:u.cipher.createDecipher('AES-CBC',a?r.keys.server_write_key:r.keys.client_write_key),iv:a?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:u.cipher.createCipher('AES-CBC',a?r.keys.client_write_key:r.keys.server_write_key),iv:a?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=o,e.write.cipherFunction=n,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=l.hmac_sha1}function n(e,t){var r=!1,a=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(a),t.updateSequenceNumber();var n;n=e.version.minor===l.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:u.random.getBytesSync(16),t.cipherState.init=!0;var s=t.cipherState.cipher;return s.start({iv:n}),e.version.minor>=l.Versions.TLS_1_1.minor&&s.output.putBytes(n),s.update(e.fragment),s.finish(i)&&(e.fragment=s.output,e.length=e.fragment.length(),r=!0),r}function i(e,t,r){if(!r){var a=e-t.length()%e;t.fillWithByte(a-1,a)}return!0}function s(e,t,r){var a=!0;if(r){for(var n=t.length(),i=t.last(),s=n-1-i;s<n-1;++s)a=a&&t.at(s)==i;a&&t.truncate(i+1)}return a}function o(e,t){var r=!1;++p;var a;a=e.version.minor===l.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:e.fragment.getBytes(16),t.cipherState.init=!0;var n=t.cipherState.cipher;n.start({iv:a}),n.update(e.fragment),r=n.finish(s);var i=t.macLength,o=u.random.getBytesSync(i),h=n.output.length();h>=i?(e.fragment=n.output.getBytes(h-i),o=n.output.getBytes(i)):e.fragment=n.output.getBytes(),e.fragment=u.util.createBuffer(e.fragment),e.length=e.fragment.length();var f=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),r=c(t.macKey,o,f)&&r}function c(e,t,r){var a=u.hmac.create();return a.start('SHA1',e),a.update(t),t=a.digest().getBytes(),a.start(null,null),a.update(r),r=a.digest().getBytes(),t===r}var u=r(0);r(5),r(31);var l=e.exports=u.tls;l.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:'TLS_RSA_WITH_AES_128_CBC_SHA',initSecurityParameters:function(e){e.bulk_cipher_algorithm=l.BulkCipherAlgorithm.aes,e.cipher_type=l.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=l.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:a},l.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:'TLS_RSA_WITH_AES_256_CBC_SHA',initSecurityParameters:function(e){e.bulk_cipher_algorithm=l.BulkCipherAlgorithm.aes,e.cipher_type=l.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=l.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:a};var p=0},function(e,t,r){function a(e,t,r,a){e.generate=function(e,i){for(var s=new n.util.ByteBuffer,o=_Mathceil3(i/a)+r,c=new n.util.ByteBuffer,u=r;u<o;++u){c.putInt32(u),t.start(),t.update(e+c.getBytes());var l=t.digest();s.putBytes(l.getBytes(a))}return s.truncate(s.length()-i),s.getBytes()}}var n=r(0);r(1),r(2),r(13),e.exports=n.kem=n.kem||{};var i=n.jsbn.BigInteger;n.kem.rsa={},n.kem.rsa.create=function(e,t){t=t||{};var r=t.prng||n.random,a={};return a.encrypt=function(t,a){var o=_Mathceil3(t.n.bitLength()/8),s;do s=new i(n.util.bytesToHex(r.getBytesSync(o)),16).mod(t.n);while(s.equals(i.ZERO));s=n.util.hexToBytes(s.toString(16));var c=o-s.length;c>0&&(s=n.util.fillString('\0',c)+s);var u=t.encrypt(s,'NONE'),l=e.generate(s,a);return{encapsulation:u,key:l}},a.decrypt=function(t,r,a){var n=t.decrypt(r,'NONE');return e.generate(n,a)},a},n.kem.kdf1=function(e,t){a(this,e,0,t||e.digestLength)},n.kem.kdf2=function(e,t){a(this,e,1,t||e.digestLength)}},function(e,t,r){e.exports=r(4),r(14),r(9),r(30),r(39)},function(e,t,r){var a=r(0);r(21),e.exports=a.mgf=a.mgf||{},a.mgf.mgf1=a.mgf1},function(e,t,r){function a(e){var t={},r=[];if(!d.validate(e,y.asn1.recipientInfoValidator,t,r)){var a=new Error('Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.');throw a.errors=r,a}return{version:t.version.charCodeAt(0),issuer:f.pki.RDNAttributesAsArray(t.issuer),serialNumber:f.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:d.derToOid(t.encAlgorithm),parameter:t.encParameter.value,content:t.encKey}}}function n(e){return d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,d.integerToDer(e.version).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[f.pki.distinguishedNameToAsn1({attributes:e.issuer}),d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,f.util.hexToBytes(e.serialNumber))]),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(e.encryptedContent.algorithm).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.NULL,!1,'')]),d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function i(e){for(var t=[],r=0;r<e.length;++r)t.push(a(e[r]));return t}function s(e){for(var t=[],r=0;r<e.length;++r)t.push(n(e[r]));return t}function o(e){var t=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,d.integerToDer(e.version).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[f.pki.distinguishedNameToAsn1({attributes:e.issuer}),d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,f.util.hexToBytes(e.serialNumber))]),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(e.digestAlgorithm).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.NULL,!1,'')])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(e.signatureAlgorithm).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.NULL,!1,'')])),t.value.push(d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=d.create(d.Class.CONTEXT_SPECIFIC,1,!0,[]),a=0;a<e.unauthenticatedAttributes.length;++a){var n=e.unauthenticatedAttributes[a];r.values.push(u(n))}t.value.push(r)}return t}function c(e){for(var t=[],r=0;r<e.length;++r)t.push(o(e[r]));return t}function u(e){var t;if(e.type===f.pki.oids.contentType)t=d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(e.value).getBytes());else if(e.type===f.pki.oids.messageDigest)t=d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===f.pki.oids.signingTime){var r=new Date('1950-01-01T00:00:00Z'),a=new Date('2050-01-01T00:00:00Z'),n=e.value;if('string'==typeof n){var i=Date.parse(n);n=isNaN(i)?13===n.length?d.utcTimeToDate(n):d.generalizedTimeToDate(n):new Date(i)}t=n>=r&&n<a?d.create(d.Class.UNIVERSAL,d.Type.UTCTIME,!1,d.dateToUtcTime(n)):d.create(d.Class.UNIVERSAL,d.Type.GENERALIZEDTIME,!1,d.dateToGeneralizedTime(n))}return d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(e.type).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.SET,!0,[t])])}function l(e){return[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(f.pki.oids.data).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(e.algorithm).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,e.parameter.getBytes())]),d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,e.content.getBytes())])]}function p(e,t,r){var a={},n=[];if(!d.validate(t,r,a,n)){var i=new Error('Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.');throw i.errors=i,i}var s=d.derToOid(a.contentType);if(s!==f.pki.oids.data)throw new Error('Unsupported PKCS#7 message. Only wrapped ContentType Data supported.');if(a.encryptedContent){var o='';if(f.util.isArray(a.encryptedContent))for(var c=0;c<a.encryptedContent.length;++c){if(a.encryptedContent[c].type!==d.Type.OCTETSTRING)throw new Error('Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.');o+=a.encryptedContent[c].value}else o=a.encryptedContent;e.encryptedContent={algorithm:d.derToOid(a.encAlgorithm),parameter:f.util.createBuffer(a.encParameter.value),content:f.util.createBuffer(o)}}if(a.content){var o='';if(f.util.isArray(a.content))for(var c=0;c<a.content.length;++c){if(a.content[c].type!==d.Type.OCTETSTRING)throw new Error('Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.');o+=a.content[c].value}else o=a.content;e.content=f.util.createBuffer(o)}return e.version=a.version.charCodeAt(0),e.rawCapture=a,a}function h(e){if(void 0===e.encryptedContent.key)throw new Error('Symmetric key not available.');if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case f.pki.oids['aes128-CBC']:case f.pki.oids['aes192-CBC']:case f.pki.oids['aes256-CBC']:t=f.aes.createDecryptionCipher(e.encryptedContent.key);break;case f.pki.oids.desCBC:case f.pki.oids['des-EDE3-CBC']:t=f.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error('Unsupported symmetric cipher, OID '+e.encryptedContent.algorithm);}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error('Symmetric decryption failed.');e.content=t.output}}var f=r(0);r(5),r(3),r(10),r(6),r(7),r(25),r(2),r(1),r(17);var d=f.asn1,y=e.exports=f.pkcs7=f.pkcs7||{};y.messageFromPem=function(e){var t=f.pem.decode(e)[0];if('PKCS7'!==t.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&'ENCRYPTED'===t.procType.type)throw new Error('Could not convert PKCS#7 message from PEM; PEM is encrypted.');var a=d.fromDer(t.body);return y.messageFromAsn1(a)},y.messageToPem=function(e,t){var r={type:'PKCS7',body:d.toDer(e.toAsn1()).getBytes()};return f.pem.encode(r,{maxline:t})},y.messageFromAsn1=function(e){var t={},r=[];if(!d.validate(e,y.asn1.contentInfoValidator,t,r)){var a=new Error('Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.');throw a.errors=r,a}var i=d.derToOid(t.contentType),n;switch(i){case f.pki.oids.envelopedData:n=y.createEnvelopedData();break;case f.pki.oids.encryptedData:n=y.createEncryptedData();break;case f.pki.oids.signedData:n=y.createSignedData();break;default:throw new Error('Cannot read PKCS#7 message. ContentType with OID '+i+' is not (yet) supported.');}return n.fromAsn1(t.content.value[0]),n},y.createSignedData=function(){function e(){for(var e={},t=0;t<r.signers.length;++t){var a=r.signers[t],n=a.digestAlgorithm;n in e||(e[n]=f.md[f.pki.oids[n]].create()),a.md=0===a.authenticatedAttributes.length?e[n]:f.md[f.pki.oids[n]].create()}for(var n in r.digestAlgorithmIdentifiers=[],e)r.digestAlgorithmIdentifiers.push(d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(n).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.NULL,!1,'')]));return e}function t(e){if(r.contentInfo.value.length<2)throw new Error('Could not sign PKCS#7 message; there is no content to sign.');var t=d.derToOid(r.contentInfo.value[0].value),a=r.contentInfo.value[1];a=a.value[0];var n=d.toDer(a);for(var i in n.getByte(),d.getBerValueLength(n),n=n.getBytes(),e)e[i].start().update(n);for(var s=new Date,o=0;o<r.signers.length;++o){var l=r.signers[o];if(0!==l.authenticatedAttributes.length){l.authenticatedAttributesAsn1=d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=d.create(d.Class.UNIVERSAL,d.Type.SET,!0,[]),h=0;h<l.authenticatedAttributes.length;++h){var y=l.authenticatedAttributes[h];y.type===f.pki.oids.messageDigest?y.value=e[l.digestAlgorithm].digest():y.type===f.pki.oids.signingTime&&(y.value||(y.value=s)),p.value.push(u(y)),l.authenticatedAttributesAsn1.value.push(u(y))}n=d.toDer(p).getBytes(),l.md.start().update(n)}else if(t!==f.pki.oids.data)throw new Error('Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.');l.signature=l.key.sign(l.md,'RSASSA-PKCS1-V1_5')}r.signerInfos=c(r.signers)}var r=null;return r={type:f.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(e){p(r,e,y.asn1.signedDataValidator),r.certificates=[],r.crls=[],r.digestAlgorithmIdentifiers=[],r.contentInfo=null,r.signerInfos=[];for(var t=r.rawCapture.certificates.value,a=0;a<t.length;++a)r.certificates.push(f.pki.certificateFromAsn1(t[a]))},toAsn1:function(){r.contentInfo||r.sign();for(var e=[],t=0;t<r.certificates.length;++t)e.push(f.pki.certificateToAsn1(r.certificates[t]));var a=[],n=d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,d.integerToDer(r.version).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.SET,!0,r.digestAlgorithmIdentifiers),r.contentInfo])]);return e.length>0&&n.value[0].value.push(d.create(d.Class.CONTEXT_SPECIFIC,0,!0,e)),a.length>0&&n.value[0].value.push(d.create(d.Class.CONTEXT_SPECIFIC,1,!0,a)),n.value[0].value.push(d.create(d.Class.UNIVERSAL,d.Type.SET,!0,r.signerInfos)),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(r.type).getBytes()),n])},addSigner:function(e){var t=e.issuer,a=e.serialNumber;if(e.certificate){var n=e.certificate;'string'==typeof n&&(n=f.pki.certificateFromPem(n)),t=n.issuer.attributes,a=n.serialNumber}var i=e.key;if(!i)throw new Error('Could not add PKCS#7 signer; no private key specified.');'string'==typeof i&&(i=f.pki.privateKeyFromPem(i));var s=e.digestAlgorithm||f.pki.oids.sha1;switch(s){case f.pki.oids.sha1:case f.pki.oids.sha256:case f.pki.oids.sha384:case f.pki.oids.sha512:case f.pki.oids.md5:break;default:throw new Error('Could not add PKCS#7 signer; unknown message digest algorithm: '+s);}var o=e.authenticatedAttributes||[];if(o.length>0){for(var c=!1,u=!1,l=0;l<o.length;++l){var p=o[l];if(c||p.type!==f.pki.oids.contentType){if(u||p.type!==f.pki.oids.messageDigest);else if(u=!0,c)break;}else if(c=!0,u)break}if(!c||!u)throw new Error('Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.')}r.signers.push({key:i,version:1,issuer:t,serialNumber:a,digestAlgorithm:s,signatureAlgorithm:f.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:o,unauthenticatedAttributes:[]})},sign:function(){if(('object'!=typeof r.content||null===r.contentInfo)&&(r.contentInfo=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(f.pki.oids.data).getBytes())]),'content'in r)){var a;r.content instanceof f.util.ByteBuffer?a=r.content.bytes():'string'==typeof r.content&&(a=f.util.encodeUtf8(r.content)),r.contentInfo.value.push(d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,a)]))}if(0!==r.signers.length){var n=e();t(n)}},verify:function(){throw new Error('PKCS#7 signature verification not yet implemented.')},addCertificate:function(e){'string'==typeof e&&(e=f.pki.certificateFromPem(e)),r.certificates.push(e)},addCertificateRevokationList:function(e){throw new Error('PKCS#7 CRL support not yet implemented.')}}},y.createEncryptedData=function(){var e=null;return e={type:f.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:f.pki.oids['aes256-CBC']},fromAsn1:function(t){p(e,t,y.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),h(e)}}},y.createEnvelopedData=function(){var e=null;return e={type:f.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:f.pki.oids['aes256-CBC']},fromAsn1:function(t){var r=p(e,t,y.asn1.envelopedDataValidator);e.recipients=i(r.recipientInfos.value)},toAsn1:function(){return d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(e.type).getBytes()),d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,d.integerToDer(e.version).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.SET,!0,s(e.recipients)),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,l(e.encryptedContent))])])])},findRecipient:function(t){for(var r=t.issuer.attributes,a=0;a<e.recipients.length;++a){var n=e.recipients[a],i=n.issuer;if(n.serialNumber===t.serialNumber&&i.length===r.length){for(var s=!0,o=0;o<r.length;++o)if(i[o].type!==r[o].type||i[o].value!==r[o].value){s=!1;break}if(s)return n}}return null},decrypt:function(t,r){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==r)switch(t.encryptedContent.algorithm){case f.pki.oids.rsaEncryption:case f.pki.oids.desCBC:var a=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=f.util.createBuffer(a);break;default:throw new Error('Unsupported asymmetric cipher, OID '+t.encryptedContent.algorithm);}h(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:f.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(void 0===e.encryptedContent.content){r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var a,n,i;switch(r){case f.pki.oids['aes128-CBC']:a=16,n=16,i=f.aes.createEncryptionCipher;break;case f.pki.oids['aes192-CBC']:a=24,n=16,i=f.aes.createEncryptionCipher;break;case f.pki.oids['aes256-CBC']:a=32,n=16,i=f.aes.createEncryptionCipher;break;case f.pki.oids['des-EDE3-CBC']:a=24,n=8,i=f.des.createEncryptionCipher;break;default:throw new Error('Unsupported symmetric cipher, OID '+r);}if(void 0===t)t=f.util.createBuffer(f.random.getBytes(a));else if(t.length()!=a)throw new Error('Symmetric key has wrong length; got '+t.length()+' bytes, expected '+a+'.');e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=f.util.createBuffer(f.random.getBytes(n));var s=i(t);if(s.start(e.encryptedContent.parameter.copy()),s.update(e.content),!s.finish())throw new Error('Symmetric encryption failed.');e.encryptedContent.content=s.output}for(var o=0;o<e.recipients.length;++o){var c=e.recipients[o];if(void 0===c.encryptedContent.content)switch(c.encryptedContent.algorithm){case f.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error('Unsupported asymmetric cipher, OID '+c.encryptedContent.algorithm);}}}}}},function(e,t,r){function a(){c='\x80',c+=i.util.fillString('\0',128),l=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],p={},p['SHA-512']=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],p['SHA-384']=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],p['SHA-512/256']=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],p['SHA-512/224']=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],u=!0}function n(e,t,r){for(var K=r.length(),a,n,i,s,o,c,u,p,h,f,d,y,g,v,m,C,E,S,T,I,A,b,B,N,k,R,w,L,_,U,D,P,V,O,x;K>=128;){for(_=0;_<16;++_)t[_][0]=r.getInt32()>>>0,t[_][1]=r.getInt32()>>>0;for(;_<80;++_)P=t[_-2],U=P[0],D=P[1],a=((U>>>19|D<<13)^(D>>>29|U<<3)^U>>>6)>>>0,n=((U<<13|D>>>19)^(D<<3|U>>>29)^(U<<26|D>>>6))>>>0,O=t[_-15],U=O[0],D=O[1],i=((U>>>1|D<<31)^(U>>>8|D<<24)^U>>>7)>>>0,s=((U<<31|D>>>1)^(U<<24|D>>>8)^(U<<25|D>>>7))>>>0,V=t[_-7],x=t[_-16],D=n+V[1]+s+x[1],t[_][0]=a+V[0]+i+x[0]+(D/4294967296>>>0)>>>0,t[_][1]=D>>>0;for(g=e[0][0],v=e[0][1],m=e[1][0],C=e[1][1],E=e[2][0],S=e[2][1],T=e[3][0],I=e[3][1],A=e[4][0],b=e[4][1],B=e[5][0],N=e[5][1],k=e[6][0],R=e[6][1],w=e[7][0],L=e[7][1],_=0;_<80;++_)u=((A>>>14|b<<18)^(A>>>18|b<<14)^(b>>>9|A<<23))>>>0,p=((A<<18|b>>>14)^(A<<14|b>>>18)^(b<<23|A>>>9))>>>0,h=(k^A&(B^k))>>>0,f=(R^b&(N^R))>>>0,o=((g>>>28|v<<4)^(v>>>2|g<<30)^(v>>>7|g<<25))>>>0,c=((g<<4|v>>>28)^(v<<30|g>>>2)^(v<<25|g>>>7))>>>0,d=(g&m|E&(g^m))>>>0,y=(v&C|S&(v^C))>>>0,D=L+p+f+l[_][1]+t[_][1],a=w+u+h+l[_][0]+t[_][0]+(D/4294967296>>>0)>>>0,n=D>>>0,D=c+y,i=o+d+(D/4294967296>>>0)>>>0,s=D>>>0,w=k,L=R,k=B,R=N,B=A,N=b,D=I+n,A=T+a+(D/4294967296>>>0)>>>0,b=D>>>0,T=E,I=S,E=m,S=C,m=g,C=v,D=n+s,g=a+i+(D/4294967296>>>0)>>>0,v=D>>>0;D=e[0][1]+v,e[0][0]=e[0][0]+g+(D/4294967296>>>0)>>>0,e[0][1]=D>>>0,D=e[1][1]+C,e[1][0]=e[1][0]+m+(D/4294967296>>>0)>>>0,e[1][1]=D>>>0,D=e[2][1]+S,e[2][0]=e[2][0]+E+(D/4294967296>>>0)>>>0,e[2][1]=D>>>0,D=e[3][1]+I,e[3][0]=e[3][0]+T+(D/4294967296>>>0)>>>0,e[3][1]=D>>>0,D=e[4][1]+b,e[4][0]=e[4][0]+A+(D/4294967296>>>0)>>>0,e[4][1]=D>>>0,D=e[5][1]+N,e[5][0]=e[5][0]+B+(D/4294967296>>>0)>>>0,e[5][1]=D>>>0,D=e[6][1]+R,e[6][0]=e[6][0]+k+(D/4294967296>>>0)>>>0,e[6][1]=D>>>0,D=e[7][1]+L,e[7][0]=e[7][0]+w+(D/4294967296>>>0)>>>0,e[7][1]=D>>>0,K-=128}}var i=r(0);r(4),r(1);var s=e.exports=i.sha512=i.sha512||{};i.md.sha512=i.md.algorithms.sha512=s;var o=i.sha384=i.sha512.sha384=i.sha512.sha384||{};o.create=function(){return s.create('SHA-384')},i.md.sha384=i.md.algorithms.sha384=o,i.sha512.sha256=i.sha512.sha256||{create:function(){return s.create('SHA-512/256')}},i.md['sha512/256']=i.md.algorithms['sha512/256']=i.sha512.sha256,i.sha512.sha224=i.sha512.sha224||{create:function(){return s.create('SHA-512/224')}},i.md['sha512/224']=i.md.algorithms['sha512/224']=i.sha512.sha224,s.create=function(e){if(u||a(),'undefined'==typeof e&&(e='SHA-512'),!(e in p))throw new Error('Invalid SHA-512 algorithm: '+e);for(var t=p[e],r=null,s=i.util.createBuffer(),o=Array(80),l=0;l<80;++l)o[l]=[,,];var h={algorithm:e.replace('-','').toLowerCase(),blockLength:128,digestLength:64,messageLength:0,fullMessageLength:null,messageLengthSize:16};return h.start=function(){h.messageLength=0,h.fullMessageLength=h.messageLength128=[];for(var e=h.messageLengthSize/4,a=0;a<e;++a)h.fullMessageLength.push(0);s=i.util.createBuffer(),r=Array(t.length);for(var a=0;a<t.length;++a)r[a]=t[a].slice(0);return h},h.start(),h.update=function(e,t){'utf8'===t&&(e=i.util.encodeUtf8(e));var a=e.length;h.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=h.fullMessageLength.length-1;c>=0;--c)h.fullMessageLength[c]+=a[1],a[1]=a[0]+(h.fullMessageLength[c]/4294967296>>>0),h.fullMessageLength[c]>>>=0,a[0]=a[1]/4294967296>>>0;return s.putBytes(e),n(r,o,s),(s.read>2048||0===s.length())&&s.compact(),h},h.digest=function(){var t=i.util.createBuffer();t.putBytes(s.bytes());var a=h.fullMessageLength[h.fullMessageLength.length-1]+h.messageLengthSize,u=a&h.blockLength-1;t.putBytes(c.substr(0,h.blockLength-u));for(var f=8*h.fullMessageLength[0],d=0,l,p;d<h.fullMessageLength.length-1;++d)l=8*h.fullMessageLength[d+1],p=l/4294967296>>>0,f+=p,t.putInt32(f>>>0),f=l>>>0;t.putInt32(f);for(var y=Array(r.length),d=0;d<r.length;++d)y[d]=r[d].slice(0);n(y,o,t);var v=i.util.createBuffer(),g;g='SHA-512'===e?y.length:'SHA-384'===e?y.length-2:y.length-4;for(var d=0;d<g;++d)v.putInt32(y[d][0]),d===g-1&&'SHA-512/224'===e||v.putInt32(y[d][1]);return v},h};var c=null,u=!1,l=null,p=null},function(e,t,r){function a(e,t){var r=t.toString(16);r[0]>='8'&&(r='00'+r);var a=s.util.hexToBytes(r);e.putInt32(a.length),e.putBytes(a)}function n(e,t){e.putInt32(t.length),e.putString(t)}function i(){for(var e=s.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}var s=r(0);r(5),r(8),r(14),r(9),r(1);var o=e.exports=s.ssh=s.ssh||{};o.privateKeyToPutty=function(e,t,r){r=r||'',t=t||'';var o='ssh-rsa',c=''===t?'none':'aes256-cbc',u='PuTTY-User-Key-File-2: '+o+'\r\n';u+='Encryption: '+c+'\r\n',u+='Comment: '+r+'\r\n';var l=s.util.createBuffer();n(l,o),a(l,e.e),a(l,e.n);var p=s.util.encode64(l.bytes(),64),h=_Mathfloor2(p.length/66)+1;u+='Public-Lines: '+h+'\r\n',u+=p;var f=s.util.createBuffer();a(f,e.d),a(f,e.p),a(f,e.q),a(f,e.qInv);var d;if(t){var y=f.length()+16-1;y-=y%16;var g=i(f.bytes());g.truncate(g.length()-y+f.length()),f.putBuffer(g);var v=s.util.createBuffer();v.putBuffer(i('\0\0\0\0',t)),v.putBuffer(i('\0\0\0\x01',t));var m=s.aes.createEncryptionCipher(v.truncate(8),'CBC');m.start(s.util.createBuffer().fillWithByte(0,16)),m.update(f.copy()),m.finish();var C=m.output;C.truncate(16),d=s.util.encode64(C.bytes(),64)}else d=s.util.encode64(f.bytes(),64);h=_Mathfloor2(d.length/66)+1,u+='\r\nPrivate-Lines: '+h+'\r\n',u+=d;var E=i('putty-private-key-file-mac-key',t),S=s.util.createBuffer();n(S,o),n(S,c),n(S,r),S.putInt32(l.length()),S.putBuffer(l),S.putInt32(f.length()),S.putBuffer(f);var T=s.hmac.create();return T.start('sha1',E),T.update(S.bytes()),u+='\r\nPrivate-MAC: '+T.digest().toHex()+'\r\n'},o.publicKeyToOpenSSH=function(e,t){var r='ssh-rsa';t=t||'';var i=s.util.createBuffer();return n(i,r),a(i,e.e),a(i,e.n),r+' '+s.util.encode64(i.bytes())+' '+t},o.privateKeyToOpenSSH=function(e,t){return t?s.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:'aes128'}):s.pki.privateKeyToPem(e)},o.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||s.md.md5.create(),i='ssh-rsa',o=s.util.createBuffer();n(o,i),a(o,e.e),a(o,e.n),r.start(),r.update(o.getBytes());var c=r.digest();if('hex'===t.encoding){var u=c.toHex();return t.delimiter?u.match(/.{2}/g).join(t.delimiter):u}if('binary'===t.encoding)return c.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return c}},function(e,t,r){var a=r(0);r(19),r(20),r(1);var n='forge.task',i=0,s={},o=0;a.debug.set(n,'tasks',s);var c={};a.debug.set(n,'queues',c);var u='?',l=30,p=20,h='ready',f='running',d='blocked',y='sleeping',g='done',v='error',m='stop',C='start',E='block',S='unblock',T='sleep',I='wakeup',A='cancel',b='fail',B={};B[h]={},B[h][m]=h,B[h][C]=f,B[h][A]=g,B[h][b]=v,B[f]={},B[f][m]=h,B[f][C]=f,B[f][E]=d,B[f][S]=f,B[f][T]=y,B[f][I]=f,B[f][A]=g,B[f][b]=v,B[d]={},B[d][m]=d,B[d][C]=d,B[d][E]=d,B[d][S]=d,B[d][T]=d,B[d][I]=d,B[d][A]=g,B[d][b]=v,B[y]={},B[y][m]=y,B[y][C]=y,B[y][E]=y,B[y][S]=y,B[y][T]=y,B[y][I]=y,B[y][A]=g,B[y][b]=v,B[g]={},B[g][m]=g,B[g][C]=g,B[g][E]=g,B[g][S]=g,B[g][T]=g,B[g][I]=g,B[g][A]=g,B[g][b]=v,B[v]={},B[v][m]=v,B[v][C]=v,B[v][E]=v,B[v][S]=v,B[v][T]=v,B[v][I]=v,B[v][A]=v,B[v][b]=v;var N=function(e){this.id=-1,this.name=e.name||u,this.parent=e.parent||null,this.run=e.run,this.subtasks=[],this.error=!1,this.state=h,this.blocks=0,this.timeoutId=null,this.swapTime=null,this.userData=null,this.id=o++,s[this.id]=this,!1};N.prototype.debug=function(e){e=e||'',a.log.debug(n,e,'[%s][%s] task:',this.id,this.name,this,'subtasks:',this.subtasks.length,'queue:',c)},N.prototype.next=function(e,t){'function'==typeof e&&(t=e,e=this.name);var r=new N({run:t,name:e,parent:this});return r.state=f,r.type=this.type,r.successCallback=this.successCallback||null,r.failureCallback=this.failureCallback||null,this.subtasks.push(r),this},N.prototype.parallel=function(e,t){return a.util.isArray(e)&&(t=e,e=this.name),this.next(e,function(r){var n=r;n.block(t.length);for(var i=function(e,r){a.task.start({type:e,run:function(e){t[r](e)},success:function(e){n.unblock()},failure:function(e){n.unblock()}})},s=0;s<t.length;s++){var o=e+'__parallel-'+r.id+'-'+s,c=s;i(o,c)}})},N.prototype.stop=function(){this.state=B[this.state][m]},N.prototype.start=function(){this.error=!1,this.state=B[this.state][C],this.state===f&&(this.start=new Date,this.run(this),R(this,0))},N.prototype.block=function(e){e='undefined'==typeof e?1:e,this.blocks+=e,this.blocks>0&&(this.state=B[this.state][E])},N.prototype.unblock=function(e){return e='undefined'==typeof e?1:e,this.blocks-=e,0===this.blocks&&this.state!==g&&(this.state=f,R(this,0)),this.blocks},N.prototype.sleep=function(e){e='undefined'==typeof e?0:e,this.state=B[this.state][T];var t=this;this.timeoutId=setTimeout(function(){t.timeoutId=null,t.state=f,R(t,0)},e)},N.prototype.wait=function(e){e.wait(this)},N.prototype.wakeup=function(){this.state===y&&(cancelTimeout(this.timeoutId),this.timeoutId=null,this.state=f,R(this,0))},N.prototype.cancel=function(){this.state=B[this.state][A],this.permitsNeeded=0,null!==this.timeoutId&&(cancelTimeout(this.timeoutId),this.timeoutId=null),this.subtasks=[]},N.prototype.fail=function(e){if(this.error=!0,w(this,!0),e)e.error=this.error,e.swapTime=this.swapTime,e.userData=this.userData,R(e,0);else{if(null!==this.parent){for(var t=this.parent;null!==t.parent;)t.error=this.error,t.swapTime=this.swapTime,t.userData=this.userData,t=t.parent;w(t,!0)}this.failureCallback&&this.failureCallback(this)}};var k=function(e){e.error=!1,e.state=B[e.state][C],setTimeout(function(){e.state===f&&(e.swapTime=+new Date,e.run(e),R(e,0))},0)},R=function(e,t){var r=t>l||+new Date-e.swapTime>p,a=function(t){if(t++,e.state===f)if(r&&(e.swapTime=+new Date),e.subtasks.length>0){var a=e.subtasks.shift();a.error=e.error,a.swapTime=e.swapTime,a.userData=e.userData,a.run(a),a.error||R(a,t)}else w(e),e.error||null!==e.parent&&(e.parent.error=e.error,e.parent.swapTime=e.swapTime,e.parent.userData=e.userData,R(e.parent,t))};r?setTimeout(a,0):a(t)},w=function(e,t){e.state=g,delete s[e.id],!1,null===e.parent&&(e.type in c?0===c[e.type].length?a.log.error(n,'[%s][%s] task queue empty [%s]',e.id,e.name,e.type):c[e.type][0]===e?(c[e.type].shift(),0===c[e.type].length?(!1,delete c[e.type]):(!1,c[e.type][0].start())):a.log.error(n,'[%s][%s] task not first in queue [%s]',e.id,e.name,e.type):a.log.error(n,'[%s][%s] task queue missing [%s]',e.id,e.name,e.type),t||(e.error&&e.failureCallback?e.failureCallback(e):!e.error&&e.successCallback&&e.successCallback(e)))};e.exports=a.task=a.task||{},a.task.start=function(e){var t=new N({run:e.run,name:e.name||u});t.type=e.type,t.successCallback=e.success||null,t.failureCallback=e.failure||null,t.type in c?c[e.type].push(t):(!1,c[t.type]=[t],k(t))},a.task.cancel=function(e){e in c&&(c[e]=[c[e][0]])},a.task.createCondition=function(){var e={tasks:{}};return e.wait=function(t){t.id in e.tasks||(t.block(),e.tasks[t.id]=t)},e.notify=function(){var t=e.tasks;for(var r in e.tasks={},t)t[r].unblock()},e}},function(e,t,r){e.exports=r(33)}])})}).call(exports,__webpack_require__(9),__webpack_require__(37).setImmediate,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){var _Mathlog=Math.log;var _MathLN=Math.LN2;var _Mathabs2=Math.abs;var _Mathsqrt=Math.sqrt;var _Mathround2=Math.round;var _Mathsin=Math.sin;var _Mathmax4=Math.max;var _Mathceil4=Math.ceil;var _Mathfloor3=Math.floor;var _Mathpow3=Math.pow;var _StringfromCharCode3=String.fromCharCode;var _Mathmin5=Math.min;(function(global,setImmediate){var require;var require;!function(e){if(!0)module.exports=e();else if('function'==typeof define&&define.amd)define([],e);else{var f;'undefined'==typeof window?'undefined'==typeof global?'undefined'!=typeof self&&(f=self):f=global:f=window,f.kbpgp=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=='function'&&require;if(!u&&a)return require(o,!0);if(i)return i(o,!0);var f=new Error('Cannot find module \''+o+'\'');throw f.code='MODULE_NOT_FOUND',f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=='function'&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(){var C,DSA,ECDH,ECDSA,ElGamal,RSA;C=require('./const').openpgp.public_key_algorithms,RSA=require('./rsa').RSA,DSA=require('./dsa').DSA,ElGamal=require('./elgamal').ElGamal,ECDSA=require('./ecc/ecdsa').ECDSA,ECDH=require('./ecc/ecdh').ECDH,exports.get_class=function(n){switch(n){case C.RSA:case C.RSA_ENCRYPT_ONLY:case C.RSA_SIGN_ONLY:return RSA;case C.ELGAMAL:return ElGamal;case C.DSA:return DSA;case C.ECDSA:return ECDSA;case C.ECDH:return ECDH;default:throw new Error('unknown public key system: '+n);}}}).call(this)},{'./const':5,'./dsa':6,'./ecc/ecdh':9,'./ecc/ecdsa':10,'./elgamal':12,'./rsa':67}],2:[function(require,module,exports){(function(Buffer){(function(){var BaseKey,BaseKeyPair,C,K,SHA256,SHA512,SRF,bn,bufeq_secure,iced,konst,__iced_k,__iced_k_noop,_ref;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},konst=require('./const'),C=konst.openpgp,K=konst.kb,_ref=require('./hash'),SHA256=_ref.SHA256,SHA512=_ref.SHA512,bn=require('./bn'),bufeq_secure=require('pgp-utils').util.bufeq_secure,SRF=require('./rand').SRF,exports.BaseKey=BaseKey=function(){function BaseKey(){}return BaseKey.alloc=function(klass,raw,d){var err,o,orig_len,_i,_len,_ref1,_ref2;for(d==null&&(d={}),orig_len=raw.length,err=null,_ref1=klass.ORDER,(_i=0,_len=_ref1.length);_i<_len;_i++)o=_ref1[_i],err==null&&(_ref2=bn.mpi_from_buffer(raw),err=_ref2[0],d[o]=_ref2[1],raw=_ref2[2]);return err?[err,null]:[null,new klass(d),orig_len-raw.length]},BaseKey.prototype.serialize=function(){var e;return Buffer.concat(function(){var _i,_len,_ref1,_results;for(_ref1=this.ORDER,_results=[],(_i=0,_len=_ref1.length);_i<_len;_i++)e=_ref1[_i],_results.push(this[e].to_mpi_buffer());return _results}.call(this))},BaseKey.prototype.validity_check=function(cb){return cb(null)},BaseKey}(),exports.BaseKeyPair=BaseKeyPair=function(){function BaseKeyPair(_arg){this.priv=_arg.priv,this.pub=_arg.pub,this.pub.parent=this,this.priv!=null&&(this.priv.parent=this)}return BaseKeyPair.prototype.serialize=function(){return this.pub.serialize()},BaseKeyPair.prototype.hash=function(){return SHA256(this.serialize())},BaseKeyPair.prototype.ekid=function(){return Buffer.concat([new Buffer([K.kid.version,this.get_type()]),this.hash(),new Buffer([K.kid.trailer])])},BaseKeyPair.prototype.can_sign=function(){return this.priv!=null},BaseKeyPair.prototype.can_decrypt=function(){return this.priv!=null},BaseKeyPair.prototype.has_private=function(){return this.priv!=null},BaseKeyPair.prototype.fulfills_flags=function(flags){return!1},BaseKeyPair.prototype.is_toxic=function(){return!1},BaseKeyPair.prototype.nbits=function(){var _ref1;return(_ref1=this.pub)==null?void 0:_ref1.nbits()},BaseKeyPair.prototype.good_for_flags=function(){return C.key_flags.encrypt_comm|C.key_flags.encrypt_storage|C.key_flags.certify_keys|C.key_flags.sign_data},BaseKeyPair.prototype.eq=function(k2){return this.type===k2.type&&bufeq_secure(this.serialize(),k2.serialize())},BaseKeyPair.prototype.can_perform=function(ops_mask){return(!(ops_mask&konst.ops.sign)||this.can_sign())&&(!(ops_mask&konst.ops.decrypt)||this.can_decrypt())},BaseKeyPair.parse=function(klass,pub_raw){var err,key,len,_ref1;return _ref1=klass.Pub.alloc(pub_raw),err=_ref1[0],key=_ref1[1],len=_ref1[2],key!=null&&(key=new klass({pub:key})),[err,key,len]},BaseKeyPair.parse_kb=function(klass,pub_raw){var err,key,len,_ref1;return _ref1=klass.Pub.alloc_kb(pub_raw),err=_ref1[0],key=_ref1[1],len=_ref1[2],key!=null&&(key=new klass({pub:key})),[err,key,len]},BaseKeyPair.prototype.add_priv=function(priv_raw){var err,len,_ref1;return _ref1=Priv.alloc(priv_raw),err=_ref1[0],this.priv=_ref1[1],len=_ref1[2],[err,len]},BaseKeyPair.alloc=function(klass,_arg){var err,priv,pub,_ref1,_ref2;return pub=_arg.pub,priv=_arg.priv,_ref1=klass.Pub.alloc(pub),err=_ref1[0],pub=_ref1[1],err==null&&priv!=null&&(_ref2=klass.Priv.alloc(priv,pub),err=_ref2[0],priv=_ref2[1]),err==null?[null,new klass({priv:priv,pub:pub})]:[err,null]},BaseKeyPair.prototype.read_priv=function(raw_priv){var err,_ref1;return _ref1=this.Priv.alloc(raw_priv,this.pub),err=_ref1[0],this.priv=_ref1[1],err},BaseKeyPair.prototype.find=function(i){return i.mod(this.max_value())},BaseKeyPair.prototype.hide=function(_arg,cb){var L,err,i,max,n,r,r_bits,ret,slosh,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),i=_arg.i,max=_arg.max,slosh=_arg.slosh,ret=err=null,n=this.max_value(),function(_this){return function(__iced_k){return(L=n.bitLength())>max?__iced_k(err=new Error('Can\'t hide > '+max+' bits; got '+L)):void(r_bits=max-L+slosh,function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/basekeypair.iced',funcname:'BaseKeyPair.hide'}),SRF().random_nbit(r_bits,__iced_deferrals.defer({assign_fn:function(){return function(){return r=arguments[0]}}(),lineno:127})),__iced_deferrals._fulfill()}(function(){return __iced_k(ret=r.multiply(n).add(i))}))}}(this)(function(_this){return function(){return cb(err,ret)}}(this))},BaseKeyPair.prototype.validity_check=function(cb){return this.pub.validity_check(cb)},BaseKeyPair}()}).call(this)}).call(this,require('buffer').Buffer)},{'./bn':4,'./const':5,'./hash':14,'./rand':65,'buffer':80,'iced-runtime':118,'pgp-utils':163}],3:[function(require,module,exports){(function(Buffer){(function(){var BaseX,BigInteger,base32,base58,buffer_to_ui8a,nbi,nbs,nbv,_ref;_ref=require('bn'),nbv=_ref.nbv,nbi=_ref.nbi,BigInteger=_ref.BigInteger,nbs=require('./bn').nbs,buffer_to_ui8a=require('./util').buffer_to_ui8a,BaseX=function(){function BaseX(alphabet){var a,i,_i,_len,_ref1;for(this.alphabet=alphabet,this.base=this.alphabet.length,this.basebn=nbv(this.base),this.lookup={},_ref1=this.alphabet,(i=_i=0,_len=_ref1.length);_i<_len;i=++_i)a=_ref1[i],this.lookup[a]=i}return BaseX.prototype.encode=function(buffer){var c,chars,num,pad,q,r,_i,_len;for(num=nbi().fromBuffer(buffer),chars=function(){var _ref1,_results;for(_results=[];num.compareTo(BigInteger.ZERO)>0;)_ref1=num.divideAndRemainder(this.basebn),q=_ref1[0],r=_ref1[1],c=this.alphabet[r.intValue()],num=q,_results.push(c);return _results}.call(this),chars.reverse(),pad=[],(_i=0,_len=buffer.length);_i<_len&&(c=buffer[_i],c===0);_i++)pad.push(this.alphabet[0]);return pad.concat(chars).join('')},BaseX.prototype.decode=function(str){var base,c,char_index,i,num,pad,start,_i,_j,_len,_ref1;for(num=BigInteger.ZERO,base=BigInteger.ONE,i=0,(i=_i=0,_len=str.length);_i<_len&&(c=str[i],c===this.alphabet[0]);i=++_i);for(start=i,pad=new Buffer(function(){var _j,_results;for(_results=[],i=_j=0;0<=start?_j<start:_j>start;i=0<=start?++_j:--_j)_results.push(0);return _results}()),_ref1=str.slice(start),i=_j=_ref1.length-1;_j>=0;i=_j+=-1){if(c=_ref1[i],(char_index=this.lookup[c])==null)throw new Error('Value passed is not a valid BaseX string.');num=num.add(base.multiply(nbv(char_index))),base=base.multiply(this.basebn)}return Buffer.concat([pad,new Buffer(num.toByteArray())])},BaseX}(),exports.base58=base58=new BaseX('123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'),exports.base32=base32=new BaseX('abcdefghijkmnpqrstuvwxyz23456789'),exports.base91=new BaseX('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`~!@#$%^&*()-_=+{}[]|;:,<>./?')}).call(this)}).call(this,require('buffer').Buffer)},{'./bn':4,'./util':70,'bn':71,'buffer':80}],4:[function(require,module,exports){(function(Buffer){(function(){var BigInteger,bn_from_left_n_bits,buffer_shift_right,buffer_to_ui8a,mpi_byte_length,mpi_from_buffer,mpi_to_padded_octets,nbi,nbits,nbs,nbv,toMPI,_ref;_ref=require('bn'),nbv=_ref.nbv,nbi=_ref.nbi,BigInteger=_ref.BigInteger,nbits=_ref.nbits,buffer_to_ui8a=require('./util').buffer_to_ui8a,nbs=function(s,base){var r;return base==null&&(base=10),r=nbi(),r.fromString(s,base)},mpi_byte_length=function(bn){return bn.toByteArray().length},toMPI=function(bn){var ba,hdr,size;return ba=bn.toByteArray(),size=(ba.length-1)*8+nbits(ba[0]),hdr=new Buffer(2),hdr.writeUInt16BE(size,0),Buffer.concat([hdr,new Buffer(ba)])},mpi_from_buffer=function(raw){var err,hdr,i,n_bits,n_bytes;return err=i=null,raw.length<2?err=new Error('need at least 2 bytes; got '+raw.length):(hdr=new Buffer(raw.slice(0,2)),raw=raw.slice(2),n_bits=hdr.readUInt16BE(0),n_bytes=_Mathceil4(n_bits/8),raw.length<n_bytes?err=new Error('MPI said '+n_bytes+' bytes but only got '+raw.length):(i=nbi().fromBuffer(raw.slice(0,n_bytes)),raw=raw.slice(n_bytes))),[err,i,raw,n_bytes+2]},mpi_to_padded_octets=function(bn,base){var ba,diff,i,n,pad;return n=base.mpi_byte_length(),ba=bn.toByteArray(),diff=n-ba.length,pad=new Buffer(function(){var _i,_results;for(_results=[],i=_i=0;0<=diff?_i<diff:_i>diff;i=0<=diff?++_i:--_i)_results.push(0);return _results}()),Buffer.concat([pad,new Buffer(ba)])},buffer_shift_right=function(buf,nbits){var c,i,l,mask,nbytes,nxt,rem,_i,_ref1;for(nbytes=nbits>>3,rem=nbits%8,buf=buf.slice(0,buf.length-nbytes),l=buf.length,mask=(1<<rem)-1,i=_i=_ref1=l-1;_ref1<=0?_i<=0:_i>=0;i=_ref1<=0?++_i:--_i)c=buf.readUInt8(i)>>rem,i>0&&(nxt=buf.readUInt8(i-1)&mask,c|=nxt<<8-rem),buf.writeUInt8(c,i);return buf},bn_from_left_n_bits=function(raw,bits){var buf,bytes,rem;return rem=bits%8,bytes=(bits>>3)+(rem?1:0),buf=raw.slice(0,bytes),rem>0&&(buf=buffer_shift_right(buf,8-rem)),nbi().fromBuffer(buf)},exports.toMPI=toMPI,exports.nbs=nbs,exports.mpi_from_buffer=mpi_from_buffer,exports.mpi_to_padded_octets=mpi_to_padded_octets,exports.buffer_shift_right=buffer_shift_right,exports.bn_from_left_n_bits=bn_from_left_n_bits,BigInteger.prototype.to_mpi_buffer=function(){return toMPI(this)},BigInteger.prototype.mpi_byte_length=function(){return mpi_byte_length(this)},BigInteger.prototype.to_padded_octets=function(base){return mpi_to_padded_octets(this,base)},exports.BigInteger=BigInteger,exports.nbi=nbi,exports.nbv=nbv,exports.nbits=nbits}).call(this)}).call(this,require('buffer').Buffer)},{'./util':70,'bn':71,'buffer':80}],5:[function(require,module,exports){(function(){var config,k,openpgp,v;for(k in exports.openpgp=openpgp={public_key_algorithms:{RSA:1,RSA_ENCRYPT_ONLY:2,RSA_SIGN_ONLY:3,ELGAMAL:16,DSA:17,ECDH:18,ECDSA:19,ELGAMAL_SIGN_AND_ENCRYPT:20},symmetric_key_algorithms:{CAST5:3,AES128:7,AES192:8,AES256:9},hash_algorithms:{MD5:1,SHA1:2,RIPEMD160:3,SHA256:8,SHA384:9,SHA512:10,SHA224:11},sig_subpacket:{creation_time:2,expiration_time:3,exportable_certificate:4,trust_signature:5,regular_expression:6,revocable:7,key_expiration_time:9,preferred_symmetric_algorithms:11,revocation_key:12,issuer:16,notation_data:20,preferred_hash_algorithms:21,preferred_compression_algorithms:22,key_server_preferences:23,preferred_key_server:24,primary_user_id:25,policy_uri:26,key_flags:27,signers_user_id:28,reason_for_revocation:29,features:30,signature_target:31,embedded_signature:32,experimental_low:101,experimental_high:110},sig_types:{binary_doc:0,canonical_text:1,issuer:16,persona:17,casual:18,positive:19,subkey_binding:24,primary_binding:25,direct:31,key_revocation:32,subkey_revocation:40,certificate_revocation:48},message_types:{generic:0,public_key:4,private_key:5,signature:8,clearsign:9},s2k:{plain:0,salt:1,salt_iter:3,gnu:101,gnu_dummy:1001},s2k_convention:{none:0,checksum:255,sha1:254},ecdh:{param_bytes:3,version:1},packet_tags:{PKESK:1,signature:2,one_pass_sig:4,secret_key:5,public_key:6,secret_subkey:7,compressed:8,literal:11,public_subkey:14,userid:13,user_attribute:17,SEIPD:18,MDC:19},literal_formats:{binary:98,text:116,utf8:117},versions:{PKESK:3,SEIPD:1,one_pass_sig:3,keymaterial:{V4:4},signature:{V2:2,V3:3,V4:4}},signatures:{key:153,userid:180,user_attribute:209},key_flags:{certify_keys:1,sign_data:2,encrypt_comm:4,encrypt_storage:8,private_split:16,auth:32,shared:128},features:{modification_detection:1},key_server_preferences:{no_modify:128},compression:{none:0,zip:1,zlib:2,bzip:3}},exports.kb={key_encryption:{none:0,triplesec_v1:1,triplesec_v2:2,triplesec_v3:3},packet_tags:{p3skb:513,signature:514,encryption:515},public_key_algorithms:{NACL_EDDSA:32,NACL_DH:33},versions:{V1:1},padding:{EMSA_PCKS1_v1_5:3,RSASSA_PSS:4},key_defaults:{primary:{expire_in:0,nbits:{RSA:4096,ECDSA:384,DSA:2048}},sub:{expire_in:24*60*60*365*8,nbits:{RSA:2048,ECDH:256,ECDSA:256,DSA:2048,ELGAMAL:2048}}},kid:{version:1,trailer:10,algo:8,len:32}},exports.ops={encrypt:1,decrypt:2,verify:4,sign:8},exports.header={version:'Keybase OpenPGP',comment:'https://keybase.io/crypto'},config={default_key_expire_in:24*60*60*365*4},config)v=config[k],exports[k]=v}).call(this)},{}],6:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},ASP,BaseKey,BaseKeyPair,BigInteger,C,K,MRF,Pair,Priv,Pub,SRF,bn,bufeq_secure,iced,konst,make_esc,nbits,nbv,__iced_k,__iced_k_noop,_ref,_ref1,_ref2,_ref3;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},bn=require('./bn'),nbits=bn.nbits,nbv=bn.nbv,BigInteger=bn.BigInteger,_ref=require('./rand'),SRF=_ref.SRF,MRF=_ref.MRF,_ref1=require('./util'),bufeq_secure=_ref1.bufeq_secure,ASP=_ref1.ASP,make_esc=require('iced-error').make_esc,konst=require('./const'),C=konst.openpgp,K=konst.kb,_ref2=require('./basekeypair'),BaseKey=_ref2.BaseKey,BaseKeyPair=_ref2.BaseKeyPair,_ref3=require('./rand'),SRF=_ref3.SRF,MRF=_ref3.MRF,Pub=function(_super){function Pub(_arg){this.p=_arg.p,this.q=_arg.q,this.g=_arg.g,this.y=_arg.y}return __extends(Pub,_super),Pub.type=C.public_key_algorithms.DSA,Pub.prototype.type=Pub.type,Pub.ORDER=['p','q','g','y'],Pub.prototype.ORDER=Pub.ORDER,Pub.alloc=function(raw){return BaseKey.alloc(Pub,raw)},Pub.prototype.trunc_hash=function(h){return bn.bn_from_left_n_bits(h,this.q.bitLength())},Pub.prototype.nbits=function(){var _ref4;return(_ref4=this.p)==null?void 0:_ref4.bitLength()},Pub.prototype.verify=function(_arg,h,cb){var err,hi,r,s,u1,u2,v,w;return r=_arg[0],s=_arg[1],err=null,hi=this.trunc_hash(h),w=s.modInverse(this.q),u1=hi.multiply(w).mod(this.q),u2=r.multiply(w).mod(this.q),v=this.g.modPow(u1,this.p).multiply(this.y.modPow(u2,this.p)).mod(this.p).mod(this.q),!v.equals(r)&&(err=new Error('verification failed')),cb(err)},Pub}(BaseKey),Priv=function(_super){function Priv(_arg){this.x=_arg.x,this.pub=_arg.pub}return __extends(Priv,_super),Priv.ORDER=['x'],Priv.prototype.ORDER=Priv.ORDER,Priv.alloc=function(raw,pub){return BaseKey.alloc(Priv,raw,{pub:pub})},Priv.prototype.sign=function(h,cb){var err,g,hi,k,p,q,r,s,___iced_passed_deferral,__iced_deferrals,__iced_k,_ref4;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=null,_ref4=this.pub,p=_ref4.p,q=_ref4.q,g=_ref4.g,hi=this.pub.trunc_hash(h),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/dsa.iced',funcname:'Priv.sign'}),SRF().random_zn(q.subtract(bn.nbv(2)),__iced_deferrals.defer({assign_fn:function(){return function(){return k=arguments[0]}}(),lineno:76})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return k=k.add(bn.BigInteger.ONE),r=g.modPow(k,p).mod(q),s=k.modInverse(q).multiply(hi.add(_this.x.multiply(r))).mod(q),cb([r,s])}}(this))},Priv}(BaseKey),Pair=function(_super){function Pair(_arg){var priv,pub;pub=_arg.pub,priv=_arg.priv,Pair.__super__.constructor.call(this,{pub:pub,priv:priv})}return __extends(Pair,_super),Pair.Pub=Pub,Pair.prototype.Pub=Pub,Pair.Priv=Priv,Pair.prototype.Priv=Priv,Pair.type=C.public_key_algorithms.DSA,Pair.prototype.type=Pair.type,Pair.prototype.get_type=function(){return this.type},Pair.klass_name='DSA',Pair.parse=function(pub_raw){return BaseKeyPair.parse(Pair,pub_raw)},Pair.prototype.can_encrypt=function(){return!1},Pair.prototype.fulfills_flags=function(flags){var good_for;return good_for=this.good_for_flags(),(flags&good_for)===flags},Pair.prototype.good_for_flags=function(){return C.key_flags.certify_keys|C.key_flags.sign_data},Pair.prototype.verify_unpad_and_check_hash=function(_arg,cb){var data,err,hash,hasher,sig,v,___iced_passed_deferral,__iced_deferrals,__iced_k,_ref4;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),sig=_arg.sig,data=_arg.data,hasher=_arg.hasher,hash=_arg.hash,err=null,Buffer.isBuffer(sig)&&(_ref4=Pair.read_sig_from_buf(sig),err=_ref4[0],sig=_ref4[1]),hash||(hash=hasher(data)),function(_this){return function(__iced_k){return sig.length===2?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/dsa.iced',funcname:'Pair.verify_unpad_and_check_hash'}),_this.pub.verify(sig,hash,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],v=arguments[1]}}(),lineno:126})),__iced_deferrals._fulfill()}(__iced_k):__iced_k(err=new Error('Expected 2 Bigints in the signature'))}}(this)(function(_this){return function(){return cb(err)}}(this))},Pair.prototype.pad_and_sign=function(data,_arg,cb){var h,hasher,s,sig,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),hasher=_arg.hasher,hasher||(hasher=SHA512),h=hasher(data),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/dsa.iced',funcname:'Pair.pad_and_sign'}),_this.priv.sign(h,__iced_deferrals.defer({assign_fn:function(){return function(){return sig=arguments[0]}}(),lineno:135})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(null,Buffer.concat(function(){var _i,_len,_results;for(_results=[],_i=0,_len=sig.length;_i<_len;_i++)s=sig[_i],_results.push(s.to_mpi_buffer());return _results}()))}}(this))},Pair.parse_sig=function(slice){var buf,err,n,ret,_ref4;if(buf=slice.peek_rest_to_buffer(),_ref4=Pair.read_sig_from_buf(buf),err=_ref4[0],ret=_ref4[1],n=_ref4[2],err!=null)throw err;return slice.advance(n),ret},Pair.read_sig_from_buf=function(buf){var err,n,o,order,orig_len,ret,x;return orig_len=buf.length,order=['r','s'],err=null,ret=function(){var _i,_len,_ref4,_results;for(_results=[],_i=0,_len=order.length;_i<_len;_i++)(o=order[_i],err==null)&&(_ref4=bn.mpi_from_buffer(buf),err=_ref4[0],x=_ref4[1],buf=_ref4[2],_results.push(x));return _results}(),n=orig_len-buf.length,[err,ret,n]},Pair}(BaseKeyPair),exports.DSA=exports.Pair=Pair}).call(this)}).call(this,require('buffer').Buffer)},{'./basekeypair':2,'./bn':4,'./const':5,'./rand':65,'./util':70,'buffer':80,'iced-error':115,'iced-runtime':118}],7:[function(require,module,exports){(function(Buffer){(function(){var BaseEccKey,SlicerBuffer,alloc_by_nbits,alloc_by_oid,iced,__iced_k,__iced_k_noop,_ref;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},SlicerBuffer=require('../openpgp/buffer').SlicerBuffer,_ref=require('./curves'),alloc_by_nbits=_ref.alloc_by_nbits,alloc_by_oid=_ref.alloc_by_oid,exports.BaseEccKey=BaseEccKey=function(){function BaseEccKey(_arg){this.curve=_arg.curve,this.R=_arg.R}return BaseEccKey.prototype.serialize=function(){var oid;return oid=this.curve.oid,Buffer.concat([new Buffer([oid.length]),oid,this.curve.point_to_mpi_buffer(this.R)])},BaseEccKey._alloc=function(klass,raw){var R,curve,err,l,len,oid,pre,pub,sb,_ref1,_ref2;if(sb=new SlicerBuffer(raw),pre=sb.rem(),l=sb.read_uint8(),oid=sb.read_buffer(l),_ref1=alloc_by_oid(oid),err=_ref1[0],curve=_ref1[1],err!=null)throw err;if(_ref2=curve.mpi_point_from_slicer_buffer(sb),err=_ref2[0],R=_ref2[1],err!=null)throw err;return pub=new klass({curve:curve,R:R}),pub.read_params(sb),len=pre-sb.rem(),[pub,len]},BaseEccKey.alloc=function(klass,raw){var e,err,len,pub,_ref1;pub=len=err=null;try{_ref1=BaseEccKey._alloc(klass,raw),pub=_ref1[0],len=_ref1[1]}catch(_error){e=_error,err=e}return[err,pub,len]},BaseEccKey.prototype.validity_check=function(cb){return cb(null)},BaseEccKey}(),exports.generate=function(_arg,cb){var Pair,R,asp,curve,err,nbits,priv,pub,ret,x,___iced_passed_deferral,__iced_deferrals,__iced_k,_ref1;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),nbits=_arg.nbits,asp=_arg.asp,Pair=_arg.Pair,ret=null,_ref1=alloc_by_nbits(nbits),err=_ref1[0],curve=_ref1[1],function(_this){return function(__iced_k){return err==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/ecc/base.iced',funcname:'generate'}),curve.random_scalar(__iced_deferrals.defer({assign_fn:function(){return function(){return x=arguments[0]}}(),lineno:55})),__iced_deferrals._fulfill()}(function(){return R=curve.G.multiply(x),pub=new Pair.Pub({curve:curve,R:R}),priv=new Pair.Priv({pub:pub,x:x}),__iced_k(ret=new Pair({pub:pub,priv:priv}))}):__iced_k()}}(this)(function(_this){return function(){return cb(err,ret)}}(this))}}).call(this)}).call(this,require('buffer').Buffer)},{'../openpgp/buffer':35,'./curves':8,'buffer':80,'iced-runtime':118}],8:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},BigInteger,Curve,H,OIDS,OID_LOOKUP,SRF,SlicerBuffer,base,bn,iced,k,nist_p256,nist_p384,nist_p521,uint_to_buffer,v,__iced_k,__iced_k_noop;for(k in iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},BigInteger=require('../bn').BigInteger,base=require('keybase-ecurve'),uint_to_buffer=require('../util').uint_to_buffer,SlicerBuffer=require('../openpgp/buffer').SlicerBuffer,SRF=require('../rand').SRF,bn=require('../bn'),exports.H=H=function(x){return BigInteger.fromHex(x.split(/\s+/).join(''))},exports.Curve=Curve=function(_super){function Curve(_arg){var Gx,Gy,a,b,h,n,p;p=_arg.p,a=_arg.a,b=_arg.b,Gx=_arg.Gx,Gy=_arg.Gy,n=_arg.n,h=_arg.h,this.oid=_arg.oid,h||(h=BigInteger.ONE),Curve.__super__.constructor.call(this,p,a,b,Gx,Gy,n,h)}return __extends(Curve,_super),Curve.prototype.mkpoint=function(_arg){var x,y;return x=_arg.x,y=_arg.y,base.Point.fromAffine(this,x,y)},Curve.prototype.nbits=function(){return this.p.bitLength()},Curve.prototype.mpi_bit_size=function(){return 2*this.mpi_coord_bit_size()+3},Curve.prototype.mpi_coord_byte_size=function(){return _Mathceil4(this.nbits()/8)},Curve.prototype.mpi_coord_bit_size=function(){return this.mpi_coord_byte_size()*8},Curve.prototype._mpi_point_from_slicer_buffer=function(sb){var b,n_bits,n_bytes,point,x,y,_ref;if(n_bits=sb.read_uint16(),n_bits!==(b=this.mpi_bit_size()))throw new Error('Need '+b+' bits for this curve; got '+n_bits);if(sb.read_uint8()!==4)throw new Error('Can only handle 0x4 prefix for MPI representations');if(n_bytes=this.mpi_coord_byte_size(),_ref=[BigInteger.fromBuffer(sb.read_buffer(n_bytes)),BigInteger.fromBuffer(sb.read_buffer(n_bytes))],x=_ref[0],y=_ref[1],point=this.mkpoint({x:x,y:y}),!this.isOnCurve(point))throw new Error('Given ECC point isn\'t on the given curve; data corruption detected.');return[null,point]},Curve.prototype.mpi_point_from_buffer=function(b){return this.mpi_point_from_slicer_buffer(new SlicerBuffer(b))},Curve.prototype.mpi_point_from_slicer_buffer=function(sb){var e,err,point,_ref;err=point=null;try{_ref=this._mpi_point_from_slicer_buffer(sb),err=_ref[0],point=_ref[1]}catch(_error){e=_error,err=e}return[err,point]},Curve.prototype.point_to_mpi_buffer_compact=function(p){return p.affineX.toBuffer(this.p.byteLength())},Curve.prototype.point_to_mpi_buffer=function(p){var ret,sz;return sz=this.mpi_coord_byte_size(),ret=Buffer.concat([uint_to_buffer(16,this.mpi_bit_size()),new Buffer([4]),p.affineX.toBuffer(sz),p.affineY.toBuffer(sz)]),ret},Curve.prototype.random_scalar=function(cb){var k,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/ecc/curves.iced',funcname:'Curve.random_scalar'}),SRF().random_zn(_this.n.subtract(bn.nbv(2)),__iced_deferrals.defer({assign_fn:function(){return function(){return k=arguments[0]}}(),lineno:97})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return k=k.add(bn.BigInteger.ONE),cb(k)}}(this))},Curve}(base.Curve),exports.nist_p256=nist_p256=function(){var Gx,Gy,a,b,n,p;return p=H('FFFFFFFF 00000001 00000000 00000000 00000000 FFFFFFFF FFFFFFFF FFFFFFFF'),a=H('FFFFFFFF 00000001 00000000 00000000 00000000 FFFFFFFF FFFFFFFF FFFFFFFC'),b=H('5AC635D8 AA3A93E7 B3EBBD55 769886BC 651D06B0 CC53B0F6 3BCE3C3E 27D2604B'),n=H('FFFFFFFF 00000000 FFFFFFFF FFFFFFFF BCE6FAAD A7179E84 F3B9CAC2 FC632551'),Gx=H('6B17D1F2 E12C4247 F8BCE6E5 63A440F2 77037D81 2DEB33A0 F4A13945 D898C296'),Gy=H('4FE342E2 FE1A7F9B 8EE7EB4A 7C0F9E16 2BCE3357 6B315ECE CBB64068 37BF51F5'),new Curve({p:p,a:a,b:b,Gx:Gx,Gy:Gy,n:n,oid:OIDS.nist_p256})},exports.nist_p384=nist_p384=function(){var Gx,Gy,a,b,n,p;return p=H('ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff'),a=H('ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc'),b=H('b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef'),n=H('ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973'),Gx=H('aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7'),Gy=H('3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f'),new Curve({p:p,a:a,b:b,Gx:Gx,Gy:Gy,n:n,oid:OIDS.nist_p384})},exports.nist_p521=nist_p521=function(){var Gx,Gy,a,b,n,p;return p=H('000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff'),a=H('000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc'),b=H('00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00'),n=H('000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409'),Gx=H('000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66'),Gy=H('00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650'),new Curve({p:p,a:a,b:b,Gx:Gx,Gy:Gy,n:n,oid:OIDS.nist_p521})},OIDS={nist_p256:new Buffer([42,134,72,206,61,3,1,7]),nist_p384:new Buffer([43,129,4,0,34]),nist_p521:new Buffer([43,129,4,0,35])},OID_LOOKUP={},OIDS)v=OIDS[k],OID_LOOKUP[v.toString('hex')]=exports[k];exports.alloc_by_oid=function(oid){var curve,err,f;return Buffer.isBuffer(oid)&&(oid=oid.toString('hex')),err=curve=null,(f=OID_LOOKUP[oid.toLowerCase()])==null?err=new Error('Unknown curve OID: '+oid):curve=f(),[err,curve]},exports.alloc_by_nbits=function(nbits){var err,f,ret;return ret=err=null,nbits||(nbits=256),f=function(){return nbits===256?nist_p256:nbits===384?nist_p384:nbits===521?nist_p521:null}(),f==null?err=new Error('No curve for '+nbits+' bits'):ret=f(),[err,ret]}}).call(this)}).call(this,require('buffer').Buffer)},{'../bn':4,'../openpgp/buffer':35,'../rand':65,'../util':70,'buffer':80,'iced-runtime':118,'keybase-ecurve':148}],9:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},ASP,BaseEccKey,BaseKey,BaseKeyPair,Const,Output,Pair,Priv,Pub,SlicerBuffer,bufeq_secure,ecc_pkcs5_pad_data,generate,hashmod,iced,konst,make_esc,sym,uint_to_buffer,unwrap,wrap,__iced_k,__iced_k_noop,_ref,_ref1,_ref2,_ref3;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},_ref=require('../util'),uint_to_buffer=_ref.uint_to_buffer,bufeq_secure=_ref.bufeq_secure,ASP=_ref.ASP,make_esc=require('iced-error').make_esc,konst=require('../const'),Const=konst.openpgp,_ref1=require('../basekeypair'),BaseKeyPair=_ref1.BaseKeyPair,BaseKey=_ref1.BaseKey,ecc_pkcs5_pad_data=require('../pad').ecc_pkcs5_pad_data,_ref2=require('./base'),generate=_ref2.generate,BaseEccKey=_ref2.BaseEccKey,hashmod=require('../hash'),sym=require('../symmetric'),SlicerBuffer=require('../openpgp/buffer').SlicerBuffer,_ref3=require('../rfc3394'),wrap=_ref3.wrap,unwrap=_ref3.unwrap,Pub=function(_super){function Pub(){return Pub.__super__.constructor.apply(this,arguments)}return __extends(Pub,_super),Pub.type=Const.public_key_algorithms.ECDH,Pub.prototype.type=Pub.type,Pub.prototype.apply_defaults=function(){return this.cipher||(this.cipher=sym.get_cipher()),this.hasher||(this.hasher=hashmod.SHA512)},Pub.prototype.read_params=function(sb){var n,size,v,val;if((size=sb.read_uint8())<(n=Const.ecdh.param_bytes))throw new Error('Need at least '+n+' bytes of params; got '+size);if((val=sb.read_uint8())!==(v=Const.ecdh.version))throw new Error('Cannot deal with future extensions, byte='+val+'; wanted '+v);return this.hasher=hashmod.alloc_or_throw(sb.read_uint8()),this.cipher=sym.get_cipher(sb.read_uint8()),sb.advance(size-3)},Pub.alloc=function(raw){return BaseEccKey.alloc(Pub,raw)},Pub.prototype.serialize_params=function(){return Buffer.concat([uint_to_buffer(8,Const.ecdh.param_bytes),uint_to_buffer(8,Const.ecdh.version),uint_to_buffer(8,this.hasher.type),uint_to_buffer(8,this.cipher.type)])},Pub.prototype.serialize=function(){return Buffer.concat([Pub.__super__.serialize.call(this),this.serialize_params()])},Pub.prototype.format_params=function(_arg){var fingerprint;return fingerprint=_arg.fingerprint,Buffer.concat([uint_to_buffer(8,this.curve.oid.length),this.curve.oid,uint_to_buffer(8,this.type),this.serialize_params(),new Buffer('Anonymous Sender    ','utf8'),fingerprint])},Pub.prototype.kdf=function(_arg){var X,X_compact,buf,hash,o_bytes,params;return X=_arg.X,params=_arg.params,o_bytes=this.cipher.key_size,X_compact=this.curve.point_to_mpi_buffer_compact(X),buf=Buffer.concat([new Buffer([0,0,0,1]),X_compact,params]),hash=this.hasher(buf),hash.slice(0,o_bytes)},Pub.prototype.encrypt=function(m,_arg,cb){var C,G,S,V,fingerprint,key,n,params,v,___iced_passed_deferral,__iced_deferrals,__iced_k,_ref4;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),fingerprint=_arg.fingerprint,_ref4=this.curve,n=_ref4.n,G=_ref4.G,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/ecc/ecdh.iced',funcname:'Pub.encrypt'}),_this.curve.random_scalar(__iced_deferrals.defer({assign_fn:function(){return function(){return v=arguments[0]}}(),lineno:100})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return V=G.multiply(v),S=_this.R.multiply(v),params=_this.format_params({fingerprint:fingerprint}),key=_this.kdf({X:S,params:params}),C=wrap({key:key,plaintext:m,cipher:_this.cipher}),cb({V:V,C:C})}}(this))},Pub}(BaseEccKey),Priv=function(_super){function Priv(_arg){this.x=_arg.x,this.pub=_arg.pub}return __extends(Priv,_super),Priv.ORDER=['x'],Priv.prototype.ORDER=Priv.ORDER,Priv.prototype.serialize=function(){return this.x.to_mpi_buffer()},Priv.alloc=function(raw,pub){return BaseKey.alloc(Priv,raw,{pub:pub})},Priv.prototype.decrypt=function(c,_arg,cb){var S,V,curve,err,esc,fingerprint,key,params,ret,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),fingerprint=_arg.fingerprint,esc=make_esc(cb,'Priv::decrypt'),curve=this.pub.curve,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/ecc/ecdh.iced',funcname:'Priv.decrypt'}),c.load_V(curve,esc(__iced_deferrals.defer({assign_fn:function(){return function(){return V=arguments[0]}}(),lineno:141}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){var _ref4;return S=V.multiply(_this.x),params=_this.pub.format_params({fingerprint:fingerprint}),key=_this.pub.kdf({X:S,params:params}),_ref4=unwrap({key:key,ciphertext:c.C,cipher:_this.pub.cipher}),err=_ref4[0],ret=_ref4[1],cb(err,ret)}}(this))},Priv}(BaseKey),Pair=function(_super){function Pair(){return Pair.__super__.constructor.apply(this,arguments)}return __extends(Pair,_super),Pair.Pub=Pub,Pair.prototype.Pub=Pub,Pair.Priv=Priv,Pair.prototype.Priv=Priv,Pair.type=Const.public_key_algorithms.ECDH,Pair.prototype.type=Pair.type,Pair.klass_name='ECDH',Pair.prototype.get_type=function(){return this.type},Pair.prototype.fulfills_flags=function(flags){var good_for;return good_for=Const.key_flags.encrypt_comm|Const.key_flags.encrypt_storage,(flags&good_for)===flags},Pair.prototype.can_sign=function(){return!1},Pair.parse=function(pub_raw){var ret;return ret=BaseKeyPair.parse(Pair,pub_raw),ret},Pair.prototype.max_value=function(){return this.pub.p},Pair.prototype.pad_and_encrypt=function(data,_arg,cb){var C,V,err,fingerprint,m,ret,___iced_passed_deferral,__iced_deferrals,__iced_k,_ref4;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),fingerprint=_arg.fingerprint,err=ret=null,_ref4=ecc_pkcs5_pad_data(data),err=_ref4[0],m=_ref4[1],function(_this){return function(__iced_k){return err==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/ecc/ecdh.iced',funcname:'Pair.pad_and_encrypt'}),_this.pub.encrypt(m,{fingerprint:fingerprint},__iced_deferrals.defer({assign_fn:function(){return function(){return C=arguments[0].C,V=arguments[0].V}}(),lineno:196})),__iced_deferrals._fulfill()}(function(){return __iced_k(ret=_this.export_output({C:C,V:V,curve:_this.pub.curve}))}):__iced_k()}}(this)(function(_this){return function(){return cb(err,ret)}}(this))},Pair.prototype.decrypt_and_unpad=function(ciphertext,_arg,cb){var err,fingerprint,m,ret,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),fingerprint=_arg.fingerprint,err=ret=null,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/ecc/ecdh.iced',funcname:'Pair.decrypt_and_unpad'}),_this.priv.decrypt(ciphertext,{fingerprint:fingerprint},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],m=arguments[1]}}(),lineno:204})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err,m,!0)}}(this))},Pair.parse_output=function(buf){return Output.parse(buf)},Pair.prototype.export_output=function(args){return new Output(args)},Pair.generate=function(_arg,cb){var asp,err,nbits,pair,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),nbits=_arg.nbits,asp=_arg.asp,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/ecc/ecdh.iced',funcname:'Pair.generate'}),generate({nbits:nbits,asp:asp,Pair:Pair},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],pair=arguments[1]}}(),lineno:215})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return(typeof err==='undefined'||err===null)&&pair.pub.apply_defaults(),cb(err,pair)}}(this))},Pair}(BaseKeyPair),Output=function(){function Output(_arg){this.V_buf=_arg.V_buf,this.C=_arg.C,this.V=_arg.V,this.curve=_arg.curve}return Output.prototype.load_V=function(curve,cb){var err,_ref4;return this.curve=curve,_ref4=curve.mpi_point_from_buffer(this.V_buf),err=_ref4[0],this.V=_ref4[1],cb(err,this.V)},Output.parse=function(buf){var C,V_buf,a,n_bits,n_bytes,ret,sb;if(sb=new SlicerBuffer(buf),n_bits=sb.read_uint16(),n_bytes=_Mathceil4(n_bits/8),V_buf=Buffer.concat([buf.slice(0,2),sb.read_buffer(n_bytes)]),n_bytes=sb.read_uint8(),C=sb.consume_rest_to_buffer(),(a=C.length)!==n_bytes)throw new Error('bad C input: wanted '+n_bytes+' bytes, but got '+a);return ret=new Output({V_buf:V_buf,C:C}),ret},Output.prototype.get_V_buf=function(){return this.V_buf==null&&(this.V_buf=this.curve.point_to_mpi_buffer(this.V)),this.V_buf},Output.prototype.hide=function(_arg,cb){var key,max,slosh;return key=_arg.key,max=_arg.max,slosh=_arg.slosh,cb(null)},Output.prototype.find=function(_arg){var key;key=_arg.key},Output.prototype.good_for_flags=function(){return C.key_flags.encrypt_comm|C.key_flags.encrypt_storage},Output.prototype.output=function(){return Buffer.concat([this.get_V_buf(),uint_to_buffer(8,this.C.length),this.C])},Output}(),exports.ECDH=exports.Pair=Pair}).call(this)}).call(this,require('buffer').Buffer)},{'../basekeypair':2,'../const':5,'../hash':14,'../openpgp/buffer':35,'../pad':62,'../rfc3394':66,'../symmetric':68,'../util':70,'./base':7,'buffer':80,'iced-error':115,'iced-runtime':118}],10:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},ASP,BaseEccKey,BaseKey,BaseKeyPair,BigInteger,C,ECDH,K,Pair,Priv,Pub,bn,bufeq_secure,generate,iced,konst,make_esc,nbits,nbv,uint_to_buffer,__iced_k,__iced_k_noop,_ref,_ref1,_ref2;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},bn=require('../bn'),nbits=bn.nbits,nbv=bn.nbv,BigInteger=bn.BigInteger,_ref=require('../util'),uint_to_buffer=_ref.uint_to_buffer,bufeq_secure=_ref.bufeq_secure,ASP=_ref.ASP,make_esc=require('iced-error').make_esc,konst=require('../const'),C=konst.openpgp,K=konst.kb,_ref1=require('../basekeypair'),BaseKeyPair=_ref1.BaseKeyPair,BaseKey=_ref1.BaseKey,_ref2=require('./base'),generate=_ref2.generate,BaseEccKey=_ref2.BaseEccKey,ECDH=require('./ecdh').ECDH,Pub=function(_super){function Pub(){return Pub.__super__.constructor.apply(this,arguments)}return __extends(Pub,_super),Pub.type=C.public_key_algorithms.ECDSA,Pub.prototype.type=Pub.type,Pub.prototype.nbits=function(){return this.curve.nbits()},Pub.prototype.read_params=function(sb){},Pub.prototype.trunc_hash=function(h){return bn.bn_from_left_n_bits(h,this.nbits())},Pub.alloc=function(raw){return BaseEccKey.alloc(Pub,raw)},Pub.prototype.verify=function(_arg,h,cb){var err,hi,n,p,r,s,u1,u2,v,w;return r=_arg[0],s=_arg[1],err=null,hi=this.trunc_hash(h),r.signum()<=0||r.compareTo(this.curve.p)>0?err=new Error('bad r'):r.signum()<=0||s.compareTo(this.curve.p)>0?err=new Error('bad s'):(n=this.curve.n,w=s.modInverse(n),u1=hi.multiply(w).mod(n),u2=r.multiply(w).mod(n),p=this.curve.G.multiplyTwo(u1,this.R,u2),v=p.affineX.mod(n),!v.equals(r)&&(err=new Error('verification failed'))),cb(err)},Pub}(BaseEccKey),Priv=function(_super){function Priv(_arg){this.x=_arg.x,this.pub=_arg.pub}return __extends(Priv,_super),Priv.ORDER=['x'],Priv.prototype.ORDER=Priv.ORDER,Priv.alloc=function(raw,pub){return BaseKey.alloc(Priv,raw,{pub:pub})},Priv.prototype.sign=function(h,cb){var G,Q,err,hi,k,n,r,s,___iced_passed_deferral,__iced_deferrals,__iced_k,_ref3;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=null,_ref3=this.pub.curve,n=_ref3.n,G=_ref3.G,hi=this.pub.trunc_hash(h),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/ecc/ecdsa.iced',funcname:'Priv.sign'}),_this.pub.curve.random_scalar(__iced_deferrals.defer({assign_fn:function(){return function(){return k=arguments[0]}}(),lineno:79})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){if(Q=G.multiply(k),r=Q.affineX.mod(n),r.signum()===0)throw new Error('invalid r-value');return s=k.modInverse(n).multiply(hi.add(_this.x.multiply(r))).mod(n),cb([r,s])}}(this))},Priv}(BaseKey),Pair=function(_super){function Pair(_arg){var priv,pub;pub=_arg.pub,priv=_arg.priv,Pair.__super__.constructor.call(this,{pub:pub,priv:priv})}return __extends(Pair,_super),Pair.Pub=Pub,Pair.prototype.Pub=Pub,Pair.Priv=Priv,Pair.prototype.Priv=Priv,Pair.type=C.public_key_algorithms.ECDSA,Pair.prototype.type=Pair.type,Pair.klass_name='ECDSA',Pair.prototype.get_type=function(){return this.type},Pair.parse=function(pub_raw){return BaseKeyPair.parse(Pair,pub_raw)},Pair.prototype.can_encrypt=function(){return!1},Pair.subkey_algo=function(flags){return flags&(C.key_flags.certify_keys|C.key_flags.sign_data)?Pair:ECDH},Pair.prototype.fulfills_flags=function(flags){var good_for;return good_for=C.key_flags.certify_keys|C.key_flags.sign_data,(flags&good_for)===flags},Pair.prototype.verify_unpad_and_check_hash=function(_arg,cb){var data,err,hash,hasher,sig,v,___iced_passed_deferral,__iced_deferrals,__iced_k,_ref3;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),sig=_arg.sig,data=_arg.data,hasher=_arg.hasher,hash=_arg.hash,err=null,Buffer.isBuffer(sig)&&(_ref3=Pair.read_sig_from_buf(sig),err=_ref3[0],sig=_ref3[1]),hash||(hash=hasher(data)),function(_this){return function(__iced_k){return sig.length===2?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/ecc/ecdsa.iced',funcname:'Pair.verify_unpad_and_check_hash'}),_this.pub.verify(sig,hash,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],v=arguments[1]}}(),lineno:132})),__iced_deferrals._fulfill()}(__iced_k):__iced_k(err=new Error('Expected 2 Bigints in the signature'))}}(this)(function(_this){return function(){return cb(err)}}(this))},Pair.prototype.pad_and_sign=function(data,_arg,cb){var h,hasher,s,sig,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),hasher=_arg.hasher,hasher||(hasher=SHA512),h=hasher(data),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/ecc/ecdsa.iced',funcname:'Pair.pad_and_sign'}),_this.priv.sign(h,__iced_deferrals.defer({assign_fn:function(){return function(){return sig=arguments[0]}}(),lineno:141})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(null,Buffer.concat(function(){var _i,_len,_results;for(_results=[],_i=0,_len=sig.length;_i<_len;_i++)s=sig[_i],_results.push(s.to_mpi_buffer());return _results}()))}}(this))},Pair.parse_sig=function(slice){var buf,err,n,ret,_ref3;if(buf=slice.peek_rest_to_buffer(),_ref3=Pair.read_sig_from_buf(buf),err=_ref3[0],ret=_ref3[1],n=_ref3[2],err!=null)throw err;return slice.advance(n),ret},Pair.read_sig_from_buf=function(buf){var err,n,o,order,orig_len,ret,x;return orig_len=buf.length,order=['r','s'],err=null,ret=function(){var _i,_len,_ref3,_results;for(_results=[],_i=0,_len=order.length;_i<_len;_i++)(o=order[_i],err==null)&&(_ref3=bn.mpi_from_buffer(buf),err=_ref3[0],x=_ref3[1],buf=_ref3[2],_results.push(x));return _results}(),n=orig_len-buf.length,[err,ret,n]},Pair.prototype.good_for_flags=function(){return C.key_flags.certify_keys|C.key_flags.sign_data},Pair.generate=function(_arg,cb){var asp,nbits;return nbits=_arg.nbits,asp=_arg.asp,generate({nbits:nbits,asp:asp,Pair:Pair},cb)},Pair}(BaseKeyPair),exports.ECDSA=exports.Pair=Pair}).call(this)}).call(this,require('buffer').Buffer)},{'../basekeypair':2,'../bn':4,'../const':5,'../util':70,'./base':7,'./ecdh':9,'buffer':80,'iced-error':115,'iced-runtime':118}],11:[function(require,module,exports){(function(){exports.curves=require('./curves'),exports.ECDSA=require('./ecdsa').ECDSA,exports.ECDH=require('./ecdh').ECDH}).call(this)},{'./curves':8,'./ecdh':9,'./ecdsa':10}],12:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},ASP,BaseKey,BaseKeyPair,C,K,MRF,Output,Pair,Priv,Pub,SRF,bn,bufeq_secure,eme_pkcs1_decode,eme_pkcs1_encode,iced,konst,make_esc,__iced_k,__iced_k_noop,_ref,_ref1,_ref2,_ref3;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},bn=require('./bn'),_ref=require('./util'),bufeq_secure=_ref.bufeq_secure,ASP=_ref.ASP,make_esc=require('iced-error').make_esc,konst=require('./const'),C=konst.openpgp,K=konst.kb,_ref1=require('./basekeypair'),BaseKeyPair=_ref1.BaseKeyPair,BaseKey=_ref1.BaseKey,_ref2=require('./rand'),SRF=_ref2.SRF,MRF=_ref2.MRF,_ref3=require('./pad'),eme_pkcs1_encode=_ref3.eme_pkcs1_encode,eme_pkcs1_decode=_ref3.eme_pkcs1_decode,Pub=function(_super){function Pub(_arg){this.p=_arg.p,this.g=_arg.g,this.y=_arg.y}return __extends(Pub,_super),Pub.type=C.public_key_algorithms.ELGAMAL,Pub.prototype.type=Pub.type,Pub.ORDER=['p','g','y'],Pub.prototype.ORDER=Pub.ORDER,Pub.alloc=function(raw){return BaseKey.alloc(Pub,raw)},Pub.prototype.encrypt=function(m,cb){var c,k,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/elgamal.iced',funcname:'Pub.encrypt'}),SRF().random_zn(_this.p.subtract(bn.nbv(2)),__iced_deferrals.defer({assign_fn:function(){return function(){return k=arguments[0]}}(),lineno:35})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return k=k.add(bn.BigInteger.ONE),c=[_this.g.modPow(k,_this.p),_this.y.modPow(k,_this.p).multiply(m).mod(_this.p)],cb(c)}}(this))},Pub}(BaseKey),Priv=function(_super){function Priv(_arg){this.x=_arg.x,this.pub=_arg.pub}return __extends(Priv,_super),Priv.ORDER=['x'],Priv.prototype.ORDER=Priv.ORDER,Priv.prototype.serialize=function(){return this.x.to_mpi_buffer()},Priv.alloc=function(raw,pub){return BaseKey.alloc(Priv,raw,{pub:pub})},Priv.prototype.decrypt=function(c,cb){var p,ret;return p=this.pub.p,ret=c[0].modPow(this.x,p).modInverse(p).multiply(c[1]).mod(p),cb(null,ret)},Priv}(BaseKey),Pair=function(_super){function Pair(_arg){var priv,pub;pub=_arg.pub,priv=_arg.priv,Pair.__super__.constructor.call(this,{pub:pub,priv:priv})}return __extends(Pair,_super),Pair.Pub=Pub,Pair.prototype.Pub=Pub,Pair.Priv=Priv,Pair.prototype.Priv=Priv,Pair.type=C.public_key_algorithms.ELGAMAL,Pair.klass_name='ELGAMAL',Pair.prototype.type=Pair.type,Pair.prototype.get_type=function(){return this.type},Pair.prototype.fulfills_flags=function(flags){var good_for;return good_for=this.good_for_flags(),(flags&good_for)===flags},Pair.prototype.good_for_flags=function(){return C.key_flags.encrypt_comm|C.key_flags.encrypt_storage},Pair.prototype.can_sign=function(){return!1},Pair.parse=function(pub_raw){var ret;return ret=BaseKeyPair.parse(Pair,pub_raw),ret},Pair.prototype.max_value=function(){return this.pub.p},Pair.prototype.pad_and_encrypt=function(data,params,cb){var c_mpis,err,m,ret,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=ret=null,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/elgamal.iced',funcname:'Pair.pad_and_encrypt'}),eme_pkcs1_encode(data,_this.pub.p.mpi_byte_length(),__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],m=arguments[1]}}(),lineno:112})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){return err==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/elgamal.iced',funcname:'Pair.pad_and_encrypt'}),_this.pub.encrypt(m,__iced_deferrals.defer({assign_fn:function(){return function(){return c_mpis=arguments[0]}}(),lineno:114})),__iced_deferrals._fulfill()}(function(){return __iced_k(ret=_this.export_output({c_mpis:c_mpis}))}):__iced_k()})(function(){return cb(err,ret)})}}(this))},Pair.prototype.decrypt_and_unpad=function(ciphertext,params,cb){var b,err,m,ret,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=ret=null,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/elgamal.iced',funcname:'Pair.decrypt_and_unpad'}),_this.priv.decrypt(ciphertext.c(),__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],m=arguments[1]}}(),lineno:122})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){var _ref4;return err==null&&(b=m.to_padded_octets(_this.pub.p),_ref4=eme_pkcs1_decode(b),err=_ref4[0],ret=_ref4[1]),cb(err,ret)}}(this))},Pair.parse_output=function(buf){return Output.parse(buf)},Pair.prototype.export_output=function(args){return new Output(args)},Pair}(BaseKeyPair),Output=function(){function Output(_arg){this.c_mpis=_arg.c_mpis,this.c_bufs=_arg.c_bufs}return Output.parse=function(buf){var c_mpis,err,i,n,ret;if(c_mpis=function(){var _i,_ref4,_results;for(_results=[],i=_i=0;_i<2;i=++_i){if(_ref4=bn.mpi_from_buffer(buf),err=_ref4[0],ret=_ref4[1],buf=_ref4[2],n=_ref4[3],err!=null)throw err;_results.push(ret)}return _results}(),buf.length!==0)throw new Error('junk at the end of input');return new Output({c_mpis:c_mpis})},Output.prototype.c=function(){return this.c_mpis},Output.prototype.hide=function(_arg,cb){var c_mpi,err,key,max,new_c_mpis,slosh,tmp,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),key=_arg.key,max=_arg.max,slosh=_arg.slosh,max||(max=4096),slosh||(slosh=128),err=null,this.c_bufs=null,new_c_mpis=[],function(_this){return function(__iced_k){var _i,_len,_ref4,_results,_while;_ref4=_this.c_mpis,_len=_ref4.length,_i=0,_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return++_i,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},_i<_len?void(c_mpi=_ref4[_i],function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/elgamal.iced',funcname:'Output.hide'}),key.hide({i:c_mpi,max:max,slosh:slosh},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],tmp=arguments[1]}}(),lineno:164})),__iced_deferrals._fulfill()}(function(){new_c_mpis.push(tmp),function(__iced_k){return err==null?__iced_k():void function(__iced_k){_break()}(__iced_k)}(_next)})):_break()},_while(__iced_k)}}(this)(function(_this){return function(){return err==null&&(_this.c_mpis=new_c_mpis),cb(err)}}(this))},Output.prototype.find=function(_arg){var j,key;return key=_arg.key,this.c_mpis=function(){var _i,_len,_ref4,_results;for(_ref4=this.c_mpis,_results=[],(_i=0,_len=_ref4.length);_i<_len;_i++)j=_ref4[_i],_results.push(key.find(j));return _results}.call(this)},Output.prototype.get_c_bufs=function(){var i;return this.c_bufs==null?this.c_bufs=function(){var _i,_len,_ref4,_results;for(_ref4=this.c_mpis,_results=[],(_i=0,_len=_ref4.length);_i<_len;_i++)i=_ref4[_i],_results.push(i.to_mpi_buffer());return _results}.call(this):this.c_bufs},Output.prototype.output=function(){return Buffer.concat(this.get_c_bufs())},Output}(),exports.ElGamal=exports.Pair=Pair}).call(this)}).call(this,require('buffer').Buffer)},{'./basekeypair':2,'./bn':4,'./const':5,'./pad':62,'./rand':65,'./util':70,'buffer':80,'iced-error':115,'iced-runtime':118}],13:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},ASP,BaseKey,BaseKeyPair,C,K,MRF,Pair,Priv,Pub,SRF,bn,bufeq_secure,eme_pkcs1_decode,eme_pkcs1_encode,konst,make_esc,_ref,_ref1,_ref2,_ref3;bn=require('./bn'),_ref=require('./util'),bufeq_secure=_ref.bufeq_secure,ASP=_ref.ASP,make_esc=require('iced-error').make_esc,konst=require('./const'),C=konst.openpgp,K=konst.kb,_ref1=require('./basekeypair'),BaseKeyPair=_ref1.BaseKeyPair,BaseKey=_ref1.BaseKey,_ref2=require('./rand'),SRF=_ref2.SRF,MRF=_ref2.MRF,_ref3=require('./pad'),eme_pkcs1_encode=_ref3.eme_pkcs1_encode,eme_pkcs1_decode=_ref3.eme_pkcs1_decode,Pub=function(_super){function Pub(raw){this.raw=raw}return __extends(Pub,_super),Pub.type=C.public_key_algorithms.ELGAMAL_SIGN_AND_ENCRYPT,Pub.prototype.type=Pub.type,Pub.ORDER=[],Pub.prototype.ORDER=Pub.ORDER,Pub.alloc=function(raw){return BaseKey.alloc(Pub,raw)},Pub.prototype.encrypt=function(m,cb){return cb(null)},Pub}(BaseKey),Priv=function(_super){function Priv(raw){this.raw=raw}return __extends(Priv,_super),Priv.ORDER=[],Priv.prototype.ORDER=Priv.ORDER,Priv.prototype.serialize=function(){return null},Priv.alloc=function(raw,pub){return BaseKey.alloc(Priv,raw,{pub:pub})},Priv.prototype.decrypt=function(c,cb){return cb(null)},Priv}(BaseKey),Pair=function(_super){function Pair(_arg){var priv,pub;pub=_arg.pub,priv=_arg.priv,Pair.__super__.constructor.call(this,{pub:pub,priv:priv})}return __extends(Pair,_super),Pair.Pub=Pub,Pair.prototype.Pub=Pub,Pair.Priv=Priv,Pair.prototype.Priv=Priv,Pair.type=C.public_key_algorithms.ELGAMAL_SIGN_AND_ENCRYPT,Pair.prototype.type=Pair.type,Pair.prototype.fulfills_flags=function(flags){return!1},Pair.prototype.is_toxic=function(){return!0},Pair.prototype.can_sign=function(){return!1},Pair.prototype.can_decrypt=function(){return!1},Pair.prototype.err=function(){return new Error('refusing to use ElGamal Sign+Encrypt')},Pair.parse=function(pub_raw){var ret;return ret=BaseKeyPair.parse(Pair,pub_raw),ret},Pair.prototype.pad_and_encrypt=function(data,cb){return cb(this.err(),null)},Pair.prototype.decrypt_and_unpad=function(ciphertext,params,cb){return cb(this.err(),null)},Pair.parse_output=function(buf){return null},Pair.prototype.export_output=function(args){return null},Pair}(BaseKeyPair),exports.ElGamalSignEncrypt=exports.Pair=Pair}).call(this)},{'./basekeypair':2,'./bn':4,'./const':5,'./pad':62,'./rand':65,'./util':70,'iced-error':115}],14:[function(require,module,exports){(function(){var C,WordArray,algos,alloc,alloc_or_throw,decorate,k,make_hasher,make_streamer,streamers,triplesec,v,_lookup,_ref;for(k in C=require('./const').openpgp,triplesec=require('triplesec'),WordArray=triplesec.WordArray,algos=triplesec.hash,decorate=function(f,klass,name,type){return f.type=type,f.algname=name,f.output_length=klass.output_size,f.klass=klass,f},make_hasher=function(klass,name,type){var f;return klass==null?null:(f=function(x){return new klass().bufhash(x)},decorate(f,klass,name,type))},make_streamer=function(klass,name,type){return function(){var obj,ret;return obj=new klass,ret=function(buf){return obj.clone().finalize(buf==null?null:WordArray.from_buffer(buf)).to_buffer()},ret.update=function(buf){return buf!=null&&obj.update(WordArray.from_buffer(buf)),this},decorate(ret,klass,name,type)}},_lookup={},exports.streamers=streamers={},_ref=C.hash_algorithms,_ref)v=_ref[k],_lookup[v]=k,exports[k]=make_hasher(algos[k],k,v),streamers[k]=make_streamer(algos[k],k,v);exports.alloc=alloc=function(typ){var klass,name,ret;return ret=null,name=_lookup[typ],name!=null&&(klass=algos[name]),klass!=null&&(ret=make_hasher(klass,name,typ)),ret},exports.alloc_or_throw=alloc_or_throw=function(typ){var ret;if(ret=alloc(typ),!ret)throw new Error('unknown hash type: '+typ);return ret}}).call(this)},{'./const':5,'triplesec':181}],15:[function(require,module,exports){(function(){var C,pjs;C=require('./const'),pjs=require('../package.json'),exports.header={version:C.header.version+(' v'+pjs.version),comment:C.header.comment}}).call(this)},{'../package.json':202,'./const':5}],16:[function(require,module,exports){(function(Buffer){(function(){var K,SHA256,alloc,bufeq_secure,katch,null_hash,obj_extract,pack,purepack,read_base64,seal,unpack,unseal,_ref,_ref1;K=require('../const').kb,_ref=require('../hash'),alloc=_ref.alloc,SHA256=_ref.SHA256,purepack=require('purepack'),_ref1=require('../util'),katch=_ref1.katch,obj_extract=_ref1.obj_extract,bufeq_secure=_ref1.bufeq_secure,null_hash=new Buffer(0),pack=function(x){return purepack.pack(x,{sort_keys:!0})},unpack=function(x){return purepack.unpack(x)},seal=function(_arg){var dohash,hasher,obj,oo,packed;return obj=_arg.obj,dohash=_arg.dohash,hasher=SHA256,oo={version:K.versions.V1,tag:obj.tag,body:obj.body},dohash&&(oo.hash={type:hasher.type,value:null_hash},packed=pack(oo),oo.hash.value=hasher(packed)),pack(oo)},read_base64=function(raw){var parts;return parts=raw.split(/\s+/).join(''),new Buffer(parts,'base64')},unseal=function(buf){var h,hasher,hv,oo,t,_ref2;if(oo=unpack(buf),(hv=oo==null||(_ref2=oo.hash)==null?void 0:_ref2.value)!=null){if(oo.hash.value=null_hash,hasher=alloc(t=oo.hash.type),hasher==null)throw new Error('unknown hash algo: '+t);if(h=hasher(pack(oo)),!bufeq_secure(h,hv))throw new Error('hash mismatch');if(oo.version!==K.versions.V1)throw new Error('unknown version')}return obj_extract(oo,['tag','body'])},exports.seal=seal,exports.pack=pack,exports.unseal=unseal,exports.unpack=unpack,exports.read_base64=read_base64}).call(this)}).call(this,require('buffer').Buffer)},{'../const':5,'../hash':14,'../util':70,'buffer':80,'purepack':169}],17:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1},C,DH,EdDSA,EncKeyManager,Encryption,K,KeyManager,KeyManagerInterface,Signature,SignatureEngine,akatch,alloc,asyncify,base64u,box,buffer_xor,encode,iced,konst,make_esc,unbox,__iced_k,__iced_k_noop,_ref;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},KeyManagerInterface=require('../kmi').KeyManagerInterface,make_esc=require('iced-error').make_esc,encode=require('./encode'),_ref=require('../util'),base64u=_ref.base64u,buffer_xor=_ref.buffer_xor,asyncify=_ref.asyncify,akatch=_ref.akatch,konst=require('../const'),alloc=require('./packet/alloc').alloc,Signature=require('./packet/signature').Signature,Encryption=require('./packet/encryption').Encryption,EdDSA=require('../nacl/eddsa').EdDSA,DH=require('../nacl/dh').DH,K=konst.kb,C=konst.openpgp,KeyManager=function(_super){function KeyManager(_arg){this.key=_arg.key,this.server_half=_arg.server_half}return __extends(KeyManager,_super),KeyManager.generate=function(_arg,cb){var algo,err,key,klass,seed,server_half,split,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),algo=_arg.algo,seed=_arg.seed,split=_arg.split,server_half=_arg.server_half,klass=_arg.klass,algo||(algo=EdDSA),klass||(klass=KeyManager),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/hilev.iced',funcname:'KeyManager.generate'}),algo.generate({split:split,seed:seed,server_half:server_half},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],key=arguments[1],server_half=arguments[2]}}(),lineno:29})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err,new klass({key:key,server_half:server_half}))}}(this))},KeyManager.prototype.get_mask=function(){return C.key_flags.sign_data|C.key_flags.certify_keys|C.key_flags.auth},KeyManager.prototype.fetch=function(key_ids,flags,cb){var err,key,mask,s;return s=this.key.ekid().toString('hex'),key=null,mask=this.get_mask(),__indexOf.call(key_ids,s)>=0&&(flags&mask)===flags?key=this.key:err=new Error('Key not found'),cb(err,key)},KeyManager.prototype.get_keypair=function(){return this.key},KeyManager.prototype.get_primary_keypair=function(){return this.key},KeyManager.prototype.can_verify=function(){return!0},KeyManager.prototype.can_sign=function(){var _ref1;return(_ref1=this.key)==null?void 0:_ref1.can_sign()},KeyManager.prototype.eq=function(km2){return this.key.eq(km2.key)},KeyManager.import_public=function(_arg,cb){var err,hex,key,raw,ret,___iced_passed_deferral,__iced_deferrals,__iced_k,_ref1;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),hex=_arg.hex,raw=_arg.raw,err=ret=null,hex!=null&&(raw=new Buffer(hex,'hex')),_ref1=EdDSA.parse_kb(raw),err=_ref1[0],key=_ref1[1],function(_this){return function(__iced_k){return err==null?__iced_k(ret=new KeyManager({key:key})):void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/hilev.iced',funcname:'KeyManager.import_public'}),EncKeyManager.import_public({raw:raw},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],ret=arguments[1]}}(),lineno:67})),__iced_deferrals._fulfill()}(__iced_k)}}(this)(function(_this){return function(){return cb(err,ret)}}(this))},KeyManager.prototype.check_public_eq=function(km2){return this.eq(km2)},KeyManager.prototype.export_public=function(_arg,cb){var asp,regen,ret;return asp=_arg.asp,regen=_arg.regen,ret=this.key.ekid().toString('hex'),cb(null,ret)},KeyManager.prototype.export_server_half=function(){var _ref1;return(_ref1=this.server_half)==null?void 0:_ref1.toString('hex')},KeyManager.prototype.get_ekid=function(){return this.get_keypair().ekid()},KeyManager.prototype.get_fp2=function(){return this.get_ekid()},KeyManager.prototype.get_fp2_formatted=function(){return base64u.encode(this.get_fp2())},KeyManager.prototype.get_type=function(){return'kb'},KeyManager.prototype.make_sig_eng=function(){return new SignatureEngine({km:this})},KeyManager}(KeyManagerInterface),EncKeyManager=function(_super){function EncKeyManager(){return EncKeyManager.__super__.constructor.apply(this,arguments)}return __extends(EncKeyManager,_super),EncKeyManager.generate=function(params,cb){return params.algo=DH,params.klass=EncKeyManager,KeyManager.generate(params,cb)},EncKeyManager.prototype.make_sig_eng=function(){return null},EncKeyManager.prototype.can_sign=function(){return!1},EncKeyManager.prototype.can_verify=function(){return!1},EncKeyManager.prototype.can_encrypt=function(){return!0},EncKeyManager.prototype.can_decrypt=function(){var _ref1;return((_ref1=this.key)==null?void 0:_ref1.priv)!=null},EncKeyManager.prototype.get_mask=function(){return C.key_flags.encrypt_comm|C.key_flags.encrypt_storage},EncKeyManager.import_public=function(_arg,cb){var err,hex,key,raw,ret,_ref1;return hex=_arg.hex,raw=_arg.raw,err=ret=null,hex!=null&&(raw=new Buffer(hex,'hex')),_ref1=DH.parse_kb(raw),err=_ref1[0],key=_ref1[1],err==null&&(ret=new EncKeyManager({key:key})),cb(err,ret)},EncKeyManager}(KeyManager),exports.unbox=unbox=function(_arg,cb){var armored,binary,encrypt_for,esc,packet,rawobj,res,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),armored=_arg.armored,binary=_arg.binary,rawobj=_arg.rawobj,encrypt_for=_arg.encrypt_for,esc=make_esc(cb,'unbox'),function(_this){return function(__iced_k){return armored==null&&rawobj==null&&binary==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/hilev.iced'}),athrow(new Error('need either \'armored\' or \'binary\' or \'rawobj\''),esc(__iced_deferrals.defer({lineno:137}))),__iced_deferrals._fulfill()}(__iced_k):__iced_k()}}(this)(function(_this){return function(){armored!=null&&(binary=new Buffer(armored,'base64')),function(__iced_k){return binary==null?__iced_k():void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/hilev.iced'}),akatch(function(){return encode.unseal(binary)},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return rawobj=arguments[0]}}(),lineno:142}))),__iced_deferrals._fulfill()}(__iced_k)}(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/hilev.iced'}),asyncify(alloc(rawobj),esc(__iced_deferrals.defer({assign_fn:function(){return function(){return packet=arguments[0]}}(),lineno:144}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/hilev.iced'}),packet.unbox({encrypt_for:encrypt_for},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return res=arguments[0]}}(),lineno:145}))),__iced_deferrals._fulfill()})(function(){return res.keypair!=null&&(res.km=new KeyManager({key:res.keypair})),res.sender_keypair!=null&&(res.sender_km=new KeyManager({key:res.sender_keypair})),res.receiver_keypair!=null&&(res.receiver_km=new KeyManager({key:res.receiver_keypair})),cb(null,res,binary)})})})}}(this))},box=function(_arg,cb){var anonymous,armored,encrypt_for,esc,msg,packed,packet,sealed,sign_with,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),msg=_arg.msg,sign_with=_arg.sign_with,encrypt_for=_arg.encrypt_for,anonymous=_arg.anonymous,esc=make_esc(cb,'box'),function(_this){return function(__iced_k){encrypt_for==null?function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/hilev.iced'}),Signature.box({km:sign_with,payload:msg},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return packet=arguments[0]}}(),lineno:163}))),__iced_deferrals._fulfill()}(__iced_k):function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/hilev.iced'}),Encryption.box({sign_with:sign_with,encrypt_for:encrypt_for,plaintext:msg,anonymous:anonymous},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return packet=arguments[0]}}(),lineno:161}))),__iced_deferrals._fulfill()}(__iced_k)}}(this)(function(_this){return function(){return packed=packet.frame_packet(),sealed=encode.seal({obj:packed,dohash:!1}),armored=sealed.toString('base64'),cb(null,armored,sealed)}}(this))},SignatureEngine=function(){function SignatureEngine(_arg){this.km=_arg.km}return SignatureEngine.prototype.get_km=function(){return this.km},SignatureEngine.prototype.box=function(msg,cb){var armored,esc,out,raw,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'SignatureEngine::box'),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/hilev.iced',funcname:'SignatureEngine.box'}),box({msg:msg,sign_with:_this.km},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return armored=arguments[0],raw=arguments[1]}}(),lineno:182}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return out={type:'kb',armored:armored,kb:armored,raw:raw},cb(null,out)}}(this))},SignatureEngine.prototype.unbox=function(msg,cb){var a,arg,b,binary,err,esc,payload,res,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'SignatureEngine::unbox'),err=payload=null,arg=Buffer.isBuffer(msg)?{binary:msg}:{armored:msg},function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/hilev.iced',funcname:'SignatureEngine.unbox'}),unbox(arg,esc(__iced_deferrals.defer({assign_fn:function(){return function(){return res=arguments[0],binary=arguments[1]}}(),lineno:193}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return res.km.eq(_this.km)?payload=res.payload:(a=res.km.get_ekid().toString('hex'),b=_this.km.get_ekid().toString('hex'),err=new Error('Got wrong signing key: '+a+' != '+b)),cb(err,payload,binary)}}(this))},SignatureEngine}(),module.exports={box:box,unbox:unbox,KeyManager:KeyManager,EncKeyManager:EncKeyManager}}).call(this)}).call(this,require('buffer').Buffer)},{'../const':5,'../kmi':27,'../nacl/dh':30,'../nacl/eddsa':31,'../util':70,'./encode':16,'./packet/alloc':18,'./packet/encryption':20,'./packet/signature':22,'buffer':80,'iced-error':115,'iced-runtime':118}],18:[function(require,module,exports){(function(){var Encryption,K,P3SKB,Signature;K=require('../../const').kb,P3SKB=require('./p3skb').P3SKB,Signature=require('./signature').Signature,Encryption=require('./encryption').Encryption,exports.alloc=function(_arg){var body,err,ret,tag;return tag=_arg.tag,body=_arg.body,ret=err=null,ret=function(){return tag===K.packet_tags.p3skb?P3SKB.alloc({tag:tag,body:body}):tag===K.packet_tags.signature?Signature.alloc({tag:tag,body:body}):tag===K.packet_tags.encryption?Encryption.alloc({tag:tag,body:body}):(err=new Error('unknown packet tag: '+tag),null)}(),[err,ret]}}).call(this)},{'../../const':5,'./encryption':20,'./p3skb':21,'./signature':22}],19:[function(require,module,exports){(function(){var K,Packet,seal,util;util=require('../../util'),seal=require('../encode').seal,K=require('../../const').kb,Packet=function(){function Packet(){}return Packet.prototype.frame_packet=function(){return{tag:this.tag(),body:this.get_packet_body()}},Packet.prototype.frame_packet_armored=function(_arg){var dohash,obj;return dohash=_arg.dohash,obj=this.frame_packet(),seal({obj:obj,dohash:dohash}).toString('base64')},Packet.prototype.is_signature=function(){return!1},Packet.prototype.is_p3skb=function(){return!1},Packet.alloc=function(_arg){var P3SKB,Signature,body,err,ret,tag;return tag=_arg.tag,body=_arg.body,ret=err=null,ret=function(){return tag===K.packet_tags.p3skb?(P3SKB=require('./p3skb').P3SKB,P3SKB.alloc({tag:tag,body:body})):tag===K.packet_tags.signature?(Signature=require('./signature').Signature,Signature.alloc({tag:tag,body:body})):(err=new Error('unknown packet tag: '+tag),null)}(),[err,ret]},Packet.prototype.unbox=function(params,cb){return cb(new Error('unbox() unimplemented for tag='+this.tag))},Packet}(),exports.Packet=Packet}).call(this)},{'../../const':5,'../../util':70,'../encode':16,'./p3skb':21,'./signature':22}],20:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},C,Encryption,K,Packet,dh,iced,konst,make_esc,__iced_k,__iced_k_noop;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},konst=require('../../const'),K=konst.kb,C=konst.openpgp,Packet=require('./base').Packet,make_esc=require('iced-error').make_esc,dh=require('../../nacl/main').dh,Encryption=function(_super){function Encryption(_arg){this.encrypt_for=_arg.encrypt_for,this.sign_with=_arg.sign_with,this.plaintext=_arg.plaintext,this.ciphertext=_arg.ciphertext,this.sender_key=_arg.sender_key,this.nonce=_arg.nonce,this.anonymous=_arg.anonymous,Encryption.__super__.constructor.call(this),this.emphemeral=!1}return __extends(Encryption,_super),Encryption.ENC_TYPE=K.public_key_algorithms.NACL_DH,Encryption.tag=function(){return K.packet_tags.encryption},Encryption.prototype.tag=function(){return Encryption.tag()},Encryption.prototype.get_packet_body=function(){var enc_type;return enc_type=Encryption.ENC_TYPE,{sender_key:this.sender_key,ciphertext:this.ciphertext,nonce:this.nonce,enc_type:enc_type,receiver_key:this.receiver_key}},Encryption.alloc=function(_arg){var a,b,body,err,ret,tag;if(tag=_arg.tag,body=_arg.body,ret=null,err=tag===Encryption.tag()?(a=body.enc_type)===(b=Encryption.ENC_TYPE)?(ret=new Encryption(body),null):err=new Error('Expected Curve25519 DH (type '+b+'); got '+a):new Error('wrong tag found: '+tag),err!=null)throw err;return ret},Encryption.prototype.is_signature=function(){return!1},Encryption.prototype.get_sender_keypair=function(_arg,cb){var encrypt,err,ret,sign_with,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),sign_with=_arg.sign_with,encrypt=_arg.encrypt,err=ret=null,function(_this){return function(__iced_k){return sign_with==null?void function(__iced_k){return _this.sign_with==null?void function(__iced_k){return _this.sender_keypair==null?void function(__iced_k){var _ref;return encrypt?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/packet/encryption.iced',funcname:'Encryption.get_sender_keypair'}),dh.Pair.generate({},__iced_deferrals.defer({assign_fn:function(__slot_1){return function(){return err=arguments[0],__slot_1.sender_keypair=arguments[1]}}(_this),lineno:56})),__iced_deferrals._fulfill()}(function(){return ret=_this.sender_keypair,__iced_k(_this.emphemeral=!0)}):__iced_k(_this.sender_key==null?err=new Error('Cannot encrypt without a sender keypair'):(_ref=dh.Pair.parse_kb(_this.sender_key),err=_ref[0],_this.sender_keypair=_ref[1],_ref,err==null?ret=_this.sender_keypair:void 0))}(__iced_k):__iced_k(ret=_this.sender_keypair)}(__iced_k):__iced_k(ret=_this.sign_with.get_keypair())}(__iced_k):__iced_k(ret=sign_with.get_keypair())}}(this)(function(_this){return function(){return cb(err,ret)}}(this))},Encryption.prototype.encrypt=function(params,cb){var esc,plaintext,recvr,sender,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'encrypt'),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/packet/encryption.iced',funcname:'Encryption.encrypt'}),_this.get_sender_keypair({encrypt:!0},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return sender=arguments[0]}}(),lineno:71}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){recvr=_this.encrypt_for.get_keypair(),plaintext=Buffer.concat([_this.plaintext,new Buffer([_this.emphemeral?1:0])]),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/packet/encryption.iced',funcname:'Encryption.encrypt'}),recvr.encrypt_kb({plaintext:plaintext,sender:sender},esc(__iced_deferrals.defer({assign_fn:function(__slot_1,__slot_2){return function(){return __slot_1.ciphertext=arguments[0].ciphertext,__slot_2.nonce=arguments[0].nonce}}(_this,_this),lineno:77}))),__iced_deferrals._fulfill()}(function(){return(!_this.anonymous||_this.emphemeral)&&(_this.sender_key=sender.ekid()),!_this.anonymous&&(_this.receiver_key=recvr.ekid()),cb(null)})}}(this))},Encryption.prototype.decrypt=function(_arg,cb){var args,encrypt_for,esc,plaintext,recvr,sender,sign_with,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),sign_with=_arg.sign_with,encrypt_for=_arg.encrypt_for,esc=make_esc(cb,'decrypt'),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/packet/encryption.iced',funcname:'Encryption.decrypt'}),_this.get_sender_keypair({sign_with:sign_with},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return sender=arguments[0]}}(),lineno:86}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){args={ciphertext:_this.ciphertext,nonce:_this.nonce,sender:sender},recvr=encrypt_for.get_keypair(),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/packet/encryption.iced',funcname:'Encryption.decrypt'}),recvr.decrypt_kb(args,esc(__iced_deferrals.defer({assign_fn:function(){return function(){return plaintext=arguments[0]}}(),lineno:89}))),__iced_deferrals._fulfill()}(function(){return _this.plaintext=plaintext.slice(0,-1),_this.emphemeral=plaintext.slice(-1)[0],cb(null,{sender_keypair:sender,plaintext:_this.plaintext,emphemeral:_this.emphemeral,receiver_keypair:recvr})})}}(this))},Encryption.prototype.unbox=function(_arg,cb){var encrypt_for,err,res,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),encrypt_for=_arg.encrypt_for,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/packet/encryption.iced',funcname:'Encryption.unbox'}),_this.decrypt({encrypt_for:encrypt_for},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],res=arguments[1]}}(),lineno:97})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err,res)}}(this))},Encryption.box=function(_arg,cb){var anonymous,encrypt_for,err,packet,plaintext,sign_with,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),sign_with=_arg.sign_with,encrypt_for=_arg.encrypt_for,plaintext=_arg.plaintext,anonymous=_arg.anonymous,packet=new Encryption({sign_with:sign_with,encrypt_for:encrypt_for,plaintext:plaintext,anonymous:anonymous}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/packet/encryption.iced',funcname:'Encryption.box'}),packet.encrypt({},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:104})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return typeof err!=='undefined'&&err!==null&&(packet=null),cb(err,packet)}}(this))},Encryption}(Packet),exports.Encryption=Encryption}).call(this)}).call(this,require('buffer').Buffer)},{'../../const':5,'../../nacl/main':32,'./base':19,'buffer':80,'iced-error':115,'iced-runtime':118}],21:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},Decryptor,K,P3SKB,Packet,SHA512,box,bufeq_secure,bufferify,iced,make_esc,native_rng,pack,rsa,triplesec,__iced_k,__iced_k_noop,_ref,_ref1;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},K=require('../../const').kb,triplesec=require('triplesec'),SHA512=require('../../hash').SHA512,Decryptor=triplesec.Decryptor,native_rng=triplesec.prng.native_rng,Packet=require('./base').Packet,_ref=require('../encode'),pack=_ref.pack,box=_ref.box,make_esc=require('iced-error').make_esc,rsa=require('../../rsa'),_ref1=require('../../util'),bufeq_secure=_ref1.bufeq_secure,bufferify=_ref1.bufferify,P3SKB=function(_super){function P3SKB(_arg){var priv,priv_clear;this.pub=_arg.pub,priv_clear=_arg.priv_clear,priv=_arg.priv,this.type=_arg.type,P3SKB.__super__.constructor.call(this),this.priv=priv==null?priv_clear==null?void 0:{data:priv_clear,encryption:K.key_encryption.none}:priv}return __extends(P3SKB,_super),P3SKB.tag=function(){return K.packet_tags.p3skb},P3SKB.prototype.tag=function(){return P3SKB.tag()},P3SKB.prototype.get_packet_body=function(){var ret;return ret={pub:this.pub,priv:this.priv},this.type!=null&&(ret.type=this.type),ret},P3SKB.prototype.lock=function(_arg,cb){var asp,ct,err,tsenc,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),asp=_arg.asp,tsenc=_arg.tsenc,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/packet/p3skb.iced',funcname:'P3SKB.lock'}),tsenc.run({data:_this.priv.data,progress_hook:asp==null?void 0:asp.progress_hook()},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],ct=arguments[1]}}(),lineno:30})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return(typeof err==='undefined'||err===null)&&(_this.priv.data=ct,_this.priv.encryption=K.key_encryption.triplesec_v3),cb(err)}}(this))},P3SKB.prototype.unlock=function(_arg,cb){var asp,dec,err,progress_hook,raw,tsenc,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),asp=_arg.asp,tsenc=_arg.tsenc,function(_this){return function(__iced_k){switch(_this.priv.encryption){case K.key_encryption.triplesec_v3:case K.key_encryption.triplesec_v2:case K.key_encryption.triplesec_v1:dec=new Decryptor({enc:tsenc}),progress_hook=asp==null?void 0:asp.progress_hook(),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/packet/p3skb.iced',funcname:'P3SKB.unlock'}),dec.run({data:_this.priv.data,progress_hook:progress_hook},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],raw=arguments[1]}}(),lineno:41})),__iced_deferrals._fulfill()}(function(){return dec.scrub(),__iced_k(typeof err==='undefined'||err===null?(_this.priv.data=raw,_this.priv.encryption=K.key_encryption.none):void 0)});break;case K.key_encryption.none:return __iced_k();default:return __iced_k(err=new Error('Unknown key encryption type: '+k.encryption));}}}(this)(function(_this){return function(){return cb(err)}}(this))},P3SKB.alloc=function(_arg){var body,tag;if(tag=_arg.tag,body=_arg.body,tag===P3SKB.tag())return new P3SKB(body);throw new Error('wrong tag found: '+tag)},P3SKB.prototype.has_private=function(){return this.priv!=null},P3SKB.prototype.is_locked=function(){return this.priv.encryption!==K.key_encryption.none},P3SKB.prototype.get_private_data=function(){var _ref2;return(_ref2=this.priv)==null?void 0:_ref2.data},P3SKB.prototype.get_public_data=function(){return this.pub},P3SKB.prototype.get_key_type=function(){return this.type},P3SKB.prototype.is_p3skb=function(){return!0},P3SKB}(Packet),exports.P3SKB=P3SKB}).call(this)},{'../../const':5,'../../hash':14,'../../rsa':67,'../../util':70,'../encode':16,'./base':19,'iced-error':115,'iced-runtime':118,'triplesec':181}],22:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},C,K,Packet,Signature,eddsa,iced,konst,make_esc,__iced_k,__iced_k_noop;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},konst=require('../../const'),K=konst.kb,C=konst.openpgp,Packet=require('./base').Packet,make_esc=require('iced-error').make_esc,eddsa=require('../../nacl/main').eddsa,Signature=function(_super){function Signature(_arg){this.key=_arg.key,this.payload=_arg.payload,this.sig=_arg.sig,this.detached=_arg.detached,Signature.__super__.constructor.call(this)}return __extends(Signature,_super),Signature.SIG_TYPE=K.public_key_algorithms.NACL_EDDSA,Signature.HASH_TYPE=C.hash_algorithms.SHA512,Signature.tag=function(){return K.packet_tags.signature},Signature.prototype.tag=function(){return Signature.tag()},Signature.prototype.get_packet_body=function(){var hash_type,sig_type;return sig_type=Signature.SIG_TYPE,hash_type=Signature.HASH_TYPE,{key:this.key,payload:this.payload,sig:this.sig,detached:this.detached,sig_type:sig_type,hash_type:hash_type}},Signature.alloc=function(_arg){var a,b,body,err,ret,tag;if(tag=_arg.tag,body=_arg.body,ret=null,err=tag===Signature.tag()?(a=body.hash_type)===(b=Signature.HASH_TYPE)?(a=body.sig_type)===(b=Signature.SIG_TYPE)?(ret=new Signature(body),null):err=new Error('Expected EDDSA (type '+b+'); got '+a):new Error('Expected SHA512 (type '+b+'); got '+a):new Error('wrong tag found: '+tag),err!=null)throw err;return ret},Signature.prototype.is_signature=function(){return!0},Signature.prototype.verify=function(cb){var err,esc,km,pair,___iced_passed_deferral,__iced_deferrals,__iced_k,_ref;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'verify'),err=km=null,_ref=eddsa.Pair.parse_kb(this.key),err=_ref[0],pair=_ref[1],function(_this){return function(__iced_k){return err==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/packet/signature.iced',funcname:'Signature.verify'}),pair.verify_kb(_this,esc(__iced_deferrals.defer({lineno:58}))),__iced_deferrals._fulfill()}(__iced_k):__iced_k()}}(this)(function(_this){return function(){return cb(err,{keypair:pair,payload:_this.payload})}}(this))},Signature.prototype.unbox=function(params,cb){var err,res,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/packet/signature.iced',funcname:'Signature.unbox'}),_this.verify(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],res=arguments[1]}}(),lineno:64})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err,res)}}(this))},Signature.box=function(_arg,cb){var detached,esc,km,packet,pair,payload,sig,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),km=_arg.km,payload=_arg.payload,esc=make_esc(cb,'@sign'),pair=km.get_keypair(),detached=!0,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/packet/signature.iced',funcname:'Signature.box'}),pair.sign_kb({payload:payload,detached:detached},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return sig=arguments[0]}}(),lineno:73}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return packet=new Signature({key:pair.ekid(),payload:payload,sig:sig,detached:detached}),cb(null,packet)}}(this))},Signature}(Packet),exports.Signature=Signature,exports.sign=Signature.sign}).call(this)},{'../../const':5,'../../nacl/main':32,'./base':19,'iced-error':115,'iced-runtime':118}],23:[function(require,module,exports){(function(Buffer){(function(){var SRF,bufxor,genseed,iced,__iced_k,__iced_k_noop;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},SRF=require('../rand').SRF,exports.bufxor=bufxor=function(b1,b2){var arr,c,i;return arr=function(){var _i,_len,_results;for(_results=[],i=_i=0,_len=b1.length;_i<_len;i=++_i)c=b1[i],_results.push(c^b2[i]);return _results}(),new Buffer(arr)},exports.genseed=genseed=function(_arg,cb){var err,len,rseed,seed,server_half,split,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),seed=_arg.seed,split=_arg.split,len=_arg.len,server_half=_arg.server_half,err=rseed=null,server_half==null&&(server_half=null),function(_this){return function(__iced_k){return seed==null||split&&server_half==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/keybase/util.iced'}),SRF().random_bytes(len,__iced_deferrals.defer({assign_fn:function(){return function(){return rseed=arguments[0]}}(),lineno:16})),__iced_deferrals._fulfill()}(__iced_k):__iced_k()}}(this)(function(_this){return function(){return seed!=null&&seed.length!==len?err=new Error('Wrong seed length; need '+len+' bytes; got '+seed.length):seed!=null&&rseed!=null?(server_half=rseed,seed=bufxor(seed,rseed)):seed!=null&&server_half!=null?seed=bufxor(seed,server_half):seed==null&&(seed=rseed),cb(err,{seed:seed,server_half:server_half})}}(this))}}).call(this)}).call(this,require('buffer').Buffer)},{'../rand':65,'buffer':80,'iced-runtime':118}],24:[function(require,module,exports){(function(){var KeyFetcher;KeyFetcher=function(){function KeyFetcher(){}return KeyFetcher.prototype.fetch=function(ids,ops,cb){return cb(new Error('not implemented'))},KeyFetcher}(),exports.KeyFetcher=KeyFetcher}).call(this)},{}],25:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},KeyFetcher,PgpKeyRing,hexkid;KeyFetcher=require('./keyfetch').KeyFetcher,hexkid=function(k){return k.toString('hex')},PgpKeyRing=function(_super){function PgpKeyRing(){this._keys={},this._kms={}}return __extends(PgpKeyRing,_super),PgpKeyRing.prototype.add_key_manager=function(km){var k,keys,kid,_i,_len,_results;for(keys=km.export_pgp_keys_to_keyring(),_results=[],(_i=0,_len=keys.length);_i<_len;_i++)k=keys[_i],kid=hexkid(k.key_material.get_key_id()),this._keys[kid]=k,_results.push(this._kms[kid]=km);return _results},PgpKeyRing.prototype.fetch=function(key_ids,ops,cb){var err,i,id,k,key_material,km,obj,ret_i,_i,_len,_ref;for(key_material=err=obj=null,key_ids=function(){var _i,_len,_results;for(_results=[],_i=0,_len=key_ids.length;_i<_len;_i++)k=key_ids[_i],_results.push(hexkid(k));return _results}(),km=null,(i=_i=0,_len=key_ids.length);_i<_len;i=++_i)if(id=key_ids[i],k=this._keys[id],k==null||(_ref=k.key)==null?void 0:_ref.can_perform(ops)){ret_i=i,km=this._kms[id];break}return km==null&&(err=new Error('key not found: '+JSON.stringify(key_ids))),cb(err,km,ret_i)},PgpKeyRing.prototype.find_best_key=function(_arg,cb){var err,flags,key,key_id,kid,km;return key_id=_arg.key_id,flags=_arg.flags,(km=this._kms[kid=hexkid(key_id)])==null?err=new Error('Could not find key for fingerprint '+kid):(key=km.find_best_pgp_key(flags))==null&&(err=new Error('no matching key for flags: '+flags)),cb(err,key)},PgpKeyRing.prototype.lookup=function(key_id){return this._keys[hexkid(key_id)]},PgpKeyRing}(KeyFetcher),exports.PgpKeyRing=PgpKeyRing,exports.KeyRing=PgpKeyRing}).call(this)},{'./keyfetch':24}],26:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},C,KeyWrapper,Lifespan,Primary,Subkey;C=require('./const'),Lifespan=function(){function Lifespan(_arg){this.generated=_arg.generated,this.expire_in=_arg.expire_in,this.expire_in==null&&(this.expire_in=C.default_key_expire_in)}return Lifespan}(),KeyWrapper=function(){function KeyWrapper(_arg){this.key=_arg.key,this.lifespan=_arg.lifespan,this._pgp=_arg._pgp,this._keybase=_arg._keybase,this.flags=_arg.flags}return KeyWrapper.prototype.ekid=function(){return this.key.ekid()},KeyWrapper}(),Subkey=function(_super){function Subkey(_arg){var flags,key,lifespan,_keybase,_pgp;key=_arg.key,flags=_arg.flags,_pgp=_arg._pgp,_keybase=_arg._keybase,this.desc=_arg.desc,lifespan=_arg.lifespan,this.primary=_arg.primary,Subkey.__super__.constructor.call(this,{key:key,lifespan:lifespan,flags:flags,_pgp:_pgp,_keybase:_keybase})}return __extends(Subkey,_super),Subkey}(KeyWrapper),Primary=function(_super){function Primary(_arg){var flags,key,lifespan,_keybase,_pgp;key=_arg.key,lifespan=_arg.lifespan,flags=_arg.flags,_pgp=_arg._pgp,_keybase=_arg._keybase,Primary.__super__.constructor.call(this,{key:key,lifespan:lifespan,flags:flags,_pgp:_pgp,_keybase:_keybase})}return __extends(Primary,_super),Primary}(KeyWrapper),exports.Lifespan=Lifespan,exports.Subkey=Subkey,exports.Primary=Primary}).call(this)},{'./const':5}],27:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},EUI,KeyFetcher,KeyManagerInterface,SignatureEngineInterface;KeyFetcher=require('./keyfetch').KeyFetcher,EUI=new Error('not implemented'),exports.KeyManagerInterface=KeyManagerInterface=function(_super){function KeyManagerInterface(){}return __extends(KeyManagerInterface,_super),KeyManagerInterface.prototype.get_pgp_fingerprint=function(){return null},KeyManagerInterface.prototype.get_ekid=function(){return null},KeyManagerInterface.prototype.get_fp2=function(){return null},KeyManagerInterface.prototype.get_fp2_formatted=function(){return null},KeyManagerInterface.prototype.get_type=function(){return null},KeyManagerInterface.prototype.check_public_eq=function(km2){return this.EUI},KeyManagerInterface.prototype.get_userids=function(){return[]},KeyManagerInterface.prototype.get_primary_keypair=function(){return null},KeyManagerInterface.prototype.get_all_pgp_key_materials=function(){return[]},KeyManagerInterface.prototype.get_userids_mark_primary=function(){return[]},KeyManagerInterface.prototype.make_sig_eng=function(){return null},KeyManagerInterface.prototype.export_public=function(_arg,cb){var asp,regen;return asp=_arg.asp,regen=_arg.regen,cb(EUI,null)},KeyManagerInterface.prototype.can_verify=function(){return!1},KeyManagerInterface.prototype.can_sign=function(){return!1},KeyManagerInterface.prototype.can_encrypt=function(){return!1},KeyManagerInterface.prototype.can_decrypt=function(){return!1},KeyManagerInterface}(KeyFetcher),exports.SignatureEngineInterface=SignatureEngineInterface=function(){function SignatureEngineInterface(_arg){this.km=_arg.km}return SignatureEngineInterface.prototype.get_km=function(){return this.km},SignatureEngineInterface.prototype.box=function(msg,cb){return cb(EUI)},SignatureEngineInterface.prototype.unbox=function(msb,cb){return cb(EUI)},SignatureEngineInterface}()}).call(this)},{'./keyfetch':24}],28:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},Lock,NamedLock,Table,iced,__iced_k,__iced_k_noop;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},Lock=function(){function Lock(){this._open=!0,this._waiters=[]}return Lock.prototype.acquire=function(cb){return this._open?(this._open=!1,cb()):this._waiters.push(cb)},Lock.prototype.release=function(){var w;return this._waiters.length?(w=this._waiters.shift(),w()):this._open=!0},Lock.prototype.open=function(){return this._open},Lock}(),NamedLock=function(_super){function NamedLock(tab,name){this.tab=tab,this.name=name,NamedLock.__super__.constructor.call(this),this.refs=0}return __extends(NamedLock,_super),NamedLock.prototype.incref=function(){return++this.refs},NamedLock.prototype.decref=function(){return--this.refs},NamedLock.prototype.release=function(){if(NamedLock.__super__.release.call(this),this.decref()===0)return delete this.tab[this.name]},NamedLock}(Lock),Table=function(){function Table(){this.locks={}}return Table.prototype.create=function(name){var l;return l=new NamedLock(this,name),this.locks[name]=l},Table.prototype.acquire=function(name,cb,wait){var l,was_open,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),l=this.locks[name]||this.create(name),was_open=l._open,l.incref(),function(_this){return function(__iced_k){return wait||l._open?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/lock.iced',funcname:'Table.acquire'}),l.acquire(__iced_deferrals.defer({lineno:68})),__iced_deferrals._fulfill()}(__iced_k):__iced_k(l=null)}}(this)(function(_this){return function(){return cb(l,was_open)}}(this))},Table.prototype.lookup=function(name){return this.locks[name]},Table}(),exports.Lock=Lock,exports.Table=Table}).call(this)},{'iced-runtime':118}],29:[function(require,module,exports){(function(Buffer){(function(){var k,m,mods,util,v,_i,_len;for(mods=[require('./openpgp/keymanager'),require('./basex'),require('./openpgp/burner'),require('./openpgp/hilev'),require('./keyfetch'),require('./keyring')],_i=0,_len=mods.length;_i<_len;_i++)for(k in m=mods[_i],m)v=m[k],exports[k]=v;exports.util=util=require('./util'),exports.ASP=util.ASP,exports.rand=require('./rand'),exports['const']=require('./const'),exports.processor=require('./openpgp/processor'),exports.armor=require('./openpgp/armor'),exports.keyring=require('./keyring'),exports.parser=require('./openpgp/parser'),exports.Buffer=Buffer,exports.triplesec=require('triplesec'),exports.hash=require('./hash'),exports.ecc=require('./ecc/main'),exports.nacl=require('./nacl/main'),exports.kb=require('./keybase/hilev'),exports.ukm=require('./ukm')}).call(this)}).call(this,require('buffer').Buffer)},{'./basex':3,'./const':5,'./ecc/main':11,'./hash':14,'./keybase/hilev':17,'./keyfetch':24,'./keyring':25,'./nacl/main':32,'./openpgp/armor':33,'./openpgp/burner':36,'./openpgp/hilev':41,'./openpgp/keymanager':42,'./openpgp/parser':56,'./openpgp/processor':57,'./rand':65,'./ukm':69,'./util':70,'buffer':80,'triplesec':181}],30:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},BaseKey,BaseKeyPair,K,NaclEddsa,Pair,Priv,Pub,SRF,TYPE,b2u,box,bufeq_fast,genseed,iced,konst,u2b,__iced_k,__iced_k_noop,_ref,_ref1,_ref2;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},box=require('tweetnacl').box,SRF=require('../rand').SRF,konst=require('../const'),K=konst.kb,_ref=require('../util'),genseed=_ref.genseed,bufeq_fast=_ref.bufeq_fast,_ref1=require('../basekeypair'),BaseKey=_ref1.BaseKey,BaseKeyPair=_ref1.BaseKeyPair,_ref2=require('./eddsa'),b2u=_ref2.b2u,u2b=_ref2.u2b,NaclEddsa=require('./eddsa').Pair,TYPE=K.public_key_algorithms.NACL_DH,b2u=function(b){return new Uint8Array(b)},u2b=function(u){return new Buffer(u)},Pub=function(){function Pub(key){this.key=key}return Pub.HEADER=new Buffer([K.kid.version,TYPE]),Pub.TRAILER=new Buffer([K.kid.trailer]),Pub.LEN=Pub.HEADER.length+Pub.TRAILER.length+box.publicKeyLength,Pub.alloc_kb=function(kid){var err,key;return err=key=null,err=kid.length===Pub.LEN?bufeq_fast(kid.slice(-1),Pub.TRAILER)?bufeq_fast(kid.slice(0,2),Pub.HEADER)?(key=new Pub(kid.slice(2,-1)),null):new Error('bad header'):new Error('bad trailing byte'):new Error('bad key length'),[err,key]},Pub.prototype.serialize=function(){return this.key},Pub.prototype.nbits=function(){return 255},Pub.prototype.read_params=function(sb){},Pub.prototype.encrypt=function(_arg,cb){var nonce,plaintext,res,sender,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),plaintext=_arg.plaintext,sender=_arg.sender,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/nacl/dh.iced',funcname:'Pub.encrypt'}),SRF().random_bytes(box.nonceLength,__iced_deferrals.defer({assign_fn:function(){return function(){return nonce=arguments[0]}}(),lineno:49})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return res=box(b2u(plaintext),b2u(nonce),b2u(_this.key),b2u(sender.priv.key)),cb(null,{ciphertext:u2b(res),nonce:nonce})}}(this))},Pub}(),Priv=function(){function Priv(key){this.key=key}return Priv.prototype.alloc=function(raw){var err,key;return err=key=null,raw.length===box.secretKeyLength?key=new Priv(raw):err=new Error('Bad secret key length'),[err,key]},Priv.prototype.decrypt=function(_arg,cb){var ciphertext,err,nonce,res,sender;return ciphertext=_arg.ciphertext,nonce=_arg.nonce,sender=_arg.sender,err=res=null,res=box.open(b2u(ciphertext),b2u(nonce),b2u(sender.pub.key),b2u(this.key)),res===!1?(err=new Error('decryption failed'),res=null):res=u2b(res),cb(err,res)},Priv}(),Pair=function(_super){function Pair(_arg){var priv,pub;pub=_arg.pub,priv=_arg.priv,Pair.__super__.constructor.call(this,{pub:pub,priv:priv})}return __extends(Pair,_super),Pair.Pub=Pub,Pair.prototype.Pub=Pub,Pair.Priv=Priv,Pair.prototype.Priv=Priv,Pair.type=K.public_key_algorithms.NACL_DH,Pair.prototype.type=Pair.type,Pair.prototype.get_type=function(){return this.type},Pair.klass_name='DH',Pair.prototype.can_encrypt=function(){return!0},Pair.prototype.can_sign=function(){return!1},Pair.prototype.hash=function(){return this.serialize()},Pair.prototype.encrypt_kb=function(_arg,cb){var plaintext,sender;return plaintext=_arg.plaintext,sender=_arg.sender,this.pub.encrypt({plaintext:plaintext,sender:sender},cb)},Pair.prototype.decrypt_kb=function(_arg,cb){var ciphertext,err,nonce,plaintex,plaintext,sender,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),ciphertext=_arg.ciphertext,nonce=_arg.nonce,sender=_arg.sender,err=plaintex=null,function(_this){return function(__iced_k){return _this.priv==null?__iced_k(err=new Error('no secret key available')):void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/nacl/dh.iced',funcname:'Pair.decrypt_kb'}),_this.priv.decrypt({ciphertext:ciphertext,nonce:nonce,sender:sender},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],plaintext=arguments[1]}}(),lineno:117})),__iced_deferrals._fulfill()}(__iced_k)}}(this)(function(_this){return function(){return cb(err,plaintext)}}(this))},Pair.subkey_algo=function(flags){return flags&(C.key_flags.encrypt_comm|C.key_flags.encrypt_storage)?Pair:NaclEddsa},Pair.prototype.fulfills_flags=function(flags){var good_for;return good_for=C.key_flags.encrypt_comm|C.key_flags.encrypt_storage,(flags&good_for)===flags},Pair.prototype.verify_unpad_and_check_hash=function(_arg,cb){var data,hash,hasher,sig;return sig=_arg.sig,data=_arg.data,hasher=_arg.hasher,hash=_arg.hash,cb(new Error('verify_unpad_and_check_hash unsupported'))},Pair.prototype.pad_and_sign=function(data,_arg,cb){var hasher;return hasher=_arg.hasher,cb(new Error('pad_and_sign unsupported'))},Pair.parse_kb=function(pub_raw){return BaseKeyPair.parse_kb(Pair,pub_raw)},Pair.parse_sig=function(slice){var err;throw err=new Error('@parse_sig unsupported'),err},Pair.read_sig_from_buf=function(buf){var err;return err=new Error('@read_sig_from_buf unsupported'),[err]},Pair.generate=function(_arg,cb){var arg,err,priv,pub,publicKey,secretKey,seed,server_half,split,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),server_half=_arg.server_half,seed=_arg.seed,split=_arg.split,arg={seed:seed,split:split,len:box.secretKeyLength,server_half:server_half},function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/nacl/dh.iced',funcname:'Pair.generate'}),genseed(arg,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],server_half=arguments[1].server_half,seed=arguments[1].seed}}(),lineno:178})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){var _ref3;return(typeof err==='undefined'||err===null)&&(_ref3=box.keyPair.fromSecretKey(b2u(seed)),secretKey=_ref3.secretKey,publicKey=_ref3.publicKey,pub=new Pub(u2b(publicKey)),priv=new Priv(u2b(secretKey))),cb(err,new Pair({pub:pub,priv:priv}),server_half)}}(this))},Pair}(BaseKeyPair),exports.DH=exports.Pair=Pair}).call(this)}).call(this,require('buffer').Buffer)},{'../basekeypair':2,'../const':5,'../rand':65,'../util':70,'./eddsa':31,'buffer':80,'iced-runtime':118,'tweetnacl':201}],31:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},BaseKey,BaseKeyPair,K,NaclDh,Pair,Priv,Pub,SRF,TYPE,b2u,bufeq_fast,bufeq_secure,genseed,iced,konst,sign,u2b,__iced_k,__iced_k_noop,_ref,_ref1;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},sign=require('tweetnacl/nacl-fast').sign,SRF=require('../rand').SRF,konst=require('../const'),K=konst.kb,_ref=require('../util'),genseed=_ref.genseed,bufeq_secure=_ref.bufeq_secure,bufeq_fast=_ref.bufeq_fast,_ref1=require('../basekeypair'),BaseKey=_ref1.BaseKey,BaseKeyPair=_ref1.BaseKeyPair,NaclDh=require('./dh').Pair,TYPE=K.public_key_algorithms.NACL_EDDSA,exports.b2u=b2u=function(b){return new Uint8Array(b)},exports.u2b=u2b=function(u){return new Buffer(u)},Pub=function(){function Pub(key){this.key=key}return Pub.HEADER=new Buffer([K.kid.version,TYPE]),Pub.TRAILER=new Buffer([K.kid.trailer]),Pub.LEN=Pub.HEADER.length+Pub.TRAILER.length+sign.publicKeyLength,Pub.alloc_kb=function(kid){var err,key;return err=key=null,err=kid.length===Pub.LEN?bufeq_fast(kid.slice(-1),Pub.TRAILER)?bufeq_fast(kid.slice(0,2),Pub.HEADER)?(key=new Pub(kid.slice(2,-1)),null):new Error('bad header'):new Error('bad trailing byte'):new Error('bad key length'),[err,key]},Pub.prototype.serialize=function(){return this.key},Pub.prototype.nbits=function(){return 255},Pub.prototype.read_params=function(sb){},Pub.prototype.verify=function(_arg,cb){var detached,err,payload,r_payload,sig;return payload=_arg.payload,sig=_arg.sig,detached=_arg.detached,detached?(payload==null&&(payload=new Buffer([])),!sign.detached.verify(b2u(payload),b2u(sig),b2u(this.key))&&(err=new Error('signature didn\'t verify'))):(r_payload=sign.open(b2u(sig),b2u(this.key)))==null?err=new Error('signature didn\'t verify'):(r_payload=u2b(r_payload))==null?err=new Error('failed to convert from a Uint8Array to a buffer'):payload==null||bufeq_secure(r_payload,payload)?payload=r_payload:err=new Error('got unexpected payload'),cb(err,payload)},Pub}(),Priv=function(){function Priv(key){this.key=key}return Priv.prototype.alloc=function(raw){var err,key;return err=key=null,raw.length===sign.secretKeyLength?key=new Priv(raw):err=new Error('Bad secret key length'),[err,key]},Priv.prototype.sign=function(_arg,cb){var detached,f,payload,sig;return payload=_arg.payload,detached=_arg.detached,f=detached?sign.detached:sign,sig=u2b(f(b2u(payload),b2u(this.key))),cb(sig)},Priv}(),Pair=function(_super){function Pair(_arg){var priv,pub;pub=_arg.pub,priv=_arg.priv,Pair.__super__.constructor.call(this,{pub:pub,priv:priv})}return __extends(Pair,_super),Pair.Pub=Pub,Pair.prototype.Pub=Pub,Pair.Priv=Priv,Pair.prototype.Priv=Priv,Pair.type=K.public_key_algorithms.NACL_EDDSA,Pair.prototype.type=Pair.type,Pair.prototype.get_type=function(){return this.type},Pair.klass_name='EDDSA',Pair.prototype.can_encrypt=function(){return!1},Pair.prototype.hash=function(){return this.serialize()},Pair.prototype.sign_kb=function(_arg,cb){var detached,err,payload,sig,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),payload=_arg.payload,detached=_arg.detached,err=sig=null,function(_this){return function(__iced_k){return _this.priv==null?__iced_k(err=new Error('no secret key available')):void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/nacl/eddsa.iced',funcname:'Pair.sign_kb'}),_this.priv.sign({payload:payload,detached:detached},__iced_deferrals.defer({assign_fn:function(){return function(){return sig=arguments[0]}}(),lineno:119})),__iced_deferrals._fulfill()}(__iced_k)}}(this)(function(_this){return function(){return cb(err,sig)}}(this))},Pair.prototype.verify_kb=function(_arg,cb){var detached,payload,sig;return payload=_arg.payload,sig=_arg.sig,detached=_arg.detached,this.pub.verify({payload:payload,sig:sig,detached:detached},cb)},Pair.subkey_algo=function(flags){return flags&(C.key_flags.certify_keys|C.key_flags.sign_data)?Pair:NaclDh},Pair.prototype.fulfills_flags=function(flags){var good_for;return good_for=C.key_flags.certify_keys|C.key_flags.sign_data,(flags&good_for)===flags},Pair.prototype.verify_unpad_and_check_hash=function(_arg,cb){var data,hash,hasher,sig;return sig=_arg.sig,data=_arg.data,hasher=_arg.hasher,hash=_arg.hash,cb(new Error('verify_unpad_and_check_hash unsupported'))},Pair.prototype.pad_and_sign=function(data,_arg,cb){var hasher;return hasher=_arg.hasher,cb(new Error('pad_and_sign unsupported'))},Pair.parse_kb=function(pub_raw){return BaseKeyPair.parse_kb(Pair,pub_raw)},Pair.parse_sig=function(slice){var err;throw err=new Error('@parse_sig unsupported'),err},Pair.read_sig_from_buf=function(buf){var err;return err=new Error('@read_sig_from_buf unsupported'),[err]},Pair.generate=function(_arg,cb){var arg,err,priv,pub,publicKey,secretKey,seed,server_half,split,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),seed=_arg.seed,split=_arg.split,server_half=_arg.server_half,arg={seed:seed,split:split,len:sign.seedLength,server_half:server_half},function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/nacl/eddsa.iced',funcname:'Pair.generate'}),genseed(arg,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],server_half=arguments[1].server_half,seed=arguments[1].seed}}(),lineno:185})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){var _ref2;return(typeof err==='undefined'||err===null)&&(_ref2=sign.keyPair.fromSeed(b2u(seed)),secretKey=_ref2.secretKey,publicKey=_ref2.publicKey,pub=new Pub(u2b(publicKey)),priv=new Priv(u2b(secretKey))),cb(err,new Pair({pub:pub,priv:priv}),server_half)}}(this))},Pair}(BaseKeyPair),exports.EdDSA=exports.Pair=Pair}).call(this)}).call(this,require('buffer').Buffer)},{'../basekeypair':2,'../const':5,'../rand':65,'../util':70,'./dh':30,'buffer':80,'iced-runtime':118,'tweetnacl/nacl-fast':200}],32:[function(require,module,exports){(function(){exports.eddsa=require('./eddsa'),exports.dh=require('./dh')}).call(this)},{'./dh':30,'./eddsa':31}],33:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},C,Ch,Parser,armor,bufeq_fast,decode,katch,uint_to_buffer,_ref;_ref=require('../util'),katch=_ref.katch,bufeq_fast=_ref.bufeq_fast,uint_to_buffer=_ref.uint_to_buffer,C=require('../const'),Ch=require('../header'),armor=require('pgp-utils').armor,exports.encode=function(type,data){var mt;return mt=C.openpgp.message_types,type=function(){switch(type){case mt.public_key:return'PUBLIC KEY BLOCK';case mt.private_key:return'PRIVATE KEY BLOCK';case mt.signature:return'SIGNATURE';case mt.generic:return'MESSAGE';default:throw new Error('Cannot encode tag type '+type);}}(),armor.encode(Ch,type,data)},Parser=function(_super){function Parser(){return Parser.__super__.constructor.apply(this,arguments)}return __extends(Parser,_super),Parser.prototype.parse_type=function(){var mt;return mt=C.openpgp.message_types,this.ret.type=function(){switch(this.type){case'PUBLIC KEY BLOCK':return mt.public_key;case'PRIVATE KEY BLOCK':return mt.private_key;case'SIGNED MESSAGE':if(this.ret.clearsign)return mt.clearsign;throw new Error('Signed message, but not clear-signed');break;case'SIGNATURE':return mt.signature;case'MESSAGE':return mt.generic;default:throw new Error('Unknown message type: '+this.type);}}.call(this),this.ret.fields.type=this.type},Parser}(armor.Parser),exports.Message=armor.Message,exports.decode=decode=function(data){return katch(function(){return new Parser(data).parse()})},exports.mdecode=decode=function(data){return katch(function(){return new Parser(data).mparse()})}}).call(this)},{'../const':5,'../header':15,'../util':70,'pgp-utils':163}],34:[function(require,module,exports){(function(){var __slice=[].slice,ASP,BaseBurner,iced,make_esc,__iced_k,__iced_k_noop;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},make_esc=require('iced-error').make_esc,ASP=require('pgp-utils').util.ASP,exports.BaseBurner=BaseBurner=function(){function BaseBurner(_arg){this.sign_with=_arg.sign_with,this.encrypt_for=_arg.encrypt_for,this.signing_key=_arg.signing_key,this.encryption_key=_arg.encryption_key,this.asp=_arg.asp,this.asp=ASP.make(this.asp)}return BaseBurner.prototype._find_keys=function(cb){var esc,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'find_keys'),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/baseburner.iced',funcname:'BaseBurner._find_keys'}),_this._find_signing_key(esc(__iced_deferrals.defer({lineno:17}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/baseburner.iced',funcname:'BaseBurner._find_keys'}),_this._find_encryption_key(esc(__iced_deferrals.defer({lineno:18}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/baseburner.iced',funcname:'BaseBurner._find_keys'}),_this._assert_one(esc(__iced_deferrals.defer({lineno:19}))),__iced_deferrals._fulfill()})(function(){return cb(null)})})}}(this))},BaseBurner.prototype._assert_one=function(cb){var err;return err=null,this.signing_key==null&&this.encryption_keys==null&&(err=new Error('need either an encryption or signing key, or both')),cb(err)},BaseBurner.prototype._find_signing_key=function(cb){var err;return err=null,this.sign_with!=null&&this.signing_key!=null?err=new Error('specify either `sign_with` or `signing_key` but not both'):this.sign_with!=null&&(this.signing_key=this.sign_with.find_signing_pgp_key())==null&&(err=new Error('cannot sign with the given KeyManager')),cb(err)},BaseBurner.prototype._find_encryption_key=function(cb){var arrayize,count_true,err,f,i,k,_i,_len,_ref;if(err=null,count_true=function(){var e,i,v,_i,_len;for(v=1<=arguments.length?__slice.call(arguments,0):[],i=0,(_i=0,_len=v.length);_i<_len;_i++)e=v[_i],e&&i++;return i},arrayize=function(e){return e==null?[]:typeof e==='object'&&Array.isArray(e)?e:[e]},count_true(this.encrypt_for!=null,this.encryption_key!=null,this.encryption_keys!=null)>1)err=new Error('specify only one of `encrypt_for`, `encryption_keys` and `encryption_key`');else if(this.encrypt_for!=null){for(this.encryption_keys=[],_ref=this.encrypt_for=arrayize(this.encrypt_for),(i=_i=0,_len=_ref.length);_i<_len;i=++_i)if(f=_ref[i],(k=f.find_crypt_pgp_key())!=null)this.encryption_keys.push(k);else{err=new Error('cannot encrypt with the given KeyManager (i='+i+')');break}}else this.encryption_key==null?this.encryption_keys!=null&&(this.encryption_keys=arrayize(this.encryption_keys)):this.encryption_keys=[this.encryption_key];return cb(err)},BaseBurner}()}).call(this)},{'iced-error':115,'iced-runtime':118,'pgp-utils':163}],35:[function(require,module,exports){(function(Buffer){(function(){var SlicerBuffer;SlicerBuffer=function(){function SlicerBuffer(buf,start){if(this.buf=buf,this.start=start==null?0:start,!Buffer.isBuffer(this.buf))throw new Error('need a Buffer!');this.i=this.start,this._end=null}return SlicerBuffer.prototype.clamp=function(len){var ret;return ret=this._end,this._end=this.i+len,ret},SlicerBuffer.prototype.unclamp=function(e){return this.start=this.i,this._end=e},SlicerBuffer.prototype.len=function(){return this.buf.length-this.start},SlicerBuffer.prototype.rem=function(){return this.buf.length-this.i},SlicerBuffer.prototype.offset=function(){return this.i-this.start},SlicerBuffer.prototype.check=function(){if(this._end&&this.i>this._end||this.i>this.buf.length)throw new Error('read off the end of the packet @'+this.i+'/'+this.buf.length+'/'+this._end)},SlicerBuffer.prototype.read_uint8=function(){var ret;return ret=this.buf.readUInt8(this.i++),this.check(),ret},SlicerBuffer.prototype.read_uint16=function(){var ret;return ret=this.buf.readUInt16BE(this.i),this.i+=2,this.check(),ret},SlicerBuffer.prototype.read_uint32=function(){var ret;return ret=this.buf.readUInt32BE(this.i),this.i+=4,this.check(),ret},SlicerBuffer.prototype.read_buffer_at_most=function(l){return this.read_buffer(_Mathmin5(l,this.rem()))},SlicerBuffer.prototype.read_buffer=function(l){var ret;return ret=this.buf.slice(this.i,this.i+l),this.i+=l,this.check(),ret},SlicerBuffer.prototype.end=function(){return this._end||this.buf.length},SlicerBuffer.prototype.peek_rest_to_buffer=function(){return this.buf.slice(this.i,this.end())},SlicerBuffer.prototype.consume_rest_to_buffer=function(){var ret;return ret=this.peek_rest_to_buffer(),this.i=this.end(),ret},SlicerBuffer.prototype.advance=function(i){return i==null&&(i=1),this.i+=i},SlicerBuffer.prototype.peek_to_buffer=function(len){return this.buf.slice(this.i,this.i+len)},SlicerBuffer.prototype.peek_uint8=function(){return this.buf.readUInt8(this.i)},SlicerBuffer.prototype.peek_uint16=function(){return this.buf.readUInt16BE(this.i)},SlicerBuffer.prototype.read_string=function(){return this.read_buffer(this.read_uint8())},SlicerBuffer.prototype.read_v4_length=function(){var five_byte,len,p;return p=this.peek_uint8(),five_byte=!1,len=p<192?(this.advance(1),p):p<224?this.read_uint16()-(192<<8)+192:p<255?(this.advance(1),1<<(p&31)):(this.advance(1),five_byte=!0,this.read_uint32()),[len,five_byte]},SlicerBuffer}(),exports.SlicerBuffer=SlicerBuffer}).call(this)}).call(this,require('buffer').Buffer)},{'buffer':80}],36:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},BaseBurner,Burner,C,Compressed,CreationTime,Issuer,Literal,OnePassSignature,PKESK,SEIPD,SHA512,SRF,Signature,WordArray,clearsign,detachsign,dummy_key_id,encode,export_key_pgp,get_cipher,iced,make_esc,make_simple_literals,scrub_buffer,triplesec,unix_time,__iced_k,__iced_k_noop,_ref,_ref1,_ref2;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},make_esc=require('iced-error').make_esc,OnePassSignature=require('./packet/one_pass_sig').OnePassSignature,_ref=require('./packet/signature'),Signature=_ref.Signature,CreationTime=_ref.CreationTime,Issuer=_ref.Issuer,Compressed=require('./packet/compressed').Compressed,Literal=require('./packet/literal').Literal,unix_time=require('../util').unix_time,SRF=require('../rand').SRF,triplesec=require('triplesec'),_ref1=require('../symmetric'),export_key_pgp=_ref1.export_key_pgp,get_cipher=_ref1.get_cipher,scrub_buffer=triplesec.util.scrub_buffer,WordArray=triplesec.WordArray,_ref2=require('./packet/sess'),SEIPD=_ref2.SEIPD,PKESK=_ref2.PKESK,C=require('../const').openpgp,SHA512=require('../hash').SHA512,encode=require('./armor').encode,clearsign=require('./clearsign'),detachsign=require('./detachsign'),BaseBurner=require('./baseburner').BaseBurner,dummy_key_id=new Buffer(function(){var _i,_results;for(_results=[],_i=0;_i<16;_i++)_results.push(0);return _results}()),Burner=function(_super){function Burner(_arg){var asp,encrypt_for,encryption_key,sign_with,signing_key;this.literals=_arg.literals,this.opts=_arg.opts,sign_with=_arg.sign_with,encrypt_for=_arg.encrypt_for,signing_key=_arg.signing_key,encryption_key=_arg.encryption_key,asp=_arg.asp,Burner.__super__.constructor.call(this,{sign_with:sign_with,encrypt_for:encrypt_for,signing_key:signing_key,encryption_key:encryption_key,asp:asp}),this.packets=[],this.opts||(this.opts={}),this.signed_payload=null}return __extends(Burner,_super),Burner.prototype._frame_literals=function(cb){var esc,l,p,sp,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'Burner::_frame_literals'),sp=[],function(_this){return function(__iced_k){var _i,_len,_ref3,_results,_while;_ref3=_this.literals,_len=_ref3.length,_i=0,_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return++_i,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},_i<_len?void(l=_ref3[_i],sp.push(l.to_signature_payload()),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._frame_literals'}),l.write(esc(__iced_deferrals.defer({assign_fn:function(){return function(){return p=arguments[0]}}(),lineno:51}))),__iced_deferrals._fulfill()}(function(){return _next(_this.packets.push(p))})):_break()},_while(__iced_k)}}(this)(function(_this){return function(){return _this.signed_payload=Buffer.concat(sp),cb(null)}}(this))},Burner.prototype._sign=function(cb){var esc,fp,ops,ops_framed,sig,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'Burner::_sign\''),ops=new OnePassSignature({sig_type:C.sig_types.binary_doc,hasher:SHA512,sig_klass:this.signing_key.get_klass(),key_id:this.signing_key.get_key_id(),is_final:1}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._sign'}),ops.write(esc(__iced_deferrals.defer({assign_fn:function(){return function(){return ops_framed=arguments[0]}}(),lineno:67}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){sig=new Signature({type:C.sig_types.binary_doc,key:_this.signing_key.key,hashed_subpackets:[new CreationTime(unix_time())],unhashed_subpackets:[new Issuer(_this.signing_key.get_key_id())]}),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._sign'}),_this.asp.progress({what:'sign',i:0,total:1},esc(__iced_deferrals.defer({lineno:74}))),__iced_deferrals._fulfill()}(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._sign'}),sig.write(_this.signed_payload,esc(__iced_deferrals.defer({assign_fn:function(){return function(){return fp=arguments[0]}}(),lineno:75}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._sign'}),_this.asp.progress({what:'sign',i:1,total:1},esc(__iced_deferrals.defer({lineno:76}))),__iced_deferrals._fulfill()})(function(){return _this.packets.unshift(ops_framed),_this.packets.push(fp),cb(null)})})})}}(this))},Burner.prototype.collect_packets=function(){var ret;return ret=Buffer.concat(this.packets),this.packets=[],ret},Burner.prototype._compress=function(cb){var esc,inflated,opkt,pkt,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'Burner::_compress'),inflated=this.collect_packets(),pkt=new Compressed({algo:C.compression.zlib,inflated:inflated}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._compress'}),_this.asp.progress({what:'compress',i:0,total:1},esc(__iced_deferrals.defer({lineno:94}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._compress'}),pkt.write(esc(__iced_deferrals.defer({assign_fn:function(){return function(){return opkt=arguments[0]}}(),lineno:95}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._compress'}),_this.asp.progress({what:'compress',i:1,total:1},esc(__iced_deferrals.defer({lineno:96}))),__iced_deferrals._fulfill()})(function(){return _this.packets.push(opkt),cb(null)})})}}(this))},Burner.prototype._make_session_key=function(cb){var ___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),this._cipher_algo=C.symmetric_key_algorithms.AES256,this._cipher_info=get_cipher(this._cipher_algo),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._make_session_key'}),SRF().random_bytes(_this._cipher_info.key_size,__iced_deferrals.defer({assign_fn:function(__slot_1){return function(){return __slot_1._session_key=arguments[0]}}(_this),lineno:105})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return _this._cipher=new _this._cipher_info.klass(WordArray.from_buffer(_this._session_key)),cb(null)}}(this))},Burner.prototype.scrub=function(){if(this._cipher!=null&&this._cipher.scrub(),this._session_key!=null)return scrub_buffer(this._session_key)},Burner.prototype._encrypt_session_key_once=function(encryption_key,cb){var ekey,esc,fingerprint,key_id,payload,pkesk,pkt,pub_k,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'_encrypt_session_key_once'),payload=export_key_pgp(this._cipher_algo,this._session_key),pub_k=encryption_key.key,fingerprint=encryption_key.get_fingerprint(),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._encrypt_session_key_once'}),_this.asp.progress({what:'session key encrypt',i:0,total:1},esc(__iced_deferrals.defer({lineno:122}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._encrypt_session_key_once'}),pub_k.pad_and_encrypt(payload,{fingerprint:fingerprint},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return ekey=arguments[0]}}(),lineno:123}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._encrypt_session_key_once'}),_this.asp.progress({what:'session key encrypt',i:1,total:1},esc(__iced_deferrals.defer({lineno:124}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){return _this.opts.hide?void(key_id=dummy_key_id,function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._encrypt_session_key_once'}),_this.asp.progress({what:'hide encryption',i:0,total:1},esc(__iced_deferrals.defer({lineno:127}))),__iced_deferrals._fulfill()}(function(){(function(__iced_k){var _ref3,_ref4;__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._encrypt_session_key_once'}),ekey.hide({max:(_ref3=_this.opts.hide)==null?void 0:_ref3.max,slosh:(_ref4=_this.opts.hide)==null?void 0:_ref4.slosh,key:pub_k},esc(__iced_deferrals.defer({lineno:128}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._encrypt_session_key_once'}),_this.asp.progress({what:'hide encryption',i:1,total:1},esc(__iced_deferrals.defer({lineno:129}))),__iced_deferrals._fulfill()})(__iced_k)})})):__iced_k(key_id=encryption_key.get_key_id())})(function(){pkt=new PKESK({crypto_type:pub_k.type,key_id:key_id,ekey:ekey}),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._encrypt_session_key_once'}),pkt.write(esc(__iced_deferrals.defer({assign_fn:function(){return function(){return pkesk=arguments[0]}}(),lineno:137}))),__iced_deferrals._fulfill()}(function(){return cb(null,pkesk)})})})})}}(this))},Burner.prototype._encrypt_session_key=function(cb){var esc,k,pkesk,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'_encrypt_session_key'),this._pkesks=[],function(_this){return function(__iced_k){var _i,_len,_ref3,_results,_while;_ref3=_this.encryption_keys,_len=_ref3.length,_i=0,_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return++_i,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},_i<_len?void(k=_ref3[_i],function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._encrypt_session_key'}),_this._encrypt_session_key_once(k,esc(__iced_deferrals.defer({assign_fn:function(){return function(){return pkesk=arguments[0]}}(),lineno:146}))),__iced_deferrals._fulfill()}(function(){return _next(_this._pkesks.push(pkesk))})):_break()},_while(__iced_k)}}(this)(function(_this){return function(){return cb(null)}}(this))},Burner.prototype._encrypt_payload=function(cb){var asp,esc,pkt,plaintext,prefixrandom,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'Burner::_encrypt_payload'),plaintext=this.collect_packets(),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._encrypt_payload'}),SRF().random_bytes(_this._cipher.blockSize,__iced_deferrals.defer({assign_fn:function(){return function(){return prefixrandom=arguments[0]}}(),lineno:155})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){pkt=new SEIPD({}),asp=_this.asp.section('encrypt payload'),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._encrypt_payload'}),pkt.encrypt({cipher:_this._cipher,plaintext:plaintext,prefixrandom:prefixrandom,asp:asp},esc(__iced_deferrals.defer({lineno:158}))),__iced_deferrals._fulfill()}(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._encrypt_payload'}),pkt.write(esc(__iced_deferrals.defer({assign_fn:function(){return function(){return pkt=arguments[0]}}(),lineno:159}))),__iced_deferrals._fulfill()})(function(){return scrub_buffer(plaintext),_this.packets=_this._pkesks.concat([pkt]),cb(null)})})}}(this))},Burner.prototype._encrypt=function(cb){var esc,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'Burner::_encrypt'),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._encrypt'}),_this._make_session_key(esc(__iced_deferrals.defer({lineno:168}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._encrypt'}),_this._encrypt_session_key(esc(__iced_deferrals.defer({lineno:169}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner._encrypt'}),_this._encrypt_payload(esc(__iced_deferrals.defer({lineno:170}))),__iced_deferrals._fulfill()})(function(){return cb(null)})})}}(this))},Burner.prototype.scrub=function(){},Burner.prototype.burn=function(cb){var esc,output,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'Burner::burn'),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner.burn'}),_this._find_keys(esc(__iced_deferrals.defer({lineno:181}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner.burn'}),_this._frame_literals(esc(__iced_deferrals.defer({lineno:182}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){return _this.signing_key==null?__iced_k():void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner.burn'}),_this._sign(esc(__iced_deferrals.defer({lineno:184}))),__iced_deferrals._fulfill()}(__iced_k)})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner.burn'}),_this._compress(esc(__iced_deferrals.defer({lineno:185}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){return _this.encryption_keys==null?__iced_k():void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'Burner.burn'}),_this._encrypt(esc(__iced_deferrals.defer({lineno:187}))),__iced_deferrals._fulfill()}(__iced_k)})(function(){return output=Buffer.concat(_this.packets),cb(null,output)})})})})}}(this))},Burner}(BaseBurner),exports.Burner=Burner,exports.make_simple_literals=make_simple_literals=function(msg){return[new Literal({data:new Buffer(msg),format:C.literal_formats.utf8,date:unix_time()})]},exports.clearsign=clearsign.sign,exports.detachsign=detachsign.sign,exports.burn=function(_arg,cb){var aout,asp,b,encrypt_for,encryption_key,err,literals,msg,opts,raw,sign_with,signing_key,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),msg=_arg.msg,literals=_arg.literals,sign_with=_arg.sign_with,encrypt_for=_arg.encrypt_for,signing_key=_arg.signing_key,encryption_key=_arg.encryption_key,asp=_arg.asp,opts=_arg.opts,msg!=null&&literals==null&&(literals=make_simple_literals(msg)),b=new Burner({literals:literals,sign_with:sign_with,encrypt_for:encrypt_for,signing_key:signing_key,encryption_key:encryption_key,asp:asp,opts:opts}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/burner.iced',funcname:'burn'}),b.burn(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],raw=arguments[1]}}(),lineno:247})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return b.scrub(),typeof raw!=='undefined'&&raw!==null&&(typeof err==='undefined'||err===null)&&(aout=encode(C.message_types.generic,raw)),cb(err,aout,raw)}}(this))}}).call(this)}).call(this,require('buffer').Buffer)},{'../const':5,'../hash':14,'../rand':65,'../symmetric':68,'../util':70,'./armor':33,'./baseburner':34,'./clearsign':39,'./detachsign':40,'./packet/compressed':46,'./packet/literal':49,'./packet/one_pass_sig':50,'./packet/sess':52,'./packet/signature':53,'buffer':80,'iced-error':115,'iced-runtime':118,'triplesec':181}],37:[function(require,module,exports){(function(){var CAST5,G,Global,WordArray,ui32a_to_ui8a,ui8a_to_ui32a,_ref;WordArray=require('triplesec').WordArray,_ref=require('../util'),ui8a_to_ui32a=_ref.ui8a_to_ui32a,ui32a_to_ui8a=_ref.ui32a_to_ui8a,Global=function(){function Global(){this.init_schedule(),this.init_sbox()}return Global.prototype.init_schedule=function(){var scheduleA,scheduleB;return scheduleA=[,,,,],scheduleA[0]=[,,,,],scheduleA[0][0]=new Uint8Array([4,0,13,15,12,14,8]),scheduleA[0][1]=new Uint8Array([5,2,16+0,16+2,16+1,16+3,10]),scheduleA[0][2]=new Uint8Array([6,3,16+7,16+6,16+5,16+4,9]),scheduleA[0][3]=new Uint8Array([7,1,16+10,16+9,16+11,16+8,11]),scheduleA[1]=[,,,,],scheduleA[1][0]=new Uint8Array([0,6,16+5,16+7,16+4,16+6,16+0]),scheduleA[1][1]=new Uint8Array([1,4,0,2,1,3,16+2]),scheduleA[1][2]=new Uint8Array([2,5,7,6,5,4,16+1]),scheduleA[1][3]=new Uint8Array([3,7,10,9,11,8,16+3]),scheduleA[2]=[,,,,],scheduleA[2][0]=new Uint8Array([4,0,13,15,12,14,8]),scheduleA[2][1]=new Uint8Array([5,2,16+0,16+2,16+1,16+3,10]),scheduleA[2][2]=new Uint8Array([6,3,16+7,16+6,16+5,16+4,9]),scheduleA[2][3]=new Uint8Array([7,1,16+10,16+9,16+11,16+8,11]),scheduleA[3]=[,,,,],scheduleA[3][0]=new Uint8Array([0,6,16+5,16+7,16+4,16+6,16+0]),scheduleA[3][1]=new Uint8Array([1,4,0,2,1,3,16+2]),scheduleA[3][2]=new Uint8Array([2,5,7,6,5,4,16+1]),scheduleA[3][3]=new Uint8Array([3,7,10,9,11,8,16+3]),scheduleB=[,,,,],scheduleB[0]=[,,,,],scheduleB[0][0]=new Uint8Array([16+8,16+9,16+7,16+6,16+2]),scheduleB[0][1]=new Uint8Array([16+10,16+11,16+5,16+4,16+6]),scheduleB[0][2]=new Uint8Array([16+12,16+13,16+3,16+2,16+9]),scheduleB[0][3]=new Uint8Array([16+14,16+15,16+1,16+0,16+12]),scheduleB[1]=[,,,,],scheduleB[1][0]=new Uint8Array([3,2,12,13,8]),scheduleB[1][1]=new Uint8Array([1,0,14,15,13]),scheduleB[1][2]=new Uint8Array([7,6,8,9,3]),scheduleB[1][3]=new Uint8Array([5,4,10,11,7]),scheduleB[2]=[,,,,],scheduleB[2][0]=new Uint8Array([16+3,16+2,16+12,16+13,16+9]),scheduleB[2][1]=new Uint8Array([16+1,16+0,16+14,16+15,16+12]),scheduleB[2][2]=new Uint8Array([16+7,16+6,16+8,16+9,16+2]),scheduleB[2][3]=new Uint8Array([16+5,16+4,16+10,16+11,16+6]),scheduleB[3]=[,,,,],scheduleB[3][0]=new Uint8Array([8,9,7,6,3]),scheduleB[3][1]=new Uint8Array([10,11,5,4,7]),scheduleB[3][2]=new Uint8Array([12,13,3,2,8]),scheduleB[3][3]=new Uint8Array([14,15,1,0,13]),this.scheduleA=scheduleA,this.scheduleB=scheduleB},Global.prototype.init_sbox=function(){var sBox;return sBox=Array(8),sBox[0]=new Uint32Array([821772500,2678128395,1810681135,1059425402,505495343,2617265619,1610868032,3483355465,3218386727,2294005173,3791863952,2563806837,1852023008,365126098,3269944861,584384398,677919599,3229601881,4280515016,2002735330,1136869587,3744433750,2289869850,2731719981,2714362070,879511577,1639411079,575934255,717107937,2857637483,576097850,2731753936,1725645000,2810460463,5111599,767152862,2543075244,1251459544,1383482551,3052681127,3089939183,3612463449,1878520045,1510570527,2189125840,2431448366,582008916,3163445557,1265446783,1354458274,3529918736,3202711853,3073581712,3912963487,3029263377,1275016285,4249207360,2905708351,3304509486,1442611557,3585198765,2712415662,2731849581,3248163920,2283946226,208555832,2766454743,1331405426,1447828783,3315356441,3108627284,2957404670,2981538698,3339933917,1669711173,286233437,1465092821,1782121619,3862771680,710211251,980974943,1651941557,430374111,2051154026,704238805,4128970897,3144820574,2857402727,948965521,3333752299,2227686284,718756367,2269778983,2731643755,718440111,2857816721,3616097120,1113355533,2478022182,410092745,1811985197,1944238868,2696854588,1415722873,1682284203,1060277122,1998114690,1503841958,82706478,2315155686,1068173648,845149890,2167947013,1768146376,1993038550,3566826697,3390574031,940016341,3355073782,2328040721,904371731,1205506512,4094660742,2816623006,825647681,85914773,2857843460,1249926541,1417871568,3287612,3211054559,3126306446,1975924523,1353700161,2814456437,2438597621,1800716203,722146342,2873936343,1151126914,4160483941,2877670899,458611604,2866078500,3483680063,770352098,2652916994,3367839148,3940505011,3585973912,3809620402,718646636,2504206814,2914927912,3631288169,2857486607,2860018678,575749918,2857478043,718488780,2069512688,3548183469,453416197,1106044049,3032691430,52586708,3378514636,3459808877,3211506028,1785789304,218356169,3571399134,3759170522,1194783844,1523787992,3007827094,1975193539,2555452411,1341901877,3045838698,3776907964,3217423946,2802510864,2889438986,1057244207,1636348243,3761863214,1462225785,2632663439,481089165,718503062,24497053,3332243209,3344655856,3655024856,3960371065,1195698900,2971415156,3710176158,2115785917,4027663609,3525578417,2524296189,2745972565,3564906415,1372086093,1452307862,2780501478,1476592880,3389271281,18495466,2378148571,901398090,891748256,3279637769,3157290713,2560960102,1447622437,4284372637,216884176,2086908623,1879786977,3588903153,2242455666,2938092967,3559082096,2810645491,758861177,1121993112,215018983,642190776,4169236812,1196255959,2081185372,3508738393,941322904,4124243163,2877523539,1848581667,2205260958,3180453958,2589345134,3694731276,550028657,2519456284,3789985535,2973870856,2093648313,443148163,46942275,2734146937,1117713533,1115362972,1523183689,3717140224,1551984063]),sBox[1]=new Uint32Array([522195092,4010518363,1776537470,960447360,4267822970,4005896314,1435016340,1929119313,2913464185,1310552629,3579470798,3724818106,2579771631,1594623892,417127293,2715217907,2696228731,1508390405,3994398868,3925858569,3695444102,4019471449,3129199795,3770928635,3520741761,990456497,4187484609,2783367035,21106139,3840405339,631373633,3783325702,532942976,396095098,3548038825,4267192484,2564721535,2011709262,2039648873,620404603,3776170075,2898526339,3612357925,4159332703,1645490516,223693667,1567101217,3362177881,1029951347,3470931136,3570957959,1550265121,119497089,972513919,907948164,3840628539,1613718692,3594177948,465323573,2659255085,654439692,2575596212,2699288441,3127702412,277098644,624404830,4100943870,2717858591,546110314,2403699828,3655377447,1321679412,4236791657,1045293279,4010672264,895050893,2319792268,494945126,1914543101,2777056443,3894764339,2219737618,311263384,4275257268,3458730721,669096869,3584475730,3835122877,3319158237,3949359204,2005142349,2713102337,2228954793,3769984788,569394103,3855636576,1425027204,108000370,2736431443,3671869269,3043122623,1750473702,2211081108,762237499,3972989403,2798899386,3061857628,2943854345,867476300,964413654,1591880597,1594774276,2179821409,552026980,3026064248,3726140315,2283577634,3110545105,2152310760,582474363,1582640421,1383256631,2043843868,3322775884,1217180674,463797851,2763038571,480777679,2718707717,2289164131,3118346187,214354409,200212307,3810608407,3025414197,2674075964,3997296425,1847405948,1342460550,510035443,4080271814,815934613,833030224,1620250387,1945732119,2703661145,3966000196,1388869545,3456054182,2687178561,2092620194,562037615,1356438536,3409922145,3261847397,1688467115,2150901366,631725691,3840332284,549916902,3455104640,394546491,837744717,2114462948,751520235,2221554606,2415360136,3999097078,2063029875,803036379,2702586305,821456707,3019566164,360699898,4018502092,3511869016,3677355358,2402471449,812317050,49299192,2570164949,3259169295,2816732080,3331213574,3101303564,2156015656,3705598920,3546263921,143268808,3200304480,1638124008,3165189453,3341807610,578956953,2193977524,3638120073,2333881532,807278310,658237817,2969561766,1641658566,11683945,3086995007,148645947,1138423386,4158756760,1981396783,2401016740,3699783584,380097457,2680394679,2803068651,3334260286,441530178,4016580796,1375954390,761952171,891809099,2183123478,157052462,3683840763,1592404427,341349109,2438483839,1417898363,644327628,2233032776,2353769706,2201510100,220455161,1815641738,182899273,2995019788,3627381533,3702638151,2890684138,1052606899,588164016,1681439879,4038439418,2405343923,4229449282,167996282,1336969661,1688053129,2739224926,1543734051,1046297529,1138201970,2121126012,115334942,1819067631,1902159161,1941945968,2206692869,1159982321]),sBox[2]=new Uint32Array([2381300288,637164959,3952098751,3893414151,1197506559,916448331,2350892612,2932787856,3199334847,4009478890,3905886544,1373570990,2450425862,4037870920,3778841987,2456817877,286293407,124026297,3001279700,1028597854,3115296800,4208886496,2691114635,2188540206,1430237888,1218109995,3572471700,308166588,570424558,2187009021,2455094765,307733056,1310360322,3135275007,1384269543,2388071438,863238079,2359263624,2801553128,3380786597,2831162807,1470087780,1728663345,4072488799,1090516929,532123132,2389430977,1132193179,2578464191,3051079243,1670234342,1434557849,2711078940,1241591150,3314043432,3435360113,3091448339,1812415473,2198440252,267246943,796911696,3619716990,38830015,1526438404,2806502096,374413614,2943401790,1489179520,1603809326,1920779204,168801282,260042626,2358705581,1563175598,2397674057,1356499128,2217211040,514611088,2037363785,2186468373,4022173083,2792511869,2913485016,1173701892,4200428547,3896427269,1334932762,2455136706,602925377,2835607854,1613172210,41346230,2499634548,2457437618,2188827595,41386358,4172255629,1313404830,2405527007,3801973774,2217704835,873260488,2528884354,2478092616,4012915883,2555359016,2006953883,2463913485,575479328,2218240648,2099895446,660001756,2341502190,3038761536,3888151779,3848713377,3286851934,1022894237,1620365795,3449594689,1551255054,15374395,3570825345,4249311020,4151111129,3181912732,310226346,1133119310,530038928,136043402,2476768958,3107506709,2544909567,1036173560,2367337196,1681395281,1758231547,3641649032,306774401,1575354324,3716085866,1990386196,3114533736,2455606671,1262092282,3124342505,2768229131,4210529083,1833535011,423410938,660763973,2187129978,1639812000,3508421329,3467445492,310289298,272797111,2188552562,2456863912,310240523,677093832,1013118031,901835429,3892695601,1116285435,3036471170,1337354835,243122523,520626091,277223598,4244441197,4194248841,1766575121,594173102,316590669,742362309,3536858622,4176435350,3838792410,2501204839,1229605004,3115755532,1552908988,2312334149,979407927,3959474601,1148277331,176638793,3614686272,2083809052,40992502,1340822838,2731552767,3535757508,3560899520,1354035053,122129617,7215240,2732932949,3118912700,2718203926,2539075635,3609230695,3725561661,1928887091,2882293555,1988674909,2063640240,2491088897,1459647954,4189817080,2302804382,1113892351,2237858528,1927010603,4002880361,1856122846,1594404395,2944033133,3855189863,3474975698,1643104450,4054590833,3431086530,1730235576,2984608721,3084664418,2131803598,4178205752,267404349,1617849798,1616132681,1462223176,736725533,2327058232,551665188,2945899023,1749386277,2575514597,1611482493,674206544,2201269090,3642560800,728599968,1680547377,2620414464,1388111496,453204106,4156223445,1094905244,2754698257,2201108165,3757000246,2704524545,3922940700,3996465027]),sBox[3]=new Uint32Array([2645754912,532081118,2814278639,3530793624,1246723035,1689095255,2236679235,4194438865,2116582143,3859789411,157234593,2045505824,4245003587,1687664561,4083425123,605965023,672431967,1336064205,3376611392,214114848,4258466608,3232053071,489488601,605322005,3998028058,264917351,1912574028,756637694,436560991,202637054,135989450,85393697,2152923392,3896401662,2895836408,2145855233,3535335007,115294817,3147733898,1922296357,3464822751,4117858305,1037454084,2725193275,2127856640,1417604070,1148013728,1827919605,642362335,2929772533,909348033,1346338451,3547799649,297154785,1917849091,4161712827,2883604526,3968694238,1469521537,3780077382,3375584256,1763717519,136166297,4290970789,1295325189,2134727907,2798151366,1566297257,3672928234,2677174161,2672173615,965822077,2780786062,289653839,1133871874,3491843819,35685304,1068898316,418943774,672553190,642281022,2346158704,1954014401,3037126780,4079815205,2030668546,3840588673,672283427,1776201016,359975446,3750173538,555499703,2769985273,1324923,69110472,152125443,3176785106,3822147285,1340634837,798073664,1434183902,15393959,216384236,1303690150,3881221631,3711134124,3960975413,106373927,2578434224,1455997841,1801814300,1578393881,1854262133,3188178946,3258078583,2302670060,1539295533,3505142565,3078625975,2372746020,549938159,3278284284,2620926080,181285381,2865321098,3970029511,68876850,488006234,1728155692,2608167508,836007927,2435231793,919367643,3339422534,3655756360,1457871481,40520939,1380155135,797931188,234455205,2255801827,3990488299,397000196,739833055,3077865373,2871719860,4022553888,772369276,390177364,3853951029,557662966,740064294,1640166671,1699928825,3535942136,622006121,3625353122,68743880,1742502,219489963,1664179233,1577743084,1236991741,410585305,2366487942,823226535,1050371084,3426619607,3586839478,212779912,4147118561,1819446015,1911218849,530248558,3486241071,3252585495,2886188651,3410272728,2342195030,20547779,2982490058,3032363469,3631753222,312714466,1870521650,1493008054,3491686656,615382978,4103671749,2534517445,1932181,2196105170,278426614,6369430,3274544417,2913018367,697336853,2143000447,2946413531,701099306,1558357093,2805003052,3500818408,2321334417,3567135975,216290473,3591032198,23009561,1996984579,3735042806,2024298078,3739440863,569400510,2339758983,3016033873,3097871343,3639523026,3844324983,3256173865,795471839,2951117563,4101031090,4091603803,3603732598,971261452,534414648,428311343,3389027175,2844869880,694888862,1227866773,2456207019,3043454569,2614353370,3749578031,3676663836,459166190,4132644070,1794958188,51825668,2252611902,3084671440,2036672799,3436641603,1099053433,2469121526,3059204941,1323291266,2061838604,1018778475,2233344254,2553501054,334295216,3556750194,1065731521,183467730]),sBox[4]=new Uint32Array([2127105028,745436345,2601412319,2788391185,3093987327,500390133,1155374404,389092991,150729210,3891597772,3523549952,1935325696,716645080,946045387,2901812282,1774124410,3869435775,4039581901,3293136918,3438657920,948246080,363898952,3867875531,1286266623,1598556673,68334250,630723836,1104211938,1312863373,613332731,2377784574,1101634306,441780740,3129959883,1917973735,2510624549,3238456535,2544211978,3308894634,1299840618,4076074851,1756332096,3977027158,297047435,3790297736,2265573040,3621810518,1311375015,1667687725,47300608,3299642885,2474112369,201668394,1468347890,576830978,3594690761,3742605952,1958042578,1747032512,3558991340,1408974056,3366841779,682131401,1033214337,1545599232,4265137049,206503691,103024618,2855227313,1337551222,2428998917,2963842932,4015366655,3852247746,2796956967,3865723491,3747938335,247794022,3755824572,702416469,2434691994,397379957,851939612,2314769512,218229120,1380406772,62274761,214451378,3170103466,2276210409,3845813286,28563499,446592073,1693330814,3453727194,29968656,3093872512,220656637,2470637031,77972100,1667708854,1358280214,4064765667,2395616961,325977563,4277240721,4220025399,3605526484,3355147721,811859167,3069544926,3962126810,652502677,3075892249,4132761541,3498924215,1217549313,3250244479,3858715919,3053989961,1538642152,2279026266,2875879137,574252750,3324769229,2651358713,1758150215,141295887,2719868960,3515574750,4093007735,4194485238,1082055363,3417560400,395511885,2966884026,179534037,3646028556,3738688086,1092926436,2496269142,257381841,3772900718,1636087230,1477059743,2499234752,3811018894,2675660129,3285975680,90732309,1684827095,1150307763,1723134115,3237045386,1769919919,1240018934,815675215,750138730,2239792499,1234303040,1995484674,138143821,675421338,1145607174,1936608440,3238603024,2345230278,2105974004,323969391,779555213,3004902369,2861610098,1017501463,2098600890,2628620304,2940611490,2682542546,1171473753,3656571411,3687208071,4091869518,393037935,159126506,1662887367,1147106178,391545844,3452332695,1891500680,3016609650,1851642611,546529401,1167818917,3194020571,2848076033,3953471836,575554290,475796850,4134673196,450035699,2351251534,844027695,1080539133,86184846,1554234488,3692025454,1972511363,2018339607,1491841390,1141460869,1061690759,4244549243,2008416118,2351104703,2868147542,1598468138,722020353,1027143159,212344630,1387219594,1725294528,3745187956,2500153616,458938280,4129215917,1828119673,544571780,3503225445,2297937496,1241802790,267843827,2694610800,1397140384,1558801448,3782667683,1806446719,929573330,2234912681,400817706,616011623,4121520928,3603768725,1761550015,1968522284,4053731006,4192232858,4005120285,872482584,3140537016,3894607381,2287405443,1963876937,3663887957,1584857000,2975024454,1833426440,4025083860]),sBox[5]=new Uint32Array([4143615901,749497569,1285769319,3795025788,2514159847,23610292,3974978748,844452780,3214870880,3751928557,2213566365,1676510905,448177848,3730751033,4086298418,2307502392,871450977,3222878141,4110862042,3831651966,2735270553,1310974780,2043402188,1218528103,2736035353,4274605013,2702448458,3936360550,2693061421,162023535,2827510090,687910808,23484817,3784910947,3371371616,779677500,3503626546,3473927188,4157212626,3500679282,4248902014,2466621104,3899384794,1958663117,925738300,1283408968,3669349440,1840910019,137959847,2679828185,1239142320,1315376211,1547541505,1690155329,739140458,3128809933,3933172616,3876308834,905091803,1548541325,4040461708,3095483362,144808038,451078856,676114313,2861728291,2469707347,993665471,373509091,2599041286,4025009006,4170239449,2149739950,3275793571,3749616649,2794760199,1534877388,572371878,2590613551,1753320020,3467782511,1405125690,4270405205,633333386,3026356924,3475123903,632057672,2846462855,1404951397,3882875879,3915906424,195638627,2385783745,3902872553,1233155085,3355999740,2380578713,2702246304,2144565621,3663341248,3894384975,2502479241,4248018925,3094885567,1594115437,572884632,3385116731,767645374,1331858858,1475698373,3793881790,3532746431,1321687957,619889600,1121017241,3440213920,2070816767,2833025776,1933951238,4095615791,890643334,3874130214,859025556,360630002,925594799,1764062180,3920222280,4078305929,979562269,2810700344,4087740022,1949714515,546639971,1165388173,3069891591,1495988560,922170659,1291546247,2107952832,1813327274,3406010024,3306028637,4241950635,153207855,2313154747,1608695416,1150242611,1967526857,721801357,1220138373,3691287617,3356069787,2112743302,3281662835,1111556101,1778980689,250857638,2298507990,673216130,2846488510,3207751581,3562756981,3008625920,3417367384,2198807050,529510932,3547516680,3426503187,2364944742,102533054,2294910856,1617093527,1204784762,3066581635,1019391227,1069574518,1317995090,1691889997,3661132003,510022745,3238594800,1362108837,1817929911,2184153760,805817662,1953603311,3699844737,120799444,2118332377,207536705,2282301548,4120041617,145305846,2508124933,3086745533,3261524335,1877257368,2977164480,3160454186,2503252186,4221677074,759945014,254147243,2767453419,3801518371,629083197,2471014217,907280572,3900796746,940896768,2751021123,2625262786,3161476951,3661752313,3260732218,1425318020,2977912069,1496677566,3988592072,2140652971,3126511541,3069632175,977771578,1392695845,1698528874,1411812681,1369733098,1343739227,3620887944,1142123638,67414216,3102056737,3088749194,1626167401,2546293654,3941374235,697522451,33404913,143560186,2595682037,994885535,1247667115,3859094837,2699155541,3547024625,4114935275,2968073508,3199963069,2732024527,1237921620,951448369,1898488916,1211705605,2790989240,2233243581,3598044975]),sBox[6]=new Uint32Array([2246066201,858518887,1714274303,3485882003,713916271,2879113490,3730835617,539548191,36158695,1298409750,419087104,1358007170,749914897,2989680476,1261868530,2995193822,2690628854,3443622377,3780124940,3796824509,2976433025,4259637129,1551479000,512490819,1296650241,951993153,2436689437,2460458047,144139966,3136204276,310820559,3068840729,643875328,1969602020,1680088954,2185813161,3283332454,672358534,198762408,896343282,276269502,3014846926,84060815,197145886,376173866,3943890818,3813173521,3545068822,1316698879,1598252827,2633424951,1233235075,859989710,2358460855,3503838400,3409603720,1203513385,1193654839,2792018475,2060853022,207403770,1144516871,3068631394,1121114134,177607304,3785736302,326409831,1929119770,2983279095,4183308101,3474579288,3200513878,3228482096,119610148,1170376745,3378393471,3163473169,951863017,3337026068,3135789130,2907618374,1183797387,2015970143,4045674555,2182986399,2952138740,3928772205,384012900,2454997643,10178499,2879818989,2596892536,111523738,2995089006,451689641,3196290696,235406569,1441906262,3890558523,3013735005,4158569349,1644036924,376726067,1006849064,3664579700,2041234796,1021632941,1374734338,2566452058,371631263,4007144233,490221539,206551450,3140638584,1053219195,1853335209,3412429660,3562156231,735133835,1623211703,3104214392,2738312436,4096837757,3366392578,3110964274,3956598718,3196820781,2038037254,3877786376,2339753847,300912036,3766732888,2372630639,1516443558,4200396704,1574567987,4069441456,4122592016,2699739776,146372218,2748961456,2043888151,35287437,2596680554,655490400,1132482787,110692520,1031794116,2188192751,1324057718,1217253157,919197030,686247489,3261139658,1028237775,3135486431,3059715558,2460921700,986174950,2661811465,4062904701,2752986992,3709736643,367056889,1353824391,731860949,1650113154,1778481506,784341916,357075625,3608602432,1074092588,2480052770,3811426202,92751289,877911070,3600361838,1231880047,480201094,3756190983,3094495953,434011822,87971354,363687820,1717726236,1901380172,3926403882,2481662265,400339184,1490350766,2661455099,1389319756,2558787174,784598401,1983468483,30828846,3550527752,2716276238,3841122214,1765724805,1955612312,1277890269,1333098070,1564029816,2704417615,1026694237,3287671188,1260819201,3349086767,1016692350,1582273796,1073413053,1995943182,694588404,1025494639,3323872702,3551898420,4146854327,453260480,1316140391,1435673405,3038941953,3486689407,1622062951,403978347,817677117,950059133,4246079218,3278066075,1486738320,1417279718,481875527,2549965225,3933690356,760697757,1452955855,3897451437,1177426808,1702951038,4085348628,2447005172,1084371187,3516436277,3068336338,1073369276,1027665953,3284188590,1230553676,1368340146,2226246512,267243139,2274220762,4070734279,2497715176,2423353163,2504755875]),sBox[7]=new Uint32Array([3793104909,3151888380,2817252029,895778965,2005530807,3871412763,237245952,86829237,296341424,3851759377,3974600970,2475086196,709006108,1994621201,2972577594,937287164,3734691505,168608556,3189338153,2225080640,3139713551,3033610191,3025041904,77524477,185966941,1208824168,2344345178,1721625922,3354191921,1066374631,1927223579,1971335949,2483503697,1551748602,2881383779,2856329572,3003241482,48746954,1398218158,2050065058,313056748,4255789917,393167848,1912293076,940740642,3465845460,3091687853,2522601570,2197016661,1727764327,364383054,492521376,1291706479,3264136376,1474851438,1685747964,2575719748,1619776915,1814040067,970743798,1561002147,2925768690,2123093554,1880132620,3151188041,697884420,2550985770,2607674513,2659114323,110200136,1489731079,997519150,1378877361,3527870668,478029773,2766872923,1022481122,431258168,1112503832,897933369,2635587303,669726182,3383752315,918222264,163866573,3246985393,3776823163,114105080,1903216136,761148244,3571337562,1690750982,3166750252,1037045171,1888456500,2010454850,642736655,616092351,365016990,1185228132,4174898510,1043824992,2023083429,2241598885,3863320456,3279669087,3674716684,108438443,2132974366,830746235,606445527,4173263986,2204105912,1844756978,2532684181,4245352700,2969441100,3796921661,1335562986,4061524517,2720232303,2679424040,634407289,885462008,3294724487,3933892248,2094100220,339117932,4048830727,3202280980,1458155303,2689246273,1022871705,2464987878,3714515309,353796843,2822958815,4256850100,4052777845,551748367,618185374,3778635579,4020649912,1904685140,3069366075,2670879810,3407193292,2954511620,4058283405,2219449317,3135758300,1120655984,3447565834,1474845562,3577699062,550456716,3466908712,2043752612,881257467,869518812,2005220179,938474677,3305539448,3850417126,1315485940,3318264702,226533026,965733244,321539988,1136104718,804158748,573969341,3708209826,937399083,3290727049,2901666755,1461057207,4013193437,4066861423,3242773476,2421326174,1581322155,3028952165,786071460,3900391652,3918438532,1485433313,4023619836,3708277595,3678951060,953673138,1467089153,1930354364,1533292819,2492563023,1346121658,1685000834,1965281866,3765933717,4190206607,2052792609,3515332758,690371149,3125873887,2180283551,2903598061,3933952357,436236910,289419410,14314871,1242357089,2904507907,1616633776,2666382180,585885352,3471299210,2699507360,1432659641,277164553,3354103607,770115018,2303809295,3741942315,3177781868,2853364978,2269453327,3774259834,987383833,1290892879,225909803,1741533526,890078084,1496906255,1111072499,916028167,243534141,1252605537,2204162171,531204876,290011180,3916834213,102027703,237315147,209093447,1486785922,220223953,2758195998,4175039106,82940208,3127791296,2569425252,518464269,1353887104,3941492737,2377294467,3935040926]),this.sBox=sBox},Global}(),G=new Global,CAST5=function(){function CAST5(key){var n;if(this.masking=Array(16),this.rotate=Array(16),this.reset(),key.sigBytes!==(n=this.keySize))throw new Error('key must be '+n+' bytes');this.keySchedule(key)}return CAST5.blockSize=8,CAST5.prototype.blockSize=CAST5.blockSize,CAST5.keySize=16,CAST5.prototype.keySize=CAST5.keySize,CAST5.prototype.reset=function(){var i,_i,_results;for(_results=[],i=_i=0;_i<16;i=++_i)this.masking[i]=0,_results.push(this.rotate[i]=0);return _results},CAST5.prototype.encryptBlock=function(words,offset){var bytes,res;return offset==null&&(offset=0),bytes=ui32a_to_ui8a(words),res=this._encrypt_ui8a(bytes),ui8a_to_ui32a(res,words)},CAST5.prototype.decryptBlock=function(words,offset){var bytes,res;return offset==null&&(offset=0),bytes=ui32a_to_ui8a(words),res=this._decrypt_ui8a(bytes),ui8a_to_ui32a(res,words)},CAST5.prototype._encrypt_ui8a=function(src){var dst,i,l,len,r,t,_i;for(len=src.length,dst=new Uint8Array(len),i=_i=0;_i<len;i=_i+=8)l=src[i]<<24|src[i+1]<<16|src[i+2]<<8|src[i+3],r=src[i+4]<<24|src[i+5]<<16|src[i+6]<<8|src[i+7],t=r,r=l^this.f1(r,this.masking[0],this.rotate[0]),l=t,t=r,r=l^this.f2(r,this.masking[1],this.rotate[1]),l=t,t=r,r=l^this.f3(r,this.masking[2],this.rotate[2]),l=t,t=r,r=l^this.f1(r,this.masking[3],this.rotate[3]),l=t,t=r,r=l^this.f2(r,this.masking[4],this.rotate[4]),l=t,t=r,r=l^this.f3(r,this.masking[5],this.rotate[5]),l=t,t=r,r=l^this.f1(r,this.masking[6],this.rotate[6]),l=t,t=r,r=l^this.f2(r,this.masking[7],this.rotate[7]),l=t,t=r,r=l^this.f3(r,this.masking[8],this.rotate[8]),l=t,t=r,r=l^this.f1(r,this.masking[9],this.rotate[9]),l=t,t=r,r=l^this.f2(r,this.masking[10],this.rotate[10]),l=t,t=r,r=l^this.f3(r,this.masking[11],this.rotate[11]),l=t,t=r,r=l^this.f1(r,this.masking[12],this.rotate[12]),l=t,t=r,r=l^this.f2(r,this.masking[13],this.rotate[13]),l=t,t=r,r=l^this.f3(r,this.masking[14],this.rotate[14]),l=t,t=r,r=l^this.f1(r,this.masking[15],this.rotate[15]),l=t,dst[i]=r>>>24&255,dst[i+1]=r>>>16&255,dst[i+2]=r>>>8&255,dst[i+3]=r&255,dst[i+4]=l>>>24&255,dst[i+5]=l>>>16&255,dst[i+6]=l>>>8&255,dst[i+7]=l&255;return dst},CAST5.prototype._decrypt_ui8a=function(src){var dst,i,l,len,r,t,_i;for(len=src.length,dst=new Uint8Array(len),i=_i=0;_i<len;i=_i+=8)l=src[i]<<24|src[i+1]<<16|src[i+2]<<8|src[i+3],r=src[i+4]<<24|src[i+5]<<16|src[i+6]<<8|src[i+7],t=r,r=l^this.f1(r,this.masking[15],this.rotate[15]),l=t,t=r,r=l^this.f3(r,this.masking[14],this.rotate[14]),l=t,t=r,r=l^this.f2(r,this.masking[13],this.rotate[13]),l=t,t=r,r=l^this.f1(r,this.masking[12],this.rotate[12]),l=t,t=r,r=l^this.f3(r,this.masking[11],this.rotate[11]),l=t,t=r,r=l^this.f2(r,this.masking[10],this.rotate[10]),l=t,t=r,r=l^this.f1(r,this.masking[9],this.rotate[9]),l=t,t=r,r=l^this.f3(r,this.masking[8],this.rotate[8]),l=t,t=r,r=l^this.f2(r,this.masking[7],this.rotate[7]),l=t,t=r,r=l^this.f1(r,this.masking[6],this.rotate[6]),l=t,t=r,r=l^this.f3(r,this.masking[5],this.rotate[5]),l=t,t=r,r=l^this.f2(r,this.masking[4],this.rotate[4]),l=t,t=r,r=l^this.f1(r,this.masking[3],this.rotate[3]),l=t,t=r,r=l^this.f3(r,this.masking[2],this.rotate[2]),l=t,t=r,r=l^this.f2(r,this.masking[1],this.rotate[1]),l=t,t=r,r=l^this.f1(r,this.masking[0],this.rotate[0]),l=t,dst[i]=r>>>24&255,dst[i+1]=r>>>16&255,dst[i+2]=r>>>8&255,dst[i+3]=r&255,dst[i+4]=l>>>24&255,dst[i+5]=l>>16&255,dst[i+6]=l>>8&255,dst[i+7]=l&255;return dst},CAST5.prototype.keySchedule=function(key){var a,b,half,i,j,k,ki,kw,round,t,w,x,_i,_j,_k,_l,_m,_results;for(t=function(){var _i,_len,_ref1,_results;for(_ref1=key.words,_results=[],(_i=0,_len=_ref1.length);_i<_len;_i++)kw=_ref1[_i],_results.push(kw);return _results}(),k=Array(32),x=[6,7,4,5],ki=0,half=_i=0;_i<2;half=++_i)for(round=_j=0;_j<4;round=++_j){for(j=_k=0;_k<4;j=++_k)a=G.scheduleA[round][j],w=t[a[1]],w^=G.sBox[4][t[a[2]>>>2]>>>24-8*(a[2]&3)&255],w^=G.sBox[5][t[a[3]>>>2]>>>24-8*(a[3]&3)&255],w^=G.sBox[6][t[a[4]>>>2]>>>24-8*(a[4]&3)&255],w^=G.sBox[7][t[a[5]>>>2]>>>24-8*(a[5]&3)&255],w^=G.sBox[x[j]][t[a[6]>>>2]>>>24-8*(a[6]&3)&255],t[a[0]]=w;for(j=_l=0;_l<4;j=++_l)b=G.scheduleB[round][j],w=G.sBox[4][t[b[0]>>>2]>>>24-8*(b[0]&3)&255],w^=G.sBox[5][t[b[1]>>>2]>>>24-8*(b[1]&3)&255],w^=G.sBox[6][t[b[2]>>>2]>>>24-8*(b[2]&3)&255],w^=G.sBox[7][t[b[3]>>>2]>>>24-8*(b[3]&3)&255],w^=G.sBox[4+j][t[b[4]>>>2]>>>24-8*(b[4]&3)&255],k[ki]=w,ki++}for(_results=[],i=_m=0;_m<16;i=++_m)this.masking[i]=k[i],_results.push(this.rotate[i]=k[16+i]&31);return _results},CAST5.prototype.f1=function(d,m,r){var I,t;return t=m+d,I=t<<r|t>>>32-r,(G.sBox[0][I>>>24]^G.sBox[1][I>>>16&255])-G.sBox[2][I>>>8&255]+G.sBox[3][I&255]},CAST5.prototype.f2=function(d,m,r){var I,t;return t=m^d,I=t<<r|t>>>32-r,G.sBox[0][I>>>24]-G.sBox[1][I>>>16&255]+G.sBox[2][I>>>8&255]^G.sBox[3][I&255]},CAST5.prototype.f3=function(d,m,r){var I,t;return t=m-d,I=t<<r|t>>>32-r,(G.sBox[0][I>>>24]+G.sBox[1][I>>>16&255]^G.sBox[2][I>>>8&255])-G.sBox[3][I&255]},CAST5}(),exports.CAST5=CAST5}).call(this)},{'../util':70,'triplesec':181}],38:[function(require,module,exports){(function(Buffer){(function(){var AES,WordArray,ciphers,decrypt,encrypt,_ref;_ref=require('triplesec'),ciphers=_ref.ciphers,WordArray=_ref.WordArray,AES=ciphers.AES,encrypt=function(_arg){var block_cipher_class,block_size,c,cipher,e,iv,key,list,out,plaintext,pos;return block_cipher_class=_arg.block_cipher_class,key=_arg.key,cipher=_arg.cipher,plaintext=_arg.plaintext,iv=_arg.iv,block_cipher_class||(block_cipher_class=AES),cipher||(cipher=new block_cipher_class(WordArray.from_buffer(key))),block_size=cipher.blockSize,c=WordArray.from_buffer(iv.slice(0,block_size)),pos=0,list=function(){var _results;for(_results=[];plaintext.length>pos;)cipher.encryptBlock(c.words,0),e=c,c=WordArray.from_buffer(plaintext.slice(pos,pos+block_size)),e.xor(c,{n_words:c.words.length}),pos+=block_size,c=e,_results.push(e.to_buffer());return _results}(),out=Buffer.concat(list),out.slice(0,plaintext.length)},decrypt=function(_arg){var b,block_cipher_class,block_size,cipher,ciphertext,d,i,iv,key,list,out,pos;return block_cipher_class=_arg.block_cipher_class,key=_arg.key,cipher=_arg.cipher,ciphertext=_arg.ciphertext,iv=_arg.iv,block_cipher_class||(block_cipher_class=AES),cipher||(cipher=new block_cipher_class(WordArray.from_buffer(key))),block_size=cipher.blockSize,iv||(iv=new Buffer(function(){var _i,_results;for(_results=[],i=_i=0;0<=block_size?_i<block_size:_i>block_size;i=0<=block_size?++_i:--_i)_results.push(0);return _results}())),b=WordArray.from_buffer(iv.slice(0,block_size)),pos=0,list=function(){var _results;for(_results=[];ciphertext.length>pos;)cipher.encryptBlock(b.words,0),d=b,b=WordArray.from_buffer(ciphertext.slice(pos,pos+block_size)),d.xor(b,{}),pos+=block_size,_results.push(d.to_buffer());return _results}(),out=Buffer.concat(list),out.slice(out,ciphertext.length)},exports.encrypt=encrypt,exports.decrypt=decrypt}).call(this)}).call(this,require('buffer').Buffer)},{'buffer':80,'triplesec':181}],39:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},C,Ch,ClearSigner,CreationTime,Issuer,Literal,SHA512,SRF,Signature,Verifier,VerifierBase,WordArray,bufferify,clearsign_header,clearsign_to_sign,dash_escape,dash_unescape_line,dash_unescape_lines,encode,export_key_pgp,get_cipher,hashmod,iced,input_to_cleartext,input_to_cleartext_display,input_to_cleartext_sign,konst,make_esc,scrub_buffer,triplesec,unix_time,whitespace_strip,__iced_k,__iced_k_noop,_ref,_ref1,_ref2;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},make_esc=require('iced-error').make_esc,_ref=require('./packet/signature'),Signature=_ref.Signature,CreationTime=_ref.CreationTime,Issuer=_ref.Issuer,_ref1=require('../util'),bufferify=_ref1.bufferify,unix_time=_ref1.unix_time,SRF=require('../rand').SRF,triplesec=require('triplesec'),_ref2=require('../symmetric'),export_key_pgp=_ref2.export_key_pgp,get_cipher=_ref2.get_cipher,scrub_buffer=triplesec.util.scrub_buffer,WordArray=triplesec.WordArray,konst=require('../const'),C=konst.openpgp,Ch=require('../header'),hashmod=require('../hash'),SHA512=hashmod.SHA512,encode=require('./armor').encode,clearsign_header=require('pgp-utils').armor.clearsign_header,Literal=require('./packet/literal').Literal,VerifierBase=require('./verifier').Base,exports.input_to_cleartext=input_to_cleartext=function(raw){var lines,ret;return lines=raw.split(/\n/),ret={show:bufferify(input_to_cleartext_display(lines)),sign:bufferify(input_to_cleartext_sign(lines))},ret},exports.dash_escape=dash_escape=function(line){return line.length>=1&&line[0]==='-'?'- '+line:line},exports.dash_unescape_line=dash_unescape_line=function(line){var m,out,warn,_ref3;return warn=!1,out=(m=line.match(/^-( )?(.*?)$/))==null?line:(((_ref3=m[1])==null?void 0:_ref3.length)===1?void 0:warn=!0,m[2]),[out,warn]},exports.dash_unescape_lines=dash_unescape_lines=function(lines,warnings){var i,l,line,ret,warn;return warnings==null&&(warnings=null),ret=function(){var _i,_len,_ref3,_results;for(_results=[],i=_i=0,_len=lines.length;_i<_len;i=++_i)line=lines[i],_ref3=dash_unescape_line(line),l=_ref3[0],warn=_ref3[1],warn&&warnings!=null&&warnings.push('Bad dash-encoding on line '+(i+1)),_results.push(l);return _results}(),ret},exports.input_to_cleartext_display=input_to_cleartext_display=function(lines){var line,out;return out=function(){var _i,_len,_results;for(_results=[],_i=0,_len=lines.length;_i<_len;_i++)line=lines[_i],_results.push(dash_escape(line));return _results}(),(lines.length===0||lines.slice(-1)[0]!=='')&&out.push(''),out.join('\n')},exports.clearsign_to_sign=clearsign_to_sign=function(lines,warnings){return lines=dash_unescape_lines(lines,warnings),input_to_cleartext_sign(lines)},exports.input_to_cleartext_sign=input_to_cleartext_sign=function(lines){var line,num_trailing_newlines,t,tmp,_i;for(tmp=function(){var _i,_len,_results;for(_results=[],_i=0,_len=lines.length;_i<_len;_i++)line=lines[_i],_results.push(whitespace_strip(line));return _results}(),num_trailing_newlines=0,_i=tmp.length-1;_i>=0&&(t=tmp[_i],t==='');_i+=-1)num_trailing_newlines++;return num_trailing_newlines>0&&tmp.pop(),tmp.join('\r\n')},exports.whitespace_strip=whitespace_strip=function(line){var m;return line=line.replace(/\r/g,''),(m=line.match(/^(.*?)([ \t]*)$/))?m[1]:line},ClearSigner=function(){function ClearSigner(_arg){this.msg=_arg.msg,this.signing_key=_arg.signing_key}return ClearSigner.prototype._fix_msg=function(cb){return this._cleartext=input_to_cleartext(this.msg.toString('utf8')),cb(null)},ClearSigner.prototype._sign_msg=function(cb){var err,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),this.sig=new Signature({sig_type:C.sig_types.canonical_text,key:this.signing_key.key,hashed_subpackets:[new CreationTime(unix_time())],unhashed_subpackets:[new Issuer(this.signing_key.get_key_id())]}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/clearsign.iced',funcname:'ClearSigner._sign_msg'}),_this.sig.write(_this._cleartext.sign,__iced_deferrals.defer({assign_fn:function(__slot_1){return function(){return err=arguments[0],__slot_1._sig_output=arguments[1]}}(_this),lineno:117})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err,_this._sig_output)}}(this))},ClearSigner.prototype.scrub=function(){},ClearSigner.prototype.hasher_name=function(){return this.sig.hasher.algname},ClearSigner.prototype._encode=function(cb){var body,hdr;return hdr=clearsign_header(Ch,this._cleartext.show,this.hasher_name()),body=encode(C.message_types.signature,this._sig_output),cb(null,hdr+body)},ClearSigner.prototype.run=function(cb){var encoded,esc,signature,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'ClearSigner::run'),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/clearsign.iced',funcname:'ClearSigner.run'}),_this._fix_msg(esc(__iced_deferrals.defer({lineno:139}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/clearsign.iced',funcname:'ClearSigner.run'}),_this._sign_msg(esc(__iced_deferrals.defer({assign_fn:function(){return function(){return signature=arguments[0]}}(),lineno:140}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/clearsign.iced',funcname:'ClearSigner.run'}),_this._encode(esc(__iced_deferrals.defer({assign_fn:function(){return function(){return encoded=arguments[0]}}(),lineno:141}))),__iced_deferrals._fulfill()})(function(){return cb(null,encoded,signature)})})}}(this))},ClearSigner}(),Verifier=function(_super){function Verifier(_arg){var keyfetch,packets;packets=_arg.packets,this.clearsign=_arg.clearsign,keyfetch=_arg.keyfetch,Verifier.__super__.constructor.call(this,{packets:packets,keyfetch:keyfetch})}return __extends(Verifier,_super),Verifier.prototype._reformat_text=function(cb){var data;return data=bufferify(clearsign_to_sign(this.clearsign.lines)),this._literal=new Literal({data:data,format:C.literal_formats.utf8,date:unix_time()}),cb(null)},Verifier.prototype._make_hasher=function(cb){var err,h;return err=null,h=this.clearsign.headers.hash||'MD5',(this._sig.hasher=hashmod[h])==null&&(err=new Error('Unknown hash algorithm: '+h)),cb(err)},Verifier.prototype._verify=function(cb){var err,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/clearsign.iced',funcname:'Verifier._verify'}),_this._sig.verify([_this._literal],__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:182})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err)}}(this))},Verifier.prototype._check_headers=function(cb){var err,k,v,_ref3;for(k in err=null,_ref3=this.clearsign.headers,_ref3)if(v=_ref3[k],k!=='hash'){err=new Error('Unallowed header: '+k);break}return cb(err)},Verifier.prototype.run=function(cb){var esc,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'Verifier::run'),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/clearsign.iced',funcname:'Verifier.run'}),_this._check_headers(esc(__iced_deferrals.defer({lineno:199}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/clearsign.iced',funcname:'Verifier.run'}),_this._find_signature(esc(__iced_deferrals.defer({lineno:200}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/clearsign.iced',funcname:'Verifier.run'}),_this._reformat_text(esc(__iced_deferrals.defer({lineno:201}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/clearsign.iced',funcname:'Verifier.run'}),_this._fetch_key(esc(__iced_deferrals.defer({lineno:202}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/clearsign.iced',funcname:'Verifier.run'}),_this._make_hasher(esc(__iced_deferrals.defer({lineno:203}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/clearsign.iced',funcname:'Verifier.run'}),_this._verify(esc(__iced_deferrals.defer({lineno:204}))),__iced_deferrals._fulfill()})(function(){return cb(null,_this._literal)})})})})})}}(this))},Verifier}(VerifierBase),exports.sign=function(_arg,cb){var b,encoded,err,msg,signature,signing_key,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),msg=_arg.msg,signing_key=_arg.signing_key,b=new ClearSigner({msg:msg,signing_key:signing_key}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/clearsign.iced',funcname:'sign'}),b.run(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],encoded=arguments[1],signature=arguments[2]}}(),lineno:215})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return b.scrub(),cb(err,encoded,signature)}}(this))},exports.verify=function(_arg,cb){var clearsign,err,keyfetch,literal,packets,v,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),packets=_arg.packets,clearsign=_arg.clearsign,keyfetch=_arg.keyfetch,v=new Verifier({packets:packets,clearsign:clearsign,keyfetch:keyfetch}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/clearsign.iced',funcname:'verify'}),v.run(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],literal=arguments[1]}}(),lineno:223})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err,literal)}}(this))}}).call(this)},{'../const':5,'../hash':14,'../header':15,'../rand':65,'../symmetric':68,'../util':70,'./armor':33,'./packet/literal':49,'./packet/signature':53,'./verifier':61,'iced-error':115,'iced-runtime':118,'pgp-utils':163,'triplesec':181}],40:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},C,Ch,CreationTime,Issuer,Literal,Signature,Signer,Verifier,VerifierBase,WordArray,encode,hash_obj_to_fn,iced,konst,make_esc,packetsigs,streamers,unix_time,__iced_k,__iced_k_noop,_ref;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},make_esc=require('iced-error').make_esc,_ref=require('./packet/signature'),Signature=_ref.Signature,CreationTime=_ref.CreationTime,Issuer=_ref.Issuer,unix_time=require('../util').unix_time,WordArray=require('triplesec').WordArray,konst=require('../const'),C=konst.openpgp,Ch=require('../header'),streamers=require('../hash').streamers,encode=require('./armor').encode,Literal=require('./packet/literal').Literal,VerifierBase=require('./verifier').Base,packetsigs=require('./packet/packetsigs'),hash_obj_to_fn=function(obj){var fn;return fn=function(buf){return obj.finalize(WordArray.from_buffer(buf)).to_buffer()},fn.algname=buf.algname},Signer=function(){function Signer(_arg){this.data=_arg.data,this.hash_streamer=_arg.hash_streamer,this.signing_key=_arg.signing_key}return Signer.prototype.run=function(cb){var encoded,esc,signature,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'Signer::run'),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/detachsign.iced',funcname:'Signer.run'}),_this._run_hash(esc(__iced_deferrals.defer({lineno:39}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/detachsign.iced',funcname:'Signer.run'}),_this._sign(esc(__iced_deferrals.defer({assign_fn:function(){return function(){return signature=arguments[0]}}(),lineno:40}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/detachsign.iced',funcname:'Signer.run'}),_this._encode(esc(__iced_deferrals.defer({assign_fn:function(){return function(){return encoded=arguments[0]}}(),lineno:41}))),__iced_deferrals._fulfill()})(function(){return cb(null,encoded,signature)})})}}(this))},Signer.prototype.scrub=function(){},Signer.prototype._sign=function(cb){var emptybuf,err,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),this.sig=new Signature({sig_type:C.sig_types.canonical_text,key:this.signing_key.key,hashed_subpackets:[new CreationTime(unix_time())],unhashed_subpackets:[new Issuer(this.signing_key.get_key_id())],hasher:this.hash_streamer}),emptybuf=new Buffer([]),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/detachsign.iced',funcname:'Signer._sign'}),_this.sig.write(emptybuf,__iced_deferrals.defer({assign_fn:function(__slot_1){return function(){return err=arguments[0],__slot_1._sig_output=arguments[1]}}(_this),lineno:60})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err,_this._sig_output)}}(this))},Signer.prototype._encode=function(cb){var err,ret;return err=null,ret=encode(C.message_types.signature,this._sig_output),cb(err,ret)},Signer.prototype._run_hash=function(cb){var err;return err=null,this.hash_streamer!=null||(this.data==null?err=new Error('Need either a hasher or data'):(this.hash_streamer=streamers.SHA512(),this.hash_streamer.update(this.data))),cb(err)},Signer}(),Verifier=function(_super){function Verifier(_arg){var keyfetch,packets;packets=_arg.packets,this.data=_arg.data,this.data_fn=_arg.data_fn,keyfetch=_arg.keyfetch,Verifier.__super__.constructor.call(this,{packets:packets,keyfetch:keyfetch})}return __extends(Verifier,_super),Verifier.prototype._consume_data=function(cb){var buf_hasher,done,err,go,klass,streamer,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=null,function(_this){return function(__iced_k){return _this.data_fn==null?__iced_k():void(err=null,klass=_this._sig.hasher.klass,streamer=streamers[_this._sig.hasher.algname](),buf_hasher=function(buf){return streamer.update(buf)},go=!0,function(__iced_k){var _results,_while;_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},go?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/detachsign.iced',funcname:'Verifier._consume_data'}),_this.data_fn(buf_hasher,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],done=arguments[1]}}(),lineno:102})),__iced_deferrals._fulfill()}(function(){return _next(err!=null||done?go=!1:void 0)}):_break()},_while(__iced_k)}(function(){return __iced_k(_this._sig.hasher=streamer)}))}}(this)(function(_this){return function(){return cb(err)}}(this))},Verifier.prototype._verify=function(cb){var data,err,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),data=this.data?[new Literal({data:this.data})]:[],this.literals=data,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/detachsign.iced',funcname:'Verifier._verify'}),_this._sig.verify(data,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:113})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err)}}(this))},Verifier.prototype._make_literals=function(cb){return!this.literals.length&&this.literals.push(new Literal({data:new Buffer([])})),this.literals[0].push_sig(new packetsigs.Data({sig:this._sig})),cb(null)},Verifier.prototype.run=function(cb){var esc,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'Verifier::run'),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/detachsign.iced',funcname:'Verifier.run'}),_this._find_signature(esc(__iced_deferrals.defer({lineno:128}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/detachsign.iced',funcname:'Verifier.run'}),_this._fetch_key(esc(__iced_deferrals.defer({lineno:129}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/detachsign.iced',funcname:'Verifier.run'}),_this._consume_data(esc(__iced_deferrals.defer({lineno:130}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/detachsign.iced',funcname:'Verifier.run'}),_this._verify(esc(__iced_deferrals.defer({lineno:131}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/detachsign.iced',funcname:'Verifier.run'}),_this._make_literals(esc(__iced_deferrals.defer({lineno:132}))),__iced_deferrals._fulfill()})(function(){return cb(null,_this.literals)})})})})}}(this))},Verifier}(VerifierBase),exports.sign=function(_arg,cb){var data,encoded,err,hash_streamer,s,signature,signing_key,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),data=_arg.data,hash_streamer=_arg.hash_streamer,signing_key=_arg.signing_key,s=new Signer({data:data,hash_streamer:hash_streamer,signing_key:signing_key}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/detachsign.iced',funcname:'sign'}),s.run(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],encoded=arguments[1],signature=arguments[2]}}(),lineno:139})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return s.scrub(),cb(err,encoded,signature)}}(this))},exports.verify=function(_arg,cb){var data,data_fn,err,keyfetch,literals,packets,v,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),data=_arg.data,data_fn=_arg.data_fn,packets=_arg.packets,keyfetch=_arg.keyfetch,v=new Verifier({data:data,data_fn:data_fn,packets:packets,keyfetch:keyfetch}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/detachsign.iced',funcname:'verify'}),v.run(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],literals=arguments[1]}}(),lineno:147})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err,literals)}}(this))}}).call(this)}).call(this,require('buffer').Buffer)},{'../const':5,'../hash':14,'../header':15,'../util':70,'./armor':33,'./packet/literal':49,'./packet/packetsigs':51,'./packet/signature':53,'./verifier':61,'buffer':80,'iced-error':115,'iced-runtime':118,'triplesec':181}],41:[function(require,module,exports){(function(){var SignatureEngine,burn,processor;burn=require('./burner').burn,processor=require('./processor'),SignatureEngine=require('./sigeng').SignatureEngine,exports.box=burn,exports.unbox=processor.do_message}).call(this)},{'./burner':36,'./processor':57,'./sigeng':59}],42:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__slice=[].slice,ASP,C,ECDSA,Encryptor,Engine,K,KeyBlock,KeyFetched,KeyFetcher,KeyManager,KeyManagerInterface,Lifespan,Message,P3SKB,PgpEngine,Primary,RSA,SignatureEngine,Subkey,assert_no_nulls,athrow,bufeq_secure,bufferify,decode,encode,format_pgp_fingerprint_2,iced,katch,make_esc,opkts,ops_to_keyflags,parse,read_base64,unix_time,unseal,__iced_k,__iced_k_noop,_ref,_ref1,_ref2,_ref3,_ref4;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},RSA=require('../rsa').RSA,ECDSA=require('../ecc/ecdsa').ECDSA,K=require('../const').kb,C=require('../const').openpgp,make_esc=require('iced-error').make_esc,_ref=require('../util'),format_pgp_fingerprint_2=_ref.format_pgp_fingerprint_2,athrow=_ref.athrow,assert_no_nulls=_ref.assert_no_nulls,ASP=_ref.ASP,katch=_ref.katch,bufeq_secure=_ref.bufeq_secure,unix_time=_ref.unix_time,bufferify=_ref.bufferify,ops_to_keyflags=require('./util').ops_to_keyflags,_ref1=require('../keywrapper'),Lifespan=_ref1.Lifespan,Subkey=_ref1.Subkey,Primary=_ref1.Primary,_ref2=require('./armor'),Message=_ref2.Message,encode=_ref2.encode,decode=_ref2.decode,parse=require('./parser').parse,KeyBlock=require('./processor').KeyBlock,opkts=require('./packet/all'),_ref3=require('../keybase/encode'),read_base64=_ref3.read_base64,unseal=_ref3.unseal,P3SKB=require('../keybase/packet/p3skb').P3SKB,_ref4=require('../keyfetch'),KeyFetcher=_ref4.KeyFetcher,KeyFetched=_ref4.KeyFetched,SignatureEngine=require('./sigeng').SignatureEngine,Encryptor=require('triplesec').Encryptor,KeyManagerInterface=require('../kmi').KeyManagerInterface,Engine=function(){function Engine(_arg){var k,_i,_len,_ref5;for(this.primary=_arg.primary,this.subkeys=_arg.subkeys,this.userids=_arg.userids,this.key_manager=_arg.key_manager,this.packets=[],this.messages=[],this._allocate_key_packets(),_ref5=this.subkeys,(_i=0,_len=_ref5.length);_i<_len;_i++)k=_ref5[_i],k.primary=this.primary;this._index_keys(),!0}return Engine.prototype._index_keys=function(){var k,_i,_len,_ref5,_results;for(this._index={},_ref5=this._all_keys(),_results=[],(_i=0,_len=_ref5.length);_i<_len;_i++)k=_ref5[_i],_results.push(this._index[this.ekid(k)]=k);return _results},Engine.prototype.ekid=function(k){return this.key(k).ekid()},Engine.prototype._allocate_key_packets=function(){var key,_i,_len,_ref5,_results;for(this._v_allocate_key_packet(this.primary,{subkey:!1}),_ref5=this.subkeys,_results=[],(_i=0,_len=_ref5.length);_i<_len;_i++)key=_ref5[_i],_results.push(this._v_allocate_key_packet(key,{subkey:!0}));return _results},Engine.prototype._all_keys=function(){return[this.primary].concat(this.subkeys)},Engine.prototype.self_sign_primary=function(args,cb){return this._v_self_sign_primary(args,cb)},Engine.prototype.get_all_key_materials=function(){var k;return[[this.key(this.primary),!0]].concat(function(){var _i,_len,_ref5,_results;for(_ref5=this.subkeys,_results=[],(_i=0,_len=_ref5.length);_i<_len;_i++)k=_ref5[_i],_results.push([this.key(k),!1]);return _results}.call(this))},Engine.prototype.sign_subkeys=function(_arg,cb){var asp,err,subkey,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),asp=_arg.asp,err=null,function(_this){return function(__iced_k){var _i,_len,_ref5,_results,_while;_ref5=_this.subkeys,_len=_ref5.length,_i=0,_results=[],_while=function(__iced_k){var _break,_continue,_next;return(_break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return++_i,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},!(_i<_len))?_break():(subkey=_ref5[_i],err==null)?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'Engine.sign_subkeys'}),_this._v_sign_subkey({asp:asp,subkey:subkey},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:73})),__iced_deferrals._fulfill()}(_next):_continue()},_while(__iced_k)}}(this)(function(_this){return function(){return cb(err)}}(this))},Engine.prototype.get_subkey_materials=function(){var k,_i,_len,_ref5,_results;for(_ref5=this.subkeys,_results=[],(_i=0,_len=_ref5.length);_i<_len;_i++)k=_ref5[_i],_results.push(this.key(k));return _results},Engine.prototype.is_locked=function(){var i,k,_i,_len,_ref5;for(_ref5=this._all_keys(),i=_i=0,_len=_ref5.length;_i<_len;i=++_i)if(k=_ref5[i],this.key(k).is_locked())return!0;return!1},Engine.prototype.has_private=function(){var k,_i,_len,_ref5;for(_ref5=this._all_keys(),_i=0,_len=_ref5.length;_i<_len;_i++)if(k=_ref5[_i],this.key(k).has_private())return!0;return!1},Engine.prototype.sign=function(_arg,cb){var asp,err,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),asp=_arg.asp,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'Engine.sign'}),_this.self_sign_primary({asp:asp},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:97})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){return typeof err==='undefined'||err===null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'Engine.sign'}),_this.sign_subkeys({asp:asp},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:98})),__iced_deferrals._fulfill()}(__iced_k):__iced_k()})(function(){return cb(err)})}}(this))},Engine.prototype.check_eq=function(eng2){var err,i,key,_i,_len,_ref5;if(err=null,!this.primary.key.eq(eng2.primary.key))err=new Error('Primary keys don\'t match');else if(this.subkeys.length!==eng2.subkeys.length)err=new Error('different # of subkeys');else for(_ref5=this.subkeys,i=_i=0,_len=_ref5.length;_i<_len;i=++_i)key=_ref5[i],this.err==null&&!key.key.eq(eng2.subkeys[i].key)&&(err=new Error('subkey '+i+' doesn\'t match'));return err},Engine.prototype.merge_private=function(eng2){var err,i,k,_i,_len,_ref5;if(err=this._merge_private_primary(eng2),err==null)for(_ref5=eng2.subkeys,i=_i=0,_len=_ref5.length;_i<_len&&(k=_ref5[i],(err=this._merge_private_subkey(k,i))==null);i=++_i);return err},Engine.prototype._merge_private_primary=function(eng2){var err;return err=this.key(eng2.primary).has_secret_key_material()?this._merge_1_private(this.primary,eng2.primary)?null:new Error('primary public key doesn\'t match private key'):null,err},Engine.prototype._merge_private_subkey=function(k2,i){var ekid,err,k;return err=this.key(k2).has_secret_key_material()?(ekid=this.ekid(k2))==null?new Error('Subkey '+i+' is malformed'):(k=this._index[ekid])==null?new Error('Subkey '+i+' wasn\'t found in public key'):this._merge_1_private(k,k2)?null:new Error('subkey '+i+' can\'t be merged'):null,err},Engine.prototype.unlock_keys=function(_arg,cb){var asp,esc,i,passphrase,subkey,tsenc,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),asp=_arg.asp,passphrase=_arg.passphrase,tsenc=_arg.tsenc,esc=make_esc(cb,'Engine::unlock_keys'),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'Engine.unlock_keys'}),_this.key(_this.primary).unlock({asp:asp,tsenc:tsenc,passphrase:passphrase},esc(__iced_deferrals.defer({lineno:146}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){var _i,_len,_ref5,_results,_while;_ref5=_this.subkeys,_len=_ref5.length,i=0,_results=[],_while=function(__iced_k){var _break,_continue,_next;return(_break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return++i,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},!(i<_len))?_break():(subkey=_ref5[i],_this.key(subkey).has_private())?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'Engine.unlock_keys'}),_this.key(subkey).unlock({asp:asp,tsenc:tsenc,passphrase:passphrase},esc(__iced_deferrals.defer({lineno:148}))),__iced_deferrals._fulfill()}(_next):_continue()},_while(__iced_k)})(function(){return cb(null)})}}(this))},Engine.prototype.export_keys_to_keyring=function(km){var k,x;return x=function(_this){return function(key_wrapper,is_primary){return{km:km,is_primary:is_primary,key_wrapper:key_wrapper,key_material:_this.key(key_wrapper),key:_this.key(key_wrapper).key}}}(this),[x(this.primary,!0)].concat(function(){var _i,_len,_ref5,_results;for(_ref5=this.subkeys,_results=[],(_i=0,_len=_ref5.length);_i<_len;_i++)k=_ref5[_i],_results.push(x(k,!1));return _results}.call(this))},Engine.prototype._merge_1_private=function(k1,k2){return!!bufeq_secure(this.ekid(k1),this.ekid(k2))&&(this.key(k1).merge_private(this.key(k2)),!0)},Engine}(),PgpEngine=function(_super){function PgpEngine(_arg){var key_manager,primary,subkeys,userids;primary=_arg.primary,subkeys=_arg.subkeys,userids=_arg.userids,this.user_attributes=_arg.user_attributes,key_manager=_arg.key_manager,PgpEngine.__super__.constructor.call(this,{primary:primary,subkeys:subkeys,userids:userids,key_manager:key_manager})}return __extends(PgpEngine,_super),PgpEngine.prototype.key=function(k){return k._pgp},PgpEngine.prototype._v_allocate_key_packet=function(key,opts){if(key._pgp==null)return key._pgp=new opkts.KeyMaterial({key:key.key,timestamp:key.lifespan.generated,flags:key.flags,opts:opts})},PgpEngine.prototype._v_self_sign_primary=function(_arg,cb){var asp,err,raw_payload,sigs,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),asp=_arg.asp,raw_payload=_arg.raw_payload,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'PgpEngine._v_self_sign_primary'}),_this.key(_this.primary).self_sign_key({lifespan:_this.primary.lifespan,userids:_this.userids,raw_payload:raw_payload},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],sigs=arguments[1]}}(),lineno:198})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err,sigs)}}(this))},PgpEngine.prototype._v_sign_subkey=function(_arg,cb){var asp,err,subkey,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),asp=_arg.asp,subkey=_arg.subkey,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'PgpEngine._v_sign_subkey'}),_this.key(_this.primary).sign_subkey({subkey:_this.key(subkey),lifespan:subkey.lifespan},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:204})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err)}}(this))},PgpEngine.prototype.set_passphrase=function(pp){var k,_i,_len,_ref5,_results;for(this.primary.passphrase=pp,_ref5=this.subkeys,_results=[],(_i=0,_len=_ref5.length);_i<_len;_i++)k=_ref5[_i],_results.push(k.passphrase=pp);return _results},PgpEngine.prototype._export_keys_to_binary=function(opts){var packets,subkey,userid,_i,_j,_len,_len1,_ref5,_ref6;for(packets=[this.key(this.primary).export_framed(opts)],_ref5=this.userids,(_i=0,_len=_ref5.length);_i<_len;_i++)userid=_ref5[_i],packets.push(userid.write(),userid.get_framed_signature_output());for(opts.subkey=!0,_ref6=this.subkeys,(_j=0,_len1=_ref6.length);_j<_len1;_j++)subkey=_ref6[_j],packets.push(this.key(subkey).export_framed(opts),this.key(subkey).get_subkey_binding_signature_output());return assert_no_nulls(packets),Buffer.concat(packets)},PgpEngine.prototype.export_keys=function(opts){var msg,mt,type;return mt=C.message_types,type=opts['private']?mt.private_key:mt.public_key,msg=this._export_keys_to_binary(opts),encode(type,msg)},PgpEngine.prototype.export_to_p3skb=function(){var priv_clear,pub;return pub=this._export_keys_to_binary({'private':!1}),priv_clear=this._export_keys_to_binary({'private':!0}),new P3SKB({pub:pub,priv_clear:priv_clear})},PgpEngine.prototype.find_key=function(key_id){var k,_i,_len,_ref5;for(_ref5=this._all_keys(),_i=0,_len=_ref5.length;_i<_len;_i++)if(k=_ref5[_i],bufeq_secure(this.key(k).get_key_id(),key_id))return k;return null},PgpEngine.prototype.find_key_material=function(key_id){var key;return key=this.find_key(key_id),key==null?null:this.key(key)},PgpEngine.prototype.get_key_id=function(){return this.key(this.primary).get_key_id()},PgpEngine.prototype.get_short_key_id=function(){return this.key(this.primary).get_short_key_id()},PgpEngine.prototype.get_fingerprint=function(){return this.key(this.primary).get_fingerprint()},PgpEngine.prototype.get_ekid=function(){return this.key(this.primary).ekid()},PgpEngine.prototype.validity_check=function(cb){var err,k,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=null,function(_this){return function(__iced_k){var _i,_len,_ref5,_results,_while;_ref5=_this._all_keys(),_len=_ref5.length,_i=0,_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return++_i,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},_i<_len?void(k=_ref5[_i],function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'PgpEngine.validity_check'}),_this.key(k).validity_check(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:267})),__iced_deferrals._fulfill()}(function(){(function(__iced_k){return err==null?__iced_k():void function(__iced_k){_break()}(__iced_k)})(_next)})):_break()},_while(__iced_k)}}(this)(function(_this){return function(){return cb(err)}}(this))},PgpEngine.prototype.find_best_key=function(flags,need_priv){var check,k,wrapper,_i,_len,_ref5;for(need_priv==null&&(need_priv=!1),wrapper=null,check=function(_this){return function(k){var km,ok1,ok2;return km=_this.key(k),ok1=km.fulfills_flags(flags)||(k.flags&flags)===flags,ok2=!need_priv||km.has_private(),ok1&&ok2}}(this),_ref5=this.subkeys,(_i=0,_len=_ref5.length);_i<_len;_i++)k=_ref5[_i],wrapper==null&&check(k)&&(wrapper=k);return wrapper==null&&check(this.primary)&&(wrapper=this.primary),wrapper==null?null:this.key(wrapper)},PgpEngine.prototype.fetch=function(key_ids,op_mask,cb){var err,flags,i,key,kid,ret,ret_i,_i,_len;for(flags=ops_to_keyflags(op_mask),err=key=ret=null,key=null,ret_i=null,(i=_i=0,_len=key_ids.length);_i<_len;i=++_i)(kid=key_ids[i],key==null)&&(key=this.find_key(kid),key!=null&&(ret_i=i));return key==null?err=new Error('No keys match the given fingerprint'):this.key(key).fulfills_flags(flags)?ret=this.key(key):err=new Error('We don\'t have a key for the requested PGP ops (flags = '+flags+')'),cb(err,this.key_manager,ret_i)},PgpEngine}(Engine),KeyManager=function(_super){function KeyManager(_arg){this.primary=_arg.primary,this.subkeys=_arg.subkeys,this.userids=_arg.userids,this.armored_pgp_public=_arg.armored_pgp_public,this.armored_pgp_private=_arg.armored_pgp_private,this.user_attributes=_arg.user_attributes,this.pgp=new PgpEngine({primary:this.primary,subkeys:this.subkeys,userids:this.userids,user_attributes:this.user_attributes,key_manager:this}),this.engines=[this.pgp],this._signed=!1,this.p3skb=null}return __extends(KeyManager,_super),KeyManager.generate=function(_arg,cb){var F,KEY_FLAGS_PRIMARY,KEY_FLAGS_STD,asp,bundle,ecc,err,esc,expire_in,flags,gen,generated,i,nbits,nsubs,primary,primary_flags,s,sub_flags,subkey,subkeys,subkeys_out,u,userid,userids,___iced_passed_deferral,__iced_deferrals,__iced_k,_i,_len;for(__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),asp=_arg.asp,userid=_arg.userid,userids=_arg.userids,primary=_arg.primary,subkeys=_arg.subkeys,ecc=_arg.ecc,sub_flags=_arg.sub_flags,nsubs=_arg.nsubs,primary_flags=_arg.primary_flags,nbits=_arg.nbits,expire_in=_arg.expire_in,asp=ASP.make(asp),F=C.key_flags,KEY_FLAGS_STD=F.sign_data|F.encrypt_comm|F.encrypt_storage|F.auth,KEY_FLAGS_PRIMARY=KEY_FLAGS_STD|F.certify_keys,primary||(primary={}),primary.flags||(primary.flags=primary_flags||KEY_FLAGS_PRIMARY),primary.expire_in||(primary.expire_in=(expire_in==null?void 0:expire_in.primary)||K.key_defaults.primary.expire_in),primary.algo||(primary.algo=ecc?ECDSA:RSA),primary.nbits||(primary.nbits=nbits||K.key_defaults.primary.nbits[primary.algo.klass_name]),nsubs!=null&&sub_flags==null&&(sub_flags=function(){var _i,_results;for(_results=[],i=_i=0;0<=nsubs?_i<nsubs:_i>nsubs;i=0<=nsubs?++_i:--_i)_results.push(KEY_FLAGS_STD);return _results}()),subkeys||(subkeys=function(){var _i,_len,_results;for(_results=[],_i=0,_len=sub_flags.length;_i<_len;_i++)flags=sub_flags[_i],_results.push({flags:flags});return _results}()),(_i=0,_len=subkeys.length);_i<_len;_i++)subkey=subkeys[_i],subkey.expire_in||(subkey.expire_in=(expire_in==null?void 0:expire_in.subkey)||K.key_defaults.sub.expire_in),subkey.flags||(subkey.flags=KEY_FLAGS_STD),subkey.algo||(subkey.algo=primary.algo.subkey_algo(subkey.flags)),subkey.nbits||(subkey.nbits=nbits||K.key_defaults.sub.nbits[subkey.algo.klass_name]);generated=unix_time(),esc=make_esc(cb,'KeyManager::generate'),userid!=null&&(userids=[userid]),function(_this){return function(__iced_k){return userids!=null&&Array.isArray(userids)?__iced_k(userids=function(){var _j,_len1,_results;for(_results=[],_j=0,_len1=userids.length;_j<_len1;_j++)u=userids[_j],_results.push(new opkts.UserID(u));return _results}()):void(err=new Error('Need either \'userid\' or \'userids\' specified as an array'),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.generate'}),athrow(err,esc(__iced_deferrals.defer({lineno:391}))),__iced_deferrals._fulfill()}(__iced_k))}}(this)(function(_this){return function(){gen=function(_arg1,cb){var err,key,klass,lifespan,params,primary,section,wrapper,___iced_passed_deferral1,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral1=iced.findDeferral(arguments),klass=_arg1.klass,section=_arg1.section,params=_arg1.params,primary=_arg1.primary,asp.section(section),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral1,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced'}),params.algo.generate({asp:asp,nbits:params.nbits},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],key=arguments[1]}}(),lineno:395})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return(typeof err==='undefined'||err===null)&&(lifespan=new Lifespan({generated:generated,expire_in:params.expire_in}),wrapper=new klass({key:key,lifespan:lifespan,flags:params.flags,primary:primary})),cb(err,wrapper)}}(this))},function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.generate'}),gen({klass:Primary,section:'primary',params:primary},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return primary=arguments[0]}}(),lineno:401}))),__iced_deferrals._fulfill()}(function(){subkeys_out=[],function(__iced_k){var _j,_len1,_ref5,_results,_while;_ref5=subkeys,_len1=_ref5.length,i=0,_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return++i,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},i<_len1?void(subkey=_ref5[i],function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.generate'}),gen({klass:Subkey,section:'subkey '+(i+1),params:subkey,primary:primary},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return s=arguments[0]}}(),lineno:404}))),__iced_deferrals._fulfill()}(function(){return _next(subkeys_out.push(s))})):_break()},_while(__iced_k)}(function(){return bundle=new KeyManager({primary:primary,subkeys:subkeys_out,userids:userids}),cb(null,bundle)})})}}(this))},KeyManager.generate_rsa=function(_arg,cb){var F,asp,primary,subkeys,userid,userids;return asp=_arg.asp,userid=_arg.userid,userids=_arg.userids,F=C.key_flags,primary={flags:F.certify_keys,nbits:4096},subkeys=[{flags:F.encrypt_storage|F.encrypt_comm,nbits:2048},{flags:F.sign_data|F.auth,nbits:2048}],KeyManager.generate({asp:asp,userid:userid,userids:userids,primary:primary,subkeys:subkeys},cb)},KeyManager.generate_ecc=function(_arg,cb){var F,asp,primary,subkeys,userid,userids;return asp=_arg.asp,userid=_arg.userid,userids=_arg.userids,F=C.key_flags,primary={flags:F.certify_keys,nbits:384,algo:ECDSA},subkeys=[{flags:F.encrypt_storage|F.encrypt_comm,nbits:256},{flags:F.sign_data|F.auth,nbits:256}],KeyManager.generate({asp:asp,userid:userid,userids:userids,primary:primary,subkeys:subkeys},cb)},KeyManager.prototype.set_enc=function(e){return this.tsenc=e},KeyManager.import_from_armored_pgp=function(_arg,cb){var armored,asp,binary,err,msg,opts,raw,ret,warnings,___iced_passed_deferral,__iced_deferrals,__iced_k,_ref5,_ref6;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),armored=_arg.armored,raw=_arg.raw,binary=_arg.binary,asp=_arg.asp,opts=_arg.opts,msg=binary,err=null,msg==null&&(raw||(raw=armored),asp=ASP.make(asp),warnings=null,ret=null,_ref5=decode(raw),err=_ref5[0],msg=_ref5[1],err==null&&(_ref6=msg.type)!==C.message_types.public_key&&_ref6!==C.message_types.private_key&&(err=new Error('Wanted a public or private key; got: '+msg.type))),function(_this){return function(__iced_k){return err==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.import_from_armored_pgp'}),KeyManager.import_from_pgp_message({msg:msg,asp:asp,opts:opts},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],ret=arguments[1],warnings=arguments[2]}}(),lineno:482})),__iced_deferrals._fulfill()}(__iced_k):__iced_k()}}(this)(function(_this){return function(){(function(__iced_k){return err==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.import_from_armored_pgp'}),ret.simple_unlock({},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:488})),__iced_deferrals._fulfill()}(__iced_k):__iced_k()})(function(){return cb(err,ret,warnings)})}}(this))},KeyManager.prototype.simple_unlock=function(opts,cb){var err,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=null,function(_this){return function(__iced_k){return _this.has_pgp_private()&&!_this.is_pgp_locked()?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.simple_unlock'}),_this.unlock_pgp({},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:500})),__iced_deferrals._fulfill()}(__iced_k):__iced_k()}}(this)(function(_this){return function(){return cb(err)}}(this))},KeyManager.import_from_p3skb=function(_arg,cb){var armored,asp,err,km,msg,p3skb,raw,warnings,___iced_passed_deferral,__iced_deferrals,__iced_k,_ref5;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),raw=_arg.raw,armored=_arg.armored,asp=_arg.asp,armored||(armored=raw),asp=ASP.make(asp),km=null,warnings=null,_ref5=katch(function(){return P3SKB.alloc(unseal(read_base64(armored)))}),err=_ref5[0],p3skb=_ref5[1],function(_this){return function(__iced_k){return err==null?void(msg=new Message({body:p3skb.pub,type:C.message_types.public_key}),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.import_from_p3skb'}),KeyManager.import_from_pgp_message({msg:msg,asp:asp},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],km=arguments[1],warnings=arguments[2]}}(),lineno:515})),__iced_deferrals._fulfill()}(function(){return __iced_k(km==null?void 0:km.p3skb=p3skb)})):__iced_k()}}(this)(function(_this){return function(){return cb(err,km,warnings)}}(this))},KeyManager.prototype.unlock_p3skb=function(_arg,cb){var asp,err,km,msg,passphrase,tsenc,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),asp=_arg.asp,tsenc=_arg.tsenc,passphrase=_arg.passphrase,asp=ASP.make(asp),tsenc==null&&passphrase!=null&&(tsenc=new Encryptor({key:bufferify(passphrase)})),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.unlock_p3skb'}),_this.p3skb.unlock({tsenc:tsenc,asp:asp},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:525})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){return err==null?void(msg=new Message({body:_this.p3skb.priv.data,type:C.message_types.private_key}),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.unlock_p3skb'}),KeyManager.import_from_pgp_message({msg:msg,asp:asp},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],km=arguments[1]}}(),lineno:528})),__iced_deferrals._fulfill()}(__iced_k)):__iced_k()})(function(){(typeof err==='undefined'||err===null)&&(err=_this.pgp.merge_private(km.pgp)),function(__iced_k){return err==null?void(passphrase=new Buffer([]),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.unlock_p3skb'}),_this.unlock_pgp({passphrase:passphrase},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:537})),__iced_deferrals._fulfill()}(__iced_k)):__iced_k()}(function(){return cb(err)})})}}(this))},KeyManager.import_from_pgp_message=function(_arg,cb){var asp,bundle,err,k,kb,msg,opts,packets,warnings,___iced_passed_deferral,__iced_deferrals,__iced_k,_ref5;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),msg=_arg.msg,asp=_arg.asp,opts=_arg.opts,asp=ASP.make(asp),bundle=null,warnings=null,(typeof err==='undefined'||err===null)&&(_ref5=parse(msg.body),err=_ref5[0],packets=_ref5[1]),function(_this){return function(__iced_k){return err==null?void(kb=new KeyBlock(packets,opts),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.import_from_pgp_message'}),kb.process(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:552})),__iced_deferrals._fulfill()}(function(){return __iced_k(warnings=kb.warnings)})):__iced_k()}}(this)(function(_this){return function(){err==null&&(bundle=new KeyManager({primary:KeyManager._wrap_pgp(Primary,kb.primary),subkeys:function(){var _i,_len,_ref6,_results;for(_ref6=kb.subkeys,_results=[],(_i=0,_len=_ref6.length);_i<_len;_i++)k=_ref6[_i],_results.push(KeyManager._wrap_pgp(Subkey,k));return _results}(),armored_pgp_public:msg.raw(),user_attributes:kb.user_attributes,userids:kb.userids})),function(__iced_k){return err==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.import_from_pgp_message'}),bundle.check_pgp_validity(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:562})),__iced_deferrals._fulfill()}(__iced_k):__iced_k()}(function(){return cb(err,bundle,warnings)})}}(this))},KeyManager.prototype.merge_pgp_private=function(_arg,cb){var armored,asp,b2,err,esc,raw,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),armored=_arg.armored,raw=_arg.raw,asp=_arg.asp,asp=ASP.make(asp),esc=make_esc(cb,'merge_pgp_private'),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.merge_pgp_private'}),KeyManager.import_from_armored_pgp({armored:armored,raw:raw,asp:asp},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return b2=arguments[0]}}(),lineno:573}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){err=_this.pgp.merge_private(b2.pgp),function(__iced_k){return err==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.merge_pgp_private'}),_this.simple_unlock({},esc(__iced_deferrals.defer({lineno:575}))),__iced_deferrals._fulfill()}(__iced_k):__iced_k()}(function(){return cb(err)})}}(this))},KeyManager.prototype.check_pgp_public_eq=function(km2){return this.pgp.check_eq(km2.pgp)},KeyManager.prototype.unlock_pgp=function(_arg,cb){var err,passphrase,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),passphrase=_arg.passphrase,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.unlock_pgp'}),_this.pgp.unlock_keys({passphrase:passphrase},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:588})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err)}}(this))},KeyManager.prototype.is_pgp_locked=function(){return this.pgp.is_locked()},KeyManager.prototype.is_keybase_locked=function(){return this.keybase.is_locked()},KeyManager.prototype.has_pgp_private=function(){return this.pgp.has_private()},KeyManager.prototype.has_p3skb_private=function(){var _ref5;return(_ref5=this.p3skb)==null?void 0:_ref5.has_private()},KeyManager.prototype.has_keybase_private=function(){return this.keybase.has_private()},KeyManager.prototype.is_p3skb_locked=function(){var _ref5;return(_ref5=this.p3skb)==null?void 0:_ref5.is_locked()},KeyManager.prototype.unlock_keybase=function(_arg,cb){var asp,err,tsenc,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),tsenc=_arg.tsenc,asp=_arg.asp,asp=ASP.make(asp),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.unlock_keybase'}),_this.keybase.unlock_keys({tsenc:tsenc,asp:asp},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:606})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err)}}(this))},KeyManager.prototype.export_private_to_server=function(_arg,cb){var asp,err,p3skb,ret,tsenc,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),tsenc=_arg.tsenc,asp=_arg.asp,asp=ASP.make(asp),err=ret=null,function(_this){return function(__iced_k){return(err=_this._assert_signed())==null?void(p3skb=_this.pgp.export_to_p3skb(),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.export_private_to_server'}),p3skb.lock({tsenc:tsenc,asp:asp},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:619})),__iced_deferrals._fulfill()}(__iced_k)):__iced_k()}}(this)(function(_this){return function(){return err==null&&(ret=p3skb.frame_packet_armored({dohash:!0})),cb(err,ret)}}(this))},KeyManager.prototype.export_pgp_private_to_client=function(_arg,cb){var asp,err,msg,passphrase,regen;return passphrase=_arg.passphrase,asp=_arg.asp,regen=_arg.regen,asp=ASP.make(asp),err=msg=null,passphrase!=null&&(passphrase=bufferify(passphrase)),!regen&&(msg=this.armored_pgp_private)||(err=this._assert_signed())==null&&(msg=this.pgp.export_keys({'private':!0,passphrase:passphrase})),cb(err,msg)},KeyManager.prototype.export_pgp_private=function(){var args;return args=1<=arguments.length?__slice.call(arguments,0):[],this.export_pgp_private_to_client.apply(this,args)},KeyManager.prototype.export_pgp_public=function(_arg,cb){var asp,err,msg,regen;return asp=_arg.asp,regen=_arg.regen,asp=ASP.make(asp),err=null,(err=this._assert_signed())==null&&(!regen&&(msg=this.armored_pgp_public),msg==null&&(msg=this.pgp.export_keys({'private':!1}))),cb(err,msg)},KeyManager.prototype.export_public=function(_arg,cb){var asp,err,msg,regen,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),asp=_arg.asp,regen=_arg.regen,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.export_public'}),_this.export_pgp_public({asp:asp,regen:regen},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],msg=arguments[1]}}(),lineno:654})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err,msg)}}(this))},KeyManager.prototype.export_private=function(_arg,cb){var asp,err,p3skb,passphrase,res,tsenc,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),passphrase=_arg.passphrase,p3skb=_arg.p3skb,asp=_arg.asp,function(_this){return function(__iced_k){p3skb?(tsenc=new Encryptor({key:bufferify(passphrase)}),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.export_private'}),_this.export_private_to_server({tsenc:tsenc,asp:asp},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],res=arguments[1]}}(),lineno:662})),__iced_deferrals._fulfill()}(__iced_k)):function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.export_private'}),_this.export_pgp_private_to_client({passphrase:passphrase,asp:asp},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],res=arguments[1]}}(),lineno:664})),__iced_deferrals._fulfill()}(__iced_k)}}(this)(function(_this){return function(){return cb(err,res)}}(this))},KeyManager.prototype.sign_pgp=function(_arg,cb){var asp;return asp=_arg.asp,this.pgp.sign({asp:asp},cb)},KeyManager.prototype.sign=function(_arg,cb){var asp,err,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),asp=_arg.asp,asp=ASP.make(asp),asp.section('sign'),asp.progress({what:'sign PGP',total:1,i:0}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager.sign'}),_this.sign_pgp({asp:asp},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:677})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return asp.progress({what:'sign PGP',total:1,i:1}),(typeof err==='undefined'||err===null)&&(_this._signed=!0),cb(err)}}(this))},KeyManager.prototype.get_userids=function(){return this.userids},KeyManager.prototype.get_userids_mark_primary=function(){var do_insert,i,k,max,max_s,mymax,obj,pair,prev,primary_time,ret,s,tab,userid,_i,_len,_ref5;for(max=null,max_s=null,tab={},mymax=function(a,b){return a==null&&b==null?null:a==null?b:b==null?a:a>b?a:b},_ref5=this.userids,(i=_i=0,_len=_ref5.length);_i<_len;i=++_i)(userid=_ref5[i],userid!=null)&&(s=userid.utf8(),pair=userid.time_primary_pair(),obj={userid:userid,pair:pair,i:i},do_insert=!1,(prev=tab[s])==null?(primary_time=pair[1],do_insert=!0):(primary_time=mymax(prev.pair[1],pair[1]),(prev.pair[0]==null||pair[0]&&prev.pair[0]<pair[0])&&(do_insert=!0)),do_insert&&(tab[s]=obj),primary_time!=null&&(max==null||max<primary_time)&&(max_s=s,max=primary_time));for(k in max_s!=null&&(tab[max_s].userid.primary=!0),ret=[],tab)obj=tab[k],obj.userid.most_recent_sig=obj.pair[0],ret.push(obj.userid);return ret},KeyManager.prototype.fetch=function(key_ids,flags,cb){return this.pgp.fetch(key_ids,flags,cb)},KeyManager.prototype.find_pgp_key=function(key_id){return this.pgp.find_key(key_id)},KeyManager.prototype.find_pgp_key_material=function(key_id){return this.pgp.find_key_material(key_id)},KeyManager.prototype.find_best_pgp_key=function(flags,need_priv){return this.pgp.find_best_key(flags,need_priv)},KeyManager.prototype.find_signing_pgp_key=function(){return this.find_best_pgp_key(C.key_flags.sign_data,!0)},KeyManager.prototype.find_verifying_pgp_key=function(){return this.find_best_pgp_key(C.key_flags.sign_data,!1)},KeyManager.prototype.find_crypt_pgp_key=function(need_priv){return need_priv==null&&(need_priv=!1),this.find_best_pgp_key(C.key_flags.encrypt_comm,need_priv)},KeyManager.prototype.can_verify=function(){return this.find_verifying_pgp_key()!=null},KeyManager.prototype.can_sign=function(){return this.find_signing_pgp_key()!=null},KeyManager.prototype.can_encrypt=function(){return this.find_crypt_pgp_key(!1)!=null},KeyManager.prototype.can_decrypt=function(){return this.find_crypt_pgp_key(!0)!=null},KeyManager.prototype.get_primary_keypair=function(){return this.primary.key},KeyManager.prototype.get_all_pgp_key_materials=function(){return this.pgp.get_all_key_materials()},KeyManager.prototype.export_pgp_keys_to_keyring=function(){return this.pgp.export_keys_to_keyring(this)},KeyManager.prototype.get_pgp_key_id=function(){return this.pgp.get_key_id()},KeyManager.prototype.get_pgp_short_key_id=function(){return this.pgp.get_short_key_id()},KeyManager.prototype.get_pgp_fingerprint=function(){return this.pgp.get_fingerprint()},KeyManager.prototype.get_pgp_fingerprint_str=function(){var _ref5;return(_ref5=this.get_pgp_fingerprint())==null?void 0:_ref5.toString('hex')},KeyManager.prototype.get_ekid=function(){return this.pgp.get_ekid()},KeyManager.prototype.get_ekid_b64_str=function(){var k;return(k=this.get_ekid())==null?null:base64u.encode(k)},KeyManager.prototype.get_fp2=function(){return this.get_pgp_fingerprint()},KeyManager.prototype.get_fp2_formatted=function(opts){var p;return(p=this.get_fp2())==null?null:format_pgp_fingerprint_2(p,opts)},KeyManager.prototype.get_type=function(){return'pgp'},KeyManager.prototype.check_pgp_validity=function(cb){return this.pgp.validity_check(cb)},KeyManager.prototype.make_sig_eng=function(){return new SignatureEngine({km:this})},KeyManager.prototype._apply_to_engines=function(_arg,cb){var args,e,err,meth,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),args=_arg.args,meth=_arg.meth,err=null,function(_this){return function(__iced_k){var _i,_len,_ref5,_results,_while;_ref5=_this.engines,_len=_ref5.length,_i=0,_results=[],_while=function(__iced_k){var _break,_continue,_next;return(_break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return++_i,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},!(_i<_len))?_break():(e=_ref5[_i],!err)?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/keymanager.iced',funcname:'KeyManager._apply_to_engines'}),meth.call(e,args,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:806})),__iced_deferrals._fulfill()}(_next):_continue()},_while(__iced_k)}}(this)(function(_this){return function(){return cb(err)}}(this))},KeyManager.prototype._assert_signed=function(){return this._signed?null:new Error('need to sign before export')},KeyManager._wrap_pgp=function(klass,kmp){return new klass({key:kmp.key,lifespan:new Lifespan({generated:kmp.timestamp}),_pgp:kmp})},KeyManager}(KeyManagerInterface),exports.KeyManager=KeyManager,exports.opkts=opkts}).call(this)}).call(this,require('buffer').Buffer)},{'../const':5,'../ecc/ecdsa':10,'../keybase/encode':16,'../keybase/packet/p3skb':21,'../keyfetch':24,'../keywrapper':26,'../kmi':27,'../rsa':67,'../util':70,'./armor':33,'./packet/all':44,'./parser':56,'./processor':57,'./sigeng':59,'./util':60,'buffer':80,'iced-error':115,'iced-runtime':118,'triplesec':181}],43:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},AES,ASP,Base,Decryptor,Encryptor,SlicerBuffer,WordArray,decrypt,encrypt,iced,make_esc,repeat,rng,test,triplesec,__iced_k,__iced_k_noop;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},WordArray=require('triplesec').WordArray,SlicerBuffer=require('./buffer').SlicerBuffer,triplesec=require('triplesec'),AES=triplesec.ciphers.AES,ASP=require('pgp-utils').util.ASP,make_esc=require('iced-error').make_esc,repeat=function(b,n){return Buffer.concat([b,b.slice(b.length-n)])},Base=function(){function Base(_arg){var asp,key;this.block_cipher_class=_arg.block_cipher_class,key=_arg.key,this.cipher=_arg.cipher,this.resync=_arg.resync,asp=_arg.asp,this.block_cipher_class||(this.block_cipher_class=AES),this.cipher||(this.cipher=new this.block_cipher_class(WordArray.from_buffer(key))),this.block_size=this.cipher.blockSize,this.out_bufs=[],this.asp=ASP.make(asp)}return Base.prototype.compact=function(){var b;return b=Buffer.concat(this.out_bufs),this.out_bufs=[b],b},Base}(),Encryptor=function(_super){function Encryptor(_arg){var asp,block_cipher_class,cipher,key,prefixrandom,resync;block_cipher_class=_arg.block_cipher_class,key=_arg.key,cipher=_arg.cipher,prefixrandom=_arg.prefixrandom,resync=_arg.resync,asp=_arg.asp,Encryptor.__super__.constructor.call(this,{block_cipher_class:block_cipher_class,key:key,cipher:cipher,resync:resync,asp:asp}),this._init(prefixrandom)}return __extends(Encryptor,_super),Encryptor.prototype._enc=function(){return this.FRE=WordArray.from_buffer(this.FR),this.cipher.encryptBlock(this.FRE.words,0)},Encryptor.prototype._emit_sb=function(sb){var buf,deficit,i,pad;return buf=(deficit=this.block_size-sb.rem())>0?(pad=new Buffer(function(){var _i,_results;for(_results=[],i=_i=0;0<=deficit?_i<deficit:_i>deficit;i=0<=deficit?++_i:--_i)_results.push(0);return _results}()),Buffer.concat([sb.consume_rest_to_buffer(),pad])):sb.read_buffer(this.block_size),this._emit_buf(buf)},Encryptor.prototype._emit_buf=function(buf){var wa;return wa=WordArray.from_buffer(buf.slice(0,this.block_size)),wa.xor(this.FRE,{n_words:_Mathmin5(wa.words.length,this.FRE.words.length)}),buf=wa.to_buffer(),this.out_bufs.push(buf),this.FR=new Buffer(buf)},Encryptor.prototype._init=function(prefixrandom){var b,canary,ct,i,offset;return this.FR=new Buffer(function(){var _i,_ref,_results;for(_results=[],i=_i=0,_ref=this.block_size;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i)_results.push(0);return _results}.call(this)),prefixrandom=repeat(prefixrandom,2),this._enc(),this._emit_buf(prefixrandom),this._enc(),b=this.FRE.to_buffer(),canary=new Buffer(function(){var _i,_results;for(_results=[],i=_i=0;_i<2;i=++_i)_results.push(b.readUInt8(i)^prefixrandom.readUInt8(this.block_size+i));return _results}.call(this)),this.out_bufs.push(canary),offset=this.resync?2:0,ct=this.compact(),ct.copy(this.FR,0,offset,offset+this.block_size),this._enc()},Encryptor.prototype.enc=function(plaintext,cb){var buf,ct,esc,j,n_wanted,ret,sb,total,wa,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),sb=new SlicerBuffer(plaintext),esc=make_esc(cb,'Encryptor::enc'),this.resync?this._emit_sb(sb):(buf=Buffer.concat([new Buffer([0,0]),sb.read_buffer(this.block_size-2)]),wa=WordArray.from_buffer(buf),wa.xor(this.FRE,{}),buf=wa.to_buffer().slice(2),this.out_bufs.push(buf),ct=this.compact(),ct.copy(this.FR,0,ct.length-this.block_size,ct.length)),total=sb.rem(),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/ocfb.iced',funcname:'Encryptor.enc'}),_this.asp.progress({what:'ofcb encryption',i:0,total:total},esc(__iced_deferrals.defer({lineno:168}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){var _results,_while;_results=[],_while=function(__iced_k){var _break,_continue,_i,_next;if(_break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},!(j=sb.rem()))return _break();for(_i=0;_i<4096&&(_this._enc(),_this._emit_sb(sb),!!(j=sb.rem()));_i++);(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/ocfb.iced',funcname:'Encryptor.enc'}),_this.asp.progress({what:'ofcb encryption',i:total-j,total:total},esc(__iced_deferrals.defer({lineno:177}))),__iced_deferrals._fulfill()})(_next)},_while(__iced_k)})(function(){return ret=_this.compact(),n_wanted=plaintext.length+_this.block_size+2,ret=ret.slice(0,n_wanted),cb(null,ret)})}}(this))},Encryptor}(Base),Decryptor=function(_super){function Decryptor(_arg){var asp,block_cipher_class,cipher,key,prefixrandom,resync;block_cipher_class=_arg.block_cipher_class,key=_arg.key,cipher=_arg.cipher,prefixrandom=_arg.prefixrandom,resync=_arg.resync,this.ciphertext=_arg.ciphertext,asp=_arg.asp,Decryptor.__super__.constructor.call(this,{block_cipher_class:block_cipher_class,key:key,cipher:cipher,resync:resync,asp:asp}),this._init()}return __extends(Decryptor,_super),Decryptor.prototype._init=function(){return this.reset()},Decryptor.prototype.reset=function(){return this.sb=new SlicerBuffer(this.ciphertext)},Decryptor.prototype.next_block=function(){return WordArray.from_buffer(this.sb.read_buffer_at_most(this.block_size))},Decryptor.prototype.get_prefix=function(){return this._prefix},Decryptor.prototype.check=function(cb){var ablock,err,i,iblock,lhs,rhs;return this.reset(),iblock=new WordArray(function(){var _i,_ref,_results;for(_results=[],i=_i=0,_ref=this.block_size/4;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i)_results.push(0);return _results}.call(this)),this.cipher.encryptBlock(iblock.words,0),ablock=this.next_block(),iblock.xor(ablock,{}),this._prefix=iblock.to_buffer(),this.cipher.encryptBlock(ablock.words,0),lhs=iblock.words.slice(-1)[0]&65535,rhs=ablock.words[0]>>>16^this.sb.peek_uint16(),err=lhs===rhs?null:new Error('Canary block mismatch: '+lhs+' != '+rhs),cb(err)},Decryptor.prototype.dec=function(cb){var ablock,esc,iblock,j,out,total,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),this.reset(),this.resync&&this.sb.advance(2),iblock=this.next_block(),esc=make_esc(cb,'Decryption::dec'),total=this.sb.rem(),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/ocfb.iced',funcname:'Decryptor.dec'}),_this.asp.progress({what:'ofcb decrypt',i:0,total:total},esc(__iced_deferrals.defer({lineno:239}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){var _results,_while;_results=[],_while=function(__iced_k){var _break,_continue,_i,_next;if(_break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},!(j=_this.sb.rem()))return _break();for(_i=0;_i<4096&&(ablock=iblock,_this.cipher.encryptBlock(ablock.words,0),iblock=_this.next_block(),ablock.xor(iblock,{}),_this.out_bufs.push(ablock.to_buffer().slice(0,iblock.sigBytes)),!!(j=_this.sb.rem()));_i++);(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/ocfb.iced',funcname:'Decryptor.dec'}),_this.asp.progress({what:'ofcb decrypt',i:total-j,total:total},esc(__iced_deferrals.defer({lineno:251}))),__iced_deferrals._fulfill()})(_next)},_while(__iced_k)})(function(){return out=_this.compact(),!_this.resync&&(out=out.slice(2)),cb(null,out)})}}(this))},Decryptor}(Base),encrypt=function(_arg,cb){var asp,block_cipher_class,cipher,eng,key,plaintext,prefixrandom,resync;return block_cipher_class=_arg.block_cipher_class,key=_arg.key,cipher=_arg.cipher,prefixrandom=_arg.prefixrandom,resync=_arg.resync,plaintext=_arg.plaintext,asp=_arg.asp,eng=new Encryptor({block_cipher_class:block_cipher_class,key:key,cipher:cipher,prefixrandom:prefixrandom,resync:resync,asp:asp}),eng.enc(plaintext,cb)},decrypt=function(_arg,cb){var asp,block_cipher_class,cipher,ciphertext,eng,err,key,pt,resync,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),block_cipher_class=_arg.block_cipher_class,key=_arg.key,cipher=_arg.cipher,resync=_arg.resync,ciphertext=_arg.ciphertext,asp=_arg.asp,eng=new Decryptor({block_cipher_class:block_cipher_class,key:key,cipher:cipher,resync:resync,ciphertext:ciphertext,asp:asp}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/ocfb.iced'}),eng.check(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:267})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){return typeof err==='undefined'||err===null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/ocfb.iced'}),eng.dec(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],pt=arguments[1]}}(),lineno:268})),__iced_deferrals._fulfill()}(__iced_k):__iced_k()})(function(){return cb(err,pt)})}}(this))},exports.encrypt=encrypt,exports.decrypt=decrypt,exports.Decryptor=Decryptor,rng=require('crypto').rng,test=function(){var block_cipher_class,ct,key,plaintext,prefixrandom,pt;return plaintext=new Buffer('a man a plan a canal panama. and you know the rest'),key=rng(32),prefixrandom=new Buffer([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),block_cipher_class=AES,ct=encrypt({block_cipher_class:block_cipher_class,key:key,prefixrandom:prefixrandom,plaintext:plaintext}),void 0,pt=decrypt({block_cipher_class:block_cipher_class,key:key,prefixrandom:prefixrandom,ciphertext:ct}),void 0}}).call(this)}).call(this,require('buffer').Buffer)},{'./buffer':35,'buffer':80,'crypto':86,'iced-error':115,'iced-runtime':118,'pgp-utils':163,'triplesec':181}],44:[function(require,module,exports){(function(){exports.KeyMaterial=require('./keymaterial').KeyMaterial,exports.Signature=require('./signature').Signature,exports.UserID=require('./userid').UserID}).call(this)},{'./keymaterial':48,'./signature':53,'./userid':55}],45:[function(require,module,exports){(function(Buffer){(function(){var C,Packet,packetsigs,util;util=require('../util'),C=require('../../const').openpgp,packetsigs=require('./packetsigs'),Packet=function(){function Packet(){this._psc=new packetsigs.Collection}return Packet.prototype.frame_packet=function(tag,body){var bufs;return bufs=[new Buffer([192|tag]),util.encode_length(body.length),body],Buffer.concat(bufs)},Packet.prototype.set=function(d){var k,v,_results;for(k in _results=[],d)v=d[k],_results.push(this[k]=v);return _results},Packet.prototype.is_signature=function(){return!1},Packet.prototype.is_key_material=function(){return!1},Packet.prototype.is_duplicate_primary=function(){return!1},Packet.prototype.to_userid=function(){return null},Packet.prototype.to_user_attribute=function(){return null},Packet.prototype.to_literal=function(){return null},Packet.prototype.to_esk_packet=function(){return null},Packet.prototype.to_enc_data_packet=function(){return null},Packet.prototype.replay=function(){return this.frame_packet(this.tag,this.raw)},Packet.prototype.inflate=function(cb){return cb(null,null)},Packet.prototype.push_sig=function(packetsig){return this._psc.push(packetsig)},Packet.prototype.get_psc=function(){return this._psc},Packet.prototype.get_data_signer=function(){return this.get_psc().get_data_signer()},Packet.prototype.get_data_signers=function(){return this.get_psc().get_data_signers()},Packet.prototype.get_signed_userids=function(){return[]},Packet.prototype.get_subkey_binding=function(){return null},Packet.prototype.is_self_signed=function(){return!1},Packet}(),exports.Packet=Packet}).call(this)}).call(this,require('buffer').Buffer)},{'../../const':5,'../util':60,'./packetsigs':51,'buffer':80}],46:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},C,Compressed,CompressionParser,Packet,asymmetric,bzip_inflate,compressjs,fake_zip_inflate,fix_zip_deflate,iced,uint_to_buffer,zlib,__iced_k,__iced_k_noop;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},Packet=require('./base').Packet,C=require('../../const').openpgp,asymmetric=require('../../asymmetric'),zlib=require('zlib'),uint_to_buffer=require('../../util').uint_to_buffer,compressjs=require('keybase-compressjs'),fake_zip_inflate=function(buf,cb){var bufs,call_end,err,inflater,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),buf=Buffer.concat([new Buffer([120,156]),buf]),inflater=zlib.createInflate({flush:zlib.Z_FULL_FLUSH}),bufs=[],call_end=function(err){var ret,tmp;if((tmp=cb)!=null)return err!=null&&err.code==='Z_BUF_ERROR'&&(err=null),cb=null,ret=err==null?Buffer.concat(bufs):null,tmp(err,ret)},inflater.on('readable',function(){var read_buf;if(read_buf=inflater.read(),read_buf!=null)return bufs.push(read_buf)}),inflater.on('end',function(){return call_end(null)}),inflater.on('error',function(e){return call_end(e)}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/compressed.iced'}),inflater.write(buf,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:53})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){return typeof err==='undefined'||err===null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/compressed.iced'}),inflater.end(err),__iced_deferrals._fulfill()}(__iced_k):__iced_k()})(function(){if(typeof err!=='undefined'&&err!==null)return call_end(err)})}}(this))},fix_zip_deflate=function(buf,cb){var err,ret,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/compressed.iced'}),zlib.deflate(buf,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],ret=arguments[1]}}(),lineno:62})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err,ret)}}(this))},bzip_inflate=function(buf,cb){var e,err,ret;err=null;try{ret=compressjs.Bzip2.decompressFile(buf),ret!=null&&(ret=new Buffer(ret))}catch(_error){e=_error,err=e}return cb(err,ret)},Compressed=function(_super){function Compressed(_arg){this.algo=_arg.algo,this.compressed=_arg.compressed,this.inflated=_arg.inflated}return __extends(Compressed,_super),Compressed.parse=function(slice){return new CompressionParser(slice).parse()},Compressed.prototype.inflate=function(cb){var err,ret,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=ret=null,function(_this){return function(__iced_k){switch(_this.algo){case C.compression.none:return __iced_k(ret=_this.compressed);case C.compression.zlib:(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/compressed.iced',funcname:'Compressed.inflate'}),zlib.inflate(_this.compressed,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],ret=arguments[1]}}(),lineno:96})),__iced_deferrals._fulfill()})(__iced_k);break;case C.compression.zip:(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/compressed.iced',funcname:'Compressed.inflate'}),fake_zip_inflate(_this.compressed,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],ret=arguments[1]}}(),lineno:98})),__iced_deferrals._fulfill()})(__iced_k);break;case C.compression.bzip:(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/compressed.iced',funcname:'Compressed.inflate'}),bzip_inflate(_this.compressed,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],ret=arguments[1]}}(),lineno:100})),__iced_deferrals._fulfill()})(__iced_k);break;default:return __iced_k(err=new Error('no known inflation -- algo: '+_this.algo));}}}(this)(function(_this){return function(){return cb(err,ret)}}(this))},Compressed.prototype.deflate=function(cb){var err,ret,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=ret=null,function(_this){return function(__iced_k){switch(_this.algo){case C.compression.none:return __iced_k(ret=_this.inflated);case C.compression.zlib:(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/compressed.iced',funcname:'Compressed.deflate'}),zlib.deflate(_this.inflated,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],ret=arguments[1]}}(),lineno:112})),__iced_deferrals._fulfill()})(__iced_k);break;case C.compression.zip:(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/compressed.iced',funcname:'Compressed.deflate'}),fake_zip_deflate(_this.inflated,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],ret=arguments[1]}}(),lineno:114})),__iced_deferrals._fulfill()})(__iced_k);break;default:return __iced_k(err=new Error('no known deflation -- algo: '+_this.algo));}}}(this)(function(_this){return function(){return cb(err,ret)}}(this))},Compressed.prototype.write_unframed=function(cb){var bufs,err,ret,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=ret=null,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/compressed.iced',funcname:'Compressed.write_unframed'}),_this.deflate(__iced_deferrals.defer({assign_fn:function(__slot_1){return function(){return err=arguments[0],__slot_1.compressed=arguments[1]}}(_this),lineno:123})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return err==null&&(bufs=[uint_to_buffer(8,_this.algo),_this.compressed],ret=Buffer.concat(bufs)),cb(err,ret)}}(this))},Compressed.prototype.write=function(cb){var err,ret,unframed,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=ret=null,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/compressed.iced',funcname:'Compressed.write'}),_this.write_unframed(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],unframed=arguments[1]}}(),lineno:133})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return err==null&&(ret=_this.frame_packet(C.packet_tags.compressed,unframed)),cb(err,ret)}}(this))},Compressed}(Packet),CompressionParser=function(){function CompressionParser(slice){this.slice=slice}return CompressionParser.prototype.parse=function(){var algo,compressed;return algo=this.slice.read_uint8(),compressed=this.slice.consume_rest_to_buffer(),new Compressed({algo:algo,compressed:compressed})},CompressionParser}(),exports.Compressed=Compressed}).call(this)}).call(this,require('buffer').Buffer)},{'../../asymmetric':1,'../../const':5,'../../util':70,'./base':45,'buffer':80,'iced-runtime':118,'keybase-compressjs':120,'zlib':79}],47:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},Generic,Packet;Packet=require('./base').Packet,Generic=function(_super){function Generic(type,body){this.type=type,this.body=body}return __extends(Generic,_super),Generic}(Packet),exports.Generic=Generic}).call(this)},{'./base':45}],48:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},AES,C,DSA,ECDH,ECDSA,ElGamal,ElGamalSE,KeyMaterial,Packet,Parser,RSA,S,S2K,SHA1,SHA256,SecretKeyMaterial,Signature,bufeq_secure,bufferify,calc_checksum,decrypt,encode,encrypt,iced,katch,make_time_packet,native_rng,packetsigs,symmetric,triplesec,uint_to_buffer,unix_time,util,__iced_k,__iced_k_noop,_ref,_ref1,_ref2,_ref3;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},C=require('../../const').openpgp,triplesec=require('triplesec'),_ref=triplesec.hash,SHA1=_ref.SHA1,SHA256=_ref.SHA256,RSA=require('../../rsa').Pair,DSA=require('../../dsa').Pair,ElGamal=require('../../elgamal').Pair,ElGamalSE=require('../../elgamalse').Pair,ECDSA=require('../../ecc/ecdsa').Pair,ECDH=require('../../ecc/ecdh').Pair,AES=triplesec.ciphers.AES,native_rng=triplesec.prng.native_rng,calc_checksum=require('../util').calc_checksum,_ref1=require('../../util'),bufferify=_ref1.bufferify,unix_time=_ref1.unix_time,bufeq_secure=_ref1.bufeq_secure,katch=_ref1.katch,make_time_packet=_ref1.make_time_packet,uint_to_buffer=_ref1.uint_to_buffer,_ref2=require('../cfb'),decrypt=_ref2.decrypt,encrypt=_ref2.encrypt,Packet=require('./base').Packet,S=require('./signature'),Signature=S.Signature,encode=require('../armor').encode,_ref3=require('../s2k'),S2K=_ref3.S2K,SecretKeyMaterial=_ref3.SecretKeyMaterial,symmetric=require('../../symmetric'),util=require('util'),packetsigs=require('./packetsigs'),KeyMaterial=function(_super){function KeyMaterial(_arg){this.key=_arg.key,this.timestamp=_arg.timestamp,this.passphrase=_arg.passphrase,this.skm=_arg.skm,this.opts=_arg.opts,this.flags=_arg.flags,this.opts||(this.opts={}),this.flags||(this.flags=0),this._is_duplicate_primary=!1,KeyMaterial.__super__.constructor.call(this)}return __extends(KeyMaterial,_super),KeyMaterial.prototype._write_private_enc=function(bufs,priv,pp){var c,ct,iv,ivlen,k,ks,plaintext,salt,sha1hash;return bufs.push(new Buffer([C.s2k_convention.sha1,C.symmetric_key_algorithms.AES256,C.s2k.salt_iter,C.hash_algorithms.SHA256])),sha1hash=new SHA1().bufhash(priv),salt=native_rng(8),bufs.push(salt),c=96,bufs.push(new Buffer([c])),ks=AES.keySize,k=new S2K().write(pp,salt,c,ks),ivlen=AES.blockSize,iv=native_rng(ivlen),bufs.push(iv),plaintext=Buffer.concat([priv,sha1hash]),ct=encrypt({block_cipher_class:AES,key:k,plaintext:plaintext,iv:iv}),bufs.push(ct)},KeyMaterial.prototype._write_private_clear=function(bufs,priv){return bufs.push(new Buffer([C.s2k_convention.none]),priv,uint_to_buffer(16,calc_checksum(priv)))},KeyMaterial.prototype._write_public=function(bufs){var pub;return pub=this.key.serialize(),bufs.push(new Buffer([C.versions.keymaterial.V4]),uint_to_buffer(32,this.timestamp),new Buffer([this.key.type]),pub)},KeyMaterial.prototype._write_dummy=function(bufs){return bufs.push(new Buffer([C.s2k_convention.sha1,C.symmetric_key_algorithms.AES256,C.s2k.gnu,2]),new Buffer('GNU','utf8'),new Buffer([1]))},KeyMaterial.prototype.add_flags=function(v){return this.flags|=v},KeyMaterial.prototype.private_body=function(opts){var bufs,p,pp,priv,ret;return bufs=[],this._write_public(bufs),priv=(p=this.key.priv)==null?null:p.serialize(),pp=opts.passphrase||this.passphrase,priv==null?this._write_dummy(bufs):pp==null?this._write_private_clear(bufs,priv):this._write_private_enc(bufs,priv,pp),ret=Buffer.concat(bufs),ret},KeyMaterial.prototype.private_framed=function(opts){var T,body,tag;return body=this.private_body(opts),T=C.packet_tags,tag=opts.subkey?T.secret_subkey:T.secret_key,this.frame_packet(tag,body)},KeyMaterial.prototype.public_body=function(){var bufs;return bufs=[],this._write_public(bufs),Buffer.concat(bufs)},KeyMaterial.prototype.get_fingerprint=function(){var data;return data=this.public_body(),new SHA1().bufhash(Buffer.concat([new Buffer([C.signatures.key]),uint_to_buffer(16,data.length),data]))},KeyMaterial.prototype.get_key_id=function(){return this.get_fingerprint().slice(12,20)},KeyMaterial.prototype.get_short_key_id=function(){return this.get_key_id().slice(-4).toString('hex').toUpperCase()},KeyMaterial.prototype.get_klass=function(){return this.key.constructor},KeyMaterial.prototype.export_framed=function(opts){return opts==null&&(opts={}),opts['private']?this.private_framed(opts):this.public_framed(opts)},KeyMaterial.prototype.public_framed=function(opts){var T,body,tag;return opts==null&&(opts={}),body=this.public_body(),T=C.packet_tags,tag=opts.subkey?T.public_subkey:T.public_key,this.frame_packet(tag,body)},KeyMaterial.prototype.to_signature_payload=function(){var pk;return pk=this.public_body(),Buffer.concat([new Buffer([C.signatures.key]),uint_to_buffer(16,pk.length),pk])},KeyMaterial.prototype.self_sign_key=function(_arg,cb){var err,lifespan,primary,raw_payload,sig,sigs,userid,userids,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),userids=_arg.userids,lifespan=_arg.lifespan,raw_payload=_arg.raw_payload,err=null,sigs=[],primary=!0,function(_this){return function(__iced_k){var _i,_len,_ref4,_results,_while;_ref4=userids,_len=_ref4.length,_i=0,_results=[],_while=function(__iced_k){var _break,_continue,_next;return(_break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return++_i,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},!(_i<_len))?_break():(userid=_ref4[_i],err==null)?void(sig=null,function(__iced_k){return _this.key.can_sign()||raw_payload?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/keymaterial.iced',funcname:'KeyMaterial.self_sign_key'}),_this._self_sign_key({userid:userid,lifespan:lifespan,raw_payload:raw_payload,primary:primary},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],sig=arguments[1]}}(),lineno:193})),__iced_deferrals._fulfill()}(__iced_k):__iced_k((sig=userid.get_framed_signature_output())==null?err=new Error('Cannot sign key --- don\'t have a private key, and can\'t replay'):void 0)}(function(){return primary=!1,_next(sigs.push(sig))})):_continue()},_while(__iced_k)}}(this)(function(_this){return function(){return cb(err,sig)}}(this))},KeyMaterial.prototype._self_sign_key=function(_arg,cb){var err,hsp,lifespan,payload,primary,ps,raw_payload,sig,type,userid,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),userid=_arg.userid,lifespan=_arg.lifespan,raw_payload=_arg.raw_payload,primary=_arg.primary,payload=Buffer.concat([this.to_signature_payload(),userid.to_signature_payload()]),type=C.sig_types.positive,hsp=[new S.CreationTime(lifespan.generated),new S.KeyFlags([this.flags]),new S.PreferredSymmetricAlgorithms([C.symmetric_key_algorithms.AES256,C.symmetric_key_algorithms.AES128]),new S.PreferredHashAlgorithms([C.hash_algorithms.SHA512,C.hash_algorithms.SHA256]),new S.Features([C.features.modification_detection]),new S.KeyServerPreferences([C.key_server_preferences.no_modify])],primary&&hsp.push(new S.PrimaryUserId(1)),lifespan.expire_in&&hsp.push(new S.KeyExpirationTime(lifespan.expire_in)),sig=new Signature({type:type,key:this.key,hashed_subpackets:hsp,unhashed_subpackets:[new S.Issuer(this.get_key_id())]}),function(_this){return function(__iced_k){return raw_payload?__iced_k(sig=payload):void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/keymaterial.iced',funcname:'KeyMaterial._self_sign_key'}),sig.write(payload,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:235})),__iced_deferrals._fulfill()}(function(){return ps=new packetsigs.SelfSig({userid:userid,type:type,sig:sig,options:_this.flags}),userid.push_sig(ps),__iced_k(_this.push_sig(ps))})}}(this)(function(_this){return function(){return cb(err,sig)}}(this))},KeyMaterial.prototype.sign_subkey=function(_arg,cb){var err,lifespan,sig,subkey,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),subkey=_arg.subkey,lifespan=_arg.lifespan,err=sig=null,function(_this){return function(__iced_k){var _ref4,_ref5;return _this.key.can_sign()?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/keymaterial.iced',funcname:'KeyMaterial.sign_subkey'}),_this._sign_subkey({subkey:subkey,lifespan:lifespan},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:248})),__iced_deferrals._fulfill()}(__iced_k):__iced_k(((_ref4=subkey.get_subkey_binding())==null||(_ref5=_ref4.sig)==null?void 0:_ref5.get_framed_output())?void 0:err=new Error('Cannot sign with subkey --- don\'t have private key and can\'t replay'))}}(this)(function(_this){return function(){return cb(err)}}(this))},KeyMaterial.prototype._sign_subkey=function(_arg,cb){var SKB,err,lifespan,primary_binding,ps,sig,subkey,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),subkey=_arg.subkey,lifespan=_arg.lifespan,sig=err=primary_binding=null,function(_this){return function(__iced_k){return subkey.can_sign()?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/keymaterial.iced',funcname:'KeyMaterial._sign_subkey'}),subkey._sign_primary_with_subkey({primary:_this,lifespan:lifespan},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],primary_binding=arguments[1]}}(),lineno:260})),__iced_deferrals._fulfill()}(__iced_k):__iced_k()}}(this)(function(_this){return function(){(function(__iced_k){return err==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/keymaterial.iced',funcname:'KeyMaterial._sign_subkey'}),_this._sign_subkey_with_primary({subkey:subkey,lifespan:lifespan,primary_binding:primary_binding},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],sig=arguments[1]}}(),lineno:262})),__iced_deferrals._fulfill()}(__iced_k):__iced_k()})(function(){return err==null&&(SKB=packetsigs.SubkeyBinding,ps=new SKB({primary:_this,sig:sig,direction:SKB.DOWN}),subkey.push_sig(ps)),cb(err)})}}(this))},KeyMaterial.prototype._sign_primary_with_subkey=function(_arg,cb){var err,lifespan,payload,primary,sig,sig_unframed,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),primary=_arg.primary,lifespan=_arg.lifespan,payload=Buffer.concat([primary.to_signature_payload(),this.to_signature_payload()]),sig=new Signature({type:C.sig_types.primary_binding,key:this.key,hashed_subpackets:[new S.CreationTime(lifespan.generated)],unhashed_subpackets:[new S.Issuer(this.get_key_id())]}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/keymaterial.iced',funcname:'KeyMaterial._sign_primary_with_subkey'}),sig.write_unframed(payload,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],sig_unframed=arguments[1]}}(),lineno:286})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err,sig_unframed)}}(this))},KeyMaterial.prototype._sign_subkey_with_primary=function(_arg,cb){var err,lifespan,payload,primary_binding,sig,subkey,unhashed_subpackets,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),subkey=_arg.subkey,lifespan=_arg.lifespan,primary_binding=_arg.primary_binding,payload=Buffer.concat([this.to_signature_payload(),subkey.to_signature_payload()]),unhashed_subpackets=[new S.Issuer(this.get_key_id())],primary_binding!=null&&unhashed_subpackets.push(new S.EmbeddedSignature({rawsig:primary_binding})),sig=new Signature({type:C.sig_types.subkey_binding,key:this.key,hashed_subpackets:[new S.CreationTime(lifespan.generated),new S.KeyExpirationTime(lifespan.expire_in),new S.KeyFlags([subkey.flags])],unhashed_subpackets:unhashed_subpackets}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/keymaterial.iced',funcname:'KeyMaterial._sign_subkey_with_primary'}),sig.write(payload,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:310})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err,sig)}}(this))},KeyMaterial.prototype.merge_private=function(k2){return this.skm=k2.skm},KeyMaterial.parse_public_key=function(slice,opts){return new Parser(slice).parse_public_key(opts)},KeyMaterial.parse_private_key=function(slice,opts){return new Parser(slice).parse_private_key(opts)},KeyMaterial.prototype.is_key_material=function(){return!0},KeyMaterial.prototype.is_primary=function(){var _ref4;return(_ref4=this.opts)==null||!_ref4.subkey},KeyMaterial.prototype.is_duplicate_primary=function(){return this._is_duplicate_primary},KeyMaterial.prototype.set_duplicate_primary=function(){return this._is_duplicate_primary=!0},KeyMaterial.prototype.ekid=function(){return this.key.ekid()},KeyMaterial.prototype.can_sign=function(){return this.key.can_sign()},KeyMaterial.prototype.is_locked=function(){return!this.key.has_private()&&this.skm!=null&&this.skm.is_locked()},KeyMaterial.prototype.has_private=function(){return this.has_unlocked_private()||this.has_locked_private()},KeyMaterial.prototype.has_locked_private=function(){return this.skm&&this.skm.has_private()},KeyMaterial.prototype.has_unlocked_private=function(){return this.key.has_private()},KeyMaterial.prototype.has_secret_key_material=function(){return this.skm!=null},KeyMaterial.prototype.validity_check=function(cb){var err,msg,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/keymaterial.iced',funcname:'KeyMaterial.validity_check'}),_this.key.validity_check(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:344})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return typeof err!=='undefined'&&err!==null&&(msg='In key '+_this.get_fingerprint().toString('hex')+': '+err.message,err=new Error(err)),cb(err)}}(this))},KeyMaterial.prototype.is_signed_subkey_of=function(primary){return!this.primary_flag&&this.get_psc().is_signed_subkey_of(primary)},KeyMaterial.prototype.get_subkey_binding=function(){return this.opts.subkey?this.get_psc().get_subkey_binding():null},KeyMaterial.prototype.get_subkey_binding_signature_output=function(){var _ref4,_ref5;return(_ref4=this.get_subkey_binding())==null||(_ref5=_ref4.sig)==null?void 0:_ref5.get_framed_output()},KeyMaterial.prototype.equal=function(k2){return bufeq_secure(this.ekid(),k2.ekid())},KeyMaterial.prototype.unlock=function(_arg,cb){var c1,c2,end,err,h1,h2,key,passphrase,pt;if(passphrase=_arg.passphrase,passphrase!=null&&(passphrase=bufferify(passphrase)),err=null,this.skm==null)return err=new Error('Cannot unlock secret key -- no material!'),cb(err);if(pt=this.skm.s2k_convention===C.s2k_convention.none?this.skm.payload:this.skm.s2k.type===C.s2k.gnu_dummy?null:passphrase==null?(err=new Error('Key was locked, but no passphrase given'),null):(key=this.skm.s2k.produce_key(passphrase,this.skm.cipher.key_size),decrypt({ciphertext:this.skm.payload,block_cipher_class:this.skm.cipher.klass,iv:this.skm.iv,key:key})),pt){switch(this.skm.s2k_convention){case C.s2k_convention.sha1:end=pt.length-SHA1.output_size,h1=pt.slice(end),pt=pt.slice(0,end),h2=new SHA1().bufhash(pt),!bufeq_secure(h1,h2)&&(err=new Error('bad private key passphrase (hash mismatch)'));break;case C.s2k_convention.checksum:case C.s2k_convention.none:end=pt.length-2,c1=pt.readUInt16BE(end),pt=pt.slice(0,end),c2=calc_checksum(pt),c1!==c2&&(err=new Error('bad private key passphrase (checksum mismatch)'));}err==null&&(err=this.key.read_priv(pt))}return cb(err)},KeyMaterial.prototype.get_all_key_flags=function(){return this._psc.get_all_key_flags()},KeyMaterial.prototype.add_flags=function(v){return this.flags|=v},KeyMaterial.prototype.fulfills_flags=function(flags){var akf,ret;return!this.is_revoked()&&(akf=this.get_all_key_flags(),ret=(akf&flags)===flags||this.key.fulfills_flags(flags)||this.is_primary()&&akf===0&&(this.key.good_for_flags()&flags)===flags,ret)},KeyMaterial.prototype.get_signed_userids=function(){return this.get_psc().get_signed_userids()},KeyMaterial.prototype.get_signed_user_attributes=function(){return this.get_psc().get_signed_user_attributes()},KeyMaterial.prototype.is_self_signed=function(){return this.get_psc().is_self_signed()},KeyMaterial.prototype.push_sig=function(packetsig){return this.add_flags(packetsig.sig.get_key_flags()),KeyMaterial.__super__.push_sig.call(this,packetsig)},KeyMaterial.prototype.mark_revoked=function(sig){return this.revocation=sig},KeyMaterial.prototype.is_revoked=function(){return this.revocation!=null},KeyMaterial}(Packet),Parser=function(){function Parser(slice){this.slice=slice,this.key=null}return Parser.prototype.parse_public_key_v3=function(){return this.timestamp=this.slice.read_uint32(),this.expiration=this.slice.read_uint16(),this.parse_public_key_mpis()},Parser.prototype.parse_public_key_v4=function(){return this.timestamp=this.slice.read_uint32(),this.parse_public_key_mpis()},Parser.prototype.parse_public_key_mpis=function(){var A,err,key,klass,len,_ref4;if(this.algorithm=this.slice.read_uint8(),A=C.public_key_algorithms,klass=function(){switch(this.algorithm){case A.RSA:case A.RSA_ENCRYPT_ONLY:case A.RSA_SIGN_ONLY:return RSA;case A.DSA:return DSA;case A.ELGAMAL:return ElGamal;case A.ELGAMAL_SIGN_AND_ENCRYPT:return ElGamalSE;case A.ECDSA:return ECDSA;case A.ECDH:return ECDH;default:throw new Error('Unknown key type: '+this.algorithm);}}.call(this),_ref4=klass.parse(this.slice.peek_rest_to_buffer()),err=_ref4[0],key=_ref4[1],len=_ref4[2],err!=null)throw err;return this.slice.advance(len),key},Parser.prototype._parse_public_key=function(){var version;switch(version=this.slice.read_uint8()){case C.versions.keymaterial.V3:return this.parse_public_key_v3();case C.versions.keymaterial.V4:return this.parse_public_key_v4();default:throw new Error('Unknown public key version: '+version);}},Parser.prototype.parse_public_key=function(opts){var key;return key=this._parse_public_key(),new KeyMaterial({key:key,timestamp:this.timestamp,opts:opts})},Parser.prototype.parse_private_key=function(opts){var encrypted_private_key,iv_len,key,skm,sym_enc_alg,_ref4;return skm=new SecretKeyMaterial,key=this._parse_public_key(),encrypted_private_key=!0,sym_enc_alg=null,(skm.s2k_convention=this.slice.read_uint8())===C.s2k_convention.none?encrypted_private_key=!1:(_ref4=skm.s2k_convention)===C.s2k_convention.sha1||_ref4===C.s2k_convention.checksum?(sym_enc_alg=this.slice.read_uint8(),skm.s2k=new S2K().read(this.slice)):sym_enc_alg=skm.s2k_convention,skm.s2k_convention!==C.s2k_convention.none&&skm.s2k.type===C.s2k.gnu_dummy?skm.payload=null:(sym_enc_alg&&(skm.cipher=symmetric.get_cipher(sym_enc_alg),iv_len=skm.cipher.klass.blockSize,skm.iv=this.slice.read_buffer(iv_len)),skm.payload=this.slice.consume_rest_to_buffer()),new KeyMaterial({key:key,skm:skm,timestamp:this.timestamp,opts:opts})},Parser}(),exports.KeyMaterial=KeyMaterial}).call(this)}).call(this,require('buffer').Buffer)},{'../../const':5,'../../dsa':6,'../../ecc/ecdh':9,'../../ecc/ecdsa':10,'../../elgamal':12,'../../elgamalse':13,'../../rsa':67,'../../symmetric':68,'../../util':70,'../armor':33,'../cfb':38,'../s2k':58,'../util':60,'./base':45,'./packetsigs':51,'./signature':53,'buffer':80,'iced-runtime':118,'triplesec':181,'util':114}],49:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1},C,Literal,LiteralParser,Packet,asymmetric,iced,uint_to_buffer,__iced_k,__iced_k_noop;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},Packet=require('./base').Packet,C=require('../../const').openpgp,asymmetric=require('../../asymmetric'),uint_to_buffer=require('../../util').uint_to_buffer,Literal=function(_super){function Literal(_arg){this.format=_arg.format,this.filename=_arg.filename,this.date=_arg.date,this.data=_arg.data,Literal.__super__.constructor.call(this)}return __extends(Literal,_super),Literal.parse=function(slice){return new LiteralParser(slice).parse()},Literal.prototype.toString=function(encoding){return encoding==null&&(encoding=null),this.data.toString(encoding||this.buffer_format())},Literal.prototype.toBuffer=function(){return this.data},Literal.prototype.buffer_format=function(){switch(this.format){case C.literal_formats.text:return'ascii';case C.literal_formats.utf8:return'utf8';default:return'binary';}},Literal.prototype.to_signature_payload=function(){return Buffer.concat([this.data])},Literal.prototype.write_unframed=function(cb){var bufs,ret;return this.filename||(this.filename=new Buffer([])),bufs=[new Buffer([this.format]),uint_to_buffer(8,this.filename.length),this.filename,uint_to_buffer(32,this.date),this.data],ret=Buffer.concat(bufs),cb(null,ret)},Literal.prototype.write=function(cb){var err,raw,ret,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=ret=null,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/packet/literal.iced',funcname:'Literal.write'}),_this.write_unframed(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],raw=arguments[1]}}(),lineno:41})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return err==null&&(ret=_this.frame_packet(C.packet_tags.literal,raw)),cb(err,ret)}}(this))},Literal.prototype.to_literal=function(){return this},Literal}(Packet),LiteralParser=function(){function LiteralParser(slice){this.slice=slice}return LiteralParser.prototype.parse=function(){var data,date,filename,format,k,known_formats,v;if(known_formats=function(){var _ref,_results;for(k in _ref=C.literal_formats,_results=[],_ref)v=_ref[k],_results.push(v);return _results}(),format=this.slice.read_uint8(),__indexOf.call(known_formats,format)<0)throw new Error('unknwon format: '+format);return filename=this.slice.read_string(),date=this.slice.read_uint32(),data=this.slice.consume_rest_to_buffer(),new Literal({format:format,filename:filename,date:date,data:data})},LiteralParser}(),exports.Literal=Literal}).call(this)}).call(this,require('buffer').Buffer)},{'../../asymmetric':1,'../../const':5,'../../util':70,'./base':45,'buffer':80,'iced-runtime':118}],50:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},C,OPS_Parser,OnePassSignature,Packet,asymmetric,hash,iced,uint_to_buffer,__iced_k,__iced_k_noop;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},Packet=require('./base').Packet,C=require('../../const').openpgp,asymmetric=require('../../asymmetric'),hash=require('../../hash'),uint_to_buffer=require('../../util').uint_to_buffer,OnePassSignature=function(_super){function OnePassSignature(_arg){this.sig_type=_arg.sig_type,this.hasher=_arg.hasher,this.sig_klass=_arg.sig_klass,this.key_id=_arg.key_id,this.is_final=_arg.is_final}return __extends(OnePassSignature,_super),OnePassSignature.parse=function(slice){return new OPS_Parser(slice).parse()},OnePassSignature.prototype.write_unframed=function(cb){var bufs,unframed,vals,x;return vals=[C.versions.one_pass_sig,this.sig_type,this.hasher.type,this.sig_klass.type],bufs=function(){var _i,_len,_results;for(_results=[],_i=0,_len=vals.length;_i<_len;_i++)x=vals[_i],_results.push(uint_to_buffer(8,x));return _results}(),custom_keyid&&this.key_id.set(custom_keyid,0),bufs.push(this.key_id),bufs.push(uint_to_buffer(8,this.is_final)),void 0,unframed=Buffer.concat(bufs),cb(null,unframed)},OnePassSignature.prototype.write=function(cb){var err,framed,unframed,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/packet/one_pass_sig.iced',funcname:'OnePassSignature.write'}),_this.write_unframed(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],unframed=arguments[1]}}(),lineno:38})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return framed=_this.frame_packet(C.packet_tags.one_pass_sig,unframed),cb(err,framed)}}(this))},OnePassSignature}(Packet),OPS_Parser=function(){function OPS_Parser(slice){this.slice=slice}return OPS_Parser.prototype.parse=function(){var hasher,is_final,key_id,sig_klass,sig_type,v;if((v=this.slice.read_uint8())!==C.versions.one_pass_sig)throw new Error('Unknown OnePassSignature version '+v);return sig_type=this.slice.read_uint8(),hasher=hash.alloc_or_throw(this.slice.read_uint8()),sig_klass=asymmetric.get_class(this.slice.read_uint8()),key_id=this.slice.read_buffer(8),is_final=this.slice.read_uint8(),new OnePassSignature({sig_type:sig_type,hasher:hasher,sig_klass:sig_klass,key_id:key_id,is_final:is_final})},OPS_Parser}(),exports.OnePassSignature=OnePassSignature}).call(this)}).call(this,require('buffer').Buffer)},{'../../asymmetric':1,'../../const':5,'../../hash':14,'../../util':70,'./base':45,'buffer':80,'iced-runtime':118}],51:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},Base,Collection,Data,SelfSig,SubkeyBinding;Base=function(){function Base(_arg){this.sig=_arg.sig}return Base.prototype.typ=function(){return'none'},Base.prototype.get_key_flags=function(){return this.sig.get_key_flags()},Base}(),SelfSig=function(_super){function SelfSig(_arg){var sig;this.userid=_arg.userid,this.user_attribute=_arg.user_attribute,this.type=_arg.type,sig=_arg.sig,this.options=_arg.options,SelfSig.__super__.constructor.call(this,{sig:sig})}return __extends(SelfSig,_super),SelfSig.prototype.typ=function(){return'self_sig'},SelfSig}(Base),SubkeyBinding=function(_super){function SubkeyBinding(_arg){var sig;this.primary=_arg.primary,sig=_arg.sig,this.direction=_arg.direction,SubkeyBinding.__super__.constructor.call(this,{sig:sig})}return __extends(SubkeyBinding,_super),SubkeyBinding.UP=1,SubkeyBinding.DOWN=2,SubkeyBinding.prototype.typ=function(){return'subkey_binding'},SubkeyBinding.prototype.is_down=function(){return this.direction===SubkeyBinding.DOWN},SubkeyBinding}(Base),Data=function(_super){function Data(_arg){var sig;this.key=_arg.key,sig=_arg.sig,Data.__super__.constructor.call(this,{sig:sig})}return __extends(Data,_super),Data.prototype.typ=function(){return'data'},Data.prototype.get_key_manager=function(){var _ref;return(_ref=this.sig)==null?void 0:_ref.key_manager},Data}(Base),Collection=function(){function Collection(){this.all=[],this.lookup={self_sig:[],subkey_binding:[],data:[]}}return Collection.prototype.push=function(ps){return this.all.push(ps),this.lookup[ps.typ()].push(ps)},Collection.prototype.is_signed_subkey_of=function(primary){var skb,_i,_len,_ref;for(_ref=this.lookup.subkey_binding,_i=0,_len=_ref.length;_i<_len;_i++)if(skb=_ref[_i],skb.primary.equal(primary)&&skb.is_down())return!0;return!1},Collection.prototype.get_all_key_flags=function(){var p,ret,_i,_len,_ref;for(ret=0,_ref=this.all,(_i=0,_len=_ref.length);_i<_len;_i++)p=_ref[_i],ret|=p.get_key_flags();return ret},Collection.prototype.get_signed_userids=function(){var p,u,_i,_len,_ref,_results;for(_ref=this.lookup.self_sig,_results=[],(_i=0,_len=_ref.length);_i<_len;_i++)p=_ref[_i],(u=p.userid)!=null&&_results.push(u);return _results},Collection.prototype.get_signed_user_attributes=function(){var p,u,_i,_len,_ref,_results;for(_ref=this.lookup.self_sig,_results=[],(_i=0,_len=_ref.length);_i<_len;_i++)p=_ref[_i],(u=p.user_attribute)!=null&&_results.push(u);return _results},Collection.prototype.get_self_sig=function(){return this.lookup.self_sig.length?this.lookup.self_sig[0]:null},Collection.prototype.get_self_sigs=function(){return this.lookup.self_sig},Collection.prototype.is_self_signed=function(){return this.get_signed_userids().length>0},Collection.prototype.get_data_signer=function(){return this.lookup.data.length>0?this.lookup.data[0]:null},Collection.prototype.get_data_signers=function(){return this.lookup.data},Collection.prototype.get_subkey_binding=function(){return this.lookup.subkey_binding.length?this.lookup.subkey_binding[0]:null},Collection}(),exports.SelfSig=SelfSig,exports.SubkeyBinding=SubkeyBinding,exports.Data=Data,exports.Collection=Collection}).call(this)},{}],52:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},ASP,C,Decryptor,MDC,MDC_Parser,PKESK,PKESK_Parser,Packet,SEIPD,SEIPD_Parser,SHA1,asymmetric,bufeq_fast,bufeq_secure,encrypt,iced,make_esc,streamers,uint_to_buffer,__iced_k,__iced_k_noop,_ref,_ref1,_ref2;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},Packet=require('./base').Packet,C=require('../../const').openpgp,asymmetric=require('../../asymmetric'),_ref=require('../../hash'),SHA1=_ref.SHA1,streamers=_ref.streamers,_ref1=require('../../util'),uint_to_buffer=_ref1.uint_to_buffer,bufeq_secure=_ref1.bufeq_secure,bufeq_fast=_ref1.bufeq_fast,_ref2=require('../ocfb'),encrypt=_ref2.encrypt,Decryptor=_ref2.Decryptor,ASP=require('pgp-utils').util.ASP,make_esc=require('iced-error').make_esc,PKESK=function(_super){function PKESK(_arg){this.crypto_type=_arg.crypto_type,this.key_id=_arg.key_id,this.ekey=_arg.ekey}return __extends(PKESK,_super),PKESK.parse=function(slice){return new PKESK_Parser(slice).parse()},PKESK.prototype.to_esk_packet=function(){return this},PKESK.prototype.get_key_id=function(){return this.key_id},PKESK.prototype.write_unframed=function(cb){var bufs,err,ret;return bufs=[uint_to_buffer(8,C.versions.PKESK),this.key_id,uint_to_buffer(8,this.crypto_type),this.ekey.output()],ret=Buffer.concat(bufs),err=null,cb(err,ret)},PKESK.prototype.write=function(cb){var err,ret,unframed,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),ret=null,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/packet/sess.iced',funcname:'PKESK.write'}),_this.write_unframed(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],unframed=arguments[1]}}(),lineno:36})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return(typeof err==='undefined'||err===null)&&(ret=_this.frame_packet(C.packet_tags.PKESK,unframed)),cb(err,ret)}}(this))},PKESK}(Packet),SEIPD=function(_super){function SEIPD(_arg){this.ciphertext=_arg.ciphertext}return __extends(SEIPD,_super),SEIPD.parse=function(slice){return new SEIPD_Parser(slice).parse()},SEIPD.prototype.to_enc_data_packet=function(){return this},SEIPD.prototype.check=function(){},SEIPD.prototype.decrypt=function(_arg,cb){var asp,cipher,eng,err,esc,mdc,plaintext,prefix,pt,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),cipher=_arg.cipher,asp=_arg.asp,eng=new Decryptor({cipher:cipher,ciphertext:this.ciphertext,asp:asp}),esc=make_esc(cb,'SEIPD::decrypt'),asp=ASP.make(asp),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/packet/sess.iced',funcname:'SEIPD.decrypt'}),eng.check(esc(__iced_deferrals.defer({lineno:63}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/packet/sess.iced',funcname:'SEIPD.decrypt'}),eng.dec(esc(__iced_deferrals.defer({assign_fn:function(){return function(){return pt=arguments[0]}}(),lineno:64}))),__iced_deferrals._fulfill()})(function(){var _ref3;_ref3=MDC.parse(pt),mdc=_ref3[0],plaintext=_ref3[1],prefix=eng.get_prefix(),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/packet/sess.iced',funcname:'SEIPD.decrypt'}),mdc.compute({prefix:prefix,plaintext:plaintext,asp:asp},esc(__iced_deferrals.defer({lineno:70}))),__iced_deferrals._fulfill()}(function(){return err=mdc.check()?null:new Error('MDC mismatch'),cb(err,plaintext)})})}}(this))},SEIPD.prototype.encrypt=function(_arg,cb){var asp,cipher,esc,mdc,mdc_buf,plaintext,prefixrandom,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),cipher=_arg.cipher,plaintext=_arg.plaintext,prefixrandom=_arg.prefixrandom,asp=_arg.asp,mdc=new MDC({}),esc=make_esc(cb,'SEIPD::encrypt'),asp=ASP.make(asp),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/packet/sess.iced',funcname:'SEIPD.encrypt'}),mdc.compute({plaintext:plaintext,prefix:prefixrandom,asp:asp},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return mdc_buf=arguments[0]}}(),lineno:81}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){plaintext=Buffer.concat([plaintext,MDC.header,mdc_buf]),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/packet/sess.iced',funcname:'SEIPD.encrypt'}),encrypt({cipher:cipher,plaintext:plaintext,prefixrandom:prefixrandom},esc(__iced_deferrals.defer({assign_fn:function(__slot_1){return function(){return __slot_1.ciphertext=arguments[0]}}(_this),lineno:83}))),__iced_deferrals._fulfill()}(function(){return cb(null)})}}(this))},SEIPD.prototype.write_unframed=function(cb){var err,ret;return err=ret=null,ret=Buffer.concat([uint_to_buffer(8,C.versions.SEIPD),this.ciphertext]),cb(err,ret)},SEIPD.prototype.write=function(cb){var err,ret,unframed,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),ret=err=null,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/packet/sess.iced',funcname:'SEIPD.write'}),_this.write_unframed(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],unframed=arguments[1]}}(),lineno:97})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return err==null&&(ret=_this.frame_packet(C.packet_tags.SEIPD,unframed)),cb(err,ret)}}(this))},SEIPD}(Packet),MDC=function(_super){function MDC(_arg){this.digest=_arg.digest}return __extends(MDC,_super),MDC.header=new Buffer([192|C.packet_tags.MDC,SHA1.output_length]),MDC.prototype.header=MDC.header,MDC.parse=function(buf){return new MDC_Parser(buf).parse()},MDC.prototype.compute=function(_arg,cb){var asp,esc,hasher,i,plaintext,prefix,step,___iced_passed_deferral,__iced_deferrals,__iced_k,_begin,_end,_positive;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),plaintext=_arg.plaintext,prefix=_arg.prefix,asp=_arg.asp,asp=ASP.make(asp),hasher=streamers.SHA1(),hasher.update(Buffer.concat([prefix,prefix.slice(-2)])),esc=make_esc(cb,'MDC::compute'),step=1048576,function(_this){return function(__iced_k){var _i,_results,_while;i=0,_begin=0,_end=plaintext.length,_positive=_end>_begin,_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _positive?i+=step:i-=step,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},_positive===!0&&i>=plaintext.length||_positive===!1&&i<=plaintext.length?_break():void(hasher.update(plaintext.slice(i,i+step)),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/packet/sess.iced',funcname:'MDC.compute'}),asp.progress({what:'MDC',total:plaintext.length,i:i},esc(__iced_deferrals.defer({lineno:122}))),__iced_deferrals._fulfill()}(_next))},_while(__iced_k)}}(this)(function(_this){return function(){return hasher.update(_this.header),_this.computed=hasher(),cb(null,_this.computed)}}(this))},MDC.prototype.check=function(){return bufeq_secure(this.digest,this.computed)},MDC}(Packet),MDC_Parser=function(){function MDC_Parser(buf){this.buf=buf}return MDC_Parser.prototype.parse=function(){var chunk,digest,hl,len,rem;if(hl=MDC.header.length,len=SHA1.output_length+hl,rem=this.buf.slice(0,-len),chunk=this.buf.slice(-len),!bufeq_fast(chunk.slice(0,hl),MDC.header))throw new Error('Missing MDC header');return digest=chunk.slice(hl),[new MDC({digest:digest}),rem]},MDC_Parser}(),SEIPD_Parser=function(){function SEIPD_Parser(slice){this.slice=slice}return SEIPD_Parser.prototype.payload_split=function(raw){},SEIPD_Parser.prototype.parse=function(){var ciphertext,v;if((v=this.slice.read_uint8())!==C.versions.SEIPD)throw new Error('Unknown SEIPD version '+v);return ciphertext=this.slice.consume_rest_to_buffer(),new SEIPD({ciphertext:ciphertext})},SEIPD_Parser}(),PKESK_Parser=function(){function PKESK_Parser(slice){this.slice=slice}return PKESK_Parser.prototype.parse=function(){var crypto_type,ekey,key_id,klass,v;if((v=this.slice.read_uint8())!==C.versions.PKESK)throw new Error('Unknown PKESK version: '+v);return key_id=this.slice.read_buffer(8),crypto_type=this.slice.read_uint8(),klass=asymmetric.get_class(crypto_type),ekey=klass.parse_output(this.slice.consume_rest_to_buffer()),new PKESK({crypto_type:crypto_type,key_id:key_id,ekey:ekey})},PKESK_Parser}(),exports.SEIPD=SEIPD,exports.PKESK=PKESK,exports.MDC=MDC}).call(this)}).call(this,require('buffer').Buffer)},{'../../asymmetric':1,'../../const':5,'../../hash':14,'../../util':70,'../ocfb':43,'./base':45,'buffer':80,'iced-error':115,'iced-runtime':118,'pgp-utils':163}],53:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},C,CreationTime,EmbeddedSignature,Experimental,ExpirationTime,Exportable,Features,Issuer,KeyExpirationTime,KeyFlags,KeyServerPreferences,NotationData,Packet,Parser,PolicyURI,Preference,PreferredCompressionAlgorithms,PreferredHashAlgorithms,PreferredKeyServer,PreferredSymmetricAlgorithms,PrimaryUserId,ReasonForRevocation,RegularExpression,Revocable,RevocationKey,S,SHA1,SHA512,Signature,SignatureTarget,Signature_v2,Signature_v2_or_v3,Signature_v3,SignersUserID,SlicerBuffer,SubPacket,Time,Trust,alloc_or_throw,assert,asymmetric,encode_length,iced,make_esc,make_time_packet,packetsigs,uint_to_buffer,unix_time,util,__iced_k,__iced_k_noop,_ref,_ref1,_ref2;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},Packet=require('./base').Packet,C=require('../../const').openpgp,S=C.sig_subpacket,_ref=require('../util'),encode_length=_ref.encode_length,make_time_packet=_ref.make_time_packet,_ref1=require('../../util'),unix_time=_ref1.unix_time,uint_to_buffer=_ref1.uint_to_buffer,_ref2=require('../../hash'),alloc_or_throw=_ref2.alloc_or_throw,SHA512=_ref2.SHA512,SHA1=_ref2.SHA1,asymmetric=require('../../asymmetric'),util=require('util'),packetsigs=require('./packetsigs'),assert=require('assert'),SlicerBuffer=require('../buffer').SlicerBuffer,make_esc=require('iced-error').make_esc,Signature_v2_or_v3=function(_super){function Signature_v2_or_v3(_arg){this.key=_arg.key,this.hasher=_arg.hasher,this.key_id=_arg.key_id,this.sig_data=_arg.sig_data,this.public_key_class=_arg.public_key_class,this.signed_hash_value_hash=_arg.signed_hash_value_hash,this.time=_arg.time,this.sig=_arg.sig,this.type=_arg.type,this.version=_arg.version,this.hasher==null&&(this.hasher=SHA512),this._framed_output=null}return __extends(Signature_v2_or_v3,_super),Signature_v2_or_v3.prototype.is_signature=function(){return!0},Signature_v2_or_v3.prototype.get_key_id=function(){return this.key_id},Signature_v2_or_v3.prototype.get_issuer_key_id=function(){return this.key_id},Signature_v2_or_v3.prototype.when_generated=function(){return this.time},Signature_v2_or_v3.prototype.time_of_primary_uid_sig=function(){return null},Signature_v2_or_v3.prototype.gen_prefix=function(){return Buffer.concat([new Buffer([C.versions.signature.V3,this.type],uint_to_buffer(32,this.time),this.key_id,new Buffer([this.key.type,this.hasher.type]))])},Signature_v2_or_v3.prototype.prepare_payload=function(data_packets){var bufs,dp;return bufs=function(){var _i,_len,_results;for(_results=[],_i=0,_len=data_packets.length;_i<_len;_i++)dp=data_packets[_i],_results.push(dp.to_signature_payload());return _results}(),bufs.push(new Buffer([this.type]),uint_to_buffer(32,this.time)),Buffer.concat(bufs)},Signature_v2_or_v3.prototype.verify=function(data_packets,cb){var T,b,d,err,hash,payload,s,v,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),payload=this.prepare_payload(data_packets),hash=this.hasher(payload),s=new SlicerBuffer(hash),v=s.read_uint16(),T=C.sig_types,function(_this){return function(__iced_k){return v===(b=_this.signed_hash_value_hash)?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/signature.iced',funcname:'Signature_v2_or_v3.verify'}),_this.key.verify_unpad_and_check_hash({hash:hash,hasher:_this.hasher,sig:_this.sig},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:76})),__iced_deferrals._fulfill()}(function(){var _i,_len,_ref3;if(err==null&&((_ref3=_this.type)===T.binary_doc||_ref3===T.canonical_text))for(_i=0,_len=data_packets.length;_i<_len;_i++)d=data_packets[_i],d.push_sig(new packetsigs.Data({sig:_this}));return __iced_k()}):__iced_k(err=new Error('quick hash check failed: '+v+' != '+b))}}(this)(function(_this){return function(){return cb(err)}}(this))},Signature_v2_or_v3}(Packet),Signature_v2=function(_super){function Signature_v2(){return Signature_v2.__super__.constructor.apply(this,arguments)}return __extends(Signature_v2,_super),Signature_v2}(Signature_v2_or_v3),Signature_v3=function(_super){function Signature_v3(){return Signature_v3.__super__.constructor.apply(this,arguments)}return __extends(Signature_v3,_super),Signature_v3}(Signature_v2_or_v3),Signature=function(_super){function Signature(_arg){this.key=_arg.key,this.hasher=_arg.hasher,this.key_id=_arg.key_id,this.sig_data=_arg.sig_data,this.public_key_class=_arg.public_key_class,this.signed_hash_value_hash=_arg.signed_hash_value_hash,this.hashed_subpackets=_arg.hashed_subpackets,this.time=_arg.time,this.sig=_arg.sig,this.type=_arg.type,this.unhashed_subpackets=_arg.unhashed_subpackets,this.version=_arg.version,this.hasher==null&&(this.hasher=SHA512),this.hashed_subpackets==null&&(this.hashed_subpackets=[]),this.unhashed_subpackets==null&&(this.unhashed_subpackets=[]),this.subpacket_index=this._make_subpacket_index(),this._framed_output=null}return __extends(Signature,_super),Signature.prototype.get_key_id=function(){var _ref3;return this.key_id?this.key_id:(_ref3=this.subpacket_index.all[S.issuer])==null?void 0:_ref3.id},Signature.prototype._make_subpacket_index=function(){var p,ret,_i,_j,_len,_len1,_ref3,_ref4;for(ret={hashed:{},unhashed:{},all:{}},_ref3=this.hashed_subpackets,(_i=0,_len=_ref3.length);_i<_len;_i++)p=_ref3[_i],ret.hashed[p.type]=p,ret.all[p.type]=p;for(_ref4=this.unhashed_subpackets,_j=0,_len1=_ref4.length;_j<_len1;_j++)p=_ref4[_j],ret.unhashed[p.type]=p,ret.all[p.type]=p;return ret},Signature.prototype.prepare_payload=function(data){var flatsp,hvalue,payload,prefix,s,trailer;return flatsp=Buffer.concat(function(){var _i,_len,_ref3,_results;for(_ref3=this.hashed_subpackets,_results=[],(_i=0,_len=_ref3.length);_i<_len;_i++)s=_ref3[_i],_results.push(s.to_buffer());return _results}.call(this)),prefix=Buffer.concat([new Buffer([C.versions.signature.V4,this.type,this.key.type,this.hasher.type]),uint_to_buffer(16,flatsp.length),flatsp]),trailer=Buffer.concat([new Buffer([C.versions.signature.V4,255]),uint_to_buffer(32,prefix.length)]),payload=Buffer.concat([data,prefix,trailer]),hvalue=this.hasher(payload),{prefix:prefix,payload:payload,hvalue:hvalue}},Signature.prototype.write_unframed=function(data,cb){var esc,hvalue,payload,prefix,result2,results,s,sig,uhsp,___iced_passed_deferral,__iced_deferrals,__iced_k,_ref3;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'write_unframed'),uhsp=Buffer.concat(function(){var _i,_len,_ref3,_results;for(_ref3=this.unhashed_subpackets,_results=[],(_i=0,_len=_ref3.length);_i<_len;_i++)s=_ref3[_i],_results.push(s.to_buffer());return _results}.call(this)),_ref3=this.prepare_payload(data),prefix=_ref3.prefix,payload=_ref3.payload,hvalue=_ref3.hvalue,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/signature.iced',funcname:'Signature.write_unframed'}),_this.key.pad_and_sign(payload,{hasher:_this.hasher},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return sig=arguments[0]}}(),lineno:154}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return void 0,custom_keyid&&(uhsp.set(custom_keyid,2),void 0),result2=Buffer.concat([uint_to_buffer(16,uhsp.length),uhsp,new Buffer([hvalue.readUInt8(0),hvalue.readUInt8(1)]),sig]),results=Buffer.concat([prefix,result2]),void 0,cb(null,results)}}(this))},Signature.prototype.write=function(data,cb){var err,ret,unframed,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/signature.iced',funcname:'Signature.write'}),_this.write_unframed(data,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],unframed=arguments[1]}}(),lineno:167})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return(typeof err==='undefined'||err===null)&&(_this._framed_output=ret=_this.frame_packet(C.packet_tags.signature,unframed)),cb(err,ret)}}(this))},Signature.prototype.get_framed_output=function(){return this._framed_output||this.replay()},Signature.parse=function(slice){return new Parser(slice).parse()},Signature.prototype.extract_key=function(data_packets){var p,_i,_len,_results;for(_results=[],_i=0,_len=data_packets.length;_i<_len;_i++)if(p=data_packets[_i],p.key!=null){this.key=p.key;break}else _results.push(void 0);return _results},Signature.prototype.verify=function(data_packets,cb,opts){var err,p,s,subkey,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/signature.iced',funcname:'Signature.verify'}),_this._verify(data_packets,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:196}),opts),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){var _i,_len,_ref3,_results,_while;_ref3=_this.unhashed_subpackets,_len=_ref3.length,_i=0,_results=[],_while=function(__iced_k){var _break,_continue,_next;return(_break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return++_i,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},!(_i<_len))?_break():(p=_ref3[_i],(typeof err==='undefined'||err===null)&&(s=p.to_sig())!=null)?void function(__iced_k){return s.type===C.sig_types.primary_binding?void function(__iced_k){return data_packets.length===1?void(subkey=data_packets[0],s.primary=_this.primary,s.key=subkey.key,function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/signature.iced',funcname:'Signature.verify'}),s._verify([subkey],__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:206}),opts),__iced_deferrals._fulfill()}(__iced_k)):__iced_k(err=new Error('Needed 1 data packet for a primary_binding signature'))}(__iced_k):__iced_k(err=new Error('unknown subpacket signature type: '+s.type))}(_next):_continue()},_while(__iced_k)})(function(){return cb(err)})}}(this))},Signature.prototype._verify=function(data_packets,cb,opts){var SKB,T,buffers,d,data,dp,err,hvalue,n,packets,payload,ps,sig,subkey,user_attribute,userid,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=null,T=C.sig_types,subkey=null,this.data_packets=function(){switch(this.type){case T.binary_doc:case T.canonical_text:return data_packets;case T.issuer:case T.personal:case T.casual:case T.positive:case T.certificate_revocation:return(n=data_packets.length)===1?[this.primary].concat(data_packets):(err=new Error('Only expecting one UserID-style packet in a self-sig (got '+n+')'),[]);break;case T.subkey_binding:case T.primary_binding:case T.subkey_revocation:return packets=[],data_packets.length===1?this.primary==null?err=new Error('Need a primary key for subkey signature'):(subkey=data_packets[0],packets=[this.primary,subkey]):err=new Error('Wrong number of data packets; expected only 1'),packets;case T.direct:return[this.primary].concat(data_packets);default:return err=new Error('cannot verify sigtype '+this.type),[];}}.call(this),function(_this){return function(__iced_k){var _ref3;return err==null?void(buffers=function(){var _i,_len,_ref3,_results;for(_ref3=this.data_packets,_results=[],(_i=0,_len=_ref3.length);_i<_len;_i++)dp=_ref3[_i],_results.push(dp.to_signature_payload());return _results}.call(_this),data=Buffer.concat(buffers),_ref3=_this.prepare_payload(data),payload=_ref3.payload,hvalue=_ref3.hvalue,function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/packet/signature.iced',funcname:'Signature._verify'}),_this.key.verify_unpad_and_check_hash({sig:_this.sig,hash:hvalue,hasher:_this.hasher},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:256})),__iced_deferrals._fulfill()}(__iced_k)):__iced_k()}}(this)(function(_this){return function(){var _i,_len,_ref3;if(err==null&&(err=_this._check_key_sig_expiration(opts)),sig=_this,err==null)switch(SKB=packetsigs.SubkeyBinding,_this.type){case T.binary_doc:case T.canonical_text:for(_ref3=_this.data_packets,_i=0,_len=_ref3.length;_i<_len;_i++)d=_ref3[_i],d.push_sig(new packetsigs.Data({sig:sig}));break;case T.issuer:case T.personal:case T.casual:case T.positive:ps=null,(userid=_this.data_packets[1].to_userid())==null?(user_attribute=_this.data_packets[1].to_user_attribute())!=null&&(ps=new packetsigs.SelfSig({type:_this.type,user_attribute:user_attribute,sig:sig}),user_attribute.push_sig(ps)):(ps=new packetsigs.SelfSig({type:_this.type,userid:userid,sig:sig}),userid.push_sig(ps)),ps&&_this.primary.push_sig(ps);break;case T.subkey_binding:subkey.push_sig(new SKB({primary:_this.primary,sig:sig,direction:SKB.DOWN}));break;case T.primary_binding:subkey.push_sig(new SKB({primary:_this.primary,sig:sig,direction:SKB.UP}));break;case T.subkey_revocation:subkey.mark_revoked(sig);}return cb(err)}}(this))},Signature.prototype.is_signature=function(){return!0},Signature.prototype.when_generated=function(){var _ref3;return(_ref3=this.subpacket_index.hashed[S.creation_time])==null?void 0:_ref3.time},Signature.prototype.time_primary_pair=function(){var T,_ref3,_ref4;return T=C.sig_types,(_ref3=this.type)===T.issuer||_ref3===T.personal||_ref3===T.casual||_ref3===T.positive?[this.when_generated(),(_ref4=this.subpacket_index.hashed[S.primary_user_id])!=null&&_ref4.flag]:null},Signature.prototype._check_key_sig_expiration=function(opts){var T,creation,err,expiration,n,now,_ref3;return err=null,T=C.sig_types,((_ref3=this.type)===T.issuer||_ref3===T.personal||_ref3===T.casual||_ref3===T.positive||_ref3===T.subkey_binding||_ref3===T.primary_binding)&&(creation=this.subpacket_index.hashed[S.creation_time],expiration=this.subpacket_index.hashed[S.key_expiration_time],now=(n=opts==null?void 0:opts.now)==null?unix_time():n,creation!=null&&expiration!=null&&(expiration=creation.time+expiration.time,now>expiration&&expiration!==0&&(err=new Error('Key expired '+(now-expiration)+'s ago'))),err==null&&(expiration=this.subpacket_index.hashed[S.expiration_time])!=null&&now>expiration.time&&expiration.time!==0&&(err=new Error('Signature expired '+(now-expiration.time)+'s ago'))),err},Signature.prototype.get_key_flags=function(){var _ref3,_ref4,_ref5;return((_ref3=this.subpacket_index)==null||(_ref4=_ref3.hashed)==null||(_ref5=_ref4[C.sig_subpacket.key_flags])==null?void 0:_ref5.all_flags())||0},Signature.prototype.get_issuer_key_id=function(){var _ref3,_ref4;return(_ref3=this.subpacket_index)==null||(_ref4=_ref3.all[C.sig_subpacket.issuer])==null?void 0:_ref4.id},Signature}(Packet),SubPacket=function(){function SubPacket(type){this.type=type,this.critical=!1,this.five_byte_len=!1}return SubPacket.prototype.set_opts=function(d){var k,v;for(k in d)v=d[k],this[k]=v;return!0},SubPacket.prototype.to_buffer=function(){var inner;return inner=this._v_to_buffer(),Buffer.concat([encode_length(inner.length+1,this.five_byte_len),uint_to_buffer(8,this.type|(this.critical?128:0)),inner])},SubPacket.prototype.to_sig=function(){return null},SubPacket.prototype.export_to_option=function(){return null},SubPacket}(),Experimental=function(_super){function Experimental(buf,type){this.buf=buf,this.type=type}return __extends(Experimental,_super),Experimental.parse=function(slice,type){return new Experimental(slice.consume_rest_to_buffer(),type)},Experimental.prototype._v_to_buffer=function(){return this.buf},Experimental}(SubPacket),Time=function(_super){function Time(type,time){this.time=time,this.never_expires=this.time===0,Time.__super__.constructor.call(this,type)}return __extends(Time,_super),Time.parse=function(slice,klass){return new klass(slice.read_uint32())},Time.prototype._v_to_buffer=function(){return uint_to_buffer(32,this.time)},Time}(SubPacket),Preference=function(_super){function Preference(type,v){var e,_i,_len,_ref3;for(this.v=v,Preference.__super__.constructor.call(this,type),_ref3=this.v,(_i=0,_len=_ref3.length);_i<_len;_i++)e=_ref3[_i],assert(e!=null)}return __extends(Preference,_super),Preference.parse=function(slice,klass){var c,v;return v=function(){var _i,_len,_ref3,_results;for(_ref3=slice.consume_rest_to_buffer(),_results=[],(_i=0,_len=_ref3.length);_i<_len;_i++)c=_ref3[_i],_results.push(c);return _results}(),new klass(v)},Preference.prototype._v_to_buffer=function(){var e;return new Buffer(function(){var _i,_len,_ref3,_results;for(_ref3=this.v,_results=[],(_i=0,_len=_ref3.length);_i<_len;_i++)e=_ref3[_i],_results.push(e);return _results}.call(this))},Preference}(SubPacket),CreationTime=function(_super){function CreationTime(t){CreationTime.__super__.constructor.call(this,S.creation_time,t)}return __extends(CreationTime,_super),CreationTime.parse=function(slice){return Time.parse(slice,CreationTime)},CreationTime}(Time),ExpirationTime=function(_super){function ExpirationTime(t){ExpirationTime.__super__.constructor.call(this,S.expiration_time,t)}return __extends(ExpirationTime,_super),ExpirationTime.parse=function(slice){return Time.parse(slice,ExpirationTime)},ExpirationTime}(Time),Exportable=function(_super){function Exportable(flag){this.flag=flag,Exportable.__super__.constructor.call(this,S.exportable_certificate)}return __extends(Exportable,_super),Exportable.parse=function(slice){return new Exportable(slice.read_uint8())},Exportable.prototype._v_to_buffer=function(){return uint_to_buffer(8,this.flag)},Exportable}(SubPacket),Trust=function(_super){function Trust(level,amount){this.level=level,this.amount=amount,Trust.__super__.constructor.call(this,S.trust_signature)}return __extends(Trust,_super),Trust.parse=function(slice){return new Trust(slice.read_uint8(),slice.read_uint8())},Trust.prototype._v_to_buffer=function(){return Buffer.concat([uint_to_buffer(8,this.level),uint_to_buffer(8,this.amount)])},Trust}(SubPacket),RegularExpression=function(_super){function RegularExpression(re){this.re=re,RegularExpression.__super__.constructor.call(this,S.regular_expression)}return __extends(RegularExpression,_super),RegularExpression.parse=function(slice){var ret;return ret=new RegularExpression(slice.consume_rest_to_buffer().toString('utf8')),ret},RegularExpression.prototype._v_to_buffer=function(){return new Buffer(this.re,'utf8')},RegularExpression}(SubPacket),Revocable=function(_super){function Revocable(flag){this.flag=flag,Revocable.__super__.constructor.call(this,S.revocable)}return __extends(Revocable,_super),Revocable.parse=function(slice){return new Revocable(slice.read_uint8())},Revocable.prototype._v_to_buffer=function(){return uint_to_buffer(8,this.flag)},Revocable}(SubPacket),KeyExpirationTime=function(_super){function KeyExpirationTime(t){KeyExpirationTime.__super__.constructor.call(this,S.key_expiration_time,t)}return __extends(KeyExpirationTime,_super),KeyExpirationTime.parse=function(slice){return Time.parse(slice,KeyExpirationTime)},KeyExpirationTime}(Time),PreferredSymmetricAlgorithms=function(_super){function PreferredSymmetricAlgorithms(v){PreferredSymmetricAlgorithms.__super__.constructor.call(this,S.preferred_symmetric_algorithms,v)}return __extends(PreferredSymmetricAlgorithms,_super),PreferredSymmetricAlgorithms.parse=function(slice){return Preference.parse(slice,PreferredSymmetricAlgorithms)},PreferredSymmetricAlgorithms}(Preference),RevocationKey=function(_super){function RevocationKey(key_class,alg,fingerprint){this.key_class=key_class,this.alg=alg,this.fingerprint=fingerprint,RevocationKey.__super__.constructor.call(this,S.revocation_key)}return __extends(RevocationKey,_super),RevocationKey.parse=function(slice){var fp,ka,kc;return kc=slice.read_uint8(),ka=slice.read_uint8(),fp=slice.read_buffer(SHA1.output_length),new RevocationKey(kc,ka,fp)},RevocationKey.prototype._v_to_buffer=function(){return Buffer.concat([uint_to_buffer(8,this.key_class),uint_to_buffer(8,this.alg),new Buffer(this.fingerprint)])},RevocationKey}(SubPacket),Issuer=function(_super){function Issuer(id){this.id=id,Issuer.__super__.constructor.call(this,S.issuer)}return __extends(Issuer,_super),Issuer.parse=function(slice){return new Issuer(slice.read_buffer(8))},Issuer.prototype._v_to_buffer=function(){return new Buffer(this.id)},Issuer}(SubPacket),NotationData=function(_super){function NotationData(flags,name,value){this.flags=flags,this.name=name,this.value=value,NotationData.__super__.constructor.call(this,S.notation_data)}return __extends(NotationData,_super),NotationData.parse=function(slice){var flags,name,nl,value,vl;return flags=slice.read_uint32(),nl=slice.read_uint16(),vl=slice.read_uint16(),name=slice.read_buffer(nl),value=slice.read_buffer(vl),new NotationData(flags,name,value)},NotationData.prototype._v_to_buffer=function(){return Buffer.concat([uint_to_buffer(32,this.flags),uint_to_buffer(16,this.name.length),uint_to_buffer(16,this.value.length),new Buffer(this.name),new Buffer(this.value)])},NotationData}(SubPacket),PreferredHashAlgorithms=function(_super){function PreferredHashAlgorithms(v){PreferredHashAlgorithms.__super__.constructor.call(this,S.preferred_hash_algorithms,v)}return __extends(PreferredHashAlgorithms,_super),PreferredHashAlgorithms.parse=function(slice){return Preference.parse(slice,PreferredHashAlgorithms)},PreferredHashAlgorithms}(Preference),PreferredCompressionAlgorithms=function(_super){function PreferredCompressionAlgorithms(v){PreferredCompressionAlgorithms.__super__.constructor.call(this,S.preferred_compression_algorithms,v)}return __extends(PreferredCompressionAlgorithms,_super),PreferredCompressionAlgorithms.parse=function(slice){return Preference.parse(slice,PreferredCompressionAlgorithms)},PreferredCompressionAlgorithms}(Preference),KeyServerPreferences=function(_super){function KeyServerPreferences(v){KeyServerPreferences.__super__.constructor.call(this,S.key_server_preferences,v)}return __extends(KeyServerPreferences,_super),KeyServerPreferences.parse=function(slice){return Preference.parse(slice,KeyServerPreferences)},KeyServerPreferences}(Preference),Features=function(_super){function Features(v){Features.__super__.constructor.call(this,S.features,v)}return __extends(Features,_super),Features.parse=function(slice){return Preference.parse(slice,Features)},Features}(Preference),PreferredKeyServer=function(_super){function PreferredKeyServer(server){this.server=server,PreferredKeyServer.__super__.constructor.call(this,S.preferred_key_server)}return __extends(PreferredKeyServer,_super),PreferredKeyServer.parse=function(slice){return new PreferredKeyServer(slice.consume_rest_to_buffer())},PreferredKeyServer.prototype._v_to_buffer=function(){return this.server},PreferredKeyServer}(SubPacket),PrimaryUserId=function(_super){function PrimaryUserId(flag){this.flag=flag,PrimaryUserId.__super__.constructor.call(this,S.primary_user_id)}return __extends(PrimaryUserId,_super),PrimaryUserId.parse=function(slice){return new PrimaryUserId(slice.read_uint8())},PrimaryUserId.prototype._v_to_buffer=function(){return uint_to_buffer(8,this.flag)},PrimaryUserId}(SubPacket),PolicyURI=function(_super){function PolicyURI(flag){this.flag=flag,PolicyURI.__super__.constructor.call(this,S.policy_uri)}return __extends(PolicyURI,_super),PolicyURI.parse=function(slice){return new PolicyURI(slice.consume_rest_to_buffer())},PolicyURI.prototype._v_to_buffer=function(){return this.flag},PolicyURI}(SubPacket),KeyFlags=function(_super){function KeyFlags(v){KeyFlags.__super__.constructor.call(this,S.key_flags,v)}return __extends(KeyFlags,_super),KeyFlags.parse=function(slice){return Preference.parse(slice,KeyFlags)},KeyFlags.prototype.all_flags=function(){var e,ret,_i,_len,_ref3;for(ret=0,_ref3=this.v,(_i=0,_len=_ref3.length);_i<_len;_i++)e=_ref3[_i],ret|=e;return ret},KeyFlags}(Preference),SignersUserID=function(_super){function SignersUserID(uid){this.uid=uid,SignersUserID.__super__.constructor.call(this,S.signers_user_id)}return __extends(SignersUserID,_super),SignersUserID.parse=function(slice){return new SignersUserID(slice.consume_rest_to_buffer())},SignersUserID.prototype._v_to_buffer=function(){return this.uid},SignersUserID}(SubPacket),ReasonForRevocation=function(_super){function ReasonForRevocation(flag,reason){this.flag=flag,this.reason=reason,ReasonForRevocation.__super__.constructor.call(this,S.reason_for_revocation)}return __extends(ReasonForRevocation,_super),ReasonForRevocation.parse=function(slice){var flag,reason;return flag=slice.read_uint8(),reason=slice.consume_rest_to_buffer(),new ReasonForRevocation(flag,reason)},ReasonForRevocation.prototype._v_to_buffer=function(){return Buffer.concat([uint_to_buffer(8,this.flag),this.reason])},ReasonForRevocation}(SubPacket),SignatureTarget=function(_super){function SignatureTarget(pub_key_alg,hasher,hval){this.pub_key_alg=pub_key_alg,this.hasher=hasher,this.hval=hval,SignatureTarget.__super__.constructor.call(this,S.signature_target)}return __extends(SignatureTarget,_super),SignatureTarget.parse=function(slice){var hasher,hval,pka;return pka=slice.read_uint8(),hasher=alloc_or_throw(slice.read_uint8()),hval=slice.read_buffer(hasher.output_length),new SignatureTarget(pka,hasher,hval)},SignatureTarget.prototype._v_to_buffer=function(){return Buffer.concat([uint_to_buffer(8,this.pub_key_alg),uint_to_buffer(8,this.hasher.type),this.hval])},SignatureTarget}(SubPacket),EmbeddedSignature=function(_super){function EmbeddedSignature(_arg){this.sig=_arg.sig,this.rawsig=_arg.rawsig,EmbeddedSignature.__super__.constructor.call(this,S.embedded_signature)}return __extends(EmbeddedSignature,_super),EmbeddedSignature.prototype._v_to_buffer=function(){return this.rawsig},EmbeddedSignature.prototype.to_sig=function(){return this.sig},EmbeddedSignature.parse=function(slice){var rawsig,sig;return rawsig=slice.peek_rest_to_buffer(),sig=Signature.parse(slice),new EmbeddedSignature({sig:sig,rawsig:rawsig})},EmbeddedSignature}(SubPacket),exports.Signature=Signature,Parser=function(){function Parser(slice){this.slice=slice}return Parser.prototype.parse_v2_or_v3=function(v,klass){var o;if(this.slice.read_uint8()!==5)throw new error('Bad one-octet length');return o={},o.type=this.slice.read_uint8(),o.time=this.slice.read_uint32(),o.sig_data=this.slice.peek_rest_to_buffer(),o.key_id=this.slice.read_buffer(8),o.public_key_class=asymmetric.get_class(this.slice.read_uint8()),o.hasher=alloc_or_throw(this.slice.read_uint8()),o.signed_hash_value_hash=this.slice.read_uint16(),o.sig=o.public_key_class.parse_sig(this.slice),o.version=v,new klass(o)},Parser.prototype.parse_v4=function(){var end,hashed_subpacket_count,o,unhashed_subpacket_count;return o={},o.type=this.slice.read_uint8(),o.public_key_class=asymmetric.get_class(this.slice.read_uint8()),o.hasher=alloc_or_throw(this.slice.read_uint8()),hashed_subpacket_count=this.slice.read_uint16(),end=this.slice.i+hashed_subpacket_count,o.sig_data=this.slice.peek_to_buffer(hashed_subpacket_count),o.hashed_subpackets=function(){var _results;for(_results=[];this.slice.i<end;)_results.push(this.parse_subpacket());return _results}.call(this),unhashed_subpacket_count=this.slice.read_uint16(),end=this.slice.i+unhashed_subpacket_count,o.unhashed_subpackets=function(){var _results;for(_results=[];this.slice.i<end;)_results.push(this.parse_subpacket());return _results}.call(this),o.signed_hash_value_hash=this.slice.read_uint16(),o.sig=o.public_key_class.parse_sig(this.slice),o.version=4,new Signature(o)},Parser.prototype.parse_subpacket=function(){var critical,end,five_byte_len,klass,len,raw_type,ret,type,_ref3;return _ref3=this.slice.read_v4_length(),len=_ref3[0],five_byte_len=_ref3[1],raw_type=this.slice.read_uint8(),type=raw_type&127,critical=!!(raw_type&128),end=this.slice.clamp(len-1),klass=function(){switch(type){case S.creation_time:return CreationTime;case S.expiration_time:return ExpirationTime;case S.exportable_certificate:return Exportable;case S.trust_signature:return Trust;case S.regular_expression:return RegularExpression;case S.revocable:return Revocable;case S.key_expiration_time:return KeyExpirationTime;case S.preferred_symmetric_algorithms:return PreferredSymmetricAlgorithms;case S.revocation_key:return RevocationKey;case S.issuer:return Issuer;case S.notation_data:return NotationData;case S.preferred_hash_algorithms:return PreferredHashAlgorithms;case S.preferred_compression_algorithms:return PreferredCompressionAlgorithms;case S.key_server_preferences:return KeyServerPreferences;case S.preferred_key_server:return PreferredKeyServer;case S.primary_user_id:return PrimaryUserId;case S.policy_uri:return PolicyURI;case S.key_flags:return KeyFlags;case S.signers_user_id:return SignersUserID;case S.reason_for_revocation:return ReasonForRevocation;case S.features:return Features;case S.signature_target:return SignatureTarget;case S.embedded_signature:return EmbeddedSignature;default:if(type>=S.experimental_low&&type<=S.experimental_high)return Experimental;throw new Error('Unknown signature subpacket: '+type);}}(),ret=klass.parse(this.slice,type),ret.set_opts({critical:critical,five_byte_len:five_byte_len}),this.slice.unclamp(end),ret},Parser.prototype.parse=function(){var version;switch(version=this.slice.read_uint8(),version){case C.versions.signature.V2:return this.parse_v2_or_v3(version,Signature_v2);case C.versions.signature.V3:return this.parse_v2_or_v3(version,Signature_v3);case C.versions.signature.V4:return this.parse_v4();default:throw new Error('Unknown signature version: '+version);}},Parser}(),exports.CreationTime=CreationTime,exports.KeyFlags=KeyFlags,exports.KeyExpirationTime=KeyExpirationTime,exports.PreferredSymmetricAlgorithms=PreferredSymmetricAlgorithms,exports.PreferredHashAlgorithms=PreferredHashAlgorithms,exports.Features=Features,exports.KeyServerPreferences=KeyServerPreferences,exports.Issuer=Issuer,exports.EmbeddedSignature=EmbeddedSignature,exports.PrimaryUserId=PrimaryUserId}).call(this)}).call(this,require('buffer').Buffer)},{'../../asymmetric':1,'../../const':5,'../../hash':14,'../../util':70,'../buffer':35,'../util':60,'./base':45,'./packetsigs':51,'assert':75,'buffer':80,'iced-error':115,'iced-runtime':118,'util':114}],54:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},AES,C,Packet,SHA1,SHA256,UserAttribute,bufferify,encrypt,native_rng,parse,triplesec,uint_to_buffer,_ref,_ref1;C=require('../../const').openpgp,triplesec=require('triplesec'),_ref=triplesec.hash,SHA1=_ref.SHA1,SHA256=_ref.SHA256,AES=triplesec.ciphers.AES,native_rng=triplesec.prng.native_rng,_ref1=require('../../util'),bufferify=_ref1.bufferify,uint_to_buffer=_ref1.uint_to_buffer,encrypt=require('../cfb').encrypt,Packet=require('./base').Packet,parse=require('pgp-utils').userid.parse,UserAttribute=function(_super){function UserAttribute(data){this.data=data,UserAttribute.__super__.constructor.call(this)}return __extends(UserAttribute,_super),UserAttribute.prototype.write=function(){return this.frame_packet(C.packet_tags.user_attribute,this.data)},UserAttribute.parse=function(slice){return new UserAttribute(slice.consume_rest_to_buffer())},UserAttribute.prototype.to_user_attribute=function(){return this},UserAttribute.prototype.to_signature_payload=function(){return Buffer.concat([new Buffer([C.signatures.user_attribute]),uint_to_buffer(32,this.data.length),this.data])},UserAttribute}(Packet),exports.UserAttribute=UserAttribute}).call(this)}).call(this,require('buffer').Buffer)},{'../../const':5,'../../util':70,'../cfb':38,'./base':45,'buffer':80,'pgp-utils':163,'triplesec':181}],55:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},AES,C,Packet,SHA1,SHA256,UserID,bufferify,encrypt,native_rng,parse,triplesec,uint_to_buffer,_ref,_ref1;C=require('../../const').openpgp,triplesec=require('triplesec'),_ref=triplesec.hash,SHA1=_ref.SHA1,SHA256=_ref.SHA256,AES=triplesec.ciphers.AES,native_rng=triplesec.prng.native_rng,_ref1=require('../../util'),bufferify=_ref1.bufferify,uint_to_buffer=_ref1.uint_to_buffer,encrypt=require('../cfb').encrypt,Packet=require('./base').Packet,parse=require('pgp-utils').userid.parse,UserID=function(_super){function UserID(userid,components){this.components=components==null?null:components,this.userid=bufferify(userid),this.compontents==null&&this._parse(),UserID.__super__.constructor.call(this),this._time_primary_pair=null,this.primary=!1,this.most_recent_sig=null}return __extends(UserID,_super),UserID.prototype.utf8=function(){return this.userid.toString('utf8')},UserID.prototype.write=function(){return this.frame_packet(C.packet_tags.userid,this.userid)},UserID.parse=function(slice){return new UserID(slice.consume_rest_to_buffer())},UserID.prototype.to_userid=function(){return this},UserID.prototype.cmp=function(b){var x,y;return x=this.utf8(),y=b.utf8(),x<y?-1:x===y?0:1},UserID.prototype.to_signature_payload=function(){return Buffer.concat([new Buffer([C.signatures.userid]),uint_to_buffer(32,this.userid.length),this.userid])},UserID.prototype._parse=function(){var c;if((c=parse(this.utf8()))!=null)return this.components=c},UserID.prototype.get_username=function(){var _ref2;return(_ref2=this.components)==null?void 0:_ref2.username},UserID.prototype.get_comment=function(){var _ref2;return(_ref2=this.components)==null?void 0:_ref2.comment},UserID.prototype.get_email=function(){var _ref2;return(_ref2=this.components)==null?void 0:_ref2.email},UserID.prototype.time_primary_pair=function(){var max,p,pairs,ret,s,_i,_len;if(this._time_primary_pair==null){for(pairs=function(){var _i,_len,_ref2,_ref3,_results;for(_ref2=this.get_psc().get_self_sigs(),_results=[],(_i=0,_len=_ref2.length);_i<_len;_i++)s=_ref2[_i],_results.push(s==null||(_ref3=s.sig)==null?void 0:_ref3.time_primary_pair());return _results}.call(this),max=null,ret=[null,null],(_i=0,_len=pairs.length);_i<_len;_i++)(p=pairs[_i],p!=null)&&(p[0]&&(ret[0]==null||ret[0]<p[0])&&(ret[0]=p[0]),p[1]&&(ret[1]==null||ret[1]<p[0])&&(ret[1]=p[0]));this._time_primary_pair=ret,this.most_recent_sig=ret[0]}return this._time_primary_pair},UserID.make=function(components){var c,comment,userid;return comment=(c=components.comment)==null?'':'('+c+') ',userid=''+components.username+' '+comment+'<'+components.email+'>',new UserID(userid,components)},UserID.prototype.get_framed_signature_output=function(){var _ref2,_ref3,_ref4;return(_ref2=this.get_psc())==null||(_ref3=_ref2.get_self_sig())==null||(_ref4=_ref3.sig)==null?void 0:_ref4.get_framed_output()},UserID}(Packet),exports.UserID=UserID}).call(this)}).call(this,require('buffer').Buffer)},{'../../const':5,'../../util':70,'../cfb':38,'./base':45,'buffer':80,'pgp-utils':163,'triplesec':181}],56:[function(require,module,exports){(function(Buffer){(function(){var C,Compressed,Generic,KeyMaterial,Literal,MessageParser,OnePassSignature,PKESK,PacketParser,SEIPD,Signature,SlicerBuffer,UserAttribute,UserID,inspect,parse,util,_ref;util=require('../util'),SlicerBuffer=require('./buffer').SlicerBuffer,C=require('../const').openpgp,KeyMaterial=require('./packet/keymaterial').KeyMaterial,Signature=require('./packet/signature').Signature,_ref=require('./packet/sess'),SEIPD=_ref.SEIPD,PKESK=_ref.PKESK,UserID=require('./packet/userid').UserID,UserAttribute=require('./packet/user_attribute').UserAttribute,Compressed=require('./packet/compressed').Compressed,Generic=require('./packet/generic').Generic,OnePassSignature=require('./packet/one_pass_sig').OnePassSignature,Literal=require('./packet/literal').Literal,inspect=require('util').inspect,MessageParser=function(){function MessageParser(slice){this.slice=slice}return MessageParser.prototype.parse=function(){var _results;for(_results=[];this.slice.rem();)_results.push(this.parse_packet());return _results},MessageParser.prototype.parse_packet=function(){return new PacketParser(this.slice).parse()},MessageParser}(),PacketParser=function(){function PacketParser(slice){this.slice=slice,this.body=null,this.real_packet_len=null,this.tag=null,this.len=null,this.header_len=null}return PacketParser.prototype.parse_header=function(){return this.parse_tag_and_len(),this.header_len||(this.header_len=this.slice.offset()),this.body||(this.body=new SlicerBuffer(this.slice.read_buffer(this.len))),this.real_packet_len||(this.real_packet_len=this.len),this.slice.unclamp()},PacketParser.prototype.parse=function(){var ret;return this.parse_header(),ret=this.parse_body(),ret},PacketParser.prototype.parse_body=function(){var packet,pt,raw,sb;return pt=C.packet_tags,sb=this.body,raw=sb.peek_rest_to_buffer(),packet=function(){switch(this.tag){case pt.PKESK:return PKESK.parse(sb);case pt.one_pass_sig:return OnePassSignature.parse(sb);case pt.secret_key:return KeyMaterial.parse_private_key(sb,{subkey:!1});case pt.secret_subkey:return KeyMaterial.parse_private_key(sb,{subkey:!0});case pt.public_key:return KeyMaterial.parse_public_key(sb,{subkey:!1});case pt.public_subkey:return KeyMaterial.parse_public_key(sb,{subkey:!0});case pt.signature:return Signature.parse(sb);case pt.userid:return UserID.parse(sb);case pt.user_attribute:return UserAttribute.parse(sb);case pt.SEIPD:return SEIPD.parse(sb);case pt.literal:return Literal.parse(sb);case pt.compressed:return Compressed.parse(sb);default:return new Generic(this.tag,sb);}}.call(this),packet.set({tag:this.tag,real_packet_len:this.real_packet_len,header_len:this.header_len,raw:raw}),packet},PacketParser.prototype.parse_tag_and_len=function(){var c;if(this.slice.len()<2||((c=this.slice.read_uint8())&128)===0)throw new Error('This doesn\'t look like a binary PGP packet (c='+c+')');return(c&64)===0?this.parse_tag_and_len_old(c):this.parse_tag_and_len_new(c)},PacketParser.prototype.parse_tag_and_len_old=function(c){return this.tag=(c&63)>>2,this.len=function(){switch(c&3){case 0:return this.slice.read_uint8();case 1:return this.slice.read_uint16();case 2:return this.slice.read_uint32();case 3:return this.slice.rem();}}.call(this)},PacketParser.prototype.parse_tag_and_len_new=function(c){var ret;return this.tag=c&63,ret=this.parse_tag_len_new(),ret},PacketParser.prototype.parse_tag_len_new=function(){var c,d,go,lastlen,packet_length,segments;for(go=!0,segments=[],this.len=0,lastlen=0;go;)go=!1,c=this.slice.read_uint8(),lastlen=c<192?c:c===255?this.slice.read_uint32():c<224?(d=this.slice.read_uint8(),(c-192<<8)+(d+192)):(this.header_len||(this.header_len=this.slice.offset()),packet_length=1<<(c&31),segments.push(this.slice.read_buffer(packet_length)),go=!0,packet_length),this.len+=lastlen;if(segments.length)return segments.push(this.slice.read_buffer(lastlen)),this.body=new SlicerBuffer(Buffer.concat(segments)),this.len=this.body.length,this.real_packet_len=this.slice.offset()},PacketParser}(),exports.parse=parse=function(buf){return util.katch(function(){return new MessageParser(new SlicerBuffer(buf)).parse()})}}).call(this)}).call(this,require('buffer').Buffer)},{'../const':5,'../util':70,'./buffer':35,'./packet/compressed':46,'./packet/generic':47,'./packet/keymaterial':48,'./packet/literal':49,'./packet/one_pass_sig':50,'./packet/sess':52,'./packet/signature':53,'./packet/user_attribute':54,'./packet/userid':55,'buffer':80,'util':114}],57:[function(require,module,exports){(function(){var C,KeyBlock,Message,OPS,Warnings,armor,athrow,bufeq_secure,do_message,hashmod,iced,import_key_pgp,katch,konst,make_esc,parse,unix_time,util,verify_clearsign,verify_detached,__iced_k,__iced_k_noop,_ref;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},make_esc=require('iced-error').make_esc,OPS=require('../keyfetch').OPS,konst=require('../const'),C=konst.openpgp,_ref=require('../util'),katch=_ref.katch,unix_time=_ref.unix_time,athrow=_ref.athrow,Warnings=_ref.Warnings,bufeq_secure=_ref.bufeq_secure,parse=require('./parser').parse,import_key_pgp=require('../symmetric').import_key_pgp,util=require('util'),armor=require('./armor'),hashmod=require('../hash'),verify_clearsign=require('./clearsign').verify,verify_detached=require('./detachsign').verify,KeyBlock=function(){function KeyBlock(packets,opts){this.packets=packets,this.verified_signatures=[],this.subkeys=[],this.primary=null,this.userids=[],this.user_attributes=[],this.warnings=new Warnings,this.opts=opts||{}}return KeyBlock.prototype.to_obj=function(){return{subkeys:this.subkeys,primary:this.primary,userids:this.userids}},KeyBlock.prototype._extract_keys=function(){var err,i,p,_i,_len,_ref1;if(err=null,!this.packets.length)err=new Error('No packets; cannot extract a key');else if(!(this.primary=this.packets[0]).is_primary())err=new Error('First packet must be the primary key');else for(_ref1=this.packets.slice(1),i=_i=0,_len=_ref1.length;_i<_len;i=++_i)p=_ref1[i],p.is_key_material()&&err==null&&(p.key.is_toxic()?this.warnings.push('Ignoring toxic subkey (ElGamal Encrypt+Sign)'):p.is_primary()?bufeq_secure(p.get_fingerprint(),this.primary.get_fingerprint())?p.set_duplicate_primary():err=new Error('cannot have 2 primary keys'):this.subkeys.push(p));return err},KeyBlock.prototype._check_keys=function(){return this._check_primary()||this._check_subkeys()},KeyBlock.prototype._check_primary=function(){var err;return err=this.primary.is_self_signed()?(this.userids=this.primary.get_signed_userids()).length===0?new Error('no valid Userid signed into key'):(this.user_attributes=this.primary.get_signed_user_attributes(),null):new Error('no valid primary key self-signature')},KeyBlock.prototype._check_subkeys=function(){var err,i,k,msg,subkeys,_i,_len;for(subkeys=this.subkeys,err=null,this.subkeys=[],(i=_i=0,_len=subkeys.length);_i<_len;i=++_i)k=subkeys[i],err==null&&(k.is_signed_subkey_of(this.primary)?this.subkeys.push(k):(msg='Subkey '+i+' was invalid; discarding',this.warnings.push(msg)));return err},KeyBlock.prototype.process=function(cb){var err,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=this._extract_keys(),function(_this){return function(__iced_k){return err==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'KeyBlock.process'}),_this._verify_sigs(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:86})),__iced_deferrals._fulfill()}(__iced_k):__iced_k()}}(this)(function(_this){return function(){var _ref1;return!(err!=null||((_ref1=_this.opts)==null?void 0:_ref1.no_check_keys))&&(err=_this._check_keys()),cb(err)}}(this))},KeyBlock.prototype._verify_sigs=function(cb){var err,i,iid,msg,n_sigs,p,pid,tmp,working_set,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=null,working_set=[],n_sigs=0,function(_this){return function(__iced_k){var _i,_len,_ref1,_results,_while;_ref1=_this.packets.slice(1),_len=_ref1.length,i=0,_results=[],_while=function(__iced_k){var _break,_continue,_next;return(_break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return++i,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},!(i<_len))?_break():(p=_ref1[i],err==null)?void function(__iced_k){return p.is_signature()?void function(__iced_k){return bufeq_secure(iid=p.get_issuer_key_id(),pid=_this.primary.get_key_id())?void(n_sigs++,p.key=_this.primary.key,p.primary=_this.primary,function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'KeyBlock._verify_sigs'}),p.verify(working_set,__iced_deferrals.defer({assign_fn:function(){return function(){return tmp=arguments[0]}}(),lineno:110}),_this.opts),__iced_deferrals._fulfill()}(function(){return __iced_k(typeof tmp!=='undefined'&&tmp!==null?(msg='Signature failure in packet '+i+': '+tmp.message,_this.warnings.push(msg)):_this.verified_signatures.push(p))})):(n_sigs++,__iced_k(_this.warnings.push('Skipping signature by another issuer: '+(iid==null?void 0:iid.toString('hex'))+' != '+(pid==null?void 0:pid.toString('hex')))))}(__iced_k):(n_sigs>0&&(n_sigs=0,working_set=[]),__iced_k(p.is_duplicate_primary()?void 0:working_set.push(p)))}(_next):_continue()},_while(__iced_k)}}(this)(function(_this){return function(){return cb(err)}}(this))},KeyBlock}(),Message=function(){function Message(_arg){this.keyfetch=_arg.keyfetch,this.data_fn=_arg.data_fn,this.data=_arg.data,this.strict=_arg.strict,this.literals=[],this.enc_data_packet=null,this.warnings=new Warnings}return Message.prototype._get_session_key=function(cb){var enc,err,esk_packets,fingerprint,index,key_ids,key_material,km,p,packet,pkcs5,privk,sesskey,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),key_ids=[],esk_packets=[],err=null,pkcs5=!1,key_ids=function(){var _results;for(_results=[];this.packets.length&&(p=this.packets[0].to_esk_packet());)esk_packets.push(p),this.packets.shift(),_results.push(p.get_key_id());return _results}.call(this),function(_this){return function(__iced_k){return key_ids.length?void(enc=!0,void 0,packet=esk_packets[0],void 0,err=null,auth_decrypt(packet.raw,ok_sesskey=>(sesskey=packet.raw.slice(0,ok_sesskey.length),sesskey=Object.assign(sesskey,ok_sesskey),void 0,cb(err,enc,sesskey,pkcs5)))):__iced_k(enc=!1)}}(this)(function(_this){return function(){}}(this))},Message.prototype._find_encrypted_data=function(cb){var err,ret;return err=ret=null,this.packets.length&&(ret=this.packets[0].to_enc_data_packet())?this.packets.pop():err=new Error('Could not find encrypted data packet'),cb(err,ret)},Message.prototype._decrypt_with_session_key=function(sesskey,edat,pkcs5,cb){var cipher,err,ret,___iced_passed_deferral,__iced_deferrals,__iced_k,_ref1;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),_ref1=katch(function(){return import_key_pgp(sesskey,pkcs5)}),err=_ref1[0],cipher=_ref1[1],function(_this){return function(__iced_k){return err==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._decrypt_with_session_key'}),edat.decrypt({cipher:cipher},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],ret=arguments[1]}}(),lineno:179})),__iced_deferrals._fulfill()}(__iced_k):__iced_k()}}(this)(function(_this){return function(){return cb(err,ret)}}(this))},Message.prototype._parse=function(raw,cb){var err,packets,_ref1;return _ref1=parse(raw),err=_ref1[0],packets=_ref1[1],cb(err,packets)},Message.prototype._decrypt=function(cb){var edat,err,esc,is_enc,packets,pkcs5,plaintext,sesskey,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=null,esc=make_esc(cb,'Message::decrypt'),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._decrypt'}),_this._get_session_key(esc(__iced_deferrals.defer({assign_fn:function(){return function(){return is_enc=arguments[0],sesskey=arguments[1],pkcs5=arguments[2]}}(),lineno:193}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){return is_enc?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._decrypt'}),_this._find_encrypted_data(esc(__iced_deferrals.defer({assign_fn:function(){return function(){return edat=arguments[0]}}(),lineno:195}))),__iced_deferrals._fulfill()}(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._decrypt'}),_this._decrypt_with_session_key(sesskey,edat,pkcs5,esc(__iced_deferrals.defer({assign_fn:function(){return function(){return plaintext=arguments[0]}}(),lineno:196}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._decrypt'}),_this._parse(plaintext,esc(__iced_deferrals.defer({assign_fn:function(){return function(){return packets=arguments[0]}}(),lineno:197}))),__iced_deferrals._fulfill()})(function(){return __iced_k(_this.packets=packets.concat(_this.packets))})})}):__iced_k()})(function(){return cb(err)})}}(this))},Message.prototype._inflate=function(cb){var esc,inflated,p,packets,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),packets=[],esc=make_esc(cb,'Message::_inflate'),function(_this){return function(__iced_k){var _i,_len,_ref1,_results,_while;_ref1=_this.packets,_len=_ref1.length,_i=0,_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return++_i,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},_i<_len?void(p=_ref1[_i],function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._inflate'}),p.inflate(esc(__iced_deferrals.defer({assign_fn:function(){return function(){return inflated=arguments[0]}}(),lineno:207}))),__iced_deferrals._fulfill()}(function(){(function(__iced_k){return typeof inflated!=='undefined'&&inflated!==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._inflate'}),_this._parse(inflated,esc(__iced_deferrals.defer({assign_fn:function(){return function(){return p=arguments[0]}}(),lineno:209}))),__iced_deferrals._fulfill()}(function(){return __iced_k(packets.push.apply(packets,p))}):__iced_k(packets.push(p))})(_next)})):_break()},_while(__iced_k)}}(this)(function(_this){return function(){return _this.packets=packets,cb(null)}}(this))},Message.prototype._frame_signatures=function(){var o,p,payload,ret,stack,_i,_j,_len,_len1,_ref1;for(ret=[],stack=[],payload=[],_ref1=this.packets,(_i=0,_len=_ref1.length);_i<_len;_i++)p=_ref1[_i],p.tag===C.packet_tags.one_pass_sig?stack.push({open:p}):!stack.length||(p.tag===C.packet_tags.signature?(o=stack.pop(),o.close=p,ret.push(o)):payload.push(p));for(_j=0,_len1=ret.length;_j<_len1;_j++)o=ret[_j],o.payload=payload;return ret},Message.prototype._verify_sig=function(sig,cb){var a,b,err,i,key_material,km,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=null,!bufeq_secure(a=sig.open.key_id,b=sig.close.get_key_id())&&(err=new Error('signature mismatch open v close: '+(a==null?void 0:a.toString('hex'))+' != '+(b==null?void 0:b.toString('hex')))),function(_this){return function(__iced_k){return err==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._verify_sig'}),_this.keyfetch.fetch([a],konst.ops.verify,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],km=arguments[1],i=arguments[2]}}(),lineno:247})),__iced_deferrals._fulfill()}(__iced_k):__iced_k()}}(this)(function(_this){return function(){(function(__iced_k){return err==null?void(key_material=km.find_pgp_key_material(a),sig.close.key=key_material.key,sig.close.key_manager=km,function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._verify_sig'}),sig.close.verify(sig.payload,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:259})),__iced_deferrals._fulfill()}(__iced_k)):__iced_k(_this.strict?void 0:(_this.warnings.push('Problem fetching key '+a.toString('hex')+': '+err.toString()),err=null))})(function(){return cb(err)})}}(this))},Message.prototype._verify=function(cb){var esc,sig,sigs,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'Message::_verify_sigs'),sigs=this._frame_signatures(),function(_this){return function(__iced_k){var _i,_len,_ref1,_results,_while;_ref1=sigs,_len=_ref1.length,_i=0,_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return++_i,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},_i<_len?void(sig=_ref1[_i],function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._verify'}),_this._verify_sig(sig,esc(__iced_deferrals.defer({lineno:273}))),__iced_deferrals._fulfill()}(_next)):_break()},_while(__iced_k)}}(this)(function(_this){return function(){return cb(null)}}(this))},Message.prototype.collect_literals=function(){var p,_i,_len,_ref1,_results;for(_ref1=this.packets,_results=[],(_i=0,_len=_ref1.length);_i<_len;_i++)p=_ref1[_i],p.tag===C.packet_tags.literal&&_results.push(p);return _results},Message.prototype._process_generic=function(_arg,cb){var esc,packets,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),packets=_arg.packets,this.packets=packets,esc=make_esc(cb,'Message:process'),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._process_generic'}),_this._decrypt(esc(__iced_deferrals.defer({lineno:286}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._process_generic'}),_this._inflate(esc(__iced_deferrals.defer({lineno:287}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._process_generic'}),_this._verify(esc(__iced_deferrals.defer({lineno:288}))),__iced_deferrals._fulfill()})(function(){return cb(null,_this.collect_literals())})})}}(this))},Message.prototype._verify_clearsign=function(_arg,cb){var clearsign,err,literal,packets,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),packets=_arg.packets,clearsign=_arg.clearsign,function(_this){return function(__iced_k){return clearsign==null?__iced_k(err=new Error('no clearsign data found')):void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._verify_clearsign'}),verify_clearsign({packets:packets,clearsign:clearsign,keyfetch:_this.keyfetch},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],literal=arguments[1]}}(),lineno:297})),__iced_deferrals._fulfill()}(__iced_k)}}(this)(function(_this){return function(){return cb(err,[literal])}}(this))},Message.prototype.parse_and_process=function(msg,cb){var esc,literals,packets,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'Message::parse_and_process'),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message.parse_and_process'}),_this._parse(msg.body,esc(__iced_deferrals.defer({assign_fn:function(){return function(){return packets=arguments[0]}}(),lineno:304}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message.parse_and_process'}),_this._process({msg:msg,packets:packets},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return literals=arguments[0]}}(),lineno:305}))),__iced_deferrals._fulfill()})(function(){return cb(null,literals)})}}(this))},Message.prototype._verify_signature=function(_arg,cb){var err,literals,packets,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),packets=_arg.packets,function(_this){return function(__iced_k){return _this.data==null&&_this.data_fn==null?__iced_k(err=new Error('Cannot verify detached signature without data input')):void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._verify_signature'}),verify_detached({packets:packets,data:_this.data,data_fn:_this.data_fn,keyfetch:_this.keyfetch},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],literals=arguments[1]}}(),lineno:314})),__iced_deferrals._fulfill()}(__iced_k)}}(this)(function(_this){return function(){return cb(err,literals)}}(this))},Message.prototype._process=function(_arg,cb){var err,literals,msg,packets,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),msg=_arg.msg,packets=_arg.packets,msg.type||(msg.type=C.message_types.generic),function(_this){return function(__iced_k){switch(msg.type){case C.message_types.generic:(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._process'}),_this._process_generic({packets:packets},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],literals=arguments[1]}}(),lineno:323})),__iced_deferrals._fulfill()})(__iced_k);break;case C.message_types.clearsign:(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._process'}),_this._verify_clearsign({packets:packets,clearsign:msg.clearsign},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],literals=arguments[1]}}(),lineno:325})),__iced_deferrals._fulfill()})(__iced_k);break;case C.message_types.signature:(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced',funcname:'Message._process'}),_this._verify_signature({packets:packets},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],literals=arguments[1]}}(),lineno:327})),__iced_deferrals._fulfill()})(__iced_k);break;default:return __iced_k(err=new Error('Needed a \'generic\', \'clearsign\', or \'signature\' PGP message, got '+msg.type));}}}(this)(function(_this){return function(){return cb(err,literals)}}(this))},Message}(),exports.KeyBlock=KeyBlock,exports.Message=Message,exports.do_message=do_message=function(_arg,cb){var armored,data,data_fn,err,esk,keyfetch,literals,msg,msg_type,proc,raw,strict,warnings,___iced_passed_deferral,__iced_deferrals,__iced_k,_ref1;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),armored=_arg.armored,raw=_arg.raw,msg_type=_arg.msg_type,keyfetch=_arg.keyfetch,data_fn=_arg.data_fn,data=_arg.data,strict=_arg.strict,literals=null,err=msg=warnings=esk=null,armored==null?raw==null?err=new Error('No input to do_message; need either \'armored\' or \'raw\' input'):(msg_type||(msg_type=C.message_types.generic),msg={body:raw,type:msg_type}):(_ref1=armor.decode(armored),err=_ref1[0],msg=_ref1[1]),function(_this){return function(__iced_k){return err==null?void(strict==null&&(strict=!0),proc=new Message({keyfetch:keyfetch,data_fn:data_fn,data:data,strict:strict}),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/processor.iced'}),proc.parse_and_process(msg,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],literals=arguments[1]}}(),lineno:373})),__iced_deferrals._fulfill()}(function(){return warnings=proc.warnings,__iced_k(esk=proc.encryption_subkey)})):__iced_k()}}(this)(function(_this){return function(){return cb(err,literals,warnings,esk)}}(this))}}).call(this)},{'../const':5,'../hash':14,'../keyfetch':24,'../symmetric':68,'../util':70,'./armor':33,'./clearsign':39,'./detachsign':40,'./parser':56,'iced-error':115,'iced-runtime':118,'util':114}],58:[function(require,module,exports){(function(Buffer){(function(){var C,S2K,SHA256,SecretKeyMaterial,alloc,iterated_s2k,streamers,triplesec,_iterated_s2k_cache,_ref;triplesec=require('triplesec'),C=require('../const').openpgp,_ref=require('../hash'),alloc=_ref.alloc,SHA256=_ref.SHA256,streamers=_ref.streamers,S2K=function(){function S2K(){this.hash=SHA256,this.streamer=streamers.SHA256()}return S2K.prototype._count=function(c,bias){return 16+(c&15)<<(c>>4)+bias},S2K.prototype.set_hash_algorithm=function(which){return(this.hash=alloc(which))==null?(void 0,this.hash=SHA256,this.streamer=streamers.SHA256()):this.streamer=streamers[this.hash.algname]()},S2K.prototype.read=function(slice){var c;switch(this.type=slice.read_uint8(),this.type){case C.s2k.plain:this.set_hash_algorithm(slice.read_uint8());break;case C.s2k.salt:this.set_hash_algorithm(slice.read_uint8()),this.salt=slice.read_buffer(8);break;case C.s2k.salt_iter:this.set_hash_algorithm(slice.read_uint8()),this.salt=slice.read_buffer(8),this.EXPBIAS=6,c=slice.read_uint8(),this.count=this._count(c,this.EXPBIAS);break;case C.s2k.gnu:this.read_gnu_extensions(slice);break;default:throw new Error('unknown s2k type! '+this.type);}return this},S2K.prototype.read_gnu_extensions=function(slice){var buf,gnu_ext_type,id,version;if(version=slice.read_uint8(),(id=(buf=slice.read_buffer(3)).toString('utf8'))==='GNU')switch(gnu_ext_type=slice.read_uint8()+1000,gnu_ext_type){case 1001:return this.type=C.s2k.gnu_dummy;default:throw new('unknown s2k gnu protection mode: '+gnu_ext_type);}else throw new Error('Malformed GNU-extension: '+ext)},S2K.prototype.write=function(passphrase,salt,c,keysize){var type;return this.type=type=3,this.salt=salt,this.count=this._count(c,6),this.s2kLength=10,this.produce_key(passphrase,keysize)},S2K.prototype.is_dummy=function(){return this.type===C.s2k.gnu_dummy},S2K.prototype.produce_key=function(passphrase,numBytes){var key,key2,prefix,ret,seed;return numBytes==null&&(numBytes=16),ret=function(){switch(this.type){case C.s2k.plain:return this.hash(passphrase);case C.s2k.salt:return this.hash(Buffer.concat([this.salt,passphrase]));case C.s2k.salt_iter:return seed=Buffer.concat([this.salt,passphrase]),key=iterated_s2k({alg:this.hash.algname,seed:seed,count:this.count}),numBytes!=null&&(numBytes===24||numBytes===32)?(prefix=new Buffer([0]),key2=iterated_s2k({alg:this.hash.algname,seed:seed,count:this.count,prefix:prefix}),Buffer.concat([key,key2])):key;break;default:return null;}}.call(this),ret.slice(0,numBytes)},S2K}(),_iterated_s2k_cache={},iterated_s2k=function(_arg){var alg,bigbuf,count,i,k,n,prefix,rem,rembuf,ret,seed,streamer,tot,val;if(alg=_arg.alg,seed=_arg.seed,count=_arg.count,prefix=_arg.prefix,k=''+alg+'-'+seed.toString('base64')+'-'+count,prefix!=null&&(k+='-'+prefix.toString('base64')),(val=_iterated_s2k_cache[k])!=null)return val;for(streamer=streamers[alg](),prefix!=null&&streamer.update(prefix),bigbuf=Buffer.concat(function(){var _i,_results;for(_results=[],i=_i=0;_i<4096;i=++_i)_results.push(seed);return _results}()),tot=0;tot+bigbuf.length<=count;)streamer.update(bigbuf),tot+=bigbuf.length;return rem=count-tot,n=_Mathceil4(rem/seed.length),rembuf=Buffer.concat(function(){var _i,_results;for(_results=[],i=_i=0;0<=n?_i<n:_i>n;i=0<=n?++_i:--_i)_results.push(seed);return _results}()),ret=streamer(rembuf.slice(0,rem)),_iterated_s2k_cache[k]=ret,ret},SecretKeyMaterial=function(){function SecretKeyMaterial(){this.s2k_convention=null,this.s2k=null,this.iv=null,this.cipher=null,this.payload=null}return SecretKeyMaterial.prototype.is_dummy=function(){return this.s2k!=null&&this.s2k.is_dummy()},SecretKeyMaterial.prototype.has_private=function(){return!this.is_dummy()},SecretKeyMaterial.prototype.is_locked=function(){return this.s2k_convention!==C.s2k_convention.none&&!this.is_dummy()},SecretKeyMaterial}(),exports.S2K=S2K,exports.SecretKeyMaterial=SecretKeyMaterial}).call(this)}).call(this,require('buffer').Buffer)},{'../const':5,'../hash':14,'buffer':80,'triplesec':181}],59:[function(require,module,exports){(function(){var C,SignatureEngine,burn,decode,iced,make_esc,processor,__iced_k,__iced_k_noop;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},make_esc=require('iced-error').make_esc,burn=require('./burner').burn,processor=require('./processor'),decode=require('./armor').decode,C=require('../const'),exports.SignatureEngine=SignatureEngine=function(){function SignatureEngine(_arg){this.km=_arg.km}return SignatureEngine.prototype.get_km=function(){return this.km},SignatureEngine.prototype.box=function(msg,cb){var err,out,signing_key,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),out={type:'pgp'},function(_this){return function(__iced_k){return(signing_key=_this.km.find_signing_pgp_key())==null?__iced_k(err=new Error('No signing key found')):void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/sigeng.iced',funcname:'SignatureEngine.box'}),burn({msg:msg,signing_key:signing_key},__iced_deferrals.defer({assign_fn:function(__slot_1,__slot_2){return function(){return err=arguments[0],__slot_1.pgp=arguments[1],__slot_2.raw=arguments[2]}}(out,out),lineno:21})),__iced_deferrals._fulfill()}(function(){return __iced_k(typeof err==='undefined'||err===null?out.armored=out.pgp:void 0)})}}(this)(function(_this){return function(){return cb(err,out)}}(this))},SignatureEngine.prototype.decode=function(armored,cb){var err,msg,mt,_ref;return _ref=decode(armored),err=_ref[0],msg=_ref[1],mt=C.openpgp.message_types,err==null&&msg.type!==mt.generic&&(err=new Error('wrong message type; expected a generic message; got '+msg.type)),cb(err,msg)},SignatureEngine.prototype.unbox=function(msg,cb){var eng,esc,literals,msg,payload,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),esc=make_esc(cb,'SignatureEngine::unbox'),function(_this){return function(__iced_k){return typeof msg==='string'?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/sigeng.iced',funcname:'SignatureEngine.unbox'}),_this.decode(msg,esc(__iced_deferrals.defer({assign_fn:function(){return function(){return msg=arguments[0]}}(),lineno:40}))),__iced_deferrals._fulfill()}(__iced_k):__iced_k()}}(this)(function(_this){return function(){eng=new processor.Message({keyfetch:_this.km}),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/sigeng.iced',funcname:'SignatureEngine.unbox'}),eng.parse_and_process({body:msg.body},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return literals=arguments[0]}}(),lineno:42}))),__iced_deferrals._fulfill()}(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/openpgp/sigeng.iced',funcname:'SignatureEngine.unbox'}),_this._check_result(literals,esc(__iced_deferrals.defer({assign_fn:function(){return function(){return payload=arguments[0]}}(),lineno:43}))),__iced_deferrals._fulfill()})(function(){return cb(null,payload,msg.body)})})}}(this))},SignatureEngine.prototype._check_result=function(literals,cb){var b,err,l,n,payload,sw,_ref;return err=payload=null,(n=literals.length)!==1||(l=literals[0])==null?err=new Error('Expected only one pgp literal; got '+n):(sw=(_ref=l.get_data_signer())==null?void 0:_ref.sig)==null?err=new Error('Expected a signature on the payload message'):this.km.find_pgp_key(b=sw.get_key_id())==null?err=new Error('Failed sanity check; didn\'t have a key for \''+b.toString('hex')+'\''):payload=l.data,cb(err,payload)},SignatureEngine}()}).call(this)},{'../const':5,'./armor':33,'./burner':36,'./processor':57,'iced-error':115,'iced-runtime':118}],60:[function(require,module,exports){(function(Buffer){(function(){var C,calc_checksum,encode_length,ops_to_keyflags;C=require('../const'),exports.make_time_packet=function(d){var b;return d||(d=_Mathfloor3(Date.now()/1000)),b=new Buffer(4),b.writeUInt32BE(d,0),b},exports.calc_checksum=calc_checksum=function(text){var i,ret,_i,_ref;for(ret=0,i=_i=0,_ref=text.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i)ret=(ret+text.readUInt8(i))%65536;return ret},exports.encode_length=encode_length=function(l,five_byte){var ret;return five_byte==null&&(five_byte=!1),ret=null,l>=8384||five_byte?(ret=new Buffer(5),ret.writeUInt8(255,0),ret.writeUInt32BE(l,1)):l<192?(ret=new Buffer(1),ret.writeUInt8(l,0)):l>=192&&l<8384&&(ret=new Buffer(2),ret.writeUInt16BE(l-192+(192<<8),0)),ret},exports.ops_to_keyflags=ops_to_keyflags=function(ops){var out;return out=0,ops&C.ops.encrypt&&(out|=C.openpgp.key_flags.encrypt_comm),ops&C.ops.decrypt&&(out|=C.openpgp.key_flags.encrypt_comm),ops&C.ops.verify&&(out|=C.openpgp.key_flags.sign_data),ops&C.ops.sign&&(out|=C.openpgp.key_flags.sign_data),out}}).call(this)}).call(this,require('buffer').Buffer)},{'../const':5,'buffer':80}],61:[function(require,module,exports){(function(){var Base,C,iced,konst,__iced_k,__iced_k_noop;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},konst=require('../const'),C=konst.openpgp,exports.Base=Base=function(){function Base(_arg){this.packets=_arg.packets,this.keyfetch=_arg.keyfetch,this._sig=null}return Base.prototype._find_signature=function(cb){var err,n;return err=(n=this.packets.length)===1?(this._sig=this.packets[0]).tag===C.packet_tags.signature?null:new Error('Expected a signature packet; but got type='+this.packets[0].tag):new Error('Expected one signature packet; got '+n),cb(err)},Base.prototype._fetch_key=function(cb){var err,i,key_id,keymat,km,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),key_id=this._sig.get_key_id(),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/openpgp/verifier.iced',funcname:'Base._fetch_key'}),_this.keyfetch.fetch([key_id],konst.ops.verify,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],km=arguments[1],i=arguments[2]}}(),lineno:28})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return(typeof err==='undefined'||err===null)&&(keymat=km.find_pgp_key_material(key_id),_this._sig.key=keymat.key,_this._sig.key_manager=km),cb(err)}}(this))},Base}()}).call(this)},{'../const':5,'iced-runtime':118}],62:[function(require,module,exports){(function(Buffer){(function(){var C,SHA512,SRF,bufeq_secure,buffer_to_ui8a,eme_random,emsa_pkcs1_decode,emsa_pkcs1_encode,hash_headers,iced,nbs,__iced_k,__iced_k_noop,_ref;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},SHA512=require('./hash').SHA512,C=require('./const').openpgp,nbs=require('./bn').nbs,_ref=require('./util'),buffer_to_ui8a=_ref.buffer_to_ui8a,bufeq_secure=_ref.bufeq_secure,SRF=require('./rand').SRF,hash_headers={MD5:[48,32,48,12,6,8,42,134,72,134,247,13,2,5,5,0,4,16],SHA1:[48,33,48,9,6,5,43,14,3,2,26,5,0,4,20],SHA224:[48,45,48,13,6,9,96,134,72,1,101,3,4,2,4,5,0,4,28],SHA256:[48,49,48,13,6,9,96,134,72,1,101,3,4,2,1,5,0,4,32],SHA384:[48,65,48,13,6,9,96,134,72,1,101,3,4,2,2,5,0,4,48],SHA512:[48,81,48,13,6,9,96,134,72,1,101,3,4,2,3,5,0,4,64]},exports.emsa_pkcs1_encode=emsa_pkcs1_encode=function(hashed_data,len,opts){var buf,hasher,headers,i,n;return opts==null&&(opts={}),hasher=opts.hasher||SHA512,headers=hash_headers[hasher.algname],n=len-headers.length-3-hasher.output_length,buf=Buffer.concat([new Buffer([0,1]),new Buffer(function(){var _i,_results;for(_results=[],i=_i=0;0<=n?_i<n:_i>n;i=0<=n?++_i:--_i)_results.push(255);return _results}()),new Buffer([0]),new Buffer(headers),hashed_data]),nbs(buffer_to_ui8a(buf),256)},exports.emsa_pkcs1_decode=emsa_pkcs1_decode=function(v,hasher){var err,h,header,i,ret;if(err=ret=null,i=0,v.length<2)err=new Error('signature was way too short: < 2 bytes');else if(v.readUInt16BE(0)!==1)err=new Error('Sig verify error: Didn\'t get two-byte header 0x00 0x01');else{for(i=2;i<v.length&&v.readUInt8(i)===255;)i++;i>=v.length||v.readUInt8(i)!==0?err=new Error('Sig verify error: Missed the 0x0 separator'):(i++,header=hash_headers[hasher.algname],bufeq_secure(new Buffer(header),v.slice(i,header.length+i))?(i+=header.length,h=v.slice(i),h.length===hasher.output_length?ret=h:err=new Error('Sig verify error: trailing garbage in signature')):err=new Error('Sig verify error: missing ASN header for '+hasher.algname))}return[err,ret]},eme_random=function(n,cb){var b,bytes,c,diff,i,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),bytes=[],function(_this){return function(__iced_k){var _results,_while;_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},bytes.length<n?void(diff=n-bytes.length,function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/pad.iced'}),SRF().random_bytes(diff,__iced_deferrals.defer({assign_fn:function(){return function(){return b=arguments[0]}}(),lineno:77})),__iced_deferrals._fulfill()}(function(){var _i;for(i=_i=0;0<=diff?_i<diff:_i>diff;i=0<=diff?++_i:--_i)c=b.readUInt8(i),c!==0&&bytes.push(c);return _next()})):_break()},_while(__iced_k)}}(this)(function(_this){return function(){return cb(new Buffer(bytes))}}(this))},exports.eme_pkcs1_encode=function(v,len,cb){var PS,buf,err,n_randos,ret,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),ret=err=null,function(_this){return function(__iced_k){return v.length>len-11?__iced_k(err=new Error('cannot encrypt message -- it\'s too long!')):void(n_randos=len-3-v.length,function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/pad.iced',funcname:'eme_pkcs1_encode'}),eme_random(n_randos,__iced_deferrals.defer({assign_fn:function(){return function(){return PS=arguments[0]}}(),lineno:93})),__iced_deferrals._fulfill()}(function(){return buf=Buffer.concat([new Buffer([0,2]),PS,new Buffer([0]),v]),__iced_k(ret=nbs(buffer_to_ui8a(buf),256))}))}}(this)(function(_this){return function(){return cb(err,ret)}}(this))},exports.eme_pkcs1_decode=function(v){var err,i,ret;if(err=ret=null,v.length<12)err=new Error('Ciphertext too short, needs to be >= 12 bytes');else if(v.readUInt16BE(0)!==2)err=new Error('Failed to find expected header: 0x00 0x02');else{for(i=2;i<v.length&&v.readUInt8(i)!==0;)i++;i>=v.length?err=new Error('didn\'t get 0x00 seperator octet'):(i++,ret=v.slice(i))}return[err,ret]},exports.ecc_pkcs5_pad_data=function(d){var err,pad_len,ret,v;return err=ret=null,pad_len=40-d.length,pad_len<0?err=new Error('Pad underrun'):(v=function(){var _i,_results;for(_results=[],_i=0;0<=pad_len?_i<pad_len:_i>pad_len;0<=pad_len?_i++:_i--)_results.push(pad_len);return _results}(),ret=Buffer.concat([d,new Buffer(v)])),[err,ret]},exports.ecc_pkcs5_unpad_data=function(buf,data_len){var c,err,i,pad_len,_i,_ref1;if(err=null,pad_len=buf.length-data_len,pad_len<0)err=new Error('Pad length was < 0; pad underrun');else if(buf.length%8!==0)err=new Error('Padded data must be a multiple of 8 bytes long');else for(i=_i=data_len,_ref1=buf.length;data_len<=_ref1?_i<_ref1:_i>_ref1;i=data_len<=_ref1?++_i:--_i)if((c=buf.readUInt8(i))!==pad_len){err=new Error('Got bad PKCS#5 pad character '+c+' at position '+i+'; wanted '+pad_len);break}return err}}).call(this)}).call(this,require('buffer').Buffer)},{'./bn':4,'./const':5,'./hash':14,'./rand':65,'./util':70,'buffer':80,'iced-runtime':118}],63:[function(require,module,exports){(function(){var ASP,Avg,BigInteger,MRF,PrimeFinder,SRF,Timer,fermat2_test,fta,iced,make_esc,miller_rabin,naive_is_prime,native_rng,nbi,nbs,nbv,prime_search,prng,quickmod,random_prime,small_primes,_MR_inner,_MR_small_check,__iced_k,__iced_k_noop,_ref,_ref1;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},_ref=require('bn'),nbv=_ref.nbv,nbi=_ref.nbi,BigInteger=_ref.BigInteger,prng=require('triplesec').prng,native_rng=prng.native_rng,small_primes=require('./primes').small_primes,make_esc=require('iced-error').make_esc,ASP=require('./util').ASP,nbs=require('./bn').nbs,_ref1=require('./rand'),MRF=_ref1.MRF,SRF=_ref1.SRF,Timer=function(){function Timer(){this.start=Date.now()}return Timer.prototype.stop=function(){return Date.now()-this.start},Timer}(),Avg=function(){function Avg(){this.tot=0,this.n=0}return Avg.prototype.start=function(){return this._t=Date.now()},Avg.prototype.stop=function(){var s;return s=Date.now()-this._t,void 0,this.tot+=s,this.n++},Avg.prototype.avg=function(){return this.tot/this.n},Avg}(),quickmod=function(p,d){return p.modInt(d)},fta=new Avg,fermat2_test=function(n){var Bl,bl,i,ret,t,_i;for(t=nbv(1),bl=n.bitLength(),bl--,Bl=n.byteLength(),i=_i=bl;bl<=0?_i<=0:_i>=0;i=bl<=0?++_i:--_i)t=t.square(),t.byteLength()>Bl&&(t=t.mod(n)),n.testBit(i)&&(t=t.shiftLeft(1));return t.compareTo(n)>0&&(t=t.mod(n)),ret=t.compareTo(nbv(2))===0,ret},_MR_inner=function(_arg){var a,j,p,p1,r,s,y,_i,_ref2;if(s=_arg.s,r=_arg.r,p=_arg.p,p1=_arg.p1,a=MRF().random_zn(p),y=a.modPow(r,p),y.compareTo(BigInteger.ONE)!==0)for(j=_i=_ref2=s-1;_ref2<=0?_i<=0:_i>=0;j=_ref2<=0?++_i:--_i)if(y.compareTo(p1)!==0){if(j===0)return!1;if(y=y.square().mod(p),y.compareTo(BigInteger.ONE)===0)return!1}return!0},_MR_small_check=function(_arg){var p,_ref2;return p=_arg.p,!(p.compareTo(BigInteger.ZERO)<=0)&&(p.compareTo(nbv(7))<=0?(_ref2=p.intValue())===2||_ref2===3||_ref2===5||_ref2===7:!!p.testBit(0))},miller_rabin=function(_arg,cb){var asp,esc,i,iter,p,p1,r,ret,s,___iced_passed_deferral,__iced_deferrals,__iced_k,_begin,_end,_positive;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),p=_arg.p,iter=_arg.iter,asp=_arg.asp,asp||(asp=new ASP({})),iter||(iter=10),esc=make_esc(cb,'miller_rabin'),ret=_MR_small_check({p:p}),function(_this){return function(__iced_k){return ret?void(p1=p.subtract(BigInteger.ONE),s=p1.getLowestSetBit(),r=p1.shiftRight(s),ret=!0,function(__iced_k){var _i,_results,_while;i=0,_begin=0,_end=iter,_positive=_end>_begin,_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _positive?i+=1:i-=1,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},_positive===!0&&i>=iter||_positive===!1&&i<=iter?_break():void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/primegen.iced'}),asp.progress({what:'mr',i:i,total:iter,p:p},esc(__iced_deferrals.defer({lineno:122}))),__iced_deferrals._fulfill()}(function(){(function(__iced_k){return _MR_inner({s:s,r:r,p:p,p1:p1})?__iced_k():void(ret=!1,function(__iced_k){_break()}(__iced_k))})(_next)})},_while(__iced_k)}(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/primegen.iced'}),asp.progress({what:'mr',i:iter,total:iter,p:p},esc(__iced_deferrals.defer({lineno:127}))),__iced_deferrals._fulfill()})(__iced_k)})):__iced_k()}}(this)(function(_this){return function(){return cb(null,ret)}}(this))},PrimeFinder=function(){function PrimeFinder(p,sieve){this.p=p,this.sieve=sieve,this.inc=0,this.maxinc=-1,this.sievepos=quickmod(this.p,this.sieve.length),this.calcmods()}return PrimeFinder.prototype.getp=function(){return this.p},PrimeFinder.prototype.setmax=function(i){if(this.maxinc!==-1)throw new Error('can only setmax() once');return this.maxinc=i},PrimeFinder.prototype.calcmods=function(){var sp;return this.p=this.p.add(nbv(this.inc)),this.maxinc!==-1&&(this.maxinc-=this.inc),this.inc=0,this.mods=function(){var _i,_len,_results;for(_results=[],_i=0,_len=small_primes.length;_i<_len;_i++)sp=small_primes[_i],_results.push(quickmod(this.p,sp));return _results}.call(this)},PrimeFinder.prototype.decrement_mods_find_divisor=function(){var i,sp,_i,_len;for(i=_i=0,_len=small_primes.length;_i<_len;i=++_i)for(sp=small_primes[i];this.mods[i]+this.inc>=sp;)if(this.mods[i]-=sp,this.mods[i]+this.inc===0)return!0;return!1},PrimeFinder.prototype.next_weak=function(){for(var step;!0;){if(step=this.sieve[this.sievepos],this.sievepos=(this.sievepos+step)%this.sieve.length,this.inc+=step,this.inc>this.maxinc&&this.maxinc>0)return this.tmp=nbv(0),this.tmp;if(this.inc<0&&this.calcmods(),!this.decrement_mods_find_divisor())return this.tmp=this.p.add(nbv(this.inc)),this.tmp}},PrimeFinder.prototype.next_fermat=function(){for(;!0;)if(this.next_weak(),!this.tmp||fermat2_test(this.tmp))return this.tmp},PrimeFinder.prototype.next_strong=function(iter){for(iter==null&&(iter=32);!0;)if(this.next_weak(),!this.tmp||fermat2_test(this.tmp)&&probab_prime(this.tmp,iter))return this.tmp},PrimeFinder}(),prime_search=function(_arg,cb){var asp,esc,i,is_prime,iters,p,pf,pp,pvec,range,ret,sieve,start,tmp,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),start=_arg.start,range=_arg.range,sieve=_arg.sieve,asp=_arg.asp,iters=_arg.iters,iters||(iters=20),pf=new PrimeFinder(start,sieve),pf.setmax(range),pvec=function(){var _results;for(_results=[];(pp=pf.next_weak()).compareTo(BigInteger.ZERO)>0;)_results.push(pp);return _results}(),esc=make_esc(cb,'prime_search'),ret=null,function(_this){return function(__iced_k){var _results,_while;_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},pvec.length&&ret==null?void(i=MRF().random_word()%pvec.length,p=pvec[i],function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/primegen.iced'}),asp.progress({what:'fermat',p:p},esc(__iced_deferrals.defer({lineno:226}))),__iced_deferrals._fulfill()}(function(){(function(__iced_k){return fermat2_test(p)?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/primegen.iced'}),miller_rabin({p:p,iters:iters,asp:asp},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return is_prime=arguments[0]}}(),lineno:229}))),__iced_deferrals._fulfill()}(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/primegen.iced'}),asp.progress({what:'passed_mr',p:p},esc(__iced_deferrals.defer({lineno:230}))),__iced_deferrals._fulfill()})(function(){return __iced_k(is_prime?ret=p:asp.progress({what:'failed_mr',p:p}))})}):__iced_k()})(function(){return tmp=pvec.pop(),_next(i<pvec.length?pvec[i]=tmp:void 0)})})):_break()},_while(__iced_k)}}(this)(function(_this){return function(){return ret==null&&(ret=nbv(0)),cb(null,ret)}}(this))},random_prime=function(_arg,cb){var asp,e,esc,go,iters,nbits,p,range,sieve,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),nbits=_arg.nbits,iters=_arg.iters,asp=_arg.asp,e=_arg.e,sieve=[1,2],go=!0,esc=make_esc(cb,'random_prime'),range=nbits,p=null,function(_this){return function(__iced_k){var _results,_while;_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},go?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/primegen.iced'}),SRF().random_nbit(nbits,__iced_deferrals.defer({assign_fn:function(){return function(){return p=arguments[0]}}(),lineno:262})),__iced_deferrals._fulfill()}(function(){p=p.setBit(0).setBit(nbits-1).setBit(nbits-2),function(__iced_k){return e==null||p.subtract(BigInteger.ONE).gcd(e).compareTo(BigInteger.ONE)===0?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/primegen.iced'}),asp.progress({what:'guess',p:p},esc(__iced_deferrals.defer({lineno:265}))),__iced_deferrals._fulfill()}(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/primegen.iced'}),prime_search({start:p,range:range,sieve:sieve,asp:asp,iters:iters},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return p=arguments[0]}}(),lineno:266}))),__iced_deferrals._fulfill()})(function(){return __iced_k(go=p==null||p.compareTo(BigInteger.ZERO)===0)})}):__iced_k()}(_next)}):_break()},_while(__iced_k)}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/primegen.iced'}),asp.progress({what:'found',p:p},esc(__iced_deferrals.defer({lineno:269}))),__iced_deferrals._fulfill()})(function(){return cb(null,p)})}}(this))},exports.naive_is_prime=naive_is_prime=function(n){var biggest,p,_i,_len;for(biggest=_Mathfloor3(_Mathsqrt(n)),_i=0,_len=small_primes.length;_i<_len;_i++){if(p=small_primes[_i],p>biggest)return!0;if(n%p===0)return!1}return!1},exports.fermat2_test=fermat2_test,exports.nbs=nbs,exports.small_primes=small_primes,exports.miller_rabin=miller_rabin,exports.random_prime=random_prime}).call(this)},{'./bn':4,'./primes':64,'./rand':65,'./util':70,'bn':71,'iced-error':115,'iced-runtime':118,'triplesec':181}],64:[function(require,module,exports){(function(){exports.small_primes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571,3581,3583,3593,3607,3613,3617,3623,3631,3637,3643,3659,3671,3673,3677,3691,3697,3701,3709,3719,3727,3733,3739,3761,3767,3769,3779,3793,3797,3803,3821,3823,3833,3847,3851,3853,3863,3877,3881,3889,3907,3911,3917,3919,3923,3929,3931,3943,3947,3967,3989,4001,4003,4007,4013,4019,4021,4027,4049,4051,4057,4073,4079,4091,4093,4099,4111,4127,4129,4133,4139,4153,4157,4159,4177,4201,4211,4217,4219,4229,4231,4241,4243,4253,4259,4261,4271,4273,4283,4289,4297,4327,4337,4339,4349,4357,4363,4373,4391,4397,4409,4421,4423,4441,4447,4451,4457,4463,4481,4483,4493,4507,4513,4517,4519,4523,4547,4549,4561,4567,4583,4591,4597,4603,4621,4637,4639,4643,4649,4651,4657,4663,4673,4679,4691,4703,4721,4723,4729,4733,4751,4759,4783,4787,4789,4793,4799,4801,4813,4817,4831,4861,4871,4877,4889,4903,4909,4919,4931,4933,4937,4943,4951,4957,4967,4969,4973,4987,4993,4999,5003,5009,5011,5021,5023,5039,5051,5059,5077,5081,5087,5099,5101,5107,5113,5119,5147,5153,5167,5171,5179,5189,5197,5209,5227,5231,5233,5237,5261,5273,5279,5281,5297,5303,5309,5323,5333,5347,5351,5381,5387,5393,5399,5407,5413,5417,5419,5431,5437,5441,5443,5449,5471,5477,5479,5483,5501,5503,5507,5519,5521,5527,5531,5557,5563,5569,5573,5581,5591,5623,5639,5641,5647,5651,5653,5657,5659,5669,5683,5689,5693,5701,5711,5717,5737,5741,5743,5749,5779,5783,5791,5801,5807,5813,5821,5827,5839,5843,5849,5851,5857,5861,5867,5869,5879,5881,5897,5903,5923,5927,5939,5953,5981,5987,6007,6011,6029,6037,6043,6047,6053,6067,6073,6079,6089,6091,6101,6113,6121,6131,6133,6143,6151,6163,6173,6197,6199,6203,6211,6217,6221,6229,6247,6257,6263,6269,6271,6277,6287,6299,6301,6311,6317,6323,6329,6337,6343,6353,6359,6361,6367,6373,6379,6389,6397,6421,6427,6449,6451,6469,6473,6481,6491,6521,6529,6547,6551,6553,6563,6569,6571,6577,6581,6599,6607,6619,6637,6653,6659,6661,6673,6679,6689,6691,6701,6703,6709,6719,6733,6737,6761,6763,6779,6781,6791,6793,6803,6823,6827,6829,6833,6841,6857,6863,6869,6871,6883,6899,6907,6911,6917,6947,6949,6959,6961,6967,6971,6977,6983,6991,6997,7001,7013,7019,7027,7039,7043,7057,7069,7079,7103,7109,7121,7127,7129,7151,7159,7177,7187,7193,7207,7211,7213,7219,7229,7237,7243,7247,7253,7283,7297,7307,7309,7321,7331,7333,7349,7351,7369,7393,7411,7417,7433,7451,7457,7459,7477,7481,7487,7489,7499,7507,7517,7523,7529,7537,7541,7547,7549,7559,7561,7573,7577,7583,7589,7591,7603,7607,7621,7639,7643,7649,7669,7673,7681,7687,7691,7699,7703,7717,7723,7727,7741,7753,7757,7759,7789,7793,7817,7823,7829,7841,7853,7867,7873,7877,7879,7883,7901,7907,7919,7927,7933,7937,7949,7951,7963,7993,8009,8011,8017,8039,8053,8059,8069,8081,8087,8089,8093,8101,8111,8117,8123,8147,8161,8167,8171,8179,8191,8209,8219,8221,8231,8233,8237,8243,8263,8269,8273,8287,8291,8293,8297,8311,8317,8329,8353,8363,8369,8377,8387,8389,8419,8423,8429,8431,8443,8447,8461,8467,8501,8513,8521,8527,8537,8539,8543,8563,8573,8581,8597,8599,8609,8623,8627,8629,8641,8647,8663,8669,8677,8681,8689,8693,8699,8707,8713,8719,8731,8737,8741,8747,8753,8761,8779,8783,8803,8807,8819,8821,8831,8837,8839,8849,8861,8863,8867,8887,8893,8923,8929,8933,8941,8951,8963,8969,8971,8999,9001,9007,9011,9013,9029,9041,9043,9049,9059,9067,9091,9103,9109,9127,9133,9137,9151,9157,9161,9173,9181,9187,9199,9203,9209,9221,9227,9239,9241,9257,9277,9281,9283,9293,9311,9319,9323,9337,9341,9343,9349,9371,9377,9391,9397,9403,9413,9419,9421,9431,9433,9437,9439,9461,9463,9467,9473,9479,9491,9497,9511,9521,9533,9539,9547,9551,9587,9601,9613,9619,9623,9629,9631,9643,9649,9661,9677,9679,9689,9697,9719,9721,9733,9739,9743,9749,9767,9769,9781,9787,9791,9803,9811,9817,9829,9833,9839,9851,9857,9859,9871,9883,9887,9901,9907,9923,9929,9931,9941,9949,9967,9973,10007,10009,10037,10039,10061,10067,10069,10079,10091,10093,10099,10103,10111,10133,10139,10141,10151,10159,10163,10169,10177,10181,10193,10211,10223,10243,10247,10253,10259,10267,10271,10273,10289,10301,10303,10313,10321,10331,10333,10337,10343,10357,10369,10391,10399,10427,10429,10433,10453,10457,10459,10463,10477,10487,10499,10501,10513,10529,10531,10559,10567,10589,10597,10601,10607,10613,10627,10631,10639,10651,10657,10663,10667,10687,10691,10709,10711,10723,10729,10733,10739,10753,10771,10781,10789,10799,10831,10837,10847,10853,10859,10861,10867,10883,10889,10891,10903,10909,10937,10939,10949,10957,10973,10979,10987,10993,11003,11027,11047,11057,11059,11069,11071,11083,11087,11093,11113,11117,11119,11131,11149,11159,11161,11171,11173,11177,11197,11213,11239,11243,11251,11257,11261,11273,11279,11287,11299,11311,11317,11321,11329,11351,11353,11369,11383,11393,11399,11411,11423,11437,11443,11447,11467,11471,11483,11489,11491,11497,11503,11519,11527,11549,11551,11579,11587,11593,11597,11617,11621,11633,11657,11677,11681,11689,11699,11701,11717,11719,11731,11743,11777,11779,11783,11789,11801,11807,11813,11821,11827,11831,11833,11839,11863,11867,11887,11897,11903,11909,11923,11927,11933,11939,11941,11953,11959,11969,11971,11981,11987,12007,12011,12037,12041,12043,12049,12071,12073,12097,12101,12107,12109,12113,12119,12143,12149,12157,12161,12163,12197,12203,12211,12227,12239,12241,12251,12253,12263,12269,12277,12281,12289,12301,12323,12329,12343,12347,12373,12377,12379,12391,12401,12409,12413,12421,12433,12437,12451,12457,12473,12479,12487,12491,12497,12503,12511,12517,12527,12539,12541,12547,12553,12569,12577,12583,12589,12601,12611,12613,12619,12637,12641,12647,12653,12659,12671,12689,12697,12703,12713,12721,12739,12743,12757,12763,12781,12791,12799,12809,12821,12823,12829,12841,12853,12889,12893,12899,12907,12911,12917,12919,12923,12941,12953,12959,12967,12973,12979,12983,13001,13003,13007,13009,13033,13037,13043,13049,13063,13093,13099,13103,13109,13121,13127,13147,13151,13159,13163,13171,13177,13183,13187,13217,13219,13229,13241,13249,13259,13267,13291,13297,13309,13313,13327,13331,13337,13339,13367,13381,13397,13399,13411,13417,13421,13441,13451,13457,13463,13469,13477,13487,13499,13513,13523,13537,13553,13567,13577,13591,13597,13613,13619,13627,13633,13649,13669,13679,13681,13687,13691,13693,13697,13709,13711,13721,13723,13729,13751,13757,13759,13763,13781,13789,13799,13807,13829,13831,13841,13859,13873,13877,13879,13883,13901,13903,13907,13913,13921,13931,13933,13963,13967,13997,13999,14009,14011,14029,14033,14051,14057,14071,14081,14083,14087,14107,14143,14149,14153,14159,14173,14177,14197,14207,14221,14243,14249,14251,14281,14293,14303,14321,14323,14327,14341,14347,14369,14387,14389,14401,14407,14411,14419,14423,14431,14437,14447,14449,14461,14479,14489,14503,14519,14533,14537,14543,14549,14551,14557,14561,14563,14591,14593,14621,14627,14629,14633,14639,14653,14657,14669,14683,14699,14713,14717,14723,14731,14737,14741,14747,14753,14759,14767,14771,14779,14783,14797,14813,14821,14827,14831,14843,14851,14867,14869,14879,14887,14891,14897,14923,14929,14939,14947,14951,14957,14969,14983,15013,15017,15031,15053,15061,15073,15077,15083,15091,15101,15107,15121,15131,15137,15139,15149,15161,15173,15187,15193,15199,15217,15227,15233,15241,15259,15263,15269,15271,15277,15287,15289,15299,15307,15313,15319,15329,15331,15349,15359,15361,15373,15377,15383,15391,15401,15413,15427,15439,15443,15451,15461,15467,15473,15493,15497,15511,15527,15541,15551,15559,15569,15581,15583,15601,15607,15619,15629,15641,15643,15647,15649,15661,15667,15671,15679,15683,15727,15731,15733,15737,15739,15749,15761,15767,15773,15787,15791,15797,15803,15809,15817,15823,15859,15877,15881,15887,15889,15901,15907,15913,15919,15923,15937,15959,15971,15973,15991,16001,16007,16033,16057,16061,16063,16067,16069,16073,16087,16091,16097,16103,16111,16127,16139,16141,16183,16187,16189,16193,16217,16223,16229,16231,16249,16253,16267,16273,16301,16319,16333,16339,16349,16361,16363,16369,16381,16411,16417,16421,16427,16433,16447,16451,16453,16477,16481,16487,16493,16519,16529,16547,16553,16561,16567,16573,16603,16607,16619,16631,16633,16649,16651,16657,16661,16673,16691,16693,16699,16703,16729,16741,16747,16759,16763,16787,16811,16823,16829,16831,16843,16871,16879,16883,16889,16901,16903,16921,16927,16931,16937,16943,16963,16979,16981,16987,16993,17011,17021,17027,17029,17033,17041,17047,17053,17077,17093,17099,17107,17117,17123,17137,17159,17167,17183,17189,17191,17203,17207,17209,17231,17239,17257,17291,17293,17299,17317,17321,17327,17333,17341,17351,17359,17377,17383,17387,17389,17393,17401,17417,17419,17431,17443,17449,17467,17471,17477,17483,17489,17491,17497,17509,17519,17539,17551,17569,17573,17579,17581,17597,17599,17609,17623,17627,17657,17659,17669,17681,17683,17707,17713,17729,17737,17747,17749,17761,17783,17789,17791,17807,17827,17837,17839,17851,17863,17881,17891,17903,17909,17911,17921,17923,17929,17939,17957,17959,17971,17977,17981,17987,17989,18013,18041,18043,18047,18049,18059,18061,18077,18089,18097,18119,18121,18127,18131,18133,18143,18149,18169,18181,18191,18199,18211,18217,18223,18229,18233,18251,18253,18257,18269,18287,18289,18301,18307,18311,18313,18329,18341,18353,18367,18371,18379,18397,18401,18413,18427,18433,18439,18443,18451,18457,18461,18481,18493,18503,18517,18521,18523,18539,18541,18553,18583,18587,18593,18617,18637,18661,18671,18679,18691,18701,18713,18719,18731,18743,18749,18757,18773,18787,18793,18797,18803,18839,18859,18869,18899,18911,18913,18917,18919,18947,18959,18973,18979,19001,19009,19013,19031,19037,19051,19069,19073,19079,19081,19087,19121,19139,19141,19157,19163,19181,19183,19207,19211,19213,19219,19231,19237,19249,19259,19267,19273,19289,19301,19309,19319,19333,19373,19379,19381,19387,19391,19403,19417,19421,19423,19427,19429,19433,19441,19447,19457,19463,19469,19471,19477,19483,19489,19501,19507,19531,19541,19543,19553,19559,19571,19577,19583,19597,19603,19609,19661,19681,19687,19697,19699,19709,19717,19727,19739,19751,19753,19759,19763,19777,19793,19801,19813,19819,19841,19843,19853,19861,19867,19889,19891,19913,19919,19927,19937,19949,19961,19963,19973,19979,19991,19993,19997,20011,20021,20023,20029,20047,20051,20063,20071,20089,20101,20107,20113,20117,20123,20129,20143,20147,20149,20161,20173,20177,20183,20201,20219,20231,20233,20249,20261,20269,20287,20297,20323,20327,20333,20341,20347,20353,20357,20359,20369,20389,20393,20399,20407,20411,20431,20441,20443,20477,20479,20483,20507,20509,20521,20533,20543,20549,20551,20563,20593,20599,20611,20627,20639,20641,20663,20681,20693,20707,20717,20719,20731,20743,20747,20749,20753,20759,20771,20773,20789,20807,20809,20849,20857,20873,20879,20887,20897,20899,20903,20921,20929,20939,20947,20959,20963,20981,20983,21001,21011,21013,21017,21019,21023,21031,21059,21061,21067,21089,21101,21107,21121,21139,21143,21149,21157,21163,21169,21179,21187,21191,21193,21211,21221,21227,21247,21269,21277,21283,21313,21317,21319,21323,21341,21347,21377,21379,21383,21391,21397,21401,21407,21419,21433,21467,21481,21487,21491,21493,21499,21503,21517,21521,21523,21529,21557,21559,21563,21569,21577,21587,21589,21599,21601,21611,21613,21617,21647,21649,21661,21673,21683,21701,21713,21727,21737,21739,21751,21757,21767,21773,21787,21799,21803,21817,21821,21839,21841,21851,21859,21863,21871,21881,21893,21911,21929,21937,21943,21961,21977,21991,21997,22003,22013,22027,22031,22037,22039,22051,22063,22067,22073,22079,22091,22093,22109,22111,22123,22129,22133,22147,22153,22157,22159,22171,22189,22193,22229,22247,22259,22271,22273,22277,22279,22283,22291,22303,22307,22343,22349,22367,22369,22381,22391,22397,22409,22433,22441,22447,22453,22469,22481,22483,22501,22511,22531,22541,22543,22549,22567,22571,22573,22613,22619,22621,22637,22639,22643,22651,22669,22679,22691,22697,22699,22709,22717,22721,22727,22739,22741,22751,22769,22777,22783,22787,22807,22811,22817,22853,22859,22861,22871,22877,22901,22907,22921,22937,22943,22961,22963,22973,22993,23003,23011,23017,23021,23027,23029,23039,23041,23053,23057,23059,23063,23071,23081,23087,23099,23117,23131,23143,23159,23167,23173,23189,23197,23201,23203,23209,23227,23251,23269,23279,23291,23293,23297,23311,23321,23327,23333,23339,23357,23369,23371,23399,23417,23431,23447,23459,23473,23497,23509,23531,23537,23539,23549,23557,23561,23563,23567,23581,23593,23599,23603,23609,23623,23627,23629,23633,23663,23669,23671,23677,23687,23689,23719,23741,23743,23747,23753,23761,23767,23773,23789,23801,23813,23819,23827,23831,23833,23857,23869,23873,23879,23887,23893,23899,23909,23911,23917,23929,23957,23971,23977,23981,23993,24001,24007,24019,24023,24029,24043,24049,24061,24071,24077,24083,24091,24097,24103,24107,24109,24113,24121,24133,24137,24151,24169,24179,24181,24197,24203,24223,24229,24239,24247,24251,24281,24317,24329,24337,24359,24371,24373,24379,24391,24407,24413,24419,24421,24439,24443,24469,24473,24481,24499,24509,24517,24527,24533,24547,24551,24571,24593,24611,24623,24631,24659,24671,24677,24683,24691,24697,24709,24733,24749,24763,24767,24781,24793,24799,24809,24821,24841,24847,24851,24859,24877,24889,24907,24917,24919,24923,24943,24953,24967,24971,24977,24979,24989,25013,25031,25033,25037,25057,25073,25087,25097,25111,25117,25121,25127,25147,25153,25163,25169,25171,25183,25189,25219,25229,25237,25243,25247,25253,25261,25301,25303,25307,25309,25321,25339,25343,25349,25357,25367,25373,25391,25409,25411,25423,25439,25447,25453,25457,25463,25469,25471,25523,25537,25541,25561,25577,25579,25583,25589,25601,25603,25609,25621,25633,25639,25643,25657,25667,25673,25679,25693,25703,25717,25733,25741,25747,25759,25763,25771,25793,25799,25801,25819,25841,25847,25849,25867,25873,25889,25903,25913,25919,25931,25933,25939,25943,25951,25969,25981,25997,25999,26003,26017,26021,26029,26041,26053,26083,26099,26107,26111,26113,26119,26141,26153,26161,26171,26177,26183,26189,26203,26209,26227,26237,26249,26251,26261,26263,26267,26293,26297,26309,26317,26321,26339,26347,26357,26371,26387,26393,26399,26407,26417,26423,26431,26437,26449,26459,26479,26489,26497,26501,26513,26539,26557,26561,26573,26591,26597,26627,26633,26641,26647,26669,26681,26683,26687,26693,26699,26701,26711,26713,26717,26723,26729,26731,26737,26759,26777,26783,26801,26813,26821,26833,26839,26849,26861,26863,26879,26881,26891,26893,26903,26921,26927,26947,26951,26953,26959,26981,26987,26993,27011,27017,27031,27043,27059,27061,27067,27073,27077,27091,27103,27107,27109,27127,27143,27179,27191,27197,27211,27239,27241,27253,27259,27271,27277,27281,27283,27299,27329,27337,27361,27367,27397,27407,27409,27427,27431,27437,27449,27457,27479,27481,27487,27509,27527,27529,27539,27541,27551,27581,27583,27611,27617,27631,27647,27653,27673,27689,27691,27697,27701,27733,27737,27739,27743,27749,27751,27763,27767,27773,27779,27791,27793,27799,27803,27809,27817,27823,27827,27847,27851,27883,27893,27901,27917,27919,27941,27943,27947,27953,27961,27967,27983,27997,28001,28019,28027,28031,28051,28057,28069,28081,28087,28097,28099,28109,28111,28123,28151,28163,28181,28183,28201,28211,28219,28229,28277,28279,28283,28289,28297,28307,28309,28319,28349,28351,28387,28393,28403,28409,28411,28429,28433,28439,28447,28463,28477,28493,28499,28513,28517,28537,28541,28547,28549,28559,28571,28573,28579,28591,28597,28603,28607,28619,28621,28627,28631,28643,28649,28657,28661,28663,28669,28687,28697,28703,28711,28723,28729,28751,28753,28759,28771,28789,28793,28807,28813,28817,28837,28843,28859,28867,28871,28879,28901,28909,28921,28927,28933,28949,28961,28979,29009,29017,29021,29023,29027,29033,29059,29063,29077,29101,29123,29129,29131,29137,29147,29153,29167,29173,29179,29191,29201,29207,29209,29221,29231,29243,29251,29269,29287,29297,29303,29311,29327,29333,29339,29347,29363,29383,29387,29389,29399,29401,29411,29423,29429,29437,29443,29453,29473,29483,29501,29527,29531,29537,29567,29569,29573,29581,29587,29599,29611,29629,29633,29641,29663,29669,29671,29683,29717,29723,29741,29753,29759,29761,29789,29803,29819,29833,29837,29851,29863,29867,29873,29879,29881,29917,29921,29927,29947,29959,29983,29989,30011,30013,30029,30047,30059,30071,30089,30091,30097,30103,30109,30113,30119,30133,30137,30139,30161,30169,30181,30187,30197,30203,30211,30223,30241,30253,30259,30269,30271,30293,30307,30313,30319,30323,30341,30347,30367,30389,30391,30403,30427,30431,30449,30467,30469,30491,30493,30497,30509,30517,30529,30539,30553,30557,30559,30577,30593,30631,30637,30643,30649,30661,30671,30677,30689,30697,30703,30707,30713,30727,30757,30763,30773,30781,30803,30809,30817,30829,30839,30841,30851,30853,30859,30869,30871,30881,30893,30911,30931,30937,30941,30949,30971,30977,30983,31013,31019,31033,31039,31051,31063,31069,31079,31081,31091,31121,31123,31139,31147,31151,31153,31159,31177,31181,31183,31189,31193,31219,31223,31231,31237,31247,31249,31253,31259,31267,31271,31277,31307,31319,31321,31327,31333,31337,31357,31379,31387,31391,31393,31397,31469,31477,31481,31489,31511,31513,31517,31531,31541,31543,31547,31567,31573,31583,31601,31607,31627,31643,31649,31657,31663,31667,31687,31699,31721,31723,31727,31729,31741,31751,31769,31771,31793,31799,31817,31847,31849,31859,31873,31883,31891,31907,31957,31963,31973,31981,31991,32003,32009,32027,32029,32051,32057,32059,32063,32069,32077,32083,32089,32099,32117,32119,32141,32143,32159,32173,32183,32189,32191,32203,32213,32233,32237,32251,32257,32261,32297,32299,32303,32309,32321,32323,32327,32341,32353,32359,32363,32369,32371,32377,32381,32401,32411,32413,32423,32429,32441,32443,32467,32479,32491,32497,32503,32507,32531,32533,32537,32561,32563,32569,32573,32579,32587,32603,32609,32611,32621,32633,32647,32653,32687,32693,32707,32713,32717,32719,32749,32771,32779,32783,32789,32797,32801,32803,32831,32833,32839,32843,32869,32887,32909,32911,32917,32933,32939,32941,32957,32969,32971,32983,32987,32993,32999,33013,33023,33029,33037,33049,33053,33071,33073,33083,33091,33107,33113,33119,33149,33151,33161,33179,33181,33191,33199,33203,33211,33223,33247,33287,33289,33301,33311,33317,33329,33331,33343,33347,33349,33353,33359,33377,33391,33403,33409,33413,33427,33457,33461,33469,33479,33487,33493,33503,33521,33529,33533,33547,33563,33569,33577,33581,33587,33589,33599,33601,33613,33617,33619,33623,33629,33637,33641,33647,33679,33703,33713,33721,33739,33749,33751,33757,33767,33769,33773,33791,33797,33809,33811,33827,33829,33851,33857,33863,33871,33889,33893,33911,33923,33931,33937,33941,33961,33967,33997,34019,34031,34033,34039,34057,34061,34123,34127,34129,34141,34147,34157,34159,34171,34183,34211,34213,34217,34231,34253,34259,34261,34267,34273,34283,34297,34301,34303,34313,34319,34327,34337,34351,34361,34367,34369,34381,34403,34421,34429,34439,34457,34469,34471,34483,34487,34499,34501,34511,34513,34519,34537,34543,34549,34583,34589,34591,34603,34607,34613,34631,34649,34651,34667,34673,34679,34687,34693,34703,34721,34729,34739,34747,34757,34759,34763,34781,34807,34819,34841,34843,34847,34849,34871,34877,34883,34897,34913,34919,34939,34949,34961,34963,34981,35023,35027,35051,35053,35059,35069,35081,35083,35089,35099,35107,35111,35117,35129,35141,35149,35153,35159,35171,35201,35221,35227,35251,35257,35267,35279,35281,35291,35311,35317,35323,35327,35339,35353,35363,35381,35393,35401,35407,35419,35423,35437,35447,35449,35461,35491,35507,35509,35521,35527,35531,35533,35537,35543,35569,35573,35591,35593,35597,35603,35617,35671,35677,35729,35731,35747,35753,35759,35771,35797,35801,35803,35809,35831,35837,35839,35851,35863,35869,35879,35897,35899,35911,35923,35933,35951,35963,35969,35977,35983,35993,35999,36007,36011,36013,36017,36037,36061,36067,36073,36083,36097,36107,36109,36131,36137,36151,36161,36187,36191,36209,36217,36229,36241,36251,36263,36269,36277,36293,36299,36307,36313,36319,36341,36343,36353,36373,36383,36389,36433,36451,36457,36467,36469,36473,36479,36493,36497,36523,36527,36529,36541,36551,36559,36563,36571,36583,36587,36599,36607,36629,36637,36643,36653,36671,36677,36683,36691,36697,36709,36713,36721,36739,36749,36761,36767,36779,36781,36787,36791,36793,36809,36821,36833,36847,36857,36871,36877,36887,36899,36901,36913,36919,36923,36929,36931,36943,36947,36973,36979,36997,37003,37013,37019,37021,37039,37049,37057,37061,37087,37097,37117,37123,37139,37159,37171,37181,37189,37199,37201,37217,37223,37243,37253,37273,37277,37307,37309,37313,37321,37337,37339,37357,37361,37363,37369,37379,37397,37409,37423,37441,37447,37463,37483,37489,37493,37501,37507,37511,37517,37529,37537,37547,37549,37561,37567,37571,37573,37579,37589,37591,37607,37619,37633,37643,37649,37657,37663,37691,37693,37699,37717,37747,37781,37783,37799,37811,37813,37831,37847,37853,37861,37871,37879,37889,37897,37907,37951,37957,37963,37967,37987,37991,37993,37997,38011,38039,38047,38053,38069,38083,38113,38119,38149,38153,38167,38177,38183,38189,38197,38201,38219,38231,38237,38239,38261,38273,38281,38287,38299,38303,38317,38321,38327,38329,38333,38351,38371,38377,38393,38431,38447,38449,38453,38459,38461,38501,38543,38557,38561,38567,38569,38593,38603,38609,38611,38629,38639,38651,38653,38669,38671,38677,38693,38699,38707,38711,38713,38723,38729,38737,38747,38749,38767,38783,38791,38803,38821,38833,38839,38851,38861,38867,38873,38891,38903,38917,38921,38923,38933,38953,38959,38971,38977,38993,39019,39023,39041,39043,39047,39079,39089,39097,39103,39107,39113,39119,39133,39139,39157,39161,39163,39181,39191,39199,39209,39217,39227,39229,39233,39239,39241,39251,39293,39301,39313,39317,39323,39341,39343,39359,39367,39371,39373,39383,39397,39409,39419,39439,39443,39451,39461,39499,39503,39509,39511,39521,39541,39551,39563,39569,39581,39607,39619,39623,39631,39659,39667,39671,39679,39703,39709,39719,39727,39733,39749,39761,39769,39779,39791,39799,39821,39827,39829,39839,39841,39847,39857,39863,39869,39877,39883,39887,39901,39929,39937,39953,39971,39979,39983,39989,40009,40013,40031,40037,40039,40063,40087,40093,40099,40111,40123,40127,40129,40151,40153,40163,40169,40177,40189,40193,40213,40231,40237,40241,40253,40277,40283,40289,40343,40351,40357,40361,40387,40423,40427,40429,40433,40459,40471,40483,40487,40493,40499,40507,40519,40529,40531,40543,40559,40577,40583,40591,40597,40609,40627,40637,40639,40693,40697,40699,40709,40739,40751,40759,40763,40771,40787,40801,40813,40819,40823,40829,40841,40847,40849,40853,40867,40879,40883,40897,40903,40927,40933,40939,40949,40961,40973,40993,41011,41017,41023,41039,41047,41051,41057,41077,41081,41113,41117,41131,41141,41143,41149,41161,41177,41179,41183,41189,41201,41203,41213,41221,41227,41231,41233,41243,41257,41263,41269,41281,41299,41333,41341,41351,41357,41381,41387,41389,41399,41411,41413,41443,41453,41467,41479,41491,41507,41513,41519,41521,41539,41543,41549,41579,41593,41597,41603,41609,41611,41617,41621,41627,41641,41647,41651,41659,41669,41681,41687,41719,41729,41737,41759,41761,41771,41777,41801,41809,41813,41843,41849,41851,41863,41879,41887,41893,41897,41903,41911,41927,41941,41947,41953,41957,41959,41969,41981,41983,41999,42013,42017,42019,42023,42043,42061,42071,42073,42083,42089,42101,42131,42139,42157,42169,42179,42181,42187,42193,42197,42209,42221,42223,42227,42239,42257,42281,42283,42293,42299,42307,42323,42331,42337,42349,42359,42373,42379,42391,42397,42403,42407,42409,42433,42437,42443,42451,42457,42461,42463,42467,42473,42487,42491,42499,42509,42533,42557,42569,42571,42577,42589,42611,42641,42643,42649,42667,42677,42683,42689,42697,42701,42703,42709,42719,42727,42737,42743,42751,42767,42773,42787,42793,42797,42821,42829,42839,42841,42853,42859,42863,42899,42901,42923,42929,42937,42943,42953,42961,42967,42979,42989,43003,43013,43019,43037,43049,43051,43063,43067,43093,43103,43117,43133,43151,43159,43177,43189,43201,43207,43223,43237,43261,43271,43283,43291,43313,43319,43321,43331,43391,43397,43399,43403,43411,43427,43441,43451,43457,43481,43487,43499,43517,43541,43543,43573,43577,43579,43591,43597,43607,43609,43613,43627,43633,43649,43651,43661,43669,43691,43711,43717,43721,43753,43759,43777,43781,43783,43787,43789,43793,43801,43853,43867,43889,43891,43913,43933,43943,43951,43961,43963,43969,43973,43987,43991,43997,44017,44021,44027,44029,44041,44053,44059,44071,44087,44089,44101,44111,44119,44123,44129,44131,44159,44171,44179,44189,44201,44203,44207,44221,44249,44257,44263,44267,44269,44273,44279,44281,44293,44351,44357,44371,44381,44383,44389,44417,44449,44453,44483,44491,44497,44501,44507,44519,44531,44533,44537,44543,44549,44563,44579,44587,44617,44621,44623,44633,44641,44647,44651,44657,44683,44687,44699,44701,44711,44729,44741,44753,44771,44773,44777,44789,44797,44809,44819,44839,44843,44851,44867,44879,44887,44893,44909,44917,44927,44939,44953,44959,44963,44971,44983,44987,45007,45013,45053,45061,45077,45083,45119,45121,45127,45131,45137,45139,45161,45179,45181,45191,45197,45233,45247,45259,45263,45281,45289,45293,45307,45317,45319,45329,45337,45341,45343,45361,45377,45389,45403,45413,45427,45433,45439,45481,45491,45497,45503,45523,45533,45541,45553,45557,45569,45587,45589,45599,45613,45631,45641,45659,45667,45673,45677,45691,45697,45707,45737,45751,45757,45763,45767,45779,45817,45821,45823,45827,45833,45841,45853,45863,45869,45887,45893,45943,45949,45953,45959,45971,45979,45989,46021,46027,46049,46051,46061,46073,46091,46093,46099,46103,46133,46141,46147,46153,46171,46181,46183,46187,46199,46219,46229,46237,46261,46271,46273,46279,46301,46307,46309,46327,46337,46349,46351,46381,46399,46411,46439,46441,46447,46451,46457,46471,46477,46489,46499,46507,46511,46523,46549,46559,46567,46573,46589,46591,46601,46619,46633,46639,46643,46649,46663,46679,46681,46687,46691,46703,46723,46727,46747,46751,46757,46769,46771,46807,46811,46817,46819,46829,46831,46853,46861,46867,46877,46889,46901,46919,46933,46957,46993,46997,47017,47041,47051,47057,47059,47087,47093,47111,47119,47123,47129,47137,47143,47147,47149,47161,47189,47207,47221,47237,47251,47269,47279,47287,47293,47297,47303,47309,47317,47339,47351,47353,47363,47381,47387,47389,47407,47417,47419,47431,47441,47459,47491,47497,47501,47507,47513,47521,47527,47533,47543,47563,47569,47581,47591,47599,47609,47623,47629,47639,47653,47657,47659,47681,47699,47701,47711,47713,47717,47737,47741,47743,47777,47779,47791,47797,47807,47809,47819,47837,47843,47857,47869,47881,47903,47911,47917,47933,47939,47947,47951,47963,47969,47977,47981,48017,48023,48029,48049,48073,48079,48091,48109,48119,48121,48131,48157,48163,48179,48187,48193,48197,48221,48239,48247,48259,48271,48281,48299,48311,48313,48337,48341,48353,48371,48383,48397,48407,48409,48413,48437,48449,48463,48473,48479,48481,48487,48491,48497,48523,48527,48533,48539,48541,48563,48571,48589,48593,48611,48619,48623,48647,48649,48661,48673,48677,48679,48731,48733,48751,48757,48761,48767,48779,48781,48787,48799,48809,48817,48821,48823,48847,48857,48859,48869,48871,48883,48889,48907,48947,48953,48973,48989,48991,49003,49009,49019,49031,49033,49037,49043,49057,49069,49081,49103,49109,49117,49121,49123,49139,49157,49169,49171,49177,49193,49199,49201,49207,49211,49223,49253,49261,49277,49279,49297,49307,49331,49333,49339,49363,49367,49369,49391,49393,49409,49411,49417,49429,49433,49451,49459,49463,49477,49481,49499,49523,49529,49531,49537,49547,49549,49559,49597,49603,49613,49627,49633,49639,49663,49667,49669,49681,49697,49711,49727,49739,49741,49747,49757,49783,49787,49789,49801,49807,49811,49823,49831,49843,49853,49871,49877,49891,49919,49921,49927,49937,49939,49943,49957,49991,49993,49999,50021,50023,50033,50047,50051,50053,50069,50077,50087,50093,50101,50111,50119,50123,50129,50131,50147,50153,50159,50177,50207,50221,50227,50231,50261,50263,50273,50287,50291,50311,50321,50329,50333,50341,50359,50363,50377,50383,50387,50411,50417,50423,50441,50459,50461,50497,50503,50513,50527,50539,50543,50549,50551,50581,50587,50591,50593,50599,50627,50647,50651,50671,50683,50707,50723,50741,50753,50767,50773,50777,50789,50821,50833,50839,50849,50857,50867,50873,50891,50893,50909,50923,50929,50951,50957,50969,50971,50989,50993,51001,51031,51043,51047,51059,51061,51071,51109,51131,51133,51137,51151,51157,51169,51193,51197,51199,51203,51217,51229,51239,51241,51257,51263,51283,51287,51307,51329,51341,51343,51347,51349,51361,51383,51407,51413,51419,51421,51427,51431,51437,51439,51449,51461,51473,51479,51481,51487,51503,51511,51517,51521,51539,51551,51563,51577,51581,51593,51599,51607,51613,51631,51637,51647,51659,51673,51679,51683,51691,51713,51719,51721,51749,51767,51769,51787,51797,51803,51817,51827,51829,51839,51853,51859,51869,51871,51893,51899,51907,51913,51929,51941,51949,51971,51973,51977,51991,52009,52021,52027,52051,52057,52067,52069,52081,52103,52121,52127,52147,52153,52163,52177,52181,52183,52189,52201,52223,52237,52249,52253,52259,52267,52289,52291,52301,52313,52321,52361,52363,52369,52379,52387,52391,52433,52453,52457,52489,52501,52511,52517,52529,52541,52543,52553,52561,52567,52571,52579,52583,52609,52627,52631,52639,52667,52673,52691,52697,52709,52711,52721,52727,52733,52747,52757,52769,52783,52807,52813,52817,52837,52859,52861,52879,52883,52889,52901,52903,52919,52937,52951,52957,52963,52967,52973,52981,52999,53003,53017,53047,53051,53069,53077,53087,53089,53093,53101,53113,53117,53129,53147,53149,53161,53171,53173,53189,53197,53201,53231,53233,53239,53267,53269,53279,53281,53299,53309,53323,53327,53353,53359,53377,53381,53401,53407,53411,53419,53437,53441,53453,53479,53503,53507,53527,53549,53551,53569,53591,53593,53597,53609,53611,53617,53623,53629,53633,53639,53653,53657,53681,53693,53699,53717,53719,53731,53759,53773,53777,53783,53791,53813,53819,53831,53849,53857,53861,53881,53887,53891,53897,53899,53917,53923,53927,53939,53951,53959,53987,53993,54001,54011,54013,54037,54049,54059,54083,54091,54101,54121,54133,54139,54151,54163,54167,54181,54193,54217,54251,54269,54277,54287,54293,54311,54319,54323,54331,54347,54361,54367,54371,54377,54401,54403,54409,54413,54419,54421,54437,54443,54449,54469,54493,54497,54499,54503,54517,54521,54539,54541,54547,54559,54563,54577,54581,54583,54601,54617,54623,54629,54631,54647,54667,54673,54679,54709,54713,54721,54727,54751,54767,54773,54779,54787,54799,54829,54833,54851,54869,54877,54881,54907,54917,54919,54941,54949,54959,54973,54979,54983,55001,55009,55021,55049,55051,55057,55061,55073,55079,55103,55109,55117,55127,55147,55163,55171,55201,55207,55213,55217,55219,55229,55243,55249,55259,55291,55313,55331,55333,55337,55339,55343,55351,55373,55381,55399,55411,55439,55441,55457,55469,55487,55501,55511,55529,55541,55547,55579,55589,55603,55609,55619,55621,55631,55633,55639,55661,55663,55667,55673,55681,55691,55697,55711,55717,55721,55733,55763,55787,55793,55799,55807,55813,55817,55819,55823,55829,55837,55843,55849,55871,55889,55897,55901,55903,55921,55927,55931,55933,55949,55967,55987,55997,56003,56009,56039,56041,56053,56081,56087,56093,56099,56101,56113,56123,56131,56149,56167,56171,56179,56197,56207,56209,56237,56239,56249,56263,56267,56269,56299,56311,56333,56359,56369,56377,56383,56393,56401,56417,56431,56437,56443,56453,56467,56473,56477,56479,56489,56501,56503,56509,56519,56527,56531,56533,56543,56569,56591,56597,56599,56611,56629,56633,56659,56663,56671,56681,56687,56701,56711,56713,56731,56737,56747,56767,56773,56779,56783,56807,56809,56813,56821,56827,56843,56857,56873,56891,56893,56897,56909,56911,56921,56923,56929,56941,56951,56957,56963,56983,56989,56993,56999,57037,57041,57047,57059,57073,57077,57089,57097,57107,57119,57131,57139,57143,57149,57163,57173,57179,57191,57193,57203,57221,57223,57241,57251,57259,57269,57271,57283,57287,57301,57329,57331,57347,57349,57367,57373,57383,57389,57397,57413,57427,57457,57467,57487,57493,57503,57527,57529,57557,57559,57571,57587,57593,57601,57637,57641,57649,57653,57667,57679,57689,57697,57709,57713,57719,57727,57731,57737,57751,57773,57781,57787,57791,57793,57803,57809,57829,57839,57847,57853,57859,57881,57899,57901,57917,57923,57943,57947,57973,57977,57991,58013,58027,58031,58043,58049,58057,58061,58067,58073,58099,58109,58111,58129,58147,58151,58153,58169,58171,58189,58193,58199,58207,58211,58217,58229,58231,58237,58243,58271,58309,58313,58321,58337,58363,58367,58369,58379,58391,58393,58403,58411,58417,58427,58439,58441,58451,58453,58477,58481,58511,58537,58543,58549,58567,58573,58579,58601,58603,58613,58631,58657,58661,58679,58687,58693,58699,58711,58727,58733,58741,58757,58763,58771,58787,58789,58831,58889,58897,58901,58907,58909,58913,58921,58937,58943,58963,58967,58979,58991,58997,59009,59011,59021,59023,59029,59051,59053,59063,59069,59077,59083,59093,59107,59113,59119,59123,59141,59149,59159,59167,59183,59197,59207,59209,59219,59221,59233,59239,59243,59263,59273,59281,59333,59341,59351,59357,59359,59369,59377,59387,59393,59399,59407,59417,59419,59441,59443,59447,59453,59467,59471,59473,59497,59509,59513,59539,59557,59561,59567,59581,59611,59617,59621,59627,59629,59651,59659,59663,59669,59671,59693,59699,59707,59723,59729,59743,59747,59753,59771,59779,59791,59797,59809,59833,59863,59879,59887,59921,59929,59951,59957,59971,59981,59999,60013,60017,60029,60037,60041,60077,60083,60089,60091,60101,60103,60107,60127,60133,60139,60149,60161,60167,60169,60209,60217,60223,60251,60257,60259,60271,60289,60293,60317,60331,60337,60343,60353,60373,60383,60397,60413,60427,60443,60449,60457,60493,60497,60509,60521,60527,60539,60589,60601,60607,60611,60617,60623,60631,60637,60647,60649,60659,60661,60679,60689,60703,60719,60727,60733,60737,60757,60761,60763,60773,60779,60793,60811,60821,60859,60869,60887,60889,60899,60901,60913,60917,60919,60923,60937,60943,60953,60961,61001,61007,61027,61031,61043,61051,61057,61091,61099,61121,61129,61141,61151,61153,61169,61211,61223,61231,61253,61261,61283,61291,61297,61331,61333,61339,61343,61357,61363,61379,61381,61403,61409,61417,61441,61463,61469,61471,61483,61487,61493,61507,61511,61519,61543,61547,61553,61559,61561,61583,61603,61609,61613,61627,61631,61637,61643,61651,61657,61667,61673,61681,61687,61703,61717,61723,61729,61751,61757,61781,61813,61819,61837,61843,61861,61871,61879,61909,61927,61933,61949,61961,61967,61979,61981,61987,61991,62003,62011,62017,62039,62047,62053,62057,62071,62081,62099,62119,62129,62131,62137,62141,62143,62171,62189,62191,62201,62207,62213,62219,62233,62273,62297,62299,62303,62311,62323,62327,62347,62351,62383,62401,62417,62423,62459,62467,62473,62477,62483,62497,62501,62507,62533,62539,62549,62563,62581,62591,62597,62603,62617,62627,62633,62639,62653,62659,62683,62687,62701,62723,62731,62743,62753,62761,62773,62791,62801,62819,62827,62851,62861,62869,62873,62897,62903,62921,62927,62929,62939,62969,62971,62981,62983,62987,62989,63029,63031,63059,63067,63073,63079,63097,63103,63113,63127,63131,63149,63179,63197,63199,63211,63241,63247,63277,63281,63299,63311,63313,63317,63331,63337,63347,63353,63361,63367,63377,63389,63391,63397,63409,63419,63421,63439,63443,63463,63467,63473,63487,63493,63499,63521,63527,63533,63541,63559,63577,63587,63589,63599,63601,63607,63611,63617,63629,63647,63649,63659,63667,63671,63689,63691,63697,63703,63709,63719,63727,63737,63743,63761,63773,63781,63793,63799,63803,63809,63823,63839,63841,63853,63857,63863,63901,63907,63913,63929,63949,63977,63997,64007,64013,64019,64033,64037,64063,64067,64081,64091,64109,64123,64151,64153,64157,64171,64187,64189,64217,64223,64231,64237,64271,64279,64283,64301,64303,64319,64327,64333,64373,64381,64399,64403,64433,64439,64451,64453,64483,64489,64499,64513,64553,64567,64577,64579,64591,64601,64609,64613,64621,64627,64633,64661,64663,64667,64679,64693,64709,64717,64747,64763,64781,64783,64793,64811,64817,64849,64853,64871,64877,64879,64891,64901,64919,64921,64927,64937,64951,64969,64997,65003,65011,65027,65029,65033,65053,65063,65071,65089,65099,65101,65111,65119,65123,65129,65141,65147,65167,65171,65173,65179,65183,65203,65213,65239,65257,65267,65269,65287,65293,65309,65323,65327,65353,65357,65371,65381,65393,65407,65413,65419,65423,65437,65447,65449,65479,65497,65519,65521,65537,65539,65543,65551,65557,65563,65579,65581,65587,65599,65609,65617,65629,65633,65647,65651,65657,65677,65687,65699,65701,65707,65713,65717,65719,65729,65731,65761,65777,65789,65809,65827,65831,65837,65839,65843,65851,65867,65881,65899,65921,65927,65929,65951,65957,65963,65981,65983,65993,66029,66037,66041,66047,66067,66071,66083,66089,66103,66107,66109,66137,66161,66169,66173,66179,66191,66221,66239,66271,66293,66301,66337,66343,66347,66359,66361,66373,66377,66383,66403,66413,66431,66449,66457,66463,66467,66491,66499,66509,66523,66529,66533,66541,66553,66569,66571,66587,66593,66601,66617,66629,66643,66653,66683,66697,66701,66713,66721,66733,66739,66749,66751,66763,66791,66797,66809,66821,66841,66851,66853,66863,66877,66883,66889,66919,66923,66931,66943,66947,66949,66959,66973,66977,67003,67021,67033,67043,67049,67057,67061,67073,67079,67103,67121,67129,67139,67141,67153,67157,67169,67181,67187,67189,67211,67213,67217,67219,67231,67247,67261,67271,67273,67289,67307,67339,67343,67349,67369,67391,67399,67409,67411,67421,67427,67429,67433,67447,67453,67477,67481,67489,67493,67499,67511,67523,67531,67537,67547,67559,67567,67577,67579,67589,67601,67607,67619,67631,67651,67679,67699,67709,67723,67733,67741,67751,67757,67759,67763,67777,67783,67789,67801,67807,67819,67829,67843,67853,67867,67883,67891,67901,67927,67931,67933,67939,67943,67957,67961,67967,67979,67987,67993,68023,68041,68053,68059,68071,68087,68099,68111,68113,68141,68147,68161,68171,68207,68209,68213,68219,68227,68239,68261,68279,68281,68311,68329,68351,68371,68389,68399,68437,68443,68447,68449,68473,68477,68483,68489,68491,68501,68507,68521,68531,68539,68543,68567,68581,68597,68611,68633,68639,68659,68669,68683,68687,68699,68711,68713,68729,68737,68743,68749,68767,68771,68777,68791,68813,68819,68821,68863,68879,68881,68891,68897,68899,68903,68909,68917,68927,68947,68963,68993,69001,69011,69019,69029,69031,69061,69067,69073,69109,69119,69127,69143,69149,69151,69163,69191,69193,69197,69203,69221,69233,69239,69247,69257,69259,69263,69313,69317,69337,69341,69371,69379,69383,69389,69401,69403,69427,69431,69439,69457,69463,69467,69473,69481,69491,69493,69497,69499,69539,69557,69593,69623,69653,69661,69677,69691,69697,69709,69737,69739,69761,69763,69767,69779,69809,69821,69827,69829,69833,69847,69857,69859,69877,69899,69911,69929,69931,69941,69959,69991,69997,70001,70003,70009,70019,70039,70051,70061,70067,70079,70099,70111,70117,70121,70123,70139,70141,70157,70163,70177,70181,70183,70199,70201,70207,70223,70229,70237,70241,70249,70271,70289,70297,70309,70313,70321,70327,70351,70373,70379,70381,70393,70423,70429,70439,70451,70457,70459,70481,70487,70489,70501,70507,70529,70537,70549,70571,70573,70583,70589,70607,70619,70621,70627,70639,70657,70663,70667,70687,70709,70717,70729,70753,70769,70783,70793,70823,70841,70843,70849,70853,70867,70877,70879,70891,70901,70913,70919,70921,70937,70949,70951,70957,70969,70979,70981,70991,70997,70999,71011,71023,71039,71059,71069,71081,71089,71119,71129,71143,71147,71153,71161,71167,71171,71191,71209,71233,71237,71249,71257,71261,71263,71287,71293,71317,71327,71329,71333,71339,71341,71347,71353,71359,71363,71387,71389,71399,71411,71413,71419,71429,71437,71443,71453,71471,71473,71479,71483,71503,71527,71537,71549,71551,71563,71569,71593,71597,71633,71647,71663,71671,71693,71699,71707,71711,71713,71719,71741,71761,71777,71789,71807,71809,71821,71837,71843,71849,71861,71867,71879,71881,71887,71899,71909,71917,71933,71941,71947,71963,71971,71983,71987,71993,71999,72019,72031,72043,72047,72053,72073,72077,72089,72091,72101,72103,72109,72139,72161,72167,72169,72173,72211,72221,72223,72227,72229,72251,72253,72269,72271,72277,72287,72307,72313,72337,72341,72353,72367,72379,72383,72421,72431,72461,72467,72469,72481,72493,72497,72503,72533,72547,72551,72559,72577,72613,72617,72623,72643,72647,72649,72661,72671,72673,72679,72689,72701,72707,72719,72727,72733,72739,72763,72767,72797,72817,72823,72859,72869,72871,72883,72889,72893,72901,72907,72911,72923,72931,72937,72949,72953,72959,72973,72977,72997,73009,73013,73019,73037,73039,73043,73061,73063,73079,73091,73121,73127,73133,73141,73181,73189,73237,73243,73259,73277,73291,73303,73309,73327,73331,73351,73361,73363,73369,73379,73387,73417,73421,73433,73453,73459,73471,73477,73483,73517,73523,73529,73547,73553,73561,73571,73583,73589,73597,73607,73609,73613,73637,73643,73651,73673,73679,73681,73693,73699,73709,73721,73727,73751,73757,73771,73783,73819,73823,73847,73849,73859,73867,73877,73883,73897,73907,73939,73943,73951,73961,73973,73999,74017,74021,74027,74047,74051,74071,74077,74093,74099,74101,74131,74143,74149,74159,74161,74167,74177,74189,74197,74201,74203,74209,74219,74231,74257,74279,74287,74293,74297,74311,74317,74323,74353,74357,74363,74377,74381,74383,74411,74413,74419,74441,74449,74453,74471,74489,74507,74509,74521,74527,74531,74551,74561,74567,74573,74587,74597,74609,74611,74623,74653,74687,74699,74707,74713,74717,74719,74729,74731,74747,74759,74761,74771,74779,74797,74821,74827,74831,74843,74857,74861,74869,74873,74887,74891,74897,74903,74923,74929,74933,74941,74959,75011,75013,75017,75029,75037,75041,75079,75083,75109,75133,75149,75161,75167,75169,75181,75193,75209,75211,75217,75223,75227,75239,75253,75269,75277,75289,75307,75323,75329,75337,75347,75353,75367,75377,75389,75391,75401,75403,75407,75431,75437,75479,75503,75511,75521,75527,75533,75539,75541,75553,75557,75571,75577,75583,75611,75617,75619,75629,75641,75653,75659,75679,75683,75689,75703,75707,75709,75721,75731,75743,75767,75773,75781,75787,75793,75797,75821,75833,75853,75869,75883,75913,75931,75937,75941,75967,75979,75983,75989,75991,75997,76001,76003,76031,76039,76079,76081,76091,76099,76103,76123,76129,76147,76157,76159,76163,76207,76213,76231,76243,76249,76253,76259,76261,76283,76289,76303,76333,76343,76367,76369,76379,76387,76403,76421,76423,76441,76463,76471,76481,76487,76493,76507,76511,76519,76537,76541,76543,76561,76579,76597,76603,76607,76631,76649,76651,76667,76673,76679,76697,76717,76733,76753,76757,76771,76777,76781,76801,76819,76829,76831,76837,76847,76871,76873,76883,76907,76913,76919,76943,76949,76961,76963,76991,77003,77017,77023,77029,77041,77047,77069,77081,77093,77101,77137,77141,77153,77167,77171,77191,77201,77213,77237,77239,77243,77249,77261,77263,77267,77269,77279,77291,77317,77323,77339,77347,77351,77359,77369,77377,77383,77417,77419,77431,77447,77471,77477,77479,77489,77491,77509,77513,77521,77527,77543,77549,77551,77557,77563,77569,77573,77587,77591,77611,77617,77621,77641,77647,77659,77681,77687,77689,77699,77711,77713,77719,77723,77731,77743,77747,77761,77773,77783,77797,77801,77813,77839,77849,77863,77867,77893,77899,77929,77933,77951,77969,77977,77983,77999,78007,78017,78031,78041,78049,78059,78079,78101,78121,78137,78139,78157,78163,78167,78173,78179,78191,78193,78203,78229,78233,78241,78259,78277,78283,78301,78307,78311,78317,78341,78347,78367,78401,78427,78437,78439,78467,78479,78487,78497,78509,78511,78517,78539,78541,78553,78569,78571,78577,78583,78593,78607,78623,78643,78649,78653,78691,78697,78707,78713,78721,78737,78779,78781,78787,78791,78797,78803,78809,78823,78839,78853,78857,78877,78887,78889,78893,78901,78919,78929,78941,78977,78979,78989,79031,79039,79043,79063,79087,79103,79111,79133,79139,79147,79151,79153,79159,79181,79187,79193,79201,79229,79231,79241,79259,79273,79279,79283,79301,79309,79319,79333,79337,79349,79357,79367,79379,79393,79397,79399,79411,79423,79427,79433,79451,79481,79493,79531,79537,79549,79559,79561,79579,79589,79601,79609,79613,79621,79627,79631,79633,79657,79669,79687,79691,79693,79697,79699,79757,79769,79777,79801,79811,79813,79817,79823,79829,79841,79843,79847,79861,79867,79873,79889,79901,79903,79907,79939,79943,79967,79973,79979,79987,79997,79999,80021,80039,80051,80071,80077,80107,80111,80141,80147,80149,80153,80167,80173,80177,80191,80207,80209,80221,80231,80233,80239,80251,80263,80273,80279,80287,80309,80317,80329,80341,80347,80363,80369,80387,80407,80429,80447,80449,80471,80473,80489,80491,80513,80527,80537,80557,80567,80599,80603,80611,80621,80627,80629,80651,80657,80669,80671,80677,80681,80683,80687,80701,80713,80737,80747,80749,80761,80777,80779,80783,80789,80803,80809,80819,80831,80833,80849,80863,80897,80909,80911,80917,80923,80929,80933,80953,80963,80989,81001,81013,81017,81019,81023,81031,81041,81043,81047,81049,81071,81077,81083,81097,81101,81119,81131,81157,81163,81173,81181,81197,81199,81203,81223,81233,81239,81281,81283,81293,81299,81307,81331,81343,81349,81353,81359,81371,81373,81401,81409,81421,81439,81457,81463,81509,81517,81527,81533,81547,81551,81553,81559,81563,81569,81611,81619,81629,81637,81647,81649,81667,81671,81677,81689,81701,81703,81707,81727,81737,81749,81761,81769,81773,81799,81817,81839,81847,81853,81869,81883,81899,81901,81919,81929,81931,81937,81943,81953,81967,81971,81973,82003,82007,82009,82013,82021,82031,82037,82039,82051,82067,82073,82129,82139,82141,82153,82163,82171,82183,82189,82193,82207,82217,82219,82223,82231,82237,82241,82261,82267,82279,82301,82307,82339,82349,82351,82361,82373,82387,82393,82421,82457,82463,82469,82471,82483,82487,82493,82499,82507,82529,82531,82549,82559,82561,82567,82571,82591,82601,82609,82613,82619,82633,82651,82657,82699,82721,82723,82727,82729,82757,82759,82763,82781,82787,82793,82799,82811,82813,82837,82847,82883,82889,82891,82903,82913,82939,82963,82981,82997,83003,83009,83023,83047,83059,83063,83071,83077,83089,83093,83101,83117,83137,83177,83203,83207,83219,83221,83227,83231,83233,83243,83257,83267,83269,83273,83299,83311,83339,83341,83357,83383,83389,83399,83401,83407,83417,83423,83431,83437,83443,83449,83459,83471,83477,83497,83537,83557,83561,83563,83579,83591,83597,83609,83617,83621,83639,83641,83653,83663,83689,83701,83717,83719,83737,83761,83773,83777,83791,83813,83833,83843,83857,83869,83873,83891,83903,83911,83921,83933,83939,83969,83983,83987,84011,84017,84047,84053,84059,84061,84067,84089,84121,84127,84131,84137,84143,84163,84179,84181,84191,84199,84211,84221,84223,84229,84239,84247,84263,84299,84307,84313,84317,84319,84347,84349,84377,84389,84391,84401,84407,84421,84431,84437,84443,84449,84457,84463,84467,84481,84499,84503,84509,84521,84523,84533,84551,84559,84589,84629,84631,84649,84653,84659,84673,84691,84697,84701,84713,84719,84731,84737,84751,84761,84787,84793,84809,84811,84827,84857,84859,84869,84871,84913,84919,84947,84961,84967,84977,84979,84991,85009,85021,85027,85037,85049,85061,85081,85087,85091,85093,85103,85109,85121,85133,85147,85159,85193,85199,85201,85213,85223,85229,85237,85243,85247,85259,85297,85303,85313,85331,85333,85361,85363,85369,85381,85411,85427,85429,85439,85447,85451,85453,85469,85487,85513,85517,85523,85531,85549,85571,85577,85597,85601,85607,85619,85621,85627,85639,85643,85661,85667,85669,85691,85703,85711,85717,85733,85751,85781,85793,85817,85819,85829,85831,85837,85843,85847,85853,85889,85903,85909,85931,85933,85991,85999,86011,86017,86027,86029,86069,86077,86083,86111,86113,86117,86131,86137,86143,86161,86171,86179,86183,86197,86201,86209,86239,86243,86249,86257,86263,86269,86287,86291,86293,86297,86311,86323,86341,86351,86353,86357,86369,86371,86381,86389,86399,86413,86423,86441,86453,86461,86467,86477,86491,86501,86509,86531,86533,86539,86561,86573,86579,86587,86599,86627,86629,86677,86689,86693,86711,86719,86729,86743,86753,86767,86771,86783,86813,86837,86843,86851,86857,86861,86869,86923,86927,86929,86939,86951,86959,86969,86981,86993,87011,87013,87037,87041,87049,87071,87083,87103,87107,87119,87121,87133,87149,87151,87179,87181,87187,87211,87221,87223,87251,87253,87257,87277,87281,87293,87299,87313,87317,87323,87337,87359,87383,87403,87407,87421,87427,87433,87443,87473,87481,87491,87509,87511,87517,87523,87539,87541,87547,87553,87557,87559,87583,87587,87589,87613,87623,87629,87631,87641,87643,87649,87671,87679,87683,87691,87697,87701,87719,87721,87739,87743,87751,87767,87793,87797,87803,87811,87833,87853,87869,87877,87881,87887,87911,87917,87931,87943,87959,87961,87973,87977,87991,88001,88003,88007,88019,88037,88069,88079,88093,88117,88129,88169,88177,88211,88223,88237,88241,88259,88261,88289,88301,88321,88327,88337,88339,88379,88397,88411,88423,88427,88463,88469,88471,88493,88499,88513,88523,88547,88589,88591,88607,88609,88643,88651,88657,88661,88663,88667,88681,88721,88729,88741,88747,88771,88789,88793,88799,88801,88807,88811,88813,88817,88819,88843,88853,88861,88867,88873,88883,88897,88903,88919,88937,88951,88969,88993,88997,89003,89009,89017,89021,89041,89051,89057,89069,89071,89083,89087,89101,89107,89113,89119,89123,89137,89153,89189,89203,89209,89213,89227,89231,89237,89261,89269,89273,89293,89303,89317,89329,89363,89371,89381,89387,89393,89399,89413,89417,89431,89443,89449,89459,89477,89491,89501,89513,89519,89521,89527,89533,89561,89563,89567,89591,89597,89599,89603,89611,89627,89633,89653,89657,89659,89669,89671,89681,89689,89753,89759,89767,89779,89783,89797,89809,89819,89821,89833,89839,89849,89867,89891,89897,89899,89909,89917,89923,89939,89959,89963,89977,89983,89989,90001,90007,90011,90017,90019,90023,90031,90053,90059,90067,90071,90073,90089,90107,90121,90127,90149,90163,90173,90187,90191,90197,90199,90203,90217,90227,90239,90247,90263,90271,90281,90289,90313,90353,90359,90371,90373,90379,90397,90401,90403,90407,90437,90439,90469,90473,90481,90499,90511,90523,90527,90529,90533,90547,90583,90599,90617,90619,90631,90641,90647,90659,90677,90679,90697,90703,90709,90731,90749,90787,90793,90803,90821,90823,90833,90841,90847,90863,90887,90901,90907,90911,90917,90931,90947,90971,90977,90989,90997,91009,91019,91033,91079,91081,91097,91099,91121,91127,91129,91139,91141,91151,91153,91159,91163,91183,91193,91199,91229,91237,91243,91249,91253,91283,91291,91297,91303,91309,91331,91367,91369,91373,91381,91387,91393,91397,91411,91423,91433,91453,91457,91459,91463,91493,91499,91513,91529,91541,91571,91573,91577,91583,91591,91621,91631,91639,91673,91691,91703,91711,91733,91753,91757,91771,91781,91801,91807,91811,91813,91823,91837,91841,91867,91873,91909,91921,91939,91943,91951,91957,91961,91967,91969,91997,92003,92009,92033,92041,92051,92077,92083,92107,92111,92119,92143,92153,92173,92177,92179,92189,92203,92219,92221,92227,92233,92237,92243,92251,92269,92297,92311,92317,92333,92347,92353,92357,92363,92369,92377,92381,92383,92387,92399,92401,92413,92419,92431,92459,92461,92467,92479,92489,92503,92507,92551,92557,92567,92569,92581,92593,92623,92627,92639,92641,92647,92657,92669,92671,92681,92683,92693,92699,92707,92717,92723,92737,92753,92761,92767,92779,92789,92791,92801,92809,92821,92831,92849,92857,92861,92863,92867,92893,92899,92921,92927,92941,92951,92957,92959,92987,92993,93001,93047,93053,93059,93077,93083,93089,93097,93103,93113,93131,93133,93139,93151,93169,93179,93187,93199,93229,93239,93241,93251,93253,93257,93263,93281,93283,93287,93307,93319,93323,93329,93337,93371,93377,93383,93407,93419,93427,93463,93479,93481,93487,93491,93493,93497,93503,93523,93529,93553,93557,93559,93563,93581,93601,93607,93629,93637,93683,93701,93703,93719,93739,93761,93763,93787,93809,93811,93827,93851,93871,93887,93889,93893,93901,93911,93913,93923,93937,93941,93949,93967,93971,93979,93983,93997,94007,94009,94033,94049,94057,94063,94079,94099,94109,94111,94117,94121,94151,94153,94169,94201,94207,94219,94229,94253,94261,94273,94291,94307,94309,94321,94327,94331,94343,94349,94351,94379,94397,94399,94421,94427,94433,94439,94441,94447,94463,94477,94483,94513,94529,94531,94541,94543,94547,94559,94561,94573,94583,94597,94603,94613,94621,94649,94651,94687,94693,94709,94723,94727,94747,94771,94777,94781,94789,94793,94811,94819,94823,94837,94841,94847,94849,94873,94889,94903,94907,94933,94949,94951,94961,94993,94999,95003,95009,95021,95027,95063,95071,95083,95087,95089,95093,95101,95107,95111,95131,95143,95153,95177,95189,95191,95203,95213,95219,95231,95233,95239,95257,95261,95267,95273,95279,95287,95311,95317,95327,95339,95369,95383,95393,95401,95413,95419,95429,95441,95443,95461,95467,95471,95479,95483,95507,95527,95531,95539,95549,95561,95569,95581,95597,95603,95617,95621,95629,95633,95651,95701,95707,95713,95717,95723,95731,95737,95747,95773,95783,95789,95791,95801,95803,95813,95819,95857,95869,95873,95881,95891,95911,95917,95923,95929,95947,95957,95959,95971,95987,95989,96001,96013,96017,96043,96053,96059,96079,96097,96137,96149,96157,96167,96179,96181,96199,96211,96221,96223,96233,96259,96263,96269,96281,96289,96293,96323,96329,96331,96337,96353,96377,96401,96419,96431,96443,96451,96457,96461,96469,96479,96487,96493,96497,96517,96527,96553,96557,96581,96587,96589,96601,96643,96661,96667,96671,96697,96703,96731,96737,96739,96749,96757,96763,96769,96779,96787,96797,96799,96821,96823,96827,96847,96851,96857,96893,96907,96911,96931,96953,96959,96973,96979,96989,96997,97001,97003,97007,97021,97039,97073,97081,97103,97117,97127,97151,97157,97159,97169,97171,97177,97187,97213,97231,97241,97259,97283,97301,97303,97327,97367,97369,97373,97379,97381,97387,97397,97423,97429,97441,97453,97459,97463,97499,97501,97511,97523,97547,97549,97553,97561,97571,97577,97579,97583,97607,97609,97613,97649,97651,97673,97687,97711,97729,97771,97777,97787,97789,97813,97829,97841,97843,97847,97849,97859,97861,97871,97879,97883,97919,97927,97931,97943,97961,97967,97973,97987,98009,98011,98017,98041,98047,98057,98081,98101,98123,98129,98143,98179,98207,98213,98221,98227,98251,98257,98269,98297,98299,98317,98321,98323,98327,98347,98369,98377,98387,98389,98407,98411,98419,98429,98443,98453,98459,98467,98473,98479,98491,98507,98519,98533,98543,98561,98563,98573,98597,98621,98627,98639,98641,98663,98669,98689,98711,98713,98717,98729,98731,98737,98773,98779,98801,98807,98809,98837,98849,98867,98869,98873,98887,98893,98897,98899,98909,98911,98927,98929,98939,98947,98953,98963,98981,98993,98999,99013,99017,99023,99041,99053,99079,99083,99089,99103,99109,99119,99131,99133,99137,99139,99149,99173,99181,99191,99223,99233,99241,99251,99257,99259,99277,99289,99317,99347,99349,99367,99371,99377,99391,99397,99401,99409,99431,99439,99469,99487,99497,99523,99527,99529,99551,99559,99563,99571,99577,99581,99607,99611,99623,99643,99661,99667,99679,99689,99707,99709,99713,99719,99721,99733,99761,99767,99787,99793,99809,99817,99823,99829,99833,99839,99859,99871,99877,99881,99901,99907,99923,99929,99961,99971,99989,99991,100003,100019,100043,100049,100057,100069,100103,100109,100129,100151,100153,100169,100183,100189,100193,100207,100213,100237,100267,100271,100279,100291,100297,100313,100333,100343,100357,100361,100363,100379,100391,100393,100403,100411,100417,100447,100459,100469,100483,100493,100501,100511,100517,100519,100523,100537,100547,100549,100559,100591,100609,100613,100621,100649,100669,100673,100693,100699,100703,100733,100741,100747,100769,100787,100799,100801,100811,100823,100829,100847,100853,100907,100913,100927,100931,100937,100943,100957,100981,100987,100999,101009,101021,101027,101051,101063,101081,101089,101107,101111,101113,101117,101119,101141,101149,101159,101161,101173,101183,101197,101203,101207,101209,101221,101267,101273,101279,101281,101287,101293,101323,101333,101341,101347,101359,101363,101377,101383,101399,101411,101419,101429,101449,101467,101477,101483,101489,101501,101503,101513,101527,101531,101533,101537,101561,101573,101581,101599,101603,101611,101627,101641,101653,101663,101681,101693,101701,101719,101723,101737,101741,101747,101749,101771,101789,101797,101807,101833,101837,101839,101863,101869,101873,101879,101891,101917,101921,101929,101939,101957,101963,101977,101987,101999,102001,102013,102019,102023,102031,102043,102059,102061,102071,102077,102079,102101,102103,102107,102121,102139,102149,102161,102181,102191,102197,102199,102203,102217,102229,102233,102241,102251,102253,102259,102293,102299,102301,102317,102329,102337,102359,102367,102397,102407,102409,102433,102437,102451,102461,102481,102497,102499,102503,102523,102533,102539,102547,102551,102559,102563,102587,102593,102607,102611,102643,102647,102653,102667,102673,102677,102679,102701,102761,102763,102769,102793,102797,102811,102829,102841,102859,102871,102877,102881,102911,102913,102929,102931,102953,102967,102983,103001,103007,103043,103049,103067,103069,103079,103087,103091,103093,103099,103123,103141,103171,103177,103183,103217,103231,103237,103289,103291,103307,103319,103333,103349,103357,103387,103391,103393,103399,103409,103421,103423,103451,103457,103471,103483,103511,103529,103549,103553,103561,103567,103573,103577,103583,103591,103613,103619,103643,103651,103657,103669,103681,103687,103699,103703,103723,103769,103787,103801,103811,103813,103837,103841,103843,103867,103889,103903,103913,103919,103951,103963,103967,103969,103979,103981,103991,103993,103997,104003,104009,104021,104033,104047,104053,104059,104087,104089,104107,104113,104119,104123,104147,104149,104161,104173,104179,104183,104207,104231,104233,104239,104243,104281,104287,104297,104309,104311,104323,104327,104347,104369,104381,104383,104393,104399,104417,104459,104471,104473,104479,104491,104513,104527,104537,104543,104549,104551,104561,104579,104593,104597,104623,104639,104651,104659,104677,104681,104683,104693,104701,104707,104711,104717,104723,104729]}).call(this)},{}],65:[function(require,module,exports){(function(){var BigInteger,Lock,MRF,MediumRandomFountain,SRF,StrongRandomFountain,WordArray,iced,native_rng,prng,__iced_k,__iced_k_noop,_mrf,_ref,_srf;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},BigInteger=require('bn').BigInteger,_ref=require('triplesec'),WordArray=_ref.WordArray,prng=_ref.prng,native_rng=prng.native_rng,Lock=require('./lock').Lock,MediumRandomFountain=function(){function MediumRandomFountain(){}return MediumRandomFountain.prototype.nextBytes=function(v){var b,c,i,_i,_len,_results;for(b=native_rng(v.length),_results=[],(i=_i=0,_len=b.length);_i<_len;i=++_i)c=b[i],_results.push(v[i]=c);return _results},MediumRandomFountain.prototype.random_word=function(){return native_rng(4).readUInt32BE(0)},MediumRandomFountain.prototype.random_zn=function(n){for(var i;!0;)if(i=BigInteger.random_nbit(n.bitLength(),this),i.compareTo(BigInteger.ONE)>0&&i.compareTo(n)<0)return i},MediumRandomFountain}(),_mrf=null,MRF=function(){return _mrf==null&&(_mrf=new MediumRandomFountain),_mrf},StrongRandomFountain=function(){function StrongRandomFountain(){this.buf=null,this.lock=new Lock}return StrongRandomFountain.prototype.random_word=function(cb){var wa,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/rand.iced',funcname:'StrongRandomFountain.random_word'}),prng.generate(4,__iced_deferrals.defer({assign_fn:function(){return function(){return wa=arguments[0]}}(),lineno:49})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(wa.to_buffer().readUInt32BE(0))}}(this))},StrongRandomFountain.prototype.random_double=function(cb){var wa,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/rand.iced',funcname:'StrongRandomFountain.random_double'}),prng.generate(8,__iced_deferrals.defer({assign_fn:function(){return function(){return wa=arguments[0]}}(),lineno:55})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(wa.to_buffer().readDoubleBE(0))}}(this))},StrongRandomFountain.prototype.rand_0_1=function(cb){var ret,w1,w2,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/rand.iced',funcname:'StrongRandomFountain.rand_0_1'}),_this.random_word(__iced_deferrals.defer({assign_fn:function(){return function(){return w1=arguments[0]}}(),lineno:61})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/rand.iced',funcname:'StrongRandomFountain.rand_0_1'}),_this.random_word(__iced_deferrals.defer({assign_fn:function(){return function(){return w2=arguments[0]}}(),lineno:62})),__iced_deferrals._fulfill()})(function(){return ret=w1*2.3283064365386963e-10+w2*5.421010862427522e-20,cb(ret)})}}(this))},StrongRandomFountain.prototype.random_zn=function(n,cb){var go,ret,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),go=!0,ret=!1,function(_this){return function(__iced_k){var _results,_while;_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},go?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/rand.iced',funcname:'StrongRandomFountain.random_zn'}),_this.random_nbit(n.bitLength(),__iced_deferrals.defer({assign_fn:function(){return function(){return ret=arguments[0]}}(),lineno:72})),__iced_deferrals._fulfill()}(function(){return _next(go=ret.compareTo(BigInteger.ONE)<=0||ret.compareTo(n)>=0)}):_break()},_while(__iced_k)}}(this)(function(_this){return function(){return cb(ret)}}(this))},StrongRandomFountain.prototype.nextBytes=function(v){var i,_i,_ref1,_results;for(_results=[],i=_i=0,_ref1=v.length;0<=_ref1?_i<_ref1:_i>_ref1;i=0<=_ref1?++_i:--_i)_results.push(v[i]=this.buf[i]);return _results},StrongRandomFountain.prototype.random_word_array=function(nbytes,cb){var b,d,max_pull,n,ret,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),ret=new WordArray,max_pull=512,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/rand.iced',funcname:'StrongRandomFountain.random_word_array'}),_this.lock.acquire(__iced_deferrals.defer({lineno:88})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){var _results,_while;_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},(d=nbytes-ret.sigBytes)>0?void(n=_Mathmin5(max_pull,d),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/rand.iced',funcname:'StrongRandomFountain.random_word_array'}),prng.generate(n,__iced_deferrals.defer({assign_fn:function(){return function(){return b=arguments[0]}}(),lineno:91})),__iced_deferrals._fulfill()}(function(){return _next(ret=ret.concat(b))})):_break()},_while(__iced_k)})(function(){return _this.lock.release(),cb(ret)})}}(this))},StrongRandomFountain.prototype.random_bytes=function(nbytes,cb){var tmp,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/rand.iced',funcname:'StrongRandomFountain.random_bytes'}),_this.random_word_array(nbytes,__iced_deferrals.defer({assign_fn:function(){return function(){return tmp=arguments[0]}}(),lineno:99})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(tmp.to_buffer())}}(this))},StrongRandomFountain.prototype.random_nbit=function(nbits,cb){var nbytes,ret,tmp,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),nbytes=(nbits>>3)+1,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/rand.iced',funcname:'StrongRandomFountain.random_nbit'}),_this.random_bytes(nbytes,__iced_deferrals.defer({assign_fn:function(){return function(){return tmp=arguments[0]}}(),lineno:106})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/kbpgp/src/rand.iced',funcname:'StrongRandomFountain.random_nbit'}),_this.lock.acquire(__iced_deferrals.defer({lineno:107})),__iced_deferrals._fulfill()})(function(){return _this.buf=tmp,ret=BigInteger.random_nbit(nbits,_this),_this.lock.release(),cb(ret)})}}(this))},StrongRandomFountain}(),_srf=null,SRF=function(){return _srf==null&&(_srf=new StrongRandomFountain),_srf},exports.MRF=MRF,exports.SRF=SRF}).call(this)},{'./lock':28,'bn':71,'iced-runtime':118,'triplesec':181}],66:[function(require,module,exports){(function(){var IV,WordArray,bufeq_secure,setup,split64,unwrap,wrap;WordArray=require('triplesec').WordArray,bufeq_secure=require('./util').bufeq_secure,IV=WordArray.from_hex('A6A6A6A6A6A6A6A6'),split64=function(wa){return wa.split(wa.words.length>>1)},exports.wrap=wrap=function(_arg){var A,AES,B,C,P,R,cipher,err,i,j,key,plaintext,r,t,_i,_j,_k,_len,_len1,_ref;if(plaintext=_arg.plaintext,key=_arg.key,cipher=_arg.cipher,_ref=setup({input:plaintext,key:key,cipher:cipher}),err=_ref[0],P=_ref[1],AES=_ref[2],err!=null)throw err;for(A=IV,R=P,t=new WordArray([0,0]),j=_i=0;_i<6;j=++_i)for(i=_j=0,_len=R.length;_j<_len;i=++_j)r=R[i],t.words[1]++,B=A.clone().concat(r),AES.encryptBlock(B.words),A=B.slice(0,2),R[i]=B.slice(2,4),A.xor(t,{});for(C=A,_k=0,_len1=R.length;_k<_len1;_k++)r=R[_k],C.concat(r);return C.to_buffer()},setup=function(_arg){var AES,K,P,a,b,cipher,err,input,key,klass;return input=_arg.input,key=_arg.key,cipher=_arg.cipher,P=split64(WordArray.from_buffer(input)),K=WordArray.from_buffer(key),klass=cipher.klass,AES=new klass(K),err=null,(a=cipher.key_size)!==(b=key.length)&&(err=new Error('Bad key, needed '+a+' bytes, but got '+b)),[err,P,AES]},exports.unwrap=unwrap=function(_arg){var A,AES,B,C,P,R,cipher,ciphertext,err,i,j,key,n,r,t,_i,_j,_k,_len,_ref;if(ciphertext=_arg.ciphertext,key=_arg.key,cipher=_arg.cipher,_ref=setup({input:ciphertext,key:key,cipher:cipher}),err=_ref[0],C=_ref[1],AES=_ref[2],n=_ref[3],err!=null)return[err,null];for(A=C[0],R=C.slice(1),t=new WordArray([0,6*R.length]),j=_i=0;_i<6;j=++_i)for(i=_j=R.length-1;_j>=0;i=_j+=-1)r=R[i],A.xor(t,{}),B=A.clone().concat(r),AES.decryptBlock(B.words),A=B.slice(0,2),R[i]=B.slice(2,4),t.words[1]--;if(A.equal(IV)){for(P=new WordArray([]),_k=0,_len=R.length;_k<_len;_k++)r=R[_k],P.concat(r);return[null,P.to_buffer()]}return[new Error('integrity check failure; got bad IV in decryption'),null]}}).call(this)},{'./util':70,'triplesec':181}],67:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},ASP,BaseKey,BaseKeyPair,BigInteger,C,K,MRF,Output,Pair,Priv,Pub,SHA512,SRF,bn,bufeq_secure,eme_pkcs1_decode,eme_pkcs1_encode,emsa_pkcs1_decode,emsa_pkcs1_encode,iced,konst,make_esc,naive_is_prime,nbi,nbits,nbv,random_prime,__iced_k,__iced_k_noop,_ref,_ref1,_ref2,_ref3,_ref4;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},_ref=require('./primegen'),naive_is_prime=_ref.naive_is_prime,random_prime=_ref.random_prime,bn=require('./bn'),nbits=bn.nbits,nbv=bn.nbv,nbs=bn.nbs,nbi=bn.nbi,BigInteger=bn.BigInteger,_ref1=require('./util'),bufeq_secure=_ref1.bufeq_secure,ASP=_ref1.ASP,make_esc=require('iced-error').make_esc,konst=require('./const'),C=konst.openpgp,K=konst.kb,SHA512=require('./hash').SHA512,_ref2=require('./pad'),eme_pkcs1_encode=_ref2.eme_pkcs1_encode,eme_pkcs1_decode=_ref2.eme_pkcs1_decode,emsa_pkcs1_decode=_ref2.emsa_pkcs1_decode,emsa_pkcs1_encode=_ref2.emsa_pkcs1_encode,_ref3=require('./rand'),SRF=_ref3.SRF,MRF=_ref3.MRF,_ref4=require('./basekeypair'),BaseKey=_ref4.BaseKey,BaseKeyPair=_ref4.BaseKeyPair,Priv=function(_super){function Priv(_arg){this.p=_arg.p,this.q=_arg.q,this.d=_arg.d,this.dmp1=_arg.dmp1,this.dmq1=_arg.dmq1,this.u=_arg.u,this.pub=_arg.pub}return __extends(Priv,_super),Priv.prototype.decrypt=function(c,cb){var x,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Priv.decrypt'}),_this.mod_pow_d_crt(c,__iced_deferrals.defer({assign_fn:function(){return function(){return x=arguments[0]}}(),lineno:22})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(null,x)}}(this))},Priv.prototype.sign=function(m,cb){return this.mod_pow_d_crt(m,cb)},Priv.ORDER=['d','p','q','u'],Priv.prototype.ORDER=Priv.ORDER,Priv.prototype.n=function(){return this.p.multiply(this.q)},Priv.prototype.phi=function(){return this.p.subtract(BigInteger.ONE).multiply(this.q.subtract(BigInteger.ONE))},Priv.prototype.lambda=function(){return this.phi.divide(this.p.subtract(BigInteger.ONE).gcd(this.q.subtract(BigInteger.ONE)))},Priv.alloc=function(raw,pub){return BaseKey.alloc(Priv,raw,{pub:pub})},Priv.prototype.mod_pow_d_crt=function(x,cb){var n,r,r_e,r_inv,x_1,xp,xq,y,y_0,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),this.dP==null&&(this.dP=this.d.mod(this.p.subtract(BigInteger.ONE))),this.dQ==null&&(this.dQ=this.d.mod(this.q.subtract(BigInteger.ONE))),this.qInv==null&&(this.qInv=this.q.modInverse(this.p)),n=this.pub.n,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Priv.mod_pow_d_crt'}),SRF().random_zn(n,__iced_deferrals.defer({assign_fn:function(){return function(){return r=arguments[0]}}(),lineno:141})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){for(r_inv=r.modInverse(n),r_e=r.modPow(_this.pub.e,n),x_1=x.multiply(r_e).mod(n),xp=x_1.mod(_this.p).modPow(_this.dP,_this.p),xq=x_1.mod(_this.q).modPow(_this.dQ,_this.q);xp.compareTo(xq)<0;)xp=xp.add(_this.p);return y_0=xp.subtract(xq).multiply(_this.qInv).mod(_this.p).multiply(_this.q).add(xq),y=y_0.multiply(r_inv).mod(n),cb(y)}}(this))},Priv}(BaseKey),Pub=function(_super){function Pub(_arg){this.n=_arg.n,this.e=_arg.e}return __extends(Pub,_super),Pub.type=C.public_key_algorithms.RSA,Pub.prototype.type=Pub.type,Pub.ORDER=['n','e'],Pub.prototype.ORDER=Pub.ORDER,Pub.prototype.encrypt=function(p,cb){return this.mod_pow(p,this.e,cb)},Pub.prototype.verify=function(s,cb){return this.mod_pow(s,this.e,cb)},Pub.prototype.nbits=function(){var _ref5;return(_ref5=this.n)==null?void 0:_ref5.bitLength()},Pub.alloc=function(raw){return BaseKey.alloc(Pub,raw)},Pub.prototype.mod_pow=function(x,d,cb){return cb(x.modPow(d,this.n))},Pub.prototype.validity_check=function(cb){var err;return err=this.n.gcd(this.e).equals(BigInteger.ONE)?this.n.mod(nbv(2)).equals(BigInteger.ONE)?this.e.compareTo(BigInteger.ONE)<=0?new Error('e <= 1'):this.e.bitLength()>32?new Error('e='+this.e+' > 2^32'):null:new Error('n % 2 != 1'):new Error('gcd(n,e) != 1'),cb(err)},Pub}(BaseKey),Pair=function(_super){function Pair(_arg){var priv,pub;priv=_arg.priv,pub=_arg.pub,Pair.__super__.constructor.call(this,{priv:priv,pub:pub})}return __extends(Pair,_super),Pair.type=C.public_key_algorithms.RSA,Pair.prototype.type=Pair.type,Pair.prototype.get_type=function(){return this.type},Pair.klass_name='RSA',Pair.Pub=Pub,Pair.prototype.Pub=Pub,Pair.Priv=Priv,Pair.prototype.Priv=Priv,Pair.parse=function(pub_raw){return BaseKeyPair.parse(Pair,pub_raw)},Pair.alloc=function(_arg){var priv,pub;return pub=_arg.pub,priv=_arg.priv,BaseKeyPair.alloc({pub:pub,priv:priv})},Pair.subkey_algo=function(flags){return Pair},Pair.prototype.sanity_check=function(cb){var err,x0,x1,x2,y0,y1,y2,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=this.priv.n().compareTo(this.pub.n)===0?null:new Error('pq != n'),function(_this){return function(__iced_k){return err==null?void(x0=MRF().random_zn(_this.pub.n),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Pair.sanity_check'}),_this.encrypt(x0,__iced_deferrals.defer({assign_fn:function(){return function(){return x1=arguments[0]}}(),lineno:240})),__iced_deferrals._fulfill()}(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Pair.sanity_check'}),_this.decrypt(x1,__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],x2=arguments[1]}}(),lineno:241})),__iced_deferrals._fulfill()})(function(){return __iced_k(err==null&&x0.compareTo(x2)!==0?err=new Error('Decrypt/encrypt failed'):void 0)})})):__iced_k()}}(this)(function(_this){return function(){(function(__iced_k){return err==null?void(y0=MRF().random_zn(_this.pub.n),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Pair.sanity_check'}),_this.sign(y0,__iced_deferrals.defer({assign_fn:function(){return function(){return y1=arguments[0]}}(),lineno:246})),__iced_deferrals._fulfill()}(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Pair.sanity_check'}),_this.verify(y1,__iced_deferrals.defer({assign_fn:function(){return function(){return y2=arguments[0]}}(),lineno:247})),__iced_deferrals._fulfill()})(function(){return __iced_k(y0.compareTo(y2)===0?void 0:err=new Error('Sign/verify failed'))})})):__iced_k()})(function(){return cb(err)})}}(this))},Pair.parse_sig=function(slice){var err,n,raw,ret,_ref5;if(_ref5=bn.mpi_from_buffer(slice.peek_rest_to_buffer()),err=_ref5[0],ret=_ref5[1],raw=_ref5[2],n=_ref5[3],err!=null)throw err;return slice.advance(n),ret},Pair.prototype.encrypt=function(p,cb){return this.pub.encrypt(p,cb)},Pair.prototype.decrypt=function(c,cb){return this.priv.decrypt(c,cb)},Pair.prototype.max_value=function(){return this.pub.n},Pair.make=function(_arg){var d,dmp1,dmq1,e,lambda,n,p,p1,phi,priv,pub,q,q1,u;return p=_arg.p,q=_arg.q,e=_arg.e,phi=_arg.phi,p1=_arg.p1,q1=_arg.q1,lambda=_arg.lambda,n=p.multiply(q),d=e.modInverse(lambda),dmp1=d.mod(p1),dmq1=d.mod(q1),u=p.modInverse(q),pub=new Pub({n:n,e:e}),priv=new Priv({p:p,q:q,d:d,dmp1:dmp1,dmq1:dmq1,u:u,pub:pub}),new Pair({priv:priv,pub:pub})},Pair.prototype.to_openpgp=function(){var key;return key=new new RSA().keyObject,key.n=this.pub.n,key.e=this.pub.e.intValue(),key.ee=this.pub.e,key.d=this.priv.d,key.p=this.priv.p,key.q=this.priv.q,key.dmp1=this.priv.dmp1,key.dmq1=this.priv.dmq1,key.u=this.priv.u,key},Pair.prototype.sign=function(m,cb){return this.priv.sign(m,cb)},Pair.prototype.verify=function(s,cb){return this.pub.verify(s,cb)},Pair.prototype.pad_and_encrypt=function(data,params,cb){var ct,err,m,ret,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=ret=null,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Pair.pad_and_encrypt'}),eme_pkcs1_encode(data,_this.pub.n.mpi_byte_length(),__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],m=arguments[1]}}(),lineno:306})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){return err==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Pair.pad_and_encrypt'}),_this.encrypt(m,__iced_deferrals.defer({assign_fn:function(){return function(){return ct=arguments[0]}}(),lineno:308})),__iced_deferrals._fulfill()}(function(){return __iced_k(ret=_this.export_output({y_mpi:ct}))}):__iced_k()})(function(){return cb(err,ret)})}}(this))},Pair.prototype.decrypt_and_unpad=function(ciphertext,params,cb){var b,err,p,ret,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),err=ret=null,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Pair.decrypt_and_unpad'}),_this.decrypt(ciphertext.y(),__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],p=arguments[1]}}(),lineno:318})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){var _ref5;return err==null&&(b=p.to_padded_octets(_this.pub.n),_ref5=eme_pkcs1_decode(b),err=_ref5[0],ret=_ref5[1]),cb(err,ret)}}(this))},Pair.prototype.pad_and_sign=function(data,_arg,cb){var hashed_data,hasher,m,sig,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),hasher=_arg.hasher,hasher||(hasher=SHA512),hashed_data=hasher(data),m=emsa_pkcs1_encode(hashed_data,this.pub.n.mpi_byte_length(),{hasher:hasher}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Pair.pad_and_sign'}),_this.sign(m,__iced_deferrals.defer({assign_fn:function(){return function(){auth_sign(hashed_data,ok_sig=>(void 0,sig=arguments[0].to_mpi_buffer(),void 0,size=(ok_sig.length-1)*8+nbits(ok_sig[0]),hdr=new Buffer(2),hdr.writeUInt16BE(size,0),sig=Buffer.concat([hdr,new Buffer(ok_sig)]),void 0,cb(null,sig)))}}(),lineno:330})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){}}(this))},Pair.prototype.verify_unpad_and_check_hash=function(_arg,cb){var b,data,err,hash,hasher,hd1,sig,v,___iced_passed_deferral,__iced_deferrals,__iced_k,_ref5;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),sig=_arg.sig,data=_arg.data,hasher=_arg.hasher,hash=_arg.hash,err=null,Buffer.isBuffer(sig)&&(_ref5=bn.mpi_from_buffer(sig),err=_ref5[0],sig=_ref5[1]),function(_this){return function(__iced_k){return err==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Pair.verify_unpad_and_check_hash'}),_this.verify(sig,__iced_deferrals.defer({assign_fn:function(){return function(){return v=arguments[0]}}(),lineno:339})),__iced_deferrals._fulfill()}(function(){var _ref6;return b=v.to_padded_octets(_this.pub.n),_ref6=emsa_pkcs1_decode(b,hasher),err=_ref6[0],hd1=_ref6[1],__iced_k(err==null?(hash||(hash=hasher(data)),bufeq_secure(hd1,hash)?void 0:err=new Error('hash mismatch')):void 0)}):__iced_k()}}(this)(function(_this){return function(){return cb(err)}}(this))},Pair.generate=function(_arg,cb){var asp,e,e_orig,esc,go,iters,key,lambda,nbits,p,p1,phi,q,q1,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),nbits=_arg.nbits,iters=_arg.iters,e=_arg.e,asp=_arg.asp,e||(e=(1<<16)+1),e_orig=e,nbits||(nbits=4096),iters||(iters=10),asp||(asp=new ASP({})),e=nbv(e_orig),esc=make_esc(cb,'generate_rsa_keypair'),go=!0,nbits>>=1,function(_this){return function(__iced_k){var _results,_while;_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},go?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Pair.generate'}),random_prime({asp:asp.section('p'),e:e,nbits:nbits,iters:iters},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return p=arguments[0]}}(),lineno:363}))),__iced_deferrals._fulfill()}(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Pair.generate'}),asp.progress({what:'found',p:p},esc(__iced_deferrals.defer({lineno:364}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Pair.generate'}),random_prime({asp:asp.section('q'),e:e,nbits:nbits,iters:iters},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return q=arguments[0]}}(),lineno:365}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Pair.generate'}),asp.progress({what:'found',q:q},esc(__iced_deferrals.defer({lineno:366}))),__iced_deferrals._fulfill()})(function(){var _ref5;return p.compareTo(q)<=0&&(_ref5=[q,p],p=_ref5[0],q=_ref5[1]),q1=q.subtract(BigInteger.ONE),p1=p.subtract(BigInteger.ONE),phi=p1.multiply(q1),lambda=phi.divide(q1.gcd(p1)),_next(phi.gcd(e).compareTo(BigInteger.ONE)===0?go=!1:(typeof progress_hook==='function'?progress_hook({what:'unlucky_phi'}):void 0,go=!0))})})})}):_break()},_while(__iced_k)}}(this)(function(_this){return function(){return key=Pair.make({p:p,q:q,e:e,phi:phi,p1:p1,q1:q1,lambda:lambda}),cb(null,key)}}(this))},Pair.parse_output=function(buf){return Output.parse(buf)},Pair.prototype.export_output=function(args){return new Output(args)},Pair.prototype.validity_check=function(cb){var err,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Pair.validity_check'}),_this.pub.validity_check(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:391})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err)}}(this))},Pair}(BaseKeyPair),Output=function(){function Output(_arg){this.y_mpi=_arg.y_mpi,this.y_buf=_arg.y_buf}return Output.parse=function(buf){var err,n,raw,ret,_ref5;if(_ref5=bn.mpi_from_buffer(buf),err=_ref5[0],ret=_ref5[1],raw=_ref5[2],n=_ref5[3],err!=null)throw err;if(raw.length!==0)throw new Error('junk at the end of input');return new Output({y_mpi:ret})},Output.prototype.y=function(){return this.y_mpi},Output.prototype.hide=function(_arg,cb){var err,i,key,max,slosh,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),key=_arg.key,max=_arg.max,slosh=_arg.slosh,max||(max=8192),slosh||(slosh=128),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/rsa.iced',funcname:'Output.hide'}),key.hide({i:_this.y(),max:max,slosh:slosh},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],i=arguments[1]}}(),lineno:417})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return(typeof err==='undefined'||err===null)&&(_this.y_mpi=i,_this.y_buf=null),cb(err)}}(this))},Output.prototype.find=function(_arg){var key;return key=_arg.key,this.y_mpi=key.find(this.y_mpi)},Output.prototype.output=function(){return this.y_buf||this.y_mpi.to_mpi_buffer()},Output}(),exports.RSA=exports.Pair=Pair,exports.Output=Output}).call(this)}).call(this,require('buffer').Buffer)},{'./basekeypair':2,'./bn':4,'./const':5,'./hash':14,'./pad':62,'./primegen':63,'./rand':65,'./util':70,'buffer':80,'iced-error':115,'iced-runtime':118}],68:[function(require,module,exports){(function(Buffer){(function(){var AES,C,CAST5,SlicerBuffer,WordArray,checksum2,ecc_pkcs5_unpad_data,export_key_pgp,get_cipher,import_key_pgp,triplesec,uint_to_buffer;C=require('./const').openpgp.symmetric_key_algorithms,triplesec=require('triplesec'),AES=triplesec.ciphers.AES,CAST5=require('./openpgp/cast5').CAST5,SlicerBuffer=require('./openpgp/buffer').SlicerBuffer,WordArray=triplesec.WordArray,uint_to_buffer=require('./util').uint_to_buffer,ecc_pkcs5_unpad_data=require('./pad').ecc_pkcs5_unpad_data,exports.get_cipher=get_cipher=function(n){var ret;return n||(n=C.AES256),ret=function(){switch(n){case C.AES128:return{klass:AES,key_size:16};case C.AES192:return{klass:AES,key_size:24};case C.AES256:return{klass:AES,key_size:32};case C.CAST5:return{klass:CAST5,key_size:CAST5.keySize};default:throw new Error('unknown cipher: '+n);}}(),ret.type=n,ret},exports.checksum2=checksum2=function(buf){var i,res,_i,_ref;for(res=0,i=_i=0,_ref=buf.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i)res=res+buf.readUInt8(i)&65535;return res},exports.import_key_pgp=import_key_pgp=function(msg,pkcs5_padding){var checksum,cipher,err,key,ret,sb;if(pkcs5_padding==null&&(pkcs5_padding=!1),sb=new SlicerBuffer(msg),ret=err=null,cipher=get_cipher(sb.read_uint8()),key=sb.read_buffer(cipher.key_size),checksum=sb.read_uint16(),err=checksum2(key)===checksum?pkcs5_padding?ecc_pkcs5_unpad_data(msg,sb.offset()):sb.rem()?new Error('Junk at the end of input'):null:new Error('Checksum mismatch'),err!=null)throw err;return new cipher.klass(WordArray.from_buffer(key))},exports.export_key_pgp=export_key_pgp=function(algo_id,key){var csum;return csum=checksum2(key),Buffer.concat([new Buffer([algo_id]),key,uint_to_buffer(16,csum)])}}).call(this)}).call(this,require('buffer').Buffer)},{'./const':5,'./openpgp/buffer':35,'./openpgp/cast5':37,'./pad':62,'./util':70,'buffer':80,'triplesec':181}],69:[function(require,module,exports){(function(){var iced,kb,pgp,__iced_k,__iced_k_noop;iced=require('iced-runtime').iced,__iced_k=__iced_k_noop=function(){},pgp=require('./openpgp/keymanager'),kb=require('./keybase/hilev'),exports.import_armored_public=function(_arg,cb){var armored,asp,err,ret,warnings,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),armored=_arg.armored,asp=_arg.asp,function(_this){return function(__iced_k){armored.match(/^-{5}BEGIN PGP PUBLIC KEY BLOCK-{5}/)?function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/ukm.iced',funcname:'import_armored_public'}),pgp.KeyManager.import_from_armored_pgp({armored:armored,asp:asp},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],ret=arguments[1],warnings=arguments[2]}}(),lineno:10})),__iced_deferrals._fulfill()}(__iced_k):function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/kbpgp/src/ukm.iced',funcname:'import_armored_public'}),kb.KeyManager.import_public({hex:armored},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],ret=arguments[1]}}(),lineno:12})),__iced_deferrals._fulfill()}(__iced_k)}}(this)(function(_this){return function(){return cb(err,ret)}}(this))}}).call(this)},{'./keybase/hilev':17,'./openpgp/keymanager':42,'iced-runtime':118}],70:[function(require,module,exports){(function(){var k,m,mods,v,_i,_len;for(mods=[require('pgp-utils').util,require('./openpgp/util'),require('./keybase/util')],_i=0,_len=mods.length;_i<_len;_i++)for(k in m=mods[_i],m)v=m[k],exports[k]=v}).call(this)},{'./keybase/util':23,'./openpgp/util':60,'pgp-utils':163}],71:[function(require,module,exports){var engine=require('./lib/wrap').engine;for(var k in syms=engine?require('./lib/fast'):require('./lib/pure'),syms)exports[k]=syms[k]},{'./lib/fast':72,'./lib/pure':73,'./lib/wrap':74}],72:[function(require,module,exports){(function(Buffer){(function(){function BigInteger(a,b){if(!(this instanceof BigInteger))return new BigInteger(a,b);if(typeof a=='string')a=a.replace(/\s+/g,''),!b&&(b=10),this._v=bigint(a,b);else if(typeof a=='number')this._v=bigint(a);else if(typeof a=='object'&&Array.isArray(a))this._v=bigint.fromBuffer(new Buffer(a));else if(a.constructor!=zed.constructor)throw new Error('failed to get valid inner object in constructor');else this._v=a}function nbi(){return new BigInteger(bigint(0))}function nbv(i){return new BigInteger(bigint(i))}function bigint_or_number(x){return typeof x==='number'?nbv(x):x}function buffer_to_array(b){var ret=[];for(var i=0;i<b.length;i++)ret[i]=b.readUInt8(i);return ret}function nbits(x){var r=1,t;return(t=x>>>16)!=0&&(x=t,r+=16),(t=x>>8)!=0&&(x=t,r+=8),(t=x>>4)!=0&&(x=t,r+=4),(t=x>>2)!=0&&(x=t,r+=2),(t=x>>1)!=0&&(x=t,r+=1),r}var bigint=require('./wrap').engine;var zed=bigint(0);var one=bigint(1);;;;BigInteger.prototype.bitLength=function(){var ret;return ret=this.signum()==0?0:this._v.bitLength(),ret},BigInteger.prototype.byteLength=function(){return this.bitLength()>>3},BigInteger.prototype.modPowInt=function(i,n){return new BigInteger(this._v.powm(bigint(i),n._v))},BigInteger.prototype.modInt=function(i){return this._v.mod(bigint(i)).toNumber()},BigInteger.prototype.testBit=function(i){var bi=one.shiftLeft(i);var tmp=this._v.and(bi);var ret=tmp.eq(zed)?0:1;return ret},BigInteger.prototype.setBit=function(i){var mask=bigint(1).shiftLeft(i);return new BigInteger(this._v.or(mask))},BigInteger.prototype.shiftLeft=function(i){return new BigInteger(this._v.shiftLeft(i))},BigInteger.prototype.shiftRight=function(i){return new BigInteger(this._v.shiftRight(i))},BigInteger.prototype.compareTo=function(b){return this._v.cmp(b._v)},BigInteger.prototype.modPow=function(e,n){return new BigInteger(this._v.powm(e._v,n._v))},BigInteger.prototype.square=function(){return new BigInteger(this._v.mul(this._v))},BigInteger.prototype.mod=function(m){var x=this._v.mod(m._v);return x.cmp(zed)<0&&(x=x.add(m._v)),new BigInteger(x)},BigInteger.prototype.abs=function(){return new BigInteger(this._v.abs())},BigInteger.prototype.pow=function(e){return new BigInteger(this._v.pow(bigint_or_number(e)._v))},BigInteger.prototype.intValue=function(){return this._v.toNumber()},BigInteger.prototype.signum=function(){var cmp=this._v.cmp(zed);return ret=cmp>0?1:cmp===0?0:-1,ret},BigInteger.prototype.negate=function(){return new BigInteger(this._v.neg())},BigInteger.prototype.equals=function(b){return this._v.eq(b._v)},BigInteger.prototype.subtract=function(x){return new BigInteger(this._v.sub(x._v))},BigInteger.prototype.add=function(x){return new BigInteger(this._v.add(x._v))},BigInteger.prototype.multiply=function(x){return new BigInteger(this._v.mul(x._v))},BigInteger.prototype.divide=function(x){if(this._v.ge(zed)&&x._v.ge(zed))i=this._v.div(x._v);else{var sign=this.signum()*x.signum();i=this._v.abs().div(x._v.abs()),sign<0&&(i=i.neg())}return new BigInteger(i)},BigInteger.prototype.gcd=function(x){return new BigInteger(this._v.gcd(x._v))},BigInteger.prototype.fromBuffer=function(x){return new BigInteger(bigint.fromBuffer(x))},BigInteger.fromByteArrayUnsigned=function(b){return BigInteger.fromBuffer(new Buffer(b))},BigInteger.fromBuffer=function(x){return new BigInteger(bigint.fromBuffer(x))},BigInteger.fromDERInteger=function(buf){var ret;if(buf.length==0)ret=BigInteger.ZERO;else if(buf[0]==0)ret=BigInteger.fromBuffer(buf);else if(ret=BigInteger.fromBuffer(buf),buf[0]&128){var z=BigInteger.ONE.shiftLeft(ret.bitLength());ret=ret.subtract(z)}return ret},BigInteger.prototype.compute_twos_complement=function(){var l=this.add(BigInteger.ONE).bitLength();var bytes=_Mathfloor3(l/8)+1;var y=BigInteger.ONE.shiftLeft(bytes*8);return y.add(this)},BigInteger.prototype.toDERInteger=function(){var ret=null;var s=this.signum();if(s==0)ret=new Buffer([0]);else if(s<0){var z=this.compute_twos_complement();ret=z.toBuffer()}else{var ret=this.toBuffer();this.bitLength()%8==0&&(pad=new Buffer([0]),ret=Buffer.concat([pad,ret]))}return buffer_to_array(ret)},BigInteger.prototype.divideAndRemainder=function(m){var q=new BigInteger(this._v.div(m._v));var r=new BigInteger(this._v.mod(m._v));return[q,r]},BigInteger.fromString=function(s,base){var bi;return bi=base===256?bigint.fromBuffer(s):bigint(s,base),new BigInteger(bi)},BigInteger.prototype.fromString=function(s,base){return BigInteger.fromString(s,base)},BigInteger.prototype.toByteArray=function(){var b=this.toBuffer();var l=b.length;var ret=Array(l);for(var i=0;i<l;i++)ret[i]=b[i];return ret},BigInteger.prototype.toByteArrayUnsigned=function(){return new Uint8Array(this.toBuffer())},BigInteger.prototype.toBuffer=function(size){var ret=null;if(!size&&(size=0),ret=this.signum()==0?new Buffer([]):this._v.toBuffer(),(diff=size-ret.length)>0){var pad=new Buffer(diff);pad.fill(0),ret=Buffer.concat([pad,ret])}return ret},BigInteger.prototype.toHex=function(size){var x=this;return this.signum()<0&&(x=this.compute_twos_complement()),x.toBuffer(size).toString('hex')},BigInteger.prototype.clone=function(){return new BigInteger(bigint(this._v))},BigInteger.prototype.getLowestSetBit=function(){var bl=this._v.bitLength();var ret=-1;var mask=bigint(1);for(var i=0;i<bl&&ret<0;i++)mask.and(this._v).eq(zed)?mask=mask.shiftLeft(1):ret=i;return ret},BigInteger.prototype.modInverse=function(n){return new BigInteger(this._v.invertm(n._v))},BigInteger.prototype.isEven=function(){var mask=bigint(1);var res=mask.and(this._v);return res.eq(zed)};;BigInteger.random_nbit=function(nbits,rf){var nbytes=_Mathceil4(nbits/8);var buf=new Buffer(nbytes);rf.nextBytes(buf);var ret=bigint.fromBuffer(buf);var mask=bigint(1).shiftLeft(nbits).sub(bigint(1));return ret=ret.and(mask),new BigInteger(ret)},BigInteger.fromHex=function(s){if(!s.match(/^[a-fA-F0-9]*$/))throw new Error('hex string invalid: '+s);if(s.length%2!=0)throw new Error('got an odd-length hex-string');return new BigInteger(s,16)},BigInteger.prototype.inspect=function(){return'<BigInteger/fast '+this._v.toString()+'>'},BigInteger.prototype.toString=function(base){!base&&(base=10);var raw=this._v.toString(base);return raw.length==0?raw='0':base==16&&raw.length>1&&(raw[0]=='0'?raw=raw.slice(1):raw.slice(0,2)=='-0'&&(raw='-'+raw.slice(2))),raw},BigInteger.valueOf=function(x){return bigint_or_number(x)},BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),module.exports={BigInteger:BigInteger,nbi:nbi,nbv:nbv,nbits:nbits}})(this)}).call(this,require('buffer').Buffer)},{'./wrap':74,'buffer':80}],73:[function(require,module,exports){(function(Buffer){(function(){function BigInteger(a,b,c){return this instanceof BigInteger?void(a!=null&&('number'==typeof a?this.fromNumber(a,b,c):b==null&&'string'!=typeof a?this.fromString(a,256):this.fromString(a,b))):new BigInteger(a,b,c)}function nbi(){return new BigInteger(null)}function am1(i,x,w,j,c,n){for(;--n>=0;){var v=x*this[i++]+w[j]+c;c=_Mathfloor3(v/67108864),w[j++]=v&67108863}return c}function am2(i,x,w,j,c,n){for(var xl=x&32767,xh=x>>15;--n>=0;){var l=this[i]&32767;var h=this[i++]>>15;var m=xh*l+h*xl;l=xl*l+((m&32767)<<15)+w[j]+(c&1073741823),c=(l>>>30)+(m>>>15)+xh*h+(c>>>30),w[j++]=l&1073741823}return c}function am3(i,x,w,j,c,n){for(var xl=x&16383,xh=x>>14;--n>=0;){var l=this[i]&16383;var h=this[i++]>>14;var m=xh*l+h*xl;l=xl*l+((m&16383)<<14)+w[j]+c,c=(l>>28)+(m>>14)+xh*h,w[j++]=l&268435455}return c}function int2char(n){return BI_RM.charAt(n)}function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return c==null?-1:c}function bnpCopyTo(r){for(var i=this.t-1;i>=0;--i)r[i]=this[i];r.t=this.t,r.s=this.s}function bnpFromInt(x){this.t=1,this.s=x<0?-1:0,x>0?this[0]=x:x<-1?this[0]=x+this.DV:this.t=0}function nbv(i){var r=nbi();return r.fromInt(i),r}function bnpFromString(s,b,unsigned){var k;if(b==16)k=4;else if(b==8)k=3;else if(b==256)k=8;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else return this.fromRadix(s,b),this;this.t=0,this.s=0;for(var i=s.length,mi=!1,sh=0;--i>=0;){var x=k==8?s[i]&255:intAt(s,i);if(x<0){s.charAt(i)=='-'&&(mi=!0);continue}mi=!1,sh==0?this[this.t++]=x:sh+k>this.DB?(this[this.t-1]|=(x&(1<<this.DB-sh)-1)<<sh,this[this.t++]=x>>this.DB-sh):this[this.t-1]|=x<<sh,sh+=k,sh>=this.DB&&(sh-=this.DB)}return!unsigned&&k==8&&(s[0]&128)!=0&&(this.s=-1,sh>0&&(this[this.t-1]|=(1<<this.DB-sh)-1<<sh)),this.clamp(),mi&&BigInteger.ZERO.subTo(this,this),this}function bnpClamp(){for(var c=this.s&this.DM;this.t>0&&this[this.t-1]==c;)--this.t}function bnToString(b){if(this.s<0)return'-'+this.negate().toString(b);var k;if(b==16)k=4;else if(b==8)k=3;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else return this.toRadix(b);var km=(1<<k)-1,m=!1,r='',i=this.t,d;var p=this.DB-i*this.DB%k;if(i-->0)for(p<this.DB&&(d=this[i]>>p)>0&&(m=!0,r=int2char(d));i>=0;)p<k?(d=(this[i]&(1<<p)-1)<<k-p,d|=this[--i]>>(p+=this.DB-k)):(d=this[i]>>(p-=k)&km,p<=0&&(p+=this.DB,--i)),d>0&&(m=!0),m&&(r+=int2char(d));return m?r:'0'}function bnNegate(){var r=nbi();return BigInteger.ZERO.subTo(this,r),r}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(a){var r=this.s-a.s;if(r!=0)return r;var i=this.t;if(r=i-a.t,r!=0)return r;for(;--i>=0;)if((r=this[i]-a[i])!=0)return r;return 0}function nbits(x){var r=1,t;return(t=x>>>16)!=0&&(x=t,r+=16),(t=x>>8)!=0&&(x=t,r+=8),(t=x>>4)!=0&&(x=t,r+=4),(t=x>>2)!=0&&(x=t,r+=2),(t=x>>1)!=0&&(x=t,r+=1),r}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(n,r){var i;for(i=this.t-1;i>=0;--i)r[i+n]=this[i];for(i=n-1;i>=0;--i)r[i]=0;r.t=this.t+n,r.s=this.s}function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i)r[i-n]=this[i];r.t=_Mathmax4(this.t-n,0),r.s=this.s}function bnpLShiftTo(n,r){var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<cbs)-1;var ds=_Mathfloor3(n/this.DB),c=this.s<<bs&this.DM,i;for(i=this.t-1;i>=0;--i)r[i+ds+1]=this[i]>>cbs|c,c=(this[i]&bm)<<bs;for(i=ds-1;i>=0;--i)r[i]=0;r[ds]=c,r.t=this.t+ds+1,r.s=this.s,r.clamp()}function bnpRShiftTo(n,r){r.s=this.s;var ds=_Mathfloor3(n/this.DB);if(ds>=this.t)return void(r.t=0);var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<bs)-1;r[0]=this[ds]>>bs;for(var i=ds+1;i<this.t;++i)r[i-ds-1]|=(this[i]&bm)<<cbs,r[i-ds]=this[i]>>bs;bs>0&&(r[this.t-ds-1]|=(this.s&bm)<<cbs),r.t=this.t-ds,r.clamp()}function bnpSubTo(a,r){for(var i=0,c=0,m=_Mathmin5(a.t,this.t);i<m;)c+=this[i]-a[i],r[i++]=c&this.DM,c>>=this.DB;if(a.t<this.t){for(c-=a.s;i<this.t;)c+=this[i],r[i++]=c&this.DM,c>>=this.DB;c+=this.s}else{for(c+=this.s;i<a.t;)c-=a[i],r[i++]=c&this.DM,c>>=this.DB;c-=a.s}r.s=c<0?-1:0,c<-1?r[i++]=this.DV+c:c>0&&(r[i++]=c),r.t=i,r.clamp()}function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs();var i=x.t;for(r.t=i+y.t;--i>=0;)r[i]=0;for(i=0;i<y.t;++i)r[i+x.t]=x.am(0,y[i],r,i,0,x.t);r.s=0,r.clamp(),this.s!=a.s&&BigInteger.ZERO.subTo(r,r)}function bnpSquareTo(r){var x=this.abs();for(var i=r.t=2*x.t;--i>=0;)r[i]=0;for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1);(r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV&&(r[i+x.t]-=x.DV,r[i+x.t+1]=1)}r.t>0&&(r[r.t-1]+=x.am(i,x[i],r,2*i,0,1)),r.s=0,r.clamp()}function bnpDivRemTo(m,q,r){var pm=m.abs();if(!(pm.t<=0)){var pt=this.abs();if(pt.t<pm.t)return q!=null&&q.fromInt(0),void(r!=null&&this.copyTo(r));r==null&&(r=nbi());var y=nbi(),ts=this.s,ms=m.s;var nsh=this.DB-nbits(pm[pm.t-1]);nsh>0?(pm.lShiftTo(nsh,y),pt.lShiftTo(nsh,r)):(pm.copyTo(y),pt.copyTo(r));var ys=y.t;var y0=y[ys-1];if(y0!=0){var yt=y0*(1<<this.F1)+(ys>1?y[ys-2]>>this.F2:0);var d1=this.FV/yt,d2=(1<<this.F1)/yt,e=1<<this.F2;var i=r.t,j=i-ys,t=q==null?nbi():q;for(y.dlShiftTo(j,t),r.compareTo(t)>=0&&(r[r.t++]=1,r.subTo(t,r)),BigInteger.ONE.dlShiftTo(ys,t),t.subTo(y,y);y.t<ys;)y[y.t++]=0;for(;--j>=0;){var qd=r[--i]==y0?this.DM:_Mathfloor3(r[i]*d1+(r[i-1]+e)*d2);if((r[i]+=y.am(0,qd,r,j,0,ys))<qd)for(y.dlShiftTo(j,t),r.subTo(t,r);r[i]<--qd;)r.subTo(t,r)}q!=null&&(r.drShiftTo(ys,q),ts!=ms&&BigInteger.ZERO.subTo(q,q)),r.t=ys,r.clamp(),nsh>0&&r.rShiftTo(nsh,r),ts<0&&BigInteger.ZERO.subTo(r,r)}}}function bnMod(a){var r=nbi();return this.abs().divRemTo(a,null,r),this.s<0&&r.compareTo(BigInteger.ZERO)>0&&a.subTo(r,r),r}function Classic(m){this.m=m}function cConvert(x){return x.s<0||x.compareTo(this.m)>=0?x.mod(this.m):x}function cRevert(x){return x}function cReduce(x){x.divRemTo(this.m,null,x)}function cMulTo(x,y,r){x.multiplyTo(y,r),this.reduce(r)}function cSqrTo(x,r){x.squareTo(r),this.reduce(r)}function bnpInvDigit(){if(this.t<1)return 0;var x=this[0];if((x&1)==0)return 0;var y=x&3;return y=y*(2-(x&15)*y)&15,y=y*(2-(x&255)*y)&255,y=y*(2-((x&65535)*y&65535))&65535,y=y*(2-x*y%this.DV)%this.DV,y>0?this.DV-y:-y}function Montgomery(m){this.m=m,this.mp=m.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<m.DB-15)-1,this.mt2=2*m.t}function montConvert(x){var r=nbi();return x.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),x.s<0&&r.compareTo(BigInteger.ZERO)>0&&this.m.subTo(r,r),r}function montRevert(x){var r=nbi();return x.copyTo(r),this.reduce(r),r}function montReduce(x){for(;x.t<=this.mt2;)x[x.t++]=0;for(var i=0;i<this.m.t;++i){var j=x[i]&32767;var u0=j*this.mpl+((j*this.mph+(x[i]>>15)*this.mpl&this.um)<<15)&x.DM;for(j=i+this.m.t,x[j]+=this.m.am(0,u0,x,i,0,this.m.t);x[j]>=x.DV;)x[j]-=x.DV,x[++j]++}x.clamp(),x.drShiftTo(this.m.t,x),x.compareTo(this.m)>=0&&x.subTo(this.m,x)}function montSqrTo(x,r){x.squareTo(r),this.reduce(r)}function montMulTo(x,y,r){x.multiplyTo(y,r),this.reduce(r)}function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(e,z){if(e>4294967295||e<1)return BigInteger.ONE;var r=nbi(),r2=nbi(),g=z.convert(this),i=nbits(e)-1;for(g.copyTo(r);--i>=0;)if(z.sqrTo(r,r2),(e&1<<i)>0)z.mulTo(r2,g,r);else{var t=r;r=r2,r2=t}return z.revert(r)}function bnModPowInt(e,m){var z;return z=e<256||m.isEven()?new Classic(m):new Montgomery(m),this.exp(e,z)}function bnClone(){var r=nbi();return this.copyTo(r),r}function bnIntValue(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return this.t==0?this.s:this[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this[0]<<16>>16}function bnpChunkSize(r){return _Mathfloor3(_MathLN*this.DB/_Mathlog(r))}function bnSigNum(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function bnpToRadix(b){if(b==null&&(b=10),this.signum()==0||b<2||b>36)return'0';var cs=this.chunkSize(b);var a=_Mathpow3(b,cs);var d=nbv(a),y=nbi(),z=nbi(),r='';for(this.divRemTo(d,y,z);y.signum()>0;)r=(a+z.intValue()).toString(b).substr(1)+r,y.divRemTo(d,y,z);return z.intValue().toString(b)+r}function bnpFromRadix(s,b){this.fromInt(0),b==null&&(b=10);var cs=this.chunkSize(b);var d=_Mathpow3(b,cs),mi=!1,j=0,w=0;for(var i=0;i<s.length;++i){var x=intAt(s,i);if(x<0){s.charAt(i)=='-'&&this.signum()==0&&(mi=!0);continue}w=b*w+x,++j>=cs&&(this.dMultiply(d),this.dAddOffset(w,0),j=0,w=0)}j>0&&(this.dMultiply(_Mathpow3(b,j)),this.dAddOffset(w,0)),mi&&BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(a,b,c){if(!('number'==typeof b)){var x=[],t=a&7;x.length=(a>>3)+1,b.nextBytes(x),t>0?x[0]&=(1<<t)-1:x[0]=0,this.fromString(x,256)}else if(a<2)this.fromInt(1);else for(this.fromNumber(a,c),!this.testBit(a-1)&&this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(b);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(BigInteger.ONE.shiftLeft(a-1),this)}function bnToByteArray(encode_sign_bit){var i=this.t,r=[];r[0]=this.s;var p=this.DB-i*this.DB%8,k=0,d;if(i-->0)for(p<this.DB&&(d=this[i]>>p)!=(this.s&this.DM)>>p&&(r[k++]=d|this.s<<this.DB-p);i>=0;)p<8?(d=(this[i]&(1<<p)-1)<<8-p,d|=this[--i]>>(p+=this.DB-8)):(d=this[i]>>(p-=8)&255,p<=0&&(p+=this.DB,--i)),encode_sign_bit&&((d&128)!=0&&(d|=-256),k==0&&(this.s&128)!=(d&128)&&++k),(k>0||d!=this.s)&&(r[k++]=d);return r}function bnEquals(a){return this.compareTo(a)==0}function bnMin(a){return this.compareTo(a)<0?this:a}function bnMax(a){return this.compareTo(a)>0?this:a}function bnpBitwiseTo(a,op,r){var m=_Mathmin5(a.t,this.t),i,f;for(i=0;i<m;++i)r[i]=op(this[i],a[i]);if(a.t<this.t){for(f=a.s&this.DM,i=m;i<this.t;++i)r[i]=op(this[i],f);r.t=this.t}else{for(f=this.s&this.DM,i=m;i<a.t;++i)r[i]=op(f,a[i]);r.t=a.t}r.s=op(this.s,a.s),r.clamp()}function op_and(x,y){return x&y}function bnAnd(a){var r=nbi();return this.bitwiseTo(a,op_and,r),r}function op_or(x,y){return x|y}function bnOr(a){var r=nbi();return this.bitwiseTo(a,op_or,r),r}function op_xor(x,y){return x^y}function bnXor(a){var r=nbi();return this.bitwiseTo(a,op_xor,r),r}function op_andnot(x,y){return x&~y}function bnAndNot(a){var r=nbi();return this.bitwiseTo(a,op_andnot,r),r}function bnNot(){var r=nbi();for(var i=0;i<this.t;++i)r[i]=this.DM&~this[i];return r.t=this.t,r.s=~this.s,r}function bnShiftLeft(n){var r=nbi();return n<0?this.rShiftTo(-n,r):this.lShiftTo(n,r),r}function bnShiftRight(n){var r=nbi();return n<0?this.lShiftTo(-n,r):this.rShiftTo(n,r),r}function lbit(x){if(x==0)return-1;var r=0;return(x&65535)==0&&(x>>=16,r+=16),(x&255)==0&&(x>>=8,r+=8),(x&15)==0&&(x>>=4,r+=4),(x&3)==0&&(x>>=2,r+=2),(x&1)==0&&++r,r}function bnGetLowestSetBit(){for(var i=0;i<this.t;++i)if(this[i]!=0)return i*this.DB+lbit(this[i]);return this.s<0?this.t*this.DB:-1}function cbit(x){for(var r=0;x!=0;)x&=x-1,++r;return r}function bnBitCount(){var r=0,x=this.s&this.DM;for(var i=0;i<this.t;++i)r+=cbit(this[i]^x);return r}function bnTestBit(n){var j=_Mathfloor3(n/this.DB);return j>=this.t?this.s!=0:(this[j]&1<<n%this.DB)!=0}function bnpChangeBit(n,op){var r=BigInteger.ONE.shiftLeft(n);return this.bitwiseTo(r,op,r),r}function bnSetBit(n){return this.changeBit(n,op_or)}function bnClearBit(n){return this.changeBit(n,op_andnot)}function bnFlipBit(n){return this.changeBit(n,op_xor)}function bnpAddTo(a,r){for(var i=0,c=0,m=_Mathmin5(a.t,this.t);i<m;)c+=this[i]+a[i],r[i++]=c&this.DM,c>>=this.DB;if(a.t<this.t){for(c+=a.s;i<this.t;)c+=this[i],r[i++]=c&this.DM,c>>=this.DB;c+=this.s}else{for(c+=this.s;i<a.t;)c+=a[i],r[i++]=c&this.DM,c>>=this.DB;c+=a.s}r.s=c<0?-1:0,c>0?r[i++]=c:c<-1&&(r[i++]=this.DV+c),r.t=i,r.clamp()}function bnAdd(a){var r=nbi();return this.addTo(a,r),r}function bnSubtract(a){var r=nbi();return this.subTo(a,r),r}function bnMultiply(a){var r=nbi();return this.multiplyTo(a,r),r}function bnSquare(){var r=nbi();return this.squareTo(r),r}function bnDivide(a){var r=nbi();return this.divRemTo(a,r,null),r}function bnRemainder(a){var r=nbi();return this.divRemTo(a,null,r),r}function bnDivideAndRemainder(a){var q=nbi(),r=nbi();return this.divRemTo(a,q,r),[q,r]}function bnpDMultiply(n){this[this.t]=this.am(0,n-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(n,w){if(n!=0){for(;this.t<=w;)this[this.t++]=0;for(this[w]+=n;this[w]>=this.DV;)this[w]-=this.DV,++w>=this.t&&(this[this.t++]=0),++this[w]}}function NullExp(){}function nNop(x){return x}function nMulTo(x,y,r){x.multiplyTo(y,r)}function nSqrTo(x,r){x.squareTo(r)}function bnPow(e){return this.exp(e,new NullExp)}function bnpMultiplyLowerTo(a,n,r){var i=_Mathmin5(this.t+a.t,n);for(r.s=0,r.t=i;i>0;)r[--i]=0;var j;for(j=r.t-this.t;i<j;++i)r[i+this.t]=this.am(0,a[i],r,i,0,this.t);for(j=_Mathmin5(a.t,n);i<j;++i)this.am(0,a[i],r,i,0,n-i);r.clamp()}function bnpMultiplyUpperTo(a,n,r){--n;var i=r.t=this.t+a.t-n;for(r.s=0;--i>=0;)r[i]=0;for(i=_Mathmax4(n-this.t,0);i<a.t;++i)r[this.t+i-n]=this.am(n-i,a[i],r,0,0,this.t+i-n);r.clamp(),r.drShiftTo(1,r)}function Barrett(m){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*m.t,this.r2),this.mu=this.r2.divide(m),this.m=m}function barrettConvert(x){if(x.s<0||x.t>2*this.m.t)return x.mod(this.m);if(x.compareTo(this.m)<0)return x;var r=nbi();return x.copyTo(r),this.reduce(r),r}function barrettRevert(x){return x}function barrettReduce(x){for(x.drShiftTo(this.m.t-1,this.r2),x.t>this.m.t+1&&(x.t=this.m.t+1,x.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);x.compareTo(this.r2)<0;)x.dAddOffset(1,this.m.t+1);for(x.subTo(this.r2,x);x.compareTo(this.m)>=0;)x.subTo(this.m,x)}function barrettSqrTo(x,r){x.squareTo(r),this.reduce(r)}function barrettMulTo(x,y,r){x.multiplyTo(y,r),this.reduce(r)}function bnModPow(e,m){var i=e.bitLength(),r=nbv(1),k,z;if(i<=0)return r;k=i<18?1:i<48?3:i<144?4:i<768?5:6,z=i<8?new Classic(m):m.isEven()?new Barrett(m):new Montgomery(m);var g=[],n=3,k1=k-1,km=(1<<k)-1;if(g[1]=z.convert(this),k>1){var g2=nbi();for(z.sqrTo(g[1],g2);n<=km;)g[n]=nbi(),z.mulTo(g2,g[n-2],g[n]),n+=2}var j=e.t-1,is1=!0,r2=nbi(),w,t;for(i=nbits(e[j])-1;j>=0;){for(i>=k1?w=e[j]>>i-k1&km:(w=(e[j]&(1<<i+1)-1)<<k1-i,j>0&&(w|=e[j-1]>>this.DB+i-k1)),n=k;(w&1)==0;)w>>=1,--n;if((i-=n)<0&&(i+=this.DB,--j),is1)g[w].copyTo(r),is1=!1;else{for(;n>1;)z.sqrTo(r,r2),z.sqrTo(r2,r),n-=2;n>0?z.sqrTo(r,r2):(t=r,r=r2,r2=t),z.mulTo(r2,g[w],r)}for(;j>=0&&(e[j]&1<<i)==0;)z.sqrTo(r,r2),t=r,r=r2,r2=t,--i<0&&(i=this.DB-1,--j)}return z.revert(r)}function bnGCD(a){var x=this.s<0?this.negate():this.clone();var y=a.s<0?a.negate():a.clone();if(x.compareTo(y)<0){var t=x;x=y,y=t}var i=x.getLowestSetBit(),g=y.getLowestSetBit();if(g<0)return x;for(i<g&&(g=i),g>0&&(x.rShiftTo(g,x),y.rShiftTo(g,y));x.signum()>0;)(i=x.getLowestSetBit())>0&&x.rShiftTo(i,x),(i=y.getLowestSetBit())>0&&y.rShiftTo(i,y),x.compareTo(y)>=0?(x.subTo(y,x),x.rShiftTo(1,x)):(y.subTo(x,y),y.rShiftTo(1,y));return g>0&&y.lShiftTo(g,y),y}function bnpModInt(n){if(n<=0)return 0;var d=this.DV%n,r=this.s<0?n-1:0;if(this.t>0)if(d==0)r=this[0]%n;else for(var i=this.t-1;i>=0;--i)r=(d*r+this[i])%n;return r}function bnModInverse(m){var ac=m.isEven();if(this.isEven()&&ac||m.signum()==0)return BigInteger.ZERO;var u=m.clone(),v=this.clone();for(var a=nbv(1),b=nbv(0),c=nbv(0),d=nbv(1);u.signum()!=0;){for(;u.isEven();)u.rShiftTo(1,u),ac?((!a.isEven()||!b.isEven())&&(a.addTo(this,a),b.subTo(m,b)),a.rShiftTo(1,a)):!b.isEven()&&b.subTo(m,b),b.rShiftTo(1,b);for(;v.isEven();)v.rShiftTo(1,v),ac?((!c.isEven()||!d.isEven())&&(c.addTo(this,c),d.subTo(m,d)),c.rShiftTo(1,c)):!d.isEven()&&d.subTo(m,d),d.rShiftTo(1,d);u.compareTo(v)>=0?(u.subTo(v,u),ac&&a.subTo(c,a),b.subTo(d,b)):(v.subTo(u,v),ac&&c.subTo(a,c),d.subTo(b,d))}if(v.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO;if(d.compareTo(m)>=0)return d.subtract(m);if(d.signum()<0)d.addTo(m,d);else return d;return d.signum()<0?d.add(m):d}function bnIsProbablePrime(t){var x=this.abs(),i;if(x.t==1&&x[0]<=lowprimes[lowprimes.length-1]){for(i=0;i<lowprimes.length;++i)if(x[0]==lowprimes[i])return!0;return!1}if(x.isEven())return!1;for(i=1;i<lowprimes.length;){for(var m=lowprimes[i],j=i+1;j<lowprimes.length&&m<lplim;)m*=lowprimes[j++];for(m=x.modInt(m);i<j;)if(m%lowprimes[i++]==0)return!1}return x.millerRabin(t)}function nbits(x){var n=1,t;return(t=x>>>16)!=0&&(x=t,n+=16),(t=x>>8)!=0&&(x=t,n+=8),(t=x>>4)!=0&&(x=t,n+=4),(t=x>>2)!=0&&(x=t,n+=2),(t=x>>1)!=0&&(x=t,n+=1),n}function bnToMPI(){var ba=this.toByteArray();var size=(ba.length-1)*8+nbits(ba[0]);var result='';return result+=_StringfromCharCode3((size&65280)>>8),result+=_StringfromCharCode3(size&255),result+=util.bin2str(ba),result}function bnpMillerRabin(t){var n1=this.subtract(BigInteger.ONE);var k=n1.getLowestSetBit();if(k<=0)return!1;var r=n1.shiftRight(k);t=t+1>>1,t>lowprimes.length&&(t=lowprimes.length);var a=nbi();for(var i=0;i<t;++i){a.fromInt(lowprimes[_Mathfloor3(Math.random()*lowprimes.length)]);var y=a.modPow(r,this);if(y.compareTo(BigInteger.ONE)!=0&&y.compareTo(n1)!=0){for(var j=1;j++<k&&y.compareTo(n1)!=0;)if(y=y.modPowInt(2,this),y.compareTo(BigInteger.ONE)==0)return!1;if(y.compareTo(n1)!=0)return!1}}return!0}function bigint_or_number(x){return typeof x==='number'?nbv(x):x}function buffer_to_ui8a(b){var l=b.length;var ret=new Uint8Array(l);for(var i=0;i<l;i++)ret[i]=b.readUInt8(i);return ret}var dbits;var canary=0xdeadbeefcafe;var j_lm=(canary&16777215)==15715070;BigInteger.prototype.am=am3,dbits=28,BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=4503599627370496,BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM='0123456789abcdefghijklmnopqrstuvwxyz';var BI_RC=[];var rr,vv;for(rr='0'.charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr='a'.charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr='A'.charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo,Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];var lplim=(1<<26)/lowprimes[lowprimes.length-1];BigInteger.prototype.chunkSize=bnpChunkSize,BigInteger.prototype.toRadix=bnpToRadix,BigInteger.prototype.fromRadix=bnpFromRadix,BigInteger.prototype.fromNumber=bnpFromNumber,BigInteger.prototype.bitwiseTo=bnpBitwiseTo,BigInteger.prototype.changeBit=bnpChangeBit,BigInteger.prototype.addTo=bnpAddTo,BigInteger.prototype.dMultiply=bnpDMultiply,BigInteger.prototype.dAddOffset=bnpDAddOffset,BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo,BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo,BigInteger.prototype.modInt=bnpModInt,BigInteger.prototype.millerRabin=bnpMillerRabin,BigInteger.prototype.clone=bnClone,BigInteger.prototype.intValue=bnIntValue,BigInteger.prototype.byteValue=bnByteValue,BigInteger.prototype.shortValue=bnShortValue,BigInteger.prototype.signum=bnSigNum,BigInteger.prototype.toByteArray=bnToByteArray,BigInteger.prototype.equals=bnEquals,BigInteger.prototype.min=bnMin,BigInteger.prototype.max=bnMax,BigInteger.prototype.and=bnAnd,BigInteger.prototype.or=bnOr,BigInteger.prototype.xor=bnXor,BigInteger.prototype.andNot=bnAndNot,BigInteger.prototype.not=bnNot,BigInteger.prototype.shiftLeft=bnShiftLeft,BigInteger.prototype.shiftRight=bnShiftRight,BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit,BigInteger.prototype.bitCount=bnBitCount,BigInteger.prototype.testBit=bnTestBit,BigInteger.prototype.setBit=bnSetBit,BigInteger.prototype.clearBit=bnClearBit,BigInteger.prototype.flipBit=bnFlipBit,BigInteger.prototype.add=bnAdd,BigInteger.prototype.subtract=bnSubtract,BigInteger.prototype.multiply=bnMultiply,BigInteger.prototype.divide=bnDivide,BigInteger.prototype.remainder=bnRemainder,BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder,BigInteger.prototype.modPow=bnModPow,BigInteger.prototype.modInverse=bnModInverse,BigInteger.prototype.pow=bnPow,BigInteger.prototype.gcd=bnGCD,BigInteger.prototype.isProbablePrime=bnIsProbablePrime,BigInteger.prototype.toMPI=bnToMPI,BigInteger.prototype.square=bnSquare;;;BigInteger.prototype.fromBuffer=function(buf){return this.fromString(buffer_to_ui8a(buf),256,!0),this},BigInteger.fromBuffer=function(buf){var ret=nbi();return ret.fromBuffer(buf),ret},BigInteger.random_nbit=function(nbits,rf){return new BigInteger(nbits,rf)},BigInteger.prototype.inspect=function(){return'<BigInteger/pure '+this.toString()+'>'},BigInteger.fromHex=function(s){if(!s.match(/^[a-fA-F0-9]*$/))throw new Error('hex string invalid: '+s);if(s.length%2!=0)throw new Error('got an odd-length hex-string');return new BigInteger(s,16)},BigInteger.valueOf=function(x){return bigint_or_number(x)},BigInteger.prototype.toBuffer=function(size){var x;!size&&(size=0);var s=this.signum();x=s==0?[]:this.toByteArray(s<0);var ret=new Buffer(x);if((diff=size-x.length)>0){var pad=new Buffer(diff);pad.fill(0),ret=Buffer.concat([pad,ret])}return ret},BigInteger.prototype.byteLength=function(){return this.t},BigInteger.prototype.toDERInteger=function(){return this.toByteArray(!0)},BigInteger.fromDERInteger=function(buf){var x=nbi();return x.fromString(buf,256,!1),x},BigInteger.prototype.toByteArrayUnsigned=function(){return new Uint8Array(this.toBuffer())},BigInteger.fromByteArrayUnsigned=function(b){return BigInteger.fromBuffer(new Buffer(b))},BigInteger.prototype.toHex=function(size){return this.toBuffer(size).toString('hex')},module.exports={BigInteger:BigInteger,nbi:nbi,nbv:nbv,Montgomery:Montgomery,Classic:Classic,nbits:nbits}})(this)}).call(this,require('buffer').Buffer)},{'buffer':80}],74:[function(require,module,exports){var engine=null;var modules=['bigint','bignum'];for(var i in modules)try{engine=require(modules[i]);break}catch(e){}exports.engine=engine},{}],75:[function(require,module,exports){function replacer(key,value){return util.isUndefined(value)?''+value:util.isNumber(value)&&(isNaN(value)||!isFinite(value))?value.toString():util.isFunction(value)||util.isRegExp(value)?value.toString():value}function truncate(s,n){return util.isString(s)?s.length<n?s:s.slice(0,n):s}function getMessage(self){return truncate(JSON.stringify(self.actual,replacer),128)+' '+self.operator+' '+truncate(JSON.stringify(self.expected,replacer),128)}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction})}function ok(value,message){!value&&fail(value,!0,message,'==',assert.ok)}function _deepEqual(actual,expected){if(actual===expected)return!0;if(util.isBuffer(actual)&&util.isBuffer(expected)){if(actual.length!=expected.length)return!1;for(var i=0;i<actual.length;i++)if(actual[i]!==expected[i])return!1;return!0}return util.isDate(actual)&&util.isDate(expected)?actual.getTime()===expected.getTime():util.isRegExp(actual)&&util.isRegExp(expected)?actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase:util.isObject(actual)||util.isObject(expected)?objEquiv(actual,expected):actual==expected}function isArguments(object){return Object.prototype.toString.call(object)=='[object Arguments]'}function objEquiv(a,b){if(util.isNullOrUndefined(a)||util.isNullOrUndefined(b))return!1;if(a.prototype!==b.prototype)return!1;if(isArguments(a))return!!isArguments(b)&&(a=pSlice.call(a),b=pSlice.call(b),_deepEqual(a,b));try{var ka=objectKeys(a),kb=objectKeys(b),key,i}catch(e){return!1}if(ka.length!=kb.length)return!1;for(ka.sort(),kb.sort(),i=ka.length-1;i>=0;i--)if(ka[i]!=kb[i])return!1;for(i=ka.length-1;i>=0;i--)if(key=ka[i],!_deepEqual(a[key],b[key]))return!1;return!0}function expectedException(actual,expected){if(!actual||!expected)return!1;return Object.prototype.toString.call(expected)=='[object RegExp]'?expected.test(actual):!!(actual instanceof expected)||!(expected.call({},actual)!==!0)}function _throws(shouldThrow,block,expected,message){var actual;util.isString(expected)&&(message=expected,expected=null);try{block()}catch(e){actual=e}if(message=(expected&&expected.name?' ('+expected.name+').':'.')+(message?' '+message:'.'),shouldThrow&&!actual&&fail(actual,expected,'Missing expected exception'+message),!shouldThrow&&expectedException(actual,expected)&&fail(actual,expected,'Got unwanted exception'+message),shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual)throw actual}var util=require('util/');var pSlice=Array.prototype.slice;var hasOwn=Object.prototype.hasOwnProperty;var assert=module.exports=ok;assert.AssertionError=function AssertionError(options){this.name='AssertionError',this.actual=options.actual,this.expected=options.expected,this.operator=options.operator,options.message?(this.message=options.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,stackStartFunction);else{var err=new Error;if(err.stack){var out=err.stack;var fn_name=stackStartFunction.name;var idx=out.indexOf('\n'+fn_name);if(idx>=0){var next_line=out.indexOf('\n',idx+1);out=out.substring(next_line+1)}this.stack=out}}},util.inherits(assert.AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=function equal(actual,expected,message){actual!=expected&&fail(actual,expected,message,'==',assert.equal)},assert.notEqual=function notEqual(actual,expected,message){actual==expected&&fail(actual,expected,message,'!=',assert.notEqual)},assert.deepEqual=function deepEqual(actual,expected,message){!_deepEqual(actual,expected)&&fail(actual,expected,message,'deepEqual',assert.deepEqual)},assert.notDeepEqual=function notDeepEqual(actual,expected,message){_deepEqual(actual,expected)&&fail(actual,expected,message,'notDeepEqual',assert.notDeepEqual)},assert.strictEqual=function strictEqual(actual,expected,message){actual!==expected&&fail(actual,expected,message,'===',assert.strictEqual)},assert.notStrictEqual=function notStrictEqual(actual,expected,message){actual===expected&&fail(actual,expected,message,'!==',assert.notStrictEqual)},assert.throws=function(block,error,message){_throws.apply(this,[!0].concat(pSlice.call(arguments)))},assert.doesNotThrow=function(block,message){_throws.apply(this,[!1].concat(pSlice.call(arguments)))},assert.ifError=function(err){if(err)throw err};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)hasOwn.call(obj,key)&&keys.push(key);return keys}},{'util/':77}],76:[function(require,module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==='object'&&typeof arg.copy==='function'&&typeof arg.fill==='function'&&typeof arg.readUInt8==='function'}},{}],77:[function(require,module,exports){(function(process,global){function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(ctx.depth=arguments[2]),arguments.length>=4&&(ctx.colors=arguments[3]),isBoolean(opts)?ctx.showHidden=opts:opts&&exports._extend(ctx,opts),isUndefined(ctx.showHidden)&&(ctx.showHidden=!1),isUndefined(ctx.depth)&&(ctx.depth=2),isUndefined(ctx.colors)&&(ctx.colors=!1),isUndefined(ctx.customInspect)&&(ctx.customInspect=!0),ctx.colors&&(ctx.stylize=stylizeWithColor),formatValue(ctx,obj,ctx.depth)}function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];return style?'\x1B['+inspect.colors[style][0]+'m'+str+'\x1B['+inspect.colors[style][1]+'m':str}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};return array.forEach(function(val,idx){hash[val]=!0}),hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);return!isString(ret)&&(ret=formatValue(ctx,ret,recurseTimes)),ret}var primitive=formatPrimitive(ctx,value);if(primitive)return primitive;var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden&&(keys=Object.getOwnPropertyNames(value)),isError(value)&&(keys.indexOf('message')>=0||keys.indexOf('description')>=0))return formatError(value);if(keys.length===0){if(isFunction(value)){var name=value.name?': '+value.name:'';return ctx.stylize('[Function'+name+']','special')}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),'regexp');if(isDate(value))return ctx.stylize(Date.prototype.toString.call(value),'date');if(isError(value))return formatError(value)}var base='',array=!1,braces=['{','}'];if(isArray(value)&&(array=!0,braces=['[',']']),isFunction(value)){var n=value.name?': '+value.name:'';base=' [Function'+n+']'}if(isRegExp(value)&&(base=' '+RegExp.prototype.toString.call(value)),isDate(value)&&(base=' '+Date.prototype.toUTCString.call(value)),isError(value)&&(base=' '+formatError(value)),keys.length===0&&(!array||value.length==0))return braces[0]+base+braces[1];if(recurseTimes<0)return isRegExp(value)?ctx.stylize(RegExp.prototype.toString.call(value),'regexp'):ctx.stylize('[Object]','special');ctx.seen.push(value);var output;return output=array?formatArray(ctx,value,recurseTimes,visibleKeys,keys):keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)}),ctx.seen.pop(),reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize('undefined','undefined');if(isString(value)){var simple='\''+JSON.stringify(value).replace(/^"|"$/g,'').replace(/'/g,'\\\'').replace(/\\"/g,'"')+'\'';return ctx.stylize(simple,'string')}return isNumber(value)?ctx.stylize(''+value,'number'):isBoolean(value)?ctx.stylize(''+value,'boolean'):isNull(value)?ctx.stylize('null','null'):void 0}function formatError(value){return'['+Error.prototype.toString.call(value)+']'}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i)hasOwnProperty(value,i+'')?output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,i+'',!0)):output.push('');return keys.forEach(function(key){!key.match(/^\d+$/)&&output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,!0))}),output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;if(desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]},desc.get?desc.set?str=ctx.stylize('[Getter/Setter]','special'):str=ctx.stylize('[Getter]','special'):desc.set&&(str=ctx.stylize('[Setter]','special')),!hasOwnProperty(visibleKeys,key)&&(name='['+key+']'),!str&&(ctx.seen.indexOf(desc.value)<0?(str=isNull(recurseTimes)?formatValue(ctx,desc.value,null):formatValue(ctx,desc.value,recurseTimes-1),str.indexOf('\n')>-1&&(array?str=str.split('\n').map(function(line){return'  '+line}).join('\n').substr(2):str='\n'+str.split('\n').map(function(line){return'   '+line}).join('\n'))):str=ctx.stylize('[Circular]','special')),isUndefined(name)){if(array&&key.match(/^\d+$/))return str;name=JSON.stringify(''+key),name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(name=name.substr(1,name.length-2),name=ctx.stylize(name,'name')):(name=name.replace(/'/g,'\\\'').replace(/\\"/g,'"').replace(/(^"|"$)/g,'\''),name=ctx.stylize(name,'string'))}return name+': '+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){return numLinesEst++,cur.indexOf('\n')>=0&&numLinesEst++,prev+cur.replace(/\u001b\[\d\d?m/g,'').length+1},0);return length>60?braces[0]+(base===''?'':base+'\n ')+' '+output.join(',\n  ')+' '+braces[1]:braces[0]+base+' '+output.join(', ')+' '+braces[1]}function isArray(ar){return Array.isArray(ar)}function isBoolean(arg){return typeof arg==='boolean'}function isNull(arg){return arg===null}function isNullOrUndefined(arg){return arg==null}function isNumber(arg){return typeof arg==='number'}function isString(arg){return typeof arg==='string'}function isSymbol(arg){return typeof arg==='symbol'}function isUndefined(arg){return arg===void 0}function isRegExp(re){return isObject(re)&&objectToString(re)==='[object RegExp]'}function isObject(arg){return typeof arg==='object'&&arg!==null}function isDate(d){return isObject(d)&&objectToString(d)==='[object Date]'}function isError(e){return isObject(e)&&(objectToString(e)==='[object Error]'||e instanceof Error)}function isFunction(arg){return typeof arg==='function'}function isPrimitive(arg){return arg===null||typeof arg==='boolean'||typeof arg==='number'||typeof arg==='string'||typeof arg==='symbol'||typeof arg==='undefined'}function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?'0'+n.toString(10):n.toString(10)}function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(':');return[d.getDate(),months[d.getMonth()],time].join(' ')}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++)objects.push(inspect(arguments[i]));return objects.join(' ')}var i=1;var args=arguments;var len=args.length;var str=(f+'').replace(formatRegExp,function(x){if(x==='%%')return'%';if(i>=len)return x;switch(x){case'%s':return args[i++]+'';case'%d':return+args[i++];case'%j':try{return JSON.stringify(args[i++])}catch(_){return'[Circular]'}default:return x;}});for(var x=args[i];i<len;x=args[++i])str+=isNull(x)||!isObject(x)?' '+x:' '+inspect(x);return str},exports.deprecate=function(fn,msg){function deprecated(){if(!warned){if(process.throwDeprecation)throw new Error(msg);else if(process.traceDeprecation);else;warned=!0}return fn.apply(this,arguments)}if(isUndefined(global.process))return function(){return exports.deprecate(fn,msg).apply(this,arguments)};if(process.noDeprecation===!0)return fn;var warned=!1;return deprecated};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||''),set=set.toUpperCase(),!debugs[set])if(new RegExp('\\b'+set+'\\b','i').test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments)}}else debugs[set]=function(){};return debugs[set]},exports.inspect=inspect,inspect.colors={'bold':[1,22],'italic':[3,23],'underline':[4,24],'inverse':[7,27],'white':[37,39],'grey':[90,39],'black':[30,39],'blue':[34,39],'cyan':[36,39],'green':[32,39],'magenta':[35,39],'red':[31,39],'yellow':[33,39]},inspect.styles={'special':'cyan','number':'yellow','boolean':'yellow','undefined':'grey','null':'bold','string':'green','date':'magenta','regexp':'red'},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=require('./support/isBuffer');var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];exports.log=function(){},exports.inherits=require('inherits'),exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);for(var i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin}}).call(this,require('_process'),typeof global==='undefined'?typeof self==='undefined'?typeof window==='undefined'?{}:window:self:global)},{'./support/isBuffer':76,'_process':99,'inherits':97}],78:[function(require,module,exports){(function(process,Buffer){function Zlib(mode){if(mode<exports.DEFLATE||mode>exports.UNZIP)throw new TypeError('Bad argument');this.mode=mode,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function bufferSet(data,offset){for(var i=0;i<data.length;i++)this[offset+i]=data[i]}var msg=require('pako/lib/zlib/messages');var zstream=require('pako/lib/zlib/zstream');var zlib_deflate=require('pako/lib/zlib/deflate.js');var zlib_inflate=require('pako/lib/zlib/inflate.js');var constants=require('pako/lib/zlib/constants');for(var key in constants)exports[key]=constants[key];exports.NONE=0,exports.DEFLATE=1,exports.INFLATE=2,exports.GZIP=3,exports.GUNZIP=4,exports.DEFLATERAW=5,exports.INFLATERAW=6,exports.UNZIP=7,Zlib.prototype.init=function(windowBits,level,memLevel,strategy,dictionary){switch(this.windowBits=windowBits,this.level=level,this.memLevel=memLevel,this.strategy=strategy,(this.mode===exports.GZIP||this.mode===exports.GUNZIP)&&(this.windowBits+=16),this.mode===exports.UNZIP&&(this.windowBits+=32),(this.mode===exports.DEFLATERAW||this.mode===exports.INFLATERAW)&&(this.windowBits=-this.windowBits),this.strm=new zstream,this.mode){case exports.DEFLATE:case exports.GZIP:case exports.DEFLATERAW:var status=zlib_deflate.deflateInit2(this.strm,this.level,exports.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case exports.INFLATE:case exports.GUNZIP:case exports.INFLATERAW:case exports.UNZIP:var status=zlib_inflate.inflateInit2(this.strm,this.windowBits);break;default:throw new Error('Unknown mode '+this.mode);}return status===exports.Z_OK?void(this.write_in_progress=!1,this.init_done=!0):void this._error(status)},Zlib.prototype.params=function(){throw new Error('deflateParams Not supported')},Zlib.prototype._writeCheck=function(){if(!this.init_done)throw new Error('write before init');if(this.mode===exports.NONE)throw new Error('already finalized');if(this.write_in_progress)throw new Error('write already in progress');if(this.pending_close)throw new Error('close is pending')},Zlib.prototype.write=function(flush,input,in_off,in_len,out,out_off,out_len){this._writeCheck(),this.write_in_progress=!0;var self=this;return process.nextTick(function(){self.write_in_progress=!1;var res=self._write(flush,input,in_off,in_len,out,out_off,out_len);self.callback(res[0],res[1]),self.pending_close&&self.close()}),this},Zlib.prototype.writeSync=function(flush,input,in_off,in_len,out,out_off,out_len){return this._writeCheck(),this._write(flush,input,in_off,in_len,out,out_off,out_len)},Zlib.prototype._write=function(flush,input,in_off,in_len,out,out_off,out_len){if(this.write_in_progress=!0,flush!==exports.Z_NO_FLUSH&&flush!==exports.Z_PARTIAL_FLUSH&&flush!==exports.Z_SYNC_FLUSH&&flush!==exports.Z_FULL_FLUSH&&flush!==exports.Z_FINISH&&flush!==exports.Z_BLOCK)throw new Error('Invalid flush value');input==null&&(input=new Buffer(0),in_len=0,in_off=0),out.set=out._set?out._set:bufferSet;var strm=this.strm;switch(strm.avail_in=in_len,strm.input=input,strm.next_in=in_off,strm.avail_out=out_len,strm.output=out,strm.next_out=out_off,this.mode){case exports.DEFLATE:case exports.GZIP:case exports.DEFLATERAW:var status=zlib_deflate.deflate(strm,flush);break;case exports.UNZIP:case exports.INFLATE:case exports.GUNZIP:case exports.INFLATERAW:var status=zlib_inflate.inflate(strm,flush);break;default:throw new Error('Unknown mode '+this.mode);}return status!==exports.Z_STREAM_END&&status!==exports.Z_OK&&this._error(status),this.write_in_progress=!1,[strm.avail_in,strm.avail_out]},Zlib.prototype.close=function(){return this.write_in_progress?void(this.pending_close=!0):void(this.pending_close=!1,this.mode===exports.DEFLATE||this.mode===exports.GZIP||this.mode===exports.DEFLATERAW?zlib_deflate.deflateEnd(this.strm):zlib_inflate.inflateEnd(this.strm),this.mode=exports.NONE)},Zlib.prototype.reset=function(){switch(this.mode){case exports.DEFLATE:case exports.DEFLATERAW:var status=zlib_deflate.deflateReset(this.strm);break;case exports.INFLATE:case exports.INFLATERAW:var status=zlib_inflate.inflateReset(this.strm);}status!==exports.Z_OK&&this._error(status)},Zlib.prototype._error=function(status){this.onerror(msg[status]+': '+this.strm.msg,status),this.write_in_progress=!1,this.pending_close&&this.close()},exports.Zlib=Zlib}).call(this,require('_process'),require('buffer').Buffer)},{'_process':99,'buffer':80,'pako/lib/zlib/constants':153,'pako/lib/zlib/deflate.js':155,'pako/lib/zlib/inflate.js':157,'pako/lib/zlib/messages':159,'pako/lib/zlib/zstream':161}],79:[function(require,module,exports){(function(process,Buffer){function zlibBuffer(engine,buffer,callback){function flow(){for(var chunk;null!==(chunk=engine.read());)buffers.push(chunk),nread+=chunk.length;engine.once('readable',flow)}function onError(err){engine.removeListener('end',onEnd),engine.removeListener('readable',flow),callback(err)}function onEnd(){var buf=Buffer.concat(buffers,nread);buffers=[],callback(null,buf),engine.close()}var buffers=[];var nread=0;engine.on('error',onError),engine.on('end',onEnd),engine.end(buffer),flow()}function zlibBufferSync(engine,buffer){if(typeof buffer==='string'&&(buffer=new Buffer(buffer)),!Buffer.isBuffer(buffer))throw new TypeError('Not a string or buffer');var flushFlag=binding.Z_FINISH;return engine._processChunk(buffer,flushFlag)}function Deflate(opts){return this instanceof Deflate?void Zlib.call(this,opts,binding.DEFLATE):new Deflate(opts)}function Inflate(opts){return this instanceof Inflate?void Zlib.call(this,opts,binding.INFLATE):new Inflate(opts)}function Gzip(opts){return this instanceof Gzip?void Zlib.call(this,opts,binding.GZIP):new Gzip(opts)}function Gunzip(opts){return this instanceof Gunzip?void Zlib.call(this,opts,binding.GUNZIP):new Gunzip(opts)}function DeflateRaw(opts){return this instanceof DeflateRaw?void Zlib.call(this,opts,binding.DEFLATERAW):new DeflateRaw(opts)}function InflateRaw(opts){return this instanceof InflateRaw?void Zlib.call(this,opts,binding.INFLATERAW):new InflateRaw(opts)}function Unzip(opts){return this instanceof Unzip?void Zlib.call(this,opts,binding.UNZIP):new Unzip(opts)}function Zlib(opts,mode){if(this._opts=opts=opts||{},this._chunkSize=opts.chunkSize||exports.Z_DEFAULT_CHUNK,Transform.call(this,opts),opts.flush&&opts.flush!==binding.Z_NO_FLUSH&&opts.flush!==binding.Z_PARTIAL_FLUSH&&opts.flush!==binding.Z_SYNC_FLUSH&&opts.flush!==binding.Z_FULL_FLUSH&&opts.flush!==binding.Z_FINISH&&opts.flush!==binding.Z_BLOCK)throw new Error('Invalid flush flag: '+opts.flush);if(this._flushFlag=opts.flush||binding.Z_NO_FLUSH,opts.chunkSize&&(opts.chunkSize<exports.Z_MIN_CHUNK||opts.chunkSize>exports.Z_MAX_CHUNK))throw new Error('Invalid chunk size: '+opts.chunkSize);if(opts.windowBits&&(opts.windowBits<exports.Z_MIN_WINDOWBITS||opts.windowBits>exports.Z_MAX_WINDOWBITS))throw new Error('Invalid windowBits: '+opts.windowBits);if(opts.level&&(opts.level<exports.Z_MIN_LEVEL||opts.level>exports.Z_MAX_LEVEL))throw new Error('Invalid compression level: '+opts.level);if(opts.memLevel&&(opts.memLevel<exports.Z_MIN_MEMLEVEL||opts.memLevel>exports.Z_MAX_MEMLEVEL))throw new Error('Invalid memLevel: '+opts.memLevel);if(opts.strategy&&opts.strategy!=exports.Z_FILTERED&&opts.strategy!=exports.Z_HUFFMAN_ONLY&&opts.strategy!=exports.Z_RLE&&opts.strategy!=exports.Z_FIXED&&opts.strategy!=exports.Z_DEFAULT_STRATEGY)throw new Error('Invalid strategy: '+opts.strategy);if(opts.dictionary&&!Buffer.isBuffer(opts.dictionary))throw new Error('Invalid dictionary: it should be a Buffer instance');this._binding=new binding.Zlib(mode);var self=this;this._hadError=!1,this._binding.onerror=function(message,errno){self._binding=null,self._hadError=!0;var error=new Error(message);error.errno=errno,error.code=exports.codes[errno],self.emit('error',error)};var level=exports.Z_DEFAULT_COMPRESSION;typeof opts.level==='number'&&(level=opts.level);var strategy=exports.Z_DEFAULT_STRATEGY;typeof opts.strategy==='number'&&(strategy=opts.strategy),this._binding.init(opts.windowBits||exports.Z_DEFAULT_WINDOWBITS,level,opts.memLevel||exports.Z_DEFAULT_MEMLEVEL,strategy,opts.dictionary),this._buffer=new Buffer(this._chunkSize),this._offset=0,this._closed=!1,this._level=level,this._strategy=strategy,this.once('end',this.close)}var Transform=require('_stream_transform');var binding=require('./binding');var util=require('util');var assert=require('assert').ok;binding.Z_MIN_WINDOWBITS=8,binding.Z_MAX_WINDOWBITS=15,binding.Z_DEFAULT_WINDOWBITS=15,binding.Z_MIN_CHUNK=64,binding.Z_MAX_CHUNK=Infinity,binding.Z_DEFAULT_CHUNK=16*1024,binding.Z_MIN_MEMLEVEL=1,binding.Z_MAX_MEMLEVEL=9,binding.Z_DEFAULT_MEMLEVEL=8,binding.Z_MIN_LEVEL=-1,binding.Z_MAX_LEVEL=9,binding.Z_DEFAULT_LEVEL=binding.Z_DEFAULT_COMPRESSION,Object.keys(binding).forEach(function(k){k.match(/^Z/)&&(exports[k]=binding[k])}),exports.codes={Z_OK:binding.Z_OK,Z_STREAM_END:binding.Z_STREAM_END,Z_NEED_DICT:binding.Z_NEED_DICT,Z_ERRNO:binding.Z_ERRNO,Z_STREAM_ERROR:binding.Z_STREAM_ERROR,Z_DATA_ERROR:binding.Z_DATA_ERROR,Z_MEM_ERROR:binding.Z_MEM_ERROR,Z_BUF_ERROR:binding.Z_BUF_ERROR,Z_VERSION_ERROR:binding.Z_VERSION_ERROR},Object.keys(exports.codes).forEach(function(k){exports.codes[exports.codes[k]]=k}),exports.Deflate=Deflate,exports.Inflate=Inflate,exports.Gzip=Gzip,exports.Gunzip=Gunzip,exports.DeflateRaw=DeflateRaw,exports.InflateRaw=InflateRaw,exports.Unzip=Unzip,exports.createDeflate=function(o){return new Deflate(o)},exports.createInflate=function(o){return new Inflate(o)},exports.createDeflateRaw=function(o){return new DeflateRaw(o)},exports.createInflateRaw=function(o){return new InflateRaw(o)},exports.createGzip=function(o){return new Gzip(o)},exports.createGunzip=function(o){return new Gunzip(o)},exports.createUnzip=function(o){return new Unzip(o)},exports.deflate=function(buffer,opts,callback){return typeof opts==='function'&&(callback=opts,opts={}),zlibBuffer(new Deflate(opts),buffer,callback)},exports.deflateSync=function(buffer,opts){return zlibBufferSync(new Deflate(opts),buffer)},exports.gzip=function(buffer,opts,callback){return typeof opts==='function'&&(callback=opts,opts={}),zlibBuffer(new Gzip(opts),buffer,callback)},exports.gzipSync=function(buffer,opts){return zlibBufferSync(new Gzip(opts),buffer)},exports.deflateRaw=function(buffer,opts,callback){return typeof opts==='function'&&(callback=opts,opts={}),zlibBuffer(new DeflateRaw(opts),buffer,callback)},exports.deflateRawSync=function(buffer,opts){return zlibBufferSync(new DeflateRaw(opts),buffer)},exports.unzip=function(buffer,opts,callback){return typeof opts==='function'&&(callback=opts,opts={}),zlibBuffer(new Unzip(opts),buffer,callback)},exports.unzipSync=function(buffer,opts){return zlibBufferSync(new Unzip(opts),buffer)},exports.inflate=function(buffer,opts,callback){return typeof opts==='function'&&(callback=opts,opts={}),zlibBuffer(new Inflate(opts),buffer,callback)},exports.inflateSync=function(buffer,opts){return zlibBufferSync(new Inflate(opts),buffer)},exports.gunzip=function(buffer,opts,callback){return typeof opts==='function'&&(callback=opts,opts={}),zlibBuffer(new Gunzip(opts),buffer,callback)},exports.gunzipSync=function(buffer,opts){return zlibBufferSync(new Gunzip(opts),buffer)},exports.inflateRaw=function(buffer,opts,callback){return typeof opts==='function'&&(callback=opts,opts={}),zlibBuffer(new InflateRaw(opts),buffer,callback)},exports.inflateRawSync=function(buffer,opts){return zlibBufferSync(new InflateRaw(opts),buffer)},util.inherits(Zlib,Transform),Zlib.prototype.params=function(level,strategy,callback){if(level<exports.Z_MIN_LEVEL||level>exports.Z_MAX_LEVEL)throw new RangeError('Invalid compression level: '+level);if(strategy!=exports.Z_FILTERED&&strategy!=exports.Z_HUFFMAN_ONLY&&strategy!=exports.Z_RLE&&strategy!=exports.Z_FIXED&&strategy!=exports.Z_DEFAULT_STRATEGY)throw new TypeError('Invalid strategy: '+strategy);if(this._level!==level||this._strategy!==strategy){var self=this;this.flush(binding.Z_SYNC_FLUSH,function(){self._binding.params(level,strategy),!self._hadError&&(self._level=level,self._strategy=strategy,callback&&callback())})}else process.nextTick(callback)},Zlib.prototype.reset=function(){return this._binding.reset()},Zlib.prototype._flush=function(callback){this._transform(new Buffer(0),'',callback)},Zlib.prototype.flush=function(kind,callback){var ws=this._writableState;if((typeof kind==='function'||kind===void 0&&!callback)&&(callback=kind,kind=binding.Z_FULL_FLUSH),ws.ended)callback&&process.nextTick(callback);else if(ws.ending)callback&&this.once('end',callback);else if(ws.needDrain){var self=this;this.once('drain',function(){self.flush(callback)})}else this._flushFlag=kind,this.write(new Buffer(0),'',callback)},Zlib.prototype.close=function(callback){if(callback&&process.nextTick(callback),!this._closed){this._closed=!0,this._binding.close();var self=this;process.nextTick(function(){self.emit('close')})}},Zlib.prototype._transform=function(chunk,encoding,cb){var flushFlag;var ws=this._writableState;var ending=ws.ending||ws.ended;var last=ending&&(!chunk||ws.length===chunk.length);if(!chunk===null&&!Buffer.isBuffer(chunk))return cb(new Error('invalid input'));last?flushFlag=binding.Z_FINISH:(flushFlag=this._flushFlag,chunk.length>=ws.length&&(this._flushFlag=this._opts.flush||binding.Z_NO_FLUSH));var self=this;this._processChunk(chunk,flushFlag,cb)},Zlib.prototype._processChunk=function(chunk,flushFlag,cb){function callback(availInAfter,availOutAfter){if(!self._hadError){var have=availOutBefore-availOutAfter;if(assert(have>=0,'have should not go down'),have>0){var out=self._buffer.slice(self._offset,self._offset+have);self._offset+=have,async?self.push(out):(buffers.push(out),nread+=out.length)}if((availOutAfter===0||self._offset>=self._chunkSize)&&(availOutBefore=self._chunkSize,self._offset=0,self._buffer=new Buffer(self._chunkSize)),availOutAfter===0){if(inOff+=availInBefore-availInAfter,availInBefore=availInAfter,!async)return!0;var newReq=self._binding.write(flushFlag,chunk,inOff,availInBefore,self._buffer,self._offset,self._chunkSize);return newReq.callback=callback,void(newReq.buffer=chunk)}return!!async&&void cb()}}var availInBefore=chunk&&chunk.length;var availOutBefore=this._chunkSize-this._offset;var inOff=0;var self=this;var async=typeof cb==='function';if(!async){var buffers=[];var nread=0;var error;this.on('error',function(er){error=er});do var res=this._binding.writeSync(flushFlag,chunk,inOff,availInBefore,this._buffer,this._offset,availOutBefore);while(!this._hadError&&callback(res[0],res[1]));if(this._hadError)throw error;var buf=Buffer.concat(buffers,nread);return this.close(),buf}var req=this._binding.write(flushFlag,chunk,inOff,availInBefore,this._buffer,this._offset,availOutBefore);req.buffer=chunk,req.callback=callback},util.inherits(Deflate,Zlib),util.inherits(Inflate,Zlib),util.inherits(Gzip,Zlib),util.inherits(Gunzip,Zlib),util.inherits(DeflateRaw,Zlib),util.inherits(InflateRaw,Zlib),util.inherits(Unzip,Zlib)}).call(this,require('_process'),require('buffer').Buffer)},{'./binding':78,'_process':99,'_stream_transform':110,'assert':75,'buffer':80,'util':114}],80:[function(require,module,exports){function Buffer(subject,encoding,noZero){if(!(this instanceof Buffer))return new Buffer(subject,encoding,noZero);var type=typeof subject;var length;if(type==='number')length=subject>0?subject>>>0:0;else if(type==='string')encoding==='base64'&&(subject=base64clean(subject)),length=Buffer.byteLength(subject,encoding);else if(type==='object'&&subject!==null)subject.type==='Buffer'&&isArray(subject.data)&&(subject=subject.data),length=+subject.length>0?_Mathfloor3(+subject.length):0;else throw new Error('First argument needs to be a number, array or string.');var buf;TYPED_ARRAY_SUPPORT?buf=Buffer._augment(new Uint8Array(length)):(buf=this,buf.length=length,buf._isBuffer=!0);var i;if(TYPED_ARRAY_SUPPORT&&typeof subject.byteLength==='number')buf._set(subject);else if(isArrayish(subject)){if(Buffer.isBuffer(subject))for(i=0;i<length;i++)buf[i]=subject.readUInt8(i);else for(i=0;i<length;i++)buf[i]=(subject[i]%256+256)%256;}else if(type==='string')buf.write(subject,0,encoding);else if(type==='number'&&!TYPED_ARRAY_SUPPORT&&!noZero)for(i=0;i<length;i++)buf[i]=0;return buf}function hexWrite(buf,string,offset,length){offset=+offset||0;var remaining=buf.length-offset;length?(length=+length,length>remaining&&(length=remaining)):length=remaining;var strLen=string.length;assert(strLen%2===0,'Invalid hex string'),length>strLen/2&&(length=strLen/2);for(var i=0;i<length;i++){var byte=parseInt(string.substr(i*2,2),16);assert(!isNaN(byte),'Invalid hex string'),buf[offset+i]=byte}return i}function utf8Write(buf,string,offset,length){var charsWritten=blitBuffer(utf8ToBytes(string),buf,offset,length);return charsWritten}function asciiWrite(buf,string,offset,length){var charsWritten=blitBuffer(asciiToBytes(string),buf,offset,length);return charsWritten}function binaryWrite(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){var charsWritten=blitBuffer(base64ToBytes(string),buf,offset,length);return charsWritten}function utf16leWrite(buf,string,offset,length){var charsWritten=blitBuffer(utf16leToBytes(string),buf,offset,length);return charsWritten}function base64Slice(buf,start,end){return start===0&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){var res='';var tmp='';end=_Mathmin5(buf.length,end);for(var i=start;i<end;i++)buf[i]<=127?(res+=decodeUtf8Char(tmp)+_StringfromCharCode3(buf[i]),tmp=''):tmp+='%'+buf[i].toString(16);return res+decodeUtf8Char(tmp)}function asciiSlice(buf,start,end){var ret='';end=_Mathmin5(buf.length,end);for(var i=start;i<end;i++)ret+=_StringfromCharCode3(buf[i]);return ret}function binarySlice(buf,start,end){return asciiSlice(buf,start,end)}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);var out='';for(var i=start;i<end;i++)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res='';for(var i=0;i<bytes.length;i+=2)res+=_StringfromCharCode3(bytes[i]+bytes[i+1]*256);return res}function readUInt16(buf,offset,littleEndian,noAssert){!noAssert&&(assert(typeof littleEndian==='boolean','missing or invalid endian'),assert(offset!==undefined&&offset!==null,'missing offset'),assert(offset+1<buf.length,'Trying to read beyond buffer length'));var len=buf.length;if(!(offset>=len)){var val;return littleEndian?(val=buf[offset],offset+1<len&&(val|=buf[offset+1]<<8)):(val=buf[offset]<<8,offset+1<len&&(val|=buf[offset+1])),val}}function readUInt32(buf,offset,littleEndian,noAssert){!noAssert&&(assert(typeof littleEndian==='boolean','missing or invalid endian'),assert(offset!==undefined&&offset!==null,'missing offset'),assert(offset+3<buf.length,'Trying to read beyond buffer length'));var len=buf.length;if(!(offset>=len)){var val;return littleEndian?(offset+2<len&&(val=buf[offset+2]<<16),offset+1<len&&(val|=buf[offset+1]<<8),val|=buf[offset],offset+3<len&&(val+=buf[offset+3]<<24>>>0)):(offset+1<len&&(val=buf[offset+1]<<16),offset+2<len&&(val|=buf[offset+2]<<8),offset+3<len&&(val|=buf[offset+3]),val+=buf[offset]<<24>>>0),val}}function readInt16(buf,offset,littleEndian,noAssert){!noAssert&&(assert(typeof littleEndian==='boolean','missing or invalid endian'),assert(offset!==undefined&&offset!==null,'missing offset'),assert(offset+1<buf.length,'Trying to read beyond buffer length'));var len=buf.length;if(!(offset>=len)){var val=readUInt16(buf,offset,littleEndian,!0);var neg=val&32768;return neg?(65535-val+1)*-1:val}}function readInt32(buf,offset,littleEndian,noAssert){!noAssert&&(assert(typeof littleEndian==='boolean','missing or invalid endian'),assert(offset!==undefined&&offset!==null,'missing offset'),assert(offset+3<buf.length,'Trying to read beyond buffer length'));var len=buf.length;if(!(offset>=len)){var val=readUInt32(buf,offset,littleEndian,!0);var neg=val&2147483648;return neg?(4294967295-val+1)*-1:val}}function readFloat(buf,offset,littleEndian,noAssert){return!noAssert&&(assert(typeof littleEndian==='boolean','missing or invalid endian'),assert(offset+3<buf.length,'Trying to read beyond buffer length')),ieee754.read(buf,offset,littleEndian,23,4)}function readDouble(buf,offset,littleEndian,noAssert){return!noAssert&&(assert(typeof littleEndian==='boolean','missing or invalid endian'),assert(offset+7<buf.length,'Trying to read beyond buffer length')),ieee754.read(buf,offset,littleEndian,52,8)}function writeUInt16(buf,value,offset,littleEndian,noAssert){!noAssert&&(assert(value!==undefined&&value!==null,'missing value'),assert(typeof littleEndian==='boolean','missing or invalid endian'),assert(offset!==undefined&&offset!==null,'missing offset'),assert(offset+1<buf.length,'trying to write beyond buffer length'),verifuint(value,65535));var len=buf.length;if(!(offset>=len)){for(var i=0,j=_Mathmin5(len-offset,2);i<j;i++)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8;return offset+2}}function writeUInt32(buf,value,offset,littleEndian,noAssert){!noAssert&&(assert(value!==undefined&&value!==null,'missing value'),assert(typeof littleEndian==='boolean','missing or invalid endian'),assert(offset!==undefined&&offset!==null,'missing offset'),assert(offset+3<buf.length,'trying to write beyond buffer length'),verifuint(value,4294967295));var len=buf.length;if(!(offset>=len)){for(var i=0,j=_Mathmin5(len-offset,4);i<j;i++)buf[offset+i]=value>>>(littleEndian?i:3-i)*8&255;return offset+4}}function writeInt16(buf,value,offset,littleEndian,noAssert){!noAssert&&(assert(value!==undefined&&value!==null,'missing value'),assert(typeof littleEndian==='boolean','missing or invalid endian'),assert(offset!==undefined&&offset!==null,'missing offset'),assert(offset+1<buf.length,'Trying to write beyond buffer length'),verifsint(value,32767,-32768));var len=buf.length;if(!(offset>=len))return value>=0?writeUInt16(buf,value,offset,littleEndian,noAssert):writeUInt16(buf,65535+value+1,offset,littleEndian,noAssert),offset+2}function writeInt32(buf,value,offset,littleEndian,noAssert){!noAssert&&(assert(value!==undefined&&value!==null,'missing value'),assert(typeof littleEndian==='boolean','missing or invalid endian'),assert(offset!==undefined&&offset!==null,'missing offset'),assert(offset+3<buf.length,'Trying to write beyond buffer length'),verifsint(value,2147483647,-2147483648));var len=buf.length;if(!(offset>=len))return value>=0?writeUInt32(buf,value,offset,littleEndian,noAssert):writeUInt32(buf,4294967295+value+1,offset,littleEndian,noAssert),offset+4}function writeFloat(buf,value,offset,littleEndian,noAssert){!noAssert&&(assert(value!==undefined&&value!==null,'missing value'),assert(typeof littleEndian==='boolean','missing or invalid endian'),assert(offset!==undefined&&offset!==null,'missing offset'),assert(offset+3<buf.length,'Trying to write beyond buffer length'),verifIEEE754(value,3.4028234663852886e+38,-3.4028234663852886e+38));var len=buf.length;if(!(offset>=len))return ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){!noAssert&&(assert(value!==undefined&&value!==null,'missing value'),assert(typeof littleEndian==='boolean','missing or invalid endian'),assert(offset!==undefined&&offset!==null,'missing offset'),assert(offset+7<buf.length,'Trying to write beyond buffer length'),verifIEEE754(value,1.7976931348623157e+308,-1.7976931348623157e+308));var len=buf.length;if(!(offset>=len))return ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}function base64clean(str){for(str=stringtrim(str).replace(INVALID_BASE64_RE,'');str.length%4!==0;)str+='=';return str}function stringtrim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,'')}function isArray(subject){return(Array.isArray||function(subject){return Object.prototype.toString.call(subject)==='[object Array]'})(subject)}function isArrayish(subject){return isArray(subject)||Buffer.isBuffer(subject)||subject&&typeof subject==='object'&&typeof subject.length==='number'}function toHex(n){return n<16?'0'+n.toString(16):n.toString(16)}function utf8ToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++){var b=str.charCodeAt(i);if(b<=127)byteArray.push(b);else{var start=i;b>=55296&&b<=57343&&i++;var h=encodeURIComponent(str.slice(start,i+1)).substr(1).split('%');for(var j=0;j<h.length;j++)byteArray.push(parseInt(h[j],16))}}return byteArray}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++)byteArray.push(str.charCodeAt(i)&255);return byteArray}function utf16leToBytes(str){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;i++)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}function base64ToBytes(str){return base64.toByteArray(str)}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);i++)dst[i+offset]=src[i];return i}function decodeUtf8Char(str){try{return decodeURIComponent(str)}catch(err){return'\uFFFD'}}function verifuint(value,max){assert(typeof value==='number','cannot write a non-number as a number'),assert(value>=0,'specified a negative value for writing an unsigned value'),assert(value<=max,'value is larger than maximum value for type'),assert(_Mathfloor3(value)===value,'value has a fractional component')}function verifsint(value,max,min){assert(typeof value==='number','cannot write a non-number as a number'),assert(value<=max,'value larger than maximum allowed value'),assert(value>=min,'value smaller than minimum allowed value'),assert(_Mathfloor3(value)===value,'value has a fractional component')}function verifIEEE754(value,max,min){assert(typeof value==='number','cannot write a non-number as a number'),assert(value<=max,'value larger than maximum allowed value'),assert(value>=min,'value smaller than minimum allowed value')}function assert(test,message){if(!test)throw new Error(message||'Failed assertion')}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var base64=require('base64-js');var ieee754=require('ieee754');exports.Buffer=Buffer,exports.SlowBuffer=Buffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var TYPED_ARRAY_SUPPORT=function(){try{var buf=new ArrayBuffer(0);var arr=new Uint8Array(buf);return arr.foo=function(){return 42},42===arr.foo()&&typeof arr.subarray==='function'&&new Uint8Array(1).subarray(1,1).byteLength===0}catch(e){return!1}}();Buffer.isEncoding=function(encoding){switch((encoding+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'binary':case'base64':case'raw':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},Buffer.isBuffer=function(b){return!!(b!=null&&b._isBuffer)},Buffer.byteLength=function(str,encoding){var ret;switch(str=str.toString(),encoding||'utf8'){case'hex':ret=str.length/2;break;case'utf8':case'utf-8':ret=utf8ToBytes(str).length;break;case'ascii':case'binary':case'raw':ret=str.length;break;case'base64':ret=base64ToBytes(str).length;break;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':ret=str.length*2;break;default:throw new Error('Unknown encoding');}return ret},Buffer.concat=function(list,totalLength){if(assert(isArray(list),'Usage: Buffer.concat(list[, length])'),list.length===0)return new Buffer(0);if(list.length===1)return list[0];var i;if(totalLength===undefined)for(totalLength=0,i=0;i<list.length;i++)totalLength+=list[i].length;var buf=new Buffer(totalLength);var pos=0;for(i=0;i<list.length;i++){var item=list[i];item.copy(buf,pos),pos+=item.length}return buf},Buffer.compare=function(a,b){assert(Buffer.isBuffer(a)&&Buffer.isBuffer(b),'Arguments must be Buffers');var x=a.length;var y=b.length;for(var i=0,len=_Mathmin5(x,y);i<len&&a[i]===b[i];i++);return i!==len&&(x=a[i],y=b[i]),x<y?-1:y<x?1:0},Buffer.prototype.write=function(string,offset,length,encoding){if(isFinite(offset))!isFinite(length)&&(encoding=length,length=undefined);else{var swap=encoding;encoding=offset,offset=length,length=swap}offset=+offset||0;var remaining=this.length-offset;length?(length=+length,length>remaining&&(length=remaining)):length=remaining,encoding=((encoding||'utf8')+'').toLowerCase();var ret;switch(encoding){case'hex':ret=hexWrite(this,string,offset,length);break;case'utf8':case'utf-8':ret=utf8Write(this,string,offset,length);break;case'ascii':ret=asciiWrite(this,string,offset,length);break;case'binary':ret=binaryWrite(this,string,offset,length);break;case'base64':ret=base64Write(this,string,offset,length);break;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':ret=utf16leWrite(this,string,offset,length);break;default:throw new Error('Unknown encoding');}return ret},Buffer.prototype.toString=function(encoding,start,end){var self=this;if(encoding=((encoding||'utf8')+'').toLowerCase(),start=+start||0,end=end===undefined?self.length:+end,end===start)return'';var ret;switch(encoding){case'hex':ret=hexSlice(self,start,end);break;case'utf8':case'utf-8':ret=utf8Slice(self,start,end);break;case'ascii':ret=asciiSlice(self,start,end);break;case'binary':ret=binarySlice(self,start,end);break;case'base64':ret=base64Slice(self,start,end);break;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':ret=utf16leSlice(self,start,end);break;default:throw new Error('Unknown encoding');}return ret},Buffer.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.equals=function(b){return assert(Buffer.isBuffer(b),'Argument must be a Buffer'),Buffer.compare(this,b)===0},Buffer.prototype.compare=function(b){return assert(Buffer.isBuffer(b),'Argument must be a Buffer'),Buffer.compare(this,b)},Buffer.prototype.copy=function(target,target_start,start,end){var source=this;if((!start&&(start=0),!end&&end!==0&&(end=this.length),!target_start&&(target_start=0),end!==start)&&target.length!==0&&source.length!==0){assert(end>=start,'sourceEnd < sourceStart'),assert(target_start>=0&&target_start<target.length,'targetStart out of bounds'),assert(start>=0&&start<source.length,'sourceStart out of bounds'),assert(end>=0&&end<=source.length,'sourceEnd out of bounds'),end>this.length&&(end=this.length),target.length-target_start<end-start&&(end=target.length-target_start+start);var len=end-start;if(len<100||!TYPED_ARRAY_SUPPORT)for(var i=0;i<len;i++)target[i+target_start]=this[i+start];else target._set(this.subarray(start,start+len),target_start)}},Buffer.prototype.slice=function(start,end){var len=this.length;if(start=~~start,end=end===undefined?len:~~end,start<0?(start+=len,start<0&&(start=0)):start>len&&(start=len),end<0?(end+=len,end<0&&(end=0)):end>len&&(end=len),end<start&&(end=start),TYPED_ARRAY_SUPPORT)return Buffer._augment(this.subarray(start,end));var sliceLen=end-start;var newBuf=new Buffer(sliceLen,undefined,!0);for(var i=0;i<sliceLen;i++)newBuf[i]=this[i+start];return newBuf},Buffer.prototype.get=function(offset){return this.readUInt8(offset)},Buffer.prototype.set=function(v,offset){return this.writeUInt8(v,offset)},Buffer.prototype.readUInt8=function(offset,noAssert){return!noAssert&&(assert(offset!==undefined&&offset!==null,'missing offset'),assert(offset<this.length,'Trying to read beyond buffer length')),offset>=this.length?void 0:this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return readUInt16(this,offset,!0,noAssert)},Buffer.prototype.readUInt16BE=function(offset,noAssert){return readUInt16(this,offset,!1,noAssert)},Buffer.prototype.readUInt32LE=function(offset,noAssert){return readUInt32(this,offset,!0,noAssert)},Buffer.prototype.readUInt32BE=function(offset,noAssert){return readUInt32(this,offset,!1,noAssert)},Buffer.prototype.readInt8=function(offset,noAssert){if(!noAssert&&(assert(offset!==undefined&&offset!==null,'missing offset'),assert(offset<this.length,'Trying to read beyond buffer length')),!(offset>=this.length)){var neg=this[offset]&128;return neg?(255-this[offset]+1)*-1:this[offset]}},Buffer.prototype.readInt16LE=function(offset,noAssert){return readInt16(this,offset,!0,noAssert)},Buffer.prototype.readInt16BE=function(offset,noAssert){return readInt16(this,offset,!1,noAssert)},Buffer.prototype.readInt32LE=function(offset,noAssert){return readInt32(this,offset,!0,noAssert)},Buffer.prototype.readInt32BE=function(offset,noAssert){return readInt32(this,offset,!1,noAssert)},Buffer.prototype.readFloatLE=function(offset,noAssert){return readFloat(this,offset,!0,noAssert)},Buffer.prototype.readFloatBE=function(offset,noAssert){return readFloat(this,offset,!1,noAssert)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return readDouble(this,offset,!0,noAssert)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return readDouble(this,offset,!1,noAssert)},Buffer.prototype.writeUInt8=function(value,offset,noAssert){if(!noAssert&&(assert(value!==undefined&&value!==null,'missing value'),assert(offset!==undefined&&offset!==null,'missing offset'),assert(offset<this.length,'trying to write beyond buffer length'),verifuint(value,255)),!(offset>=this.length))return this[offset]=value,offset+1},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){return writeUInt16(this,value,offset,!0,noAssert)},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){return writeUInt16(this,value,offset,!1,noAssert)},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){return writeUInt32(this,value,offset,!0,noAssert)},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){return writeUInt32(this,value,offset,!1,noAssert)},Buffer.prototype.writeInt8=function(value,offset,noAssert){if(!noAssert&&(assert(value!==undefined&&value!==null,'missing value'),assert(offset!==undefined&&offset!==null,'missing offset'),assert(offset<this.length,'Trying to write beyond buffer length'),verifsint(value,127,-128)),!(offset>=this.length))return value>=0?this.writeUInt8(value,offset,noAssert):this.writeUInt8(255+value+1,offset,noAssert),offset+1},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){return writeInt16(this,value,offset,!0,noAssert)},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){return writeInt16(this,value,offset,!1,noAssert)},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){return writeInt32(this,value,offset,!0,noAssert)},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){return writeInt32(this,value,offset,!1,noAssert)},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.fill=function(value,start,end){if((!value&&(value=0),!start&&(start=0),!end&&(end=this.length),assert(end>=start,'end < start'),end!==start)&&this.length!==0){assert(start>=0&&start<this.length,'start out of bounds'),assert(end>=0&&end<=this.length,'end out of bounds');var i;if(typeof value==='number')for(i=start;i<end;i++)this[i]=value;else{var bytes=utf8ToBytes(value.toString());var len=bytes.length;for(i=start;i<end;i++)this[i]=bytes[i%len]}return this}},Buffer.prototype.inspect=function(){var out=[];var len=this.length;for(var i=0;i<len;i++)if(out[i]=toHex(this[i]),i===exports.INSPECT_MAX_BYTES){out[i+1]='...';break}return'<Buffer '+out.join(' ')+'>'},Buffer.prototype.toArrayBuffer=function(){if(typeof Uint8Array!=='undefined'){if(TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;var buf=new Uint8Array(this.length);for(var i=0,len=buf.length;i<len;i+=1)buf[i]=this[i];return buf.buffer}throw new Error('Buffer.toArrayBuffer not supported in this browser')};var BP=Buffer.prototype;Buffer._augment=function(arr){return arr._isBuffer=!0,arr._get=arr.get,arr._set=arr.set,arr.get=BP.get,arr.set=BP.set,arr.write=BP.write,arr.toString=BP.toString,arr.toLocaleString=BP.toString,arr.toJSON=BP.toJSON,arr.equals=BP.equals,arr.compare=BP.compare,arr.copy=BP.copy,arr.slice=BP.slice,arr.readUInt8=BP.readUInt8,arr.readUInt16LE=BP.readUInt16LE,arr.readUInt16BE=BP.readUInt16BE,arr.readUInt32LE=BP.readUInt32LE,arr.readUInt32BE=BP.readUInt32BE,arr.readInt8=BP.readInt8,arr.readInt16LE=BP.readInt16LE,arr.readInt16BE=BP.readInt16BE,arr.readInt32LE=BP.readInt32LE,arr.readInt32BE=BP.readInt32BE,arr.readFloatLE=BP.readFloatLE,arr.readFloatBE=BP.readFloatBE,arr.readDoubleLE=BP.readDoubleLE,arr.readDoubleBE=BP.readDoubleBE,arr.writeUInt8=BP.writeUInt8,arr.writeUInt16LE=BP.writeUInt16LE,arr.writeUInt16BE=BP.writeUInt16BE,arr.writeUInt32LE=BP.writeUInt32LE,arr.writeUInt32BE=BP.writeUInt32BE,arr.writeInt8=BP.writeInt8,arr.writeInt16LE=BP.writeInt16LE,arr.writeInt16BE=BP.writeInt16BE,arr.writeInt32LE=BP.writeInt32LE,arr.writeInt32BE=BP.writeInt32BE,arr.writeFloatLE=BP.writeFloatLE,arr.writeFloatBE=BP.writeFloatBE,arr.writeDoubleLE=BP.writeDoubleLE,arr.writeDoubleBE=BP.writeDoubleBE,arr.fill=BP.fill,arr.inspect=BP.inspect,arr.toArrayBuffer=BP.toArrayBuffer,arr};var INVALID_BASE64_RE=/[^+\/0-9A-z]/g},{'base64-js':81,'ieee754':82}],81:[function(require,module,exports){var lookup='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';;(function(exports){'use strict';function decode(elt){var code=elt.charCodeAt(0);return code===PLUS?62:code===SLASH?63:code<NUMBER?-1:code<NUMBER+10?code-NUMBER+26+26:code<UPPER+26?code-UPPER:code<LOWER+26?code-LOWER+26:void 0}function b64ToByteArray(b64){function push(v){arr[L++]=v}var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0)throw new Error('Invalid string. Length must be a multiple of 4');var len=b64.length;placeHolders='='===b64.charAt(len-2)?2:'='===b64.charAt(len-1)?1:0,arr=new Arr(b64.length*3/4-placeHolders),l=placeHolders>0?b64.length-4:b64.length;var L=0;for(i=0,j=0;i<l;i+=4,j+=3)tmp=decode(b64.charAt(i))<<18|decode(b64.charAt(i+1))<<12|decode(b64.charAt(i+2))<<6|decode(b64.charAt(i+3)),push((tmp&16711680)>>16),push((tmp&65280)>>8),push(tmp&255);return placeHolders===2?(tmp=decode(b64.charAt(i))<<2|decode(b64.charAt(i+1))>>4,push(tmp&255)):placeHolders===1&&(tmp=decode(b64.charAt(i))<<10|decode(b64.charAt(i+1))<<4|decode(b64.charAt(i+2))>>2,push(tmp>>8&255),push(tmp&255)),arr}function uint8ToBase64(uint8){function encode(num){return lookup.charAt(num)}function tripletToBase64(num){return encode(num>>18&63)+encode(num>>12&63)+encode(num>>6&63)+encode(num&63)}var extraBytes=uint8.length%3,output='',i,temp,length;for(i=0,length=uint8.length-extraBytes;i<length;i+=3)temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2],output+=tripletToBase64(temp);return extraBytes===1?(temp=uint8[uint8.length-1],output+=encode(temp>>2),output+=encode(temp<<4&63),output+='=='):extraBytes===2?(temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1],output+=encode(temp>>10),output+=encode(temp>>4&63),output+=encode(temp<<2&63),output+='='):void 0,output}var Arr=typeof Uint8Array==='undefined'?Array:Uint8Array;var PLUS='+'.charCodeAt(0);var SLASH='/'.charCodeAt(0);var NUMBER='0'.charCodeAt(0);var LOWER='a'.charCodeAt(0);var UPPER='A'.charCodeAt(0);exports.toByteArray=b64ToByteArray,exports.fromByteArray=uint8ToBase64})(typeof exports==='undefined'?this.base64js={}:exports)},{}],82:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i],e,m;for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8);if(e===0)e=1-eBias;else{if(e===eMax)return m?NaN:(s?-1:1)*Infinity;m+=_Mathpow3(2,mLen),e-=eBias}return(s?-1:1)*m*_Mathpow3(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var eLen=nBytes*8-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=mLen===23?5.960464477539063e-8-6.617444900424222e-24:0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||value===0&&1/value<0?1:0,e,m,c;for(value=_Mathabs2(value),isNaN(value)||value===Infinity?(m=isNaN(value)?1:0,e=eMax):(e=_Mathfloor3(_Mathlog(value)/_MathLN),value*(c=_Mathpow3(2,-e))<1&&(e--,c*=2),value+=e+eBias>=1?rt/c:rt*_Mathpow3(2,1-eBias),value*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*_Mathpow3(2,mLen),e+=eBias):(m=value*_Mathpow3(2,eBias-1)*_Mathpow3(2,mLen),e=0));mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=s*128}},{}],83:[function(require,module,exports){(function(Buffer){function toConstructor(fn){return function(){var buffers=[];var m={update:function(data,enc){return!Buffer.isBuffer(data)&&(data=new Buffer(data,enc)),buffers.push(data),this},digest:function(enc){var buf=Buffer.concat(buffers);var r=fn(buf);return buffers=null,enc?r.toString(enc):r}};return m}}var createHash=require('sha.js');var md5=toConstructor(require('./md5'));var rmd160=toConstructor(require('ripemd160'));module.exports=function(alg){return'md5'===alg?new md5:'rmd160'===alg?new rmd160:createHash(alg)}}).call(this,require('buffer').Buffer)},{'./md5':87,'buffer':80,'ripemd160':88,'sha.js':90}],84:[function(require,module,exports){(function(Buffer){function Hmac(alg,key){if(!(this instanceof Hmac))return new Hmac(alg,key);this._opad=opad,this._alg=alg,key=this._key=Buffer.isBuffer(key)?key:new Buffer(key),key.length>blocksize?key=createHash(alg).update(key).digest():key.length<blocksize&&(key=Buffer.concat([key,zeroBuffer],blocksize));var ipad=this._ipad=new Buffer(blocksize);var opad=this._opad=new Buffer(blocksize);for(var i=0;i<blocksize;i++)ipad[i]=key[i]^54,opad[i]=key[i]^92;this._hash=createHash(alg).update(ipad)}var createHash=require('./create-hash');var blocksize=64;var zeroBuffer=new Buffer(blocksize);zeroBuffer.fill(0),module.exports=Hmac,Hmac.prototype.update=function(data,enc){return this._hash.update(data,enc),this},Hmac.prototype.digest=function(enc){var h=this._hash.digest();return createHash(this._alg).update(this._opad).update(h).digest(enc)}}).call(this,require('buffer').Buffer)},{'./create-hash':83,'buffer':80}],85:[function(require,module,exports){(function(Buffer){function toArray(buf,bigEndian){if(buf.length%intSize!==0){var len=buf.length+(intSize-buf.length%intSize);buf=Buffer.concat([buf,zeroBuffer],len)}var arr=[];var fn=bigEndian?buf.readInt32BE:buf.readInt32LE;for(var i=0;i<buf.length;i+=intSize)arr.push(fn.call(buf,i));return arr}function toBuffer(arr,size,bigEndian){var buf=new Buffer(size);var fn=bigEndian?buf.writeInt32BE:buf.writeInt32LE;for(var i=0;i<arr.length;i++)fn.call(buf,arr[i],i*4,!0);return buf}function hash(buf,fn,hashSize,bigEndian){!Buffer.isBuffer(buf)&&(buf=new Buffer(buf));var arr=fn(toArray(buf,bigEndian),buf.length*chrsz);return toBuffer(arr,hashSize,bigEndian)}var intSize=4;var zeroBuffer=new Buffer(intSize);zeroBuffer.fill(0);var chrsz=8;module.exports={hash:hash}}).call(this,require('buffer').Buffer)},{'buffer':80}],86:[function(require,module,exports){(function(Buffer){function error(){var m=[].slice.call(arguments).join(' ');throw new Error([m,'we accept pull requests','http://github.com/dominictarr/crypto-browserify'].join('\n'))}function each(a,f){for(var i in a)f(a[i],i)}var rng=require('./rng');exports.createHash=require('./create-hash'),exports.createHmac=require('./create-hmac'),exports.randomBytes=function(size,callback){if(callback&&callback.call)try{callback.call(this,undefined,new Buffer(rng(size)))}catch(err){callback(err)}else return new Buffer(rng(size))},exports.getHashes=function(){return['sha1','sha256','md5','rmd160']};var p=require('./pbkdf2')(exports.createHmac);exports.pbkdf2=p.pbkdf2,exports.pbkdf2Sync=p.pbkdf2Sync,each(['createCredentials','createCipher','createCipheriv','createDecipher','createDecipheriv','createSign','createVerify','createDiffieHellman'],function(name){exports[name]=function(){error('sorry,',name,'is not implemented yet')}})}).call(this,require('buffer').Buffer)},{'./create-hash':83,'./create-hmac':84,'./pbkdf2':94,'./rng':95,'buffer':80}],87:[function(require,module,exports){function core_md5(x,len){x[len>>5]|=128<<len%32,x[(len+64>>>9<<4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16){var olda=a;var oldb=b;var oldc=c;var oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936),d=md5_ff(d,a,b,c,x[i+1],12,-389564586),c=md5_ff(c,d,a,b,x[i+2],17,606105819),b=md5_ff(b,c,d,a,x[i+3],22,-1044525330),a=md5_ff(a,b,c,d,x[i+4],7,-176418897),d=md5_ff(d,a,b,c,x[i+5],12,1200080426),c=md5_ff(c,d,a,b,x[i+6],17,-1473231341),b=md5_ff(b,c,d,a,x[i+7],22,-45705983),a=md5_ff(a,b,c,d,x[i+8],7,1770035416),d=md5_ff(d,a,b,c,x[i+9],12,-1958414417),c=md5_ff(c,d,a,b,x[i+10],17,-42063),b=md5_ff(b,c,d,a,x[i+11],22,-1990404162),a=md5_ff(a,b,c,d,x[i+12],7,1804603682),d=md5_ff(d,a,b,c,x[i+13],12,-40341101),c=md5_ff(c,d,a,b,x[i+14],17,-1502002290),b=md5_ff(b,c,d,a,x[i+15],22,1236535329),a=md5_gg(a,b,c,d,x[i+1],5,-165796510),d=md5_gg(d,a,b,c,x[i+6],9,-1069501632),c=md5_gg(c,d,a,b,x[i+11],14,643717713),b=md5_gg(b,c,d,a,x[i+0],20,-373897302),a=md5_gg(a,b,c,d,x[i+5],5,-701558691),d=md5_gg(d,a,b,c,x[i+10],9,38016083),c=md5_gg(c,d,a,b,x[i+15],14,-660478335),b=md5_gg(b,c,d,a,x[i+4],20,-405537848),a=md5_gg(a,b,c,d,x[i+9],5,568446438),d=md5_gg(d,a,b,c,x[i+14],9,-1019803690),c=md5_gg(c,d,a,b,x[i+3],14,-187363961),b=md5_gg(b,c,d,a,x[i+8],20,1163531501),a=md5_gg(a,b,c,d,x[i+13],5,-1444681467),d=md5_gg(d,a,b,c,x[i+2],9,-51403784),c=md5_gg(c,d,a,b,x[i+7],14,1735328473),b=md5_gg(b,c,d,a,x[i+12],20,-1926607734),a=md5_hh(a,b,c,d,x[i+5],4,-378558),d=md5_hh(d,a,b,c,x[i+8],11,-2022574463),c=md5_hh(c,d,a,b,x[i+11],16,1839030562),b=md5_hh(b,c,d,a,x[i+14],23,-35309556),a=md5_hh(a,b,c,d,x[i+1],4,-1530992060),d=md5_hh(d,a,b,c,x[i+4],11,1272893353),c=md5_hh(c,d,a,b,x[i+7],16,-155497632),b=md5_hh(b,c,d,a,x[i+10],23,-1094730640),a=md5_hh(a,b,c,d,x[i+13],4,681279174),d=md5_hh(d,a,b,c,x[i+0],11,-358537222),c=md5_hh(c,d,a,b,x[i+3],16,-722521979),b=md5_hh(b,c,d,a,x[i+6],23,76029189),a=md5_hh(a,b,c,d,x[i+9],4,-640364487),d=md5_hh(d,a,b,c,x[i+12],11,-421815835),c=md5_hh(c,d,a,b,x[i+15],16,530742520),b=md5_hh(b,c,d,a,x[i+2],23,-995338651),a=md5_ii(a,b,c,d,x[i+0],6,-198630844),d=md5_ii(d,a,b,c,x[i+7],10,1126891415),c=md5_ii(c,d,a,b,x[i+14],15,-1416354905),b=md5_ii(b,c,d,a,x[i+5],21,-57434055),a=md5_ii(a,b,c,d,x[i+12],6,1700485571),d=md5_ii(d,a,b,c,x[i+3],10,-1894986606),c=md5_ii(c,d,a,b,x[i+10],15,-1051523),b=md5_ii(b,c,d,a,x[i+1],21,-2054922799),a=md5_ii(a,b,c,d,x[i+8],6,1873313359),d=md5_ii(d,a,b,c,x[i+15],10,-30611744),c=md5_ii(c,d,a,b,x[i+6],15,-1560198380),b=md5_ii(b,c,d,a,x[i+13],21,1309151649),a=md5_ii(a,b,c,d,x[i+4],6,-145523070),d=md5_ii(d,a,b,c,x[i+11],10,-1120210379),c=md5_ii(c,d,a,b,x[i+2],15,718787259),b=md5_ii(b,c,d,a,x[i+9],21,-343485551),a=safe_add(a,olda),b=safe_add(b,oldb),c=safe_add(c,oldc),d=safe_add(d,oldd)}return[a,b,c,d]}function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b)}function md5_ff(a,b,c,d,x,s,t){return md5_cmn(b&c|~b&d,a,b,x,s,t)}function md5_gg(a,b,c,d,x,s,t){return md5_cmn(b&d|c&~d,a,b,x,s,t)}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t)}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|~d),a,b,x,s,t)}function safe_add(x,y){var lsw=(x&65535)+(y&65535);var msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}function bit_rol(num,cnt){return num<<cnt|num>>>32-cnt}var helpers=require('./helpers');module.exports=function md5(buf){return helpers.hash(buf,core_md5,16)}},{'./helpers':85}],88:[function(require,module,exports){(function(Buffer){function f1(x,y,z){return x^y^z}function f2(x,y,z){return x&y|~x&z}function f3(x,y,z){return(x|~y)^z}function f4(x,y,z){return x&z|y&~z}function f5(x,y,z){return x^(y|~z)}function rotl(x,n){return x<<n|x>>>32-n}function ripemd160(message){var H=[1732584193,4023233417,2562383102,271733878,3285377520];typeof message=='string'&&(message=new Buffer(message,'utf8'));var m=bytesToWords(message);var nBitsLeft=message.length*8;var nBitsTotal=message.length*8;m[nBitsLeft>>>5]|=128<<24-nBitsLeft%32,m[(nBitsLeft+64>>>9<<4)+14]=(nBitsTotal<<8|nBitsTotal>>>24)&16711935|(nBitsTotal<<24|nBitsTotal>>>8)&4278255360;for(var i=0;i<m.length;i+=16)processBlock(H,m,i);for(var i=0;i<5;i++){var H_i=H[i];H[i]=(H_i<<8|H_i>>>24)&16711935|(H_i<<24|H_i>>>8)&4278255360}var digestbytes=wordsToBytes(H);return new Buffer(digestbytes)}module.exports=ripemd160;/** @preserve
(c) 2012 by Cdric Mesnil. All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/var zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];var hl=[0,1518500249,1859775393,2400959708,2840853838];var hr=[1352829926,1548603684,1836072691,2053994217,0];var bytesToWords=function(bytes){var words=[];for(var i=0,b=0;i<bytes.length;i++,b+=8)words[b>>>5]|=bytes[i]<<24-b%32;return words};var wordsToBytes=function(words){var bytes=[];for(var b=0;b<words.length*32;b+=8)bytes.push(words[b>>>5]>>>24-b%32&255);return bytes};var processBlock=function(H,M,offset){for(var i=0;i<16;i++){var offset_i=offset+i;var M_offset_i=M[offset_i];M[offset_i]=(M_offset_i<<8|M_offset_i>>>24)&16711935|(M_offset_i<<24|M_offset_i>>>8)&4278255360}var al,bl,cl,dl,el;var ar,br,cr,dr,er;ar=al=H[0],br=bl=H[1],cr=cl=H[2],dr=dl=H[3],er=el=H[4];var t;for(var i=0;i<80;i+=1)t=al+M[offset+zl[i]]|0,t+=i<16?f1(bl,cl,dl)+hl[0]:i<32?f2(bl,cl,dl)+hl[1]:i<48?f3(bl,cl,dl)+hl[2]:i<64?f4(bl,cl,dl)+hl[3]:f5(bl,cl,dl)+hl[4],t|=0,t=rotl(t,sl[i]),t=t+el|0,al=el,el=dl,dl=rotl(cl,10),cl=bl,bl=t,t=ar+M[offset+zr[i]]|0,t+=i<16?f5(br,cr,dr)+hr[0]:i<32?f4(br,cr,dr)+hr[1]:i<48?f3(br,cr,dr)+hr[2]:i<64?f2(br,cr,dr)+hr[3]:f1(br,cr,dr)+hr[4],t|=0,t=rotl(t,sr[i]),t=t+er|0,ar=er,er=dr,dr=rotl(cr,10),cr=br,br=t;t=H[1]+cl+dr|0,H[1]=H[2]+dl+er|0,H[2]=H[3]+el+ar|0,H[3]=H[4]+al+br|0,H[4]=H[0]+bl+cr|0,H[0]=t}}).call(this,require('buffer').Buffer)},{'buffer':80}],89:[function(require,module,exports){var u=require('./util');var write=u.write;var fill=u.zeroFill;module.exports=function(Buffer){function Hash(blockSize,finalSize){this._block=new Buffer(blockSize),this._finalSize=finalSize,this._blockSize=blockSize,this._len=0,this._s=0}function lengthOf(data,enc){return enc==null?data.byteLength||data.length:enc=='ascii'||enc=='binary'?data.length:enc=='hex'?data.length/2:enc=='base64'?data.length/3:void 0}return Hash.prototype.init=function(){this._s=0,this._len=0},Hash.prototype.update=function(data,enc){var bl=this._blockSize;var length;!enc&&'string'===typeof data&&(enc='utf8'),enc?(enc==='utf-8'&&(enc='utf8'),(enc==='base64'||enc==='utf8')&&(data=new Buffer(data,enc),enc=null),length=lengthOf(data,enc)):length=data.byteLength||data.length;var l=this._len+=length;var s=this._s=this._s||0;var f=0;for(var buffer=this._block;s<l;){var t=_Mathmin5(length,f+bl-s%bl);write(buffer,data,enc,s%bl,f,t);var ch=t-f;s+=ch,f+=ch,!(s%bl)&&this._update(buffer)}return this._s=s,this},Hash.prototype.digest=function(enc){var bl=this._blockSize;var fl=this._finalSize;var len=this._len*8;var x=this._block;var bits=len%(bl*8);x[this._len%bl]=128,fill(this._block,this._len%bl+1),bits>=fl*8&&(this._update(this._block),u.zeroFill(this._block,0)),x.writeInt32BE(len,fl+4);var hash=this._update(this._block)||this._hash();return enc==null?hash:hash.toString(enc)},Hash.prototype._update=function(){throw new Error('_update must be implemented by subclass')},Hash}},{'./util':93}],90:[function(require,module,exports){var exports=module.exports=function(alg){var Alg=exports[alg];if(!Alg)throw new Error(alg+' is not supported (we accept pull requests)');return new Alg};var Buffer=require('buffer').Buffer;var Hash=require('./hash')(Buffer);exports.sha=exports.sha1=require('./sha1')(Buffer,Hash),exports.sha256=require('./sha256')(Buffer,Hash)},{'./hash':89,'./sha1':91,'./sha256':92,'buffer':80}],91:[function(require,module,exports){module.exports=function(Buffer,Hash){function Sha1(){return POOL.length?POOL.pop().init():this instanceof Sha1?void(this._w=W,Hash.call(this,16*4,14*4),this._h=null,this.init()):new Sha1}function readInt32BE(X,i){return isDV?X.getInt32(i,!1):X.readInt32BE(i)}function sha1_ft(t,b,c,d){return t<20?b&c|~b&d:t<40?b^c^d:t<60?b&c|b&d|c&d:b^c^d}function sha1_kt(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function add(x,y){return x+y|0}function rol(num,cnt){return num<<cnt|num>>>32-cnt}var inherits=require('util').inherits;inherits(Sha1,Hash);var A=0|0;var B=4|0;var C=8|0;var D=12|0;var E=16|0;var BE=!1;var LE=!0;var W=new Int32Array(80);var POOL=[];Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,Hash.prototype.init.call(this),this},Sha1.prototype._POOL=POOL;var isDV=new Buffer(1)instanceof DataView;return Sha1.prototype._update=function(array){var X=this._block;var h=this._h;var a,b,c,d,e,_a,_b,_c,_d,_e;a=_a=this._a,b=_b=this._b,c=_c=this._c,d=_d=this._d,e=_e=this._e;var w=this._w;for(var j=0;j<80;j++){var W=w[j]=j<16?X.readInt32BE(j*4):rol(w[j-3]^w[j-8]^w[j-14]^w[j-16],1);var t=add(add(rol(a,5),sha1_ft(j,b,c,d)),add(add(e,W),sha1_kt(j)));e=d,d=c,c=rol(b,30),b=a,a=t}this._a=add(a,_a),this._b=add(b,_b),this._c=add(c,_c),this._d=add(d,_d),this._e=add(e,_e)},Sha1.prototype._hash=function(){POOL.length<100&&POOL.push(this);var H=new Buffer(20);return H.writeInt32BE(this._a|0,A),H.writeInt32BE(this._b|0,B),H.writeInt32BE(this._c|0,C),H.writeInt32BE(this._d|0,D),H.writeInt32BE(this._e|0,E),H},Sha1}},{'util':114}],92:[function(require,module,exports){var inherits=require('util').inherits;var BE=!1;var LE=!0;var u=require('./util');module.exports=function(Buffer,Hash){function Sha256(){POOL.length,this.init(),this._w=W,Hash.call(this,16*4,14*4)}function S(X,n){return X>>>n|X<<32-n}function R(X,n){return X>>>n}function Ch(x,y,z){return x&y^~x&z}function Maj(x,y,z){return x&y^x&z^y&z}function Sigma0256(x){return S(x,2)^S(x,13)^S(x,22)}function Sigma1256(x){return S(x,6)^S(x,11)^S(x,25)}function Gamma0256(x){return S(x,7)^S(x,18)^R(x,3)}function Gamma1256(x){return S(x,17)^S(x,19)^R(x,10)}var K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];inherits(Sha256,Hash);var W=Array(64);var POOL=[];;Sha256.prototype.init=function(){return this._a=1779033703|0,this._b=3144134277|0,this._c=1013904242|0,this._d=2773480762|0,this._e=1359893119|0,this._f=2600822924|0,this._g=528734635|0,this._h=1541459225|0,this._len=this._s=0,this};var safe_add=function(x,y){var lsw=(x&65535)+(y&65535);var msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535};return Sha256.prototype._update=function(m){var M=this._block;var W=this._w;var a,b,c,d,e,f,g,h;var T1,T2;a=this._a|0,b=this._b|0,c=this._c|0,d=this._d|0,e=this._e|0,f=this._f|0,g=this._g|0,h=this._h|0;for(var j=0;j<64;j++){var w=W[j]=j<16?M.readInt32BE(j*4):Gamma1256(W[j-2])+W[j-7]+Gamma0256(W[j-15])+W[j-16];T1=h+Sigma1256(e)+Ch(e,f,g)+K[j]+w,T2=Sigma0256(a)+Maj(a,b,c),h=g,g=f,f=e,e=d+T1,d=c,c=b,b=a,a=T1+T2}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0,this._f=f+this._f|0,this._g=g+this._g|0,this._h=h+this._h|0},Sha256.prototype._hash=function(){POOL.length<10&&POOL.push(this);var H=new Buffer(32);return H.writeInt32BE(this._a,0),H.writeInt32BE(this._b,4),H.writeInt32BE(this._c,8),H.writeInt32BE(this._d,12),H.writeInt32BE(this._e,16),H.writeInt32BE(this._f,20),H.writeInt32BE(this._g,24),H.writeInt32BE(this._h,28),H},Sha256}},{'./util':93,'util':114}],93:[function(require,module,exports){function write(buffer,string,enc,start,from,to,LE){var l=to-from;if(enc==='ascii'||enc==='binary')for(var i=0;i<l;i++)buffer[start+i]=string.charCodeAt(i+from);else if(enc==null)for(var i=0;i<l;i++)buffer[start+i]=string[i+from];else if(enc==='hex')for(var i=0;i<l;i++){var j=from+i;buffer[start+i]=parseInt(string[j*2]+string[j*2+1],16)}else if(enc==='base64')throw new Error('base64 encoding not yet supported');else throw new Error(enc+' encoding not yet supported')}function zeroFill(buf,from){for(var i=from;i<buf.length;i++)buf[i]=0}exports.write=write,exports.zeroFill=zeroFill,exports.toString=toString},{}],94:[function(require,module,exports){(function(Buffer){var blocksize=64;var zeroBuffer=new Buffer(blocksize);zeroBuffer.fill(0),module.exports=function(createHmac,exports){return exports=exports||{},exports.pbkdf2=function(password,salt,iterations,keylen,cb){if('function'!==typeof cb)throw new Error('No callback provided to pbkdf2');setTimeout(function(){cb(null,exports.pbkdf2Sync(password,salt,iterations,keylen))})},exports.pbkdf2Sync=function(key,salt,iterations,keylen){if('number'!==typeof iterations)throw new TypeError('Iterations not a number');if(iterations<0)throw new TypeError('Bad iterations');if('number'!==typeof keylen)throw new TypeError('Key length not a number');if(keylen<0)throw new TypeError('Bad key length');var key=Buffer.isBuffer(key)?key:new Buffer(key);key.length>blocksize?key=createHash(alg).update(key).digest():key.length<blocksize&&(key=Buffer.concat([key,zeroBuffer],blocksize));var HMAC;var p=0,i=1,itmp=new Buffer(4),cplen,digtmp;var out=new Buffer(keylen);for(out.fill(0);keylen;){cplen=keylen>20?20:keylen,itmp[0]=i>>24&255,itmp[1]=i>>16&255,itmp[2]=i>>8&255,itmp[3]=i&255,HMAC=createHmac('sha1',key),HMAC.update(salt),HMAC.update(itmp),digtmp=HMAC.digest(),digtmp.copy(out,p,0,cplen);for(var j=1;j<iterations;j++){HMAC=createHmac('sha1',key),HMAC.update(digtmp),digtmp=HMAC.digest();for(var k=0;k<cplen;k++)out[k]^=digtmp[k]}keylen-=cplen,i++,p+=cplen}return out},exports}}).call(this,require('buffer').Buffer)},{'buffer':80}],95:[function(require,module,exports){(function(Buffer){(function(){module.exports=function(size){var bytes=new Buffer(size);return crypto.getRandomValues(bytes),bytes}})()}).call(this,require('buffer').Buffer)},{'buffer':80}],96:[function(require,module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||undefined}function isFunction(arg){return typeof arg==='function'}function isNumber(arg){return typeof arg==='number'}function isObject(arg){return typeof arg==='object'&&arg!==null}function isUndefined(arg){return arg===void 0}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=undefined,EventEmitter.prototype._maxListeners=undefined,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError('n must be a positive number');return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events&&(this._events={}),type==='error'&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;else throw TypeError('Uncaught, unspecified "error" event.');return!1}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:for(len=arguments.length,args=Array(len-1),i=1;i<len;i++)args[i-1]=arguments[i];handler.apply(this,args);}else if(isObject(handler)){for(len=arguments.length,args=Array(len-1),i=1;i<len;i++)args[i-1]=arguments[i];for(listeners=handler.slice(),len=listeners.length,i=0;i<len;i++)listeners[i].apply(this,args)}return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError('listener must be a function');if(!this._events&&(this._events={}),this._events.newListener&&this.emit('newListener',type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned){var m;m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,void 0,void 0)}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),!fired&&(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError('listener must be a function');var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError('listener must be a function');if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit('removeListener',type,listener);else if(isObject(list)){for(i=length;i-->0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(position<0)return this;list.length===1?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit('removeListener',type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[type]&&delete this._events[type],this;if(arguments.length===0){for(key in this._events)key!=='removeListener'&&this.removeAllListeners(key);return this.removeAllListeners('removeListener'),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[],ret},EventEmitter.listenerCount=function(emitter,type){var ret;return ret=emitter._events&&emitter._events[type]?isFunction(emitter._events[type])?1:emitter._events[type].length:0,ret}},{}],97:[function(require,module,exports){module.exports=typeof Object.create==='function'?function inherits(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},{}],98:[function(require,module,exports){module.exports=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=='[object Array]'}},{}],99:[function(require,module,exports){function noop(){}var process=module.exports={};process.nextTick=function(){var canSetImmediate=typeof window!=='undefined'&&window.setImmediate;var canPost=typeof window!=='undefined'&&window.postMessage&&window.addEventListener;if(canSetImmediate)return function(f){return window.setImmediate(f)};if(canPost){var queue=[];return window.addEventListener('message',function(ev){var source=ev.source;if((source===window||source===null)&&ev.data==='process-tick'&&(ev.stopPropagation(),queue.length>0)){var fn=queue.shift();fn()}},!0),function nextTick(fn){queue.push(fn),window.postMessage('process-tick','*')}}return function nextTick(fn){setTimeout(fn,0)}}(),process.title='browser',process.browser=!0,process.env={},process.argv=[],process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error('process.binding is not supported')},process.cwd=function(){return'/'},process.chdir=function(dir){throw new Error('process.chdir is not supported')}},{}],100:[function(require,module,exports){module.exports=require('./lib/_stream_duplex.js')},{'./lib/_stream_duplex.js':101}],101:[function(require,module,exports){(function(process){function Duplex(options){return this instanceof Duplex?void(Readable.call(this,options),Writable.call(this,options),options&&options.readable===!1&&(this.readable=!1),options&&options.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,options&&options.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once('end',onend)):new Duplex(options)}function onend(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++)f(xs[i],i)}module.exports=Duplex;var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};var util=require('core-util-is');util.inherits=require('inherits');var Readable=require('./_stream_readable');var Writable=require('./_stream_writable');util.inherits(Duplex,Readable),forEach(objectKeys(Writable.prototype),function(method){!Duplex.prototype[method]&&(Duplex.prototype[method]=Writable.prototype[method])})}).call(this,require('_process'))},{'./_stream_readable':103,'./_stream_writable':105,'_process':99,'core-util-is':106,'inherits':97}],102:[function(require,module,exports){function PassThrough(options){return this instanceof PassThrough?void Transform.call(this,options):new PassThrough(options)}module.exports=PassThrough;var Transform=require('./_stream_transform');var util=require('core-util-is');util.inherits=require('inherits'),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},{'./_stream_transform':104,'core-util-is':106,'inherits':97}],103:[function(require,module,exports){(function(process){function ReadableState(options,stream){options=options||{};var hwm=options.highWaterMark;this.highWaterMark=hwm||hwm===0?hwm:16*1024,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!options.objectMode,this.defaultEncoding=options.defaultEncoding||'utf8',this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(!StringDecoder&&(StringDecoder=require('string_decoder/').StringDecoder),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){return this instanceof Readable?void(this._readableState=new ReadableState(options,this),this.readable=!0,Stream.call(this)):new Readable(options)}function readableAddChunk(stream,state,chunk,encoding,addToFront){var er=chunkInvalid(state,chunk);if(er)stream.emit('error',er);else if(chunk===null||chunk===undefined)state.reading=!1,!state.ended&&onEofChunk(stream,state);else if(!(state.objectMode||chunk&&chunk.length>0))addToFront||(state.reading=!1);else if(state.ended&&!addToFront){var e=new Error('stream.push() after EOF');stream.emit('error',e)}else if(state.endEmitted&&addToFront){var e=new Error('stream.unshift() after end event');stream.emit('error',e)}else state.decoder&&!addToFront&&!encoding&&(chunk=state.decoder.write(chunk)),state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):(state.reading=!1,state.buffer.push(chunk)),state.needReadable&&emitReadable(stream),maybeReadMore(stream,state);return needMoreData(state)}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0)}function roundUpToNextPowerOf2(n){if(n>=MAX_HWM)n=MAX_HWM;else{n--;for(var p=1;p<32;p<<=1)n|=n>>p;n++}return n}function howMuchToRead(n,state){return state.length===0&&state.ended?0:state.objectMode?n===0?0:1:isNaN(n)||n===null?state.flowing&&state.buffer.length?state.buffer[0].length:state.length:n<=0?0:(n>state.highWaterMark&&(state.highWaterMark=roundUpToNextPowerOf2(n)),n>state.length?state.ended?state.length:(state.needReadable=!0,0):n)}function chunkInvalid(state,chunk){var er=null;return!Buffer.isBuffer(chunk)&&'string'!==typeof chunk&&chunk!==null&&chunk!==undefined&&!state.objectMode&&!er&&(er=new TypeError('Invalid non-string/buffer chunk')),er}function onEofChunk(stream,state){if(state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,state.length>0?emitReadable(stream):endReadable(stream)}function emitReadable(stream){var state=stream._readableState;state.needReadable=!1;state.emittedReadable||(state.emittedReadable=!0,state.sync?process.nextTick(function(){emitReadable_(stream)}):emitReadable_(stream))}function emitReadable_(stream){stream.emit('readable')}function maybeReadMore(stream,state){!state.readingMore&&(state.readingMore=!0,process.nextTick(function(){maybeReadMore_(stream,state)}))}function maybeReadMore_(stream,state){for(var len=state.length;!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark&&(stream.read(0),len!==state.length);)len=state.length;state.readingMore=!1}function pipeOnDrain(src){return function(){var dest=this;var state=src._readableState;state.awaitDrain--,state.awaitDrain===0&&flow(src)}}function flow(src){function write(dest,i,list){var written=dest.write(chunk);!1===written&&state.awaitDrain++}var state=src._readableState;var chunk;for(state.awaitDrain=0;state.pipesCount&&null!==(chunk=src.read());)if(state.pipesCount===1?write(state.pipes,0,null):forEach(state.pipes,write),src.emit('data',chunk),state.awaitDrain>0)return;return state.pipesCount===0?(state.flowing=!1,void(EE.listenerCount(src,'data')>0&&emitDataEvents(src))):void(state.ranOut=!0)}function pipeOnReadable(){this._readableState.ranOut&&(this._readableState.ranOut=!1,flow(this))}function emitDataEvents(stream,startPaused){var state=stream._readableState;if(state.flowing)throw new Error('Cannot switch to old mode now.');var paused=startPaused||!1;var readable=!1;stream.readable=!0,stream.pipe=Stream.prototype.pipe,stream.on=stream.addListener=Stream.prototype.on,stream.on('readable',function(){readable=!0;for(var c;!paused&&null!==(c=stream.read());)stream.emit('data',c);c===null&&(readable=!1,stream._readableState.needReadable=!0)}),stream.pause=function(){paused=!0,this.emit('pause')},stream.resume=function(){paused=!1,readable?process.nextTick(function(){stream.emit('readable')}):this.read(0),this.emit('resume')},stream.emit('readable')}function fromList(n,state){var list=state.buffer;var length=state.length;var stringMode=!!state.decoder;var objectMode=!!state.objectMode;var ret;if(list.length===0)return null;if(length===0)ret=null;else if(objectMode)ret=list.shift();else if(!n||n>=length)ret=stringMode?list.join(''):Buffer.concat(list,length),list.length=0;else if(n<list[0].length){var buf=list[0];ret=buf.slice(0,n),list[0]=buf.slice(n)}else if(n===list[0].length)ret=list.shift();else{ret=stringMode?'':new Buffer(n);var c=0;for(var i=0,l=list.length;i<l&&c<n;i++){var buf=list[0];var cpy=_Mathmin5(n-c,buf.length);stringMode?ret+=buf.slice(0,cpy):buf.copy(ret,c,0,cpy),cpy<buf.length?list[0]=buf.slice(cpy):list.shift(),c+=cpy}}return ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('endReadable called on non-empty stream');!state.endEmitted&&state.calledRead&&(state.ended=!0,process.nextTick(function(){!state.endEmitted&&state.length===0&&(state.endEmitted=!0,stream.readable=!1,stream.emit('end'))}))}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++)f(xs[i],i)}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}module.exports=Readable;var isArray=require('isarray');var Buffer=require('buffer').Buffer;Readable.ReadableState=ReadableState;var EE=require('events').EventEmitter;!EE.listenerCount&&(EE.listenerCount=function(emitter,type){return emitter.listeners(type).length});var Stream=require('stream');var util=require('core-util-is');util.inherits=require('inherits');var StringDecoder;util.inherits(Readable,Stream),Readable.prototype.push=function(chunk,encoding){var state=this._readableState;return typeof chunk==='string'&&!state.objectMode&&(encoding=encoding||state.defaultEncoding,encoding!==state.encoding&&(chunk=new Buffer(chunk,encoding),encoding='')),readableAddChunk(this,state,chunk,encoding,!1)},Readable.prototype.unshift=function(chunk){var state=this._readableState;return readableAddChunk(this,state,chunk,'',!0)},Readable.prototype.setEncoding=function(enc){!StringDecoder&&(StringDecoder=require('string_decoder/').StringDecoder),this._readableState.decoder=new StringDecoder(enc),this._readableState.encoding=enc};var MAX_HWM=8388608;Readable.prototype.read=function(n){var state=this._readableState;state.calledRead=!0;var nOrig=n;if((typeof n!=='number'||n>0)&&(state.emittedReadable=!1),n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended))return emitReadable(this),null;if(n=howMuchToRead(n,state),n===0&&state.ended)return state.length===0&&endReadable(this),null;var doRead=state.needReadable;state.length-n<=state.highWaterMark&&(doRead=!0),(state.ended||state.reading)&&(doRead=!1),doRead&&(state.reading=!0,state.sync=!0,state.length===0&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1),doRead&&!state.reading&&(n=howMuchToRead(nOrig,state));var ret;return ret=n>0?fromList(n,state):null,ret===null&&(state.needReadable=!0,n=0),state.length-=n,state.length===0&&!state.ended&&(state.needReadable=!0),state.ended&&!state.endEmitted&&state.length===0&&endReadable(this),ret},Readable.prototype._read=function(n){this.emit('error',new Error('not implemented'))},Readable.prototype.pipe=function(dest,pipeOpts){function onunpipe(readable){readable!==src||cleanup()}function onend(){dest.end()}function cleanup(){dest.removeListener('close',onclose),dest.removeListener('finish',onfinish),dest.removeListener('drain',ondrain),dest.removeListener('error',onerror),dest.removeListener('unpipe',onunpipe),src.removeListener('end',onend),src.removeListener('end',cleanup),(!dest._writableState||dest._writableState.needDrain)&&ondrain()}function onerror(er){unpipe(),dest.removeListener('error',onerror),EE.listenerCount(dest,'error')===0&&dest.emit('error',er)}function onclose(){dest.removeListener('finish',onfinish),unpipe()}function onfinish(){dest.removeListener('close',onclose),unpipe()}function unpipe(){src.unpipe(dest)}var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);}state.pipesCount+=1;var doEnd=(!pipeOpts||pipeOpts.end!==!1)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:cleanup;state.endEmitted?process.nextTick(endFn):src.once('end',endFn),dest.on('unpipe',onunpipe);var ondrain=pipeOnDrain(src);return dest.on('drain',ondrain),dest._events&&dest._events.error?isArray(dest._events.error)?dest._events.error.unshift(onerror):dest._events.error=[onerror,dest._events.error]:dest.on('error',onerror),dest.once('close',onclose),dest.once('finish',onfinish),dest.emit('pipe',src),!state.flowing&&(this.on('readable',pipeOnReadable),state.flowing=!0,process.nextTick(function(){flow(src)})),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState;if(state.pipesCount===0)return this;if(state.pipesCount===1)return dest&&dest!==state.pipes?this:(!dest&&(dest=state.pipes),state.pipes=null,state.pipesCount=0,this.removeListener('readable',pipeOnReadable),state.flowing=!1,dest&&dest.emit('unpipe',this),this);if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null,state.pipesCount=0,this.removeListener('readable',pipeOnReadable),state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit('unpipe',this);return this}var i=indexOf(state.pipes,dest);return i===-1?this:(state.pipes.splice(i,1),state.pipesCount-=1,state.pipesCount===1&&(state.pipes=state.pipes[0]),dest.emit('unpipe',this),this)},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==='data'&&!this._readableState.flowing&&emitDataEvents(this),ev==='readable'&&this.readable){var state=this._readableState;!state.readableListening&&(state.readableListening=!0,state.emittedReadable=!1,state.needReadable=!0,state.reading?state.length&&emitReadable(this,state):this.read(0))}return res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){emitDataEvents(this),this.read(0),this.emit('resume')},Readable.prototype.pause=function(){emitDataEvents(this,!0),this.emit('pause')},Readable.prototype.wrap=function(stream){var state=this._readableState;var paused=!1;var self=this;for(var i in stream.on('end',function(){if(state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&self.push(chunk)}self.push(null)}),stream.on('data',function(chunk){if(state.decoder&&(chunk=state.decoder.write(chunk)),chunk&&(state.objectMode||chunk.length)){var ret=self.push(chunk);!ret&&(paused=!0,stream.pause())}}),stream)typeof stream[i]==='function'&&typeof this[i]==='undefined'&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));var events=['error','close','destroy','pause','resume'];return forEach(events,function(ev){stream.on(ev,self.emit.bind(self,ev))}),self._read=function(n){paused&&(paused=!1,stream.resume())},self},Readable._fromList=fromList}).call(this,require('_process'))},{'_process':99,'buffer':80,'core-util-is':106,'events':96,'inherits':97,'isarray':98,'stream':112,'string_decoder/':107}],104:[function(require,module,exports){function TransformState(options,stream){this.afterTransform=function(er,data){return afterTransform(stream,er,data)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function afterTransform(stream,er,data){var ts=stream._transformState;ts.transforming=!1;var cb=ts.writecb;if(!cb)return stream.emit('error',new Error('no writecb in Transform class'));ts.writechunk=null,ts.writecb=null,data!==null&&data!==undefined&&stream.push(data),cb&&cb(er);var rs=stream._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&stream._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);var ts=this._transformState=new TransformState(options,this);var stream=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once('finish',function(){'function'===typeof this._flush?this._flush(function(er){done(stream,er)}):done(stream)})}function done(stream,er){if(er)return stream.emit('error',er);var ws=stream._writableState;var rs=stream._readableState;var ts=stream._transformState;if(ws.length)throw new Error('calling transform done when ws.length != 0');if(ts.transforming)throw new Error('calling transform done when still transforming');return stream.push(null)}module.exports=Transform;var Duplex=require('./_stream_duplex');var util=require('core-util-is');util.inherits=require('inherits'),util.inherits(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){throw new Error('not implemented')},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;ts.writechunk!==null&&ts.writecb&&!ts.transforming?(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)):ts.needTransform=!0}},{'./_stream_duplex':101,'core-util-is':106,'inherits':97}],105:[function(require,module,exports){(function(process){function WriteReq(chunk,encoding,cb){this.chunk=chunk,this.encoding=encoding,this.callback=cb}function WritableState(options,stream){options=options||{};var hwm=options.highWaterMark;this.highWaterMark=hwm||hwm===0?hwm:16*1024,this.objectMode=!!options.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var noDecode=options.decodeStrings===!1;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||'utf8',this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){onwrite(stream,er)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function Writable(options){var Duplex=require('./_stream_duplex');return this instanceof Writable||this instanceof Duplex?void(this._writableState=new WritableState(options,this),this.writable=!0,Stream.call(this)):new Writable(options)}function writeAfterEnd(stream,state,cb){var er=new Error('write after end');stream.emit('error',er),process.nextTick(function(){cb(er)})}function validChunk(stream,state,chunk,cb){var valid=!0;if(!Buffer.isBuffer(chunk)&&'string'!==typeof chunk&&chunk!==null&&chunk!==undefined&&!state.objectMode){var er=new TypeError('Invalid non-string/buffer chunk');stream.emit('error',er),process.nextTick(function(){cb(er)}),valid=!1}return valid}function decodeChunk(state,chunk,encoding){return!state.objectMode&&state.decodeStrings!==!1&&typeof chunk==='string'&&(chunk=new Buffer(chunk,encoding)),chunk}function writeOrBuffer(stream,state,chunk,encoding,cb){chunk=decodeChunk(state,chunk,encoding),Buffer.isBuffer(chunk)&&(encoding='buffer');var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;return!ret&&(state.needDrain=!0),state.writing?state.buffer.push(new WriteReq(chunk,encoding,cb)):doWrite(stream,state,len,chunk,encoding,cb),ret}function doWrite(stream,state,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,stream._write(chunk,encoding,state.onwrite),state.sync=!1}function onwriteError(stream,state,sync,er,cb){sync?process.nextTick(function(){cb(er)}):cb(er),stream._writableState.errorEmitted=!0,stream.emit('error',er)}function onwriteStateUpdate(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;if(onwriteStateUpdate(state),er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(stream,state);!finished&&!state.bufferProcessing&&state.buffer.length&&clearBuffer(stream,state),sync?process.nextTick(function(){afterWrite(stream,state,finished,cb)}):afterWrite(stream,state,finished,cb)}}function afterWrite(stream,state,finished,cb){!finished&&onwriteDrain(stream,state),cb(),finished&&finishMaybe(stream,state)}function onwriteDrain(stream,state){state.length===0&&state.needDrain&&(state.needDrain=!1,stream.emit('drain'))}function clearBuffer(stream,state){state.bufferProcessing=!0;for(var c=0;c<state.buffer.length;c++){var entry=state.buffer[c];var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;if(doWrite(stream,state,len,chunk,encoding,cb),state.writing){c++;break}}state.bufferProcessing=!1,c<state.buffer.length?state.buffer=state.buffer.slice(c):state.buffer.length=0}function needFinish(stream,state){return state.ending&&state.length===0&&!state.finished&&!state.writing}function finishMaybe(stream,state){var need=needFinish(stream,state);return need&&(state.finished=!0,stream.emit('finish')),need}function endWritable(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?process.nextTick(cb):stream.once('finish',cb)),state.ended=!0}module.exports=Writable;var Buffer=require('buffer').Buffer;Writable.WritableState=WritableState;var util=require('core-util-is');util.inherits=require('inherits');var Stream=require('stream');util.inherits(Writable,Stream),Writable.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe. Not readable.'))},Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=!1;return typeof encoding==='function'&&(cb=encoding,encoding=null),Buffer.isBuffer(chunk)?encoding='buffer':!encoding&&(encoding=state.defaultEncoding),typeof cb!=='function'&&(cb=function(){}),state.ended?writeAfterEnd(this,state,cb):validChunk(this,state,chunk,cb)&&(ret=writeOrBuffer(this,state,chunk,encoding,cb)),ret},Writable.prototype._write=function(chunk,encoding,cb){cb(new Error('not implemented'))},Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;typeof chunk==='function'?(cb=chunk,chunk=null,encoding=null):typeof encoding==='function'&&(cb=encoding,encoding=null),typeof chunk!=='undefined'&&chunk!==null&&this.write(chunk,encoding),!state.ending&&!state.finished&&endWritable(this,state,cb)}}).call(this,require('_process'))},{'./_stream_duplex':101,'_process':99,'buffer':80,'core-util-is':106,'inherits':97,'stream':112}],106:[function(require,module,exports){(function(Buffer){function isArray(ar){return Array.isArray(ar)}function isBoolean(arg){return typeof arg==='boolean'}function isNull(arg){return arg===null}function isNullOrUndefined(arg){return arg==null}function isNumber(arg){return typeof arg==='number'}function isString(arg){return typeof arg==='string'}function isSymbol(arg){return typeof arg==='symbol'}function isUndefined(arg){return arg===void 0}function isRegExp(re){return isObject(re)&&objectToString(re)==='[object RegExp]'}function isObject(arg){return typeof arg==='object'&&arg!==null}function isDate(d){return isObject(d)&&objectToString(d)==='[object Date]'}function isError(e){return isObject(e)&&(objectToString(e)==='[object Error]'||e instanceof Error)}function isFunction(arg){return typeof arg==='function'}function isPrimitive(arg){return arg===null||typeof arg==='boolean'||typeof arg==='number'||typeof arg==='string'||typeof arg==='symbol'||typeof arg==='undefined'}function isBuffer(arg){return Buffer.isBuffer(arg)}function objectToString(o){return Object.prototype.toString.call(o)}exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=isBuffer}).call(this,require('buffer').Buffer)},{'buffer':80}],107:[function(require,module,exports){function assertEncoding(encoding){if(encoding&&!isBufferEncoding(encoding))throw new Error('Unknown encoding: '+encoding)}function passThroughWrite(buffer){return buffer.toString(this.encoding)}function utf16DetectIncompleteChar(buffer){var incomplete=this.charReceived=buffer.length%2;return this.charLength=incomplete?2:0,incomplete}function base64DetectIncompleteChar(buffer){var incomplete=this.charReceived=buffer.length%3;return this.charLength=incomplete?3:0,incomplete}var Buffer=require('buffer').Buffer;var isBufferEncoding=Buffer.isEncoding||function(encoding){switch(encoding&&encoding.toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':case'raw':return!0;default:return!1;}};var StringDecoder=exports.StringDecoder=function(encoding){switch(this.encoding=(encoding||'utf8').toLowerCase().replace(/[-_]/,''),assertEncoding(encoding),this.encoding){case'utf8':this.surrogateSize=3;break;case'ucs2':case'utf16le':this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case'base64':this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite);}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};StringDecoder.prototype.write=function(buffer){var charStr='';for(var offset=0;this.charLength;){var i=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;if(buffer.copy(this.charBuffer,this.charReceived,offset,i),this.charReceived+=i-offset,offset=i,this.charReceived<this.charLength)return'';charStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var charCode=charStr.charCodeAt(charStr.length-1);if(charCode>=55296&&charCode<=56319){this.charLength+=this.surrogateSize,charStr='';continue}if(this.charReceived=this.charLength=0,i==buffer.length)return charStr;buffer=buffer.slice(i,buffer.length);break}var lenIncomplete=this.detectIncompleteChar(buffer);var end=buffer.length;this.charLength&&(buffer.copy(this.charBuffer,0,buffer.length-lenIncomplete,end),this.charReceived=lenIncomplete,end-=lenIncomplete),charStr+=buffer.toString(this.encoding,0,end);var end=charStr.length-1;var charCode=charStr.charCodeAt(end);if(charCode>=55296&&charCode<=56319){var size=this.surrogateSize;return this.charLength+=size,this.charReceived+=size,this.charBuffer.copy(this.charBuffer,size,0,size),this.charBuffer.write(charStr.charAt(charStr.length-1),this.encoding),charStr.substring(0,end)}return charStr},StringDecoder.prototype.detectIncompleteChar=function(buffer){for(var i=buffer.length>=3?3:buffer.length;i>0;i--){var c=buffer[buffer.length-i];if(i==1&&c>>5==6){this.charLength=2;break}if(i<=2&&c>>4==14){this.charLength=3;break}if(i<=3&&c>>3==30){this.charLength=4;break}}return i},StringDecoder.prototype.end=function(buffer){var res='';if(buffer&&buffer.length&&(res=this.write(buffer)),this.charReceived){var cr=this.charReceived;var buf=this.charBuffer;var enc=this.encoding;res+=buf.slice(0,cr).toString(enc)}return res}},{'buffer':80}],108:[function(require,module,exports){module.exports=require('./lib/_stream_passthrough.js')},{'./lib/_stream_passthrough.js':102}],109:[function(require,module,exports){exports=module.exports=require('./lib/_stream_readable.js'),exports.Readable=exports,exports.Writable=require('./lib/_stream_writable.js'),exports.Duplex=require('./lib/_stream_duplex.js'),exports.Transform=require('./lib/_stream_transform.js'),exports.PassThrough=require('./lib/_stream_passthrough.js')},{'./lib/_stream_duplex.js':101,'./lib/_stream_passthrough.js':102,'./lib/_stream_readable.js':103,'./lib/_stream_transform.js':104,'./lib/_stream_writable.js':105}],110:[function(require,module,exports){module.exports=require('./lib/_stream_transform.js')},{'./lib/_stream_transform.js':104}],111:[function(require,module,exports){module.exports=require('./lib/_stream_writable.js')},{'./lib/_stream_writable.js':105}],112:[function(require,module,exports){function Stream(){EE.call(this)}module.exports=Stream;var EE=require('events').EventEmitter;var inherits=require('inherits');inherits(Stream,EE),Stream.Readable=require('readable-stream/readable.js'),Stream.Writable=require('readable-stream/writable.js'),Stream.Duplex=require('readable-stream/duplex.js'),Stream.Transform=require('readable-stream/transform.js'),Stream.PassThrough=require('readable-stream/passthrough.js'),Stream.Stream=Stream,Stream.prototype.pipe=function(dest,options){function ondata(chunk){dest.writable&&!1===dest.write(chunk)&&source.pause&&source.pause()}function ondrain(){source.readable&&source.resume&&source.resume()}function onend(){didOnEnd||(didOnEnd=!0,dest.end())}function onclose(){didOnEnd||(didOnEnd=!0,typeof dest.destroy==='function'&&dest.destroy())}function onerror(er){if(cleanup(),EE.listenerCount(this,'error')===0)throw er}function cleanup(){source.removeListener('data',ondata),dest.removeListener('drain',ondrain),source.removeListener('end',onend),source.removeListener('close',onclose),source.removeListener('error',onerror),dest.removeListener('error',onerror),source.removeListener('end',cleanup),source.removeListener('close',cleanup),dest.removeListener('close',cleanup)}var source=this;source.on('data',ondata),dest.on('drain',ondrain),!dest._isStdio&&(!options||options.end!==!1)&&(source.on('end',onend),source.on('close',onclose));var didOnEnd=!1;return source.on('error',onerror),dest.on('error',onerror),source.on('end',cleanup),source.on('close',cleanup),dest.on('close',cleanup),dest.emit('pipe',source),dest}},{'events':96,'inherits':97,'readable-stream/duplex.js':100,'readable-stream/passthrough.js':108,'readable-stream/readable.js':109,'readable-stream/transform.js':110,'readable-stream/writable.js':111}],113:[function(require,module,exports){module.exports=require(76)},{}],114:[function(require,module,exports){module.exports=require(77)},{'./support/isBuffer':113,'_process':99,'inherits':97}],115:[function(require,module,exports){(function(){var __slice=[].slice,BaseError,Canceler,EscErr,EscOk,c_to_camel,ipush,make_error_klass,make_errors,make_esc,to_lower,util;util=require('util'),exports.BaseError=BaseError=function(msg,constructor){return Error.captureStackTrace(this,this.constructor),this.message=msg||'Error'},util.inherits(BaseError,Error),BaseError.prototype.name='BaseError',to_lower=function(s){return s[0].toUpperCase()+s.slice(1).toLowerCase()},c_to_camel=function(s){var p;return function(){var _i,_len,_ref,_results;for(_ref=s.split(/_/),_results=[],(_i=0,_len=_ref.length);_i<_len;_i++)p=_ref[_i],_results.push(to_lower(p));return _results}().join('')},make_error_klass=function(k,code,default_msg){var ctor;return ctor=function(msg){return BaseError.call(this,msg||default_msg,this.constructor),this.istack=[],this.code=code,this},util.inherits(ctor,BaseError),ctor.prototype.name=k,ctor.prototype.inspect=function(){return'['+k+': '+this.message+' (code '+this.code+')]'},ctor},exports.make_errors=make_errors=function(d){var enam,errno,k,msg,out,val;for(k in out={msg:{},name:{},code:{}},d.OK='Success',errno=100,d)msg=d[k],k==='OK'?val=0:(enam=c_to_camel(k)+'Error',val=errno++,out[enam]=make_error_klass(enam,val,msg)),out[k]=val,out.msg[k]=out.msg[val]=msg,out.name[k]=out.name[val]=k,out.code[k]=val;return out},ipush=function(e,msg){if(msg!=null)return e.istack==null&&(e.istack=[]),e.istack.push(msg)},exports.make_esc=make_esc=function(gcb,where){return function(lcb){return function(){var args,err;return(err=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],err==null)?lcb.apply(null,args):gcb.__esc?void 0:(gcb.__esc=!0,ipush(err,where),gcb(err))}}},exports.EscOk=EscOk=function(){function EscOk(gcb,where){this.gcb=gcb,this.where=where}return EscOk.prototype.bailout=function(){var t;if(this.gcb)return t=this.gcb,this.gcb=null,t(!1)},EscOk.prototype.check_ok=function(cb){return function(_this){return function(){var args,ok;return ok=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],ok?cb.apply(null,args):_this.bailout()}}(this)},EscOk.prototype.check_err=function(cb){return function(_this){return function(){var args,err;return err=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],err==null?cb.apply(null,args):(ipush(err,_this.where),_this.bailout())}}(this)},EscOk.prototype.check_non_null=function(cb){return function(_this){return function(){var args;return args=1<=arguments.length?__slice.call(arguments,0):[],args[0]==null?_this.bailout():cb.apply(null,args)}}(this)},EscOk}(),exports.EscErr=EscErr=function(){function EscErr(gcb,where){this.gcb=gcb,this.where=where}return EscErr.prototype.finish=function(err){var t;if(this.gcb)return t=this.gcb,this.gcb=null,t(err)},EscErr.prototype.check_ok=function(cb,eclass,emsg){return eclass==null&&(eclass=Error),emsg==null&&(emsg=null),function(){var args,err,ok;return ok=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],ok?cb.apply(null,args):(err=new eclass(emsg),ipush(err,this.where),this.finish(err))}},EscErr.prototype.check_err=function(cb){return function(){var args,err;return err=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],err==null?cb.apply(null,args):(ipush(err,this.where),this.finish(err))}},EscErr}(),exports.Canceler=Canceler=function(){function Canceler(klass){this.klass=klass==null?Error:klass,this._canceled=!1}return Canceler.prototype.is_canceled=function(){return this._canceled},Canceler.prototype.is_ok=function(){return!this._canceled},Canceler.prototype.cancel=function(){return this._canceled=!0},Canceler.prototype.err=function(){return this._canceled?new this.klass('Aborted'):null},Canceler}(),exports.chain=function(cb,f){return function(){var args;return args=1<=arguments.length?__slice.call(arguments,0):[],f(function(){return cb.apply(null,args)})}},exports.chain_err=function(cb,f){return function(){var args0;return args0=1<=arguments.length?__slice.call(arguments,0):[],f(function(){var args1;return args1=1<=arguments.length?__slice.call(arguments,0):[],cb.apply(null,args1[0]==null||args0[0]!=null?args0:args1)})}}}).call(this)},{'util':114}],116:[function(require,module,exports){(function(){module.exports={k:'__iced_k',k_noop:'__iced_k_noop',param:'__iced_p_',ns:'iced',runtime:'runtime',Deferrals:'Deferrals',deferrals:'__iced_deferrals',fulfill:'_fulfill',b_while:'_break',t_while:'_while',c_while:'_continue',n_while:'_next',n_arg:'__iced_next_arg',defer_method:'defer',slot:'__slot',assign_fn:'assign_fn',autocb:'autocb',retslot:'ret',trace:'__iced_trace',passed_deferral:'__iced_passed_deferral',findDeferral:'findDeferral',lineno:'lineno',parent:'parent',filename:'filename',funcname:'funcname',catchExceptions:'catchExceptions',runtime_modes:['node','inline','window','none','browserify','interp'],trampoline:'trampoline',context:'context'}}).call(this)},{}],117:[function(require,module,exports){(function(){var __slice=[].slice,C,Pipeliner,iced,__iced_k,__iced_k_noop,_iand,_ior,_timeout;__iced_k=__iced_k_noop=function(){},C=require('./const'),exports.iced=iced=require('./runtime'),_timeout=function(cb,t,res,tmp){var arr,rv,which,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),rv=new iced.Rendezvous,tmp[0]=rv.id(!0).defer({assign_fn:function(_this){return function(){return function(){return arr=__slice.call(arguments,0)}}}(this)(),lineno:20,context:__iced_deferrals}),setTimeout(rv.id(!1).defer({lineno:21,context:__iced_deferrals}),t),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/iced/iced-runtime/src/library.iced'}),rv.wait(__iced_deferrals.defer({assign_fn:function(){return function(){return which=arguments[0]}}(),lineno:22})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return res&&(res[0]=which),cb.apply(null,arr)}}(this))},exports.timeout=function(cb,t,res){var tmp;return tmp=[],_timeout(cb,t,res,tmp),tmp[0]},_iand=function(cb,res,tmp){var ok,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/iced/iced-runtime/src/library.iced'}),tmp[0]=__iced_deferrals.defer({assign_fn:function(){return function(){return ok=arguments[0]}}(),lineno:39}),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return!ok&&(res[0]=!1),cb()}}(this))},exports.iand=function(cb,res){var tmp;return tmp=[],_iand(cb,res,tmp),tmp[0]},_ior=function(cb,res,tmp){var ok,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/iced/iced-runtime/src/library.iced'}),tmp[0]=__iced_deferrals.defer({assign_fn:function(){return function(){return ok=arguments[0]}}(),lineno:58}),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return ok&&(res[0]=!0),cb()}}(this))},exports.ior=function(cb,res){var tmp;return tmp=[],_ior(cb,res,tmp),tmp[0]},exports.Pipeliner=Pipeliner=function(){function Pipeliner(window,delay){this.window=window||1,this.delay=delay||0,this.queue=[],this.n_out=0,this.cb=null,this[C.deferrals]=this,this.defer=this._defer}return Pipeliner.prototype.waitInQueue=function(cb){var ___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){var _results,_while;_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},_this.n_out>=_this.window?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/iced/iced-runtime/src/library.iced',funcname:'Pipeliner.waitInQueue'}),_this.cb=__iced_deferrals.defer({lineno:100}),__iced_deferrals._fulfill()}(_next):_break()},_while(__iced_k)}}(this)(function(_this){return function(){_this.n_out++,function(__iced_k){return _this.delay?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/iced/iced-runtime/src/library.iced',funcname:'Pipeliner.waitInQueue'}),setTimeout(__iced_deferrals.defer({lineno:108}),_this.delay),__iced_deferrals._fulfill()}(__iced_k):__iced_k()}(function(){return cb()})}}(this))},Pipeliner.prototype.__defer=function(out,deferArgs){var tmp,voidCb,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/iced/iced-runtime/src/library.iced',funcname:'Pipeliner.__defer'}),voidCb=__iced_deferrals.defer({lineno:122}),out[0]=function(){var args,_ref;return args=1<=arguments.length?__slice.call(arguments,0):[],(_ref=deferArgs.assign_fn)!=null&&_ref.apply(null,args),voidCb()},__iced_deferrals._fulfill()}}(this)(function(_this){return function(){if(_this.n_out--,_this.cb)return tmp=_this.cb,_this.cb=null,tmp()}}(this))},Pipeliner.prototype._defer=function(deferArgs){var tmp;return tmp=[],this.__defer(tmp,deferArgs),tmp[0]},Pipeliner.prototype.flush=function(autocb){var ___iced_passed_deferral,__iced_k,_results,_while;__iced_k=autocb,___iced_passed_deferral=iced.findDeferral(arguments),_results=[],_while=function(_this){var __iced_deferrals;return function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},_this.n_out?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/iced/iced-runtime/src/library.iced',funcname:'Pipeliner.flush'}),_this.cb=__iced_deferrals.defer({lineno:151}),__iced_deferrals._fulfill()}(_next):_break()}}(this),_while(__iced_k)},Pipeliner}()}).call(this)},{'./const':116,'./runtime':119}],118:[function(require,module,exports){(function(){var k,mod,mods,v,_i,_len;for(exports['const']=require('./const'),mods=[require('./runtime'),require('./library')],(_i=0,_len=mods.length);_i<_len;_i++)for(k in mod=mods[_i],mod)v=mod[k],exports[k]=v}).call(this)},{'./const':116,'./library':117,'./runtime':119}],119:[function(require,module,exports){(function(process){(function(){var __slice=[].slice,C,Deferrals,Rendezvous,exceptionHandler,findDeferral,make_defer_return,stackWalk,tick_counter,trampoline,warn,__active_trace,__c,_trace_to_string;C=require('./const'),make_defer_return=function(obj,defer_args,id,trace_template,multi){var k,ret,trace,v;for(k in trace={},trace_template)v=trace_template[k],trace[k]=v;return trace[C.lineno]=defer_args==null?void 0:defer_args[C.lineno],ret=function(){var inner_args,o,_ref;return inner_args=1<=arguments.length?__slice.call(arguments,0):[],defer_args!=null&&(_ref=defer_args.assign_fn)!=null&&_ref.apply(null,inner_args),obj?(o=obj,!multi&&(obj=null),o._fulfill(id,trace)):warn('overused deferral at '+_trace_to_string(trace))},ret[C.trace]=trace,ret},__c=0,tick_counter=function(mod){return __c++,__c%mod===0&&(__c=0,!0)},__active_trace=null,_trace_to_string=function(tr){var fn;return fn=tr[C.funcname]||'<anonymous>',''+fn+' ('+tr[C.filename]+':'+(tr[C.lineno]+1)+')'},warn=function(m){return typeof console!=='undefined'&&console!==null,void 0},exports.trampoline=trampoline=function(fn){return tick_counter(500)?typeof process!=='undefined'&&process!==null?process.nextTick(fn):setTimeout(fn):fn()},exports.Deferrals=Deferrals=function(){function Deferrals(k,trace){this.trace=trace,this.continuation=k,this.count=1,this.ret=null}return Deferrals.prototype._call=function(trace){var c;return this.continuation?(__active_trace=trace,c=this.continuation,this.continuation=null,c(this.ret)):warn('Entered dead await at '+_trace_to_string(trace))},Deferrals.prototype._fulfill=function(id,trace){if(--this.count>0);else return trampoline(function(_this){return function(){return _this._call(trace)}}(this))},Deferrals.prototype.defer=function(args){var self;return this.count++,self=this,make_defer_return(self,args,null,this.trace)},Deferrals}(),exports.findDeferral=findDeferral=function(args){var a,_i,_len;for(_i=0,_len=args.length;_i<_len;_i++)if(a=args[_i],a==null?void 0:a[C.trace])return a;return null},exports.Rendezvous=Rendezvous=function(){function Rendezvous(){this.completed=[],this.waiters=[],this.defer_id=0}var RvId;return RvId=function(){function RvId(rv,id,multi){this.rv=rv,this.id=id,this.multi=multi}return RvId.prototype.defer=function(defer_args){return this.rv._defer_with_id(this.id,defer_args,this.multi)},RvId}(),Rendezvous.prototype.wait=function(cb){var x;return this.completed.length?(x=this.completed.shift(),cb(x)):this.waiters.push(cb)},Rendezvous.prototype.defer=function(defer_args){var id;return id=this.defer_id++,this._defer_with_id(id,defer_args)},Rendezvous.prototype.id=function(i,multi){return multi=!!multi,new RvId(this,i,multi)},Rendezvous.prototype._fulfill=function(id,trace){var cb;return this.waiters.length?(cb=this.waiters.shift(),cb(id)):this.completed.push(id)},Rendezvous.prototype._defer_with_id=function(id,defer_args,multi){return this.count++,make_defer_return(this,defer_args,id,{},multi)},Rendezvous}(),exports.stackWalk=stackWalk=function(cb){var line,ret,tr,_ref;for(ret=[],tr=cb?cb[C.trace]:__active_trace;tr;)line='   at '+_trace_to_string(tr),ret.push(line),tr=tr==null||(_ref=tr[C.parent])==null?void 0:_ref[C.trace];return ret},exports.exceptionHandler=exceptionHandler=function(err,logger){var stack;if(!logger&&(logger=function(){}),logger(err.stack),stack=stackWalk(),stack.length)return logger('Iced \'stack\' trace (w/ real line numbers):'),logger(stack.join('\n'))},exports.catchExceptions=function(logger){return typeof process!=='undefined'&&process!==null?process.on('uncaughtException',function(err){return exceptionHandler(err,logger),process.exit(1)}):void 0}}).call(this)}).call(this,require('_process'))},{'./const':116,'_process':99}],120:[function(require,module,exports){!1;;exports.BWT=require('./outlib/BWT'),exports.BWTC=require('./outlib/BWTC'),exports.BitStream=require('./outlib/BitStream'),exports.Bzip2=require('./outlib/Bzip2'),exports.CRC32=require('./outlib/CRC32'),exports.Context1Model=require('./outlib/Context1Model'),exports.DefSumModel=require('./outlib/DefSumModel'),exports.DeflateDistanceModel=require('./outlib/DeflateDistanceModel'),exports.Dmc=require('./outlib/Dmc'),exports.DummyRangeCoder=require('./outlib/DummyRangeCoder'),exports.FenwickModel=require('./outlib/FenwickModel'),exports.Huffman=require('./outlib/Huffman'),exports.HuffmanAllocator=require('./outlib/HuffmanAllocator'),exports.LogDistanceModel=require('./outlib/LogDistanceModel'),exports.Lzjb=require('./outlib/Lzjb'),exports.LzjbR=require('./outlib/LzjbR'),exports.Lzp3=require('./outlib/Lzp3'),exports.MTFModel=require('./outlib/MTFModel'),exports.NoModel=require('./outlib/NoModel'),exports.PPM=require('./outlib/PPM'),exports.RangeCoder=require('./outlib/RangeCoder'),exports.Simple=require('./outlib/Simple'),exports.Stream=require('./outlib/Stream'),exports.Util=require('./outlib/Util'),exports.freeze=require('./outlib/freeze')},{'./outlib/BWT':121,'./outlib/BWTC':122,'./outlib/BitStream':123,'./outlib/Bzip2':124,'./outlib/CRC32':125,'./outlib/Context1Model':126,'./outlib/DefSumModel':127,'./outlib/DeflateDistanceModel':128,'./outlib/Dmc':129,'./outlib/DummyRangeCoder':130,'./outlib/FenwickModel':131,'./outlib/Huffman':132,'./outlib/HuffmanAllocator':133,'./outlib/LogDistanceModel':134,'./outlib/Lzjb':135,'./outlib/LzjbR':136,'./outlib/Lzp3':137,'./outlib/MTFModel':138,'./outlib/NoModel':139,'./outlib/PPM':140,'./outlib/RangeCoder':141,'./outlib/Simple':142,'./outlib/Stream':143,'./outlib/Util':144,'./outlib/freeze':145}],121:[function(require,module,exports){var libs=[require('./freeze'),require('./Util')];var body_fn=function(freeze,Util){var ASSERT=function(){};var getCounts=function(T,C,n,k){var i;for(i=0;i<k;i++)C[i]=0;for(i=0;i<n;i++)C[T[i]]++};var getBuckets=function(C,B,k,end){var sum=0,i;if(end)for(i=0;i<k;i++)sum+=C[i],B[i]=sum;else for(i=0;i<k;i++)sum+=C[i],B[i]=sum-C[i]};var LMSsort=function(T,SA,C,B,n,k){var b,i,j;var c0,c1;for(C===B&&getCounts(T,C,n,k),getBuckets(C,B,k,!1),j=n-1,b=B[c1=T[j]],j--,SA[b++]=T[j]<c1?~j:j,i=0;i<n;i++)(j=SA[i])>0?(ASSERT(T[j]>=T[j+1]),(c0=T[j])!==c1&&(B[c1]=b,b=B[c1=c0]),ASSERT(i<b),j--,SA[b++]=T[j]<c1?~j:j,SA[i]=0):j<0&&(SA[i]=~j);for(C===B&&getCounts(T,C,n,k),getBuckets(C,B,k,1),(i=n-1,b=B[c1=0]);i>=0;i--)(j=SA[i])>0&&(ASSERT(T[j]<=T[j+1]),(c0=T[j])!==c1&&(B[c1]=b,b=B[c1=c0]),ASSERT(b<=i),j--,SA[--b]=T[j]>c1?~(j+1):j,SA[i]=0)};var LMSpostproc=function(T,SA,n,m){var i,j,p,q,plen,qlen,name;var c0,c1;var diff;for(ASSERT(n>0),i=0;(p=SA[i])<0;i++)SA[i]=~p,ASSERT(i+1<n);if(i<m)for(j=i,i++;;i++)if(ASSERT(i<n),(p=SA[i])<0&&(SA[j++]=~p,SA[i]=0,j===m))break;c0=T[i=j=n-1];do c1=c0;while(--i>=0&&(c0=T[i])>=c1);for(;i>=0;){do c1=c0;while(--i>=0&&(c0=T[i])<=c1);if(i>=0){SA[m+(i+1>>>1)]=j-i,j=i+1;do c1=c0;while(--i>=0&&(c0=T[i])>=c1)}}for(i=0,name=0,q=n,qlen=0;i<m;i++){if(p=SA[i],plen=SA[m+(p>>>1)],diff=!0,plen===qlen&&q+plen<n){for(j=0;j<plen&&T[p+j]===T[q+j];)j++;j===plen&&(diff=!1)}diff&&(name++,q=p,qlen=plen),SA[m+(p>>>1)]=name}return name};var induceSA=function(T,SA,C,B,n,k){var b,i,j;var c0,c1;for(C===B&&getCounts(T,C,n,k),getBuckets(C,B,k,!1),j=n-1,b=B[c1=T[j]],SA[b++]=j>0&&T[j-1]<c1?~j:j,i=0;i<n;i++)j=SA[i],SA[i]=~j,j>0&&(j--,ASSERT(T[j]>=T[j+1]),(c0=T[j])!==c1&&(B[c1]=b,b=B[c1=c0]),ASSERT(i<b),SA[b++]=j>0&&T[j-1]<c1?~j:j);for(C===B&&getCounts(T,C,n,k),getBuckets(C,B,k,!0),(i=n-1,b=B[c1=0]);i>=0;i--)(j=SA[i])>0?(j--,ASSERT(T[j]<=T[j+1]),(c0=T[j])!==c1&&(B[c1]=b,b=B[c1=c0]),ASSERT(b<=i),SA[--b]=j===0||T[j-1]>c1?~j:j):SA[i]=~j};var computeBWT=function(T,SA,C,B,n,k){var pidx=-1,b,i,j;var c0,c1;for(C===B&&getCounts(T,C,n,k),getBuckets(C,B,k,!1),j=n-1,b=B[c1=T[j]],SA[b++]=j>0&&T[j-1]<c1?~j:j,i=0;i<n;i++)(j=SA[i])>0?(j--,ASSERT(T[j]>=T[j+1]),SA[i]=~(c0=T[j]),c0!==c1&&(B[c1]=b,b=B[c1=c0]),ASSERT(i<b),SA[b++]=j>0&&T[j-1]<c1?~j:j):j!==0&&(SA[i]=~j);for(C===B&&getCounts(T,C,n,k),getBuckets(C,B,k,!0),(i=n-1,b=B[c1=0]);i>=0;i--)(j=SA[i])>0?(j--,ASSERT(T[j]<=T[j+1]),SA[i]=c0=T[j],c0!==c1&&(B[c1]=b,b=B[c1=c0]),ASSERT(b<=i),SA[--b]=j>0&&T[j-1]>c1?~T[j-1]:j):j===0?pidx=i:SA[i]=~j;return pidx};var SA_IS=function(T,SA,fs,n,k,isbwt){var C,B,RA;var pidx=0,i,j,b,c,m,p,q,name,newfs;var c0,c1;var flags=0;for(k<=256?(C=Util.makeS32Buffer(k),k<=fs?(B=SA.subarray(n+fs-k),flags=1):(B=Util.makeS32Buffer(k),flags=3)):k<=fs?(C=SA.subarray(n+fs-k),k<=fs-k?(B=SA.subarray(n+fs-k*2),flags=0):k<=1024?(B=Util.makeS32Buffer(k),flags=2):(B=C,flags=8)):(C=B=Util.makeS32Buffer(k),flags=4|8),getCounts(T,C,n,k),getBuckets(C,B,k,!0),i=0;i<n;i++)SA[i]=0;b=-1,i=n-1,j=n,m=0,c0=T[n-1];do c1=c0;while(--i>=0&&(c0=T[i])>=c1);for(;i>=0;){do c1=c0;while(--i>=0&&(c0=T[i])<=c1);if(i>=0){b>=0&&(SA[b]=j),b=--B[c1],j=i,++m;do c1=c0;while(--i>=0&&(c0=T[i])>=c1)}}if(m>1?(LMSsort(T,SA,C,B,n,k),name=LMSpostproc(T,SA,n,m)):m===1?(SA[b]=j+1,name=1):name=0,name<m){for((flags&4)!==0&&(C=null,B=null),(flags&2)!==0&&(B=null),newfs=n+fs-m*2,(flags&(1|4|8))===0&&(k+name<=newfs?newfs-=k:flags|=8),ASSERT(n>>>1<=newfs+m),(i=m+(n>>>1)-1,j=m*2+newfs-1);m<=i;i--)SA[i]!==0&&(SA[j--]=SA[i]-1);RA=SA.subarray(m+newfs),SA_IS(RA,SA,newfs,m,name,!1),RA=null,i=n-1,j=m*2-1,c0=T[n-1];do c1=c0;while(--i>=0&&(c0=T[i])>=c1);for(;i>=0;){do c1=c0;while(--i>=0&&(c0=T[i])<=c1);if(i>=0){SA[j--]=i+1;do c1=c0;while(--i>=0&&(c0=T[i])>=c1)}}for(i=0;i<m;i++)SA[i]=SA[m+SA[i]];(flags&4)!==0&&(C=B=Util.makeS32Buffer(k)),(flags&2)!==0&&(B=Util.makeS32Buffer(k))}if((flags&8)!==0&&getCounts(T,C,n,k),m>1){getBuckets(C,B,k,!0),i=m-1,j=n,p=SA[m-1],c1=T[p];do{for(q=B[c0=c1];q<j;)SA[--j]=0;do{if(SA[--j]=p,--i<0)break;p=SA[i]}while((c1=T[p])===c0)}while(i>=0);for(;j>0;)SA[--j]=0}return isbwt?pidx=computeBWT(T,SA,C,B,n,k):induceSA(T,SA,C,B,n,k),C=null,B=null,pidx};var BWT=Object.create(null);return BWT.suffixsort=function(T,SA,n,alphabetSize){if(ASSERT(T&&SA&&T.length>=n&&SA.length>=n),n<=1)return n===1&&(SA[0]=0),0;if(!alphabetSize)if(T.BYTES_PER_ELEMENT===1)alphabetSize=256;else if(T.BYTES_PER_ELEMENT===2)alphabetSize=65536;else throw new Error('Need to specify alphabetSize');return ASSERT(alphabetSize>0),T.BYTES_PER_ELEMENT&&ASSERT(alphabetSize<=1<<T.BYTES_PER_ELEMENT*8),SA_IS(T,SA,0,n,alphabetSize,!1)},BWT.bwtransform=function(T,U,A,n,alphabetSize){var i,pidx;if(ASSERT(T&&U&&A),ASSERT(T.length>=n&&U.length>=n&&A.length>=n),n<=1)return n===1&&(U[0]=T[0]),n;if(!alphabetSize)if(T.BYTES_PER_ELEMENT===1)alphabetSize=256;else if(T.BYTES_PER_ELEMENT===2)alphabetSize=65536;else throw new Error('Need to specify alphabetSize');for(ASSERT(alphabetSize>0),T.BYTES_PER_ELEMENT&&ASSERT(alphabetSize<=1<<T.BYTES_PER_ELEMENT*8),pidx=SA_IS(T,A,0,n,alphabetSize,!0),U[0]=T[n-1],i=0;i<pidx;i++)U[i+1]=A[i];for(i+=1;i<n;i++)U[i]=A[i];return pidx+1},BWT.unbwtransform=function(T,U,LF,n,pidx){var C=Util.makeU32Buffer(256);var i,t;for(i=0;i<256;i++)C[i]=0;for(i=0;i<n;i++)LF[i]=C[T[i]]++;for(i=0,t=0;i<256;i++)t+=C[i],C[i]=t-C[i];for(i=n-1,t=0;i>=0;i--)t=LF[t]+C[U[i]=T[t]],t+=t<pidx?1:0;C=null},BWT.bwtransform2=function(T,U,n,alphabetSize){var pidx=0,i,j;if(ASSERT(T&&U),ASSERT(T.length>=n&&U.length>=n),n<=1)return n===1&&(U[0]=T[0]),0;if(!alphabetSize)if(T.BYTES_PER_ELEMENT===1)alphabetSize=256;else if(T.BYTES_PER_ELEMENT===2)alphabetSize=65536;else throw new Error('Need to specify alphabetSize');ASSERT(alphabetSize>0),T.BYTES_PER_ELEMENT&&ASSERT(alphabetSize<=1<<T.BYTES_PER_ELEMENT*8);var TT;if(TT=T.length>=n*2?T:alphabetSize<=256?Util.makeU8Buffer(n*2):alphabetSize<=65536?Util.makeU16Buffer(n*2):Util.makeU32Buffer(n*2),TT!==T)for(i=0;i<n;i++)TT[i]=T[i];for(i=0;i<n;i++)TT[n+i]=TT[i];var A=Util.makeS32Buffer(n*2);for(SA_IS(TT,A,0,n*2,alphabetSize,!1),i=0,j=0;i<2*n;i++){var s=A[i];s<n&&(s===0&&(pidx=j),--s<0&&(s=n-1),U[j++]=T[s])}return ASSERT(j===n),pidx},freeze(BWT)};module.exports=body_fn.apply(null,libs)},{'./Util':144,'./freeze':145}],122:[function(require,module,exports){var libs=[require('./freeze'),require('./BWT'),require('./DefSumModel'),require('./FenwickModel'),require('./LogDistanceModel'),require('./NoModel'),require('./RangeCoder'),require('./Stream'),require('./Util')];var body_fn=function(freeze,BWT,DefSumModel,FenwickModel,LogDistanceModel,NoModel,RangeCoder,Stream,Util){var EOF=Stream.EOF;var F_PROB_MAX=65280;var F_PROB_INCR=256;return BWTC=Object.create(null),BWTC.MAGIC='bwtc',BWTC.compressFile=Util.compressFileHelper(BWTC.MAGIC,function(input,output,size,props,finalByte){var encoder=new RangeCoder(output);encoder.encodeStart(finalByte,1);var blockSize=9;typeof props==='number'&&props>=1&&props<=9&&(blockSize=props),encoder.encodeByte(blockSize);var fast=blockSize<=5;blockSize*=100000;var block=Util.makeU8Buffer(blockSize);var readBlock=function(){var pos;for(pos=0;pos<blockSize;){var ch=input.readByte();if(ch<0)break;block[pos++]=ch}return pos};var U=Util.makeU8Buffer(blockSize);var A=Util.makeS32Buffer(blockSize);var M=Util.makeU8Buffer(256);var bitModelFactory=NoModel.factory(encoder);var lenModel=new LogDistanceModel(blockSize,0,bitModelFactory,bitModelFactory);var length,b,c,pidx,i,j;do{if(length=readBlock(),length===0)break;length===block.length?(encoder.encodeFreq(1,0,3),b=block):(encoder.encodeFreq(1,1,3),lenModel.encode(length),b=block.subarray(0,length)),pidx=BWT.bwtransform(b,U,A,length,256),lenModel.encode(pidx);var useTree=Util.makeU16Buffer(512);for(i=0;i<length;i++)c=U[i],useTree[256+c]=1;for(i=255;i>0;i--)useTree[i]=useTree[2*i]+useTree[2*i+1];for(useTree[0]=1,i=1;i<512;i++){var parent=i>>>1;var full=1<<9-Util.fls(i);if(useTree[parent]===0||useTree[parent]===full*2);else if(i>=256)encoder.encodeBit(useTree[i]);else{var v=useTree[i];v=v===0?0:v===full?2:1,encoder.encodeFreq(1,v,3)}}var alphabetSize=0;for(i=0;i<256;i++)useTree[256+i]&&(M[alphabetSize++]=i);for(useTree=null,i=0;i<length;i++){for(c=U[i],j=0;j<alphabetSize&&M[j]!==c;j++);for(void 0,U[i]=j;j>0;j--)M[j]=M[j-1];M[0]=c}var model=new FenwickModel(encoder,alphabetSize+1,F_PROB_MAX,F_PROB_INCR);fast&&(model=new DefSumModel(encoder,alphabetSize+1));var runLength=0;var emitLastRun=function(){for(;runLength!==0;)runLength&1?(model.encode(0),runLength-=1):(model.encode(1),runLength-=2),runLength>>>=1};for(i=0;i<length;i++)c=U[i],c===0?runLength++:(emitLastRun(),model.encode(c+1),runLength=0);emitLastRun()}while(length===block.length);encoder.encodeFreq(1,2,3),encoder.encodeFinish()},!0),BWTC.decompressFile=Util.decompressFileHelper(BWTC.MAGIC,function(input,output,size){var decoder=new RangeCoder(input);decoder.decodeStart(!0);var blockSize=decoder.decodeByte();var fast=blockSize<=5;blockSize*=100000;var block=Util.makeU8Buffer(blockSize);var U=Util.makeU8Buffer(blockSize);var A=Util.makeS32Buffer(blockSize);var M=Util.makeU8Buffer(256);var bitModelFactory=NoModel.factory(decoder);var lenModel=new LogDistanceModel(blockSize,0,bitModelFactory,bitModelFactory);for(var b,length,i,j,c;!0;){var blockIndicator=decoder.decodeCulFreq(3);if(decoder.decodeUpdate(1,blockIndicator,3),blockIndicator===0)length=blockSize,b=block;else if(blockIndicator===1)length=lenModel.decode(),b=block.subarray(0,length);else if(blockIndicator===2)break;var pidx=lenModel.decode();var useTree=Util.makeU16Buffer(512);for(useTree[0]=1,i=1;i<512;i++){var parent=i>>>1;var full=1<<9-Util.fls(i);if(useTree[parent]===0||useTree[parent]===full*2)useTree[i]=useTree[parent]>>>1;else if(i>=256)useTree[i]=decoder.decodeBit();else{var v=decoder.decodeCulFreq(3);decoder.decodeUpdate(1,v,3),useTree[i]=v===2?full:v}}var alphabetSize=0;for(i=0;i<256;i++)useTree[256+i]&&(M[alphabetSize++]=i);useTree=null;var model=new FenwickModel(decoder,alphabetSize+1,F_PROB_MAX,F_PROB_INCR);fast&&(model=new DefSumModel(decoder,alphabetSize+1,!0));var val=1;for(i=0;i<length;)if(c=model.decode(),c===0){for(j=0;j<val;j++)b[i++]=0;val*=2}else if(c===1){for(j=0;j<val;j++)b[i++]=0,b[i++]=0;val*=2}else val=1,b[i++]=c-1;for(i=0;i<length;i++){for(j=b[i],b[i]=c=M[j];j>0;j--)M[j]=M[j-1];M[0]=c}BWT.unbwtransform(block,U,A,length,pidx),output.write(U,0,length)}decoder.decodeFinish()}),BWTC};module.exports=body_fn.apply(null,libs)},{'./BWT':121,'./DefSumModel':127,'./FenwickModel':131,'./LogDistanceModel':134,'./NoModel':139,'./RangeCoder':141,'./Stream':143,'./Util':144,'./freeze':145}],123:[function(require,module,exports){var libs=[require('./Stream')];var body_fn=function(Stream){var BitStream=function(stream){(function(){var bufferByte=256;this.readBit=function(){if((bufferByte&255)===0){var ch=stream.readByte();if(ch===Stream.EOF)return this._eof=!0,ch;bufferByte=ch<<1|1}var bit=bufferByte&256?1:0;return bufferByte<<=1,bit},this.seekBit=function(pos){var n_byte=pos>>>3;var n_bit=pos-n_byte*8;this.seek(n_byte),this._eof=!1,this.readBits(n_bit)},this.tellBit=function(){var pos=stream.tell()*8;for(var b=bufferByte;(b&255)!==0;)pos--,b<<=1;return pos},this.readByte=function(){return(bufferByte&255)===0?stream.readByte():this.readBits(8)},this.seek=function(pos){stream.seek(pos),bufferByte=256}}).call(this),function(){var bufferByte=1;this.writeBit=function(b){bufferByte<<=1,b&&(bufferByte|=1),bufferByte&256&&(stream.writeByte(bufferByte&255),bufferByte=1)},this.writeByte=function(_byte){bufferByte===1?stream.writeByte(_byte):stream.writeBits(8,_byte)},this.flush=function(){for(;bufferByte!==1;)this.writeBit(0);stream.flush&&stream.flush()}}.call(this)};return BitStream.EOF=Stream.EOF,BitStream.prototype=Object.create(Stream.prototype),BitStream.prototype.readBits=function(n){var r=0,i,b;if(n>31)return r=this.readBits(n-16)*65536,r+this.readBits(16);for(i=0;i<n;i++)r<<=1,this.readBit()>0&&r++;return r},BitStream.prototype.writeBits=function(n,value){if(n>32){var low=value&65535;var high=(value-low)/65536;return this.writeBits(n-16,high),void this.writeBits(16,low)}var i;for(i=n-1;i>=0;i--)this.writeBit(value>>>i&1)},BitStream};module.exports=body_fn.apply(null,libs)},{'./Stream':143}],124:[function(require,module,exports){var libs=[require('./freeze'),require('./BitStream'),require('./BWT'),require('./CRC32'),require('./HuffmanAllocator'),require('./Stream'),require('./Util')];var body_fn=function(freeze,BitStream,BWT,CRC32,HuffmanAllocator,Stream,Util){var MAX_HUFCODE_BITS=20;var MAX_SYMBOLS=258;var SYMBOL_RUNA=0;var SYMBOL_RUNB=1;var MIN_GROUPS=2;var MAX_GROUPS=6;var GROUP_SIZE=50;var WHOLEPI=54156738319193;var SQRTPI=25779555029136;var EOF=Stream.EOF;var mtf=function(array,index){var src=array[index],i;for(i=index;i>0;i--)array[i]=array[i-1];return array[0]=src,src};var Err={OK:0,LAST_BLOCK:-1,NOT_BZIP_DATA:-2,UNEXPECTED_INPUT_EOF:-3,UNEXPECTED_OUTPUT_EOF:-4,DATA_ERROR:-5,OUT_OF_MEMORY:-6,OBSOLETE_INPUT:-7,END_OF_BLOCK:-8};var ErrorMessages={};ErrorMessages[Err.LAST_BLOCK]='Bad file checksum',ErrorMessages[Err.NOT_BZIP_DATA]='Not bzip data',ErrorMessages[Err.UNEXPECTED_INPUT_EOF]='Unexpected input EOF',ErrorMessages[Err.UNEXPECTED_OUTPUT_EOF]='Unexpected output EOF',ErrorMessages[Err.DATA_ERROR]='Data error',ErrorMessages[Err.OUT_OF_MEMORY]='Out of memory',ErrorMessages[Err.OBSOLETE_INPUT]='Obsolete (pre 0.9.5) bzip format not supported.';var _throw=function(status,optDetail){var msg=ErrorMessages[status]||'unknown error';optDetail&&(msg+=': '+optDetail);var e=new TypeError(msg);throw e.errorCode=status,e};var Bunzip=function(inputStream,outputStream){this.writePos=this.writeCurrent=this.writeCount=0,this._start_bunzip(inputStream,outputStream)};Bunzip.prototype._init_block=function(){var moreBlocks=this._get_next_block();return moreBlocks?(this.blockCRC=new CRC32,!0):(this.writeCount=-1,!1)},Bunzip.prototype._start_bunzip=function(inputStream,outputStream){var buf=Util.makeU8Buffer(4);(inputStream.read(buf,0,4)!==4||_StringfromCharCode3(buf[0],buf[1],buf[2])!=='BZh')&&_throw(Err.NOT_BZIP_DATA,'bad magic');var level=buf[3]-48;(level<1||level>9)&&_throw(Err.NOT_BZIP_DATA,'level out of range'),this.reader=new BitStream(inputStream),this.dbufSize=100000*level,this.nextoutput=0,this.outputStream=outputStream,this.streamCRC=0},Bunzip.prototype._get_next_block=function(){var i,j,k;var reader=this.reader;var h=reader.readBits(48);if(h===SQRTPI)return!1;h!==WHOLEPI&&_throw(Err.NOT_BZIP_DATA),this.targetBlockCRC=reader.readBits(32),this.streamCRC=(this.targetBlockCRC^(this.streamCRC<<1|this.streamCRC>>>31))>>>0,reader.readBits(1)&&_throw(Err.OBSOLETE_INPUT);var origPointer=reader.readBits(24);origPointer>this.dbufSize&&_throw(Err.DATA_ERROR,'initial position out of bounds');var t=reader.readBits(16);var symToByte=Util.makeU8Buffer(256),symTotal=0;for(i=0;i<16;i++)if(t&1<<15-i){var o=i*16;for(k=reader.readBits(16),j=0;j<16;j++)k&1<<15-j&&(symToByte[symTotal++]=o+j)}var groupCount=reader.readBits(3);(groupCount<MIN_GROUPS||groupCount>MAX_GROUPS)&&_throw(Err.DATA_ERROR);var nSelectors=reader.readBits(15);nSelectors===0&&_throw(Err.DATA_ERROR);var mtfSymbol=Util.makeU8Buffer(256);for(i=0;i<groupCount;i++)mtfSymbol[i]=i;var selectors=Util.makeU8Buffer(nSelectors);for(i=0;i<nSelectors;i++){for(j=0;reader.readBits(1);j++)j>=groupCount&&_throw(Err.DATA_ERROR);selectors[i]=mtf(mtfSymbol,j)}var symCount=symTotal+2;var groups=[],hufGroup;for(j=0;j<groupCount;j++){var length=Util.makeU8Buffer(symCount),temp=Util.makeU8Buffer(MAX_HUFCODE_BITS+1);for(t=reader.readBits(5),i=0;i<symCount;i++){for(;;){if((t<1||t>MAX_HUFCODE_BITS)&&_throw(Err.DATA_ERROR),!reader.readBits(1))break;reader.readBits(1)?t--:t++}length[i]=t}var minLen,maxLen;for(minLen=maxLen=length[0],i=1;i<symCount;i++)length[i]>maxLen?maxLen=length[i]:length[i]<minLen&&(minLen=length[i]);hufGroup={},groups.push(hufGroup),hufGroup.permute=Util.makeU16Buffer(MAX_SYMBOLS),hufGroup.limit=Util.makeU32Buffer(MAX_HUFCODE_BITS+2),hufGroup.base=Util.makeU32Buffer(MAX_HUFCODE_BITS+1),hufGroup.minLen=minLen,hufGroup.maxLen=maxLen;var pp=0;for(i=minLen;i<=maxLen;i++)for(temp[i]=hufGroup.limit[i]=0,t=0;t<symCount;t++)length[t]===i&&(hufGroup.permute[pp++]=t);for(i=0;i<symCount;i++)temp[length[i]]++;for(pp=t=0,i=minLen;i<maxLen;i++)pp+=temp[i],hufGroup.limit[i]=pp-1,pp<<=1,t+=temp[i],hufGroup.base[i+1]=pp-t;hufGroup.limit[maxLen+1]=Number.MAX_VALUE,hufGroup.limit[maxLen]=pp+temp[maxLen]-1,hufGroup.base[minLen]=0}var byteCount=Util.makeU32Buffer(256);for(i=0;i<256;i++)mtfSymbol[i]=i;var runPos=0,dbufCount=0,selector=0,uc;var dbuf=this.dbuf=Util.makeU32Buffer(this.dbufSize);for(symCount=0;;){for(!symCount--&&(symCount=GROUP_SIZE-1,selector>=nSelectors&&_throw(Err.DATA_ERROR),hufGroup=groups[selectors[selector++]]),i=hufGroup.minLen,j=reader.readBits(i);;i++){if(i>hufGroup.maxLen&&_throw(Err.DATA_ERROR),j<=hufGroup.limit[i])break;j=j<<1|reader.readBits(1)}j-=hufGroup.base[i],(j<0||j>=MAX_SYMBOLS)&&_throw(Err.DATA_ERROR);var nextSym=hufGroup.permute[j];if(nextSym===SYMBOL_RUNA||nextSym===SYMBOL_RUNB){!runPos&&(runPos=1,t=0),t+=nextSym===SYMBOL_RUNA?runPos:2*runPos,runPos<<=1;continue}if(runPos)for(runPos=0,dbufCount+t>=this.dbufSize&&_throw(Err.DATA_ERROR),uc=symToByte[mtfSymbol[0]],byteCount[uc]+=t;t--;)dbuf[dbufCount++]=uc;if(nextSym>symTotal)break;dbufCount>=this.dbufSize&&_throw(Err.DATA_ERROR),i=nextSym-1,uc=mtf(mtfSymbol,i),uc=symToByte[uc],byteCount[uc]++,dbuf[dbufCount++]=uc}for((origPointer<0||origPointer>=dbufCount)&&_throw(Err.DATA_ERROR),j=0,i=0;i<256;i++)k=j+byteCount[i],byteCount[i]=j,j=k;for(i=0;i<dbufCount;i++)uc=dbuf[i]&255,dbuf[byteCount[uc]]|=i<<8,byteCount[uc]++;var pos=0,current=0,run=0;return dbufCount&&(pos=dbuf[origPointer],current=pos&255,pos>>=8,run=-1),this.writePos=pos,this.writeCurrent=current,this.writeCount=dbufCount,this.writeRun=run,!0},Bunzip.prototype._read_bunzip=function(outputBuffer,len){var copies,previous,outbyte;if(this.writeCount<0)return 0;var gotcount=0;var dbuf=this.dbuf,pos=this.writePos,current=this.writeCurrent;var dbufCount=this.writeCount,outputsize=this.outputsize;for(var run=this.writeRun;dbufCount;){for(dbufCount--,previous=current,pos=dbuf[pos],current=pos&255,pos>>=8,run++===3?(copies=current,outbyte=previous,current=-1):(copies=1,outbyte=current),this.blockCRC.updateCRCRun(outbyte,copies);copies--;)this.outputStream.writeByte(outbyte),this.nextoutput++;current!=previous&&(run=0)}return this.writeCount=dbufCount,this.blockCRC.getCRC()!==this.targetBlockCRC&&_throw(Err.DATA_ERROR,'Bad block CRC '+'(got '+this.blockCRC.getCRC().toString(16)+' expected '+this.targetBlockCRC.toString(16)+')'),this.nextoutput},Bunzip.Err=Err,Bunzip.decode=function(input,output,multistream){var inputStream=Util.coerceInputStream(input);var o=Util.coerceOutputStream(output,output);var outputStream=o.stream;for(var bz=new Bunzip(inputStream,outputStream);!('eof'in inputStream&&inputStream.eof());)if(bz._init_block())bz._read_bunzip();else{var targetStreamCRC=bz.reader.readBits(32);if(targetStreamCRC!==bz.streamCRC&&_throw(Err.DATA_ERROR,'Bad stream CRC '+'(got '+bz.streamCRC.toString(16)+' expected '+targetStreamCRC.toString(16)+')'),multistream&&'eof'in inputStream&&!inputStream.eof())bz._start_bunzip(inputStream,outputStream);else break}return o.retval},Bunzip.decodeBlock=function(input,pos,output){var inputStream=Util.coerceInputStream(input);var o=Util.coerceOutputStream(output,output);var outputStream=o.stream;var bz=new Bunzip(inputStream,outputStream);bz.reader.seekBit(pos);var moreBlocks=bz._get_next_block();return moreBlocks&&(bz.blockCRC=new CRC32,bz.writeCopies=0,bz._read_bunzip()),o.retval},Bunzip.table=function(input,callback,multistream){var inputStream=new Stream;inputStream.delegate=Util.coerceInputStream(input),inputStream.pos=0,inputStream.readByte=function(){return this.pos++,this.delegate.readByte()},inputStream.tell=function(){return this.pos},inputStream.delegate.eof&&(inputStream.eof=inputStream.delegate.eof.bind(inputStream.delegate));var outputStream=new Stream;outputStream.pos=0,outputStream.writeByte=function(){this.pos++};var bz=new Bunzip(inputStream,outputStream);for(var blockSize=bz.dbufSize;!('eof'in inputStream&&inputStream.eof());){var position=bz.reader.tellBit();if(bz._init_block()){var start=outputStream.pos;bz._read_bunzip(),callback(position,outputStream.pos-start)}else{var crc=bz.reader.readBits(32);if(multistream&&'eof'in inputStream&&!inputStream.eof())bz._start_bunzip(inputStream,outputStream),void 0;else break}}};var StaticHuffman=function(freq,alphabetSize){var mergedFreq=[],i;for(i=0;i<alphabetSize;i++)mergedFreq[i]=freq[i]<<9|i;mergedFreq.sort(function(a,b){return a-b});var sortedFreq=mergedFreq.map(function(v){return v>>>9});for(HuffmanAllocator.allocateHuffmanCodeLengths(sortedFreq,MAX_HUFCODE_BITS),this.codeLengths=Util.makeU8Buffer(alphabetSize),i=0;i<alphabetSize;i++){var sym=mergedFreq[i]&511;this.codeLengths[sym]=sortedFreq[i]}};StaticHuffman.prototype.computeCanonical=function(){var alphabetSize=this.codeLengths.length;var merged=[],i;for(i=0;i<alphabetSize;i++)merged[i]=this.codeLengths[i]<<9|i;merged.sort(function(a,b){return a-b}),this.code=Util.makeU32Buffer(alphabetSize);var code=0,prevLen=0;for(i=0;i<alphabetSize;i++){var curLen=merged[i]>>>9;var sym=merged[i]&511;void 0,code<<=curLen-prevLen,this.code[sym]=code++,prevLen=curLen}},StaticHuffman.prototype.cost=function(array,offset,length){var cost=0,i;for(i=0;i<length;i++)cost+=this.codeLengths[array[offset+i]];return cost},StaticHuffman.prototype.emit=function(outStream){var currentLength=this.codeLengths[0],i;for(outStream.writeBits(5,currentLength),i=0;i<this.codeLengths.length;i++){var codeLength=this.codeLengths[i];var value,delta;for(void 0,currentLength<codeLength?(value=2,delta=codeLength-currentLength):(value=3,delta=currentLength-codeLength);delta-->0;)outStream.writeBits(2,value);outStream.writeBit(0),currentLength=codeLength}},StaticHuffman.prototype.encode=function(outStream,symbol){outStream.writeBits(this.codeLengths[symbol],this.code[symbol])};var readBlock=function(inStream,block,length,crc){var pos=0;var lastChar=-1;for(var runLength=0;pos<length&&!(runLength===4&&(block[pos++]=0,pos>=length));){var ch=inStream.readByte();if(ch===EOF)break;if(crc.updateCRC(ch),ch!==lastChar)lastChar=ch,runLength=1;else if(runLength++,runLength>4)if(runLength<256){block[pos-1]++;continue}else runLength=1;block[pos++]=ch}return pos};var assignSelectors=function(selectors,groups,input){var i,j,k;for(i=0,k=0;i<input.length;i+=GROUP_SIZE){var groupSize=_Mathmin5(GROUP_SIZE,input.length-i);var best=0,bestCost=groups[0].cost(input,i,groupSize);for(j=1;j<groups.length;j++){var groupCost=groups[j].cost(input,i,groupSize);groupCost<bestCost&&(best=j,bestCost=groupCost)}selectors[k++]=best}};var optimizeHuffmanGroups=function(groups,targetGroups,input,selectors,alphabetSize){for(var groupCounts=[],i,j,k;groups.length<targetGroups;){for(assignSelectors(selectors,groups,input),i=0;i<groups.length;i++)groupCounts[i]=0;for(i=0;i<selectors.length;i++)groupCounts[selectors[i]]++;var which=groupCounts.indexOf(_Mathmax4.apply(Math,groupCounts));var splits=[];for(i=0,j=0;i<selectors.length;i++)if(selectors[i]===which){var start=i*GROUP_SIZE;var end=_Mathmin5(start+GROUP_SIZE,input.length);splits.push({index:i,cost:groups[which].cost(input,start,end-start)})}for(splits.sort(function(s1,s2){return s1.cost-s2.cost}),i=splits.length>>>1;i<splits.length;i++)selectors[splits[i].index]=groups.length;groups.push(null);var freq=[],f;for(i=0;i<groups.length;i++)for(f=freq[i]=[],j=0;j<alphabetSize;j++)f[j]=0;for(i=0,j=0;i<input.length;)for(f=freq[selectors[j++]],k=0;k<GROUP_SIZE&&i<input.length;k++)f[input[i++]]++;for(i=0;i<groups.length;i++)groups[i]=new StaticHuffman(freq[i],alphabetSize)}};var compressBlock=function(block,length,outStream){var c,i,j,k;var U=Util.makeU8Buffer(length);var pidx=BWT.bwtransform2(block,U,length,256);outStream.writeBit(0),outStream.writeBits(24,pidx);var used=[],compact=[];for(i=0;i<length;i++)c=block[i],used[c]=!0,compact[c>>>4]=!0;for(i=0;i<16;i++)outStream.writeBit(!!compact[i]);for(i=0;i<16;i++)if(compact[i])for(j=0;j<16;j++)outStream.writeBit(!!used[i<<4|j]);var alphabetSize=0;for(i=0;i<256;i++)used[i]&&alphabetSize++;var A=Util.makeU16Buffer(length+1);var endOfBlock=alphabetSize+1;var freq=[];for(i=0;i<=endOfBlock;i++)freq[i]=0;var M=Util.makeU8Buffer(alphabetSize);for(i=0,j=0;i<256;i++)used[i]&&(M[j++]=i);used=null,compact=null;var pos=0,runLength=0;var emit=function(c){A[pos++]=c,freq[c]++};var emitLastRun=function(){for(;runLength!==0;)runLength&1?(emit(0),runLength-=1):(emit(1),runLength-=2),runLength>>>=1};for(i=0;i<U.length;i++){for(c=U[i],j=0;j<alphabetSize&&M[j]!==c;j++);void 0,mtf(M,j),j===0?runLength++:(emitLastRun(),emit(j+1),runLength=0)}emitLastRun(),emit(endOfBlock),A=A.subarray(0,pos);var groups=[];var targetGroups;for(targetGroups=pos>=2400?6:pos>=1200?5:pos>=600?4:pos>=200?3:2,groups.push(new StaticHuffman(freq,endOfBlock+1)),i=0;i<=endOfBlock;i++)freq[i]=1;groups.push(new StaticHuffman(freq,endOfBlock+1)),freq=null;var selectors=Util.makeU8Buffer(_Mathceil4(pos/GROUP_SIZE));for(optimizeHuffmanGroups(groups,targetGroups,A,selectors,endOfBlock+1),assignSelectors(selectors,groups,A),void 0,outStream.writeBits(3,groups.length),outStream.writeBits(15,selectors.length),i=0;i<groups.length;i++)M[i]=i;for(i=0;i<selectors.length;i++){var s=selectors[i];for(j=0;j<groups.length&&M[j]!==s;j++);for(void 0,mtf(M,j);j>0;j--)outStream.writeBit(1);outStream.writeBit(0)}for(i=0;i<groups.length;i++)groups[i].emit(outStream),groups[i].computeCanonical();for(i=0,k=0;i<pos;){var huff=groups[selectors[k++]];for(j=0;j<GROUP_SIZE&&i<pos;j++)huff.encode(outStream,A[i++])}};var Bzip2=Object.create(null);return Bzip2.compressFile=function(inStream,outStream,props){inStream=Util.coerceInputStream(inStream);var o=Util.coerceOutputStream(outStream,outStream);outStream=new BitStream(o.stream);var blockSizeMultiplier=9;if(typeof props==='number'&&(blockSizeMultiplier=props),blockSizeMultiplier<1||blockSizeMultiplier>9)throw new Error('Invalid block size multiplier');var blockSize=blockSizeMultiplier*100000;blockSize-=19,outStream.writeByte('B'.charCodeAt(0)),outStream.writeByte('Z'.charCodeAt(0)),outStream.writeByte('h'.charCodeAt(0)),outStream.writeByte('0'.charCodeAt(0)+blockSizeMultiplier);var block=Util.makeU8Buffer(blockSize);var streamCRC=0;var length;do{var crc=new CRC32;length=readBlock(inStream,block,blockSize,crc),length>0&&(streamCRC=((streamCRC<<1|streamCRC>>>31)^crc.getCRC())>>>0,outStream.writeBits(48,WHOLEPI),outStream.writeBits(32,crc.getCRC()),compressBlock(block,length,outStream))}while(length===blockSize);return outStream.writeBits(48,SQRTPI),outStream.writeBits(32,streamCRC),outStream.flush(),o.retval},Bzip2.decompressFile=Bunzip.decode,Bzip2.decompressBlock=Bunzip.decodeBlock,Bzip2.table=Bunzip.table,Bzip2};module.exports=body_fn.apply(null,libs)},{'./BWT':121,'./BitStream':123,'./CRC32':125,'./HuffmanAllocator':133,'./Stream':143,'./Util':144,'./freeze':145}],125:[function(require,module,exports){var libs=[require('./Util')];var body_fn=function(Util){var crc32Lookup=Util.arraycopy(Util.makeU32Buffer(256),[0,79764919,159529838,222504665,319059676,398814059,445009330,507990021,638119352,583659535,797628118,726387553,890018660,835552979,1015980042,944750013,1276238704,1221641927,1167319070,1095957929,1595256236,1540665371,1452775106,1381403509,1780037320,1859660671,1671105958,1733955601,2031960084,2111593891,1889500026,1952343757,2552477408,2632100695,2443283854,2506133561,2334638140,2414271883,2191915858,2254759653,3190512472,3135915759,3081330742,3009969537,2905550212,2850959411,2762807018,2691435357,3560074640,3505614887,3719321342,3648080713,3342211916,3287746299,3467911202,3396681109,4063920168,4143685023,4223187782,4286162673,3779000052,3858754371,3904687514,3967668269,881225847,809987520,1023691545,969234094,662832811,591600412,771767749,717299826,311336399,374308984,453813921,533576470,25881363,88864420,134795389,214552010,2023205639,2086057648,1897238633,1976864222,1804852699,1867694188,1645340341,1724971778,1587496639,1516133128,1461550545,1406951526,1302016099,1230646740,1142491917,1087903418,2896545431,2825181984,2770861561,2716262478,3215044683,3143675388,3055782693,3001194130,2326604591,2389456536,2200899649,2280525302,2578013683,2640855108,2418763421,2498394922,3769900519,3832873040,3912640137,3992402750,4088425275,4151408268,4197601365,4277358050,3334271071,3263032808,3476998961,3422541446,3585640067,3514407732,3694837229,3640369242,1762451694,1842216281,1619975040,1682949687,2047383090,2127137669,1938468188,2001449195,1325665622,1271206113,1183200824,1111960463,1543535498,1489069629,1434599652,1363369299,622672798,568075817,748617968,677256519,907627842,853037301,1067152940,995781531,51762726,131386257,177728840,240578815,269590778,349224269,429104020,491947555,4046411278,4126034873,4172115296,4234965207,3794477266,3874110821,3953728444,4016571915,3609705398,3555108353,3735388376,3664026991,3290680682,3236090077,3449943556,3378572211,3174993278,3120533705,3032266256,2961025959,2923101090,2868635157,2813903052,2742672763,2604032198,2683796849,2461293480,2524268063,2284983834,2364738477,2175806836,2238787779,1569362073,1498123566,1409854455,1355396672,1317987909,1246755826,1192025387,1137557660,2072149281,2135122070,1912620623,1992383480,1753615357,1816598090,1627664531,1707420964,295390185,358241886,404320391,483945776,43990325,106832002,186451547,266083308,932423249,861060070,1041341759,986742920,613929101,542559546,756411363,701822548,3316196985,3244833742,3425377559,3370778784,3601682597,3530312978,3744426955,3689838204,3819031489,3881883254,3928223919,4007849240,4037393693,4100235434,4180117107,4259748804,2310601993,2373574846,2151335527,2231098320,2596047829,2659030626,2470359227,2550115596,2947551409,2876312838,2788305887,2733848168,3165939309,3094707162,3040238851,2985771188]);var CRC32=function(){var crc=4294967295;this.getCRC=function(){return~crc>>>0},this.updateCRC=function(value){crc=crc<<8^crc32Lookup[(crc>>>24^value)&255]},this.updateCRCRun=function(value,count){for(;count-->0;)crc=crc<<8^crc32Lookup[(crc>>>24^value)&255]}};return CRC32};module.exports=body_fn.apply(null,libs)},{'./Util':144}],126:[function(require,module,exports){var libs=[require('./BitStream'),require('./Huffman'),require('./Util')];var body_fn=function(BitStream,Huffman,Util){var Context1Model=function(modelFactory,contextSize,alphabetSize){var i;for(this.literalModel=[],i=0;i<contextSize;i++)this.literalModel[i]=modelFactory(alphabetSize)};return Context1Model.prototype.encode=function(ch,context){this.literalModel[context].encode(ch)},Context1Model.prototype.decode=function(context){return this.literalModel[context].decode()},Context1Model.MAGIC='ctx1',Context1Model.compressFile=Util.compressFileHelper(Context1Model.MAGIC,function(inStream,outStream,fileSize,props){var bitstream=new BitStream(outStream);var alphabetSize=256;fileSize<0&&alphabetSize++;var coder=Huffman.factory(bitstream,8191);var model=new Context1Model(coder,256,alphabetSize);var lastchar=32;var modelp={encode:function(symbol){model.encode(symbol,lastchar),lastchar=symbol}};Util.compressWithModel(inStream,fileSize,modelp),bitstream.flush()}),Context1Model.decompressFile=Util.decompressFileHelper(Context1Model.MAGIC,function(inStream,outStream,fileSize){var bitstream=new BitStream(inStream);var alphabetSize=256;fileSize<0&&alphabetSize++;var coder=Huffman.factory(bitstream,8191);var model=new Context1Model(coder,256,alphabetSize);var lastchar=32;var modelp={decode:function(){var symbol=model.decode(lastchar);return lastchar=symbol,symbol}};Util.decompressWithModel(outStream,fileSize,modelp)}),Context1Model};module.exports=body_fn.apply(null,libs)},{'./BitStream':123,'./Huffman':132,'./Util':144}],127:[function(require,module,exports){var libs=[require('./RangeCoder'),require('./Stream'),require('./Util')];var body_fn=function(RangeCoder,Stream,Util){var LOG_PROB_TOTAL=8;var PROB_TOTAL=1<<LOG_PROB_TOTAL;var MAX_ESCAPE_COUNT=40;var DefSumModel=function(coder,size,isDecoder){var i;var ESCAPE=this.numSyms=size;for(this.coder=coder,this.prob=Util.makeU16Buffer(size+2),this.escape=Util.makeU16Buffer(size+1),this.update=Util.makeU16Buffer(size+1),this.prob[ESCAPE+1]=PROB_TOTAL,i=0;i<=this.numSyms;i++)this.escape[i]=i;if(this.updateCount=0,this.updateThresh=PROB_TOTAL-128,!!isDecoder){for(this.probToSym=Util.makeU16Buffer(PROB_TOTAL),this.escProbToSym=Util.makeU16Buffer(this.numSyms),i=0;i<PROB_TOTAL;i++)this.probToSym[i]=ESCAPE;for(i=0;i<this.numSyms;i++)this.escProbToSym[i]=i}};return DefSumModel.factory=function(coder,isDecoder){return function(size){return new DefSumModel(coder,size,isDecoder)}},DefSumModel.prototype._update=function(symbol,isDecoder){if(symbol===this.numSyms){if(this.update[symbol]>=MAX_ESCAPE_COUNT)return;if(this.updateCount>=this.updateThresh-1)return}if(this.update[symbol]++,this.updateCount++,!(this.updateCount<this.updateThresh)){var cumProb,cumEscProb,odd,i,j,k;for(this.escape[0]=this.prob[0]=cumProb=cumEscProb=odd=0,i=0;i<this.numSyms+1;i++){var newProb=(this.prob[i+1]-this.prob[i]>>>1)+this.update[i];newProb?(this.prob[i]=cumProb,cumProb+=newProb,newProb&1&&odd++,this.escape[i]=cumEscProb):(this.prob[i]=cumProb,this.escape[i]=cumEscProb,cumEscProb++)}for(this.prob[i]=cumProb,void 0,this.updateThresh=PROB_TOTAL-_Mathfloor3((cumProb-odd)/2),i=0;i<this.numSyms+1;i++)this.update[i]=0;if(this.update[this.numSyms]=1,this.updateCount=1,!!isDecoder)for(i=0,j=0,k=0;i<this.numSyms+1;i++){for(var probLimit=this.prob[i+1];j<probLimit;j++)this.probToSym[j]=i;for(var escProbLimit=this.escape[i+1];k<escProbLimit;k++)this.escProbToSym[k]=i}}},DefSumModel.prototype.encode=function(symbol){var lt_f=this.prob[symbol];var sy_f=this.prob[symbol+1]-lt_f;if(sy_f)return this.coder.encodeShift(sy_f,lt_f,LOG_PROB_TOTAL),this._update(symbol);void 0,this.encode(this.numSyms),lt_f=this.escape[symbol],sy_f=this.escape[symbol+1]-lt_f;var tot_f=this.escape[this.numSyms];return this.coder.encodeFreq(sy_f,lt_f,tot_f),this._update(symbol)},DefSumModel.prototype.decode=function(){var prob=this.coder.decodeCulShift(LOG_PROB_TOTAL);var symbol=this.probToSym[prob];var lt_f=this.prob[symbol];var sy_f=this.prob[symbol+1]-lt_f;if(this.coder.decodeUpdate(sy_f,lt_f,PROB_TOTAL),this._update(symbol,!0),symbol!==this.numSyms)return symbol;var tot_f=this.escape[this.numSyms];return prob=this.coder.decodeCulFreq(tot_f),symbol=this.escProbToSym[prob],lt_f=this.escape[symbol],sy_f=this.escape[symbol+1]-lt_f,this.coder.decodeUpdate(sy_f,lt_f,tot_f),this._update(symbol,!0),symbol},DefSumModel.MAGIC='dfsm',DefSumModel.compressFile=Util.compressFileHelper(DefSumModel.MAGIC,function(inStream,outStream,fileSize,props,finalByte){var range=new RangeCoder(outStream);range.encodeStart(finalByte,1);var model=new DefSumModel(range,fileSize<0?257:256);Util.compressWithModel(inStream,fileSize,model),range.encodeFinish()},!0),DefSumModel.decompressFile=Util.decompressFileHelper(DefSumModel.MAGIC,function(inStream,outStream,fileSize){var range=new RangeCoder(inStream);range.decodeStart(!0);var model=new DefSumModel(range,fileSize<0?257:256,!0);Util.decompressWithModel(outStream,fileSize,model),range.decodeFinish()}),DefSumModel};module.exports=body_fn.apply(null,libs)},{'./RangeCoder':141,'./Stream':143,'./Util':144}],128:[function(require,module,exports){var libs=[require('./Util')];var body_fn=function(Util){var DeflateDistanceModel=function(size,extraStates,lgDistanceModelFactory,lengthBitsModelFactory){var i;var bits=Util.fls(size-1);for(this.extraStates=+extraStates||0,this.lgDistanceModel=lgDistanceModelFactory(2*bits+extraStates),this.distanceModel=[],i=3;i<=bits;i++){var numBits=i-2;this.distanceModel[i]=lengthBitsModelFactory(1<<numBits)}};return DeflateDistanceModel.prototype.encode=function(distance){if(distance<4)return void this.lgDistanceModel.encode(distance+this.extraStates);var lgDistance=Util.fls(distance);void 0,void 0;var nextBit=distance&1<<lgDistance-2?1:0;var l=4+(lgDistance-3)*2+nextBit;this.lgDistanceModel.encode(l+this.extraStates);var rest=distance&(1<<lgDistance-2)-1;this.distanceModel[lgDistance].encode(rest)},DeflateDistanceModel.prototype.decode=function(){var l=this.lgDistanceModel.decode()-this.extraStates;if(l<4)return l;var nextBit=l&1;var lgDistance=(l-4>>>1)+3;var rest=this.distanceModel[lgDistance].decode();return(2+nextBit<<lgDistance-2)+rest},DeflateDistanceModel};module.exports=body_fn.apply(null,libs)},{'./Util':144}],129:[function(require,module,exports){var libs=[require('./MTFModel'),require('./RangeCoder'),require('./Stream'),require('./Util')];var body_fn=function(MTFModel,RangeCoder,Stream,Util){var MAX_TRANS_CNT=65535;var DEFAULT_MIN_CNT1=8;var DEFAULT_MIN_CNT2=128;var MODEL_PROB_MAX=65280;var MODEL_PROB_INCR=256;var CLONE_MODELS=!1;var PRINT_STATS=!1;var Dmc=Object.create(null);Dmc.MAGIC='dmc!';var MarkovNode=function(coder,size,optModel){this.out=[],this.model=optModel?optModel.clone():new MTFModel(coder,size,MODEL_PROB_MAX,MODEL_PROB_INCR),this.count=Util.makeU16Buffer(size),this.sum=0};MarkovNode.prototype.clone=function(coder,size){var i;var newNode=new MarkovNode(coder,size,CLONE_MODELS?this.model:null);for(i=0;i<size;i++)newNode.out[i]=this.out[i];return newNode};var MarkovModel=function(coder,size,MIN_CNT1,MIN_CNT2){var i,j;for(this.coder=coder,this.size=size,this.MIN_CNT1=MIN_CNT1||DEFAULT_MIN_CNT1,this.MIN_CNT2=MIN_CNT2||DEFAULT_MIN_CNT2,this.nodes=[],i=0;i<size;i++)this.nodes[i]=new MarkovNode(coder,size);for(i=0;i<size;i++)for(j=0;j<size;j++)this.nodes[i].out[j]=this.nodes[j];this.current=this.nodes[0]};return MarkovModel.prototype.maybeSplit=function(from,symbol,to){var trans_cnt=from.count[symbol];var next_cnt=to.sum;var i;if(trans_cnt<=this.MIN_CNT1||next_cnt-trans_cnt<=this.MIN_CNT2)return to;var newNode=to.clone(this.coder,this.size);for(this.nodes.push(newNode),from.out[symbol]=newNode,newNode.sum=to.sum=0,i=0;i<this.size;i++)newNode.count[i]=to.count[i]*trans_cnt/next_cnt,newNode.sum+=newNode.count[i],to.count[i]-=newNode.count[i],to.sum+=to.count[i];return newNode},MarkovModel.prototype.encode=function(symbol){var from=this.current;from.model.encode(symbol);var to=from.out[symbol];from.count[symbol]!==MAX_TRANS_CNT&&(from.count[symbol]++,from.sum++),this.current=this.maybeSplit(from,symbol,to)},MarkovModel.prototype.decode=function(){var from=this.current;var symbol=from.model.decode();var to=from.out[symbol];return from.count[symbol]!==MAX_TRANS_CNT&&(from.count[symbol]++,from.sum++),this.current=this.maybeSplit(from,symbol,to),symbol},Dmc.compressFile=Util.compressFileHelper(Dmc.MAGIC,function(inStream,outStream,fileSize,props){props=props||{};var MIN_CNT1=+props.m||DEFAULT_MIN_CNT1;var MIN_CNT2=+props.n||DEFAULT_MIN_CNT2;Util.writeUnsignedNumber(outStream,MIN_CNT1),Util.writeUnsignedNumber(outStream,MIN_CNT2);var range=new RangeCoder(outStream);range.encodeStart(202,0);var mm=new MarkovModel(range,fileSize<0?257:256,MIN_CNT1,MIN_CNT2);for(var inSize=0;inSize!==fileSize;){var ch=inStream.readByte();if(ch===Stream.EOF){mm.encode(256);break}mm.encode(ch),inSize++}var outSize=range.encodeFinish();!1}),Dmc.decompressFile=Util.decompressFileHelper(Dmc.MAGIC,function(inStream,outStream,fileSize){var MIN_CNT1=Util.readUnsignedNumber(inStream);var MIN_CNT2=Util.readUnsignedNumber(inStream);var range=new RangeCoder(inStream);range.decodeStart();var mm=new MarkovModel(range,fileSize<0?257:256,MIN_CNT1,MIN_CNT2);for(var outSize=0;outSize!==fileSize;){var ch=mm.decode();if(ch===256)break;outStream.writeByte(ch),outSize++}range.decodeFinish()}),Dmc};module.exports=body_fn.apply(null,libs)},{'./MTFModel':138,'./RangeCoder':141,'./Stream':143,'./Util':144}],130:[function(require,module,exports){var libs=[require('./RangeCoder'),require('./Util')];var body_fn=function(RangeCoder,Util){var Dummy=function(stream){RangeCoder.call(this,stream)};return Dummy.prototype=Object.create(RangeCoder.prototype),Dummy.prototype._write8=function(b){Util.writeUnsignedNumber(this.stream,b),this.stream.writeByte(b)},Dummy.prototype._write16=function(s){this.stream.writeByte(s>>>8&255),this.stream.writeByte(s&255)},Dummy.prototype._read8=function(){return this.stream.readByte()},Dummy.prototype._read16=function(){var hi=this.stream.readByte();var lo=this.stream.readByte();return hi<<8|lo},Dummy.prototype.encodeStart=function(c,initlength){this.stream.writeByte(c)},Dummy.prototype.encodeFreq=function(sy_f,lt_f,tot_f){void 0,void 0,void 0,sy_f+lt_f>tot_f&&void 0,Util.writeUnsignedNumber(this.stream,sy_f),Util.writeUnsignedNumber(this.stream,lt_f),Util.writeUnsignedNumber(this.stream,tot_f)},Dummy.prototype.encodeShift=function(sy_f,lt_f,shift){this.encodeFreq(sy_f,lt_f,1<<shift)},Dummy.prototype.encodeFinish=function(){return 0},Dummy.prototype.decodeStart=function(skipInitialRead){return skipInitialRead?0:this.stream.readByte()},Dummy.prototype.decodeCulFreq=function(tot_f){return void 0,this.sy_f=Util.readUnsignedNumber(this.stream),this.lt_f=Util.readUnsignedNumber(this.stream),this.tot_f=Util.readUnsignedNumber(this.stream),tot_f!==this.tot_f&&void 0,(this.sy_f>>>1)+this.lt_f},Dummy.prototype.decodeCulShift=function(shift){return this.decodeCulFreq(1<<shift)},Dummy.prototype.decodeUpdate=function(sy_f,lt_f,tot_f){void 0,void 0,(sy_f!==this.sy_f||lt_f!==this.lt_f||tot_f!==this.tot_f)&&void 0},Dummy.prototype.decodeFinish=function(){},Dummy};module.exports=body_fn.apply(null,libs)},{'./RangeCoder':141,'./Util':144}],131:[function(require,module,exports){var libs=[require('./RangeCoder'),require('./Stream'),require('./Util')];var body_fn=function(RangeCoder,Stream,Util){var DEFAULT_MAX_PROB=65280;var DEFAULT_INCREMENT=256;var ESC_MASK=65535,ESC_SHIFT=0;var SYM_MASK=4294901760,SYM_SHIFT=16;var SCALE_MASK=4294901758;var FenwickModel=function(coder,size,max_prob,increment){this.coder=coder,this.numSyms=size+1,this.tree=Util.makeU32Buffer(this.numSyms*2),this.increment=+increment||DEFAULT_INCREMENT,this.max_prob=+max_prob||DEFAULT_MAX_PROB,void 0,void 0;var i;for(i=0;i<size;i++)this.tree[this.numSyms+i]=1<<ESC_SHIFT|0<<SYM_SHIFT;this.tree[this.numSyms+i]=0<<ESC_SHIFT|this.increment<<SYM_SHIFT,this._sumTree()};return FenwickModel.factory=function(coder,max_prob,increment){return function(size){return new FenwickModel(coder,size,max_prob,increment)}},FenwickModel.prototype.clone=function(){var newModel=new FenwickModel(this.coder,this.size,this.max_prob,this.increment);var i;for(i=1;i<this.tree.length;i++)newModel.tree[i]=this.tree[i];return newModel},FenwickModel.prototype.encode=function(symbol){var i=this.numSyms+symbol;var sy_f=this.tree[i];var mask=SYM_MASK,shift=SYM_SHIFT;var update=this.increment<<SYM_SHIFT;(sy_f&SYM_MASK)===0?(this.encode(this.numSyms-1),mask=ESC_MASK,update-=1<<ESC_SHIFT,shift=ESC_SHIFT):symbol===this.numSyms-1&&(this.tree[1]&ESC_MASK)>>>ESC_SHIFT===1&&(update=-this.tree[i]);for(var lt_f=0;i>1;){var isRight=i&1;var parent=i>>>1;isRight&&(lt_f+=this.tree[2*parent]),this.tree[i]+=update,i=parent}var tot_f=this.tree[1];this.tree[1]+=update,sy_f=(sy_f&mask)>>>shift,lt_f=(lt_f&mask)>>>shift,tot_f=(tot_f&mask)>>>shift,this.coder.encodeFreq(sy_f,lt_f,tot_f),(this.tree[1]&SYM_MASK)>>>SYM_SHIFT>=this.max_prob&&this._rescale()},FenwickModel.prototype._decode=function(isEscape){var mask=SYM_MASK,shift=SYM_SHIFT;var update=this.increment<<SYM_SHIFT;isEscape&&(mask=ESC_MASK,update-=1<<ESC_SHIFT,shift=ESC_SHIFT);var tot_f=(this.tree[1]&mask)>>>shift;var prob=this.coder.decodeCulFreq(tot_f);for(var i=1,lt_f=0;i<this.numSyms;){this.tree[i]+=update;var leftProb=(this.tree[2*i]&mask)>>>shift;i*=2,prob-lt_f>=leftProb&&(lt_f+=leftProb,i++)}var symbol=i-this.numSyms;var sy_f=(this.tree[i]&mask)>>>shift;if(this.tree[i]+=update,this.coder.decodeUpdate(sy_f,lt_f,tot_f),symbol===this.numSyms-1&&(this.tree[1]&ESC_MASK)>>>ESC_SHIFT===1)for(update=-this.tree[i];i>=1;)this.tree[i]+=update,i>>>=1;return(this.tree[1]&SYM_MASK)>>>SYM_SHIFT>=this.max_prob&&this._rescale(),symbol},FenwickModel.prototype.decode=function(){var symbol=this._decode(!1);return symbol===this.numSyms-1&&(symbol=this._decode(!0)),symbol},FenwickModel.prototype._rescale=function(){var noEscape=!0,i,prob;for(i=0;i<this.numSyms-1;i++){if(prob=this.tree[this.numSyms+i],(prob&ESC_MASK)!==0){noEscape=!1;continue}prob=(prob&SCALE_MASK)>>>1,prob===0&&(prob=1<<ESC_SHIFT,noEscape=!1),this.tree[this.numSyms+i]=prob}prob=this.tree[this.numSyms+i],prob=(prob&SCALE_MASK)>>>1,noEscape?prob=0:prob===0&&(prob=1<<SYM_SHIFT),this.tree[this.numSyms+i]=prob,this._sumTree()},FenwickModel.prototype._sumTree=function(){var i;for(i=this.numSyms-1;i>0;i--)this.tree[i]=this.tree[2*i]+this.tree[2*i+1]},FenwickModel.MAGIC='fenw',FenwickModel.compressFile=Util.compressFileHelper(FenwickModel.MAGIC,function(inStream,outStream,fileSize,props,finalByte){var range=new RangeCoder(outStream);range.encodeStart(finalByte,1);var model=new FenwickModel(range,fileSize<0?257:256);Util.compressWithModel(inStream,fileSize,model),range.encodeFinish()},!0),FenwickModel.decompressFile=Util.decompressFileHelper(FenwickModel.MAGIC,function(inStream,outStream,fileSize){var range=new RangeCoder(inStream);range.decodeStart(!0);var model=new FenwickModel(range,fileSize<0?257:256);Util.decompressWithModel(outStream,fileSize,model),range.decodeFinish()}),FenwickModel};module.exports=body_fn.apply(null,libs)},{'./RangeCoder':141,'./Stream':143,'./Util':144}],132:[function(require,module,exports){var libs=[require('./BitStream'),require('./Util')];var body_fn=function(BitStream,Util){var HTable=function(up,down,symbol,weight){this.up=up,this.down=down,this.symbol=symbol,this.weight=weight};HTable.prototype.clone=function(){return new HTable(this.up,this.down,this.symbol,this.weight)},HTable.prototype.set=function(htable){this.up=htable.up,this.down=htable.down,this.symbol=htable.symbol,this.weight=htable.weight};var Huffman=function(size,root,bitstream,max_weight){var i;for(void 0,(!root||root>size)&&(root=size),(root<<=1)&&root--,this.table=[],i=0;i<=root;i++)this.table[i]=new HTable(0,0,0,0);if(this.map=[],this.size=size)for(i=0;i<size;i++)this.map[i]=0;this.esc=this.root=root,bitstream&&(this.readBit=bitstream.readBit.bind(bitstream),this.writeBit=bitstream.writeBit.bind(bitstream)),this.max_weight=max_weight};return Huffman.factory=function(bitstream,max_weight){return function(size){return new Huffman(size,size,bitstream,max_weight)}},Huffman.prototype.split=function(symbol){var pair,node;if(pair=this.esc)this.esc--;else return 0;return(node=this.esc)?(this.table[pair].down=node,this.table[pair].weight=1,this.table[node].up=pair,this.esc--):(pair=0,node=1),this.table[node].symbol=symbol,this.table[node].weight=0,this.table[node].down=0,this.map[symbol]=node,this.table[this.esc].weight=0,this.table[this.esc].down=0,this.table[this.esc].up=pair,node},Huffman.prototype.leader=function(node){var weight=this.table[node].weight;for(var leader=node,prev,symbol;weight===this.table[leader+1].weight;)leader++;return leader===node?node:(symbol=this.table[node].symbol,prev=this.table[leader].symbol,this.table[leader].symbol=symbol,this.table[node].symbol=prev,this.map[symbol]=leader,this.map[prev]=node,leader)},Huffman.prototype.slide=function(node){var next=node;var swap;if(swap=this.table[next++].clone(),swap.weight&1)for(;swap.weight>this.table[next+1].weight;)next++;return this.table[node].set(this.table[next]),this.table[next].set(swap),this.table[next].up=this.table[node].up,this.table[node].up=swap.up,swap.weight&1?(this.table[swap.down].up=next,this.table[swap.down-1].up=next,this.map[this.table[node].symbol]=node):(this.table[this.table[node].down-1].up=node,this.table[this.table[node].down].up=node,this.map[swap.symbol]=next),next},Huffman.prototype.increment=function(node){var up;for(this.table[node].up===node+1?(this.table[node].weight+=2,node++):node=this.leader(node);this.table[node].weight+=2,up=this.table[node].up;){for(;this.table[node].weight>this.table[node+1].weight;)node=this.slide(node);node=this.table[node].weight&1?up:this.table[node].up}this.max_weight&&this.table[this.root].weight>=this.max_weight&&this.scale(1)},Huffman.prototype.scale=function(bits){for(var node=this.esc,weight,prev;++node<=this.root;)for(this.table[node].weight&1?(weight=this.table[this.table[node].down].weight&~1)&&(weight+=this.table[this.table[node].down-1].weight|1):!(weight=this.table[node].weight>>bits&~1)&&(this.map[this.table[node].symbol]=0,this.esc++)&&this.esc++,this.table[node].weight=weight,prev=node;weight<this.table[--prev].weight;)this.slide(prev);this.table[this.esc].down=0},Huffman.prototype.sendid=function(symbol){for(var empty=0,max;symbol--;)this.map[symbol]||empty++;if(max=this.size-_Mathfloor3((this.root-this.esc)/2)-1)do this.writeBit(empty&1),empty>>=1;while(max>>=1)},Huffman.prototype.encode=function(symbol){var emit=1,bit;var up,idx,node;if(symbol<this.size)node=this.map[symbol];else return;if((idx=node)||(idx=this.esc)){for(;up=this.table[idx].up;)emit<<=1,emit|=idx&1,idx=up;for(;bit=emit&1,emit>>=1;)this.writeBit(bit);!node&&(this.sendid(symbol),node=this.split(symbol)),this.increment(node)}},Huffman.prototype.readid=function(){var empty=0,bit=1,max,symbol;if(max=this.size-_Mathfloor3((this.root-this.esc)/2)-1)do empty|=this.readBit()?bit:0,bit<<=1;while(max>>=1);for(symbol=0;symbol<this.size;symbol++)if(!this.map[symbol]&&!empty--)return symbol;return 0},Huffman.prototype.decode=function(){var node=this.root;for(var symbol,down;down=this.table[node].down;)node=this.readBit()?down-1:down;if(node!==this.esc)symbol=this.table[node].symbol;else if(this.esc)symbol=this.readid(),node=this.split(symbol);else return 0;return this.increment(node),symbol},Huffman.MAGIC='huff',Huffman.compressFile=Util.compressFileHelper(Huffman.MAGIC,function(input,output,size,props){var bitstream=new BitStream(output);var alphabetSize=256;size<0&&alphabetSize++;var huff=new Huffman(257,alphabetSize,bitstream,8191);Util.compressWithModel(input,size,huff),bitstream.flush()}),Huffman.decompressFile=Util.decompressFileHelper(Huffman.MAGIC,function(input,output,size){var bitstream=new BitStream(input);var alphabetSize=256;size<0&&alphabetSize++;var huff=new Huffman(257,alphabetSize,bitstream,8191);Util.decompressWithModel(output,size,huff)}),Huffman};module.exports=body_fn.apply(null,libs)},{'./BitStream':123,'./Util':144}],133:[function(require,module,exports){var libs=[require('./freeze'),require('./Util')];var body_fn=function(freeze,Util){var first=function(array,i,nodesToMove){var length=array.length;var limit=i;for(var k=array.length-2;i>=nodesToMove&&array[i]%length>limit;)k=i,i-=limit-i+1;for(i=_Mathmax4(nodesToMove-1,i);k>i+1;){var temp=i+k>>1;array[temp]%length>limit?k=temp:i=temp}return k};var setExtendedParentPointers=function(array){var length=array.length;array[0]+=array[1];var headNode,tailNode,topNode,temp;for(headNode=0,tailNode=1,topNode=2;tailNode<length-1;tailNode++)topNode>=length||array[headNode]<array[topNode]?(temp=array[headNode],array[headNode++]=tailNode):temp=array[topNode++],topNode>=length||headNode<tailNode&&array[headNode]<array[topNode]?(temp+=array[headNode],array[headNode++]=tailNode+length):temp+=array[topNode++],array[tailNode]=temp};var findNodesToRelocate=function(array,maximumLength){var currentNode=array.length-2;var currentDepth;for(currentDepth=1;currentDepth<maximumLength-1&&currentNode>1;currentDepth++)currentNode=first(array,currentNode-1,0);return currentNode};var allocateNodeLengths=function(array){var firstNode=array.length-2;var nextNode=array.length-1;var currentDepth,availableNodes,lastNode,i;for(currentDepth=1,availableNodes=2;availableNodes>0;currentDepth++){for(lastNode=firstNode,firstNode=first(array,lastNode-1,0),i=availableNodes-(lastNode-firstNode);i>0;i--)array[nextNode--]=currentDepth;availableNodes=lastNode-firstNode<<1}};var allocateNodeLengthsWithRelocation=function(array,nodesToMove,insertDepth){var firstNode=array.length-2;var nextNode=array.length-1;var currentDepth=insertDepth==1?2:1;var nodesLeftToMove=insertDepth==1?nodesToMove-2:nodesToMove;var availableNodes,lastNode,offset,i;for(availableNodes=currentDepth<<1;availableNodes>0;currentDepth++){for(lastNode=firstNode,firstNode=firstNode<=nodesToMove?firstNode:first(array,lastNode-1,nodesToMove),offset=0,currentDepth>=insertDepth?offset=_Mathmin5(nodesLeftToMove,1<<currentDepth-insertDepth):currentDepth==insertDepth-1&&(offset=1,array[firstNode]==lastNode&&firstNode++),i=availableNodes-(lastNode-firstNode+offset);i>0;i--)array[nextNode--]=currentDepth;nodesLeftToMove-=offset,availableNodes=lastNode-firstNode+offset<<1}};var allocateHuffmanCodeLengths=function(array,maximumLength){switch(array.length){case 2:array[1]=1;case 1:return void(array[0]=1);}setExtendedParentPointers(array);var nodesToRelocate=findNodesToRelocate(array,maximumLength);if(array[0]%array.length>=nodesToRelocate)allocateNodeLengths(array);else{var insertDepth=maximumLength-Util.fls(nodesToRelocate-1);allocateNodeLengthsWithRelocation(array,nodesToRelocate,insertDepth)}};return freeze({allocateHuffmanCodeLengths:allocateHuffmanCodeLengths})};module.exports=body_fn.apply(null,libs)},{'./Util':144,'./freeze':145}],134:[function(require,module,exports){var libs=[require('./Util')];var body_fn=function(Util){var LogDistanceModel=function(size,extraStates,lgDistanceModelFactory,lengthBitsModelFactory){var i;var bits=Util.fls(size-1);for(this.extraStates=+extraStates||0,this.lgDistanceModel=lgDistanceModelFactory(1+bits+extraStates),this.distanceModel=[],i=2;i<=bits;i++){var numBits=i-1;this.distanceModel[i]=lengthBitsModelFactory(1<<numBits)}};return LogDistanceModel.prototype.encode=function(distance){if(distance<2)return void this.lgDistanceModel.encode(distance+this.extraStates);var lgDistance=Util.fls(distance);void 0,void 0,this.lgDistanceModel.encode(lgDistance+this.extraStates);var rest=distance&(1<<lgDistance-1)-1;this.distanceModel[lgDistance].encode(rest)},LogDistanceModel.prototype.decode=function(){var lgDistance=this.lgDistanceModel.decode()-this.extraStates;if(lgDistance<2)return lgDistance;var rest=this.distanceModel[lgDistance].decode();return(1<<lgDistance-1)+rest},LogDistanceModel};module.exports=body_fn.apply(null,libs)},{'./Util':144}],135:[function(require,module,exports){var libs=[require('./Stream'),require('./Util')];var body_fn=function(Stream,Util){var Lzjb=Object.create(null);Lzjb.MAGIC='lzjb';var NBBY=8,MATCH_BITS=6,MATCH_MIN=3,MATCH_MAX=(1<<MATCH_BITS)+(MATCH_MIN-1),OFFSET_MASK=(1<<16-MATCH_BITS)-1,LEMPEL_SIZE_BASE=1024;var EOF=Stream.EOF;var C_COMPAT=!0;return Lzjb.compressFile=Util.compressFileHelper(Lzjb.MAGIC,function(inStream,outStream,fileSize,props){var dstart=[],src=0,dst=0,sstart,slen,cpy,copymap,mlen,offset,hash,hp,lempel,i,j;var retval;var LEMPEL_SIZE=LEMPEL_SIZE_BASE;var EXPAND=1;typeof props==='number'&&(LEMPEL_SIZE*=2,props=_Mathmax4(1,_Mathmin5(9,props))-1,EXPAND=1<<_Mathfloor3(props/2),props&1&&(EXPAND=_Mathround2(EXPAND*1.5)),props>=2&&props<=4&&EXPAND++),lempel=Util.makeU16Buffer(LEMPEL_SIZE*EXPAND);var window=Util.makeU8Buffer(OFFSET_MASK+1);var windowpos=0;var winput=function(_byte){return window[windowpos++]=_byte,windowpos>=window.length&&(windowpos=0),_byte};var outwindow=Util.makeU8Buffer(17);var outpos=0;var dumpout=function(){var i;for(i=0;i<outpos;i++)outStream.writeByte(outwindow[i]);outpos=0};var unbuffer=[];var get=function(){return unbuffer.length?unbuffer.pop():inStream.readByte()};var unget=function(_byte){unbuffer.push(_byte)};var copymask=1<<NBBY-1;for(var matchpossibility=[];!0;){var c1=get();if(c1===EOF)break;(copymask<<=1)==1<<NBBY&&(dumpout(),copymask=1,outwindow[0]=0,outpos=1);var c2=get();if(c2===EOF){outwindow[outpos++]=winput(c1);break}var c3=get();if(c3===EOF){outwindow[outpos++]=winput(c1),unget(c2);continue}for(hash=(c1<<16)+(c2<<8)+c3,hash^=hash>>9,hash+=hash>>5,hash^=c1,hp=(hash&LEMPEL_SIZE-1)*EXPAND,matchpossibility.length=0,j=0;j<EXPAND;j++){offset=windowpos-lempel[hp+j]&OFFSET_MASK,cpy=window.length+windowpos-offset;var w1=window[cpy&OFFSET_MASK];var w2=window[cpy+1&OFFSET_MASK];var w3=window[cpy+2&OFFSET_MASK];offset===0?w1=c1^1:offset==1?(w2=c1,w3=c2):offset==2&&(w3=c1),c1===w1&&c2===w2&&c3===w3&&matchpossibility.push(offset)}for(j=EXPAND-1;j>0;j--)lempel[hp+j]=lempel[hp+j-1];if(lempel[hp]=windowpos,matchpossibility.length===0)outwindow[outpos++]=winput(c1),unget(c3),unget(c2);else{outwindow[0]|=copymask,winput(c1),winput(c2),winput(c3);var c4=get(),last=matchpossibility[0];var base=window.length+windowpos;for(mlen=MATCH_MIN;mlen<MATCH_MAX&&c4!==EOF;mlen++,base++){for(j=0;j<matchpossibility.length;){var w4=window[base-matchpossibility[j]&OFFSET_MASK];c4===w4?j++:(last=matchpossibility[j],matchpossibility.splice(j,1))}if(matchpossibility.length===0)break;winput(c4),c4=get()}matchpossibility.length!==0&&(last=matchpossibility[0]),unget(c4),outwindow[outpos++]=mlen-MATCH_MIN<<NBBY-MATCH_BITS|last>>NBBY,outwindow[outpos++]=last&255}}dumpout()}),Lzjb.decompressFile=Util.decompressFileHelper(Lzjb.MAGIC,function(inStream,outStream,outSize){var dstart=[],src=0,dst=0,sstart,slen,cpy,copymap,mlen,offset,i,c;var retval;var window=Util.makeU8Buffer(OFFSET_MASK+1);var windowpos=0;for(var copymask=1<<NBBY-1;outSize!==0&&(c=inStream.readByte(),c!==EOF);)if((copymask<<=1)==1<<NBBY&&(copymask=1,copymap=c,c=inStream.readByte()),copymap&copymask)for(mlen=(c>>NBBY-MATCH_BITS)+MATCH_MIN,offset=(c<<NBBY|inStream.readByte())&OFFSET_MASK,cpy=windowpos-offset,cpy<0&&(cpy+=window.length),outSize>=0&&(outSize-=mlen);--mlen>=0;)c=window[windowpos++]=window[cpy++],outStream.writeByte(c),windowpos>=window.length&&(windowpos=0),cpy>=window.length&&(cpy=0);else outStream.writeByte(c),window[windowpos++]=c,windowpos>=window.length&&(windowpos=0),outSize>=0&&outSize--}),Lzjb};module.exports=body_fn.apply(null,libs)},{'./Stream':143,'./Util':144}],136:[function(require,module,exports){var libs=[require('./Context1Model'),require('./FenwickModel'),require('./LogDistanceModel'),require('./NoModel'),require('./RangeCoder'),require('./Stream'),require('./Util')];var body_fn=function(Context1Model,FenwickModel,LogDistanceModel,NoModel,RangeCoder,Stream,Util){var LzjbR=Object.create(null);LzjbR.MAGIC='lzjR';var NBBY=8,MATCH_BITS=6,MATCH_MIN=3,MATCH_MAX=(1<<MATCH_BITS)+(MATCH_MIN-1),OFFSET_MASK=(1<<16-MATCH_BITS)-1,LEMPEL_SIZE_BASE=1024;var LENGTH_MODEL_CUTOFF=32;return LzjbR.compressFile=Util.compressFileHelper(LzjbR.MAGIC,function(inStream,outStream,fileSize,props,finalByte){var dstart=[],src=0,dst=0,sstart,slen,cpy,copymap,mlen,offset,hash,hp,lempel,i,j;var LEMPEL_SIZE=LEMPEL_SIZE_BASE;var EXPAND=1;typeof props==='number'&&(LEMPEL_SIZE*=2,props=_Mathmax4(1,_Mathmin5(9,props))-1,EXPAND=1<<_Mathfloor3(props/2),props&1&&(EXPAND=_Mathround2(EXPAND*1.5)),props>=2&&props<=4&&EXPAND++);var encoder=new RangeCoder(outStream);encoder.encodeStart(finalByte,1),lempel=Util.makeU16Buffer(LEMPEL_SIZE*EXPAND);var window=Util.makeU8Buffer(OFFSET_MASK+1);var windowpos=0;var winput=function(_byte){return window[windowpos++]=_byte,windowpos>=window.length&&(windowpos=0),_byte};var unbuffer=[];var get=function(){return unbuffer.length?unbuffer.pop():inStream.readByte()};var unget=function(_byte){unbuffer.push(_byte)};var matchpossibility=[];var MATCH=256;var EOF_SYM=257;var noModelFactory=NoModel.factory(encoder);var modelFactory=FenwickModel.factory(encoder,65280,256);var literalModel=new Context1Model(modelFactory,256,(fileSize<0?EOF_SYM:MATCH)+1);var sparseModelFactory=function(size){return size<=LENGTH_MODEL_CUTOFF?modelFactory(size):noModelFactory(size)};var lenModel=new LogDistanceModel(MATCH_MAX-MATCH_MIN+1,0,modelFactory,sparseModelFactory);var posModel=new LogDistanceModel(OFFSET_MASK+1,1,modelFactory,sparseModelFactory);for(var lastChar=32,lastOffset=0;!0;){var initialPos=windowpos;var c1=get();if(c1===Stream.EOF)break;var c2=get();if(c2===Stream.EOF){literalModel.encode(winput(c1),lastChar);break}var c3=get();if(c3===Stream.EOF){literalModel.encode(winput(c1),lastChar),unget(c2),lastChar=c1;continue}for(hash=(c1<<16)+(c2<<8)+c3,hash^=hash>>9,hash+=hash>>5,hash^=c1,hp=(hash&LEMPEL_SIZE-1)*EXPAND,matchpossibility.length=0,j=0;j<EXPAND;j++){offset=windowpos-lempel[hp+j]&OFFSET_MASK,cpy=window.length+windowpos-offset;var w1=window[cpy&OFFSET_MASK];var w2=window[cpy+1&OFFSET_MASK];var w3=window[cpy+2&OFFSET_MASK];offset==1?(w2=c1,w3=c2):offset==2&&(w3=c1),c1===w1&&c2===w2&&c3===w3&&matchpossibility.push(offset)}for(j=EXPAND-1;j>0;j--)lempel[hp+j]=lempel[hp+j-1];if(lempel[hp]=windowpos,matchpossibility.length===0)literalModel.encode(winput(c1),lastChar),unget(c3),unget(c2),lastChar=c1;else{literalModel.encode(MATCH,lastChar),winput(c1),winput(c2),winput(c3),lastChar=c3;var c4=get(),last=matchpossibility[0];var base=window.length+windowpos;for(mlen=MATCH_MIN;mlen<MATCH_MAX&&c4!==Stream.EOF;mlen++,base++){for(j=0;j<matchpossibility.length;){var w4=window[base-matchpossibility[j]&OFFSET_MASK];c4===w4?j++:(last=matchpossibility[j],matchpossibility.splice(j,1))}if(matchpossibility.length===0)break;winput(c4),lastChar=c4,c4=get()}matchpossibility.length!==0&&(last=matchpossibility[0]),unget(c4),lenModel.encode(mlen-MATCH_MIN),offset=initialPos-last&OFFSET_MASK,offset===lastOffset?posModel.encode(-1):(posModel.encode(offset),lastOffset=offset)}}fileSize<0&&literalModel.encode(EOF_SYM,lastChar),encoder.encodeFinish()},!0),LzjbR.decompressFile=Util.decompressFileHelper(LzjbR.MAGIC,function(inStream,outStream,outSize){var dstart=[],src=0,dst=0,sstart,slen,cpy,copymap,mlen,offset,i,c;var window=Util.makeU8Buffer(OFFSET_MASK+1);var windowpos=0;var decoder=new RangeCoder(inStream);decoder.decodeStart(!0);var MATCH=256;var EOF_SYM=257;var noModelFactory=NoModel.factory(decoder);var modelFactory=FenwickModel.factory(decoder,65280,256);var literalModel=new Context1Model(modelFactory,256,(outSize<0?EOF_SYM:MATCH)+1);var sparseModelFactory=function(size){return size<=LENGTH_MODEL_CUTOFF?modelFactory(size):noModelFactory(size)};var lenModel=new LogDistanceModel(MATCH_MAX-MATCH_MIN+1,0,modelFactory,sparseModelFactory);var posModel=new LogDistanceModel(OFFSET_MASK+1,1,modelFactory,sparseModelFactory);for(var lastChar=32,lastOffset=0;outSize!==0&&(c=literalModel.decode(lastChar),c!==EOF_SYM);)if(c===MATCH)for(mlen=lenModel.decode()+MATCH_MIN,cpy=posModel.decode(),cpy<0?cpy=lastOffset:lastOffset=cpy,outSize>=0&&(outSize-=mlen);--mlen>=0;)c=lastChar=window[windowpos++]=window[cpy++],outStream.writeByte(c),windowpos>=window.length&&(windowpos=0),cpy>=window.length&&(cpy=0);else outStream.writeByte(c),window[windowpos++]=lastChar=c,windowpos>=window.length&&(windowpos=0),outSize>=0&&outSize--;decoder.decodeFinish()}),LzjbR};module.exports=body_fn.apply(null,libs)},{'./Context1Model':126,'./FenwickModel':131,'./LogDistanceModel':134,'./NoModel':139,'./RangeCoder':141,'./Stream':143,'./Util':144}],137:[function(require,module,exports){var libs=[require('./BitStream'),require('./Context1Model'),require('./DefSumModel'),require('./FenwickModel'),require('./Huffman'),require('./LogDistanceModel'),require('./NoModel'),require('./RangeCoder'),require('./Stream'),require('./Util')];var body_fn=function(BitStream,Context1Model,DefSumModel,FenwickModel,Huffman,LogDistanceModel,NoModel,RangeCoder,Stream,Util){var Lzp3=Object.create(null);Lzp3.MAGIC='lzp3';var USE_HUFFMAN_CODE=!1;var USE_DEFSUM=!1;var LENGTH_MODEL_CUTOFF=256;var MODEL_MAX_PROB=65280;var MODEL_INCREMENT=256;var CTXT4_TABLE_SIZE=1<<16;var CTXT3_TABLE_SIZE=1<<12;var CTXT2_TABLE_SIZE=1<<16;var CONTEXT_LEN=4;var LOG_WINDOW_SIZE=20;var WINDOW_SIZE=1<<LOG_WINDOW_SIZE;var MAX_MATCH_LEN=WINDOW_SIZE-1;var MATCH_LEN_CONTEXTS=16;var MAX32=4294967295;var MAX24=16777215;var MAX16=65535;var MAX8=255;var Window=function(maxSize){this.buffer=Util.makeU8Buffer(_Mathmin5(maxSize+4,WINDOW_SIZE)),this.pos=0,this.ctxt4=Util.makeU32Buffer(CTXT4_TABLE_SIZE),this.ctxt3=Util.makeU32Buffer(CTXT3_TABLE_SIZE),this.ctxt2=Util.makeU32Buffer(CTXT2_TABLE_SIZE),this.put(99),this.put(83),this.put(97),this.put(32)};return Window.prototype.put=function(_byte){return this.buffer[this.pos++]=_byte,this.pos>=WINDOW_SIZE&&(this.pos=0),_byte},Window.prototype.get=function(pos){return this.buffer[pos&WINDOW_SIZE-1]},Window.prototype.context=function(pos,n){var c=0,i;for(pos=pos-n&WINDOW_SIZE-1,i=0;i<n;i++)c=c<<8|this.buffer[pos++],pos>=WINDOW_SIZE&&(pos=0);return c},Window.prototype.getIndex=function(s,matchLen){var c=this.context(s,4);var h4=(c>>>15^c)&CTXT4_TABLE_SIZE-1;var h3=(c>>>11^c)&CTXT3_TABLE_SIZE-1;var h2=c&MAX16;var p=0,checkc;return matchLen===0&&(p=this.ctxt4[h4],p!==0&&c!==this.context(p-1,4)&&(p=0),p===0&&(p=this.ctxt3[h3],p!==0&&(c&MAX24)!==this.context(p-1,3)&&(p=0),p===0&&(p=this.ctxt2[h2],p!==0&&(c&&MAX16)!==this.context(p-1,2)&&(p=0)))),matchLen&&matchLen--,this.ctxt4[h4]=this.ctxt3[h3]=this.ctxt2[h2]=(s|matchLen<<LOG_WINDOW_SIZE)+1,p},Lzp3.compressFile=Util.compressFileHelper(Lzp3.MAGIC,function(inStream,outStream,fileSize,props){var window=new Window(fileSize>=0?fileSize:WINDOW_SIZE);var coderFactory,sparseCoderFactory,flush;if(USE_HUFFMAN_CODE){outStream.writeByte(128);var bitstream=new BitStream(outStream);flush=bitstream.flush.bind(bitstream),coderFactory=Huffman.factory(bitstream,MAX16),sparseCoderFactory=NoModel.factory(bitstream)}else{var range=new RangeCoder(outStream);range.encodeStart(0,0),coderFactory=FenwickModel.factory(range,MODEL_MAX_PROB,MODEL_INCREMENT),!1;var noCoderFactory=NoModel.factory(range);sparseCoderFactory=function(size){return size>LENGTH_MODEL_CUTOFF?noCoderFactory(size):coderFactory(size)},flush=function(){range.encodeFinish()}}var huffLiteral=new Context1Model(coderFactory,256,fileSize<0?257:256);var huffLen=[],i;for(i=0;i<MATCH_LEN_CONTEXTS;i++)huffLen[i]=new LogDistanceModel(MAX_MATCH_LEN+1,1,coderFactory,sparseCoderFactory);for(var inSize=0,matchContext=0,s;inSize!==fileSize;){var ch=inStream.readByte();s=window.pos;var p=window.getIndex(s,0);if(p!==0){p--;var prevMatchLen=(p>>>LOG_WINDOW_SIZE)+1;for(var matchLen=0;window.get(p+matchLen)===ch&&matchLen<MAX_MATCH_LEN;)matchLen++,window.put(ch),ch=inStream.readByte();prevMatchLen===matchLen?huffLen[matchContext&MATCH_LEN_CONTEXTS-1].encode(-1):huffLen[matchContext&MATCH_LEN_CONTEXTS-1].encode(matchLen),window.getIndex(s,matchLen),inSize+=matchLen,matchContext<<=1,matchLen>0&&(matchContext|=1)}var context1=window.get(window.pos-1);if(ch===Stream.EOF){fileSize<0&&huffLiteral.encode(256,context1);break}huffLiteral.encode(ch,context1),window.put(ch),inSize++}flush&&flush()}),Lzp3.decompressFile=Util.decompressFileHelper(Lzp3.MAGIC,function(inStream,outStream,fileSize){var flags=inStream.readByte();var use_huffman_code=!!(flags&128);var window=new Window(fileSize>=0?fileSize:WINDOW_SIZE);var coderFactory,sparseCoderFactory,finish;if(use_huffman_code){var bitstream=new BitStream(inStream);coderFactory=Huffman.factory(bitstream,MAX16),sparseCoderFactory=NoModel.factory(bitstream)}else{var range=new RangeCoder(inStream);range.decodeStart(!0),coderFactory=FenwickModel.factory(range,MODEL_MAX_PROB,MODEL_INCREMENT),!1;var noCoderFactory=NoModel.factory(range);sparseCoderFactory=function(size){return size>LENGTH_MODEL_CUTOFF?noCoderFactory(size):coderFactory(size)},finish=function(){range.decodeFinish()}}var huffLiteral=new Context1Model(coderFactory,256,fileSize<0?257:256);var huffLen=[],i;for(i=0;i<MATCH_LEN_CONTEXTS;i++)huffLen[i]=new LogDistanceModel(MAX_MATCH_LEN+1,1,coderFactory,sparseCoderFactory);for(var outSize=0,matchContext=0,s,ch;outSize!==fileSize;){s=window.pos;var p=window.getIndex(s,0);if(p!==0){p--;var prevMatchLen=(p>>>LOG_WINDOW_SIZE)+1;var matchLen=huffLen[matchContext&MATCH_LEN_CONTEXTS-1].decode();for(matchLen<0&&(matchLen=prevMatchLen),i=0;i<matchLen;i++)ch=window.get(p+i),outStream.writeByte(window.put(ch));window.getIndex(s,matchLen),outSize+=matchLen,matchContext<<=1,matchLen>0&&(matchContext|=1)}if(outSize===fileSize)break;var context1=window.get(window.pos-1);if(ch=huffLiteral.decode(context1),ch===256)break;outStream.writeByte(window.put(ch)),outSize++}finish&&finish()}),Lzp3};module.exports=body_fn.apply(null,libs)},{'./BitStream':123,'./Context1Model':126,'./DefSumModel':127,'./FenwickModel':131,'./Huffman':132,'./LogDistanceModel':134,'./NoModel':139,'./RangeCoder':141,'./Stream':143,'./Util':144}],138:[function(require,module,exports){var libs=[require('./RangeCoder'),require('./Stream'),require('./Util')];var body_fn=function(RangeCoder,Stream,Util){var DEFAULT_MAX_PROB=65280;var DEFAULT_INCREMENT=256;var NUMERIC_SORT=function(a,b){return a-b};var MTFModel=function(coder,size,max_prob,increment,betterEscape){this.coder=coder,this.increment=+increment||DEFAULT_INCREMENT,this.max_prob=+max_prob||DEFAULT_MAX_PROB,void 0,this.sym=Util.makeU16Buffer(size+1),this.prob=Util.makeU16Buffer(size+2),this.sym[0]=size,this.prob[0]=0,this.seenSyms=1,this.prob[this.seenSyms]=this.increment,this.numSyms=size,betterEscape&&(this.sortedSeen=[size])};return MTFModel.factory=function(coder,max_prob,increment,betterEscape){return function(size){return new MTFModel(coder,size,max_prob,increment,betterEscape)}},MTFModel.prototype.clone=function(){var newModel=new MTFModel(this.coder,this.numSyms,this.max_prob,this.increment,!!this.sortedSeen);var i;for(i=0;i<this.seenSyms;i++)newModel.sym[i]=this.sym[i],newModel.prob[i]=this.prob[i];return newModel.prob[i]=this.prob[i],newModel.seenSyms=this.seenSyms,this.sortedSeen&&(newModel.sortedSeen=this.sortedSeen.slice(0)),newModel},MTFModel.prototype._update=function(symbol,index,sy_f){var j,tot_f;for(j=index;j<this.seenSyms-1;j++)this.sym[j]=this.sym[j+1],this.prob[j]=this.prob[j+1]-sy_f;return index<this.seenSyms?(this.sym[j]=symbol,this.prob[j]=this.prob[j+1]-sy_f,this.prob[this.seenSyms]=tot_f=this.prob[this.seenSyms]+this.increment,symbol===this.numSyms&&this.seenSyms>=this.numSyms&&(tot_f=this.prob[--this.seenSyms],this.sortedSeen&&this.sortedSeen.length--)):(tot_f=this.prob[this.seenSyms],this.sym[index]=symbol,this.prob[index]=tot_f,tot_f+=this.increment,this.prob[++this.seenSyms]=tot_f,this.sortedSeen&&(this.sortedSeen.push(symbol),this.sortedSeen.sort(NUMERIC_SORT))),void(tot_f>=this.max_prob&&this._rescale())},MTFModel.prototype._rescale=function(){var total=0,i,j;var noEscape=!0;for(this.sortedSeen&&(this.sortedSeen.length=0),i=0,j=0;i<this.seenSyms;i++){var sym=this.sym[i];var sy_f=this.prob[i+1]-this.prob[i];sy_f>>>=1,sy_f>0&&(sym===this.numSyms&&(noEscape=!1),this.sym[j]=sym,this.prob[j++]=total,total+=sy_f,this.sortedSeen&&this.sortedSeen.push(sym))}this.prob[j]=total,this.seenSyms=j,this.sortedSeen&&this.sortedSeen.sort(NUMERIC_SORT),noEscape&&this.seenSyms<this.numSyms&&this._update(this.numSyms,this.seenSyms)},MTFModel.prototype.decode=function(){var tot_f=this.prob[this.seenSyms];var prob=this.coder.decodeCulFreq(tot_f);var i;for(i=this.seenSyms-1;i>=0&&!(this.prob[i]<=prob);i--);var symbol=this.sym[i];var lt_f=this.prob[i];var sy_f=this.prob[i+1]-lt_f;if(this.coder.decodeUpdate(sy_f,lt_f,tot_f),this._update(symbol,i,sy_f),symbol===this.numSyms){if(sy_f=1,tot_f=this.numSyms,this.sortedSeen){var seen=this.sortedSeen;for(tot_f=this.numSyms-this.seenSyms,seen[seen.length-1]===this.numSyms&&tot_f++,symbol=lt_f=this.coder.decodeCulFreq(tot_f),i=0;i<seen.length&&seen[i]<=symbol;i++)symbol++}else symbol=lt_f=this.coder.decodeCulFreq(tot_f);this.coder.decodeUpdate(sy_f,lt_f,tot_f),this._update(symbol,this.seenSyms)}return symbol},MTFModel.prototype.encode=function(symbol){var i,sy_f,lt_f,tot_f;for(i=this.seenSyms-1;i>=0;i--)if(symbol===this.sym[i])return lt_f=this.prob[i],sy_f=this.prob[i+1]-lt_f,tot_f=this.prob[this.seenSyms],this.coder.encodeFreq(sy_f,lt_f,tot_f),this._update(symbol,i,sy_f);if(void 0,this.encode(this.numSyms),sy_f=1,lt_f=symbol,tot_f=this.numSyms,this.sortedSeen){var seen=this.sortedSeen;for(tot_f-=this.seenSyms,seen[seen.length-1]===this.numSyms&&tot_f++,i=0;i<seen.length&&seen[i]<symbol;i++)lt_f--}return this.coder.encodeFreq(sy_f,lt_f,tot_f),this._update(symbol,this.seenSyms)},MTFModel.MAGIC='mtfm',MTFModel.compressFile=Util.compressFileHelper(MTFModel.MAGIC,function(inStream,outStream,fileSize,props,finalByte){var range=new RangeCoder(outStream);range.encodeStart(finalByte,1);var model=new MTFModel(range,fileSize<0?257:256);Util.compressWithModel(inStream,fileSize,model),range.encodeFinish()},!0),MTFModel.decompressFile=Util.decompressFileHelper(MTFModel.MAGIC,function(inStream,outStream,fileSize){var range=new RangeCoder(inStream);range.decodeStart(!0);var model=new MTFModel(range,fileSize<0?257:256);Util.decompressWithModel(outStream,fileSize,model),range.decodeFinish()}),MTFModel};module.exports=body_fn.apply(null,libs)},{'./RangeCoder':141,'./Stream':143,'./Util':144}],139:[function(require,module,exports){var libs=[require('./BitStream'),require('./Util')];var body_fn=function(BitStream,Util){var NoModel=function(bitstream,size){this.bitstream=bitstream,this.bits=Util.fls(size-1)};return NoModel.factory=function(bitstream){return function(size){return new NoModel(bitstream,size)}},NoModel.prototype.encode=function(symbol){var i;for(i=this.bits-1;i>=0;i--){var b=symbol>>>i&1;this.bitstream.writeBit(b)}},NoModel.prototype.decode=function(){var r=0,i;for(i=this.bits-1;i>=0;i--)r<<=1,this.bitstream.readBit()&&r++;return r},NoModel.MAGIC='nomo',NoModel.compressFile=Util.compressFileHelper(NoModel.MAGIC,function(inStream,outStream,fileSize,props){var bitstream=new BitStream(outStream);var model=new NoModel(bitstream,fileSize<0?257:256);Util.compressWithModel(inStream,fileSize,model),bitstream.flush()}),NoModel.decompressFile=Util.decompressFileHelper(NoModel.MAGIC,function(inStream,outStream,fileSize){var bitstream=new BitStream(inStream);var model=new NoModel(bitstream,fileSize<0?257:256);Util.decompressWithModel(outStream,fileSize,model)}),NoModel};module.exports=body_fn.apply(null,libs)},{'./BitStream':123,'./Util':144}],140:[function(require,module,exports){var libs=[require('./RangeCoder'),require('./Util')];var body_fn=function(RangeCoder,Util){var MAX_CONTEXT=5;var LOG_WINDOW_SIZE=18;var WINDOW_SIZE=1<<LOG_WINDOW_SIZE;var Window=function(){this.buffer=Util.makeU8Buffer(WINDOW_SIZE),this.pos=0,this.firstPass=!0;for(var i=0;i<MAX_CONTEXT;i++)this.put('cSaCsA'.charCodeAt(i%6))};Window.prototype.put=function(_byte){return this.buffer[this.pos++]=_byte,this.pos>=WINDOW_SIZE&&(this.pos=0,this.firstPass=!1),_byte},Window.prototype.get=function(pos){return this.buffer[pos&WINDOW_SIZE-1]},Window.prototype.context=function(pos,n){var c=[],i;for(pos=pos-n&WINDOW_SIZE-1,i=0;i<n;i++)c.push(this.buffer[pos++]),pos>=WINDOW_SIZE&&(pos=0);return _StringfromCharCode3.apply(String,c)};var DMM_INCREMENT=256,DMM_MAX_PROB=65280;var PPM=function(coder,size){this.window=new Window,this.contexts=Object.create(null);var Cm1Context=function(){};Cm1Context.prototype.encode=function(symbol,exclude){var lt_f=0,i;for(i=0;i<symbol;i++)exclude[i]||lt_f++;var tot_f=size-exclude.total;coder.encodeFreq(1,lt_f,tot_f)},Cm1Context.prototype.decode=function(exclude){var i,symbol,lt_f;var tot_f=size-exclude.total;for(symbol=lt_f=coder.decodeCulFreq(tot_f),i=0;i<=symbol;i++)exclude[i]&&symbol++;return coder.decodeUpdate(1,lt_f,tot_f),symbol},this.cm1coder=new Cm1Context;var DenseMTFModel=function(){this.sym=[size],this.prob=[0,DMM_INCREMENT],this.refcount=0};DenseMTFModel.prototype._rescale=function(){var seenSyms=this.sym.length;var total=0,i,j;var noEscape=!0;for(i=0,j=0;i<seenSyms;i++){var sym=this.sym[i];var sy_f=this.prob[i+1]-this.prob[i];sy_f>>>=1,sy_f>0&&(sym===size&&(noEscape=!1),this.sym[j]=sym,this.prob[j++]=total,total+=sy_f)}return this.prob[j]=total,seenSyms=this.sym.length=j,this.prob.length=seenSyms+1,noEscape&&seenSyms<size&&(total=this._update(size,seenSyms,0,1)),total},DenseMTFModel.prototype.update=function(symbol,incr){var i=0;for(i=0;i<this.sym.length;i++)if(this.sym[i]===symbol)return this._update(symbol,i,this.prob[i+1]-this.prob[i],incr);return this._update(symbol,i,0,incr)},DenseMTFModel.prototype._update=function(symbol,index,sy_f,incr){var seenSyms=this.sym.length;var i,j,tot_f;for(j=index;j<seenSyms-1;j++)this.sym[j]=this.sym[j+1],this.prob[j]=this.prob[j+1]-sy_f;if(index<seenSyms)this.sym[j]=symbol,this.prob[j]=this.prob[j+1]-sy_f,this.prob[seenSyms]=tot_f=this.prob[seenSyms]+incr;else if(tot_f=this.prob[seenSyms],this.sym[index]=symbol,this.prob[index]=tot_f,tot_f+=incr,this.prob[++seenSyms]=tot_f,this.sym.length>size)for(i=0;i<seenSyms;i++)size===this.sym[i]&&(this._update(size,i,this.prob[i+1]-this.prob[i],-1),this.sym.length--,this.prob.length--,tot_f=this.prob[this.prob.length-1]);return tot_f>=DMM_MAX_PROB&&(tot_f=this._rescale()),tot_f},DenseMTFModel.prototype.encode=function(symbol,exclude){var seenSyms=this.sym.length,i,j,sy_f,lt_f,tot_f;var ex_seen=0,ex_lt_f=0,ex_tot_f=0,ex_sy_f;for(i=seenSyms-1;i>=0;i--){if(lt_f=this.prob[i],sy_f=this.prob[i+1]-lt_f,symbol===this.sym[i]){for(j=i-1;j>=0&&ex_seen<exclude.total;j--)exclude[this.sym[j]]&&(ex_seen+=1,ex_sy_f=this.prob[j+1]-this.prob[j],ex_lt_f+=ex_sy_f,ex_tot_f+=ex_sy_f);return tot_f=this.prob[seenSyms],lt_f-=ex_lt_f,tot_f-=ex_tot_f,coder.encodeFreq(sy_f,lt_f,tot_f),symbol!==size||(this._update(symbol,i,sy_f,DMM_INCREMENT/2),!1)}exclude[this.sym[i]]&&(ex_seen+=1,ex_tot_f+=sy_f)}for(this.encode(size,exclude),void 0,i=0;i<this.sym.length-1;i++)exclude[this.sym[i]]||(exclude[this.sym[i]]=!0,exclude.total++)},DenseMTFModel.prototype.decode=function(exclude){var seenSyms=this.sym.length;var tot_f=this.prob[seenSyms];var ex_seen=0,ex_lt_f=0,ex_tot_f=0,ex_sy_f;var i;for(i=seenSyms-1;i>=0&&ex_seen<exclude.total;i--)exclude[this.sym[i]]&&(ex_seen+=1,ex_tot_f+=this.prob[i+1]-this.prob[i]);var prob=coder.decodeCulFreq(tot_f-ex_tot_f)+ex_tot_f;for(ex_lt_f=ex_tot_f,i=seenSyms-1;i>=0;i--)if(exclude[this.sym[i]])ex_sy_f=this.prob[i+1]-this.prob[i],ex_lt_f-=ex_sy_f,prob-=ex_sy_f;else if(this.prob[i]<=prob)break;var symbol=this.sym[i];var lt_f=this.prob[i];var sy_f=this.prob[i+1]-lt_f;if(coder.decodeUpdate(sy_f,lt_f-ex_lt_f,tot_f-ex_tot_f),symbol<size)return symbol;for(this._update(symbol,i,sy_f,DMM_INCREMENT/2),void 0,i=0;i<this.sym.length-1;i++)exclude[this.sym[i]]||(exclude[this.sym[i]]=!0,exclude.total++);return-1},this.newContext=function(initialSymbol){return new DenseMTFModel},this.newExclude=function(){var result=Object.create(null);return result.total=0,result},function(){var i,j;for(i=0;i<MAX_CONTEXT;i++)for(j=0;j<=i;j++){var cc=this.window.context(j+(MAX_CONTEXT-1-i),j);!this.contexts[cc]&&(this.contexts[cc]=this.newContext()),this.contexts[cc].refcount++}}.call(this)};return PPM.prototype.update=function(symbol,contextString,matchLevel){var model,c,cc;for(c=0;c<=MAX_CONTEXT;c++)cc=contextString.slice(MAX_CONTEXT-c),model=this.contexts[cc],!model&&(model=this.contexts[cc]=this.newContext()),c>=matchLevel&&model.update(symbol,DMM_INCREMENT/2),model.refcount++;contextString=this.window.context(this.window.pos+MAX_CONTEXT,MAX_CONTEXT);var firstPass=this.window.firstPass;for(c=MAX_CONTEXT;c>=0&&!firstPass;c--)cc=contextString.slice(0,c),model=this.contexts[cc],void 0,--model.refcount<=0&&(void 0,delete this.contexts[cc]);this.window.put(symbol)},PPM.prototype.decode=function(){var contextString=this.window.context(this.window.pos,MAX_CONTEXT);var exclude=this.newExclude();var model,c,cc,symbol;for(c=MAX_CONTEXT;c>=0;c--)if(cc=contextString.slice(MAX_CONTEXT-c),model=this.contexts[cc],model&&(symbol=model.decode(exclude),symbol>=0))return this.update(symbol,contextString,c),symbol;return symbol=this.cm1coder.decode(exclude),this.update(symbol,contextString,c),symbol},PPM.prototype.encode=function(symbol){var contextString=this.window.context(this.window.pos,MAX_CONTEXT);var exclude=this.newExclude();var c;for(c=MAX_CONTEXT;c>=0;c--){var cc=contextString.slice(MAX_CONTEXT-c);var model=this.contexts[cc];if(model){var success=model.encode(symbol,exclude);if(success)return void this.update(symbol,contextString,c)}}return this.cm1coder.encode(symbol,exclude),void this.update(symbol,contextString,c)},PPM.MAGIC='ppm2',PPM.compressFile=Util.compressFileHelper(PPM.MAGIC,function(inStream,outStream,fileSize,props,finalByte){var range=new RangeCoder(outStream);range.encodeStart(finalByte,1);var model=new PPM(range,fileSize<0?257:256);Util.compressWithModel(inStream,fileSize,model),range.encodeFinish()},!0),PPM.decompressFile=Util.decompressFileHelper(PPM.MAGIC,function(inStream,outStream,fileSize){var range=new RangeCoder(inStream);range.decodeStart(!0);var model=new PPM(range,fileSize<0?257:256);Util.decompressWithModel(outStream,fileSize,model),range.decodeFinish()}),PPM};module.exports=body_fn.apply(null,libs)},{'./RangeCoder':141,'./Util':144}],141:[function(require,module,exports){var libs=[];var body_fn=function(){var CODE_BITS=32;var Top_value=2147483648;var SHIFT_BITS=CODE_BITS-9;var EXTRA_BITS=(CODE_BITS-2)%8+1;var Bottom_value=Top_value>>>8;var MAX_INT=4294967296-1;var RangeCoder=function(stream){this.low=0,this.range=Top_value,this.buffer=0,this.help=0,this.bytecount=0,this.stream=stream};var enc_normalize=function(rc,outputStream){for(;rc.range<=Bottom_value;){if(rc.low<255<<SHIFT_BITS){for(outputStream.writeByte(rc.buffer);rc.help;rc.help--)outputStream.writeByte(255);rc.buffer=rc.low>>>SHIFT_BITS&255}else if(rc.low&Top_value){for(outputStream.writeByte(rc.buffer+1);rc.help;rc.help--)outputStream.writeByte(0);rc.buffer=rc.low>>>SHIFT_BITS&255}else if(rc.help++,rc.help>MAX_INT)throw new Error('Too many bytes outstanding, '+'file too large!');rc.range=rc.range<<8>>>0,rc.low=(rc.low<<8&Top_value-1)>>>0,rc.bytecount++}};RangeCoder.prototype.encodeStart=function(c,initlength){this.low=0,this.range=Top_value,this.buffer=c,this.help=0,this.bytecount=initlength},RangeCoder.prototype.encodeFreq=function(sy_f,lt_f,tot_f){enc_normalize(this,this.stream);var r=this.range/tot_f>>>0;var tmp=r*lt_f;this.low+=tmp,lt_f+sy_f<tot_f?this.range=r*sy_f:this.range-=tmp},RangeCoder.prototype.encodeShift=function(sy_f,lt_f,shift){enc_normalize(this,this.stream);var r=this.range>>>shift;var tmp=r*lt_f;this.low+=tmp,lt_f+sy_f>>>shift?this.range-=tmp:this.range=r*sy_f},RangeCoder.prototype.encodeBit=function(b){this.encodeShift(1,b?1:0,1)},RangeCoder.prototype.encodeByte=function(b){this.encodeShift(1,b,8)},RangeCoder.prototype.encodeShort=function(s){this.encodeShift(1,s,16)},RangeCoder.prototype.encodeFinish=function(){var outputStream=this.stream;enc_normalize(this,outputStream),this.bytecount+=5;var tmp=this.low>>>SHIFT_BITS;if((this.low&Bottom_value-1)>=(this.bytecount&16777215)>>>1&&tmp++,tmp>255)for(outputStream.writeByte(this.buffer+1);this.help;this.help--)outputStream.writeByte(0);else for(outputStream.writeByte(this.buffer);this.help;this.help--)outputStream.writeByte(255);return outputStream.writeByte(tmp&255),outputStream.writeByte(this.bytecount>>>16&255),outputStream.writeByte(this.bytecount>>>8&255),outputStream.writeByte(this.bytecount&255),this.bytecount},RangeCoder.prototype.decodeStart=function(skipInitialRead){var c=skipInitialRead?0:this.stream.readByte();return typeof c!=='number'||c<0?c:(this.buffer=this.stream.readByte(),this.low=this.buffer>>>8-EXTRA_BITS,this.range=1<<EXTRA_BITS,c)};var dec_normalize=function(rc,inputStream){for(;rc.range<=Bottom_value;)rc.low=rc.low<<8|rc.buffer<<EXTRA_BITS&255,rc.buffer=inputStream.readByte(),rc.low|=rc.buffer>>>8-EXTRA_BITS,rc.low>>>=0,rc.range=rc.range<<8>>>0};return RangeCoder.prototype.decodeCulFreq=function(tot_f){dec_normalize(this,this.stream),this.help=this.range/tot_f>>>0;var tmp=this.low/this.help>>>0;return tmp>=tot_f?tot_f-1:tmp},RangeCoder.prototype.decodeCulShift=function(shift){dec_normalize(this,this.stream),this.help=this.range>>>shift;var tmp=this.low/this.help>>>0;return tmp>>>shift?(1<<shift)-1:tmp},RangeCoder.prototype.decodeUpdate=function(sy_f,lt_f,tot_f){var tmp=this.help*lt_f;this.low-=tmp,lt_f+sy_f<tot_f?this.range=this.help*sy_f:this.range-=tmp},RangeCoder.prototype.decodeBit=function(){var tmp=this.decodeCulShift(1);return this.decodeUpdate(1,tmp,1<<1),tmp},RangeCoder.prototype.decodeByte=function(){var tmp=this.decodeCulShift(8);return this.decodeUpdate(1,tmp,1<<8),tmp},RangeCoder.prototype.decodeShort=function(){var tmp=this.decodeCulShift(16);return this.decodeUpdate(1,tmp,1<<16),tmp},RangeCoder.prototype.decodeFinish=function(){dec_normalize(this,this.stream)},RangeCoder.prototype.writeBit=RangeCoder.prototype.encodeBit,RangeCoder.prototype.readBit=RangeCoder.prototype.decodeBit,RangeCoder.prototype.writeByte=RangeCoder.prototype.encodeByte,RangeCoder.prototype.readByte=RangeCoder.prototype.decodeByte,RangeCoder};module.exports=body_fn.apply(null,libs)},{}],142:[function(require,module,exports){var libs=[require('./RangeCoder'),require('./Stream'),require('./Util')];var body_fn=function(RangeCoder,Stream,Util){var MAX_BLOCK_SIZE=1<<17;var Simple=Object.create(null);return Simple.MAGIC='smpl',Simple.compressFile=Util.compressFileHelper(Simple.MAGIC,function(input,output,size,props,finalByte){var encoder=new RangeCoder(output);encoder.encodeStart(finalByte,1);var block=Util.makeU8Buffer(MAX_BLOCK_SIZE);var counts=[];var blockLength=0,sawEOF=!1;for(var readBlock=function(){var pos=0;for(pos=0;pos<256;pos++)counts[pos]=0;if(sawEOF)return void(blockLength=0);for(pos=0;pos<MAX_BLOCK_SIZE;){var c=input.readByte();if(c===Stream.EOF){sawEOF=!0;break}if(block[pos++]=c,counts[c]++,counts[c]===65535)break}blockLength=pos};!0;){var i;if(readBlock(),sawEOF&&blockLength===0)break;for(encoder.encodeBit(!0),i=0;i<256;i++)encoder.encodeShort(counts[i]);for(counts[256]=blockLength,i=256;i;i--)counts[i-1]=counts[i]-counts[i-1];for(i=0;i<blockLength;i++){var ch=block[i];encoder.encodeFreq(counts[ch+1]-counts[ch],counts[ch],counts[256])}}encoder.encodeBit(!1),encoder.encodeFinish()},!0),Simple.decompressFile=Util.decompressFileHelper(Simple.MAGIC,function(input,output,size){var decoder=new RangeCoder(input);for(decoder.decodeStart(!0);decoder.decodeBit();){var counts=[],i;for(i=0;i<256;i++)counts[i]=decoder.decodeShort();var blocksize=0;for(i=0;i<256;i++){var tmp=counts[i];counts[i]=blocksize,blocksize+=tmp}for(counts[256]=blocksize,i=0;i<blocksize;i++){var cf=decoder.decodeCulFreq(blocksize);var symbol;for(symbol=0;symbol<256&&!(counts[symbol]<=cf&&cf<counts[symbol+1]);symbol++);var ch=symbol;decoder.decodeUpdate(counts[symbol+1]-counts[symbol],counts[symbol],blocksize),output.writeByte(symbol)}}decoder.decodeFinish()}),Simple};module.exports=body_fn.apply(null,libs)},{'./RangeCoder':141,'./Stream':143,'./Util':144}],143:[function(require,module,exports){var libs=[require('./freeze')];var body_fn=function(freeze){var EOF=-1;var Stream=function(){};return Stream.prototype.readByte=function(){var buf=[0];var len=this.read(buf,0,1);return len===0?(this._eof=!0,EOF):buf[0]},Stream.prototype.read=function(buf,bufOffset,length){for(var bytesRead=0,ch;bytesRead<length;){if(ch=this.readByte(),ch===EOF){this._eof=!0;break}buf[bufOffset+bytesRead++]=ch}return bytesRead},Stream.prototype.eof=function(){return!!this._eof},Stream.prototype.seek=function(pos){throw new Error('Stream is not seekable.')},Stream.prototype.tell=function(){throw new Error('Stream is not seekable.')},Stream.prototype.writeByte=function(_byte){var buf=[_byte];this.write(buf,0,1)},Stream.prototype.write=function(buf,bufOffset,length){var i;for(i=0;i<length;i++)this.writeByte(buf[bufOffset+i]);return length},Stream.prototype.flush=function(){},Stream.EOF=EOF,freeze(Stream)};module.exports=body_fn.apply(null,libs)},{'./freeze':145}],144:[function(require,module,exports){(function(process,Buffer){var libs=[require('./freeze'),require('./Stream')];var body_fn=function(freeze,Stream){var Util=Object.create(null);var EOF=Stream.EOF;Util.coerceInputStream=function(input,forceRead){if(!('readByte'in input)){var buffer=input;input=new Stream,input.size=buffer.length,input.pos=0,input.readByte=function(){return this.pos>=this.size?EOF:buffer[this.pos++]},input.read=function(buf,bufOffset,length){for(var bytesRead=0;bytesRead<length&&this.pos<buffer.length;)buf[bufOffset++]=buffer[this.pos++],bytesRead++;return bytesRead},input.seek=function(pos){this.pos=pos},input.tell=function(){return this.pos},input.eof=function(){return this.pos>=buffer.length}}else if(forceRead&&!('read'in input)){var s=input;input=new Stream,input.readByte=function(){var ch=s.readByte();return ch===EOF&&(this._eof=!0),ch},'size'in s&&(input.size=s.size),'seek'in s&&(input.seek=function(pos){s.seek(pos),this._eof=!1}),'tell'in s&&(input.tell=s.tell.bind(s))}return input};var BufferStream=function(buffer,resizeOk){this.buffer=buffer,this.resizeOk=resizeOk,this.pos=0};BufferStream.prototype=Object.create(Stream.prototype),BufferStream.prototype.writeByte=function(_byte){if(this.resizeOk&&this.pos>=this.buffer.length){var newBuffer=Util.makeU8Buffer(this.buffer.length*2);newBuffer.set(this.buffer),this.buffer=newBuffer}this.buffer[this.pos++]=_byte},BufferStream.prototype.getBuffer=function(){if(this.pos!==this.buffer.length){if(!this.resizeOk)throw new TypeError('outputsize does not match decoded input');var newBuffer=Util.makeU8Buffer(this.pos);newBuffer.set(this.buffer.subarray(0,this.pos)),this.buffer=newBuffer}return this.buffer},Util.coerceOutputStream=function(output,size){var r={stream:output,retval:output};if(output){if(typeof output==='object'&&'writeByte'in output)return r;typeof size==='number'?(void 0,r.stream=new BufferStream(Util.makeU8Buffer(size),!1)):r.stream=new BufferStream(output,!1)}else r.stream=new BufferStream(Util.makeU8Buffer(16384),!0);return Object.defineProperty(r,'retval',{get:r.stream.getBuffer.bind(r.stream)}),r},Util.compressFileHelper=function(magic,guts,suppressFinalByte){return function(inStream,outStream,props){inStream=Util.coerceInputStream(inStream);var o=Util.coerceOutputStream(outStream,outStream);outStream=o.stream;var i;for(i=0;i<magic.length;i++)outStream.writeByte(magic.charCodeAt(i));var fileSize;if(fileSize='size'in inStream&&inStream.size>=0?inStream.size:-1,suppressFinalByte){var tmpOutput=Util.coerceOutputStream([]);for(Util.writeUnsignedNumber(tmpOutput.stream,fileSize+1),tmpOutput=tmpOutput.retval,i=0;i<tmpOutput.length-1;i++)outStream.writeByte(tmpOutput[i]);suppressFinalByte=tmpOutput[tmpOutput.length-1]}else Util.writeUnsignedNumber(outStream,fileSize+1);return guts(inStream,outStream,fileSize,props,suppressFinalByte),o.retval}},Util.decompressFileHelper=function(magic,guts){return function(inStream,outStream){inStream=Util.coerceInputStream(inStream);var i;for(i=0;i<magic.length;i++)if(magic.charCodeAt(i)!==inStream.readByte())throw new Error('Bad magic');var fileSize=Util.readUnsignedNumber(inStream)-1;var o=Util.coerceOutputStream(outStream,fileSize);return outStream=o.stream,guts(inStream,outStream,fileSize),o.retval}},Util.compressWithModel=function(inStream,fileSize,model){for(var inSize=0;inSize!==fileSize;){var ch=inStream.readByte();if(ch===EOF){model.encode(256);break}model.encode(ch),inSize++}},Util.decompressWithModel=function(outStream,fileSize,model){for(var outSize=0;outSize!==fileSize;){var ch=model.decode();if(ch===256)break;outStream.writeByte(ch),outSize++}},Util.writeUnsignedNumber=function(output,n){var bytes=[],i;do bytes.push(n&127),n=_Mathfloor3(n/128);while(n!==0);for(bytes[0]|=128,i=bytes.length-1;i>=0;i--)output.writeByte(bytes[i]);return output},Util.readUnsignedNumber=function(input){for(var n=0,c;!0;){if(c=input.readByte(),c&128){n+=c&127;break}n=(n+c)*128}return n};var zerofill=function(a){for(var i=0,len=a.length;i<len;i++)a[i]=0;return a};var fallbackarray=function(size){return zerofill(Array(size))};var ensureZeroed=function id(a){return a};typeof process!=='undefined'&&Array.prototype.some.call(new Uint32Array(128),function(x){return x!==0})&&(ensureZeroed=zerofill),Util.makeU8Buffer=typeof Uint8Array==='undefined'?typeof Buffer==='undefined'?fallbackarray:function(size){var b=new Buffer(size);return b.fill(0),b}:function(size){return ensureZeroed(new Uint8Array(size))},Util.makeU16Buffer=typeof Uint16Array==='undefined'?fallbackarray:function(size){return ensureZeroed(new Uint16Array(size))},Util.makeU32Buffer=typeof Uint32Array==='undefined'?fallbackarray:function(size){return ensureZeroed(new Uint32Array(size))},Util.makeS32Buffer=typeof Int32Array==='undefined'?fallbackarray:function(size){return ensureZeroed(new Int32Array(size))},Util.arraycopy=function(dst,src){for(var i=0,len=src.length;i<len;i++)dst[i]=src[i];return dst};var bytemsb=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];var fls=Util.fls=function(v){return v>4294967295?32+fls(_Mathfloor3(v/4294967296)):(v&4294901760)===0?(v&65280)===0?bytemsb[v]:8+bytemsb[v>>>8]:(v&4278190080)===0?16+bytemsb[v>>>16]:24+bytemsb[v>>>24&255]};return Util.log2c=function(v){return v===0?-1:fls(v-1)},freeze(Util)};module.exports=body_fn.apply(null,libs)}).call(this,require('_process'),require('buffer').Buffer)},{'./Stream':143,'./freeze':145,'_process':99,'buffer':80}],145:[function(require,module,exports){var libs=[];var body_fn=function(){'use strict';return Object.freeze?Object.freeze:function(o){return o}};module.exports=body_fn.apply(null,libs)},{}],146:[function(require,module,exports){function Curve(p,a,b,Gx,Gy,n,h){this.p=p,this.a=a,this.b=b,this.G=Point.fromAffine(this,Gx,Gy),this.n=n,this.h=h,this.infinity=new Point(this,null,null,BigInteger.ZERO),this.pOverFour=p.add(BigInteger.ONE).shiftRight(2)}var assert=require('assert');var BigInteger=require('bn').BigInteger;var Point=require('./point');Curve.prototype.pointFromX=function(isOdd,x){var alpha=x.pow(3).add(this.a.multiply(x)).add(this.b).mod(this.p);var beta=alpha.modPow(this.pOverFour,this.p);var y=beta;return beta.isEven()^!isOdd&&(y=this.p.subtract(y)),Point.fromAffine(this,x,y)},Curve.prototype.isInfinity=function(Q){return!(Q!==this.infinity)||Q.z.signum()===0&&Q.y.signum()!==0},Curve.prototype.isOnCurve=function(Q){if(this.isInfinity(Q))return!0;var x=Q.affineX;var y=Q.affineY;var a=this.a;var b=this.b;var p=this.p;if(x.signum()<0||x.compareTo(p)>=0)return!1;if(y.signum()<0||y.compareTo(p)>=0)return!1;var lhs=y.square().mod(p);var rhs=x.pow(3).add(a.multiply(x)).add(b).mod(p);return lhs.equals(rhs)},Curve.prototype.validate=function(Q){assert(!this.isInfinity(Q),'Point is at infinity'),assert(this.isOnCurve(Q),'Point is not on the curve');var nQ=Q.multiply(this.n);return assert(this.isInfinity(nQ),'Point is not a scalar multiple of G'),!0},module.exports=Curve},{'./point':150,'assert':75,'bn':71}],147:[function(require,module,exports){module.exports={'secp128r1':{'p':'fffffffdffffffffffffffffffffffff','a':'fffffffdfffffffffffffffffffffffc','b':'e87579c11079f43dd824993c2cee5ed3','n':'fffffffe0000000075a30d1b9038a115','h':'01','Gx':'161ff7528b899b2d0c28607ca52c5b86','Gy':'cf5ac8395bafeb13c02da292dded7a83'},'secp160k1':{'p':'fffffffffffffffffffffffffffffffeffffac73','a':'00','b':'07','n':'0100000000000000000001b8fa16dfab9aca16b6b3','h':'01','Gx':'3b4c382ce37aa192a4019e763036f4f5dd4d7ebb','Gy':'938cf935318fdced6bc28286531733c3f03c4fee'},'secp160r1':{'p':'ffffffffffffffffffffffffffffffff7fffffff','a':'ffffffffffffffffffffffffffffffff7ffffffc','b':'1c97befc54bd7a8b65acf89f81d4d4adc565fa45','n':'0100000000000000000001f4c8f927aed3ca752257','h':'01','Gx':'4a96b5688ef573284664698968c38bb913cbfc82','Gy':'23a628553168947d59dcc912042351377ac5fb32'},'secp192k1':{'p':'fffffffffffffffffffffffffffffffffffffffeffffee37','a':'00','b':'03','n':'fffffffffffffffffffffffe26f2fc170f69466a74defd8d','h':'01','Gx':'db4ff10ec057e9ae26b07d0280b7f4341da5d1b1eae06c7d','Gy':'9b2f2f6d9c5628a7844163d015be86344082aa88d95e2f9d'},'secp192r1':{'p':'fffffffffffffffffffffffffffffffeffffffffffffffff','a':'fffffffffffffffffffffffffffffffefffffffffffffffc','b':'64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1','n':'ffffffffffffffffffffffff99def836146bc9b1b4d22831','h':'01','Gx':'188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012','Gy':'07192b95ffc8da78631011ed6b24cdd573f977a11e794811'},'secp256k1':{'p':'fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f','a':'00','b':'07','n':'fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141','h':'01','Gx':'79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798','Gy':'483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8'},'secp256r1':{'p':'ffffffff00000001000000000000000000000000ffffffffffffffffffffffff','a':'ffffffff00000001000000000000000000000000fffffffffffffffffffffffc','b':'5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b','n':'ffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551','h':'01','Gx':'6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296','Gy':'4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5'}}},{}],148:[function(require,module,exports){var Point=require('./point');var Curve=require('./curve');var getCurveByName=require('./names');module.exports={Curve:Curve,Point:Point,getCurveByName:getCurveByName}},{'./curve':146,'./names':149,'./point':150}],149:[function(require,module,exports){function getCurveByName(name){var curve=curves[name];if(!curve)return null;var p=new BigInteger(curve.p,16);var a=new BigInteger(curve.a,16);var b=new BigInteger(curve.b,16);var n=new BigInteger(curve.n,16);var h=new BigInteger(curve.h,16);var Gx=new BigInteger(curve.Gx,16);var Gy=new BigInteger(curve.Gy,16);return new Curve(p,a,b,Gx,Gy,n,h)}var BigInteger=require('bn').BigInteger;var curves=require('./curves');var Curve=require('./curve');module.exports=getCurveByName},{'./curve':146,'./curves':147,'bn':71}],150:[function(require,module,exports){(function(Buffer){function Point(curve,x,y,z){assert.notStrictEqual(z,undefined,'Missing Z coordinate'),this.curve=curve,this.x=x,this.y=y,this.z=z,this._zInv=null,this.compressed=!0}var assert=require('assert');var BigInteger=require('bn').BigInteger;var THREE=BigInteger.valueOf(3);Object.defineProperty(Point.prototype,'zInv',{get:function(){return this._zInv===null&&(this._zInv=this.z.modInverse(this.curve.p)),this._zInv}}),Object.defineProperty(Point.prototype,'affineX',{get:function(){return this.x.multiply(this.zInv).mod(this.curve.p)}}),Object.defineProperty(Point.prototype,'affineY',{get:function(){return this.y.multiply(this.zInv).mod(this.curve.p)}}),Point.fromAffine=function(curve,x,y){return new Point(curve,x,y,BigInteger.ONE)},Point.prototype.equals=function(other){if(other===this)return!0;if(this.curve.isInfinity(this))return this.curve.isInfinity(other);if(this.curve.isInfinity(other))return this.curve.isInfinity(this);var u=other.y.multiply(this.z).subtract(this.y.multiply(other.z)).mod(this.curve.p);if(u.signum()!==0)return!1;var v=other.x.multiply(this.z).subtract(this.x.multiply(other.z)).mod(this.curve.p);return v.signum()===0},Point.prototype.negate=function(){var y=this.curve.p.subtract(this.y);return new Point(this.curve,this.x,y,this.z)},Point.prototype.add=function(b){if(this.curve.isInfinity(this))return b;if(this.curve.isInfinity(b))return this;var x1=this.x;var y1=this.y;var x2=b.x;var y2=b.y;var u=y2.multiply(this.z).subtract(y1.multiply(b.z)).mod(this.curve.p);var v=x2.multiply(this.z).subtract(x1.multiply(b.z)).mod(this.curve.p);if(v.signum()===0)return u.signum()===0?this.twice():this.curve.infinity;var v2=v.square();var v3=v2.multiply(v);var x1v2=x1.multiply(v2);var zu2=u.square().multiply(this.z);var x3=zu2.subtract(x1v2.shiftLeft(1)).multiply(b.z).subtract(v3).multiply(v).mod(this.curve.p);var y3=x1v2.multiply(THREE).multiply(u).subtract(y1.multiply(v3)).subtract(zu2.multiply(u)).multiply(b.z).add(u.multiply(v3)).mod(this.curve.p);var z3=v3.multiply(this.z).multiply(b.z).mod(this.curve.p);return new Point(this.curve,x3,y3,z3)},Point.prototype.twice=function(){if(this.curve.isInfinity(this))return this;if(this.y.signum()===0)return this.curve.infinity;var x1=this.x;var y1=this.y;var y1z1=y1.multiply(this.z);var y1sqz1=y1z1.multiply(y1).mod(this.curve.p);var a=this.curve.a;var w=x1.square().multiply(THREE);a.signum()!==0&&(w=w.add(this.z.square().multiply(a))),w=w.mod(this.curve.p);var x3=w.square().subtract(x1.shiftLeft(3).multiply(y1sqz1)).shiftLeft(1).multiply(y1z1).mod(this.curve.p);var y3=w.multiply(THREE).multiply(x1).subtract(y1sqz1.shiftLeft(1)).shiftLeft(2).multiply(y1sqz1).subtract(w.pow(3)).mod(this.curve.p);var z3=y1z1.pow(3).shiftLeft(3).mod(this.curve.p);return new Point(this.curve,x3,y3,z3)},Point.prototype.multiply=function(k){if(this.curve.isInfinity(this))return this;if(k.signum()===0)return this.curve.infinity;var e=k;var h=e.multiply(THREE);var neg=this.negate();var R=this;for(var i=h.bitLength()-2;i>0;--i){R=R.twice();var hBit=h.testBit(i);var eBit=e.testBit(i);hBit!=eBit&&(R=R.add(hBit?this:neg))}return R},Point.prototype.multiplyTwo=function(j,x,k){var i;i=j.bitLength()>k.bitLength()?j.bitLength()-1:k.bitLength()-1;var R=this.curve.infinity;for(var both=this.add(x);i>=0;){R=R.twice();var jBit=j.testBit(i);var kBit=k.testBit(i);jBit?kBit?R=R.add(both):R=R.add(this):kBit&&(R=R.add(x)),--i}return R},Point.prototype.getEncoded=function(compressed){if(compressed==undefined&&(compressed=this.compressed),this.curve.isInfinity(this))return new Buffer('00','hex');var x=this.affineX;var y=this.affineY;var buffer;var byteLength=_Mathfloor3((this.curve.p.bitLength()+7)/8);return compressed?(buffer=new Buffer(1+byteLength),buffer.writeUInt8(y.isEven()?2:3,0)):(buffer=new Buffer(1+byteLength+byteLength),buffer.writeUInt8(4,0),y.toBuffer(byteLength).copy(buffer,1+byteLength)),x.toBuffer(byteLength).copy(buffer,1),buffer},Point.decodeFrom=function(curve,buffer){var type=buffer.readUInt8(0);var compressed=type!==4;var x=BigInteger.fromBuffer(buffer.slice(1,33));var byteLength=_Mathfloor3((curve.p.bitLength()+7)/8);var Q;if(compressed){assert.equal(buffer.length,byteLength+1,'Invalid sequence length'),assert(type===2||type===3,'Invalid sequence tag');var isOdd=type===3;Q=curve.pointFromX(isOdd,x)}else{assert.equal(buffer.length,1+byteLength+byteLength,'Invalid sequence length');var y=BigInteger.fromBuffer(buffer.slice(1+byteLength));Q=Point.fromAffine(curve,x,y)}return Q.compressed=compressed,Q},Point.prototype.toString=function(){return this.curve.isInfinity(this)?'(INFINITY)':'('+this.affineX.toString()+','+this.affineY.toString()+')'},module.exports=Point}).call(this,require('buffer').Buffer)},{'assert':75,'bn':71,'buffer':80}],151:[function(require,module,exports){'use strict';var TYPED_OK=typeof Uint8Array!=='undefined'&&typeof Uint16Array!=='undefined'&&typeof Int32Array!=='undefined';exports.assign=function(obj){for(var sources=Array.prototype.slice.call(arguments,1);sources.length;){var source=sources.shift();if(source){if(typeof source!=='object')throw new TypeError(source+'must be non-object');for(var p in source)source.hasOwnProperty(p)&&(obj[p]=source[p])}}return obj},exports.shrinkBuf=function(buf,size){return buf.length===size?buf:buf.subarray?buf.subarray(0,size):(buf.length=size,buf)};var fnTyped={arraySet:function(dest,src,src_offs,len,dest_offs){if(src.subarray&&dest.subarray)return void dest.set(src.subarray(src_offs,src_offs+len),dest_offs);for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},flattenChunks:function(chunks){var i,l,len,pos,chunk,result;for(len=0,i=0,l=chunks.length;i<l;i++)len+=chunks[i].length;for(result=new Uint8Array(len),pos=0,(i=0,l=chunks.length);i<l;i++)chunk=chunks[i],result.set(chunk,pos),pos+=chunk.length;return result}};var fnUntyped={arraySet:function(dest,src,src_offs,len,dest_offs){for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},flattenChunks:function(chunks){return[].concat.apply([],chunks)}};exports.setTyped=function(on){on?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,fnTyped)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,fnUntyped))},exports.setTyped(TYPED_OK)},{}],152:[function(require,module,exports){'use strict';function adler32(adler,buf,len,pos){for(var s1=adler&65535|0,s2=adler>>>16&65535|0,n=0;len!==0;){n=len>2000?2000:len,len-=n;do s1=s1+buf[pos++]|0,s2=s2+s1|0;while(--n);s1%=65521,s2%=65521}return s1|s2<<16|0}module.exports=adler32},{}],153:[function(require,module,exports){module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],154:[function(require,module,exports){'use strict';function makeTable(){var table=[],c;for(var n=0;n<256;n++){c=n;for(var k=0;k<8;k++)c=c&1?3988292384^c>>>1:c>>>1;table[n]=c}return table}function crc32(crc,buf,len,pos){var t=crcTable,end=pos+len;crc^=-1;for(var i=pos;i<end;i++)crc=crc>>>8^t[(crc^buf[i])&255];return crc^-1}var crcTable=makeTable();module.exports=crc32},{}],155:[function(require,module,exports){'use strict';function err(strm,errorCode){return strm.msg=msg[errorCode],errorCode}function rank(f){return(f<<1)-(f>4?9:0)}function zero(buf){for(var len=buf.length;--len>=0;)buf[len]=0}function flush_pending(strm){var s=strm.state;var len=s.pending;len>strm.avail_out&&(len=strm.avail_out);len===0||(utils.arraySet(strm.output,s.pending_buf,s.pending_out,len,strm.next_out),strm.next_out+=len,s.pending_out+=len,strm.total_out+=len,strm.avail_out-=len,s.pending-=len,s.pending===0&&(s.pending_out=0))}function flush_block_only(s,last){trees._tr_flush_block(s,s.block_start>=0?s.block_start:-1,s.strstart-s.block_start,last),s.block_start=s.strstart,flush_pending(s.strm)}function put_byte(s,b){s.pending_buf[s.pending++]=b}function putShortMSB(s,b){s.pending_buf[s.pending++]=b>>>8&255,s.pending_buf[s.pending++]=b&255}function read_buf(strm,buf,start,size){var len=strm.avail_in;return(len>size&&(len=size),len===0)?0:(strm.avail_in-=len,utils.arraySet(buf,strm.input,strm.next_in,len,start),strm.state.wrap===1?strm.adler=adler32(strm.adler,buf,len,start):strm.state.wrap===2&&(strm.adler=crc32(strm.adler,buf,len,start)),strm.next_in+=len,strm.total_in+=len,len)}function longest_match(s,cur_match){var chain_length=s.max_chain_length;var scan=s.strstart;var match;var len;var best_len=s.prev_length;var nice_match=s.nice_match;var limit=s.strstart>s.w_size-MIN_LOOKAHEAD?s.strstart-(s.w_size-MIN_LOOKAHEAD):0;var _win=s.window;var wmask=s.w_mask;var prev=s.prev;var strend=s.strstart+MAX_MATCH;var scan_end1=_win[scan+best_len-1];var scan_end=_win[scan+best_len];s.prev_length>=s.good_match&&(chain_length>>=2),nice_match>s.lookahead&&(nice_match=s.lookahead);do{if(match=cur_match,_win[match+best_len]!==scan_end||_win[match+best_len-1]!==scan_end1||_win[match]!==_win[scan]||_win[++match]!==_win[scan+1])continue;scan+=2,match++;do;while(_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&scan<strend);if(len=MAX_MATCH-(strend-scan),scan=strend-MAX_MATCH,len>best_len){if(s.match_start=cur_match,best_len=len,len>=nice_match)break;scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len]}}while((cur_match=prev[cur_match&wmask])>limit&&--chain_length!==0);return best_len<=s.lookahead?best_len:s.lookahead}function fill_window(s){var _w_size=s.w_size;var p,n,m,more,str;do{if(more=s.window_size-s.lookahead-s.strstart,s.strstart>=_w_size+(_w_size-MIN_LOOKAHEAD)){utils.arraySet(s.window,s.window,_w_size,_w_size,0),s.match_start-=_w_size,s.strstart-=_w_size,s.block_start-=_w_size,n=s.hash_size,p=n;do m=s.head[--p],s.head[p]=m>=_w_size?m-_w_size:0;while(--n);n=_w_size,p=n;do m=s.prev[--p],s.prev[p]=m>=_w_size?m-_w_size:0;while(--n);more+=_w_size}if(s.strm.avail_in===0)break;if(n=read_buf(s.strm,s.window,s.strstart+s.lookahead,more),s.lookahead+=n,s.lookahead+s.insert>=MIN_MATCH)for(str=s.strstart-s.insert,s.ins_h=s.window[str],s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+1])&s.hash_mask;s.insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+MIN_MATCH-1])&s.hash_mask,s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++,s.insert--,!(s.lookahead+s.insert<MIN_MATCH)););}while(s.lookahead<MIN_LOOKAHEAD&&s.strm.avail_in!==0)}function deflate_stored(s,flush){var max_block_size=65535;for(max_block_size>s.pending_buf_size-5&&(max_block_size=s.pending_buf_size-5);;){if(s.lookahead<=1){if(fill_window(s),s.lookahead===0&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(s.lookahead===0)break}s.strstart+=s.lookahead,s.lookahead=0;var max_start=s.block_start+max_block_size;if((s.strstart===0||s.strstart>=max_start)&&(s.lookahead=s.strstart-max_start,s.strstart=max_start,flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE;if(s.strstart-s.block_start>=s.w_size-MIN_LOOKAHEAD&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}return s.insert=0,flush===Z_FINISH?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.strstart>s.block_start&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_NEED_MORE}function deflate_fast(s,flush){var hash_head;for(var bflush;;){if(s.lookahead<MIN_LOOKAHEAD){if(fill_window(s),s.lookahead<MIN_LOOKAHEAD&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(s.lookahead===0)break}if(hash_head=0,s.lookahead>=MIN_MATCH&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),hash_head!==0&&s.strstart-hash_head<=s.w_size-MIN_LOOKAHEAD&&(s.match_length=longest_match(s,hash_head)),!(s.match_length>=MIN_MATCH))bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++;else if(bflush=trees._tr_tally(s,s.strstart-s.match_start,s.match_length-MIN_MATCH),s.lookahead-=s.match_length,s.match_length<=s.max_lazy_match&&s.lookahead>=MIN_MATCH){s.match_length--;do s.strstart++,s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart;while(--s.match_length!==0);s.strstart++}else s.strstart+=s.match_length,s.match_length=0,s.ins_h=s.window[s.strstart],s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+1])&s.hash_mask;if(bflush&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}return s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1,flush===Z_FINISH?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.last_lit&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(s,flush){var hash_head;var bflush;for(var max_insert;;){if(s.lookahead<MIN_LOOKAHEAD){if(fill_window(s),s.lookahead<MIN_LOOKAHEAD&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(s.lookahead===0)break}if(hash_head=0,s.lookahead>=MIN_MATCH&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),s.prev_length=s.match_length,s.prev_match=s.match_start,s.match_length=MIN_MATCH-1,hash_head!==0&&s.prev_length<s.max_lazy_match&&s.strstart-hash_head<=s.w_size-MIN_LOOKAHEAD&&(s.match_length=longest_match(s,hash_head),s.match_length<=5&&(s.strategy===Z_FILTERED||s.match_length===MIN_MATCH&&s.strstart-s.match_start>4096)&&(s.match_length=MIN_MATCH-1)),s.prev_length>=MIN_MATCH&&s.match_length<=s.prev_length){max_insert=s.strstart+s.lookahead-MIN_MATCH,bflush=trees._tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-MIN_MATCH),s.lookahead-=s.prev_length-1,s.prev_length-=2;do++s.strstart<=max_insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart);while(--s.prev_length!==0);if(s.match_available=0,s.match_length=MIN_MATCH-1,s.strstart++,bflush&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}else if(!s.match_available)s.match_available=1,s.strstart++,s.lookahead--;else if(bflush=trees._tr_tally(s,0,s.window[s.strstart-1]),bflush&&flush_block_only(s,!1),s.strstart++,s.lookahead--,s.strm.avail_out===0)return BS_NEED_MORE}return s.match_available&&(bflush=trees._tr_tally(s,0,s.window[s.strstart-1]),s.match_available=0),s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1,flush===Z_FINISH?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.last_lit&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(s,flush){var bflush;var prev;var scan,strend;for(var _win=s.window;;){if(s.lookahead<=MAX_MATCH){if(fill_window(s),s.lookahead<=MAX_MATCH&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(s.lookahead===0)break}if(s.match_length=0,s.lookahead>=MIN_MATCH&&s.strstart>0&&(scan=s.strstart-1,prev=_win[scan],prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan])){strend=s.strstart+MAX_MATCH;do;while(prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&scan<strend);s.match_length=MAX_MATCH-(strend-scan),s.match_length>s.lookahead&&(s.match_length=s.lookahead)}if(s.match_length>=MIN_MATCH?(bflush=trees._tr_tally(s,1,s.match_length-MIN_MATCH),s.lookahead-=s.match_length,s.strstart+=s.match_length,s.match_length=0):(bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++),bflush&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}return s.insert=0,flush===Z_FINISH?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.last_lit&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(s,flush){for(var bflush;;){if(s.lookahead===0&&(fill_window(s),s.lookahead===0)){if(flush===Z_NO_FLUSH)return BS_NEED_MORE;break}if(s.match_length=0,bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++,bflush&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}return s.insert=0,flush===Z_FINISH?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.last_lit&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function lm_init(s){s.window_size=2*s.w_size,zero(s.head),s.max_lazy_match=configuration_table[s.level].max_lazy,s.good_match=configuration_table[s.level].good_length,s.nice_match=configuration_table[s.level].nice_length,s.max_chain_length=configuration_table[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=MIN_MATCH-1,s.match_available=0,s.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new utils.Buf16(HEAP_SIZE*2),this.dyn_dtree=new utils.Buf16((2*D_CODES+1)*2),this.bl_tree=new utils.Buf16((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new utils.Buf16(MAX_BITS+1),this.heap=new utils.Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new utils.Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(strm){var s;return strm&&strm.state?(strm.total_in=strm.total_out=0,strm.data_type=Z_UNKNOWN,s=strm.state,s.pending=0,s.pending_out=0,s.wrap<0&&(s.wrap=-s.wrap),s.status=s.wrap?INIT_STATE:BUSY_STATE,strm.adler=s.wrap===2?0:1,s.last_flush=Z_NO_FLUSH,trees._tr_init(s),Z_OK):err(strm,Z_STREAM_ERROR)}function deflateReset(strm){var ret=deflateResetKeep(strm);return ret===Z_OK&&lm_init(strm.state),ret}function deflateSetHeader(strm,head){return strm&&strm.state?strm.state.wrap===2?(strm.state.gzhead=head,Z_OK):Z_STREAM_ERROR:Z_STREAM_ERROR}function deflateInit2(strm,level,method,windowBits,memLevel,strategy){if(!strm)return Z_STREAM_ERROR;var wrap=1;if(level===Z_DEFAULT_COMPRESSION&&(level=6),windowBits<0?(wrap=0,windowBits=-windowBits):windowBits>15&&(wrap=2,windowBits-=16),memLevel<1||memLevel>MAX_MEM_LEVEL||method!==Z_DEFLATED||windowBits<8||windowBits>15||level<0||level>9||strategy<0||strategy>Z_FIXED)return err(strm,Z_STREAM_ERROR);windowBits===8&&(windowBits=9);var s=new DeflateState;return strm.state=s,s.strm=strm,s.wrap=wrap,s.gzhead=null,s.w_bits=windowBits,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=memLevel+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+MIN_MATCH-1)/MIN_MATCH),s.window=new utils.Buf8(s.w_size*2),s.head=new utils.Buf16(s.hash_size),s.prev=new utils.Buf16(s.w_size),s.lit_bufsize=1<<memLevel+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new utils.Buf8(s.pending_buf_size),s.d_buf=s.lit_bufsize>>1,s.l_buf=(1+2)*s.lit_bufsize,s.level=level,s.strategy=strategy,s.method=method,deflateReset(strm)}function deflateInit(strm,level){return deflateInit2(strm,level,Z_DEFLATED,MAX_WBITS,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY)}function deflate(strm,flush){var old_flush,s;var beg,val;if(!strm||!strm.state||flush>Z_BLOCK||flush<0)return strm?err(strm,Z_STREAM_ERROR):Z_STREAM_ERROR;if(s=strm.state,!strm.output||!strm.input&&strm.avail_in!==0||s.status===FINISH_STATE&&flush!==Z_FINISH)return err(strm,strm.avail_out===0?Z_BUF_ERROR:Z_STREAM_ERROR);if(s.strm=strm,old_flush=s.last_flush,s.last_flush=flush,s.status===INIT_STATE)if(s.wrap===2)strm.adler=0,put_byte(s,31),put_byte(s,139),put_byte(s,8),s.gzhead?(put_byte(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),put_byte(s,s.gzhead.time&255),put_byte(s,s.gzhead.time>>8&255),put_byte(s,s.gzhead.time>>16&255),put_byte(s,s.gzhead.time>>24&255),put_byte(s,s.level===9?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0),put_byte(s,s.gzhead.os&255),s.gzhead.extra&&s.gzhead.extra.length&&(put_byte(s,s.gzhead.extra.length&255),put_byte(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=EXTRA_STATE):(put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,s.level===9?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0),put_byte(s,OS_CODE),s.status=BUSY_STATE);else{var header=Z_DEFLATED+(s.w_bits-8<<4)<<8;var level_flags=-1;level_flags=s.strategy>=Z_HUFFMAN_ONLY||s.level<2?0:s.level<6?1:s.level===6?2:3,header|=level_flags<<6,s.strstart!==0&&(header|=PRESET_DICT),header+=31-header%31,s.status=BUSY_STATE,putShortMSB(s,header),s.strstart!==0&&(putShortMSB(s,strm.adler>>>16),putShortMSB(s,strm.adler&65535)),strm.adler=1}if(s.status===EXTRA_STATE)if(s.gzhead.extra){for(beg=s.pending;s.gzindex<(s.gzhead.extra.length&65535)&&!(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending===s.pending_buf_size));)put_byte(s,s.gzhead.extra[s.gzindex]&255),s.gzindex++;s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=NAME_STATE)}else s.status=NAME_STATE;if(s.status===NAME_STATE)if(s.gzhead.name){beg=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending===s.pending_buf_size)){val=1;break}val=s.gzindex<s.gzhead.name.length?s.gzhead.name.charCodeAt(s.gzindex++)&255:0,put_byte(s,val)}while(val!==0);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),val===0&&(s.gzindex=0,s.status=COMMENT_STATE)}else s.status=COMMENT_STATE;if(s.status===COMMENT_STATE)if(s.gzhead.comment){beg=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending===s.pending_buf_size)){val=1;break}val=s.gzindex<s.gzhead.comment.length?s.gzhead.comment.charCodeAt(s.gzindex++)&255:0,put_byte(s,val)}while(val!==0);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),val===0&&(s.status=HCRC_STATE)}else s.status=HCRC_STATE;if(s.status===HCRC_STATE&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&flush_pending(strm),s.pending+2<=s.pending_buf_size&&(put_byte(s,strm.adler&255),put_byte(s,strm.adler>>8&255),strm.adler=0,s.status=BUSY_STATE)):s.status=BUSY_STATE),s.pending!==0){if(flush_pending(strm),strm.avail_out===0)return s.last_flush=-1,Z_OK;}else if(strm.avail_in===0&&rank(flush)<=rank(old_flush)&&flush!==Z_FINISH)return err(strm,Z_BUF_ERROR);if(s.status===FINISH_STATE&&strm.avail_in!==0)return err(strm,Z_BUF_ERROR);if(strm.avail_in!==0||s.lookahead!==0||flush!==Z_NO_FLUSH&&s.status!==FINISH_STATE){var bstate=s.strategy===Z_HUFFMAN_ONLY?deflate_huff(s,flush):s.strategy===Z_RLE?deflate_rle(s,flush):configuration_table[s.level].func(s,flush);if((bstate===BS_FINISH_STARTED||bstate===BS_FINISH_DONE)&&(s.status=FINISH_STATE),bstate===BS_NEED_MORE||bstate===BS_FINISH_STARTED)return strm.avail_out===0&&(s.last_flush=-1),Z_OK;if(bstate===BS_BLOCK_DONE&&(flush===Z_PARTIAL_FLUSH?trees._tr_align(s):flush!==Z_BLOCK&&(trees._tr_stored_block(s,0,0,!1),flush===Z_FULL_FLUSH&&(zero(s.head),s.lookahead===0&&(s.strstart=0,s.block_start=0,s.insert=0))),flush_pending(strm),strm.avail_out===0))return s.last_flush=-1,Z_OK}return flush===Z_FINISH?s.wrap<=0?Z_STREAM_END:(s.wrap===2?(put_byte(s,strm.adler&255),put_byte(s,strm.adler>>8&255),put_byte(s,strm.adler>>16&255),put_byte(s,strm.adler>>24&255),put_byte(s,strm.total_in&255),put_byte(s,strm.total_in>>8&255),put_byte(s,strm.total_in>>16&255),put_byte(s,strm.total_in>>24&255)):(putShortMSB(s,strm.adler>>>16),putShortMSB(s,strm.adler&65535)),flush_pending(strm),s.wrap>0&&(s.wrap=-s.wrap),s.pending===0?Z_STREAM_END:Z_OK):Z_OK}function deflateEnd(strm){var status;return strm&&strm.state?(status=strm.state.status,status!==INIT_STATE&&status!==EXTRA_STATE&&status!==NAME_STATE&&status!==COMMENT_STATE&&status!==HCRC_STATE&&status!==BUSY_STATE&&status!==FINISH_STATE)?err(strm,Z_STREAM_ERROR):(strm.state=null,status===BUSY_STATE?err(strm,Z_DATA_ERROR):Z_OK):Z_STREAM_ERROR}var utils=require('../utils/common');var trees=require('./trees');var adler32=require('./adler32');var crc32=require('./crc32');var msg=require('./messages');var Z_NO_FLUSH=0;var Z_PARTIAL_FLUSH=1;var Z_FULL_FLUSH=3;var Z_FINISH=4;var Z_BLOCK=5;var Z_OK=0;var Z_STREAM_END=1;var Z_STREAM_ERROR=-2;var Z_DATA_ERROR=-3;var Z_BUF_ERROR=-5;var Z_DEFAULT_COMPRESSION=-1;var Z_FILTERED=1;var Z_HUFFMAN_ONLY=2;var Z_RLE=3;var Z_FIXED=4;var Z_DEFAULT_STRATEGY=0;var Z_UNKNOWN=2;var Z_DEFLATED=8;var MAX_MEM_LEVEL=9;var MAX_WBITS=15;var DEF_MEM_LEVEL=8;var LENGTH_CODES=29;var LITERALS=256;var L_CODES=LITERALS+1+LENGTH_CODES;var D_CODES=30;var BL_CODES=19;var HEAP_SIZE=2*L_CODES+1;var MAX_BITS=15;var MIN_MATCH=3;var MAX_MATCH=258;var MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1;var PRESET_DICT=32;var INIT_STATE=42;var EXTRA_STATE=69;var NAME_STATE=73;var COMMENT_STATE=91;var HCRC_STATE=103;var BUSY_STATE=113;var FINISH_STATE=666;var BS_NEED_MORE=1;var BS_BLOCK_DONE=2;var BS_FINISH_STARTED=3;var BS_FINISH_DONE=4;var OS_CODE=3;var Config=function(good_length,max_lazy,nice_length,max_chain,func){this.good_length=good_length,this.max_lazy=max_lazy,this.nice_length=nice_length,this.max_chain=max_chain,this.func=func};var configuration_table;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],exports.deflateInit=deflateInit,exports.deflateInit2=deflateInit2,exports.deflateReset=deflateReset,exports.deflateResetKeep=deflateResetKeep,exports.deflateSetHeader=deflateSetHeader,exports.deflate=deflate,exports.deflateEnd=deflateEnd,exports.deflateInfo='pako deflate (from Nodeca project)'},{'../utils/common':151,'./adler32':152,'./crc32':154,'./messages':159,'./trees':160}],156:[function(require,module,exports){'use strict';var BAD=30;var TYPE=12;module.exports=function inflate_fast(strm,start){var state;var _in;var last;var _out;var beg;var end;var dmax;var wsize;var whave;var wnext;var window;var hold;var bits;var lcode;var dcode;var lmask;var dmask;var here;var op;var len;var dist;var from;var from_source;var input,output;state=strm.state,_in=strm.next_in,input=strm.input,last=_in+(strm.avail_in-5),_out=strm.next_out,output=strm.output,beg=_out-(start-strm.avail_out),end=_out+(strm.avail_out-257),dmax=state.dmax,wsize=state.wsize,whave=state.whave,wnext=state.wnext,window=state.window,hold=state.hold,bits=state.bits,lcode=state.lencode,dcode=state.distcode,lmask=(1<<state.lenbits)-1,dmask=(1<<state.distbits)-1;top:do{bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=lcode[hold&lmask];dolen:for(;;){if(op=here>>>24,hold>>>=op,bits-=op,op=here>>>16&255,op===0)output[_out++]=here&65535;else if(op&16){len=here&65535,op&=15,op&&(bits<op&&(hold+=input[_in++]<<bits,bits+=8),len+=hold&(1<<op)-1,hold>>>=op,bits-=op),bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=dcode[hold&dmask];dodist:for(;;){if(op=here>>>24,hold>>>=op,bits-=op,op=here>>>16&255,op&16){if(dist=here&65535,op&=15,bits<op&&(hold+=input[_in++]<<bits,bits+=8,bits<op&&(hold+=input[_in++]<<bits,bits+=8)),dist+=hold&(1<<op)-1,dist>dmax){strm.msg='invalid distance too far back',state.mode=BAD;break top}if(hold>>>=op,bits-=op,op=_out-beg,dist>op){if(op=dist-op,op>whave&&state.sane){strm.msg='invalid distance too far back',state.mode=BAD;break top}if(from=0,from_source=window,wnext===0){if(from+=wsize-op,op<len){len-=op;do output[_out++]=window[from++];while(--op);from=_out-dist,from_source=output}}else if(wnext<op){if(from+=wsize+wnext-op,op-=wnext,op<len){len-=op;do output[_out++]=window[from++];while(--op);if(from=0,wnext<len){op=wnext,len-=op;do output[_out++]=window[from++];while(--op);from=_out-dist,from_source=output}}}else if(from+=wnext-op,op<len){len-=op;do output[_out++]=window[from++];while(--op);from=_out-dist,from_source=output}for(;len>2;)output[_out++]=from_source[from++],output[_out++]=from_source[from++],output[_out++]=from_source[from++],len-=3;len&&(output[_out++]=from_source[from++],len>1&&(output[_out++]=from_source[from++]))}else{from=_out-dist;do output[_out++]=output[from++],output[_out++]=output[from++],output[_out++]=output[from++],len-=3;while(len>2);len&&(output[_out++]=output[from++],len>1&&(output[_out++]=output[from++]))}}else if((op&64)===0){here=dcode[(here&65535)+(hold&(1<<op)-1)];continue dodist}else{strm.msg='invalid distance code',state.mode=BAD;break top}break}}else if((op&64)===0){here=lcode[(here&65535)+(hold&(1<<op)-1)];continue dolen}else if(op&32){state.mode=TYPE;break top}else{strm.msg='invalid literal/length code',state.mode=BAD;break top}break}}while(_in<last&&_out<end);return len=bits>>3,_in-=len,bits-=len<<3,hold&=(1<<bits)-1,strm.next_in=_in,strm.next_out=_out,strm.avail_in=_in<last?5+(last-_in):5-(_in-last),strm.avail_out=_out<end?257+(end-_out):257-(_out-end),state.hold=hold,void(state.bits=bits)}},{}],157:[function(require,module,exports){'use strict';function ZSWAP32(q){return(q>>>24&255)+(q>>>8&65280)+((q&65280)<<8)+((q&255)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils.Buf16(320),this.work=new utils.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(strm){var state;return strm&&strm.state?(state=strm.state,strm.total_in=strm.total_out=state.total=0,strm.msg='',state.wrap&&(strm.adler=state.wrap&1),state.mode=HEAD,state.last=0,state.havedict=0,state.dmax=32768,state.head=null,state.hold=0,state.bits=0,state.lencode=state.lendyn=new utils.Buf32(ENOUGH_LENS),state.distcode=state.distdyn=new utils.Buf32(ENOUGH_DISTS),state.sane=1,state.back=-1,Z_OK):Z_STREAM_ERROR}function inflateReset(strm){var state;return strm&&strm.state?(state=strm.state,state.wsize=0,state.whave=0,state.wnext=0,inflateResetKeep(strm)):Z_STREAM_ERROR}function inflateReset2(strm,windowBits){var wrap;var state;return strm&&strm.state?(state=strm.state,windowBits<0?(wrap=0,windowBits=-windowBits):(wrap=(windowBits>>4)+1,windowBits<48&&(windowBits&=15)),windowBits&&(windowBits<8||windowBits>15))?Z_STREAM_ERROR:(state.window!==null&&state.wbits!==windowBits&&(state.window=null),state.wrap=wrap,state.wbits=windowBits,inflateReset(strm)):Z_STREAM_ERROR}function inflateInit2(strm,windowBits){var ret;var state;return strm?(state=new InflateState,strm.state=state,state.window=null,ret=inflateReset2(strm,windowBits),ret!==Z_OK&&(strm.state=null),ret):Z_STREAM_ERROR}function inflateInit(strm){return inflateInit2(strm,DEF_WBITS)}function fixedtables(state){if(virgin){var sym;for(lenfix=new utils.Buf32(512),distfix=new utils.Buf32(32),sym=0;sym<144;)state.lens[sym++]=8;for(;sym<256;)state.lens[sym++]=9;for(;sym<280;)state.lens[sym++]=7;for(;sym<288;)state.lens[sym++]=8;for(inflate_table(LENS,state.lens,0,288,lenfix,0,state.work,{bits:9}),sym=0;sym<32;)state.lens[sym++]=5;inflate_table(DISTS,state.lens,0,32,distfix,0,state.work,{bits:5}),virgin=!1}state.lencode=lenfix,state.lenbits=9,state.distcode=distfix,state.distbits=5}function updatewindow(strm,src,end,copy){var dist;var state=strm.state;return state.window===null&&(state.wsize=1<<state.wbits,state.wnext=0,state.whave=0,state.window=new utils.Buf8(state.wsize)),copy>=state.wsize?(utils.arraySet(state.window,src,end-state.wsize,state.wsize,0),state.wnext=0,state.whave=state.wsize):(dist=state.wsize-state.wnext,dist>copy&&(dist=copy),utils.arraySet(state.window,src,end-copy,dist,state.wnext),copy-=dist,copy?(utils.arraySet(state.window,src,end-copy,copy,0),state.wnext=copy,state.whave=state.wsize):(state.wnext+=dist,state.wnext===state.wsize&&(state.wnext=0),state.whave<state.wsize&&(state.whave+=dist))),0}function inflate(strm,flush){var state;var input,output;var next;var put;var have,left;var hold;var bits;var _in,_out;var copy;var from;var from_source;var here=0;var here_bits,here_op,here_val;var last_bits,last_op,last_val;var len;var ret;var hbuf=new utils.Buf8(4);var opts;var n;var order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!strm||!strm.state||!strm.output||!strm.input&&strm.avail_in!==0)return Z_STREAM_ERROR;state=strm.state,state.mode===TYPE&&(state.mode=TYPEDO),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,_in=have,_out=left,ret=Z_OK;inf_leave:for(;;)switch(state.mode){case HEAD:if(state.wrap===0){state.mode=TYPEDO;break}for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.wrap&2&&hold===35615){state.check=0,hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0),hold=0,bits=0,state.mode=FLAGS;break}if(state.flags=0,state.head&&(state.head.done=!1),!(state.wrap&1)||(((hold&255)<<8)+(hold>>8))%31){strm.msg='incorrect header check',state.mode=BAD;break}if((hold&15)!==Z_DEFLATED){strm.msg='unknown compression method',state.mode=BAD;break}if(hold>>>=4,bits-=4,len=(hold&15)+8,state.wbits===0)state.wbits=len;else if(len>state.wbits){strm.msg='invalid window size',state.mode=BAD;break}state.dmax=1<<len,strm.adler=state.check=1,state.mode=hold&512?DICTID:TYPE,hold=0,bits=0;break;case FLAGS:for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.flags=hold,(state.flags&255)!==Z_DEFLATED){strm.msg='unknown compression method',state.mode=BAD;break}if(state.flags&57344){strm.msg='unknown header flags set',state.mode=BAD;break}state.head&&(state.head.text=hold>>8&1),state.flags&512&&(hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=TIME;case TIME:for(;bits<32;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.time=hold),state.flags&512&&(hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,hbuf[2]=hold>>>16&255,hbuf[3]=hold>>>24&255,state.check=crc32(state.check,hbuf,4,0)),hold=0,bits=0,state.mode=OS;case OS:for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.xflags=hold&255,state.head.os=hold>>8),state.flags&512&&(hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=EXLEN;case EXLEN:if(state.flags&1024){for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length=hold,state.head&&(state.head.extra_len=hold),state.flags&512&&(hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0}else state.head&&(state.head.extra=null);state.mode=EXTRA;case EXTRA:if(state.flags&1024&&(copy=state.length,copy>have&&(copy=have),copy&&(state.head&&(len=state.head.extra_len-state.length,!state.head.extra&&(state.head.extra=Array(state.head.extra_len)),utils.arraySet(state.head.extra,input,next,copy,len)),state.flags&512&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,state.length-=copy),state.length))break inf_leave;state.length=0,state.mode=NAME;case NAME:if(state.flags&2048){if(have===0)break inf_leave;copy=0;do len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.name+=_StringfromCharCode3(len));while(len&&copy<have);if(state.flags&512&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.name=null);state.length=0,state.mode=COMMENT;case COMMENT:if(state.flags&4096){if(have===0)break inf_leave;copy=0;do len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.comment+=_StringfromCharCode3(len));while(len&&copy<have);if(state.flags&512&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.comment=null);state.mode=HCRC;case HCRC:if(state.flags&512){for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold!==(state.check&65535)){strm.msg='header crc mismatch',state.mode=BAD;break}hold=0,bits=0}state.head&&(state.head.hcrc=state.flags>>9&1,state.head.done=!0),strm.adler=state.check=0,state.mode=TYPE;break;case DICTID:for(;bits<32;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}strm.adler=state.check=ZSWAP32(hold),hold=0,bits=0,state.mode=DICT;case DICT:if(state.havedict===0)return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,Z_NEED_DICT;strm.adler=state.check=1,state.mode=TYPE;case TYPE:if(flush===Z_BLOCK||flush===Z_TREES)break inf_leave;case TYPEDO:if(state.last){hold>>>=bits&7,bits-=bits&7,state.mode=CHECK;break}for(;bits<3;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}switch(state.last=hold&1,hold>>>=1,bits-=1,hold&3){case 0:state.mode=STORED;break;case 1:if(fixedtables(state),state.mode=LEN_,flush===Z_TREES){hold>>>=2,bits-=2;break inf_leave}break;case 2:state.mode=TABLE;break;case 3:strm.msg='invalid block type',state.mode=BAD;}hold>>>=2,bits-=2;break;case STORED:for(hold>>>=bits&7,bits-=bits&7;bits<32;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if((hold&65535)!==(hold>>>16^65535)){strm.msg='invalid stored block lengths',state.mode=BAD;break}if(state.length=hold&65535,hold=0,bits=0,state.mode=COPY_,flush===Z_TREES)break inf_leave;case COPY_:state.mode=COPY;case COPY:if(copy=state.length,copy){if(copy>have&&(copy=have),copy>left&&(copy=left),copy===0)break inf_leave;utils.arraySet(output,input,next,copy,put),have-=copy,next+=copy,left-=copy,put+=copy,state.length-=copy;break}state.mode=TYPE;break;case TABLE:for(;bits<14;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.nlen=(hold&31)+257,hold>>>=5,bits-=5,state.ndist=(hold&31)+1,hold>>>=5,bits-=5,state.ncode=(hold&15)+4,hold>>>=4,bits-=4,state.nlen>286||state.ndist>30){strm.msg='too many length or distance symbols',state.mode=BAD;break}state.have=0,state.mode=LENLENS;case LENLENS:for(;state.have<state.ncode;){for(;bits<3;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.lens[order[state.have++]]=hold&7,hold>>>=3,bits-=3}for(;state.have<19;)state.lens[order[state.have++]]=0;if(state.lencode=state.lendyn,state.lenbits=7,opts={bits:state.lenbits},ret=inflate_table(CODES,state.lens,0,19,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg='invalid code lengths set',state.mode=BAD;break}state.have=0,state.mode=CODELENS;case CODELENS:for(;state.have<state.nlen+state.ndist;){for(;;){if(here=state.lencode[hold&(1<<state.lenbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,here_bits<=bits)break;if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_val<16)hold>>>=here_bits,bits-=here_bits,state.lens[state.have++]=here_val;else{if(here_val===16){for(n=here_bits+2;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold>>>=here_bits,bits-=here_bits,state.have===0){strm.msg='invalid bit length repeat',state.mode=BAD;break}len=state.lens[state.have-1],copy=3+(hold&3),hold>>>=2,bits-=2}else if(here_val===17){for(n=here_bits+3;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=here_bits,bits-=here_bits,len=0,copy=3+(hold&7),hold>>>=3,bits-=3}else{for(n=here_bits+7;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=here_bits,bits-=here_bits,len=0,copy=11+(hold&127),hold>>>=7,bits-=7}if(state.have+copy>state.nlen+state.ndist){strm.msg='invalid bit length repeat',state.mode=BAD;break}for(;copy--;)state.lens[state.have++]=len}}if(state.mode===BAD)break;if(state.lens[256]===0){strm.msg='invalid code -- missing end-of-block',state.mode=BAD;break}if(state.lenbits=9,opts={bits:state.lenbits},ret=inflate_table(LENS,state.lens,0,state.nlen,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg='invalid literal/lengths set',state.mode=BAD;break}if(state.distbits=6,state.distcode=state.distdyn,opts={bits:state.distbits},ret=inflate_table(DISTS,state.lens,state.nlen,state.ndist,state.distcode,0,state.work,opts),state.distbits=opts.bits,ret){strm.msg='invalid distances set',state.mode=BAD;break}if(state.mode=LEN_,flush===Z_TREES)break inf_leave;case LEN_:state.mode=LEN;case LEN:if(have>=6&&left>=258){strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,inflate_fast(strm,_out),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,state.mode===TYPE&&(state.back=-1);break}for(state.back=0;;){if(here=state.lencode[hold&(1<<state.lenbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,here_bits<=bits)break;if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_op&&(here_op&240)===0){for(last_bits=here_bits,last_op=here_op,last_val=here_val;;){if(here=state.lencode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,last_bits+here_bits<=bits)break;if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,state.length=here_val,here_op===0){state.mode=LIT;break}if(here_op&32){state.back=-1,state.mode=TYPE;break}if(here_op&64){strm.msg='invalid literal/length code',state.mode=BAD;break}state.extra=here_op&15,state.mode=LENEXT;case LENEXT:if(state.extra){for(n=state.extra;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}state.was=state.length,state.mode=DIST;case DIST:for(;;){if(here=state.distcode[hold&(1<<state.distbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,here_bits<=bits)break;if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if((here_op&240)===0){for(last_bits=here_bits,last_op=here_op,last_val=here_val;;){if(here=state.distcode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,last_bits+here_bits<=bits)break;if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,here_op&64){strm.msg='invalid distance code',state.mode=BAD;break}state.offset=here_val,state.extra=here_op&15,state.mode=DISTEXT;case DISTEXT:if(state.extra){for(n=state.extra;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.offset+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}if(state.offset>state.dmax){strm.msg='invalid distance too far back',state.mode=BAD;break}state.mode=MATCH;case MATCH:if(left===0)break inf_leave;if(copy=_out-left,state.offset>copy){if(copy=state.offset-copy,copy>state.whave&&state.sane){strm.msg='invalid distance too far back',state.mode=BAD;break}copy>state.wnext?(copy-=state.wnext,from=state.wsize-copy):from=state.wnext-copy,copy>state.length&&(copy=state.length),from_source=state.window}else from_source=output,from=put-state.offset,copy=state.length;copy>left&&(copy=left),left-=copy,state.length-=copy;do output[put++]=from_source[from++];while(--copy);state.length===0&&(state.mode=LEN);break;case LIT:if(left===0)break inf_leave;output[put++]=state.length,left--,state.mode=LEN;break;case CHECK:if(state.wrap){for(;bits<32;){if(have===0)break inf_leave;have--,hold|=input[next++]<<bits,bits+=8}if(_out-=left,strm.total_out+=_out,state.total+=_out,_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,put-_out):adler32(state.check,output,_out,put-_out)),_out=left,(state.flags?hold:ZSWAP32(hold))!==state.check){strm.msg='incorrect data check',state.mode=BAD;break}hold=0,bits=0}state.mode=LENGTH;case LENGTH:if(state.wrap&&state.flags){for(;bits<32;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold!==(state.total&4294967295)){strm.msg='incorrect length check',state.mode=BAD;break}hold=0,bits=0}state.mode=DONE;case DONE:ret=Z_STREAM_END;break inf_leave;case BAD:ret=Z_DATA_ERROR;break inf_leave;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR;}return(strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,(state.wsize||_out!==strm.avail_out&&state.mode<BAD&&(state.mode<CHECK||flush!==Z_FINISH))&&updatewindow(strm,strm.output,strm.next_out,_out-strm.avail_out))?(state.mode=MEM,Z_MEM_ERROR):(_in-=strm.avail_in,_out-=strm.avail_out,strm.total_in+=_in,strm.total_out+=_out,state.total+=_out,state.wrap&&_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,strm.next_out-_out):adler32(state.check,output,_out,strm.next_out-_out)),strm.data_type=state.bits+(state.last?64:0)+(state.mode===TYPE?128:0)+(state.mode===LEN_||state.mode===COPY_?256:0),(_in===0&&_out===0||flush===Z_FINISH)&&ret===Z_OK&&(ret=Z_BUF_ERROR),ret)}function inflateEnd(strm){if(!strm||!strm.state)return Z_STREAM_ERROR;var state=strm.state;return state.window&&(state.window=null),strm.state=null,Z_OK}function inflateGetHeader(strm,head){var state;return strm&&strm.state?(state=strm.state,(state.wrap&2)===0)?Z_STREAM_ERROR:(state.head=head,head.done=!1,Z_OK):Z_STREAM_ERROR}var utils=require('../utils/common');var adler32=require('./adler32');var crc32=require('./crc32');var inflate_fast=require('./inffast');var inflate_table=require('./inftrees');var CODES=0;var LENS=1;var DISTS=2;var Z_FINISH=4;var Z_BLOCK=5;var Z_TREES=6;var Z_OK=0;var Z_STREAM_END=1;var Z_NEED_DICT=2;var Z_STREAM_ERROR=-2;var Z_DATA_ERROR=-3;var Z_MEM_ERROR=-4;var Z_BUF_ERROR=-5;var Z_DEFLATED=8;var HEAD=1;var FLAGS=2;var TIME=3;var OS=4;var EXLEN=5;var EXTRA=6;var NAME=7;var COMMENT=8;var HCRC=9;var DICTID=10;var DICT=11;var TYPE=12;var TYPEDO=13;var STORED=14;var COPY_=15;var COPY=16;var TABLE=17;var LENLENS=18;var CODELENS=19;var LEN_=20;var LEN=21;var LENEXT=22;var DIST=23;var DISTEXT=24;var MATCH=25;var LIT=26;var CHECK=27;var LENGTH=28;var DONE=29;var BAD=30;var MEM=31;var SYNC=32;var ENOUGH_LENS=852;var ENOUGH_DISTS=592;var MAX_WBITS=15;var DEF_WBITS=MAX_WBITS;var virgin=!0;var lenfix,distfix;exports.inflateReset=inflateReset,exports.inflateReset2=inflateReset2,exports.inflateResetKeep=inflateResetKeep,exports.inflateInit=inflateInit,exports.inflateInit2=inflateInit2,exports.inflate=inflate,exports.inflateEnd=inflateEnd,exports.inflateGetHeader=inflateGetHeader,exports.inflateInfo='pako inflate (from Nodeca project)'},{'../utils/common':151,'./adler32':152,'./crc32':154,'./inffast':156,'./inftrees':158}],158:[function(require,module,exports){'use strict';var utils=require('../utils/common');var MAXBITS=15;var ENOUGH_LENS=852;var ENOUGH_DISTS=592;var CODES=0;var LENS=1;var DISTS=2;var lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];var dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];var dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function inflate_table(type,lens,lens_index,codes,table,table_index,work,opts){var bits=opts.bits;var len=0;var sym=0;var min=0,max=0;var root=0;var curr=0;var drop=0;var left=0;var used=0;var huff=0;var incr;var fill;var low;var mask;var next;var base=null;var base_index=0;var end;var count=new utils.Buf16(MAXBITS+1);var offs=new utils.Buf16(MAXBITS+1);var extra=null;var extra_index=0;var here_bits,here_op,here_val;for(len=0;len<=MAXBITS;len++)count[len]=0;for(sym=0;sym<codes;sym++)count[lens[lens_index+sym]]++;for(root=bits,max=MAXBITS;max>=1&&count[max]===0;max--);if(root>max&&(root=max),max===0)return table[table_index++]=1<<24|64<<16|0,table[table_index++]=1<<24|64<<16|0,opts.bits=1,0;for(min=1;min<max&&count[min]===0;min++);for(root<min&&(root=min),left=1,len=1;len<=MAXBITS;len++)if(left<<=1,left-=count[len],left<0)return-1;if(left>0&&(type===CODES||max!==1))return-1;for(offs[1]=0,len=1;len<MAXBITS;len++)offs[len+1]=offs[len]+count[len];for(sym=0;sym<codes;sym++)lens[lens_index+sym]!==0&&(work[offs[lens[lens_index+sym]]++]=sym);if(type===CODES?(base=extra=work,end=19):type===LENS?(base=lbase,base_index-=257,extra=lext,extra_index-=257,end=256):(base=dbase,extra=dext,end=-1),huff=0,sym=0,len=min,next=table_index,curr=root,drop=0,low=-1,used=1<<root,mask=used-1,type===LENS&&used>ENOUGH_LENS||type===DISTS&&used>ENOUGH_DISTS)return 1;for(var i=0;;){i++,here_bits=len-drop,work[sym]<end?(here_op=0,here_val=work[sym]):work[sym]>end?(here_op=extra[extra_index+work[sym]],here_val=base[base_index+work[sym]]):(here_op=32+64,here_val=0),incr=1<<len-drop,fill=1<<curr,min=fill;do fill-=incr,table[next+(huff>>drop)+fill]=here_bits<<24|here_op<<16|here_val|0;while(fill!==0);for(incr=1<<len-1;huff&incr;)incr>>=1;if(incr===0?huff=0:(huff&=incr-1,huff+=incr),sym++,--count[len]===0){if(len===max)break;len=lens[lens_index+work[sym]]}if(len>root&&(huff&mask)!==low){for(drop===0&&(drop=root),next+=min,curr=len-drop,left=1<<curr;curr+drop<max&&(left-=count[curr+drop],!(left<=0));)curr++,left<<=1;if(used+=1<<curr,type===LENS&&used>ENOUGH_LENS||type===DISTS&&used>ENOUGH_DISTS)return 1;low=huff&mask,table[low]=root<<24|curr<<16|next-table_index|0}}return huff!==0&&(table[next+huff]=len-drop<<24|64<<16|0),opts.bits=root,0}},{'../utils/common':151}],159:[function(require,module,exports){'use strict';module.exports={'2':'need dictionary','1':'stream end','0':'','-1':'file error','-2':'stream error','-3':'data error','-4':'insufficient memory','-5':'buffer error','-6':'incompatible version'}},{}],160:[function(require,module,exports){'use strict';function zero(buf){for(var len=buf.length;--len>=0;)buf[len]=0}function d_code(dist){return dist<256?_dist_code[dist]:_dist_code[256+(dist>>>7)]}function put_short(s,w){s.pending_buf[s.pending++]=w&255,s.pending_buf[s.pending++]=w>>>8&255}function send_bits(s,value,length){s.bi_valid>Buf_size-length?(s.bi_buf|=value<<s.bi_valid&65535,put_short(s,s.bi_buf),s.bi_buf=value>>Buf_size-s.bi_valid,s.bi_valid+=length-Buf_size):(s.bi_buf|=value<<s.bi_valid&65535,s.bi_valid+=length)}function send_code(s,c,tree){send_bits(s,tree[c*2],tree[c*2+1])}function bi_reverse(code,len){var res=0;do res|=code&1,code>>>=1,res<<=1;while(--len>0);return res>>>1}function bi_flush(s){s.bi_valid===16?(put_short(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):s.bi_valid>=8&&(s.pending_buf[s.pending++]=s.bi_buf&255,s.bi_buf>>=8,s.bi_valid-=8)}function gen_bitlen(s,desc){var tree=desc.dyn_tree;var max_code=desc.max_code;var stree=desc.stat_desc.static_tree;var has_stree=desc.stat_desc.has_stree;var extra=desc.stat_desc.extra_bits;var base=desc.stat_desc.extra_base;var max_length=desc.stat_desc.max_length;var h;var n,m;var bits;var xbits;var f;var overflow=0;for(bits=0;bits<=MAX_BITS;bits++)s.bl_count[bits]=0;for(tree[s.heap[s.heap_max]*2+1]=0,h=s.heap_max+1;h<HEAP_SIZE;h++)(n=s.heap[h],bits=tree[tree[n*2+1]*2+1]+1,bits>max_length&&(bits=max_length,overflow++),tree[n*2+1]=bits,!(n>max_code))&&(s.bl_count[bits]++,xbits=0,n>=base&&(xbits=extra[n-base]),f=tree[n*2],s.opt_len+=f*(bits+xbits),has_stree&&(s.static_len+=f*(stree[n*2+1]+xbits)));if(overflow!==0){do{for(bits=max_length-1;s.bl_count[bits]===0;)bits--;s.bl_count[bits]--,s.bl_count[bits+1]+=2,s.bl_count[max_length]--,overflow-=2}while(overflow>0);for(bits=max_length;bits!==0;bits--)for(n=s.bl_count[bits];n!==0;)(m=s.heap[--h],!(m>max_code))&&(tree[m*2+1]!==bits&&(s.opt_len+=(bits-tree[m*2+1])*tree[m*2],tree[m*2+1]=bits),n--)}}function gen_codes(tree,max_code,bl_count){var next_code=Array(MAX_BITS+1);var code=0;var bits;var n;for(bits=1;bits<=MAX_BITS;bits++)next_code[bits]=code=code+bl_count[bits-1]<<1;for(n=0;n<=max_code;n++){var len=tree[n*2+1];len!==0&&(tree[n*2]=bi_reverse(next_code[len]++,len))}}function tr_static_init(){var n;var bits;var length;var code;var dist;var bl_count=Array(MAX_BITS+1);for(length=0,code=0;code<LENGTH_CODES-1;code++)for(base_length[code]=length,n=0;n<1<<extra_lbits[code];n++)_length_code[length++]=code;for(_length_code[length-1]=code,dist=0,code=0;code<16;code++)for(base_dist[code]=dist,n=0;n<1<<extra_dbits[code];n++)_dist_code[dist++]=code;for(dist>>=7;code<D_CODES;code++)for(base_dist[code]=dist<<7,n=0;n<1<<extra_dbits[code]-7;n++)_dist_code[256+dist++]=code;for(bits=0;bits<=MAX_BITS;bits++)bl_count[bits]=0;for(n=0;n<=143;)static_ltree[n*2+1]=8,n++,bl_count[8]++;for(;n<=255;)static_ltree[n*2+1]=9,n++,bl_count[9]++;for(;n<=279;)static_ltree[n*2+1]=7,n++,bl_count[7]++;for(;n<=287;)static_ltree[n*2+1]=8,n++,bl_count[8]++;for(gen_codes(static_ltree,L_CODES+1,bl_count),n=0;n<D_CODES;n++)static_dtree[n*2+1]=5,static_dtree[n*2]=bi_reverse(n,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS),static_bl_desc=new StaticTreeDesc([],extra_blbits,0,BL_CODES,MAX_BL_BITS)}function init_block(s){var n;for(n=0;n<L_CODES;n++)s.dyn_ltree[n*2]=0;for(n=0;n<D_CODES;n++)s.dyn_dtree[n*2]=0;for(n=0;n<BL_CODES;n++)s.bl_tree[n*2]=0;s.dyn_ltree[END_BLOCK*2]=1,s.opt_len=s.static_len=0,s.last_lit=s.matches=0}function bi_windup(s){s.bi_valid>8?put_short(s,s.bi_buf):s.bi_valid>0&&(s.pending_buf[s.pending++]=s.bi_buf),s.bi_buf=0,s.bi_valid=0}function copy_block(s,buf,len,header){bi_windup(s),header&&(put_short(s,len),put_short(s,~len)),utils.arraySet(s.pending_buf,s.window,buf,len,s.pending),s.pending+=len}function smaller(tree,n,m,depth){var _n2=n*2;var _m2=m*2;return tree[_n2]<tree[_m2]||tree[_n2]===tree[_m2]&&depth[n]<=depth[m]}function pqdownheap(s,tree,k){var v=s.heap[k];for(var j=k<<1;j<=s.heap_len&&(j<s.heap_len&&smaller(tree,s.heap[j+1],s.heap[j],s.depth)&&j++,!smaller(tree,v,s.heap[j],s.depth));)s.heap[k]=s.heap[j],k=j,j<<=1;s.heap[k]=v}function compress_block(s,ltree,dtree){var dist;var lc;var lx=0;var code;var extra;if(s.last_lit!==0)do dist=s.pending_buf[s.d_buf+lx*2]<<8|s.pending_buf[s.d_buf+lx*2+1],lc=s.pending_buf[s.l_buf+lx],lx++,dist===0?send_code(s,lc,ltree):(code=_length_code[lc],send_code(s,code+LITERALS+1,ltree),extra=extra_lbits[code],extra!==0&&(lc-=base_length[code],send_bits(s,lc,extra)),dist--,code=d_code(dist),send_code(s,code,dtree),extra=extra_dbits[code],extra!==0&&(dist-=base_dist[code],send_bits(s,dist,extra)));while(lx<s.last_lit);send_code(s,END_BLOCK,ltree)}function build_tree(s,desc){var tree=desc.dyn_tree;var stree=desc.stat_desc.static_tree;var has_stree=desc.stat_desc.has_stree;var elems=desc.stat_desc.elems;var n,m;var max_code=-1;var node;for(s.heap_len=0,s.heap_max=HEAP_SIZE,n=0;n<elems;n++)tree[n*2]===0?tree[n*2+1]=0:(s.heap[++s.heap_len]=max_code=n,s.depth[n]=0);for(;s.heap_len<2;)node=s.heap[++s.heap_len]=max_code<2?++max_code:0,tree[node*2]=1,s.depth[node]=0,s.opt_len--,has_stree&&(s.static_len-=stree[node*2+1]);for(desc.max_code=max_code,n=s.heap_len>>1;n>=1;n--)pqdownheap(s,tree,n);node=elems;do n=s.heap[1],s.heap[1]=s.heap[s.heap_len--],pqdownheap(s,tree,1),m=s.heap[1],s.heap[--s.heap_max]=n,s.heap[--s.heap_max]=m,tree[node*2]=tree[n*2]+tree[m*2],s.depth[node]=(s.depth[n]>=s.depth[m]?s.depth[n]:s.depth[m])+1,tree[n*2+1]=tree[m*2+1]=node,s.heap[1]=node++,pqdownheap(s,tree,1);while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1],gen_bitlen(s,desc),gen_codes(tree,max_code,s.bl_count)}function scan_tree(s,tree,max_code){var n;var prevlen=-1;var curlen;var nextlen=tree[0*2+1];var count=0;var max_count=7;var min_count=4;for(nextlen===0&&(max_count=138,min_count=3),tree[(max_code+1)*2+1]=65535,n=0;n<=max_code;n++){if(curlen=nextlen,nextlen=tree[(n+1)*2+1],++count<max_count&&curlen===nextlen)continue;else count<min_count?s.bl_tree[curlen*2]+=count:curlen===0?count<=10?s.bl_tree[REPZ_3_10*2]++:s.bl_tree[REPZ_11_138*2]++:(curlen!==prevlen&&s.bl_tree[curlen*2]++,s.bl_tree[REP_3_6*2]++);count=0,prevlen=curlen,nextlen===0?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4)}}function send_tree(s,tree,max_code){var n;var prevlen=-1;var curlen;var nextlen=tree[0*2+1];var count=0;var max_count=7;var min_count=4;for(nextlen===0&&(max_count=138,min_count=3),n=0;n<=max_code;n++){if(curlen=nextlen,nextlen=tree[(n+1)*2+1],++count<max_count&&curlen===nextlen)continue;else if(count<min_count)do send_code(s,curlen,s.bl_tree);while(--count!==0);else curlen===0?count<=10?(send_code(s,REPZ_3_10,s.bl_tree),send_bits(s,count-3,3)):(send_code(s,REPZ_11_138,s.bl_tree),send_bits(s,count-11,7)):(curlen!==prevlen&&(send_code(s,curlen,s.bl_tree),count--),send_code(s,REP_3_6,s.bl_tree),send_bits(s,count-3,2));count=0,prevlen=curlen,nextlen===0?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4)}}function build_bl_tree(s){var max_blindex;for(scan_tree(s,s.dyn_ltree,s.l_desc.max_code),scan_tree(s,s.dyn_dtree,s.d_desc.max_code),build_tree(s,s.bl_desc),max_blindex=BL_CODES-1;max_blindex>=3&&s.bl_tree[bl_order[max_blindex]*2+1]===0;max_blindex--);return s.opt_len+=3*(max_blindex+1)+5+5+4,max_blindex}function send_all_trees(s,lcodes,dcodes,blcodes){var rank;for(send_bits(s,lcodes-257,5),send_bits(s,dcodes-1,5),send_bits(s,blcodes-4,4),rank=0;rank<blcodes;rank++)send_bits(s,s.bl_tree[bl_order[rank]*2+1],3);send_tree(s,s.dyn_ltree,lcodes-1),send_tree(s,s.dyn_dtree,dcodes-1)}function detect_data_type(s){var black_mask=4093624447;var n;for(n=0;n<=31;n++,black_mask>>>=1)if(black_mask&1&&s.dyn_ltree[n*2]!==0)return Z_BINARY;if(s.dyn_ltree[9*2]!==0||s.dyn_ltree[10*2]!==0||s.dyn_ltree[13*2]!==0)return Z_TEXT;for(n=32;n<LITERALS;n++)if(s.dyn_ltree[n*2]!==0)return Z_TEXT;return Z_BINARY}function _tr_init(s){!static_init_done&&(tr_static_init(),static_init_done=!0),s.l_desc=new TreeDesc(s.dyn_ltree,static_l_desc),s.d_desc=new TreeDesc(s.dyn_dtree,static_d_desc),s.bl_desc=new TreeDesc(s.bl_tree,static_bl_desc),s.bi_buf=0,s.bi_valid=0,init_block(s)}function _tr_stored_block(s,buf,stored_len,last){send_bits(s,(STORED_BLOCK<<1)+(last?1:0),3),copy_block(s,buf,stored_len,!0)}function _tr_align(s){send_bits(s,STATIC_TREES<<1,3),send_code(s,END_BLOCK,static_ltree),bi_flush(s)}function _tr_flush_block(s,buf,stored_len,last){var opt_lenb,static_lenb;var max_blindex=0;s.level>0?(s.strm.data_type===Z_UNKNOWN&&(s.strm.data_type=detect_data_type(s)),build_tree(s,s.l_desc),build_tree(s,s.d_desc),max_blindex=build_bl_tree(s),opt_lenb=s.opt_len+3+7>>>3,static_lenb=s.static_len+3+7>>>3,static_lenb<=opt_lenb&&(opt_lenb=static_lenb)):opt_lenb=static_lenb=stored_len+5,stored_len+4<=opt_lenb&&buf!==-1?_tr_stored_block(s,buf,stored_len,last):s.strategy===Z_FIXED||static_lenb===opt_lenb?(send_bits(s,(STATIC_TREES<<1)+(last?1:0),3),compress_block(s,static_ltree,static_dtree)):(send_bits(s,(DYN_TREES<<1)+(last?1:0),3),send_all_trees(s,s.l_desc.max_code+1,s.d_desc.max_code+1,max_blindex+1),compress_block(s,s.dyn_ltree,s.dyn_dtree)),init_block(s),last&&bi_windup(s)}function _tr_tally(s,dist,lc){return s.pending_buf[s.d_buf+s.last_lit*2]=dist>>>8&255,s.pending_buf[s.d_buf+s.last_lit*2+1]=dist&255,s.pending_buf[s.l_buf+s.last_lit]=lc&255,s.last_lit++,dist===0?s.dyn_ltree[lc*2]++:(s.matches++,dist--,s.dyn_ltree[(_length_code[lc]+LITERALS+1)*2]++,s.dyn_dtree[d_code(dist)*2]++),s.last_lit===s.lit_bufsize-1}var utils=require('../utils/common');var Z_FIXED=4;var Z_BINARY=0;var Z_TEXT=1;var Z_UNKNOWN=2;var STORED_BLOCK=0;var STATIC_TREES=1;var DYN_TREES=2;var MIN_MATCH=3;var MAX_MATCH=258;var LENGTH_CODES=29;var LITERALS=256;var L_CODES=LITERALS+1+LENGTH_CODES;var D_CODES=30;var BL_CODES=19;var HEAP_SIZE=2*L_CODES+1;var MAX_BITS=15;var Buf_size=16;var MAX_BL_BITS=7;var END_BLOCK=256;var REP_3_6=16;var REPZ_3_10=17;var REPZ_11_138=18;var extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var DIST_CODE_LEN=512;var static_ltree=Array((L_CODES+2)*2);zero(static_ltree);var static_dtree=Array(D_CODES*2);zero(static_dtree);var _dist_code=Array(DIST_CODE_LEN);zero(_dist_code);var _length_code=Array(MAX_MATCH-MIN_MATCH+1);zero(_length_code);var base_length=Array(LENGTH_CODES);zero(base_length);var base_dist=Array(D_CODES);zero(base_dist);var StaticTreeDesc=function(static_tree,extra_bits,extra_base,elems,max_length){this.static_tree=static_tree,this.extra_bits=extra_bits,this.extra_base=extra_base,this.elems=elems,this.max_length=max_length,this.has_stree=static_tree&&static_tree.length};var static_l_desc;var static_d_desc;var static_bl_desc;var TreeDesc=function(dyn_tree,stat_desc){this.dyn_tree=dyn_tree,this.max_code=0,this.stat_desc=stat_desc};var static_init_done=!1;exports._tr_init=_tr_init,exports._tr_stored_block=_tr_stored_block,exports._tr_flush_block=_tr_flush_block,exports._tr_tally=_tr_tally,exports._tr_align=_tr_align},{'../utils/common':151}],161:[function(require,module,exports){'use strict';function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg='',this.state=null,this.data_type=2,this.adler=0}module.exports=ZStream},{}],162:[function(require,module,exports){(function(Buffer){(function(){var Encoder,Message,Parser,bufeq_fast,clearsign,compute_crc24,crc24_to_base64,crc_table,decode,encode,formatCheckSum,getCheckSum,katch,make_line,strip,trim,uint_to_buffer,verifyCheckSum,_ref;_ref=require('./util'),trim=_ref.trim,strip=_ref.strip,katch=_ref.katch,bufeq_fast=_ref.bufeq_fast,uint_to_buffer=_ref.uint_to_buffer,make_line=function(x){return x==null&&(x=''),''+x+'\n'},exports.Encoder=Encoder=function(){function Encoder(C){this.C=C}return Encoder.prototype.frame=function(t){var dash,i;return dash=function(){var _i,_results;for(_results=[],i=_i=0;_i<5;i=++_i)_results.push('-');return _results}().join(''),{begin:make_line(dash+('BEGIN PGP '+t)+dash),end:make_line(dash+('END PGP '+t)+dash)}},Encoder.prototype.b64e=function(d){var end,i,parts,raw,w;return raw=d.toString('base64'),w=64,parts=function(){var _i,_ref1,_results;for(_results=[],i=_i=0,_ref1=raw.length;w>0?_i<_ref1:_i>_ref1;i=_i+=w)end=_Mathmin5(i+w,raw.length),_results.push(raw.slice(i,end));return _results}(),make_line(parts.join('\n'))},Encoder.prototype.header=function(){var x;return function(){var _i,_len,_ref1,_results;for(_ref1=['Version: '+this.C.header.version,'Comment: '+this.C.header.comment],_results=[],(_i=0,_len=_ref1.length);_i<_len;_i++)x=_ref1[_i],_results.push(make_line(x));return _results}.call(this).join('')},Encoder.prototype.encode=function(type,data){var f;return f=this.frame(type),f.begin.concat(this.header(),make_line(),this.b64e(data),formatCheckSum(data),f.end)},Encoder}(),exports.clearsign_header=clearsign=function(C,data,hasher_name){var enc,f;return enc=new Encoder(C),f=enc.frame('SIGNED MESSAGE').begin,f.concat(make_line('Hash: '+hasher_name),make_line(),data)},exports.encode=encode=function(C,type,data){return new Encoder(C).encode(type,data)},crc_table=[0,8801531,25875725,17603062,60024545,51751450,35206124,44007191,128024889,120049090,103502900,112007375,70412248,78916387,95990485,88014382,264588937,256049778,240098180,248108927,207005800,215016595,232553829,224014750,140824496,149062475,166599357,157832774,200747345,191980970,176028764,184266919,520933865,529177874,512099556,503334943,480196360,471432179,487973381,496217854,414011600,405478443,422020573,430033190,457094705,465107658,448029500,439496647,281648992,273666971,289622637,298124950,324696449,333198714,315665548,307683447,392699481,401494690,383961940,375687087,352057528,343782467,359738805,368533838,1041867730,1050668841,1066628831,1058355748,1032471859,1024199112,1006669886,1015471301,968368875,960392720,942864358,951368477,975946762,984451313,1000411399,992435708,836562267,828023200,810956886,818967725,844041146,852051777,868605623,860066380,914189410,922427545,938981743,930215316,904825475,896059000,878993294,887231349,555053627,563297984,547333942,538569677,579245274,570480673,588005847,596249900,649392898,640860153,658384399,666397428,623318499,631331096,615366894,606833685,785398962,777416777,794487231,802989380,759421523,767923880,751374174,743392165,695319947,704115056,687564934,679289981,719477610,711202705,728272487,737067676,2083735460,2092239711,2109313705,2101337682,2141233477,2133257662,2116711496,2125215923,2073216669,2064943718,2048398224,2057199467,2013339772,2022141063,2039215473,2030942602,1945504045,1936737750,1920785440,1929023707,1885728716,1893966647,1911503553,1902736954,1951893524,1959904495,1977441561,1968902626,2009362165,2000822798,1984871416,1992881923,1665111629,1673124534,1656046400,1647513531,1621913772,1613380695,1629922721,1637935450,1688082292,1679317903,1695859321,1704103554,1728967061,1737211246,1720132760,1711368291,1828378820,1820103743,1836060105,1844855090,1869168165,1877963486,1860430632,1852155859,1801148925,1809650950,1792118000,1784135691,1757986588,1750004711,1765960209,1774462698,1110107254,1118611597,1134571899,1126595968,1102643863,1094667884,1077139354,1085643617,1166763343,1158490548,1140961346,1149762745,1176011694,1184812885,1200772771,1192499800,1307552511,1298785796,1281720306,1289958153,1316768798,1325007077,1341561107,1332794856,1246636998,1254647613,1271201483,1262662192,1239272743,1230733788,1213667370,1221678289,1562785183,1570797924,1554833554,1546300521,1588974462,1580441477,1597965939,1605978760,1518843046,1510078557,1527603627,1535847760,1494504007,1502748348,1486784330,1478020017,1390639894,1382365165,1399434779,1408230112,1366334967,1375129868,1358579962,1350304769,1430452783,1438955220,1422405410,1414423513,1456544974,1448562741,1465633219,1474135352],compute_crc24=function(input,initval){var crc,index,j,_i,_ref1;for(initval==null&&(initval=11994318),crc=initval,index=0;input.length-index>16;)crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index+0))&255],crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index+1))&255],crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index+2))&255],crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index+3))&255],crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index+4))&255],crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index+5))&255],crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index+6))&255],crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index+7))&255],crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index+8))&255],crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index+9))&255],crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index+10))&255],crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index+11))&255],crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index+12))&255],crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index+13))&255],crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index+14))&255],crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index+15))&255],index+=16;for(j=_i=index,_ref1=input.length;index<=_ref1?_i<_ref1:_i>_ref1;j=index<=_ref1?++_i:--_i)crc=crc<<8^crc_table[(crc>>16^input.readUInt8(index++))&255];return crc&16777215},getCheckSum=function(data,pad){var ret;return ret=crc24_to_base64(compute_crc24(data),pad),ret},exports.crc24_to_base64=crc24_to_base64=function(c,pad){return pad==null&&(pad=!0),(pad?'=':'')+uint_to_buffer(32,c).slice(1,4).toString('base64')},formatCheckSum=function(data){return make_line(getCheckSum(data,!0))},verifyCheckSum=function(data,checksum){return getCheckSum(data,!1)===checksum},exports.Message=Message=function(){function Message(_arg){this.body=_arg.body,this.type=_arg.type,this.comment=_arg.comment,this.version=_arg.version,this.pre=_arg.pre,this.post=_arg.post,this.lines=[],this.fields={},this.payload=null}return Message.prototype.unsplit=function(lines){return lines.join('\n')},Message.prototype.raw=function(){return this.unsplit(this.lines)},Message.prototype.finish_unframe=function(_arg){var post,pre;if(pre=_arg.pre,post=_arg.post,this.pre=this.unsplit(pre),this.post=this.unsplit(post),this.clearsign!=null)return this.clearsign.body=this.unsplit(this.clearsign.lines)},Message.prototype.make_clearsign=function(){return this.clearsign={headers:{},lines:[],body:null}},Message}(),exports.Parser=Parser=function(){function Parser(data){this.init(data)}return Parser.prototype.init=function(data){return this.data=Buffer.isBuffer(data)?data.toString('utf8'):data,this.lines=this.data.split(/\r?\n/),this.checksum=null,this.body=null,this.type=null,this.ret=null,this.last_type=null},Parser.prototype.parse=function(){return this.ret=new Message({}),this.unframe(),this.pop_headers(),this.parse_type(),this.strip_empties_in_footer(),this.trim_lines(),this.find_checksum(),this.read_body(),this.check_checksum(),this.ret},Parser.prototype.parse_type=function(){return this.ret.type=this.ret.fields.type=this.type},Parser.prototype.last_line=function(){return this.payload.slice(-1)[0]},Parser.prototype.mparse=function(){var go,obj,out;for(out=[],go=!0;go;)this.skip(),this.lines.length?(obj=this.parse(),out.push(obj),this.init(obj.post)):go=!1;return out},Parser.prototype.skip=function(){var _results;for(_results=[];this.lines.length&&!this.lines[0].match(/\S+/);)_results.push(this.lines.shift());return _results},Parser.prototype.read_body=function(){var dat;return this.ret.payload=this.payload.join('\n'),dat=this.payload.join(''),this.ret.body=new Buffer(dat,'base64')},Parser.prototype.check_checksum=function(){if(this.ret.fields.checksum=this.checksum,this.checksum!=null&&!verifyCheckSum(this.ret.body,this.checksum))throw new Error('checksum mismatch')},Parser.prototype.pop_headers=function(){var l,m,_results;for(_results=[];this.payload.length;)if(l=this.payload.shift(),m=l.match(/Version: (.*)/))_results.push(this.ret.version=m[1]);else if((m=l.match(/Comment: (.*)/))!=null)_results.push(this.ret.comment=m[1]);else if(l==null||l.length===0||l.match(/^\s+$/))break;else _results.push(void 0);return _results},Parser.prototype.strip_empties_in_footer=function(){var _ref1,_results;for(_results=[];(_ref1=this.last_line())==null?void 0:_ref1.match(/^\s*$/);)_results.push(this.payload.pop());return _results},Parser.prototype.trim_lines=function(){var p;return this.payload=function(){var _i,_len,_ref1,_results;for(_ref1=this.payload,_results=[],(_i=0,_len=_ref1.length);_i<_len;_i++)p=_ref1[_i],_results.push(trim(p));return _results}.call(this)},Parser.prototype.find_checksum=function(){var l;if((l=this.last_line())!=null&&l[0]==='=')return this.checksum=this.payload.pop().slice(1)},Parser.prototype.v_unframe=function(pre){return!0},Parser.prototype.unframe=function(){var found_pre,found_pre_clearsign,found_pre_std,go,line,m,payload,post,pre,ret,rxx,rxx_b,rxx_e,stage,type;for(rxx_b=/^(-{5}BEGIN PGP (.*?)-{5}.*$)/,rxx_e=/^(-{5}END PGP (.*?)-{5})(.*)$/m,rxx=rxx_b,payload=[],stage=0,type=null,ret=null,go=!0,pre=[],post=[],found_pre_std=function(l,is_last){return pre.push(l)},found_pre_clearsign=function(_this){return function(l,is_last){return _this.ret.clearsign.lines.push(l)}}(this),found_pre=found_pre_std;this.lines.length&&go;)switch(line=this.lines.shift(),stage){case-1:if(m=line.match(/^([^:]+): (.*)$/))this.ret.clearsign.headers[m[1].toLowerCase()]=m[2];else if(line.match(/^\s*$/))stage++,found_pre=found_pre_clearsign;else throw new Error('Bad line in clearsign header');this.ret.lines.push(line);break;case 0:(m=line.match(rxx_b))==null?(this.ret.clearsign&&this.ret.lines.push(line),found_pre(line,!1)):(found_pre('',!0),this.ret.lines.push(this.ret.clearsign?line:m[1]),this.type==null&&(this.type=m[2]),this.last_type=m[2],m[2]==='SIGNED MESSAGE'?(stage--,this.ret.make_clearsign()):stage++);break;case 1:if(m=line.match(rxx_e)){if(this.ret.lines.push(m[1]),m[2]!==this.last_type)throw new Error('type mismatch -- begin '+this.last_type+' w/ end '+m[1]);stage++,post=[m[3]].concat(this.lines),this.lines=[],go=!1}else this.ret.lines.push(line),payload.push(line);}if(stage===0)throw new Error('no header found');else if(stage===1)throw new Error('no tailer found');else return this.payload=payload,this.ret.finish_unframe({pre:pre,post:post})},Parser}(),exports.decode=decode=function(data){return katch(function(){return new Parser(data).parse()})},exports.mdecode=decode=function(data){return katch(function(){return new Parser(data).mparse()})},exports.compute_crc24=compute_crc24}).call(this)}).call(this,require('buffer').Buffer)},{'./util':165,'buffer':80}],163:[function(require,module,exports){(function(){exports.armor=require('./armor'),exports.util=require('./util'),exports.userid=require('./userid')}).call(this)},{'./armor':162,'./userid':164,'./util':165}],164:[function(require,module,exports){(function(){exports.parse=function(input){var components,m,x;return components=null,x=/^([^(<]*?)(?:\s*\((.*?)\))?(?:\s*<(.*?)>)?$/,(m=input.match(x))!=null&&(components={username:m[1],comment:m[2],email:m[3]}),components},exports.format=function(d){var parts,_ref,_ref1,_ref2;return parts=[],((_ref=d.username)==null?void 0:_ref.length)&&parts.push(d.username),((_ref1=d.comment)==null?void 0:_ref1.length)&&parts.push('('+d.comment+')'),((_ref2=d.email)==null?void 0:_ref2.length)&&parts.push('<'+d.email+'>'),parts.join(' ')}}).call(this)},{}],165:[function(require,module,exports){(function(Buffer){(function(){var __slice=[].slice,ASP,Canceler,Warnings,assert,assert_no_nulls,asyncify,bufeq_secure,buffer_to_ui8a,bufferify,iced,katch,obj_extract,strip,trim,ui32a_to_ui8a,ui8Ga_to_ui32a,xxd,__iced_k,__iced_k_noop;iced=require('iced-runtime'),__iced_k=__iced_k_noop=function(){},Canceler=require('iced-error').Canceler,assert=require('assert'),exports.uint_to_buffer=function(nbits,i){var ret;switch(ret=null,nbits){case 16:ret=new Buffer(2),ret.writeUInt16BE(i,0);break;case 32:ret=new Buffer(4),ret.writeUInt32BE(i,0);break;case 8:ret=new Buffer(1),ret.writeUInt8(i,0);break;default:throw new Error('Bit types not found: '+nbit);}return ret},exports.ASP=ASP=function(){function ASP(_arg){var canceler,delay,progress_hook;progress_hook=_arg.progress_hook,delay=_arg.delay,canceler=_arg.canceler,this._delay=delay==null?2:delay,this._canceler=canceler||new Canceler,this._progress_hook=progress_hook||function(obj){},this._section=null}return ASP.prototype.section=function(s){return this._section=s,this},ASP.prototype.progress=function(o,cb){var err,___iced_passed_deferral,__iced_deferrals,__iced_k;return __iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),this._section&&(o.section=this._section),this._progress_hook(o),cb==null?__iced_k():void function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/pgp-utils/src/util.iced',funcname:'ASP.progress'}),_this.delay(__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0]}}(),lineno:43})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return __iced_k(cb(err))}}(this))},ASP.prototype.delay=function(cb){var ___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/max/src/keybase/pgp-utils/src/util.iced',funcname:'ASP.delay'}),setTimeout(__iced_deferrals.defer({lineno:47}),_this.delay),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(_this._canceler.err())}}(this))},ASP.prototype.canceler=function(){return this._canceler},ASP.prototype.progress_hook=function(){return this._progress_hook},ASP.make=function(asp){return asp||new ASP({})},ASP}(),exports.Warnings=Warnings=function(){function Warnings(){this._w=[]}return Warnings.prototype.push=function(){var args,_ref;return args=1<=arguments.length?__slice.call(arguments,0):[],(_ref=this._w).push.apply(_ref,args)},Warnings.prototype.warnings=function(){return this._w},Warnings}(),exports.bufeq_fast=function(x,y){var i,_i,_ref;if(x==null&&y==null)return!0;if(x==null||y==null)return!1;if(x.length!==y.length)return!1;for(i=_i=0,_ref=x.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i)if(x.readUInt8(i)!==y.readUInt8(i))return!1;return!0},exports.bufeq_secure=bufeq_secure=function(x,y){var check,i,ret;return ret=function(){var _i,_ref;if(x==null&&y==null)return!0;if(x==null||y==null)return!1;if(x.length!==y.length)return!1;for(check=0,i=_i=0,_ref=x.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i)check|=x.readUInt8(i)^y.readUInt8(i);return check===0}(),ret},exports.streq_secure=function(x,y){var B;return B=function(x){return x==null?null:bufferify(x)},bufeq_secure(B(x),B(y))},exports.bufferify=bufferify=function(s){if(Buffer.isBuffer(s))return s;if(typeof s==='string')return new Buffer(s,'utf8');throw new Error('Cannot convert to buffer: '+s)},exports.katch=katch=function(fn){var e,err,ret;ret=err=null;try{ret=fn()}catch(_error){e=_error,err=e}return[err,ret]},exports.akatch=function(fn,cb){return asyncify(katch(fn),cb)},exports.buffer_to_ui8a=buffer_to_ui8a=function(b){var i,l,ret,_i;for(l=b.length,ret=new Uint8Array(l),i=_i=0;0<=l?_i<l:_i>l;i=0<=l?++_i:--_i)ret[i]=b.readUInt8(i);return ret},exports.ui32a_to_ui8a=ui32a_to_ui8a=function(v,out){var k,w,_i,_len;for(out==null&&(out=null),out||(out=new Uint8Array(v.length*4)),k=0,(_i=0,_len=v.length);_i<_len;_i++)w=v[_i],out[k++]=w>>24&255,out[k++]=w>>16&255,out[k++]=w>>8&255,out[k++]=w&255;return out},exports.ui8a_to_ui32a=ui8Ga_to_ui32a=function(v,out){var b,i,k,tmp,_i,_len;for(out==null&&(out=null),out||(out=new Uint32Array(v.length>>2)),k=0,(i=_i=0,_len=v.length);_i<_len;i=_i+=4)b=v[i],tmp=(b<<24)+(v[i+1]<<16)+(v[i+2]<<8)+v[i+3],out[k++]=tmp;return out},exports.unix_time=function(){return _Mathfloor3(Date.now()/1000)},exports.json_stringify_sorted=function(o,opts){var i,json_safe,lb,o2,sort_fn,space_it,spaces,str;return opts=opts||{},sort_fn=opts.sort_fn||null,spaces=opts.spaces||null,lb=opts.spaces==null?'':'\n',typeof spaces==='number'&&(spaces=function(){var _i,_results;for(_results=[],i=_i=0;0<=spaces?_i<spaces:_i>spaces;i=0<=spaces?++_i:--_i)_results.push(' ');return _results}().join('')),space_it=function(depth){return spaces==null?'':'\n'+function(){var _i,_results;for(_results=[],i=_i=0;0<=depth?_i<depth:_i>depth;i=0<=depth?++_i:--_i)_results.push(spaces);return _results}().join('')},json_safe=function(os,depth){var k,keys,s,sp,spp,v;return Array.isArray(os)?s='['+function(){var _i,_len,_results;for(_results=[],_i=0,_len=os.length;_i<_len;_i++)v=os[_i],_results.push(json_safe(v,depth+1));return _results}().join(',')+']':typeof os==='object'?os?(sp=space_it(depth),spp=space_it(depth+1),keys=function(){var _results;for(k in _results=[],os)_results.push(k);return _results}(),sort_fn?keys.sort(sort_fn):keys.sort(),s='{'+function(){var _i,_len,_results;for(_results=[],_i=0,_len=keys.length;_i<_len;_i++)k=keys[_i],_results.push(spp+JSON.stringify(k)+':'+json_safe(os[k],depth+1));return _results}().join(',')+sp+'}'):s=JSON.stringify(os):s=JSON.stringify(os),s},str=JSON.stringify(o),str===void 0?str:(o2=JSON.parse(str),json_safe(o2,0))},exports.obj_extract=obj_extract=function(o,keys){var k,ret,_i,_len;for(ret={},_i=0,_len=keys.length;_i<_len;_i++)k=keys[_i],ret[k]=o[k];return ret},exports.base64u={encode:function(b){return b.toString('base64').replace(/\+/g,'-').replace(/\//g,'_').replace(/=+$/,'')},decode:function(b){return b=(b+Array(5-b.length%4).join('=')).replace(/\-/g,'+').replace(/\_/g,'/'),new Buffer(b,'base64')},verify:function(b){return /^[A-Za-z0-9\-_]+$/.test(b)}},exports.assert_no_nulls=assert_no_nulls=function(v){var e,ok,_i,_len;for(ok=!0,_i=0,_len=v.length;_i<_len;_i++)e=v[_i],e==null&&(ok=!1);if(!ok)return void 0,void 0,assert(!1)},exports.athrow=function(err,cb){return cb(err)},exports.asyncify=asyncify=function(args,cb){return cb.apply(null,args)},exports.format_fingerprint=function(raw){var hex,i,parts;return hex=raw.toString('hex').toUpperCase(),parts=function(){var _i,_ref,_results;for(_results=[],i=_i=0,_ref=hex.length;_i<_ref;i=_i+=4)_results.push(hex.slice(i,i+4));return _results}(),parts.join(' ')},exports.format_pgp_fingerprint_2=function(buf,opts){var hex,i,length,parts,spc;return opts==null&&(opts={}),hex=buf.toString('hex'),length=(opts==null?void 0:opts.length)||40,spc=(opts==null?void 0:opts.space)||' ',hex=hex.toUpperCase().slice(-length),hex.length===40?(parts=function(){var _i,_ref,_results;for(_results=[],i=_i=0,_ref=hex.length;_i<_ref;i=_i+=4)_results.push(hex.slice(i,i+4));return _results}(),parts=function(){var _i,_ref,_results;for(_results=[],i=_i=0,_ref=parts.length;_i<_ref;i=_i+=5)_results.push(parts.slice(i,i+5).join(spc));return _results}(),parts.join(spc+spc)):hex.length>8?(parts=function(){var _i,_ref,_results;for(_results=[],i=_i=0,_ref=hex.length;_i<_ref;i=_i+=4)_results.push(hex.slice(i,i+4));return _results}(),parts.join(spc)):hex},exports.fingerprint_to_key_id_64=function(fp){return fp.slice(-16)},exports.strip=strip=function(x){return x.split(/\s+/).join('')},exports.trim=trim=function(x){var m;return(m=x==null?void 0:x.match(/^\s+(.*?)$/))&&(x=m[1]),(m=x==null?void 0:x.match(/^(.*?)\s+$/))&&(x=m[1]),x},exports.fpeq=function(fp1,fp2){return strip(fp1).toLowerCase()===strip(fp2).toLowerCase()},exports.xxd=xxd=function(buf,opts){var i,line,lines,p,pad,q,quartets,v;return opts==null&&(opts={}),q=opts.q||8,p=opts.p||7,buf=buf.toString('hex'),quartets=function(){var _i,_ref,_results;for(_results=[],i=_i=0,_ref=buf.length;_i<_ref;i=_i+=4)_results.push(buf.slice(i,i+4));return _results}(),lines=function(){var _i,_ref,_results;for(_results=[],i=_i=0,_ref=quartets.length;q>0?_i<_ref:_i>_ref;i=_i+=q)_results.push(quartets.slice(i,i+q).join(' '));return _results}(),pad=function(s,n){return function(){var _i,_ref,_results;for(_results=[],_i=0,_ref=n-s.length;0<=_ref?_i<_ref:_i>_ref;0<=_ref?_i++:_i--)_results.push('0');return _results}().join('')+s},v=function(){var _i,_len,_results;for(_results=[],i=_i=0,_len=lines.length;_i<_len;i=++_i)line=lines[i],_results.push(pad((i*2*q).toString(16),p)+': '+line);return _results}(),v.join('\n')}}).call(this)}).call(this,require('buffer').Buffer)},{'assert':75,'buffer':80,'iced-error':115,'iced-runtime':118}],166:[function(require,module,exports){(function(Buffer){(function(){var NativeBuffer,PpBuffer,twos_compl_inv;twos_compl_inv=require('./util').twos_compl_inv,NativeBuffer=Buffer,exports.PpBuffer=PpBuffer=function(){function PpBuffer(buf){buf==null?(this._frozen_buf=null,this._sub_buffers=[],this._limits=[],this._sz=1024,this._small_buf_sz=256,this._logsz=10,this._i=0,this._tot=0):this._freeze_to(buf)}return PpBuffer.prototype._nb=function(){return this._sub_buffers.length},PpBuffer.prototype._ab=function(){return this._sub_buffers[this._nb()-1]},PpBuffer.prototype._lib=function(){return 0},PpBuffer.prototype._finish_sub_buffer=function(){return this._limits.push(this._i),this._i=0},PpBuffer.prototype._push_sub_buffer=function(b){return this._sub_buffers.length&&this._finish_sub_buffer(),this._lib=function(){return b.length-this._i},this._sub_buffers.push(b),b},PpBuffer.prototype._make_room=function(){return this._push_sub_buffer(new NativeBuffer(this._sz))},PpBuffer.prototype._make_room_for_n_bytes=function(n){if(this._lib()<n)return this._make_room()},PpBuffer.prototype.push_uint8=function(b){var n;return n=1,this._make_room_for_n_bytes(n),this._ab().writeUInt8(b,this._i),this._i+=n,this._tot+=n},PpBuffer.prototype.push_int8=function(b){var n;return n=1,this._make_room_for_n_bytes(n),this._ab().writeInt8(b,this._i),this._i+=n,this._tot+=n},PpBuffer.prototype.push_uint16=function(s){var n;return n=2,this._make_room_for_n_bytes(n),this._ab().writeUInt16BE(s,this._i),this._i+=n,this._tot+=n},PpBuffer.prototype.push_uint32=function(w){var n;return n=4,this._make_room_for_n_bytes(n),this._ab().writeUInt32BE(w,this._i),this._i+=n,this._tot+=n},PpBuffer.prototype.push_int16=function(s){var n;return n=2,this._make_room_for_n_bytes(n),this._ab().writeInt16BE(s,this._i),this._i+=n,this._tot+=n},PpBuffer.prototype.push_int32=function(w){var n;return n=4,this._make_room_for_n_bytes(n),this._ab().writeInt32BE(w,this._i),this._i+=n,this._tot+=n},PpBuffer.prototype.push_float64=function(f){var n;return n=8,this._make_room_for_n_bytes(n),this._ab().writeDoubleBE(f,this._i),this._i+=n,this._tot+=n},PpBuffer.prototype.push_float32=function(f){var n;return n=4,this._make_room_for_n_bytes(n),this._ab().writeFloatBE(f,this._i),this._i+=n,this._tot+=n},PpBuffer.prototype.push_raw_bytes=function(s){return this.push_buffer(new NativeBuffer(s,'binary'))},PpBuffer.prototype.prepare_utf8=function(s){return new NativeBuffer(s,'utf8')},PpBuffer.prototype.push_buffer=function(b){var diff,n;return b.length>this._small_buf_sz?(this._push_sub_buffer(b),this._i=b.length,this._tot+=b.length):(n=_Mathmin5(b.length,this._lib()),n>0&&(b.copy(this._ab(),this._i,0,n),this._i+=n,this._tot+=n),n<b.length&&(this._make_room(),b.copy(this._ab(),this._i,n,b.length),diff=b.length-n,this._i+=diff,this._tot+=diff)),this},PpBuffer.prototype.freeze=function(){var b,i,l,lst,_i,_len,_ref;if(this._frozen_buf==null){for(this._finish_sub_buffer(),lst=[],_ref=this._sub_buffers,(i=_i=0,_len=_ref.length);_i<_len;i=++_i)b=_ref[i],(l=this._limits[i])===b.length?lst.push(b):l>0&&lst.push(b.slice(0,l));this._sub_buffers=[],this._frozen_buf=NativeBuffer.concat(lst,this._tot)}return this._frozen_buf},PpBuffer.prototype._freeze_to=function(b){return this._frozen_buf=b,this._tot=b.length,this._sub_buffers=[],this._cp=0,this},PpBuffer.prototype.bytes_left=function(){return this._tot-this._cp},PpBuffer.prototype._get=function(i){return i<this._tot?this._frozen_buf.readUInt8(i):0},PpBuffer.prototype.read_uint8=function(){return this._get(this._cp++)},PpBuffer.prototype.read_int8=function(){return twos_compl_inv(this.read_uint8(),8)},PpBuffer.prototype.read_uint16=function(){var ret;return ret=this._frozen_buf.readUInt16BE(this._cp),this._cp+=2,ret},PpBuffer.prototype.read_uint32=function(){var ret;return ret=this._frozen_buf.readUInt32BE(this._cp),this._cp+=4,ret},PpBuffer.prototype.read_int16=function(){var ret;return ret=this._frozen_buf.readInt16BE(this._cp),this._cp+=2,ret},PpBuffer.prototype.read_int32=function(){var ret;return ret=this._frozen_buf.readInt32BE(this._cp),this._cp+=4,ret},PpBuffer.prototype.read_float64=function(){var ret;return ret=this._frozen_buf.readDoubleBE(this._cp),this._cp+=8,ret},PpBuffer.prototype.read_float32=function(){var ret;return ret=this._frozen_buf.readFloatBE(this._cp),this._cp+=4,ret},PpBuffer.prototype.read_buffer=function(n){var bl,e,ret;if(bl=this.bytes_left(),n>bl)throw new Error('Corruption: asked for '+n+' bytes, but only '+bl+' available');return e=this._cp+n,ret=this._frozen_buf.slice(this._cp,e),this._cp=e,ret},PpBuffer.isBuffer=function(b){return NativeBuffer.isBuffer(b)},PpBuffer}()}).call(this)}).call(this,require('buffer').Buffer)},{'./util':172,'buffer':80}],167:[function(require,module,exports){(function(){exports.C={'null':192,'false':194,'true':195,bin8:196,bin16:197,bin32:198,ext8:199,ext16:200,ext32:201,float:202,double:203,uint8:204,uint16:205,uint32:206,uint64:207,int8:208,int16:209,int32:210,int64:211,fix_ext1:212,fix_ext2:213,fix_ext4:214,fix_ext8:215,fix_ext16:216,str8:217,str16:218,str32:219,array16:220,array32:221,map16:222,map32:223,fix_str_min:160,fix_str_max:191,fix_array_min:144,fix_array_max:159,fix_map_min:128,fix_map_max:143,fix_array_count_mask:15,fix_map_count_mask:15,fix_str_count_mask:31,negative_fix_min:224,negative_fix_max:255,negative_fix_mask:31,negative_fix_offset:32,positive_fix_max:127,rpc_request:0,rpc_response:1,rpc_notify:2}}).call(this)},{}],168:[function(require,module,exports){(function(Buffer){(function(){var C,frame_len,pack,unpack;pack=require('./pack').pack,unpack=require('./unpack').unpack,C=require('./const').C,exports.pack=function(x,opts){var b1,b2;return opts==null&&(opts={}),b2=pack(x,opts),b1=pack(b2.length),Buffer.concat([b1,b2])},exports.frame_len=frame_len=function(c){return c<=C.positive_fix_max?1:c===C.uint8?2:c===C.uint16?3:c===C.uint32?5:0},exports.unpack=function(x,opts){var buf,c,flen,plen,rem,ret;if(opts==null&&(opts={}),x.length<1)throw new Error('need a buffer > 1 bytes');if(c=x.readUInt8(0),flen=frame_len(c),flen===0)throw new Error('no data frame found');if(x.length<flen)throw new Error('not enough bytes to read frame: '+x.length+' < '+flen);if(buf=x.slice(0,flen),plen=unpack(buf),x=x.slice(flen),x.length<plen)throw new Error('not enough bytes to unframe: '+x.length+' < '+plen);return rem=x.slice(plen),x=x.slice(0,plen),ret=unpack(x),[ret,rem]}}).call(this)}).call(this,require('buffer').Buffer)},{'./const':167,'./pack':170,'./unpack':171,'buffer':80}],169:[function(require,module,exports){(function(){exports.pack=require('./pack').pack,exports.unpack=require('./unpack').unpack,exports.Buffer=require('./buffer').PpBuffer,exports.frame=require('./frame')}).call(this)},{'./buffer':166,'./frame':168,'./pack':170,'./unpack':171}],170:[function(require,module,exports){(function(){var C,Packer,PpBuffer,U32MAX,is_array,is_int,u64max_minus_i;C=require('./const').C,PpBuffer=require('./buffer').PpBuffer,U32MAX=require('./util').U32MAX,is_array=function(x){return Object.prototype.toString.call(x)==='[object Array]'},is_int=function(f){return _Mathfloor3(f)===f},u64max_minus_i=function(i){var a,b,x,y;return x=_Mathfloor3(i/U32MAX),y=i%U32MAX,a=U32MAX-x-(y>0?1:0),b=y===0?0:U32MAX-y,[a,b]},exports.Packer=Packer=function(){function Packer(_opts){this._opts=_opts==null?{}:_opts,this._buffer=new PpBuffer}return Packer.prototype.output=function(){return this._buffer.freeze()},Packer.prototype.p=function(o){switch(typeof o){case'number':return this.p_number(o);case'string':return this.p_str(o);case'boolean':return this.p_boolean(o);case'undefined':return this.p_null();case'object':if(o==null)return this.p_null();if(is_array(o))return this.p_array(o);if(PpBuffer.isBuffer(o))return this.p_bin(o);if(!this.p_ext(o))return this.p_obj(o);}},Packer.prototype.p_number=function(n){return is_int(n)?n>=0?this.p_positive_int(n):this.p_negative_int(n):this.p_pack_double(n)},Packer.prototype.p_pack_double=function(d){return this._opts.floats==null?(this.p_uint8(C.double),this._buffer.push_float64(d)):(this.p_uint8(C.float),this._buffer.push_float32(d))},Packer.prototype.p_uint8=function(b){return this._buffer.push_uint8(b)},Packer.prototype.p_uint16=function(s){return this._buffer.push_uint16(s)},Packer.prototype.p_uint32=function(w){return this._buffer.push_uint32(w)},Packer.prototype.p_int8=function(b){return this._buffer.push_int8(b)},Packer.prototype.p_int16=function(s){return this._buffer.push_int16(s)},Packer.prototype.p_int32=function(w){return this._buffer.push_int32(w)},Packer.prototype.p_neg_int64=function(i){var a,abs_i,b,_ref;return abs_i=0-i,_ref=u64max_minus_i(abs_i),a=_ref[0],b=_ref[1],this.p_uint32(a),this.p_uint32(b)},Packer.prototype.p_boolean=function(b){return this.p_uint8(b?C['true']:C['false'])},Packer.prototype.p_null=function(){return this.p_uint8(C['null'])},Packer.prototype.p_array=function(a){var e,_i,_len,_results;for(this.p_len(a.length,C.fix_array_min,C.fix_array_max,C.array16,C.array32),_results=[],(_i=0,_len=a.length);_i<_len;_i++)e=a[_i],_results.push(this.p(e));return _results},Packer.prototype.p_obj=function(o){var k,keys,n,_i,_len,_results;for(keys=Object.keys(o),n=keys.length,this.p_len(n,C.fix_map_min,C.fix_map_max,C.map16,C.map32),this._opts.sort_keys&&keys.sort(),_results=[],(_i=0,_len=keys.length);_i<_len;_i++)k=keys[_i],this.p(k),_results.push(this.p(o[k]));return _results},Packer.prototype.p_positive_int=function(i){return i<=127?this.p_uint8(i):i<=255?(this.p_uint8(C.uint8),this.p_uint8(i)):i<=65535?(this.p_uint8(C.uint16),this.p_uint16(i)):i<U32MAX?(this.p_uint8(C.uint32),this.p_uint32(i)):(this.p_uint8(C.uint64),this.p_uint32(_Mathfloor3(i/U32MAX)),this.p_uint32(i%U32MAX))},Packer.prototype.p_negative_int=function(i){return i>=-32?this.p_int8(i):i>=-128?(this.p_uint8(C.int8),this.p_int8(i)):i>=-32768?(this.p_uint8(C.int16),this.p_int16(i)):i>=-2147483648?(this.p_uint8(C.int32),this.p_int32(i)):(this.p_uint8(C.int64),this.p_neg_int64(i))},Packer.prototype.p_buffer=function(b){return this._buffer.push_buffer(b)},Packer.prototype.p_bin=function(r){return this.p_len(r.length,null,null,C.bin16,C.bin32,C.bin8),this.p_buffer(r)},Packer.prototype.p_str=function(s){var b,str8;return b=this._buffer.prepare_utf8(s),str8=this._opts.no_str8?null:C.str8,this.p_len(b.length,C.fix_str_min,C.fix_str_max,C.str16,C.str32,str8),this.p_buffer(b)},Packer.prototype.p_len=function(l,fixmin,fixmax,m,b,s){return s==null&&(s=null),fixmin!=null&&fixmax!=null&&l<=fixmax-fixmin?this.p_uint8(l|fixmin):s!=null&&l<=255?(this.p_uint8(s),this.p_uint8(l)):l<=65535?(this.p_uint8(m),this.p_uint16(l)):(this.p_uint8(b),this.p_uint32(l))},Packer.prototype.p_ext=function(o){var buf,l,ret,type;if(this._opts.ext==null)return!1;if(!(ret=this._opts.ext(o)))return!1;switch(type=ret[0],buf=ret[1],l=buf.length){case 1:this.p_uint8(C.fix_ext1);break;case 2:this.p_uint8(C.fix_ext2);break;case 4:this.p_uint8(C.fix_ext4);break;case 8:this.p_uint8(C.fix_ext8);break;case 16:this.p_uint8(C.fix_ext16);break;default:l<=255?(this.p_uint8(C.ext8),this.p_uint8(l)):l<=65535?(this.p_uint8(C.ext16),this.p_uint16(l)):(this.p_uint8(C.ext32),this.p_uint32(l));}return this.p_uint8(type),this.p_buffer(buf),!0},Packer}(),exports.pack=function(x,opts){var packer;return opts==null&&(opts={}),packer=new Packer(opts),packer.p(x),packer.output()}}).call(this)},{'./buffer':166,'./const':167,'./util':172}],171:[function(require,module,exports){(function(){var C,PpBuffer,U32MAX,Unpacker,default_ext,modes,pow2,twos_compl_inv,_ref;C=require('./const').C,PpBuffer=require('./buffer').PpBuffer,_ref=require('./util'),pow2=_ref.pow2,twos_compl_inv=_ref.twos_compl_inv,U32MAX=_ref.U32MAX,modes={NONE:0,BINARY:1,START:2},default_ext=function(type,raw){return{type:type,raw:raw}},exports.Unpacker=Unpacker=function(){function Unpacker(b,_opts){this._opts=_opts==null?{}:_opts,this._buffer=new PpBuffer(b),this._ext=this._opts.ext||(this._opts.no_ext?null:default_ext)}return Unpacker.prototype.u_buf=function(n){return this._buffer.read_buffer(n)},Unpacker.prototype.u_str=function(n){return this.u_buf(n).toString('utf8')},Unpacker.prototype.u_bin=function(n){return this.u_buf(n)},Unpacker.prototype.u_ext=function(n){var buf,typ;if(typ=this.u_uint8(),buf=this.u_buf(n),this._opts.ext!=null)return this._opts.ext(typ,buf);throw new Error('No ext hook but got message type: '+typ)},Unpacker.prototype.u_array=function(n){var i,_i,_results;for(_results=[],i=_i=0;0<=n?_i<n:_i>n;i=0<=n?++_i:--_i)_results.push(this.u());return _results},Unpacker.prototype.u_map=function(n){var i,ret,_i;for(ret={},i=_i=0;0<=n?_i<n:_i>n;i=0<=n?++_i:--_i)ret[this.u()]=this.u();return ret},Unpacker.prototype.u_uint8=function(){return this._buffer.read_uint8()},Unpacker.prototype.u_uint16=function(){return this._buffer.read_uint16()},Unpacker.prototype.u_uint32=function(){return this._buffer.read_uint32()},Unpacker.prototype.u_int8=function(){return this._buffer.read_int8()},Unpacker.prototype.u_int16=function(){return this._buffer.read_int16()},Unpacker.prototype.u_int32=function(){return this._buffer.read_int32()},Unpacker.prototype.u_uint64=function(){return this.u_uint32()*U32MAX+this.u_uint32()},Unpacker.prototype.u_double=function(){return this._buffer.read_float64()},Unpacker.prototype.u_float=function(){return this._buffer.read_float32()},Unpacker.prototype.u_int64=function(){var a,b,i,_ref1;return _ref1=function(){var _i,_results;for(_results=[],i=_i=0;_i<2;i=++_i)_results.push(this.u_uint32());return _results}.call(this),a=_ref1[0],b=_ref1[1],U32MAX*(a-U32MAX)+b},Unpacker.prototype.u=function(){var b,l;if((b=this.u_uint8())<=C.positive_fix_max)return b;if(b>=C.negative_fix_min&&b<=C.negative_fix_max)return twos_compl_inv(b,8);if(b>=C.fix_str_min&&b<=C.fix_str_max)return l=b&C.fix_str_count_mask,this.u_str(l);if(b>=C.fix_array_min&&b<=C.fix_array_max)return l=b&C.fix_array_count_mask,this.u_array(l);if(b>=C.fix_map_min&&b<=C.fix_map_max)return l=b&C.fix_map_count_mask,this.u_map(l);switch(b){case C['null']:return null;case C['true']:return!0;case C['false']:return!1;case C.uint8:return this.u_uint8();case C.uint16:return this.u_uint16();case C.uint32:return this.u_uint32();case C.uint64:return this.u_uint64();case C.int8:return this.u_int8();case C.int16:return this.u_int16();case C.int32:return this.u_int32();case C.int64:return this.u_int64();case C.double:return this.u_double();case C.float:return this.u_float();case C.str8:return this.u_str(this.u_uint8());case C.str16:return this.u_str(this.u_uint16());case C.str32:return this.u_str(this.u_uint32());case C.bin8:return this.u_bin(this.u_uint8());case C.bin16:return this.u_bin(this.u_uint16());case C.bin32:return this.u_bin(this.u_uint32());case C.array16:return this.u_array(this.u_uint16());case C.array32:return this.u_array(this.u_uint32());case C.map16:return this.u_map(this.u_uint16());case C.map32:return this.u_map(this.u_uint32());case C.fix_ext1:return this.u_ext(1);case C.fix_ext2:return this.u_ext(2);case C.fix_ext4:return this.u_ext(4);case C.fix_ext8:return this.u_ext(8);case C.fix_ext16:return this.u_ext(16);case C.ext8:return this.u_ext(this.u_uint8());case C.ext16:return this.u_ext(this.u_uint16());case C.ext32:return this.u_ext(this.u_uint32());default:throw new Error('unhandled type '+b);}},Unpacker}(),exports.unpack=function(x,opts){var unpacker;return opts==null&&(opts={}),unpacker=new Unpacker(x,opts),unpacker.u()}}).call(this)},{'./buffer':166,'./const':167,'./util':172}],172:[function(require,module,exports){(function(){var U32MAX,pow2;exports.pow2=pow2=function(n){return n<31?1<<n:_Mathpow3(2,n)},exports.U32MAX=U32MAX=pow2(32),exports.rshift=function(b,n){return n<31?b>>n:_Mathfloor3(b/_Mathpow3(2,n))},exports.twos_compl=function(x,n){return x<0?pow2(n)-_Mathabs2(x):x},exports.twos_compl_inv=function(x,n){return x-pow2(n)}}).call(this)},{}],173:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},AES,BlockCipher,G,Global,scrub_vec;BlockCipher=require('./algbase').BlockCipher,scrub_vec=require('./util').scrub_vec,Global=function(){function Global(){var i;this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=function(){var _i,_results;for(_results=[],i=_i=0;_i<4;i=++_i)_results.push([]);return _results}(),this.INV_SUB_MIX=function(){var _i,_results;for(_results=[],i=_i=0;_i<4;i=++_i)_results.push([]);return _results}(),this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}return Global.prototype.init=function(){var d,i,sx,t,x,x2,x4,x8,xi,_i;for(d=function(){var _i,_results;for(_results=[],i=_i=0;_i<256;i=++_i)i<128?_results.push(i<<1):_results.push(i<<1^283);return _results}(),x=0,xi=0,i=_i=0;_i<256;i=++_i)sx=xi^xi<<1^xi<<2^xi<<3^xi<<4,sx=sx>>>8^sx&255^99,this.SBOX[x]=sx,this.INV_SBOX[sx]=x,x2=d[x],x4=d[x2],x8=d[x4],t=d[sx]*257^sx*16843008,this.SUB_MIX[0][x]=t<<24|t>>>8,this.SUB_MIX[1][x]=t<<16|t>>>16,this.SUB_MIX[2][x]=t<<8|t>>>24,this.SUB_MIX[3][x]=t,t=x8*16843009^x4*65537^x2*257^x*16843008,this.INV_SUB_MIX[0][sx]=t<<24|t>>>8,this.INV_SUB_MIX[1][sx]=t<<16|t>>>16,this.INV_SUB_MIX[2][sx]=t<<8|t>>>24,this.INV_SUB_MIX[3][sx]=t,x===0?x=xi=1:(x=x2^d[d[d[x8^x2]]],xi^=d[d[xi]]);return!0},Global}(),G=new Global,AES=function(_super){function AES(key){this._key=key.clone(),this._doReset()}return __extends(AES,_super),AES.blockSize=4*4,AES.prototype.blockSize=AES.blockSize,AES.keySize=256/8,AES.prototype.keySize=AES.keySize,AES.ivSize=AES.blockSize,AES.prototype.ivSize=AES.ivSize,AES.prototype._doReset=function(){var invKsRow,keySize,keyWords,ksRow,ksRows,t,_i,_j;for(keyWords=this._key.words,keySize=this._key.sigBytes/4,this._nRounds=keySize+6,ksRows=(this._nRounds+1)*4,this._keySchedule=[],ksRow=_i=0;0<=ksRows?_i<ksRows:_i>ksRows;ksRow=0<=ksRows?++_i:--_i)this._keySchedule[ksRow]=ksRow<keySize?keyWords[ksRow]:(t=this._keySchedule[ksRow-1],ksRow%keySize===0?(t=t<<8|t>>>24,t=G.SBOX[t>>>24]<<24|G.SBOX[t>>>16&255]<<16|G.SBOX[t>>>8&255]<<8|G.SBOX[t&255],t^=G.RCON[ksRow/keySize|0]<<24):keySize>6&&ksRow%keySize===4?t=G.SBOX[t>>>24]<<24|G.SBOX[t>>>16&255]<<16|G.SBOX[t>>>8&255]<<8|G.SBOX[t&255]:void 0,this._keySchedule[ksRow-keySize]^t);for(this._invKeySchedule=[],invKsRow=_j=0;0<=ksRows?_j<ksRows:_j>ksRows;invKsRow=0<=ksRows?++_j:--_j)ksRow=ksRows-invKsRow,t=this._keySchedule[ksRow-(invKsRow%4?0:4)],this._invKeySchedule[invKsRow]=invKsRow<4||ksRow<=4?t:G.INV_SUB_MIX[0][G.SBOX[t>>>24]]^G.INV_SUB_MIX[1][G.SBOX[t>>>16&255]]^G.INV_SUB_MIX[2][G.SBOX[t>>>8&255]]^G.INV_SUB_MIX[3][G.SBOX[t&255]];return!0},AES.prototype.encryptBlock=function(M,offset){return offset==null&&(offset=0),this._doCryptBlock(M,offset,this._keySchedule,G.SUB_MIX,G.SBOX)},AES.prototype.decryptBlock=function(M,offset){var _ref,_ref1;return offset==null&&(offset=0),_ref=[M[offset+3],M[offset+1]],M[offset+1]=_ref[0],M[offset+3]=_ref[1],this._doCryptBlock(M,offset,this._invKeySchedule,G.INV_SUB_MIX,G.INV_SBOX),(_ref1=[M[offset+3],M[offset+1]],M[offset+1]=_ref1[0],M[offset+3]=_ref1[1],_ref1)},AES.prototype.scrub=function(){return scrub_vec(this._keySchedule),scrub_vec(this._invKeySchedule),this._key.scrub()},AES.prototype._doCryptBlock=function(M,offset,keySchedule,SUB_MIX,SBOX){var ksRow,round,s0,s1,s2,s3,t0,t1,t2,t3,_i,_ref;for(s0=M[offset]^keySchedule[0],s1=M[offset+1]^keySchedule[1],s2=M[offset+2]^keySchedule[2],s3=M[offset+3]^keySchedule[3],ksRow=4,(round=_i=1,_ref=this._nRounds);1<=_ref?_i<_ref:_i>_ref;round=1<=_ref?++_i:--_i)t0=SUB_MIX[0][s0>>>24]^SUB_MIX[1][s1>>>16&255]^SUB_MIX[2][s2>>>8&255]^SUB_MIX[3][s3&255]^keySchedule[ksRow++],t1=SUB_MIX[0][s1>>>24]^SUB_MIX[1][s2>>>16&255]^SUB_MIX[2][s3>>>8&255]^SUB_MIX[3][s0&255]^keySchedule[ksRow++],t2=SUB_MIX[0][s2>>>24]^SUB_MIX[1][s3>>>16&255]^SUB_MIX[2][s0>>>8&255]^SUB_MIX[3][s1&255]^keySchedule[ksRow++],t3=SUB_MIX[0][s3>>>24]^SUB_MIX[1][s0>>>16&255]^SUB_MIX[2][s1>>>8&255]^SUB_MIX[3][s2&255]^keySchedule[ksRow++],s0=t0,s1=t1,s2=t2,s3=t3;return t0=(SBOX[s0>>>24]<<24|SBOX[s1>>>16&255]<<16|SBOX[s2>>>8&255]<<8|SBOX[s3&255])^keySchedule[ksRow++],t1=(SBOX[s1>>>24]<<24|SBOX[s2>>>16&255]<<16|SBOX[s3>>>8&255]<<8|SBOX[s0&255])^keySchedule[ksRow++],t2=(SBOX[s2>>>24]<<24|SBOX[s3>>>16&255]<<16|SBOX[s0>>>8&255]<<8|SBOX[s1&255])^keySchedule[ksRow++],t3=(SBOX[s3>>>24]<<24|SBOX[s0>>>16&255]<<16|SBOX[s1>>>8&255]<<8|SBOX[s2&255])^keySchedule[ksRow++],M[offset]=t0,M[offset+1]=t1,M[offset+2]=t2,M[offset+3]=t3},AES}(BlockCipher),exports.AES=AES}).call(this)},{'./algbase':174,'./util':195}],174:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},BlockCipher,BufferedBlockAlgorithm,Hasher,StreamCipher,WordArray,util;WordArray=require('./wordarray').WordArray,util=require('./util'),BufferedBlockAlgorithm=function(){function BufferedBlockAlgorithm(){this.reset()}return BufferedBlockAlgorithm.prototype._minBufferSize=0,BufferedBlockAlgorithm.prototype.reset=function(){return this._data=new WordArray,this._nDataBytes=0},BufferedBlockAlgorithm.prototype._append=function(data){return this._data.concat(data),this._nDataBytes+=data.sigBytes},BufferedBlockAlgorithm.prototype._process=function(doFlush){var blockSizeBytes,data,dataSigBytes,dataWords,nBlocksReady,nBytesReady,nWordsReady,offset,processedWords,_i,_ref;if(data=this._data,dataWords=data.words,dataSigBytes=data.sigBytes,blockSizeBytes=this.blockSize*4,nBlocksReady=dataSigBytes/blockSizeBytes,nBlocksReady=doFlush?_Mathceil4(nBlocksReady):_Mathmax4((nBlocksReady|0)-this._minBufferSize,0),nWordsReady=nBlocksReady*this.blockSize,nBytesReady=_Mathmin5(nWordsReady*4,dataSigBytes),nWordsReady){for(offset=_i=0,_ref=this.blockSize;_ref>0?_i<nWordsReady:_i>nWordsReady;offset=_i+=_ref)this._doProcessBlock(dataWords,offset);processedWords=dataWords.splice(0,nWordsReady),data.sigBytes-=nBytesReady}return new WordArray(processedWords,nBytesReady)},BufferedBlockAlgorithm.prototype.copy_to=function(out){return out._data=this._data.clone(),out._nDataBytes=this._nDataBytes},BufferedBlockAlgorithm.prototype.clone=function(){var obj;return obj=new BufferedBlockAlgorithm,this.copy_to(obj),obj},BufferedBlockAlgorithm}(),Hasher=function(_super){function Hasher(){Hasher.__super__.constructor.call(this)}return __extends(Hasher,_super),Hasher.prototype.reset=function(){return Hasher.__super__.reset.call(this),this._doReset(),this},Hasher.prototype.update=function(messageUpdate){return this._append(messageUpdate),this._process(),this},Hasher.prototype.finalize=function(messageUpdate){return messageUpdate&&this._append(messageUpdate),this._doFinalize()},Hasher.prototype.bufhash=function(input){var out,wa_in,wa_out;return wa_in=WordArray.from_buffer(input),wa_out=this.finalize(wa_in),out=wa_out.to_buffer(),wa_in.scrub(),wa_out.scrub(),out},Hasher}(BufferedBlockAlgorithm),exports.BlockCipher=BlockCipher=function(){function BlockCipher(key){}return BlockCipher.prototype.encryptBlock=function(M,offset){},BlockCipher}(),StreamCipher=function(){function StreamCipher(){}return StreamCipher.prototype.encryptBlock=function(word_array,dst_offset){var n_words,pad;return dst_offset==null&&(dst_offset=0),pad=this.get_pad(),n_words=_Mathmin5(word_array.words.length-dst_offset,this.bsiw),word_array.xor(pad,{dst_offset:dst_offset,n_words:n_words}),pad.scrub(),this.bsiw},StreamCipher.prototype.encrypt=function(word_array){var i,_i,_ref,_ref1;for(i=_i=0,_ref=word_array.words.length,_ref1=this.bsiw;_ref1>0?_i<_ref:_i>_ref;i=_i+=_ref1)this.encryptBlock(word_array,i);return word_array},StreamCipher.prototype.bulk_encrypt=function(_arg,cb){var async_args,input,progress_hook,slice_args,what;return input=_arg.input,progress_hook=_arg.progress_hook,what=_arg.what,slice_args={update:function(_this){return function(lo,hi){var i,_i,_ref,_results;for(_results=[],i=_i=lo,_ref=_this.bsiw;_ref>0?_i<hi:_i>hi;i=_i+=_ref)_results.push(_this.encryptBlock(input,i));return _results}}(this),finalize:function(){return input},default_n:this.bsiw*1024},async_args={progress_hook:progress_hook,cb:cb,what:what},util.bulk(input.sigBytes,slice_args,async_args)},StreamCipher}(),exports.BlockCipher=BlockCipher,exports.Hasher=Hasher,exports.BufferedBlockAlgorithm=BufferedBlockAlgorithm,exports.StreamCipher=StreamCipher}).call(this)},{'./util':195,'./wordarray':196}],175:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},CombineBase,Concat,HMAC,SHA3,SHA512,WordArray,XOR,bulk_sign,_ref;_ref=require('./hmac'),HMAC=_ref.HMAC,bulk_sign=_ref.bulk_sign,SHA512=require('./sha512').SHA512,SHA3=require('./sha3').SHA3,WordArray=require('./wordarray').WordArray,CombineBase=function(){function CombineBase(){this.hasherBlockSize=this.hashers[0].hasherBlockSize,this.hasherBlockSizeBytes=this.hasherBlockSize*4,this.reset()}return CombineBase.prototype.reset=function(){var h,_i,_len,_ref1;for(_ref1=this.hashers,_i=0,_len=_ref1.length;_i<_len;_i++)h=_ref1[_i],h.reset();return this},CombineBase.prototype.update=function(w){var h,_i,_len,_ref1;for(_ref1=this.hashers,_i=0,_len=_ref1.length;_i<_len;_i++)h=_ref1[_i],h.update(w);return this},CombineBase.prototype.scrub=function(){var h,_i,_len,_ref1;for(_ref1=this.hashers,_i=0,_len=_ref1.length;_i<_len;_i++)h=_ref1[_i],h.scrub();return this},CombineBase.prototype.finalize=function(w){var h,hashes,out,_i,_len,_ref1;for(hashes=function(){var _i,_len,_ref1,_results;for(_ref1=this.hashers,_results=[],(_i=0,_len=_ref1.length);_i<_len;_i++)h=_ref1[_i],_results.push(h.finalize(w));return _results}.call(this),out=hashes[0],_ref1=hashes.slice(1),(_i=0,_len=_ref1.length);_i<_len;_i++)h=_ref1[_i],this._coalesce(out,h),h.scrub();return out},CombineBase}(),Concat=function(_super){function Concat(key,klasses){var hm,i,klass,subkey,subkeys;klasses==null&&(klasses=[SHA512,SHA3]),subkeys=key.split(klasses.length),this.hashers=function(){var _i,_len,_results;for(_results=[],i=_i=0,_len=klasses.length;_i<_len;i=++_i)klass=klasses[i],subkey=subkeys[i],hm=new HMAC(subkey,klass),subkey.scrub(),_results.push(hm);return _results}(),Concat.__super__.constructor.call(this)}return __extends(Concat,_super),Concat.get_output_size=function(){return SHA512.output_size+SHA3.output_size},Concat.prototype._coalesce=function(out,h){return out.concat(h)},Concat.prototype.get_output_size=function(){var h,tot,_i,_len,_ref1;for(tot=0,_ref1=this.hashers,(_i=0,_len=_ref1.length);_i<_len;_i++)h=_ref1[_i],tot+=h.get_output_size();return tot},Concat.sign=function(_arg){var input,key;return key=_arg.key,input=_arg.input,new Concat(key).finalize(input)},Concat.bulk_sign=function(args,cb){return args.klass=Concat,args.what='HMAC-SHA512-SHA3',bulk_sign(args,cb)},Concat}(CombineBase),XOR=function(_super){function XOR(key,klasses){var klass;klasses==null&&(klasses=[SHA512,SHA3]),this.hashers=function(){var _i,_len,_results;for(_results=[],_i=0,_len=klasses.length;_i<_len;_i++)klass=klasses[_i],_results.push(new HMAC(key,klass));return _results}(),XOR.__super__.constructor.call(this)}return __extends(XOR,_super),XOR.prototype.reset=function(){var h,i,_i,_len,_ref1;for(XOR.__super__.reset.call(this),_ref1=this.hashers,(i=_i=0,_len=_ref1.length);_i<_len;i=++_i)h=_ref1[i],h.update(new WordArray([i]));return this},XOR.get_output_size=function(){return _Mathmax4(SHA512.output_size,SHA3.output_size)},XOR.prototype._coalesce=function(out,h){return out.xor(h,{})},XOR.prototype.get_output_size=function(){var h;return _Mathmax4.apply(Math,function(){var _i,_len,_ref1,_results;for(_ref1=this.hashers,_results=[],(_i=0,_len=_ref1.length);_i<_len;_i++)h=_ref1[_i],_results.push(h.get_output_size());return _results}.call(this))},XOR.sign=function(_arg){var input,key;return key=_arg.key,input=_arg.input,new XOR(key).finalize(input)},XOR.bulk_sign=function(arg,cb){return arg.klass=XOR,arg.what='HMAC-SHA512-XOR-SHA3',bulk_sign(arg,cb)},XOR}(CombineBase),exports.Concat=Concat,exports.XOR=XOR}).call(this)},{'./hmac':180,'./sha3':191,'./sha512':193,'./wordarray':196}],176:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},Cipher,Counter,StreamCipher,WordArray,bulk_encrypt,encrypt,iced,__iced_k,__iced_k_noop;iced=require('iced-runtime'),__iced_k=__iced_k_noop=function(){},WordArray=require('./wordarray').WordArray,StreamCipher=require('./algbase').StreamCipher,Counter=function(){function Counter(_arg){var i,len,value;value=_arg.value,len=_arg.len,this._value=value==null?(len==null?len=2:void 0,new WordArray(function(){var _i,_results;for(_results=[],i=_i=0;0<=len?_i<len:_i>len;i=0<=len?++_i:--_i)_results.push(0);return _results}())):value.clone()}return Counter.prototype.WORD_MAX=4294967295,Counter.prototype.inc=function(){var go,i;for(go=!0,i=this._value.words.length-1;go&&i>=0;)++this._value.words[i]>Counter.WORD_MAX?this._value.words[i]=0:go=!1,i--;return this},Counter.prototype.inc_le=function(){var go,i;for(go=!0,i=0;go&&i<this._value.words.length;)++this._value.words[i]>Counter.WORD_MAX?this._value.words[i]=0:go=!1,i++;return this},Counter.prototype.get=function(){return this._value},Counter.prototype.copy=function(){return this._value.clone()},Counter}(),Cipher=function(_super){function Cipher(_arg){if(this.block_cipher=_arg.block_cipher,this.iv=_arg.iv,Cipher.__super__.constructor.call(this),this.bsiw=this.block_cipher.blockSize/4,this.iv.sigBytes!==this.block_cipher.blockSize)throw new Error('IV is wrong length ('+this.iv.sigBytes+')');this.ctr=new Counter({value:this.iv})}return __extends(Cipher,_super),Cipher.prototype.scrub=function(){return this.block_cipher.scrub()},Cipher.prototype.get_pad=function(){var pad;return pad=this.ctr.copy(),this.ctr.inc(),this.block_cipher.encryptBlock(pad.words),pad},Cipher}(StreamCipher),encrypt=function(_arg){var block_cipher,cipher,input,iv,ret;return block_cipher=_arg.block_cipher,iv=_arg.iv,input=_arg.input,cipher=new Cipher({block_cipher:block_cipher,iv:iv}),ret=cipher.encrypt(input),cipher.scrub(),ret},bulk_encrypt=function(_arg,cb){var block_cipher,cipher,input,iv,progress_hook,ret,what,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),block_cipher=_arg.block_cipher,iv=_arg.iv,input=_arg.input,progress_hook=_arg.progress_hook,what=_arg.what,cipher=new Cipher({block_cipher:block_cipher,iv:iv}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/ctr.iced'}),cipher.bulk_encrypt({input:input,progress_hook:progress_hook,what:what},__iced_deferrals.defer({assign_fn:function(){return function(){return ret=arguments[0]}}(),lineno:121})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(ret)}}(this))},exports.Counter=Counter,exports.Cipher=Cipher,exports.encrypt=encrypt,exports.bulk_encrypt=bulk_encrypt}).call(this)},{'./algbase':174,'./wordarray':196,'iced-runtime':118}],177:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},AES,Base,Concat,Decryptor,SHA512,Salsa20,TwoFish,V,WordArray,ctr,decrypt,iced,make_esc,salsa20,__iced_k,__iced_k_noop,_ref;iced=require('iced-runtime'),__iced_k=__iced_k_noop=function(){},WordArray=require('./wordarray').WordArray,salsa20=require('./salsa20'),AES=require('./aes').AES,TwoFish=require('./twofish').TwoFish,ctr=require('./ctr'),Concat=require('./combine').Concat,SHA512=require('./sha512').SHA512,Salsa20=require('./salsa20').Salsa20,_ref=require('./enc'),Base=_ref.Base,V=_ref.V,make_esc=require('iced-error').make_esc,Decryptor=function(_super){function Decryptor(_arg){var enc,key;key=_arg.key,enc=_arg.enc,Decryptor.__super__.constructor.call(this,{key:key}),enc!=null&&(this.key=enc.key,this.derived_keys=enc.derived_keys)}return __extends(Decryptor,_super),Decryptor.prototype.read_header=function(cb){var err,wa;return err=(wa=this.ct.unshift(2))==null?new Error('Ciphertext underrun in header'):(this.version=V[wa.words[1]])==null?new Error('bad header; couldn\'t find a good version (got '+wa.words[1]+')'):wa.words[0]===this.version.header[0]?null:new Error('Bad header: unrecognized magic value'),cb(err)},Decryptor.prototype.verify_sig=function(key,cb){var computed,err,received,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){return(received=_this.ct.unshift(Concat.get_output_size()/4))==null?__iced_k(err=new Error('Ciphertext underrun in signature')):void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/dec.iced',funcname:'Decryptor.verify_sig'}),_this.sign({input:_this.ct,key:key,salt:_this.salt},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],computed=arguments[1]}}(),lineno:63})),__iced_deferrals._fulfill()}(function(){return __iced_k(err=err==null?received.equal(computed)?null:new Error('Signature mismatch or bad decryption key'):err)})}}(this)(function(_this){return function(){return cb(err)}}(this))},Decryptor.prototype.unshift_iv=function(n_bytes,which,cb){var err,iv;return err=(iv=this.ct.unshift(n_bytes/4))==null?new Error('Ciphertext underrun in '+which):null,cb(err,iv)},Decryptor.prototype.read_salt=function(cb){var err;return err=(this.salt=this.ct.unshift(this.version.salt_size/4))==null?new Error('Ciphertext underrrun in read_salt'):null,cb(err)},Decryptor.prototype.generate_keys=function(_arg,cb){var err,keys,progress_hook,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),progress_hook=_arg.progress_hook,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/dec.iced',funcname:'Decryptor.generate_keys'}),_this.kdf({salt:_this.salt,progress_hook:progress_hook},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],keys=arguments[1]}}(),lineno:114})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(err,keys)}}(this))},Decryptor.prototype.run=function(_arg,cb){var ct1,ct2,data,esc,iv,progress_hook,pt,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),data=_arg.data,progress_hook=_arg.progress_hook,esc=make_esc(cb,'Decryptor::run'),this.ct=WordArray.from_buffer(data),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/dec.iced',funcname:'Decryptor.run'}),_this.read_header(esc(__iced_deferrals.defer({lineno:141}))),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/dec.iced',funcname:'Decryptor.run'}),_this.read_salt(esc(__iced_deferrals.defer({lineno:142}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/dec.iced',funcname:'Decryptor.run'}),_this.generate_keys({progress_hook:progress_hook},esc(__iced_deferrals.defer({assign_fn:function(__slot_1){return function(){return __slot_1.keys=arguments[0]}}(_this),lineno:143}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/dec.iced',funcname:'Decryptor.run'}),_this.verify_sig(_this.keys.hmac,esc(__iced_deferrals.defer({lineno:144}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/dec.iced',funcname:'Decryptor.run'}),_this.unshift_iv(AES.ivSize,'AES',esc(__iced_deferrals.defer({assign_fn:function(){return function(){return iv=arguments[0]}}(),lineno:145}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/dec.iced',funcname:'Decryptor.run'}),_this.run_aes({iv:iv,input:_this.ct,key:_this.keys.aes,progress_hook:progress_hook},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return ct2=arguments[0]}}(),lineno:146}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/dec.iced',funcname:'Decryptor.run'}),_this.unshift_iv(TwoFish.ivSize,'2fish',esc(__iced_deferrals.defer({assign_fn:function(){return function(){return iv=arguments[0]}}(),lineno:147}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/dec.iced',funcname:'Decryptor.run'}),_this.run_twofish({iv:iv,input:_this.ct,key:_this.keys.twofish,progress_hook:progress_hook},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return ct1=arguments[0]}}(),lineno:148}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/dec.iced',funcname:'Decryptor.run'}),_this.unshift_iv(Salsa20.ivSize,'Salsa',esc(__iced_deferrals.defer({assign_fn:function(){return function(){return iv=arguments[0]}}(),lineno:149}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/dec.iced',funcname:'Decryptor.run'}),_this.run_salsa20({iv:iv,input:_this.ct,key:_this.keys.salsa20,output_iv:!1,progress_hook:progress_hook},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return pt=arguments[0]}}(),lineno:150}))),__iced_deferrals._fulfill()})(function(){return cb(null,pt.to_buffer())})})})})})})})})})}}(this))},Decryptor}(Base),decrypt=function(_arg,cb){var data,dec,err,key,progress_hook,pt,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),key=_arg.key,data=_arg.data,progress_hook=_arg.progress_hook,dec=new Decryptor({key:key}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/dec.iced'}),dec.run({data:data,progress_hook:progress_hook},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],pt=arguments[1]}}(),lineno:168})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return dec.scrub(),cb(err,pt)}}(this))},exports.Decryptor=Decryptor,exports.decrypt=decrypt}).call(this)},{'./aes':173,'./combine':175,'./ctr':176,'./enc':179,'./salsa20':186,'./sha512':193,'./twofish':194,'./wordarray':196,'iced-error':115,'iced-runtime':118}],178:[function(require,module,exports){(function(Buffer){(function(){var ADRBG,DRBG,Lock,WordArray,XOR,hmac,iced,sha3,sha512,__iced_k,__iced_k_noop;iced=require('iced-runtime'),__iced_k=__iced_k_noop=function(){},hmac=require('./hmac'),XOR=require('./combine').XOR,sha512=require('./sha512'),sha3=require('./sha3'),WordArray=require('./wordarray').WordArray,Lock=require('iced-lock').Lock,DRBG=function(){function DRBG(entropy,personalization_string,hmac_func){this.hmac=hmac_func||hmac.sign,this.security_strength=256,entropy=this.check_entropy(entropy),personalization_string||(personalization_string=new WordArray([])),this._instantiate(entropy,personalization_string)}return DRBG.prototype.check_entropy=function(entropy,reseed){if(reseed==null&&(reseed=!1),entropy.sigBytes*8*2<(reseed?2:3)*this.security_strength)throw new Error('entropy must be at least '+1.5*this.security_strength+' bits.');return entropy},DRBG.prototype._hmac=function(key,input){return this.hmac({key:key,input:input})},DRBG.prototype._update=function(provided_data){var V,V_in;return V=new WordArray([0],1),provided_data!=null&&(V=V.concat(provided_data)),V_in=this.V.clone().concat(V),this.K=this._hmac(this.K,V_in),V_in.scrub(),V.scrub(),this.V=this._hmac(this.K,this.V),provided_data!=null&&(V_in=this.V.clone().concat(new WordArray([1<<24],1)).concat(provided_data),this.K=this._hmac(this.K,V_in),V_in.scrub(),this.V=this._hmac(this.K,this.V)),provided_data==null?void 0:provided_data.scrub()},DRBG.prototype._instantiate=function(entropy,personalization_string){var i,n,seed_material;return seed_material=entropy.concat(personalization_string),n=64,this.K=WordArray.from_buffer(new Buffer(function(){var _i,_results;for(_results=[],i=_i=0;0<=n?_i<n:_i>n;i=0<=n?++_i:--_i)_results.push(0);return _results}())),this.V=WordArray.from_buffer(new Buffer(function(){var _i,_results;for(_results=[],i=_i=0;0<=n?_i<n:_i>n;i=0<=n?++_i:--_i)_results.push(1);return _results}())),this._update(seed_material),entropy.scrub(),this.reseed_counter=1},DRBG.prototype.reseed=function(entropy){return this._update(this.check_entropy(entropy,!0)),this.reseed_counter=1},DRBG.prototype.generate=function(num_bytes){var i,tmp,_ref;if(num_bytes*8>7500)throw new Error('generate cannot generate > 7500 bits in 1 call.');if(this.reseed_counter>=10000)throw new Error('Need a reseed!');for(tmp=[],i=0;tmp.length===0||tmp.length*tmp[0].length*4<num_bytes;)this.V=this._hmac(this.K,this.V),tmp.push(this.V.words);return this._update(),this.reseed_counter+=1,new WordArray((_ref=[]).concat.apply(_ref,tmp)).truncate(num_bytes)},DRBG}(),ADRBG=function(){function ADRBG(gen_seed,hmac){this.gen_seed=gen_seed,this.hmac=hmac,this.drbg=null,this.lock=new Lock}return ADRBG.prototype.generate=function(n,cb){var ret,seed,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/drbg.iced',funcname:'ADRBG.generate'}),_this.lock.acquire(__iced_deferrals.defer({lineno:148})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){(function(__iced_k){return _this.drbg==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/drbg.iced',funcname:'ADRBG.generate'}),_this.gen_seed(256,__iced_deferrals.defer({assign_fn:function(){return function(){return seed=arguments[0]}}(),lineno:150})),__iced_deferrals._fulfill()}(function(){return __iced_k(_this.drbg=new DRBG(seed,null,_this.hmac))}):__iced_k()})(function(){(function(__iced_k){return _this.drbg.reseed_counter>100?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/drbg.iced',funcname:'ADRBG.generate'}),_this.gen_seed(256,__iced_deferrals.defer({assign_fn:function(){return function(){return seed=arguments[0]}}(),lineno:153})),__iced_deferrals._fulfill()}(function(){return __iced_k(_this.drbg.reseed(seed))}):__iced_k()})(function(){return ret=_this.drbg.generate(n),_this.lock.release(),cb(ret)})})}}(this))},ADRBG}(),exports.DRBG=DRBG,exports.ADRBG=ADRBG}).call(this)}).call(this,require('buffer').Buffer)},{'./combine':175,'./hmac':180,'./sha3':191,'./sha512':193,'./wordarray':196,'buffer':80,'iced-lock':197,'iced-runtime':118}],179:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},AES,Base,CURRENT_VERSION,Concat,Encryptor,HMAC_SHA256,PBKDF2,SHA512,Scrypt,TwoFish,V,WordArray,XOR,ctr,encrypt,iced,make_esc,prng,salsa20,util,__iced_k,__iced_k_noop,_ref;iced=require('iced-runtime'),__iced_k=__iced_k_noop=function(){},WordArray=require('./wordarray').WordArray,salsa20=require('./salsa20'),AES=require('./aes').AES,TwoFish=require('./twofish').TwoFish,ctr=require('./ctr'),_ref=require('./combine'),XOR=_ref.XOR,Concat=_ref.Concat,SHA512=require('./sha512').SHA512,PBKDF2=require('./pbkdf2').PBKDF2,Scrypt=require('./scrypt').Scrypt,util=require('./util'),prng=require('./prng'),make_esc=require('iced-error').make_esc,HMAC_SHA256=require('./hmac').HMAC_SHA256,V={'1':{header:[479516638,1],salt_size:8,xsalsa20_rev:!0,kdf:{klass:PBKDF2,opts:{c:1024,klass:XOR}},hmac_key_size:768/8},'2':{header:[479516638,2],salt_size:16,xsalsa20_rev:!0,kdf:{klass:Scrypt,opts:{c:64,klass:XOR,N:12,r:8,p:1}},hmac_key_size:768/8},'3':{header:[479516638,3],salt_size:16,xsalsa20_rev:!1,kdf:{klass:Scrypt,opts:{c:1,klass:HMAC_SHA256,N:15,r:8,p:1}},hmac_key_size:768/8}},exports.CURRENT_VERSION=CURRENT_VERSION=3,Base=function(){function Base(_arg){var key,version;if(key=_arg.key,version=_arg.version,this.version=V[version==null?CURRENT_VERSION:version],this.version==null)throw new Error('unknown version: '+version);this.set_key(key),this.derived_keys={}}return Base.prototype.kdf=function(_arg,cb){var args,dkLen,end,extra_keymaterial,i,k,key,keys,len,lens,order,progress_hook,raw,salt,salt_hex,v,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),salt=_arg.salt,extra_keymaterial=_arg.extra_keymaterial,progress_hook=_arg.progress_hook,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Base.kdf'}),_this._check_scrubbed(_this.key,'in KDF',cb,__iced_deferrals.defer({lineno:94})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){salt_hex=salt.to_hex(),key=_this.key.clone(),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Base.kdf'}),_this._check_scrubbed(key,'KDF',cb,__iced_deferrals.defer({lineno:102})),__iced_deferrals._fulfill()}(function(){(function(__iced_k){if((keys=_this.derived_keys[salt_hex])==null){for(k in _this._kdf=new _this.version.kdf.klass(_this.version.kdf.opts),lens={hmac:_this.version.hmac_key_size,aes:AES.keySize,twofish:TwoFish.keySize,salsa20:salsa20.Salsa20.keySize},order=['hmac','aes','twofish','salsa20'],dkLen=extra_keymaterial||0,lens)v=lens[k],dkLen+=v;args={dkLen:dkLen,key:key,progress_hook:progress_hook,salt:salt},function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Base.kdf'}),_this._kdf.run(args,__iced_deferrals.defer({assign_fn:function(){return function(){return raw=arguments[0]}}(),lineno:121})),__iced_deferrals._fulfill()}(function(){var _i,_len;for(keys={},i=0,(_i=0,_len=order.length);_i<_len;_i++)k=order[_i],v=lens[k],len=v/4,end=i+len,keys[k]=new WordArray(raw.words.slice(i,end)),i=end;return keys.extra=new WordArray(raw.words.slice(end)).to_buffer(),__iced_k(_this.derived_keys[salt_hex]=keys)})}else return __iced_k()})(function(){return cb(null,keys)})})}}(this))},Base.prototype.set_key=function(key){var wakey;return key==null?this.scrub():(wakey=WordArray.from_buffer(key),!this.key||!this.key.equal(wakey))?(this.scrub(),this.key=wakey):void 0},Base.prototype._check_scrubbed=function(key,where,ecb,okcb){return key==null||key.is_scrubbed()?ecb(new Error(''+where+': Failed due to scrubbed key!'),null):okcb()},Base.prototype.sign=function(_arg,cb){var input,key,out,progress_hook,salt,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),input=_arg.input,key=_arg.key,salt=_arg.salt,progress_hook=_arg.progress_hook,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Base.sign'}),_this._check_scrubbed(key,'HMAC',cb,__iced_deferrals.defer({lineno:179})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){input=new WordArray(_this.version.header).concat(salt).concat(input),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Base.sign'}),Concat.bulk_sign({key:key,input:input,progress_hook:progress_hook},__iced_deferrals.defer({assign_fn:function(){return function(){return out=arguments[0]}}(),lineno:181})),__iced_deferrals._fulfill()}(function(){return input.scrub(),cb(null,out)})}}(this))},Base.prototype.run_salsa20=function(_arg,cb){var args,ct,input,iv,key,output_iv,progress_hook,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),input=_arg.input,key=_arg.key,iv=_arg.iv,output_iv=_arg.output_iv,progress_hook=_arg.progress_hook,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Base.run_salsa20'}),_this._check_scrubbed(key,'Salsa20',cb,__iced_deferrals.defer({lineno:197})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){args={input:input,progress_hook:progress_hook,key:key,iv:iv},_this.version.xsalsa20_rev&&(args.key=key.clone().endian_reverse(),args.iv=iv.clone().endian_reverse()),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Base.run_salsa20'}),salsa20.bulk_encrypt(args,__iced_deferrals.defer({assign_fn:function(){return function(){return ct=arguments[0]}}(),lineno:209})),__iced_deferrals._fulfill()}(function(){return output_iv&&(ct=iv.clone().concat(ct)),_this.version.xsalsa20_rev&&(args.key.scrub(),args.iv.scrub()),cb(null,ct)})}}(this))},Base.prototype.run_twofish=function(_arg,cb){var block_cipher,ct,input,iv,key,progress_hook,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),input=_arg.input,key=_arg.key,iv=_arg.iv,progress_hook=_arg.progress_hook,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Base.run_twofish'}),_this._check_scrubbed(key,'TwoFish',cb,__iced_deferrals.defer({lineno:232})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){block_cipher=new TwoFish(key),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Base.run_twofish'}),ctr.bulk_encrypt({block_cipher:block_cipher,iv:iv,input:input,progress_hook:progress_hook,what:'twofish'},__iced_deferrals.defer({assign_fn:function(){return function(){return ct=arguments[0]}}(),lineno:234})),__iced_deferrals._fulfill()}(function(){return block_cipher.scrub(),cb(null,iv.clone().concat(ct))})}}(this))},Base.prototype.run_aes=function(_arg,cb){var block_cipher,ct,input,iv,key,progress_hook,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),input=_arg.input,key=_arg.key,iv=_arg.iv,progress_hook=_arg.progress_hook,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Base.run_aes'}),_this._check_scrubbed(key,'AES',cb,__iced_deferrals.defer({lineno:249})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){block_cipher=new AES(key),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Base.run_aes'}),ctr.bulk_encrypt({block_cipher:block_cipher,iv:iv,input:input,progress_hook:progress_hook,what:'aes'},__iced_deferrals.defer({assign_fn:function(){return function(){return ct=arguments[0]}}(),lineno:251})),__iced_deferrals._fulfill()}(function(){return block_cipher.scrub(),cb(null,iv.clone().concat(ct))})}}(this))},Base.prototype.scrub=function(){var key,key_ring,salt,_i,_len,_ref1;if(this.key!=null&&this.key.scrub(),this.derived_keys!=null)for(salt in _ref1=this.derived_keys,_ref1)for(key_ring=_ref1[salt],_i=0,_len=key_ring.length;_i<_len;_i++)key=key_ring[_i],key.scrub();return this.derived_keys={},this.salt!=null&&this.salt.scrub(),this.salt=null,this.key=null},Base}(),Encryptor=function(_super){function Encryptor(_arg){var key,rng,version;key=_arg.key,rng=_arg.rng,version=_arg.version,Encryptor.__super__.constructor.call(this,{key:key,version:version}),this.rng=rng||prng.generate}return __extends(Encryptor,_super),Encryptor.prototype.pick_random_ivs=function(_arg,cb){var iv_lens,ivs,k,progress_hook,v,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),progress_hook=_arg.progress_hook,iv_lens={aes:AES.ivSize,twofish:TwoFish.ivSize,salsa20:salsa20.Salsa20.ivSize},ivs={},function(_this){return function(__iced_k){var _i,_k,_keys,_ref1,_results,_while;_ref1=iv_lens,_keys=function(){var _results1;for(_k in _results1=[],_ref1)_results1.push(_k);return _results1}(),_i=0,_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return++_i,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},_i<_keys.length?void(k=_keys[_i],v=_ref1[k],function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Encryptor.pick_random_ivs'}),_this.rng(v,__iced_deferrals.defer({assign_fn:function(__slot_1,__slot_2){return function(){return __slot_1[__slot_2]=arguments[0]}}(ivs,k),lineno:353})),__iced_deferrals._fulfill()}(_next)):_break()},_while(__iced_k)}}(this)(function(_this){return function(){return cb(ivs)}}(this))},Encryptor.prototype.resalt=function(_arg,cb){var err,extra_keymaterial,progress_hook,salt,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),salt=_arg.salt,extra_keymaterial=_arg.extra_keymaterial,progress_hook=_arg.progress_hook,err=null,function(_this){return function(__iced_k){return salt==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Encryptor.resalt'}),_this.rng(_this.version.salt_size,__iced_deferrals.defer({assign_fn:function(__slot_1){return function(){return __slot_1.salt=arguments[0]}}(_this),lineno:369})),__iced_deferrals._fulfill()}(__iced_k):__iced_k(salt.length===_this.version.salt_size?_this.salt=WordArray.alloc(salt):err=new Error('Need a salt of exactly '+_this.version.salt_size+' bytes (got '+salt.length+')'))}}(this)(function(_this){return function(){(function(__iced_k){return err==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Encryptor.resalt'}),_this.kdf({extra_keymaterial:extra_keymaterial,progress_hook:progress_hook,salt:_this.salt},__iced_deferrals.defer({assign_fn:function(__slot_1){return function(){return err=arguments[0],__slot_1.keys=arguments[1]}}(_this),lineno:375})),__iced_deferrals._fulfill()}(__iced_k):__iced_k()})(function(){return cb(err,_this.keys)})}}(this))},Encryptor.prototype.run=function(_arg,cb){var ct1,ct2,ct3,data,esc,extra_keymaterial,ivs,progress_hook,pt,ret,salt,sig,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),data=_arg.data,salt=_arg.salt,extra_keymaterial=_arg.extra_keymaterial,progress_hook=_arg.progress_hook,esc=make_esc(cb,'Encryptor::run'),function(_this){return function(__iced_k){return salt!=null||_this.salt==null?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Encryptor.run'}),_this.resalt({salt:salt,extra_keymaterial:extra_keymaterial,progress_hook:progress_hook},esc(__iced_deferrals.defer({lineno:406}))),__iced_deferrals._fulfill()}(__iced_k):__iced_k()}}(this)(function(_this){return function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Encryptor.run'}),_this.pick_random_ivs({progress_hook:progress_hook},__iced_deferrals.defer({assign_fn:function(){return function(){return ivs=arguments[0]}}(),lineno:407})),__iced_deferrals._fulfill()})(function(){pt=WordArray.from_buffer(data),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Encryptor.run'}),_this.run_salsa20({input:pt,key:_this.keys.salsa20,progress_hook:progress_hook,iv:ivs.salsa20,output_iv:!0},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return ct1=arguments[0]}}(),lineno:409}))),__iced_deferrals._fulfill()}(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Encryptor.run'}),_this.run_twofish({input:ct1,key:_this.keys.twofish,progress_hook:progress_hook,iv:ivs.twofish},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return ct2=arguments[0]}}(),lineno:410}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Encryptor.run'}),_this.run_aes({input:ct2,key:_this.keys.aes,progress_hook:progress_hook,iv:ivs.aes},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return ct3=arguments[0]}}(),lineno:411}))),__iced_deferrals._fulfill()})(function(){(function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced',funcname:'Encryptor.run'}),_this.sign({input:ct3,key:_this.keys.hmac,progress_hook:progress_hook,salt:_this.salt},esc(__iced_deferrals.defer({assign_fn:function(){return function(){return sig=arguments[0]}}(),lineno:412}))),__iced_deferrals._fulfill()})(function(){return ret=new WordArray(_this.version.header).concat(_this.salt).concat(sig).concat(ct3).to_buffer(),util.scrub_buffer(data),cb(null,ret)})})})})})}}(this))},Encryptor}(Base),encrypt=function(_arg,cb){var data,enc,err,key,progress_hook,ret,rng,version,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),key=_arg.key,data=_arg.data,rng=_arg.rng,progress_hook=_arg.progress_hook,version=_arg.version,enc=new Encryptor({key:key,rng:rng,version:version}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/enc.iced'}),enc.run({data:data,progress_hook:progress_hook},__iced_deferrals.defer({assign_fn:function(){return function(){return err=arguments[0],ret=arguments[1]}}(),lineno:440})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return enc.scrub(),cb(err,ret)}}(this))},exports.V=V,exports.encrypt=encrypt,exports.Base=Base,exports.Encryptor=Encryptor}).call(this)},{'./aes':173,'./combine':175,'./ctr':176,'./hmac':180,'./pbkdf2':183,'./prng':184,'./salsa20':186,'./scrypt':187,'./sha512':193,'./twofish':194,'./util':195,'./wordarray':196,'iced-error':115,'iced-runtime':118}],180:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},HMAC,HMAC_SHA256,SHA256,SHA512,bulk_sign,iced,sign,util,__iced_k,__iced_k_noop;iced=require('iced-runtime'),__iced_k=__iced_k_noop=function(){},SHA512=require('./sha512').SHA512,SHA256=require('./sha256').SHA256,util=require('./util'),HMAC=function(){function HMAC(key,klass){var i,_i,_ref;for(klass==null&&(klass=SHA512),this.key=key.clone(),this.hasher=new klass,this.hasherBlockSize=this.hasher.blockSize,this.hasherBlockSizeBytes=this.hasherBlockSize*4,this.key.sigBytes>this.hasherBlockSizeBytes&&(this.key=this.hasher.finalize(this.key)),this.key.clamp(),this._oKey=this.key.clone(),this._iKey=this.key.clone(),(i=_i=0,_ref=this.hasherBlockSize);0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i)this._oKey.words[i]^=1549556828,this._iKey.words[i]^=909522486;this._oKey.sigBytes=this._iKey.sigBytes=this.hasherBlockSizeBytes,this.reset()}return HMAC.outputSize=512/8,HMAC.prototype.outputSize=HMAC.outputSize,HMAC.prototype.get_output_size=function(){return this.hasher.output_size},HMAC.prototype.reset=function(){return this.hasher.reset().update(this._iKey)},HMAC.prototype.update=function(wa){return this.hasher.update(wa),this},HMAC.prototype.finalize=function(wa){var innerHash,innerHash2,out;return innerHash=this.hasher.finalize(wa),this.hasher.reset(),innerHash2=this._oKey.clone().concat(innerHash),out=this.hasher.finalize(innerHash2),innerHash.scrub(),innerHash2.scrub(),out},HMAC.prototype.scrub=function(){return this.key.scrub(),this._iKey.scrub(),this._oKey.scrub()},HMAC}(),sign=function(_arg){var eng,hash_class,input,key,out;return key=_arg.key,input=_arg.input,hash_class=_arg.hash_class,eng=new HMAC(key,hash_class),out=eng.finalize(input.clamp()),eng.scrub(),out},bulk_sign=function(_arg,cb){var eng,input,key,klass,progress_hook,res,slice_args,what,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),key=_arg.key,input=_arg.input,progress_hook=_arg.progress_hook,klass=_arg.klass,what=_arg.what,klass||(klass=HMAC),what||(what='hmac_sha512'),eng=new klass(key),input.clamp(),slice_args={update:function(lo,hi){return eng.update(input.slice(lo,hi))},finalize:function(){return eng.finalize()},default_n:eng.hasherBlockSize*1000},function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/hmac.iced'}),util.bulk(input.sigBytes,slice_args,{what:what,progress_hook:progress_hook,cb:__iced_deferrals.defer({assign_fn:function(){return function(){return res=arguments[0]}}(),lineno:137})}),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return eng.scrub(),cb(res)}}(this))},exports.HMAC_SHA256=HMAC_SHA256=function(_super){function HMAC_SHA256(key){HMAC_SHA256.__super__.constructor.call(this,key,SHA256)}return __extends(HMAC_SHA256,_super),HMAC_SHA256}(HMAC),exports.HMAC=HMAC,exports.sign=sign,exports.bulk_sign=bulk_sign}).call(this)},{'./sha256':190,'./sha512':193,'./util':195,'iced-runtime':118}],181:[function(require,module,exports){(function(Buffer){(function(){var hmac,k,v,_ref,_ref1;for(k in _ref=require('./enc'),_ref)v=_ref[k],exports[k]=v;for(k in _ref1=require('./dec'),_ref1)v=_ref1[k],exports[k]=v;exports.prng=require('./prng'),exports.Buffer=Buffer,exports.WordArray=require('./wordarray').WordArray,exports.util=require('./util'),exports.ciphers={AES:require('./aes').AES,TwoFish:require('./twofish').TwoFish,Salsa20:require('./salsa20').Salsa20},exports.hash={SHA1:require('./sha1').SHA1,SHA224:require('./sha224').SHA224,SHA256:require('./sha256').SHA256,SHA384:require('./sha384').SHA384,SHA512:require('./sha512').SHA512,SHA3:require('./sha3').SHA3,MD5:require('./md5').MD5,RIPEMD160:require('./ripemd160').RIPEMD160},exports.modes={CTR:require('./ctr')},exports.scrypt=require('./scrypt').scrypt,exports.pbkdf2=require('./pbkdf2').pbkdf2,exports.hmac=hmac=require('./hmac'),exports.HMAC_SHA256=hmac.HMAC_SHA256,exports.HMAC=hmac.HMAC}).call(this)}).call(this,require('buffer').Buffer)},{'./aes':173,'./ctr':176,'./dec':177,'./enc':179,'./hmac':180,'./md5':182,'./pbkdf2':183,'./prng':184,'./ripemd160':185,'./salsa20':186,'./scrypt':187,'./sha1':188,'./sha224':189,'./sha256':190,'./sha3':191,'./sha384':192,'./sha512':193,'./twofish':194,'./util':195,'./wordarray':196,'buffer':80}],182:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},FF,GG,Global,HH,Hasher,II,MD5,WordArray,glbl;WordArray=require('./wordarray').WordArray,Hasher=require('./algbase').Hasher,Global=function(){function Global(){var i;this.T=function(){var _i,_results;for(_results=[],i=_i=0;_i<64;i=++_i)_results.push(_Mathabs2(_Mathsin(i+1))*4294967296|0);return _results}()}return Global}(),glbl=new Global,exports.MD5=MD5=function(_super){function MD5(){return MD5.__super__.constructor.apply(this,arguments)}return __extends(MD5,_super),MD5.blockSize=512/32,MD5.prototype.blockSize=MD5.blockSize,MD5.output_size=16,MD5.prototype.output_size=MD5.output_size,MD5.prototype._doReset=function(){return this._hash=new WordArray([1732584193,4023233417,2562383102,271733878])},MD5.prototype._doProcessBlock=function(M,offset){var H,M_offset_0,M_offset_1,M_offset_10,M_offset_11,M_offset_12,M_offset_13,M_offset_14,M_offset_15,M_offset_2,M_offset_3,M_offset_4,M_offset_5,M_offset_6,M_offset_7,M_offset_8,M_offset_9,M_offset_i,a,b,c,d,i,offset_i,_i;for(i=_i=0;_i<16;i=++_i)offset_i=offset+i,M_offset_i=M[offset_i],M[offset_i]=(M_offset_i<<8|M_offset_i>>>24)&16711935|(M_offset_i<<24|M_offset_i>>>8)&4278255360;return H=this._hash.words,M_offset_0=M[offset+0],M_offset_1=M[offset+1],M_offset_2=M[offset+2],M_offset_3=M[offset+3],M_offset_4=M[offset+4],M_offset_5=M[offset+5],M_offset_6=M[offset+6],M_offset_7=M[offset+7],M_offset_8=M[offset+8],M_offset_9=M[offset+9],M_offset_10=M[offset+10],M_offset_11=M[offset+11],M_offset_12=M[offset+12],M_offset_13=M[offset+13],M_offset_14=M[offset+14],M_offset_15=M[offset+15],a=H[0],b=H[1],c=H[2],d=H[3],a=FF(a,b,c,d,M_offset_0,7,glbl.T[0]),d=FF(d,a,b,c,M_offset_1,12,glbl.T[1]),c=FF(c,d,a,b,M_offset_2,17,glbl.T[2]),b=FF(b,c,d,a,M_offset_3,22,glbl.T[3]),a=FF(a,b,c,d,M_offset_4,7,glbl.T[4]),d=FF(d,a,b,c,M_offset_5,12,glbl.T[5]),c=FF(c,d,a,b,M_offset_6,17,glbl.T[6]),b=FF(b,c,d,a,M_offset_7,22,glbl.T[7]),a=FF(a,b,c,d,M_offset_8,7,glbl.T[8]),d=FF(d,a,b,c,M_offset_9,12,glbl.T[9]),c=FF(c,d,a,b,M_offset_10,17,glbl.T[10]),b=FF(b,c,d,a,M_offset_11,22,glbl.T[11]),a=FF(a,b,c,d,M_offset_12,7,glbl.T[12]),d=FF(d,a,b,c,M_offset_13,12,glbl.T[13]),c=FF(c,d,a,b,M_offset_14,17,glbl.T[14]),b=FF(b,c,d,a,M_offset_15,22,glbl.T[15]),a=GG(a,b,c,d,M_offset_1,5,glbl.T[16]),d=GG(d,a,b,c,M_offset_6,9,glbl.T[17]),c=GG(c,d,a,b,M_offset_11,14,glbl.T[18]),b=GG(b,c,d,a,M_offset_0,20,glbl.T[19]),a=GG(a,b,c,d,M_offset_5,5,glbl.T[20]),d=GG(d,a,b,c,M_offset_10,9,glbl.T[21]),c=GG(c,d,a,b,M_offset_15,14,glbl.T[22]),b=GG(b,c,d,a,M_offset_4,20,glbl.T[23]),a=GG(a,b,c,d,M_offset_9,5,glbl.T[24]),d=GG(d,a,b,c,M_offset_14,9,glbl.T[25]),c=GG(c,d,a,b,M_offset_3,14,glbl.T[26]),b=GG(b,c,d,a,M_offset_8,20,glbl.T[27]),a=GG(a,b,c,d,M_offset_13,5,glbl.T[28]),d=GG(d,a,b,c,M_offset_2,9,glbl.T[29]),c=GG(c,d,a,b,M_offset_7,14,glbl.T[30]),b=GG(b,c,d,a,M_offset_12,20,glbl.T[31]),a=HH(a,b,c,d,M_offset_5,4,glbl.T[32]),d=HH(d,a,b,c,M_offset_8,11,glbl.T[33]),c=HH(c,d,a,b,M_offset_11,16,glbl.T[34]),b=HH(b,c,d,a,M_offset_14,23,glbl.T[35]),a=HH(a,b,c,d,M_offset_1,4,glbl.T[36]),d=HH(d,a,b,c,M_offset_4,11,glbl.T[37]),c=HH(c,d,a,b,M_offset_7,16,glbl.T[38]),b=HH(b,c,d,a,M_offset_10,23,glbl.T[39]),a=HH(a,b,c,d,M_offset_13,4,glbl.T[40]),d=HH(d,a,b,c,M_offset_0,11,glbl.T[41]),c=HH(c,d,a,b,M_offset_3,16,glbl.T[42]),b=HH(b,c,d,a,M_offset_6,23,glbl.T[43]),a=HH(a,b,c,d,M_offset_9,4,glbl.T[44]),d=HH(d,a,b,c,M_offset_12,11,glbl.T[45]),c=HH(c,d,a,b,M_offset_15,16,glbl.T[46]),b=HH(b,c,d,a,M_offset_2,23,glbl.T[47]),a=II(a,b,c,d,M_offset_0,6,glbl.T[48]),d=II(d,a,b,c,M_offset_7,10,glbl.T[49]),c=II(c,d,a,b,M_offset_14,15,glbl.T[50]),b=II(b,c,d,a,M_offset_5,21,glbl.T[51]),a=II(a,b,c,d,M_offset_12,6,glbl.T[52]),d=II(d,a,b,c,M_offset_3,10,glbl.T[53]),c=II(c,d,a,b,M_offset_10,15,glbl.T[54]),b=II(b,c,d,a,M_offset_1,21,glbl.T[55]),a=II(a,b,c,d,M_offset_8,6,glbl.T[56]),d=II(d,a,b,c,M_offset_15,10,glbl.T[57]),c=II(c,d,a,b,M_offset_6,15,glbl.T[58]),b=II(b,c,d,a,M_offset_13,21,glbl.T[59]),a=II(a,b,c,d,M_offset_4,6,glbl.T[60]),d=II(d,a,b,c,M_offset_11,10,glbl.T[61]),c=II(c,d,a,b,M_offset_2,15,glbl.T[62]),b=II(b,c,d,a,M_offset_9,21,glbl.T[63]),H[0]=H[0]+a|0,H[1]=H[1]+b|0,H[2]=H[2]+c|0,H[3]=H[3]+d|0},MD5.prototype._doFinalize=function(){var H,H_i,data,dataWords,hash,i,nBitsLeft,nBitsTotal,nBitsTotalH,nBitsTotalL,_i;for(data=this._data,dataWords=data.words,nBitsTotal=this._nDataBytes*8,nBitsLeft=data.sigBytes*8,dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32,nBitsTotalH=_Mathfloor3(nBitsTotal/4294967296),nBitsTotalL=nBitsTotal,dataWords[(nBitsLeft+64>>>9<<4)+15]=(nBitsTotalH<<8|nBitsTotalH>>>24)&16711935|(nBitsTotalH<<24|nBitsTotalH>>>8)&4278255360,dataWords[(nBitsLeft+64>>>9<<4)+14]=(nBitsTotalL<<8|nBitsTotalL>>>24)&16711935|(nBitsTotalL<<24|nBitsTotalL>>>8)&4278255360,data.sigBytes=(dataWords.length+1)*4,this._process(),hash=this._hash,H=hash.words,i=_i=0;_i<4;i=++_i)H_i=H[i],H[i]=(H_i<<8|H_i>>>24)&16711935|(H_i<<24|H_i>>>8)&4278255360;return hash},MD5.prototype.copy_to=function(obj){return MD5.__super__.copy_to.call(this,obj),obj._hash=this._hash.clone()},MD5.prototype.clone=function(){var out;return out=new MD5,this.copy_to(out),out},MD5}(Hasher),FF=function(a,b,c,d,x,s,t){var n;return n=a+(b&c|~b&d)+x+t,(n<<s|n>>>32-s)+b},GG=function(a,b,c,d,x,s,t){var n;return n=a+(b&d|c&~d)+x+t,(n<<s|n>>>32-s)+b},HH=function(a,b,c,d,x,s,t){var n;return n=a+(b^c^d)+x+t,(n<<s|n>>>32-s)+b},II=function(a,b,c,d,x,s,t){var n;return n=a+(c^(b|~d))+x+t,(n<<s|n>>>32-s)+b},exports.transform=function(x){var out;return out=new MD5().finalize(x),x.scrub(),out}}).call(this)},{'./algbase':174,'./wordarray':196}],183:[function(require,module,exports){(function(){var HMAC,PBKDF2,WordArray,iced,pbkdf2,util,__iced_k,__iced_k_noop;iced=require('iced-runtime'),__iced_k=__iced_k_noop=function(){},HMAC=require('./hmac').HMAC,WordArray=require('./wordarray').WordArray,util=require('./util'),PBKDF2=function(){function PBKDF2(_arg){this.klass=_arg.klass,this.c=_arg.c,this.c||(this.c=1024),this.klass||(this.klass=HMAC)}return PBKDF2.prototype._PRF=function(input){return this.prf.reset(),this.prf.finalize(input)},PBKDF2.prototype._gen_T_i=function(_arg,cb){var U,i,progress_hook,ret,salt,seed,stop,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),salt=_arg.salt,i=_arg.i,progress_hook=_arg.progress_hook,progress_hook(0),seed=salt.clone().concat(new WordArray([i])),U=this._PRF(seed),ret=U.clone(),i=1,function(_this){return function(__iced_k){var _results,_while;_results=[],_while=function(__iced_k){var _break,_continue,_next;if(_break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},!(i<_this.c))return _break();for(stop=_Mathmin5(_this.c,i+128);i<stop;)U=_this._PRF(U),ret.xor(U,{}),i++;progress_hook(i),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/pbkdf2.iced',funcname:'PBKDF2._gen_T_i'}),util.default_delay(0,0,__iced_deferrals.defer({lineno:57})),__iced_deferrals._fulfill()}(function(){return _next(null)})},_while(__iced_k)}}(this)(function(_this){return function(){return progress_hook(i),cb(ret)}}(this))},PBKDF2.prototype.run=function(_arg,cb){var bs,dkLen,flat,i,key,n,ph,progress_hook,salt,tmp,tph,words,___iced_passed_deferral,__iced_deferrals,__iced_k,_begin,_end,_positive;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),key=_arg.key,salt=_arg.salt,dkLen=_arg.dkLen,progress_hook=_arg.progress_hook,this.prf=new this.klass(key),bs=this.prf.get_output_size(),n=_Mathceil4(dkLen/bs),words=[],tph=null,ph=function(_this){return function(block){return function(iter){return typeof progress_hook==='function'?progress_hook({what:'pbkdf2',total:n*_this.c,i:block*_this.c+iter}):void 0}}}(this),ph(0)(0),function(_this){return function(__iced_k){var _i,_results,_while;i=1,_begin=1,_end=n,_positive=_end>_begin,_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _positive?i+=1:i-=1,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},_positive===!0&&i>n||_positive===!1&&i<n?_break():void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/pbkdf2.iced',funcname:'PBKDF2.run'}),_this._gen_T_i({salt:salt,i:i,progress_hook:ph(i-1)},__iced_deferrals.defer({assign_fn:function(){return function(){return tmp=arguments[0]}}(),lineno:80})),__iced_deferrals._fulfill()}(function(){return _next(words.push(tmp.words))})},_while(__iced_k)}}(this)(function(_this){return function(){var _ref;return ph(n)(0),flat=(_ref=[]).concat.apply(_ref,words),key.scrub(),_this.prf.scrub(),_this.prf=null,cb(new WordArray(flat,dkLen))}}(this))},PBKDF2}(),pbkdf2=function(_arg,cb){var c,dkLen,eng,key,klass,out,progress_hook,salt,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),key=_arg.key,salt=_arg.salt,klass=_arg.klass,c=_arg.c,dkLen=_arg.dkLen,progress_hook=_arg.progress_hook,eng=new PBKDF2({klass:klass,c:c}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/pbkdf2.iced'}),eng.run({key:key,salt:salt,dkLen:dkLen,progress_hook:progress_hook},__iced_deferrals.defer({assign_fn:function(){return function(){return out=arguments[0]}}(),lineno:106})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(out)}}(this))},exports.pbkdf2=pbkdf2,exports.PBKDF2=PBKDF2}).call(this)},{'./hmac':180,'./util':195,'./wordarray':196,'iced-runtime':118}],184:[function(require,module,exports){(function(Buffer){(function(){var ADRBG,PRNG,WordArray,XOR,browser_rng,e,generate,iced,m,more_entropy,native_rng,rng,util,__iced_k,__iced_k_noop,_browser_rng_primitive,_native_rng,_prng,_ref,_ref1;if(iced=require('iced-runtime'),__iced_k=__iced_k_noop=function(){},more_entropy=require('more-entropy'),ADRBG=require('./drbg').ADRBG,WordArray=require('./wordarray').WordArray,XOR=require('./combine').XOR,util=require('./util'),_browser_rng_primitive=null,browser_rng=function(n){var v;return v=new Uint8Array(n),_browser_rng_primitive(v),new Buffer(v)},_browser_rng_primitive=(m=typeof window!=='undefined'&&window!==null?(_ref=window.crypto)==null?void 0:_ref.getRandomValues:void 0)==null?(m=typeof window!=='undefined'&&window!==null?(_ref1=window.msCrypto)==null?void 0:_ref1.getRandomValues:void 0)==null?null:m.bind(window.msCrypto):m.bind(window.crypto),_browser_rng_primitive!=null)_native_rng=browser_rng;else try{rng=require('cry'+'pto').rng,rng!=null&&(_native_rng=rng)}catch(_error){e=_error}native_rng=function(x){if(_native_rng==null)throw new Error('No rng found; tried requiring "crypto" and window.crypto');return _native_rng(x)},PRNG=function(){function PRNG(){this.meg=new more_entropy.Generator,this.adrbg=new ADRBG(function(_this){return function(n,cb){return _this.gen_seed(n,cb)}}(this),XOR.sign)}return PRNG.prototype.now_to_buffer=function(){var buf,d,ms,s;return d=Date.now(),ms=d%1000,s=_Mathfloor3(d/1000),buf=new Buffer(8),buf.writeUInt32BE(s,0),buf.writeUInt32BE(ms,4),buf},PRNG.prototype.gen_seed=function(nbits,cb){var b,bufs,cat,nbytes,wa,words,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),nbytes=nbits/8,bufs=[],bufs.push(this.now_to_buffer()),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/chris/git/keybase/triplesec/src/prng.iced',funcname:'PRNG.gen_seed'}),_this.meg.generate(nbits,__iced_deferrals.defer({assign_fn:function(){return function(){return words=arguments[0]}}(),lineno:83})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){var _i,_len;for(bufs.push(_this.now_to_buffer()),bufs.push(new Buffer(words)),bufs.push(native_rng(nbytes)),bufs.push(_this.now_to_buffer()),cat=Buffer.concat(bufs),wa=WordArray.from_buffer(cat),util.scrub_buffer(cat),(_i=0,_len=bufs.length);_i<_len;_i++)b=bufs[_i],util.scrub_buffer(b);return cb(wa)}}(this))},PRNG.prototype.generate=function(n,cb){return this.adrbg.generate(n,cb)},PRNG}(),_prng=null,generate=function(n,cb){return _prng==null&&(_prng=new PRNG),_prng.generate(n,cb)},exports.PRNG=PRNG,exports.generate=generate,exports.native_rng=native_rng}).call(this)}).call(this,require('buffer').Buffer)},{'./combine':175,'./drbg':178,'./util':195,'./wordarray':196,'buffer':80,'iced-runtime':118,'more-entropy':199}],185:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},G,Global,Hasher,RIPEMD160,WordArray,X64Word,X64WordArray,f1,f2,f3,f4,f5,rotl,transform,_ref;_ref=require('./wordarray'),WordArray=_ref.WordArray,X64Word=_ref.X64Word,X64WordArray=_ref.X64WordArray,Hasher=require('./algbase').Hasher,Global=function(){function Global(){this._zl=new WordArray([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),this._zr=new WordArray([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),this._sl=new WordArray([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),this._sr=new WordArray([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),this._hl=new WordArray([0,1518500249,1859775393,2400959708,2840853838]),this._hr=new WordArray([1352829926,1548603684,1836072691,2053994217,0])}return Global}(),G=new Global,RIPEMD160=function(_super){function RIPEMD160(){return RIPEMD160.__super__.constructor.apply(this,arguments)}return __extends(RIPEMD160,_super),RIPEMD160.blockSize=512/32,RIPEMD160.prototype.blockSize=RIPEMD160.blockSize,RIPEMD160.output_size=160/8,RIPEMD160.prototype.output_size=RIPEMD160.output_size,RIPEMD160.prototype._doReset=function(){return this._hash=new WordArray([1732584193,4023233417,2562383102,271733878,3285377520])},RIPEMD160.prototype.get_output_size=function(){return this.output_size},RIPEMD160.prototype._doProcessBlock=function(M,offset){var H,M_offset_i,al,ar,bl,br,cl,cr,dl,dr,el,er,hl,hr,i,offset_i,sl,sr,t,zl,zr,_i,_j;for(i=_i=0;_i<16;i=++_i)offset_i=offset+i,M_offset_i=M[offset_i],M[offset_i]=(M_offset_i<<8|M_offset_i>>>24)&16711935|(M_offset_i<<24|M_offset_i>>>8)&4278255360;for(H=this._hash.words,hl=G._hl.words,hr=G._hr.words,zl=G._zl.words,zr=G._zr.words,sl=G._sl.words,sr=G._sr.words,ar=al=H[0],br=bl=H[1],cr=cl=H[2],dr=dl=H[3],er=el=H[4],i=_j=0;_j<80;i=++_j)t=al+M[offset+zl[i]]|0,t+=i<16?f1(bl,cl,dl)+hl[0]:i<32?f2(bl,cl,dl)+hl[1]:i<48?f3(bl,cl,dl)+hl[2]:i<64?f4(bl,cl,dl)+hl[3]:f5(bl,cl,dl)+hl[4],t|=0,t=rotl(t,sl[i]),t=t+el|0,al=el,el=dl,dl=rotl(cl,10),cl=bl,bl=t,t=ar+M[offset+zr[i]]|0,t+=i<16?f5(br,cr,dr)+hr[0]:i<32?f4(br,cr,dr)+hr[1]:i<48?f3(br,cr,dr)+hr[2]:i<64?f2(br,cr,dr)+hr[3]:f1(br,cr,dr)+hr[4],t|=0,t=rotl(t,sr[i]),t=t+er|0,ar=er,er=dr,dr=rotl(cr,10),cr=br,br=t;return t=H[1]+cl+dr|0,H[1]=H[2]+dl+er|0,H[2]=H[3]+el+ar|0,H[3]=H[4]+al+br|0,H[4]=H[0]+bl+cr|0,H[0]=t},RIPEMD160.prototype._doFinalize=function(){var H,H_i,data,dataWords,hash,i,nBitsLeft,nBitsTotal,_i;for(data=this._data,dataWords=data.words,nBitsTotal=this._nDataBytes*8,nBitsLeft=data.sigBytes*8,dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32,dataWords[(nBitsLeft+64>>>9<<4)+14]=(nBitsTotal<<8|nBitsTotal>>>24)&16711935|(nBitsTotal<<24|nBitsTotal>>>8)&4278255360,data.sigBytes=(dataWords.length+1)*4,this._process(),hash=this._hash,H=hash.words,i=_i=0;_i<5;i=++_i)H_i=H[i],H[i]=(H_i<<8|H_i>>>24)&16711935|(H_i<<24|H_i>>>8)&4278255360;return hash},RIPEMD160.prototype.scrub=function(){return this._hash.scrub()},RIPEMD160.prototype.copy_to=function(obj){return RIPEMD160.__super__.copy_to.call(this,obj),obj._hash=this._hash.clone()},RIPEMD160.prototype.clone=function(){var out;return out=new RIPEMD160,this.copy_to(out),out},RIPEMD160}(Hasher),f1=function(x,y,z){return x^y^z},f2=function(x,y,z){return x&y|~x&z},f3=function(x,y,z){return(x|~y)^z},f4=function(x,y,z){return x&z|y&~z},f5=function(x,y,z){return x^(y|~z)},rotl=function(x,n){return x<<n|x>>>32-n},transform=function(x){var out;return out=new RIPEMD160().finalize(x),x.scrub(),out},exports.RIPEMD160=RIPEMD160,exports.transform=transform}).call(this)},{'./algbase':174,'./wordarray':196}],186:[function(require,module,exports){(function(Buffer){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},Cipher,Counter,Salsa20,Salsa20Core,Salsa20InnerCore,Salsa20WordStream,StreamCipher,WordArray,asum,bulk_encrypt,encrypt,endian_reverse,fixup_uint32,iced,util,__iced_k,__iced_k_noop,_ref;iced=require('iced-runtime'),__iced_k=__iced_k_noop=function(){},_ref=require('./wordarray'),endian_reverse=_ref.endian_reverse,WordArray=_ref.WordArray,Counter=require('./ctr').Counter,fixup_uint32=require('./util').fixup_uint32,StreamCipher=require('./algbase').StreamCipher,util=require('./util'),asum=function(out,v){var e,i,_i,_len;for(i=_i=0,_len=v.length;_i<_len;i=++_i)e=v[i],out[i]+=e;return!1},Salsa20InnerCore=function(){function Salsa20InnerCore(rounds){this.rounds=rounds}return Salsa20InnerCore.prototype._core=function(v){'use asm';var i,u,x0,x1,x10,x11,x12,x13,x14,x15,x2,x3,x4,x5,x6,x7,x8,x9,_i,_ref1;for(x0=v[0],x1=v[1],x2=v[2],x3=v[3],x4=v[4],x5=v[5],x6=v[6],x7=v[7],x8=v[8],x9=v[9],x10=v[10],x11=v[11],x12=v[12],x13=v[13],x14=v[14],x15=v[15],(i=_i=0,_ref1=this.rounds);_i<_ref1;i=_i+=2)u=x0+x12|0,x4^=u<<7|u>>>25,u=x4+x0|0,x8^=u<<9|u>>>23,u=x8+x4|0,x12^=u<<13|u>>>19,u=x12+x8|0,x0^=u<<18|u>>>14,u=x5+x1|0,x9^=u<<7|u>>>25,u=x9+x5|0,x13^=u<<9|u>>>23,u=x13+x9|0,x1^=u<<13|u>>>19,u=x1+x13|0,x5^=u<<18|u>>>14,u=x10+x6|0,x14^=u<<7|u>>>25,u=x14+x10|0,x2^=u<<9|u>>>23,u=x2+x14|0,x6^=u<<13|u>>>19,u=x6+x2|0,x10^=u<<18|u>>>14,u=x15+x11|0,x3^=u<<7|u>>>25,u=x3+x15|0,x7^=u<<9|u>>>23,u=x7+x3|0,x11^=u<<13|u>>>19,u=x11+x7|0,x15^=u<<18|u>>>14,u=x0+x3|0,x1^=u<<7|u>>>25,u=x1+x0|0,x2^=u<<9|u>>>23,u=x2+x1|0,x3^=u<<13|u>>>19,u=x3+x2|0,x0^=u<<18|u>>>14,u=x5+x4|0,x6^=u<<7|u>>>25,u=x6+x5|0,x7^=u<<9|u>>>23,u=x7+x6|0,x4^=u<<13|u>>>19,u=x4+x7|0,x5^=u<<18|u>>>14,u=x10+x9|0,x11^=u<<7|u>>>25,u=x11+x10|0,x8^=u<<9|u>>>23,u=x8+x11|0,x9^=u<<13|u>>>19,u=x9+x8|0,x10^=u<<18|u>>>14,u=x15+x14|0,x12^=u<<7|u>>>25,u=x12+x15|0,x13^=u<<9|u>>>23,u=x13+x12|0,x14^=u<<13|u>>>19,u=x14+x13|0,x15^=u<<18|u>>>14;return[x0,x1,x2,x3,x4,x5,x6,x7,x8,x9,x10,x11,x12,x13,x14,x15]},Salsa20InnerCore}(),Salsa20Core=function(_super){function Salsa20Core(key,nonce){var _ref1;if(Salsa20Core.__super__.constructor.call(this,20),this.key=key.clone().endian_reverse(),this.nonce=nonce.clone().endian_reverse(),(this.key.sigBytes!==16||this.nonce.sigBytes!==8)&&(this.key.sigBytes!==32||(_ref1=this.nonce.sigBytes)!==8&&_ref1!==24))throw new Error('Bad key/nonce lengths');this.nonce.sigBytes===24&&this.xsalsa_setup(),this.input=this.key_iv_setup(this.nonce,this.key),this._reset()}return __extends(Salsa20Core,_super),Salsa20Core.prototype.sigma=WordArray.from_buffer_le(new Buffer('expand 32-byte k')),Salsa20Core.prototype.tau=WordArray.from_buffer_le(new Buffer('expand 16-byte k')),Salsa20Core.blockSize=64,Salsa20Core.prototype.blockSize=Salsa20Core.blockSize,Salsa20Core.keySize=32,Salsa20Core.prototype.keySize=Salsa20Core.keySize,Salsa20Core.ivSize=192/8,Salsa20Core.prototype.ivSize=Salsa20Core.ivSize,Salsa20Core.prototype.scrub=function(){return this.key.scrub(),this.nonce.scrub(),util.scrub_vec(this.input)},Salsa20Core.prototype.xsalsa_setup=function(){var n0,n1;return n0=new WordArray(this.nonce.words.slice(0,4)),this.nonce=n1=new WordArray(this.nonce.words.slice(4)),this.key=this.hsalsa20(n0,this.key)},Salsa20Core.prototype.hsalsa20=function(nonce,key){var i,indexes,input,v;return input=this.key_iv_setup(nonce,key),input[8]=nonce.words[2],input[9]=nonce.words[3],v=this._core(input),indexes=[0,5,10,15,6,7,8,9],v=function(){var _i,_len,_results;for(_results=[],_i=0,_len=indexes.length;_i<_len;_i++)i=indexes[_i],_results.push(fixup_uint32(v[i]));return _results}(),util.scrub_vec(input),new WordArray(v)},Salsa20Core.prototype.key_iv_setup=function(nonce,key){var A,C,i,out,_i,_j,_k,_ref1;for(out=[],i=_i=0;_i<4;i=++_i)out[i+1]=key.words[i];for(_ref1=key.sigBytes===32?[this.sigma,key.words.slice(4)]:[this.tau,key.words],C=_ref1[0],A=_ref1[1],i=_j=0;_j<4;i=++_j)out[i+11]=A[i];for(i=_k=0;_k<4;i=++_k)out[i*5]=C.words[i];return out[6]=nonce.words[0],out[7]=nonce.words[1],out},Salsa20Core.prototype.counter_setup=function(){return this.input[8]=this.counter.get().words[0],this.input[9]=this.counter.get().words[1]},Salsa20Core.prototype._reset=function(){return this.counter=new Counter({len:2})},Salsa20Core.prototype._generateBlock=function(){var v;return this.counter_setup(),v=this._core(this.input),asum(v,this.input),this.counter.inc_le(),v},Salsa20Core}(Salsa20InnerCore),exports.Salsa20WordStream=Salsa20WordStream=function(_super){function Salsa20WordStream(){return Salsa20WordStream.__super__.constructor.apply(this,arguments)}return __extends(Salsa20WordStream,_super),Salsa20WordStream.prototype._reset=function(){return Salsa20WordStream.__super__._reset.call(this)},Salsa20WordStream.prototype.getWordArray=function(nbytes){var blocks,i,nblocks,w,words,_i,_len,_ref1;for(nbytes==null||nbytes===this.blockSize?words=this._generateBlock():(nblocks=_Mathceil4(nbytes/this.blockSize),blocks=function(){var _i,_results;for(_results=[],i=_i=0;0<=nblocks?_i<nblocks:_i>nblocks;i=0<=nblocks?++_i:--_i)_results.push(this._generateBlock());return _results}.call(this),words=(_ref1=[]).concat.apply(_ref1,blocks)),i=_i=0,_len=words.length;_i<_len;i=++_i)w=words[i],words[i]=endian_reverse(w);return new WordArray(words,nbytes)},Salsa20WordStream}(Salsa20Core),exports.Salsa20=Salsa20=function(_super){function Salsa20(){return Salsa20.__super__.constructor.apply(this,arguments)}return __extends(Salsa20,_super),Salsa20.prototype._reset=function(){return Salsa20.__super__._reset.call(this),this._i=this.blockSize},Salsa20.prototype.getBytes=function(needed){var bsz,n,v;if(needed==null&&(needed=this.blockSize),v=[],bsz=this.blockSize,this._i===bsz&&needed===bsz)return this._generateBlockBuffer();for(;needed>0;)this._i===bsz&&(this._generateBlockBuffer(),this._i=0),n=_Mathmin5(needed,bsz-this._i),v.push(n===bsz?this._buf:this._buf.slice(this._i,this._i+n)),this._i+=n,needed-=n;return Buffer.concat(v)},Salsa20.prototype._generateBlockBuffer=function(){var e,i,v,_i,_len;for(this._buf=new Buffer(this.blockSize),v=this._generateBlock(),(i=_i=0,_len=v.length);_i<_len;i=++_i)e=v[i],this._buf.writeUInt32LE(fixup_uint32(e),i*4);return this._buf},Salsa20}(Salsa20Core),exports.Cipher=Cipher=function(_super){function Cipher(_arg){var iv,key;key=_arg.key,iv=_arg.iv,Cipher.__super__.constructor.call(this),this.salsa=new Salsa20WordStream(key,iv),this.bsiw=this.salsa.blockSize/4}return __extends(Cipher,_super),Cipher.prototype.scrub=function(){return this.salsa.scrub()},Cipher.prototype.get_pad=function(){var pad;return pad=this.salsa.getWordArray(),pad},Cipher}(StreamCipher),exports.encrypt=encrypt=function(_arg){var cipher,input,iv,key,ret;return key=_arg.key,iv=_arg.iv,input=_arg.input,cipher=new Cipher({key:key,iv:iv}),ret=cipher.encrypt(input),cipher.scrub(),ret},exports.bulk_encrypt=bulk_encrypt=function(_arg,cb){var cipher,input,iv,key,progress_hook,ret,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),key=_arg.key,iv=_arg.iv,input=_arg.input,progress_hook=_arg.progress_hook,cipher=new Cipher({key:key,iv:iv}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/salsa20.iced'}),cipher.bulk_encrypt({input:input,progress_hook:progress_hook,what:'salsa20'},__iced_deferrals.defer({assign_fn:function(){return function(){return ret=arguments[0]}}(),lineno:257})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cipher.scrub(),cb(ret)}}(this))},exports.Salsa20InnerCore=Salsa20InnerCore,exports.endian_reverse=endian_reverse,exports.asum=asum}).call(this)}).call(this,require('buffer').Buffer)},{'./algbase':174,'./ctr':176,'./util':195,'./wordarray':196,'buffer':80,'iced-runtime':118}],187:[function(require,module,exports){(function(){var HMAC_SHA256,Salsa20InnerCore,Scrypt,Timer,WordArray,blkcpy,blkxor,default_delay,endian_reverse,fixup_uint32,iced,pbkdf2,scrub_vec,scrypt,timer,ui8a_to_buffer,v_endian_reverse,__iced_k,__iced_k_noop,_ref,_ref1,_ref2;iced=require('iced-runtime'),__iced_k=__iced_k_noop=function(){},HMAC_SHA256=require('./hmac').HMAC_SHA256,pbkdf2=require('./pbkdf2').pbkdf2,_ref=require('./salsa20'),endian_reverse=_ref.endian_reverse,Salsa20InnerCore=_ref.Salsa20InnerCore,_ref1=require('./wordarray'),ui8a_to_buffer=_ref1.ui8a_to_buffer,WordArray=_ref1.WordArray,_ref2=require('./util'),fixup_uint32=_ref2.fixup_uint32,default_delay=_ref2.default_delay,scrub_vec=_ref2.scrub_vec,Timer=function(){function Timer(){this.tot=0}return Timer.prototype.start=function(){return this._t=Date.now()},Timer.prototype.stop=function(){return this.tot+=Date.now()-this._t},Timer}(),timer=new Timer,blkcpy=function(D,S,d_offset,s_offset,len){'use asm';var end,i,j;for(j=d_offset<<4|0,i=s_offset<<4|0,end=i+(len<<4)|0;i<end;)D[j]=S[i],D[j+1]=S[i+1],D[j+2]=S[i+2],D[j+3]=S[i+3],D[j+4]=S[i+4],D[j+5]=S[i+5],D[j+6]=S[i+6],D[j+7]=S[i+7],D[j+8]=S[i+8],D[j+9]=S[i+9],D[j+10]=S[i+10],D[j+11]=S[i+11],D[j+12]=S[i+12],D[j+13]=S[i+13],D[j+14]=S[i+14],D[j+15]=S[i+15],i+=16,j+=16;return!0},blkxor=function(D,S,s_offset,len){'use asm';var i,j;for(len=len<<4|0,i=0,j=s_offset<<4|0;i<len;)D[i]^=S[j],D[i+1]^=S[j+1],D[i+2]^=S[j+2],D[i+3]^=S[j+3],D[i+4]^=S[j+4],D[i+5]^=S[j+5],D[i+6]^=S[j+6],D[i+7]^=S[j+7],D[i+8]^=S[j+8],D[i+9]^=S[j+9],D[i+10]^=S[j+10],D[i+11]^=S[j+11],D[i+12]^=S[j+12],D[i+13]^=S[j+13],D[i+14]^=S[j+14],D[i+15]^=S[j+15],i+=16,j+=16;return!0},v_endian_reverse=function(v){var e,i,_i,_len;for(i=_i=0,_len=v.length;_i<_len;i=++_i)e=v[i],v[i]=endian_reverse(e);return!0},Scrypt=function(){function Scrypt(_arg){var N,c,c0,c1;N=_arg.N,this.r=_arg.r,this.p=_arg.p,c=_arg.c,c0=_arg.c0,c1=_arg.c1,this.klass=_arg.klass,this.N||(this.N=1<<(N||15)),this.r||(this.r=8),this.p||(this.p=1),this.c0=c0||c||1,this.c1=c1||c||1,this.klass||(this.klass=HMAC_SHA256),this.X16_tmp=new Int32Array(16),this.s20ic=new Salsa20InnerCore(8)}return Scrypt.prototype.salsa20_8=function(B){var X,i,x,_i,_len;for(X=this.s20ic._core(B),i=_i=0,_len=X.length;_i<_len;i=++_i)x=X[i],B[i]+=x;return!0},Scrypt.prototype.pbkdf2=function(_arg,cb){var c,dkLen,key,progress_hook,salt,wa,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),key=_arg.key,salt=_arg.salt,dkLen=_arg.dkLen,progress_hook=_arg.progress_hook,c=_arg.c,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/scrypt.iced',funcname:'Scrypt.pbkdf2'}),pbkdf2({key:key,salt:salt,c:c,dkLen:dkLen,klass:_this.klass,progress_hook:progress_hook},__iced_deferrals.defer({assign_fn:function(){return function(){return wa=arguments[0]}}(),lineno:113})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(wa)}}(this))},Scrypt.prototype.blockmix_salsa8=function(B,Y){var X,i,_i,_ref3;for(X=this.X16_tmp,blkcpy(X,B,0,2*this.r-1,1),(i=_i=0,_ref3=2*this.r);0<=_ref3?_i<_ref3:_i>_ref3;i=0<=_ref3?++_i:--_i)blkxor(X,B,i,1),this.salsa20_8(X),blkcpy(Y,X,i,0,1);for(i=0;i<this.r;)blkcpy(B,Y,i,i*2,1),i++;for(i=0;i<this.r;)blkcpy(B,Y,i+this.r,i*2+1,1),i++;return!0},Scrypt.prototype.smix=function(_arg,cb){var B,V,X,XY,Y,i,j,lim,progress_hook,stop,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),B=_arg.B,V=_arg.V,XY=_arg.XY,progress_hook=_arg.progress_hook,X=XY,lim=2*this.r,Y=XY.subarray(16*lim),blkcpy(X,B,0,0,lim),i=0,function(_this){return function(__iced_k){var _results,_while;_results=[],_while=function(__iced_k){var _break,_continue,_next;if(_break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},!(i<_this.N))return _break();for(stop=_Mathmin5(_this.N,i+2048);i<stop;)blkcpy(V,X,lim*i,0,lim),_this.blockmix_salsa8(X,Y),i++;typeof progress_hook==='function'&&progress_hook(i),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/scrypt.iced',funcname:'Scrypt.smix'}),default_delay(0,0,__iced_deferrals.defer({lineno:170})),__iced_deferrals._fulfill()}(_next)},_while(__iced_k)}}(this)(function(_this){return function(){i=0,function(__iced_k){var _results,_while;_results=[],_while=function(__iced_k){var _break,_continue,_next;if(_break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},!(i<_this.N))return _break();for(stop=_Mathmin5(_this.N,i+256);i<stop;)j=fixup_uint32(X[16*(lim-1)])&_this.N-1,blkxor(X,V,j*lim,lim),_this.blockmix_salsa8(X,Y),i++;typeof progress_hook==='function'&&progress_hook(i+_this.N),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/scrypt.iced',funcname:'Scrypt.smix'}),default_delay(0,0,__iced_deferrals.defer({lineno:187})),__iced_deferrals._fulfill()}(_next)},_while(__iced_k)}(function(){return blkcpy(B,X,0,0,lim),cb()})}}(this))},Scrypt.prototype.run=function(_arg,cb){var B,MAX,V,XY,dkLen,err,j,key,lph,out,progress_hook,ret,salt,___iced_passed_deferral,__iced_deferrals,__iced_k,_begin,_end,_positive;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),key=_arg.key,salt=_arg.salt,dkLen=_arg.dkLen,progress_hook=_arg.progress_hook,MAX=4294967295,err=ret=null,err=dkLen>MAX?err=new Error('asked for too much data'):this.r*this.p>=1<<30?new Error('r & p are too big'):this.r>MAX/128/this.p||this.r>MAX/256||this.N>MAX/128/this.r?new Error('N is too big'):null,XY=new Int32Array(64*this.r),V=new Int32Array(32*this.r*this.N),lph=function(o){return o.what+=' (pass 1)',typeof progress_hook==='function'?progress_hook(o):void 0},function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/scrypt.iced',funcname:'Scrypt.run'}),_this.pbkdf2({key:key.clone(),salt:salt,dkLen:128*_this.r*_this.p,c:_this.c0,progress_hook:lph},__iced_deferrals.defer({assign_fn:function(){return function(){return B=arguments[0]}}(),lineno:218})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){B=new Int32Array(B.words),v_endian_reverse(B),lph=function(j){return function(i){return typeof progress_hook==='function'?progress_hook({i:i+j*_this.N*2,what:'scrypt',total:_this.p*_this.N*2}):void 0}},function(__iced_k){var _i,_results,_while;j=0,_begin=0,_end=_this.p,_positive=_end>_begin,_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _positive?j+=1:j-=1,_while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},_positive===!0&&j>=_this.p||_positive===!1&&j<=_this.p?_break():void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/scrypt.iced',funcname:'Scrypt.run'}),_this.smix({B:B.subarray(32*_this.r*j),V:V,XY:XY,progress_hook:lph(j)},__iced_deferrals.defer({lineno:225})),__iced_deferrals._fulfill()}(_next)},_while(__iced_k)}(function(){v_endian_reverse(B),lph=function(o){return o.what+=' (pass 2)',typeof progress_hook==='function'?progress_hook(o):void 0},function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/scrypt.iced',funcname:'Scrypt.run'}),_this.pbkdf2({key:key,salt:WordArray.from_i32a(B),dkLen:dkLen,c:_this.c1,progress_hook:lph},__iced_deferrals.defer({assign_fn:function(){return function(){return out=arguments[0]}}(),lineno:233})),__iced_deferrals._fulfill()}(function(){return scrub_vec(XY),scrub_vec(V),scrub_vec(B),key.scrub(),cb(out)})})}}(this))},Scrypt}(),scrypt=function(_arg,cb){var N,c,c0,c1,dkLen,eng,key,klass,p,progress_hook,r,salt,wa,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),key=_arg.key,salt=_arg.salt,r=_arg.r,N=_arg.N,p=_arg.p,c0=_arg.c0,c1=_arg.c1,c=_arg.c,klass=_arg.klass,progress_hook=_arg.progress_hook,dkLen=_arg.dkLen,eng=new Scrypt({r:r,N:N,p:p,c:c,c0:c0,c1:c1,klass:klass}),function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/scrypt.iced'}),eng.run({key:key,salt:salt,progress_hook:progress_hook,dkLen:dkLen},__iced_deferrals.defer({assign_fn:function(){return function(){return wa=arguments[0]}}(),lineno:263})),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb(wa)}}(this))},exports.Scrypt=Scrypt,exports.scrypt=scrypt,exports.v_endian_reverse=v_endian_reverse}).call(this)},{'./hmac':180,'./pbkdf2':183,'./salsa20':186,'./util':195,'./wordarray':196,'iced-runtime':118}],188:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},Hasher,SHA1,W,WordArray,transform;WordArray=require('./wordarray').WordArray,Hasher=require('./algbase').Hasher,W=[],SHA1=function(_super){function SHA1(){return SHA1.__super__.constructor.apply(this,arguments)}return __extends(SHA1,_super),SHA1.blockSize=512/32,SHA1.prototype.blockSize=SHA1.blockSize,SHA1.output_size=20,SHA1.prototype.output_size=SHA1.output_size,SHA1.prototype._doReset=function(){return this._hash=new WordArray([1732584193,4023233417,2562383102,271733878,3285377520])},SHA1.prototype._doProcessBlock=function(M,offset){var H,a,b,c,d,e,i,n,t,_i;for(H=this._hash.words,a=H[0],b=H[1],c=H[2],d=H[3],e=H[4],i=_i=0;_i<80;i=++_i)i<16?W[i]=M[offset+i]|0:(n=W[i-3]^W[i-8]^W[i-14]^W[i-16],W[i]=n<<1|n>>>31),t=(a<<5|a>>>27)+e+W[i],t+=i<20?(b&c|~b&d)+1518500249:i<40?(b^c^d)+1859775393:i<60?(b&c|b&d|c&d)-1894007588:(b^c^d)-899497514,e=d,d=c,c=b<<30|b>>>2,b=a,a=t;return H[0]=H[0]+a|0,H[1]=H[1]+b|0,H[2]=H[2]+c|0,H[3]=H[3]+d|0,H[4]=H[4]+e|0},SHA1.prototype._doFinalize=function(){var data,dataWords,nBitsLeft,nBitsTotal;return data=this._data,dataWords=data.words,nBitsTotal=this._nDataBytes*8,nBitsLeft=data.sigBytes*8,dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32,dataWords[(nBitsLeft+64>>>9<<4)+14]=_Mathfloor3(nBitsTotal/4294967296),dataWords[(nBitsLeft+64>>>9<<4)+15]=nBitsTotal,data.sigBytes=dataWords.length*4,this._process(),this._hash},SHA1.prototype.copy_to=function(obj){return SHA1.__super__.copy_to.call(this,obj),obj._hash=this._hash.clone()},SHA1.prototype.clone=function(){var out;return out=new SHA1,this.copy_to(out),out},SHA1}(Hasher),transform=transform=function(x){var out;return out=new SHA1().finalize(x),x.scrub(),out},exports.SHA1=SHA1,exports.transform=transform}).call(this)},{'./algbase':174,'./wordarray':196}],189:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},SHA224,SHA256,WordArray,transform;WordArray=require('./wordarray').WordArray,SHA256=require('./sha256').SHA256,SHA224=function(_super){function SHA224(){return SHA224.__super__.constructor.apply(this,arguments)}return __extends(SHA224,_super),SHA224.output_size=224/8,SHA224.prototype.output_size=SHA224.output_size,SHA224.prototype._doReset=function(){return this._hash=new WordArray([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},SHA224.prototype._doFinalize=function(){var hash;return hash=SHA224.__super__._doFinalize.call(this),hash.sigBytes-=4,hash},SHA224.prototype.clone=function(){var out;return out=new SHA224,this.copy_to(out),out},SHA224}(SHA256),transform=function(x){var out;return out=new SHA224().finalize(x),x.scrub(),out},exports.SHA224=SHA224,exports.transform=transform}).call(this)},{'./sha256':190,'./wordarray':196}],190:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},Global,Hasher,SHA256,WordArray,glbl,transform;WordArray=require('./wordarray').WordArray,Hasher=require('./algbase').Hasher,Global=function(){function Global(){this.H=[],this.K=[],this.W=[],this.init()}return Global.prototype.isPrime=function(n){var f,sqn,_i;if(n===2||n===3||n===5||n===7)return!0;if(n===1||n===4||n===6||n===8||n===9)return!1;for(sqn=_Mathceil4(_Mathsqrt(n)),f=_i=2;2<=sqn?_i<=sqn:_i>=sqn;f=2<=sqn?++_i:--_i)if(n%f===0)return!1;return!0},Global.prototype.getFractionalBits=function(n){return(n-(n|0))*4294967296|0},Global.prototype.init=function(){var n,nPrime,_results;for(n=2,nPrime=0,_results=[];nPrime<64;)this.isPrime(n)&&(nPrime<8&&(this.H[nPrime]=this.getFractionalBits(_Mathpow3(n,1/2))),this.K[nPrime]=this.getFractionalBits(_Mathpow3(n,1/3)),nPrime++),_results.push(n++);return _results},Global}(),glbl=new Global,SHA256=function(_super){function SHA256(){return SHA256.__super__.constructor.apply(this,arguments)}return __extends(SHA256,_super),SHA256.blockSize=512/32,SHA256.prototype.blockSize=SHA256.blockSize,SHA256.output_size=256/8,SHA256.prototype.output_size=SHA256.output_size,SHA256.prototype._doReset=function(){return this._hash=new WordArray(glbl.H.slice(0))},SHA256.prototype.get_output_size=function(){return this.output_size},SHA256.prototype._doProcessBlock=function(M,offset){var H,K,W,a,b,c,ch,d,e,f,g,gamma0,gamma0x,gamma1,gamma1x,h,i,maj,sigma0,sigma1,t1,t2,_i;for(H=this._hash.words,W=glbl.W,K=glbl.K,a=H[0],b=H[1],c=H[2],d=H[3],e=H[4],f=H[5],g=H[6],h=H[7],i=_i=0;_i<64;i=++_i)i<16?W[i]=M[offset+i]|0:(gamma0x=W[i-15],gamma0=(gamma0x<<25|gamma0x>>>7)^(gamma0x<<14|gamma0x>>>18)^gamma0x>>>3,gamma1x=W[i-2],gamma1=(gamma1x<<15|gamma1x>>>17)^(gamma1x<<13|gamma1x>>>19)^gamma1x>>>10,W[i]=gamma0+W[i-7]+gamma1+W[i-16]),ch=e&f^~e&g,maj=a&b^a&c^b&c,sigma0=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),sigma1=(e<<26|e>>>6)^(e<<21|e>>>11)^(e<<7|e>>>25),t1=h+sigma1+ch+K[i]+W[i],t2=sigma0+maj,h=g,g=f,f=e,e=d+t1|0,d=c,c=b,b=a,a=t1+t2|0;return H[0]=H[0]+a|0,H[1]=H[1]+b|0,H[2]=H[2]+c|0,H[3]=H[3]+d|0,H[4]=H[4]+e|0,H[5]=H[5]+f|0,H[6]=H[6]+g|0,H[7]=H[7]+h|0},SHA256.prototype._doFinalize=function(){var data,dataWords,nBitsLeft,nBitsTotal;return data=this._data,dataWords=data.words,nBitsTotal=this._nDataBytes*8,nBitsLeft=data.sigBytes*8,dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32,dataWords[(nBitsLeft+64>>>9<<4)+14]=_Mathfloor3(nBitsTotal/4294967296),dataWords[(nBitsLeft+64>>>9<<4)+15]=nBitsTotal,data.sigBytes=dataWords.length*4,this._process(),this._hash},SHA256.prototype.scrub=function(){return this._hash.scrub()},SHA256.prototype.copy_to=function(obj){return SHA256.__super__.copy_to.call(this,obj),obj._hash=this._hash.clone()},SHA256.prototype.clone=function(){var out;return out=new SHA256,this.copy_to(out),out},SHA256}(Hasher),transform=function(x){var out;return out=new SHA256().finalize(x),x.scrub(),out},exports.SHA256=SHA256,exports.transform=transform}).call(this)},{'./algbase':174,'./wordarray':196}],191:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},Global,Hasher,SHA3,WordArray,X64Word,X64WordArray,glbl,_ref;_ref=require('./wordarray'),WordArray=_ref.WordArray,X64Word=_ref.X64Word,X64WordArray=_ref.X64WordArray,Hasher=require('./algbase').Hasher,Global=function(){function Global(){this.RHO_OFFSETS=[],this.PI_INDEXES=[],this.ROUND_CONSTANTS=[],this.T=[],this.compute_rho_offsets(),this.compute_pi_indexes(),this.compute_round_constants(),this.make_reusables()}return Global.prototype.compute_rho_offsets=function(){var newX,newY,t,x,y,_i,_results;for(x=1,y=0,_results=[],t=_i=0;_i<24;t=++_i)this.RHO_OFFSETS[x+5*y]=(t+1)*(t+2)/2%64,newX=y%5,newY=(2*x+3*y)%5,x=newX,_results.push(y=newY);return _results},Global.prototype.compute_pi_indexes=function(){var x,y,_i,_results;for(_results=[],x=_i=0;_i<5;x=++_i)_results.push(function(){var _j,_results1;for(_results1=[],y=_j=0;_j<5;y=++_j)_results1.push(this.PI_INDEXES[x+5*y]=y+(2*x+3*y)%5*5);return _results1}.call(this));return _results},Global.prototype.compute_round_constants=function(){var LFSR,bitPosition,i,j,roundConstantLsw,roundConstantMsw,_i,_j,_results;for(LFSR=1,_results=[],i=_i=0;_i<24;i=++_i){for(roundConstantMsw=0,roundConstantLsw=0,j=_j=0;_j<7;j=++_j)LFSR&1&&(bitPosition=(1<<j)-1,bitPosition<32?roundConstantLsw^=1<<bitPosition:roundConstantMsw^=1<<bitPosition-32),LFSR&128?LFSR=LFSR<<1^113:LFSR<<=1;_results.push(this.ROUND_CONSTANTS[i]=new X64Word(roundConstantMsw,roundConstantLsw))}return _results},Global.prototype.make_reusables=function(){var i;return this.T=function(){var _i,_results;for(_results=[],i=_i=0;_i<25;i=++_i)_results.push(new X64Word(0,0));return _results}()},Global}(),glbl=new Global,exports.SHA3=SHA3=function(_super){function SHA3(){return SHA3.__super__.constructor.apply(this,arguments)}return __extends(SHA3,_super),SHA3.outputLength=512,SHA3.prototype.outputLength=SHA3.outputLength,SHA3.blockSize=(1600-2*SHA3.outputLength)/32,SHA3.prototype.blockSize=SHA3.blockSize,SHA3.output_size=SHA3.outputLength/8,SHA3.prototype.output_size=SHA3.output_size,SHA3.prototype._doReset=function(){var i;return this._state=function(){var _i,_results;for(_results=[],i=_i=0;_i<25;i=++_i)_results.push(new X64Word(0,0));return _results}()},SHA3.prototype._doProcessBlock=function(M,offset){var G,M2i,M2i1,T0,TLane,TPiLane,Tx,Tx1,Tx1Lane,Tx1Lsw,Tx1Msw,Tx2Lane,Tx4,i,lane,laneIndex,laneLsw,laneMsw,nBlockSizeLanes,rhoOffset,round,roundConstant,state,state0,tLsw,tMsw,x,y,_i,_j,_k,_l,_m,_n,_o,_p,_q,_results;for(G=glbl,state=this._state,nBlockSizeLanes=this.blockSize/2,i=_i=0;0<=nBlockSizeLanes?_i<nBlockSizeLanes:_i>nBlockSizeLanes;i=0<=nBlockSizeLanes?++_i:--_i)M2i=M[offset+2*i],M2i1=M[offset+2*i+1],M2i=(M2i<<8|M2i>>>24)&16711935|(M2i<<24|M2i>>>8)&4278255360,M2i1=(M2i1<<8|M2i1>>>24)&16711935|(M2i1<<24|M2i1>>>8)&4278255360,lane=state[i],lane.high^=M2i1,lane.low^=M2i;for(_results=[],round=_j=0;_j<24;round=++_j){for(x=_k=0;_k<5;x=++_k){for(tMsw=tLsw=0,y=_l=0;_l<5;y=++_l)lane=state[x+5*y],tMsw^=lane.high,tLsw^=lane.low;Tx=G.T[x],Tx.high=tMsw,Tx.low=tLsw}for(x=_m=0;_m<5;x=++_m)for(Tx4=G.T[(x+4)%5],Tx1=G.T[(x+1)%5],Tx1Msw=Tx1.high,Tx1Lsw=Tx1.low,tMsw=Tx4.high^(Tx1Msw<<1|Tx1Lsw>>>31),tLsw=Tx4.low^(Tx1Lsw<<1|Tx1Msw>>>31),y=_n=0;_n<5;y=++_n)lane=state[x+5*y],lane.high^=tMsw,lane.low^=tLsw;for(laneIndex=_o=1;_o<25;laneIndex=++_o)lane=state[laneIndex],laneMsw=lane.high,laneLsw=lane.low,rhoOffset=G.RHO_OFFSETS[laneIndex],rhoOffset<32?(tMsw=laneMsw<<rhoOffset|laneLsw>>>32-rhoOffset,tLsw=laneLsw<<rhoOffset|laneMsw>>>32-rhoOffset):(tMsw=laneLsw<<rhoOffset-32|laneMsw>>>64-rhoOffset,tLsw=laneMsw<<rhoOffset-32|laneLsw>>>64-rhoOffset),TPiLane=G.T[G.PI_INDEXES[laneIndex]],TPiLane.high=tMsw,TPiLane.low=tLsw;for(T0=G.T[0],state0=state[0],T0.high=state0.high,T0.low=state0.low,x=_p=0;_p<5;x=++_p)for(y=_q=0;_q<5;y=++_q)laneIndex=x+5*y,lane=state[laneIndex],TLane=G.T[laneIndex],Tx1Lane=G.T[(x+1)%5+5*y],Tx2Lane=G.T[(x+2)%5+5*y],lane.high=TLane.high^~Tx1Lane.high&Tx2Lane.high,lane.low=TLane.low^~Tx1Lane.low&Tx2Lane.low;lane=state[0],roundConstant=G.ROUND_CONSTANTS[round],lane.high^=roundConstant.high,_results.push(lane.low^=roundConstant.low)}return _results},SHA3.prototype._doFinalize=function(){var blockSizeBits,data,dataWords,hashWords,i,lane,laneLsw,laneMsw,nBitsLeft,nBitsTotal,outputLengthBytes,outputLengthLanes,state,_i;for(data=this._data,dataWords=data.words,nBitsTotal=this._nDataBytes*8,nBitsLeft=data.sigBytes*8,blockSizeBits=this.blockSize*32,dataWords[nBitsLeft>>>5]|=1<<24-nBitsLeft%32,dataWords[(_Mathceil4((nBitsLeft+1)/blockSizeBits)*blockSizeBits>>>5)-1]|=128,data.sigBytes=dataWords.length*4,this._process(),state=this._state,outputLengthBytes=this.outputLength/8,outputLengthLanes=outputLengthBytes/8,hashWords=[],i=_i=0;0<=outputLengthLanes?_i<outputLengthLanes:_i>outputLengthLanes;i=0<=outputLengthLanes?++_i:--_i)lane=state[i],laneMsw=lane.high,laneLsw=lane.low,laneMsw=(laneMsw<<8|laneMsw>>>24)&16711935|(laneMsw<<24|laneMsw>>>8)&4278255360,laneLsw=(laneLsw<<8|laneLsw>>>24)&16711935|(laneLsw<<24|laneLsw>>>8)&4278255360,hashWords.push(laneLsw),hashWords.push(laneMsw);return new WordArray(hashWords,outputLengthBytes)},SHA3.prototype.copy_to=function(obj){var s;return SHA3.__super__.copy_to.call(this,obj),obj._state=function(){var _i,_len,_ref1,_results;for(_ref1=this._state,_results=[],(_i=0,_len=_ref1.length);_i<_len;_i++)s=_ref1[_i],_results.push(s.clone());return _results}.call(this)},SHA3.prototype.scrub=function(){},SHA3.prototype.clone=function(){var out;return out=new SHA3,this.copy_to(out),out},SHA3}(Hasher),exports.transform=function(x){var out;return out=new SHA3().finalize(x),x.scrub(),out}}).call(this)},{'./algbase':174,'./wordarray':196}],192:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},Global,SHA384,SHA512,WordArray,X64WordArray,transform,_ref,_ref1;_ref=require('./wordarray'),X64WordArray=_ref.X64WordArray,WordArray=_ref.WordArray,_ref1=require('./sha512'),SHA512=_ref1.SHA512,Global=_ref1.Global,SHA384=function(_super){function SHA384(){return SHA384.__super__.constructor.apply(this,arguments)}return __extends(SHA384,_super),SHA384.output_size=384/8,SHA384.prototype.output_size=SHA384.output_size,SHA384.prototype._doReset=function(){return this._hash=new X64WordArray(Global.convert([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]))},SHA384.prototype._doFinalize=function(){var hash;return hash=SHA384.__super__._doFinalize.call(this),hash.sigBytes-=16,hash},SHA384.prototype.clone=function(){var out;return out=new SHA384,this.copy_to(out),out},SHA384}(SHA512),transform=function(x){var out;return out=new SHA384().finalize(x),x.scrub(),out},exports.SHA384=SHA384,exports.transform=transform}).call(this)},{'./sha512':193,'./wordarray':196}],193:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},Global,Hasher,SHA512,X64Word,X64WordArray,glbl,_ref;_ref=require('./wordarray'),X64Word=_ref.X64Word,X64WordArray=_ref.X64WordArray,Hasher=require('./algbase').Hasher,Global=function(){function Global(){var i;this.K=this.convert([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]),this.I=new X64WordArray(this.convert([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209])),this.W=function(){var _i,_results;for(_results=[],i=_i=0;_i<80;i=++_i)_results.push(new X64Word(0,0));return _results}()}return Global.convert=function(raw){var i,_i,_ref1,_results;for(_results=[],i=_i=0,_ref1=raw.length;_i<_ref1;i=_i+=2)_results.push(new X64Word(raw[i],raw[i+1]));return _results},Global.prototype.convert=function(raw){return Global.convert(raw)},Global}(),exports.Global=Global,glbl=new Global,exports.SHA512=SHA512=function(_super){function SHA512(){return SHA512.__super__.constructor.apply(this,arguments)}return __extends(SHA512,_super),SHA512.blockSize=1024/32,SHA512.prototype.blockSize=SHA512.blockSize,SHA512.output_size=512/8,SHA512.prototype.output_size=SHA512.output_size,SHA512.prototype._doReset=function(){return this._hash=glbl.I.clone()},SHA512.prototype._doProcessBlock=function(M,offset){var H,H0,H0h,H0l,H1,H1h,H1l,H2,H2h,H2l,H3,H3h,H3l,H4,H4h,H4l,H5,H5h,H5l,H6,H6h,H6l,H7,H7h,H7l,Ki,Kih,Kil,W,Wi,Wi16,Wi16h,Wi16l,Wi7,Wi7h,Wi7l,Wih,Wil,ah,al,bh,bl,ch,chh,chl,cl,dh,dl,eh,el,fh,fl,gamma0h,gamma0l,gamma0x,gamma0xh,gamma0xl,gamma1h,gamma1l,gamma1x,gamma1xh,gamma1xl,gh,gl,hh,hl,i,majh,majl,sigma0h,sigma0l,sigma1h,sigma1l,t1h,t1l,t2h,t2l,_i;for(H=this._hash.words,W=glbl.W,H0=H[0],H1=H[1],H2=H[2],H3=H[3],H4=H[4],H5=H[5],H6=H[6],H7=H[7],H0h=H0.high,H0l=H0.low,H1h=H1.high,H1l=H1.low,H2h=H2.high,H2l=H2.low,H3h=H3.high,H3l=H3.low,H4h=H4.high,H4l=H4.low,H5h=H5.high,H5l=H5.low,H6h=H6.high,H6l=H6.low,H7h=H7.high,H7l=H7.low,ah=H0h,al=H0l,bh=H1h,bl=H1l,ch=H2h,cl=H2l,dh=H3h,dl=H3l,eh=H4h,el=H4l,fh=H5h,fl=H5l,gh=H6h,gl=H6l,hh=H7h,hl=H7l,i=_i=0;_i<80;i=++_i)Wi=W[i],i<16?(Wih=Wi.high=M[offset+i*2]|0,Wil=Wi.low=M[offset+i*2+1]|0):(gamma0x=W[i-15],gamma0xh=gamma0x.high,gamma0xl=gamma0x.low,gamma0h=(gamma0xh>>>1|gamma0xl<<31)^(gamma0xh>>>8|gamma0xl<<24)^gamma0xh>>>7,gamma0l=(gamma0xl>>>1|gamma0xh<<31)^(gamma0xl>>>8|gamma0xh<<24)^(gamma0xl>>>7|gamma0xh<<25),gamma1x=W[i-2],gamma1xh=gamma1x.high,gamma1xl=gamma1x.low,gamma1h=(gamma1xh>>>19|gamma1xl<<13)^(gamma1xh<<3|gamma1xl>>>29)^gamma1xh>>>6,gamma1l=(gamma1xl>>>19|gamma1xh<<13)^(gamma1xl<<3|gamma1xh>>>29)^(gamma1xl>>>6|gamma1xh<<26),Wi7=W[i-7],Wi7h=Wi7.high,Wi7l=Wi7.low,Wi16=W[i-16],Wi16h=Wi16.high,Wi16l=Wi16.low,Wil=gamma0l+Wi7l,Wih=gamma0h+Wi7h+(Wil>>>0<gamma0l>>>0?1:0),Wil+=gamma1l,Wih=Wih+gamma1h+(Wil>>>0<gamma1l>>>0?1:0),Wil+=Wi16l,Wih=Wih+Wi16h+(Wil>>>0<Wi16l>>>0?1:0),Wi.high=Wih,Wi.low=Wil),chh=eh&fh^~eh&gh,chl=el&fl^~el&gl,majh=ah&bh^ah&ch^bh&ch,majl=al&bl^al&cl^bl&cl,sigma0h=(ah>>>28|al<<4)^(ah<<30|al>>>2)^(ah<<25|al>>>7),sigma0l=(al>>>28|ah<<4)^(al<<30|ah>>>2)^(al<<25|ah>>>7),sigma1h=(eh>>>14|el<<18)^(eh>>>18|el<<14)^(eh<<23|el>>>9),sigma1l=(el>>>14|eh<<18)^(el>>>18|eh<<14)^(el<<23|eh>>>9),Ki=glbl.K[i],Kih=Ki.high,Kil=Ki.low,t1l=hl+sigma1l,t1h=hh+sigma1h+(t1l>>>0<hl>>>0?1:0),t1l+=chl,t1h=t1h+chh+(t1l>>>0<chl>>>0?1:0),t1l+=Kil,t1h=t1h+Kih+(t1l>>>0<Kil>>>0?1:0),t1l+=Wil,t1h=t1h+Wih+(t1l>>>0<Wil>>>0?1:0),t2l=sigma0l+majl,t2h=sigma0h+majh+(t2l>>>0<sigma0l>>>0?1:0),hh=gh,hl=gl,gh=fh,gl=fl,fh=eh,fl=el,el=dl+t1l|0,eh=dh+t1h+(el>>>0<dl>>>0?1:0)|0,dh=ch,dl=cl,ch=bh,cl=bl,bh=ah,bl=al,al=t1l+t2l|0,ah=t1h+t2h+(al>>>0<t1l>>>0?1:0)|0;return H0l=H0.low=H0l+al,H0.high=H0h+ah+(H0l>>>0<al>>>0?1:0),H1l=H1.low=H1l+bl,H1.high=H1h+bh+(H1l>>>0<bl>>>0?1:0),H2l=H2.low=H2l+cl,H2.high=H2h+ch+(H2l>>>0<cl>>>0?1:0),H3l=H3.low=H3l+dl,H3.high=H3h+dh+(H3l>>>0<dl>>>0?1:0),H4l=H4.low=H4l+el,H4.high=H4h+eh+(H4l>>>0<el>>>0?1:0),H5l=H5.low=H5l+fl,H5.high=H5h+fh+(H5l>>>0<fl>>>0?1:0),H6l=H6.low=H6l+gl,H6.high=H6h+gh+(H6l>>>0<gl>>>0?1:0),H7l=H7.low=H7l+hl,H7.high=H7h+hh+(H7l>>>0<hl>>>0?1:0)},SHA512.prototype._doFinalize=function(){var dataWords,nBitsLeft,nBitsTotal;return dataWords=this._data.words,nBitsTotal=this._nDataBytes*8,nBitsLeft=this._data.sigBytes*8,dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32,dataWords[(nBitsLeft+128>>>10<<5)+30]=_Mathfloor3(nBitsTotal/4294967296),dataWords[(nBitsLeft+128>>>10<<5)+31]=nBitsTotal,this._data.sigBytes=dataWords.length*4,this._process(),this._hash.toX32()},SHA512.prototype.copy_to=function(obj){return SHA512.__super__.copy_to.call(this,obj),obj._hash=this._hash.clone()},SHA512.prototype.clone=function(){var out;return out=new SHA512,this.copy_to(out),out},SHA512}(Hasher),exports.transform=function(x){var out;return out=new SHA512().finalize(x),x.scrub(),out}}).call(this)},{'./algbase':174,'./wordarray':196}],194:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},BlockCipher,G,Global,TwoFish,scrub_vec;BlockCipher=require('./algbase').BlockCipher,scrub_vec=require('./util').scrub_vec,Global=function(){function Global(){this.P=[[169,103,179,232,4,253,163,118,154,146,128,120,228,221,209,56,13,198,53,152,24,247,236,108,67,117,55,38,250,19,148,72,242,208,139,48,132,84,223,35,25,91,61,89,243,174,162,130,99,1,131,46,217,81,155,124,166,235,165,190,22,12,227,97,192,140,58,245,115,44,37,11,187,78,137,107,83,106,180,241,225,230,189,69,226,244,182,102,204,149,3,86,212,28,30,215,251,195,142,181,233,207,191,186,234,119,57,175,51,201,98,113,129,121,9,173,36,205,249,216,229,197,185,77,68,8,134,231,161,29,170,237,6,112,178,210,65,123,160,17,49,194,39,144,32,246,96,255,150,92,177,171,158,156,82,27,95,147,10,239,145,133,73,238,45,79,143,59,71,135,109,70,214,62,105,100,42,206,203,47,252,151,5,122,172,127,213,26,75,14,167,90,40,20,63,41,136,60,76,2,184,218,176,23,85,31,138,125,87,199,141,116,183,196,159,114,126,21,34,18,88,7,153,52,110,80,222,104,101,188,219,248,200,168,43,64,220,254,50,164,202,16,33,240,211,93,15,0,111,157,54,66,74,94,193,224],[117,243,198,244,219,123,251,200,74,211,230,107,69,125,232,75,214,50,216,253,55,113,241,225,48,15,248,27,135,250,6,63,94,186,174,91,138,0,188,157,109,193,177,14,128,93,210,213,160,132,7,20,181,144,44,163,178,115,76,84,146,116,54,81,56,176,189,90,252,96,98,150,108,66,247,16,124,40,39,140,19,149,156,199,36,70,59,112,202,227,133,203,17,208,147,184,166,131,32,255,159,119,195,204,3,111,8,191,64,231,43,226,121,12,170,130,65,58,234,185,228,154,164,151,126,218,122,23,102,148,161,29,61,240,222,179,11,114,167,28,239,209,83,62,143,51,38,95,236,118,42,73,129,136,238,33,196,26,235,217,197,57,153,205,173,49,139,1,24,35,221,31,78,45,249,72,79,242,101,142,120,92,88,25,141,229,152,87,103,127,5,100,175,99,182,254,245,183,60,165,206,233,104,68,224,77,67,105,41,46,172,21,89,168,10,158,110,71,223,52,53,106,207,220,34,201,192,155,137,212,237,171,18,162,13,82,187,2,47,169,215,97,30,180,80,4,246,194,22,37,134,86,85,9,190,145]],this.P_00=1,this.P_01=0,this.P_02=0,this.P_03=1,this.P_04=1,this.P_10=0,this.P_11=0,this.P_12=1,this.P_13=1,this.P_14=0,this.P_20=1,this.P_21=1,this.P_22=0,this.P_23=0,this.P_24=0,this.P_30=0,this.P_31=1,this.P_32=1,this.P_33=0,this.P_34=1,this.GF256_FDBK=361,this.GF256_FDBK_2=this.GF256_FDBK/2,this.GF256_FDBK_4=this.GF256_FDBK/4,this.RS_GF_FDBK=333,this.SK_STEP=33686018,this.SK_BUMP=16843009,this.SK_ROTL=9}return Global}(),G=new Global,exports.TwoFish=TwoFish=function(_super){function TwoFish(key){this._key=key.clone(),this.gMDS0=[],this.gMDS1=[],this.gMDS2=[],this.gMDS3=[],this.gSubKeys=[],this.gSBox=[],this.k64Cnt=0,this._doReset()}return __extends(TwoFish,_super),TwoFish.blockSize=4*4,TwoFish.prototype.blockSize=TwoFish.blockSize,TwoFish.keySize=256/8,TwoFish.prototype.keySize=TwoFish.keySize,TwoFish.ivSize=TwoFish.blockSize,TwoFish.prototype.ivSize=TwoFish.ivSize,TwoFish.prototype.getByte=function(x,n){return x>>>n*8&255},TwoFish.prototype.switchEndianness=function(word){return(word&255)<<24|(word>>8&255)<<16|(word>>16&255)<<8|word>>24&255},TwoFish.prototype.LFSR1=function(x){return x>>1^((x&1)===0?0:G.GF256_FDBK_2)},TwoFish.prototype.LFSR2=function(x){return x>>2^((x&2)===0?0:G.GF256_FDBK_2)^((x&1)===0?0:G.GF256_FDBK_4)},TwoFish.prototype.Mx_X=function(x){return x^this.LFSR2(x)},TwoFish.prototype.Mx_Y=function(x){return x^this.LFSR1(x)^this.LFSR2(x)},TwoFish.prototype.RS_rem=function(x){var b,g2,g3;return b=x>>>24&255,g2=(b<<1^((b&128)===0?0:G.RS_GF_FDBK))&255,g3=b>>>1^((b&1)===0?0:G.RS_GF_FDBK>>>1)^g2,x<<8^g3<<24^g2<<16^g3<<8^b},TwoFish.prototype.RS_MDS_Encode=function(k0,k1){var i,r,_i,_j;for(r=k1,i=_i=0;_i<4;i=++_i)r=this.RS_rem(r);for(r^=k0,i=_j=0;_j<4;i=++_j)r=this.RS_rem(r);return r},TwoFish.prototype.F32=function(x,k32){var b0,b1,b2,b3,k0,k1,k2,k3,m,res;return b0=this.getByte(x,0),b1=this.getByte(x,1),b2=this.getByte(x,2),b3=this.getByte(x,3),k0=k32[0],k1=k32[1],k2=k32[2],k3=k32[3],m=this.k64Cnt&3,res=m===1?this.gMDS0[G.P[G.P_01][b0]&255^this.getByte(k0,0)]^this.gMDS1[G.P[G.P_11][b1]&255^this.getByte(k0,1)]^this.gMDS2[G.P[G.P_21][b2]&255^this.getByte(k0,2)]^this.gMDS3[G.P[G.P_31][b3]&255^this.getByte(k0,3)]:(m===0?(b0=G.P[G.P_04][b0]&255^this.getByte(k3,0),b1=G.P[G.P_14][b1]&255^this.getByte(k3,1),b2=G.P[G.P_24][b2]&255^this.getByte(k3,2),b3=G.P[G.P_34][b3]&255^this.getByte(k3,3)):void 0,m===0||m===3?(b0=G.P[G.P_03][b0]&255^this.getByte(k2,0),b1=G.P[G.P_13][b1]&255^this.getByte(k2,1),b2=G.P[G.P_23][b2]&255^this.getByte(k2,2),b3=G.P[G.P_33][b3]&255^this.getByte(k2,3)):void 0,this.gMDS0[G.P[G.P_01][G.P[G.P_02][b0]&255^this.getByte(k1,0)]&255^this.getByte(k0,0)]^this.gMDS1[G.P[G.P_11][G.P[G.P_12][b1]&255^this.getByte(k1,1)]&255^this.getByte(k0,1)]^this.gMDS2[G.P[G.P_21][G.P[G.P_22][b2]&255^this.getByte(k1,2)]&255^this.getByte(k0,2)]^this.gMDS3[G.P[G.P_31][G.P[G.P_32][b3]&255^this.getByte(k1,3)]&255^this.getByte(k0,3)]),res},TwoFish.prototype.Fe32_0=function(x){return this.gSBox[0+2*(x&255)]^this.gSBox[1+2*(x>>>8&255)]^this.gSBox[512+2*(x>>>16&255)]^this.gSBox[513+2*(x>>>24&255)]},TwoFish.prototype.Fe32_3=function(x){return this.gSBox[0+2*(x>>>24&255)]^this.gSBox[1+2*(x&255)]^this.gSBox[512+2*(x>>>8&255)]^this.gSBox[513+2*(x>>>16&255)]},TwoFish.prototype._doReset=function(){var A,B,b0,b1,b2,b3,i,j,k0,k1,k2,k3,k32e,k32o,m,m1,mX,mY,p,q,sBoxKeys,_i,_j,_k,_l,_ref,_ref1,_results;if(k32e=[],k32o=[],sBoxKeys=[],m1=[],mX=[],mY=[],this.k64Cnt=this._key.words.length/2,this.k64Cnt<1)throw'Key size less than 64 bits';if(this.k64Cnt>4)throw'Key size larger than 256 bits';for(i=_i=0;_i<256;i=++_i)j=G.P[0][i]&255,m1[0]=j,mX[0]=this.Mx_X(j)&255,mY[0]=this.Mx_Y(j)&255,j=G.P[1][i]&255,m1[1]=j,mX[1]=this.Mx_X(j)&255,mY[1]=this.Mx_Y(j)&255,this.gMDS0[i]=m1[G.P_00]|mX[G.P_00]<<8|mY[G.P_00]<<16|mY[G.P_00]<<24,this.gMDS1[i]=mY[G.P_10]|mY[G.P_10]<<8|mX[G.P_10]<<16|m1[G.P_10]<<24,this.gMDS2[i]=mX[G.P_20]|mY[G.P_20]<<8|m1[G.P_20]<<16|mY[G.P_20]<<24,this.gMDS3[i]=mX[G.P_30]|m1[G.P_30]<<8|mY[G.P_30]<<16|mX[G.P_30]<<24;for(i=_j=0,_ref=this.k64Cnt;0<=_ref?_j<_ref:_j>_ref;i=0<=_ref?++_j:--_j)p=i*2,k32e[i]=this.switchEndianness(this._key.words[p]),k32o[i]=this.switchEndianness(this._key.words[p+1]),sBoxKeys[this.k64Cnt-1-i]=this.RS_MDS_Encode(k32e[i],k32o[i]);for(i=_k=0,_ref1=40/2;0<=_ref1?_k<_ref1:_k>_ref1;i=0<=_ref1?++_k:--_k)q=i*G.SK_STEP,A=this.F32(q,k32e),B=this.F32(q+G.SK_BUMP,k32o),B=B<<8|B>>>24,A+=B,this.gSubKeys[i*2]=A,A+=B,this.gSubKeys[i*2+1]=A<<G.SK_ROTL|A>>>32-G.SK_ROTL;for(k0=sBoxKeys[0],k1=sBoxKeys[1],k2=sBoxKeys[2],k3=sBoxKeys[3],this.gSBox=[],_results=[],i=_l=0;_l<256;i=++_l)b0=b1=b2=b3=i,m=this.k64Cnt&3,m===1?(this.gSBox[i*2]=this.gMDS0[G.P[G.P_01][b0]&255^this.getByte(k0,0)],this.gSBox[i*2+1]=this.gMDS1[G.P[G.P_11][b1]&255^this.getByte(k0,1)],this.gSBox[i*2+512]=this.gMDS2[G.P[G.P_21][b2]&255^this.getByte(k0,2)],_results.push(this.gSBox[i*2+513]=this.gMDS3[G.P[G.P_31][b3]&255^this.getByte(k0,3)])):(m===0&&(b0=G.P[G.P_04][b0]&255^this.getByte(k3,0),b1=G.P[G.P_14][b1]&255^this.getByte(k3,1),b2=G.P[G.P_24][b2]&255^this.getByte(k3,2),b3=G.P[G.P_34][b3]&255^this.getByte(k3,3)),(m===0||m===3)&&(b0=G.P[G.P_03][b0]&255^this.getByte(k2,0),b1=G.P[G.P_13][b1]&255^this.getByte(k2,1),b2=G.P[G.P_23][b2]&255^this.getByte(k2,2),b3=G.P[G.P_33][b3]&255^this.getByte(k2,3)),this.gSBox[i*2]=this.gMDS0[G.P[G.P_01][G.P[G.P_02][b0]&255^this.getByte(k1,0)]&255^this.getByte(k0,0)],this.gSBox[i*2+1]=this.gMDS1[G.P[G.P_11][G.P[G.P_12][b1]&255^this.getByte(k1,1)]&255^this.getByte(k0,1)],this.gSBox[i*2+512]=this.gMDS2[G.P[G.P_21][G.P[G.P_22][b2]&255^this.getByte(k1,2)]&255^this.getByte(k0,2)],_results.push(this.gSBox[i*2+513]=this.gMDS3[G.P[G.P_31][G.P[G.P_32][b3]&255^this.getByte(k1,3)]&255^this.getByte(k0,3)]));return _results},TwoFish.prototype.scrub=function(){return scrub_vec(this.gSubKeys),scrub_vec(this.gSBox),this._key.scrub()},TwoFish.prototype.decryptBlock=function(M,offset){var k,r,t0,t1,x0,x1,x2,x3,_i;for(offset==null&&(offset=0),x2=this.switchEndianness(M[offset])^this.gSubKeys[4],x3=this.switchEndianness(M[offset+1])^this.gSubKeys[5],x0=this.switchEndianness(M[offset+2])^this.gSubKeys[6],x1=this.switchEndianness(M[offset+3])^this.gSubKeys[7],k=8+2*16-1,r=_i=0;_i<16;r=_i+=2)t0=this.Fe32_0(x2),t1=this.Fe32_3(x3),x1^=t0+2*t1+this.gSubKeys[k--],x0=(x0<<1|x0>>>31)^t0+t1+this.gSubKeys[k--],x1=x1>>>1|x1<<31,t0=this.Fe32_0(x0),t1=this.Fe32_3(x1),x3^=t0+2*t1+this.gSubKeys[k--],x2=(x2<<1|x2>>>31)^t0+t1+this.gSubKeys[k--],x3=x3>>>1|x3<<31;return M[offset]=this.switchEndianness(x0^this.gSubKeys[0]),M[offset+1]=this.switchEndianness(x1^this.gSubKeys[1]),M[offset+2]=this.switchEndianness(x2^this.gSubKeys[2]),M[offset+3]=this.switchEndianness(x3^this.gSubKeys[3])},TwoFish.prototype.encryptBlock=function(M,offset){var k,r,t0,t1,x0,x1,x2,x3,_i;for(offset==null&&(offset=0),x0=this.switchEndianness(M[offset])^this.gSubKeys[0],x1=this.switchEndianness(M[offset+1])^this.gSubKeys[1],x2=this.switchEndianness(M[offset+2])^this.gSubKeys[2],x3=this.switchEndianness(M[offset+3])^this.gSubKeys[3],k=8,r=_i=0;_i<16;r=_i+=2)t0=this.Fe32_0(x0),t1=this.Fe32_3(x1),x2^=t0+t1+this.gSubKeys[k++],x2=x2>>>1|x2<<31,x3=(x3<<1|x3>>>31)^t0+2*t1+this.gSubKeys[k++],t0=this.Fe32_0(x2),t1=this.Fe32_3(x3),x0^=t0+t1+this.gSubKeys[k++],x0=x0>>>1|x0<<31,x1=(x1<<1|x1>>>31)^t0+2*t1+this.gSubKeys[k++];return M[offset]=this.switchEndianness(x2^this.gSubKeys[4]),M[offset+1]=this.switchEndianness(x3^this.gSubKeys[5]),M[offset+2]=this.switchEndianness(x0^this.gSubKeys[6]),M[offset+3]=this.switchEndianness(x1^this.gSubKeys[7])},TwoFish}(BlockCipher)}).call(this)},{'./algbase':174,'./util':195}],195:[function(require,module,exports){(function(){var default_delay,iced,uint_max,__iced_k,__iced_k_noop;iced=require('iced-runtime'),__iced_k=__iced_k_noop=function(){},uint_max=4294967296,exports.fixup_uint32=function(x){var ret,x_pos;return ret=x>uint_max||x<0?(x_pos=_Mathabs2(x)%uint_max,x<0?uint_max-x_pos:x_pos):x,ret},exports.scrub_buffer=function(b){var i,n_full_words;for(n_full_words=b.length>>2,i=0;i<n_full_words;)b.writeUInt32LE(0,i),i+=4;for(;i<b.length;)b.writeUInt8(0,i),i++;return!1},exports.scrub_vec=function(v){var i,_i,_ref;for(i=_i=0,_ref=v.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i)v[i]=0;return!1},exports.default_delay=default_delay=function(i,n,cb){var ___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),function(_this){return function(__iced_k){typeof setImmediate!=='undefined'&&setImmediate!==null?function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/util.iced'}),setImmediate(__iced_deferrals.defer({lineno:37})),__iced_deferrals._fulfill()}(__iced_k):function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/util.iced'}),setTimeout(__iced_deferrals.defer({lineno:39}),1),__iced_deferrals._fulfill()}(__iced_k)}}(this)(function(_this){return function(){return cb()}}(this))},exports.buffer_cmp_ule=function(b1,b2){var I,J,i,j,x,y;for(i=j=0,I=b1.length,J=b2.length;i<I&&b1.readUInt8(i)===0;)i++;for(;j<J&&b2.readUInt8(j)===0;)j++;if(I-i>J-j)return 1;if(J-j>I-i)return-1;for(;i<I;){if((x=b1.readUInt8(i))<(y=b2.readUInt8(j)))return-1;if(y<x)return 1;i++,j++}return 0},exports.bulk=function(n_input_bytes,_arg,_arg1){var call_ph,cb,default_n,delay,finalize,i,left,n,n_words,progress_hook,ret,total_words,update,what,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),update=_arg.update,finalize=_arg.finalize,default_n=_arg.default_n,delay=_arg1.delay,n=_arg1.n,cb=_arg1.cb,what=_arg1.what,progress_hook=_arg1.progress_hook,i=0,left=0,total_words=_Mathceil4(n_input_bytes/4),delay||(delay=default_delay),n||(n=default_n),call_ph=function(i){return typeof progress_hook==='function'?progress_hook({what:what,i:i,total:total_words}):void 0},call_ph(0),function(_this){return function(__iced_k){var _results,_while;_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},(left=total_words-i)>0?void(n_words=_Mathmin5(n,left),update(i,i+n_words),call_ph(i),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/keybase/triplesec/src/util.iced',funcname:'bulk'}),delay(i,total_words,__iced_deferrals.defer({lineno:97})),__iced_deferrals._fulfill()}(function(){return _next(i+=n_words)})):_break()},_while(__iced_k)}}(this)(function(_this){return function(){return call_ph(total_words),ret=finalize(),cb(ret)}}(this))}}).call(this)},{'iced-runtime':118}],196:[function(require,module,exports){(function(Buffer){(function(){var WordArray,X64Word,X64WordArray,buffer_to_ui8a,endian_reverse,ui8a_to_buffer,util;util=require('./util'),buffer_to_ui8a=function(b){var i,ret,_i,_ref;for(ret=new Uint8Array(b.length),i=_i=0,_ref=b.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i)ret[i]=b.readUInt8(i);return ret},ui8a_to_buffer=function(v){var i,ret,_i,_ref;for(ret=new Buffer(v.length),i=_i=0,_ref=v.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i)ret.writeUInt8(v[i],i);return ret},endian_reverse=function(x){return x>>>24&255|(x>>>16&255)<<8|(x>>>8&255)<<16|(x&255)<<24},exports.WordArray=WordArray=function(){function WordArray(words,sigBytes){this.words=words||[],this.sigBytes=sigBytes==null?this.words.length*4:sigBytes}return WordArray.prototype.concat=function(wordArray){var i,thatByte,thatSigBytes,thatWords,_i;if(thatWords=wordArray.words,thatSigBytes=wordArray.sigBytes,this.clamp(),this.sigBytes%4)for(i=_i=0;0<=thatSigBytes?_i<thatSigBytes:_i>thatSigBytes;i=0<=thatSigBytes?++_i:--_i)thatByte=thatWords[i>>>2]>>>24-i%4*8&255,this.words[this.sigBytes+i>>>2]|=thatByte<<24-(this.sigBytes+i)%4*8;else this.words=this.words.concat(thatWords);return this.sigBytes+=thatSigBytes,this},WordArray.prototype.clamp=function(){return this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=_Mathceil4(this.sigBytes/4),this},WordArray.prototype.clone=function(){return new WordArray(this.words.slice(0),this.sigBytes)},WordArray.prototype.to_buffer=function(){var ch,out,p,w,_i,_len,_ref;for(out=new Buffer(this.sigBytes),p=0,_ref=this.words,(_i=0,_len=_ref.length);_i<_len;_i++)(w=_ref[_i],!!(this.sigBytes-p>=4))&&(w=util.fixup_uint32(w),out.writeUInt32BE(w,p),p+=4);for(;p<this.sigBytes;)ch=this.words[p>>>2]>>>24-p%4*8&255,out.writeUInt8(ch,p),p++;return out},WordArray.prototype.endian_reverse=function(){var i,w,_i,_len,_ref;for(_ref=this.words,i=_i=0,_len=_ref.length;_i<_len;i=++_i)w=_ref[i],this.words[i]=endian_reverse(w);return this},WordArray.prototype.split=function(n){var i,out,sz;if(this.sigBytes%4!==0||this.words.length%n!==0)throw new Error('bad key alignment');return sz=this.words.length/n,out=function(){var _i,_ref,_results;for(_results=[],i=_i=0,_ref=this.words.length;sz>0?_i<_ref:_i>_ref;i=_i+=sz)_results.push(new WordArray(this.words.slice(i,i+sz)));return _results}.call(this),out},WordArray.prototype.to_utf8=function(){return this.to_buffer().toString('utf8')},WordArray.prototype.to_hex=function(){return this.to_buffer().toString('hex')},WordArray.prototype.to_ui8a=function(){return buffer_to_ui8a(this.to_buffer())},WordArray.alloc=function(b){return Buffer.isBuffer(b)?WordArray.from_buffer(b):typeof b==='object'&&b instanceof WordArray?b:typeof b==='string'?WordArray.from_hex(b):null},WordArray.from_buffer=function(b){var ch,last,p,words;for(words=[],p=0;b.length-p>=4;)words.push(b.readUInt32BE(p)),p+=4;if(p<b.length){for(last=0;p<b.length;)ch=b.readUInt8(p),last|=ch<<24-p%4*8,p++;last=util.fixup_uint32(last),words.push(last)}return new WordArray(words,b.length)},WordArray.from_buffer_le=function(b){var ch,last,p,words;for(words=[],p=0;b.length-p>=4;)words.push(b.readUInt32LE(p)),p+=4;if(p<b.length){for(last=0;p<b.length;)ch=b.readUInt8(p),last|=ch<<p%4*8,p++;last=util.fixup_uint32(last),words.push(last)}return new WordArray(words,b.length)},WordArray.from_utf8=function(s){return WordArray.from_buffer(new Buffer(s,'utf8'))},WordArray.from_utf8_le=function(s){return WordArray.from_buffer_le(new Buffer(s,'utf8'))},WordArray.from_hex=function(s){return WordArray.from_buffer(new Buffer(s,'hex'))},WordArray.from_hex_le=function(s){return WordArray.from_buffer_le(new Buffer(s,'hex'))},WordArray.from_ui8a=function(v){return WordArray.from_buffer(ui8a_to_buffer(v))},WordArray.from_i32a=function(v){return new WordArray(Array.apply([],v))},WordArray.prototype.equal=function(wa){var i,ret,w,_i,_len,_ref;if(ret=!0,wa.sigBytes!==this.sigBytes)ret=!1;else for(_ref=this.words,i=_i=0,_len=_ref.length;_i<_len;i=++_i)w=_ref[i],util.fixup_uint32(w)!==util.fixup_uint32(wa.words[i])&&(ret=!1);return ret},WordArray.prototype.xor=function(wa2,_arg){var dst_offset,i,n_words,src_offset,tmp,_i;if(dst_offset=_arg.dst_offset,src_offset=_arg.src_offset,n_words=_arg.n_words,!dst_offset&&(dst_offset=0),!src_offset&&(src_offset=0),n_words==null&&(n_words=wa2.words.length-src_offset),this.words.length<dst_offset+n_words)throw new Error('dest range exceeded ('+this.words.length+' < '+(dst_offset+n_words)+')');if(wa2.words.length<src_offset+n_words)throw new Error('source range exceeded');for(i=_i=0;0<=n_words?_i<n_words:_i>n_words;i=0<=n_words?++_i:--_i)tmp=this.words[dst_offset+i]^wa2.words[src_offset+i],this.words[dst_offset+i]=util.fixup_uint32(tmp);return this},WordArray.prototype.truncate=function(n_bytes){var n_words;if(!(n_bytes<=this.sigBytes))throw new Error('Cannot truncate: '+n_bytes+' > '+this.sigBytes);return n_words=_Mathceil4(n_bytes/4),new WordArray(this.words.slice(0,n_words),n_bytes)},WordArray.prototype.unshift=function(n_words){var ret;return this.words.length>=n_words?(ret=this.words.splice(0,n_words),this.sigBytes-=n_words*4,new WordArray(ret)):null},WordArray.prototype.is_scrubbed=function(){var w,_i,_len,_ref;for(_ref=this.words,_i=0,_len=_ref.length;_i<_len;_i++)if(w=_ref[_i],w!==0)return!1;return!0},WordArray.prototype.scrub=function(){return util.scrub_vec(this.words)},WordArray.prototype.cmp_ule=function(wa2){return util.buffer_cmp_ule(this.to_buffer(),wa2.to_buffer())},WordArray.prototype.slice=function(low,hi){var n,sb;if(n=this.words.length,!(low<hi&&hi<=n))throw new Error('Bad WordArray slice ['+low+','+hi+')] when only '+n+' avail');return sb=(hi-low)*4,hi===n&&(sb-=n*4-this.sigBytes),new WordArray(this.words.slice(low,hi),sb)},WordArray}(),exports.X64Word=X64Word=function(){function X64Word(high,low){this.high=high,this.low=low}return X64Word.prototype.clone=function(){return new X64Word(this.high,this.low)},X64Word}(),exports.X64WordArray=X64WordArray=function(){function X64WordArray(words,sigBytes){this.sigBytes=sigBytes,this.words=words||[],!this.sigBytes&&(this.sigBytes=this.words.length*8)}return X64WordArray.prototype.toX32=function(){var v,w,_i,_len,_ref;for(v=[],_ref=this.words,(_i=0,_len=_ref.length);_i<_len;_i++)w=_ref[_i],v.push(w.high),v.push(w.low);return new WordArray(v,this.sigBytes)},X64WordArray.prototype.clone=function(){var w;return new X64WordArray(function(){var _i,_len,_ref,_results;for(_ref=this.words,_results=[],(_i=0,_len=_ref.length);_i<_len;_i++)w=_ref[_i],_results.push(w.clone());return _results}.call(this),this.sigBytes)},X64WordArray}(),exports.buffer_to_ui8a=buffer_to_ui8a,exports.ui8a_to_buffer=ui8a_to_buffer,exports.endian_reverse=endian_reverse}).call(this)}).call(this,require('buffer').Buffer)},{'./util':195,'buffer':80}],197:[function(require,module,exports){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},Lock,NamedLock,Table,iced,__iced_k,__iced_k_noop;iced=require('iced-runtime'),__iced_k=__iced_k_noop=function(){},exports.Lock=Lock=function(){function Lock(){this._open=!0,this._waiters=[]}return Lock.prototype.acquire=function(cb){return this._open?(this._open=!1,cb()):this._waiters.push(cb)},Lock.prototype.release=function(){var w;return this._waiters.length?(w=this._waiters.shift(),w()):this._open=!0},Lock.prototype.open=function(){return this._open},Lock}(),NamedLock=function(_super){function NamedLock(tab,name){this.tab=tab,this.name=name,NamedLock.__super__.constructor.call(this),this.refs=0}return __extends(NamedLock,_super),NamedLock.prototype.incref=function(){return++this.refs},NamedLock.prototype.decref=function(){return--this.refs},NamedLock.prototype.release=function(){if(NamedLock.__super__.release.call(this),this.decref()===0)return delete this.tab.locks[this.name]},NamedLock}(Lock),exports.Table=Table=function(){function Table(){this.locks={}}return Table.prototype.create=function(name){var l;return l=new NamedLock(this,name),this.locks[name]=l},Table.prototype.acquire=function(name,cb,wait){var l,was_open,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),l=this.locks[name]||this.create(name),was_open=l._open,l.incref(),function(_this){return function(__iced_k){return wait||l._open?void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/home/max/src/iced/iced-lock/index.iced',funcname:'Table.acquire'}),l.acquire(__iced_deferrals.defer({lineno:47})),__iced_deferrals._fulfill()}(__iced_k):__iced_k(l=null)}}(this)(function(_this){return function(){return cb(l,was_open)}}(this))},Table.prototype.lookup=function(name){return this.locks[name]},Table}()}).call(this)},{'iced-runtime':118}],198:[function(require,module,exports){(function(){var Generator,iced,__iced_k,__iced_k_noop;iced=require('iced-runtime'),__iced_k=__iced_k_noop=function(){},Generator=Generator=function(){function Generator(opts){opts=opts||{},this.lazy_loop_delay=opts.lazy_loop_delay||30,this.loop_delay=opts.loop_delay||5,this.work_min=opts.work_min||1,this.auto_stop_bits=opts.auto_stop_bits||4096,this.max_bits_per_delta=opts.max_bits_per_delta||4,this.auto_stop=!opts.auto_stop||opts.auto_stop,this.entropies=[],this.running=!0,this.is_generating=!1,this.timer_race_loop()}return Generator.prototype.generate=function(bits_wanted,cb){var e,harvested_bits,res,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),this.is_generating=!0,!this.running&&this.resume(),harvested_bits=0,res=[],function(_this){return function(__iced_k){var _results,_while;_results=[],_while=function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},harvested_bits<bits_wanted?void function(__iced_k){return _this.entropies.length?(e=_this.entropies.splice(0,1)[0],harvested_bits+=e[1],__iced_k(res.push(e[0]))):void function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/chris/git/more-entropy/src/generator.iced',funcname:'Generator.generate'}),_this.delay(__iced_deferrals.defer({lineno:28})),__iced_deferrals._fulfill()}(__iced_k)}(_next):_break()},_while(__iced_k)}}(this)(function(_this){return function(){return _this.auto_stop&&_this.stop(),_this.is_generating=!1,cb(res)}}(this))},Generator.prototype.stop=function(){return this.running=!1},Generator.prototype.resume=function(){return this.running=!0,this.timer_race_loop()},Generator.prototype.reset=function(){return this.entropies=[],this.total_bits=0},Generator.prototype.count_unused_bits=function(){var bits,e,_i,_len,_ref;for(bits=0,_ref=this.entropies,(_i=0,_len=_ref.length);_i<_len;_i++)e=_ref[_i],bits+=e[1];return bits},Generator.prototype.delay=function(cb){var delay,___iced_passed_deferral,__iced_deferrals,__iced_k;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),delay=this.is_generating?this.loop_delay:this.lazy_loop_delay,function(_this){return function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/chris/git/more-entropy/src/generator.iced',funcname:'Generator.delay'}),setTimeout(__iced_deferrals.defer({lineno:50}),delay),__iced_deferrals._fulfill()}}(this)(function(_this){return function(){return cb()}}(this))},Generator.prototype.timer_race_loop=function(){var ___iced_passed_deferral,__iced_k,_results,_while;__iced_k=__iced_k_noop,___iced_passed_deferral=iced.findDeferral(arguments),this._last_count=null,_results=[],_while=function(_this){var count,delta,entropy,v,__iced_deferrals;return function(__iced_k){var _break,_continue,_next;return _break=function(){return __iced_k(_results)},_continue=function(){return iced.trampoline(function(){return _while(__iced_k)})},_next=function(__iced_next_arg){return _results.push(__iced_next_arg),_continue()},_this.running?void(_this.count_unused_bits()<_this.auto_stop_bits&&(count=_this.millisecond_count(),_this._last_count!=null&&(delta=count-_this._last_count)&&(entropy=_Mathfloor3(_this.log_2(_Mathabs2(delta))),entropy=_Mathmin5(_this.max_bits_per_delta,entropy),v=[delta,entropy],_this.entropies.push(v)),_this._last_count=count),function(__iced_k){__iced_deferrals=new iced.Deferrals(__iced_k,{parent:___iced_passed_deferral,filename:'/Users/chris/git/more-entropy/src/generator.iced',funcname:'Generator.timer_race_loop'}),_this.delay(__iced_deferrals.defer({lineno:64})),__iced_deferrals._fulfill()}(_next)):_break()}}(this),_while(__iced_k)},Generator.prototype.log_2=function(x){return _Mathlog(x)/_MathLN},Generator.prototype.millisecond_count=function(){var d,i,x;for(d=Date.now(),i=x=0;Date.now()<d+this.work_min+1;)i++,x=_Mathsin(_Mathsqrt(_Mathlog(i+x)));return i},Generator}(),typeof window!=='undefined'&&window!==null&&(window.Generator=Generator),typeof exports!=='undefined'&&exports!==null&&(exports.Generator=Generator)}).call(this)},{'iced-runtime':118}],199:[function(require,module,exports){(function(){exports.Generator=require('../lib/generator').Generator}).call(this)},{'../lib/generator':198}],200:[function(require,module,exports){(function(Buffer){(function(nacl){'use strict';function ts64(x,i,h,l){x[i]=h>>24&255,x[i+1]=h>>16&255,x[i+2]=h>>8&255,x[i+3]=h&255,x[i+4]=l>>24&255,x[i+5]=l>>16&255,x[i+6]=l>>8&255,x[i+7]=l&255}function vn(x,xi,y,yi,n){var d=0,i;for(i=0;i<n;i++)d|=x[xi+i]^y[yi+i];return(1&d-1>>>8)-1}function crypto_verify_16(x,xi,y,yi){return vn(x,xi,y,yi,16)}function crypto_verify_32(x,xi,y,yi){return vn(x,xi,y,yi,32)}function core_salsa20(o,p,k,c){var j0=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,j1=k[0]&255|(k[1]&255)<<8|(k[2]&255)<<16|(k[3]&255)<<24,j2=k[4]&255|(k[5]&255)<<8|(k[6]&255)<<16|(k[7]&255)<<24,j3=k[8]&255|(k[9]&255)<<8|(k[10]&255)<<16|(k[11]&255)<<24,j4=k[12]&255|(k[13]&255)<<8|(k[14]&255)<<16|(k[15]&255)<<24,j5=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,j6=p[0]&255|(p[1]&255)<<8|(p[2]&255)<<16|(p[3]&255)<<24,j7=p[4]&255|(p[5]&255)<<8|(p[6]&255)<<16|(p[7]&255)<<24,j8=p[8]&255|(p[9]&255)<<8|(p[10]&255)<<16|(p[11]&255)<<24,j9=p[12]&255|(p[13]&255)<<8|(p[14]&255)<<16|(p[15]&255)<<24,j10=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,j11=k[16]&255|(k[17]&255)<<8|(k[18]&255)<<16|(k[19]&255)<<24,j12=k[20]&255|(k[21]&255)<<8|(k[22]&255)<<16|(k[23]&255)<<24,j13=k[24]&255|(k[25]&255)<<8|(k[26]&255)<<16|(k[27]&255)<<24,j14=k[28]&255|(k[29]&255)<<8|(k[30]&255)<<16|(k[31]&255)<<24,j15=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,u;for(var i=0;i<20;i+=2)u=x0+x12|0,x4^=u<<7|u>>>32-7,u=x4+x0|0,x8^=u<<9|u>>>32-9,u=x8+x4|0,x12^=u<<13|u>>>32-13,u=x12+x8|0,x0^=u<<18|u>>>32-18,u=x5+x1|0,x9^=u<<7|u>>>32-7,u=x9+x5|0,x13^=u<<9|u>>>32-9,u=x13+x9|0,x1^=u<<13|u>>>32-13,u=x1+x13|0,x5^=u<<18|u>>>32-18,u=x10+x6|0,x14^=u<<7|u>>>32-7,u=x14+x10|0,x2^=u<<9|u>>>32-9,u=x2+x14|0,x6^=u<<13|u>>>32-13,u=x6+x2|0,x10^=u<<18|u>>>32-18,u=x15+x11|0,x3^=u<<7|u>>>32-7,u=x3+x15|0,x7^=u<<9|u>>>32-9,u=x7+x3|0,x11^=u<<13|u>>>32-13,u=x11+x7|0,x15^=u<<18|u>>>32-18,u=x0+x3|0,x1^=u<<7|u>>>32-7,u=x1+x0|0,x2^=u<<9|u>>>32-9,u=x2+x1|0,x3^=u<<13|u>>>32-13,u=x3+x2|0,x0^=u<<18|u>>>32-18,u=x5+x4|0,x6^=u<<7|u>>>32-7,u=x6+x5|0,x7^=u<<9|u>>>32-9,u=x7+x6|0,x4^=u<<13|u>>>32-13,u=x4+x7|0,x5^=u<<18|u>>>32-18,u=x10+x9|0,x11^=u<<7|u>>>32-7,u=x11+x10|0,x8^=u<<9|u>>>32-9,u=x8+x11|0,x9^=u<<13|u>>>32-13,u=x9+x8|0,x10^=u<<18|u>>>32-18,u=x15+x14|0,x12^=u<<7|u>>>32-7,u=x12+x15|0,x13^=u<<9|u>>>32-9,u=x13+x12|0,x14^=u<<13|u>>>32-13,u=x14+x13|0,x15^=u<<18|u>>>32-18;x0=x0+j0|0,x1=x1+j1|0,x2=x2+j2|0,x3=x3+j3|0,x4=x4+j4|0,x5=x5+j5|0,x6=x6+j6|0,x7=x7+j7|0,x8=x8+j8|0,x9=x9+j9|0,x10=x10+j10|0,x11=x11+j11|0,x12=x12+j12|0,x13=x13+j13|0,x14=x14+j14|0,x15=x15+j15|0,o[0]=x0>>>0&255,o[1]=x0>>>8&255,o[2]=x0>>>16&255,o[3]=x0>>>24&255,o[4]=x1>>>0&255,o[5]=x1>>>8&255,o[6]=x1>>>16&255,o[7]=x1>>>24&255,o[8]=x2>>>0&255,o[9]=x2>>>8&255,o[10]=x2>>>16&255,o[11]=x2>>>24&255,o[12]=x3>>>0&255,o[13]=x3>>>8&255,o[14]=x3>>>16&255,o[15]=x3>>>24&255,o[16]=x4>>>0&255,o[17]=x4>>>8&255,o[18]=x4>>>16&255,o[19]=x4>>>24&255,o[20]=x5>>>0&255,o[21]=x5>>>8&255,o[22]=x5>>>16&255,o[23]=x5>>>24&255,o[24]=x6>>>0&255,o[25]=x6>>>8&255,o[26]=x6>>>16&255,o[27]=x6>>>24&255,o[28]=x7>>>0&255,o[29]=x7>>>8&255,o[30]=x7>>>16&255,o[31]=x7>>>24&255,o[32]=x8>>>0&255,o[33]=x8>>>8&255,o[34]=x8>>>16&255,o[35]=x8>>>24&255,o[36]=x9>>>0&255,o[37]=x9>>>8&255,o[38]=x9>>>16&255,o[39]=x9>>>24&255,o[40]=x10>>>0&255,o[41]=x10>>>8&255,o[42]=x10>>>16&255,o[43]=x10>>>24&255,o[44]=x11>>>0&255,o[45]=x11>>>8&255,o[46]=x11>>>16&255,o[47]=x11>>>24&255,o[48]=x12>>>0&255,o[49]=x12>>>8&255,o[50]=x12>>>16&255,o[51]=x12>>>24&255,o[52]=x13>>>0&255,o[53]=x13>>>8&255,o[54]=x13>>>16&255,o[55]=x13>>>24&255,o[56]=x14>>>0&255,o[57]=x14>>>8&255,o[58]=x14>>>16&255,o[59]=x14>>>24&255,o[60]=x15>>>0&255,o[61]=x15>>>8&255,o[62]=x15>>>16&255,o[63]=x15>>>24&255}function core_hsalsa20(o,p,k,c){var j0=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,j1=k[0]&255|(k[1]&255)<<8|(k[2]&255)<<16|(k[3]&255)<<24,j2=k[4]&255|(k[5]&255)<<8|(k[6]&255)<<16|(k[7]&255)<<24,j3=k[8]&255|(k[9]&255)<<8|(k[10]&255)<<16|(k[11]&255)<<24,j4=k[12]&255|(k[13]&255)<<8|(k[14]&255)<<16|(k[15]&255)<<24,j5=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,j6=p[0]&255|(p[1]&255)<<8|(p[2]&255)<<16|(p[3]&255)<<24,j7=p[4]&255|(p[5]&255)<<8|(p[6]&255)<<16|(p[7]&255)<<24,j8=p[8]&255|(p[9]&255)<<8|(p[10]&255)<<16|(p[11]&255)<<24,j9=p[12]&255|(p[13]&255)<<8|(p[14]&255)<<16|(p[15]&255)<<24,j10=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,j11=k[16]&255|(k[17]&255)<<8|(k[18]&255)<<16|(k[19]&255)<<24,j12=k[20]&255|(k[21]&255)<<8|(k[22]&255)<<16|(k[23]&255)<<24,j13=k[24]&255|(k[25]&255)<<8|(k[26]&255)<<16|(k[27]&255)<<24,j14=k[28]&255|(k[29]&255)<<8|(k[30]&255)<<16|(k[31]&255)<<24,j15=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,u;for(var i=0;i<20;i+=2)u=x0+x12|0,x4^=u<<7|u>>>32-7,u=x4+x0|0,x8^=u<<9|u>>>32-9,u=x8+x4|0,x12^=u<<13|u>>>32-13,u=x12+x8|0,x0^=u<<18|u>>>32-18,u=x5+x1|0,x9^=u<<7|u>>>32-7,u=x9+x5|0,x13^=u<<9|u>>>32-9,u=x13+x9|0,x1^=u<<13|u>>>32-13,u=x1+x13|0,x5^=u<<18|u>>>32-18,u=x10+x6|0,x14^=u<<7|u>>>32-7,u=x14+x10|0,x2^=u<<9|u>>>32-9,u=x2+x14|0,x6^=u<<13|u>>>32-13,u=x6+x2|0,x10^=u<<18|u>>>32-18,u=x15+x11|0,x3^=u<<7|u>>>32-7,u=x3+x15|0,x7^=u<<9|u>>>32-9,u=x7+x3|0,x11^=u<<13|u>>>32-13,u=x11+x7|0,x15^=u<<18|u>>>32-18,u=x0+x3|0,x1^=u<<7|u>>>32-7,u=x1+x0|0,x2^=u<<9|u>>>32-9,u=x2+x1|0,x3^=u<<13|u>>>32-13,u=x3+x2|0,x0^=u<<18|u>>>32-18,u=x5+x4|0,x6^=u<<7|u>>>32-7,u=x6+x5|0,x7^=u<<9|u>>>32-9,u=x7+x6|0,x4^=u<<13|u>>>32-13,u=x4+x7|0,x5^=u<<18|u>>>32-18,u=x10+x9|0,x11^=u<<7|u>>>32-7,u=x11+x10|0,x8^=u<<9|u>>>32-9,u=x8+x11|0,x9^=u<<13|u>>>32-13,u=x9+x8|0,x10^=u<<18|u>>>32-18,u=x15+x14|0,x12^=u<<7|u>>>32-7,u=x12+x15|0,x13^=u<<9|u>>>32-9,u=x13+x12|0,x14^=u<<13|u>>>32-13,u=x14+x13|0,x15^=u<<18|u>>>32-18;o[0]=x0>>>0&255,o[1]=x0>>>8&255,o[2]=x0>>>16&255,o[3]=x0>>>24&255,o[4]=x5>>>0&255,o[5]=x5>>>8&255,o[6]=x5>>>16&255,o[7]=x5>>>24&255,o[8]=x10>>>0&255,o[9]=x10>>>8&255,o[10]=x10>>>16&255,o[11]=x10>>>24&255,o[12]=x15>>>0&255,o[13]=x15>>>8&255,o[14]=x15>>>16&255,o[15]=x15>>>24&255,o[16]=x6>>>0&255,o[17]=x6>>>8&255,o[18]=x6>>>16&255,o[19]=x6>>>24&255,o[20]=x7>>>0&255,o[21]=x7>>>8&255,o[22]=x7>>>16&255,o[23]=x7>>>24&255,o[24]=x8>>>0&255,o[25]=x8>>>8&255,o[26]=x8>>>16&255,o[27]=x8>>>24&255,o[28]=x9>>>0&255,o[29]=x9>>>8&255,o[30]=x9>>>16&255,o[31]=x9>>>24&255}function crypto_core_salsa20(out,inp,k,c){core_salsa20(out,inp,k,c)}function crypto_core_hsalsa20(out,inp,k,c){core_hsalsa20(out,inp,k,c)}function crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];for(;b>=64;){for(crypto_core_salsa20(x,z,k,sigma),i=0;i<64;i++)c[cpos+i]=m[mpos+i]^x[i];for(u=1,i=8;i<16;i++)u=u+(z[i]&255)|0,z[i]=u&255,u>>>=8;b-=64,cpos+=64,mpos+=64}if(b>0)for(crypto_core_salsa20(x,z,k,sigma),i=0;i<b;i++)c[cpos+i]=m[mpos+i]^x[i];return 0}function crypto_stream_salsa20(c,cpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];for(;b>=64;){for(crypto_core_salsa20(x,z,k,sigma),i=0;i<64;i++)c[cpos+i]=x[i];for(u=1,i=8;i<16;i++)u=u+(z[i]&255)|0,z[i]=u&255,u>>>=8;b-=64,cpos+=64}if(b>0)for(crypto_core_salsa20(x,z,k,sigma),i=0;i<b;i++)c[cpos+i]=x[i];return 0}function crypto_stream(c,cpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);var sn=new Uint8Array(8);for(var i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20(c,cpos,d,sn,s)}function crypto_stream_xor(c,cpos,m,mpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);var sn=new Uint8Array(8);for(var i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s)}function crypto_onetimeauth(out,outpos,m,mpos,n,k){var s=new poly1305(k);return s.update(m,mpos,n),s.finish(out,outpos),0}function crypto_onetimeauth_verify(h,hpos,m,mpos,n,k){var x=new Uint8Array(16);return crypto_onetimeauth(x,0,m,mpos,n,k),crypto_verify_16(h,hpos,x,0)}function crypto_secretbox(c,m,d,n,k){var i;if(d<32)return-1;for(crypto_stream_xor(c,0,m,0,d,n,k),crypto_onetimeauth(c,16,c,32,d-32,c),i=0;i<16;i++)c[i]=0;return 0}function crypto_secretbox_open(m,c,d,n,k){var i;var x=new Uint8Array(32);if(d<32)return-1;if(crypto_stream(x,0,32,n,k),crypto_onetimeauth_verify(c,16,c,32,d-32,x)!==0)return-1;for(crypto_stream_xor(m,0,c,0,d,n,k),i=0;i<32;i++)m[i]=0;return 0}function set25519(r,a){var i;for(i=0;i<16;i++)r[i]=a[i]|0}function car25519(o){var c=1,i,v;for(i=0;i<16;i++)v=o[i]+c+65535,c=_Mathfloor3(v/65536),o[i]=v-c*65536;o[0]+=c-1+37*(c-1)}function sel25519(p,q,b){var c=~(b-1),t;for(var i=0;i<16;i++)t=c&(p[i]^q[i]),p[i]^=t,q[i]^=t}function pack25519(o,n){var i,j,b;var m=gf(),t=gf();for(i=0;i<16;i++)t[i]=n[i];for(car25519(t),car25519(t),car25519(t),j=0;j<2;j++){for(m[0]=t[0]-65517,i=1;i<15;i++)m[i]=t[i]-65535-(m[i-1]>>16&1),m[i-1]&=65535;m[15]=t[15]-32767-(m[14]>>16&1),b=m[15]>>16&1,m[14]&=65535,sel25519(t,m,1-b)}for(i=0;i<16;i++)o[2*i]=t[i]&255,o[2*i+1]=t[i]>>8}function neq25519(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);return pack25519(c,a),pack25519(d,b),crypto_verify_32(c,0,d,0)}function par25519(a){var d=new Uint8Array(32);return pack25519(d,a),d[0]&1}function unpack25519(o,n){var i;for(i=0;i<16;i++)o[i]=n[2*i]+(n[2*i+1]<<8);o[15]&=32767}function A(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]+b[i]}function Z(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]-b[i]}function M(o,a,b){var t0=0,t1=0,t2=0,t3=0,t4=0,t5=0,t6=0,t7=0,t8=0,t9=0,t10=0,t11=0,t12=0,t13=0,t14=0,t15=0,t16=0,t17=0,t18=0,t19=0,t20=0,t21=0,t22=0,t23=0,t24=0,t25=0,t26=0,t27=0,t28=0,t29=0,t30=0,b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15],v,c;v=a[0],t0+=v*b0,t1+=v*b1,t2+=v*b2,t3+=v*b3,t4+=v*b4,t5+=v*b5,t6+=v*b6,t7+=v*b7,t8+=v*b8,t9+=v*b9,t10+=v*b10,t11+=v*b11,t12+=v*b12,t13+=v*b13,t14+=v*b14,t15+=v*b15,v=a[1],t1+=v*b0,t2+=v*b1,t3+=v*b2,t4+=v*b3,t5+=v*b4,t6+=v*b5,t7+=v*b6,t8+=v*b7,t9+=v*b8,t10+=v*b9,t11+=v*b10,t12+=v*b11,t13+=v*b12,t14+=v*b13,t15+=v*b14,t16+=v*b15,v=a[2],t2+=v*b0,t3+=v*b1,t4+=v*b2,t5+=v*b3,t6+=v*b4,t7+=v*b5,t8+=v*b6,t9+=v*b7,t10+=v*b8,t11+=v*b9,t12+=v*b10,t13+=v*b11,t14+=v*b12,t15+=v*b13,t16+=v*b14,t17+=v*b15,v=a[3],t3+=v*b0,t4+=v*b1,t5+=v*b2,t6+=v*b3,t7+=v*b4,t8+=v*b5,t9+=v*b6,t10+=v*b7,t11+=v*b8,t12+=v*b9,t13+=v*b10,t14+=v*b11,t15+=v*b12,t16+=v*b13,t17+=v*b14,t18+=v*b15,v=a[4],t4+=v*b0,t5+=v*b1,t6+=v*b2,t7+=v*b3,t8+=v*b4,t9+=v*b5,t10+=v*b6,t11+=v*b7,t12+=v*b8,t13+=v*b9,t14+=v*b10,t15+=v*b11,t16+=v*b12,t17+=v*b13,t18+=v*b14,t19+=v*b15,v=a[5],t5+=v*b0,t6+=v*b1,t7+=v*b2,t8+=v*b3,t9+=v*b4,t10+=v*b5,t11+=v*b6,t12+=v*b7,t13+=v*b8,t14+=v*b9,t15+=v*b10,t16+=v*b11,t17+=v*b12,t18+=v*b13,t19+=v*b14,t20+=v*b15,v=a[6],t6+=v*b0,t7+=v*b1,t8+=v*b2,t9+=v*b3,t10+=v*b4,t11+=v*b5,t12+=v*b6,t13+=v*b7,t14+=v*b8,t15+=v*b9,t16+=v*b10,t17+=v*b11,t18+=v*b12,t19+=v*b13,t20+=v*b14,t21+=v*b15,v=a[7],t7+=v*b0,t8+=v*b1,t9+=v*b2,t10+=v*b3,t11+=v*b4,t12+=v*b5,t13+=v*b6,t14+=v*b7,t15+=v*b8,t16+=v*b9,t17+=v*b10,t18+=v*b11,t19+=v*b12,t20+=v*b13,t21+=v*b14,t22+=v*b15,v=a[8],t8+=v*b0,t9+=v*b1,t10+=v*b2,t11+=v*b3,t12+=v*b4,t13+=v*b5,t14+=v*b6,t15+=v*b7,t16+=v*b8,t17+=v*b9,t18+=v*b10,t19+=v*b11,t20+=v*b12,t21+=v*b13,t22+=v*b14,t23+=v*b15,v=a[9],t9+=v*b0,t10+=v*b1,t11+=v*b2,t12+=v*b3,t13+=v*b4,t14+=v*b5,t15+=v*b6,t16+=v*b7,t17+=v*b8,t18+=v*b9,t19+=v*b10,t20+=v*b11,t21+=v*b12,t22+=v*b13,t23+=v*b14,t24+=v*b15,v=a[10],t10+=v*b0,t11+=v*b1,t12+=v*b2,t13+=v*b3,t14+=v*b4,t15+=v*b5,t16+=v*b6,t17+=v*b7,t18+=v*b8,t19+=v*b9,t20+=v*b10,t21+=v*b11,t22+=v*b12,t23+=v*b13,t24+=v*b14,t25+=v*b15,v=a[11],t11+=v*b0,t12+=v*b1,t13+=v*b2,t14+=v*b3,t15+=v*b4,t16+=v*b5,t17+=v*b6,t18+=v*b7,t19+=v*b8,t20+=v*b9,t21+=v*b10,t22+=v*b11,t23+=v*b12,t24+=v*b13,t25+=v*b14,t26+=v*b15,v=a[12],t12+=v*b0,t13+=v*b1,t14+=v*b2,t15+=v*b3,t16+=v*b4,t17+=v*b5,t18+=v*b6,t19+=v*b7,t20+=v*b8,t21+=v*b9,t22+=v*b10,t23+=v*b11,t24+=v*b12,t25+=v*b13,t26+=v*b14,t27+=v*b15,v=a[13],t13+=v*b0,t14+=v*b1,t15+=v*b2,t16+=v*b3,t17+=v*b4,t18+=v*b5,t19+=v*b6,t20+=v*b7,t21+=v*b8,t22+=v*b9,t23+=v*b10,t24+=v*b11,t25+=v*b12,t26+=v*b13,t27+=v*b14,t28+=v*b15,v=a[14],t14+=v*b0,t15+=v*b1,t16+=v*b2,t17+=v*b3,t18+=v*b4,t19+=v*b5,t20+=v*b6,t21+=v*b7,t22+=v*b8,t23+=v*b9,t24+=v*b10,t25+=v*b11,t26+=v*b12,t27+=v*b13,t28+=v*b14,t29+=v*b15,v=a[15],t15+=v*b0,t16+=v*b1,t17+=v*b2,t18+=v*b3,t19+=v*b4,t20+=v*b5,t21+=v*b6,t22+=v*b7,t23+=v*b8,t24+=v*b9,t25+=v*b10,t26+=v*b11,t27+=v*b12,t28+=v*b13,t29+=v*b14,t30+=v*b15,t0+=38*t16,t1+=38*t17,t2+=38*t18,t3+=38*t19,t4+=38*t20,t5+=38*t21,t6+=38*t22,t7+=38*t23,t8+=38*t24,t9+=38*t25,t10+=38*t26,t11+=38*t27,t12+=38*t28,t13+=38*t29,t14+=38*t30,c=1,v=t0+c+65535,c=_Mathfloor3(v/65536),t0=v-c*65536,v=t1+c+65535,c=_Mathfloor3(v/65536),t1=v-c*65536,v=t2+c+65535,c=_Mathfloor3(v/65536),t2=v-c*65536,v=t3+c+65535,c=_Mathfloor3(v/65536),t3=v-c*65536,v=t4+c+65535,c=_Mathfloor3(v/65536),t4=v-c*65536,v=t5+c+65535,c=_Mathfloor3(v/65536),t5=v-c*65536,v=t6+c+65535,c=_Mathfloor3(v/65536),t6=v-c*65536,v=t7+c+65535,c=_Mathfloor3(v/65536),t7=v-c*65536,v=t8+c+65535,c=_Mathfloor3(v/65536),t8=v-c*65536,v=t9+c+65535,c=_Mathfloor3(v/65536),t9=v-c*65536,v=t10+c+65535,c=_Mathfloor3(v/65536),t10=v-c*65536,v=t11+c+65535,c=_Mathfloor3(v/65536),t11=v-c*65536,v=t12+c+65535,c=_Mathfloor3(v/65536),t12=v-c*65536,v=t13+c+65535,c=_Mathfloor3(v/65536),t13=v-c*65536,v=t14+c+65535,c=_Mathfloor3(v/65536),t14=v-c*65536,v=t15+c+65535,c=_Mathfloor3(v/65536),t15=v-c*65536,t0+=c-1+37*(c-1),c=1,v=t0+c+65535,c=_Mathfloor3(v/65536),t0=v-c*65536,v=t1+c+65535,c=_Mathfloor3(v/65536),t1=v-c*65536,v=t2+c+65535,c=_Mathfloor3(v/65536),t2=v-c*65536,v=t3+c+65535,c=_Mathfloor3(v/65536),t3=v-c*65536,v=t4+c+65535,c=_Mathfloor3(v/65536),t4=v-c*65536,v=t5+c+65535,c=_Mathfloor3(v/65536),t5=v-c*65536,v=t6+c+65535,c=_Mathfloor3(v/65536),t6=v-c*65536,v=t7+c+65535,c=_Mathfloor3(v/65536),t7=v-c*65536,v=t8+c+65535,c=_Mathfloor3(v/65536),t8=v-c*65536,v=t9+c+65535,c=_Mathfloor3(v/65536),t9=v-c*65536,v=t10+c+65535,c=_Mathfloor3(v/65536),t10=v-c*65536,v=t11+c+65535,c=_Mathfloor3(v/65536),t11=v-c*65536,v=t12+c+65535,c=_Mathfloor3(v/65536),t12=v-c*65536,v=t13+c+65535,c=_Mathfloor3(v/65536),t13=v-c*65536,v=t14+c+65535,c=_Mathfloor3(v/65536),t14=v-c*65536,v=t15+c+65535,c=_Mathfloor3(v/65536),t15=v-c*65536,t0+=c-1+37*(c-1),o[0]=t0,o[1]=t1,o[2]=t2,o[3]=t3,o[4]=t4,o[5]=t5,o[6]=t6,o[7]=t7,o[8]=t8,o[9]=t9,o[10]=t10,o[11]=t11,o[12]=t12,o[13]=t13,o[14]=t14,o[15]=t15}function S(o,a){M(o,a,a)}function inv25519(o,i){var c=gf();var a;for(a=0;a<16;a++)c[a]=i[a];for(a=253;a>=0;a--)S(c,c),a!==2&&a!==4&&M(c,c,i);for(a=0;a<16;a++)o[a]=c[a]}function pow2523(o,i){var c=gf();var a;for(a=0;a<16;a++)c[a]=i[a];for(a=250;a>=0;a--)S(c,c),a!==1&&M(c,c,i);for(a=0;a<16;a++)o[a]=c[a]}function crypto_scalarmult(q,n,p){var z=new Uint8Array(32);var x=new Float64Array(80),r,i;var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf();for(i=0;i<31;i++)z[i]=n[i];for(z[31]=n[31]&127|64,z[0]&=248,unpack25519(x,p),i=0;i<16;i++)b[i]=x[i],d[i]=a[i]=c[i]=0;for(a[0]=d[0]=1,i=254;i>=0;--i)r=z[i>>>3]>>>(i&7)&1,sel25519(a,b,r),sel25519(c,d,r),A(e,a,c),Z(a,a,c),A(c,b,d),Z(b,b,d),S(d,e),S(f,a),M(a,c,a),M(c,b,e),A(e,a,c),Z(a,a,c),S(b,a),Z(c,d,f),M(a,c,_121665),A(a,a,d),M(c,c,a),M(a,d,f),M(d,b,x),S(b,e),sel25519(a,b,r),sel25519(c,d,r);for(i=0;i<16;i++)x[i+16]=a[i],x[i+32]=c[i],x[i+48]=b[i],x[i+64]=d[i];var x32=x.subarray(32);var x16=x.subarray(16);return inv25519(x32,x32),M(x16,x16,x32),pack25519(q,x16),0}function crypto_scalarmult_base(q,n){return crypto_scalarmult(q,n,_9)}function crypto_box_keypair(y,x){return randombytes(x,32),crypto_scalarmult_base(y,x)}function crypto_box_beforenm(k,y,x){var s=new Uint8Array(32);return crypto_scalarmult(s,x,y),crypto_core_hsalsa20(k,_0,s,sigma)}function crypto_box(c,m,d,n,y,x){var k=new Uint8Array(32);return crypto_box_beforenm(k,y,x),crypto_box_afternm(c,m,d,n,k)}function crypto_box_open(m,c,d,n,y,x){var k=new Uint8Array(32);return crypto_box_beforenm(k,y,x),crypto_box_open_afternm(m,c,d,n,k)}function crypto_hashblocks_hl(hh,hl,m,n){var wh=new Int32Array(16),wl=new Int32Array(16),bh0,bh1,bh2,bh3,bh4,bh5,bh6,bh7,bl0,bl1,bl2,bl3,bl4,bl5,bl6,bl7,th,tl,i,j,h,l,a,b,c,d;var ah0=hh[0],ah1=hh[1],ah2=hh[2],ah3=hh[3],ah4=hh[4],ah5=hh[5],ah6=hh[6],ah7=hh[7],al0=hl[0],al1=hl[1],al2=hl[2],al3=hl[3],al4=hl[4],al5=hl[5],al6=hl[6],al7=hl[7];for(var pos=0;n>=128;){for(i=0;i<16;i++)j=8*i+pos,wh[i]=m[j+0]<<24|m[j+1]<<16|m[j+2]<<8|m[j+3],wl[i]=m[j+4]<<24|m[j+5]<<16|m[j+6]<<8|m[j+7];for(i=0;i<80;i++)if(bh0=ah0,bh1=ah1,bh2=ah2,bh3=ah3,bh4=ah4,bh5=ah5,bh6=ah6,bh7=ah7,bl0=al0,bl1=al1,bl2=al2,bl3=al3,bl4=al4,bl5=al5,bl6=al6,bl7=al7,h=ah7,l=al7,a=l&65535,b=l>>>16,c=h&65535,d=h>>>16,h=(ah4>>>14|al4<<32-14)^(ah4>>>18|al4<<32-18)^(al4>>>41-32|ah4<<32-(41-32)),l=(al4>>>14|ah4<<32-14)^(al4>>>18|ah4<<32-18)^(ah4>>>41-32|al4<<32-(41-32)),a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,h=ah4&ah5^~ah4&ah6,l=al4&al5^~al4&al6,a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,h=K[i*2],l=K[i*2+1],a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,h=wh[i%16],l=wl[i%16],a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,th=c&65535|d<<16,tl=a&65535|b<<16,h=th,l=tl,a=l&65535,b=l>>>16,c=h&65535,d=h>>>16,h=(ah0>>>28|al0<<32-28)^(al0>>>34-32|ah0<<32-(34-32))^(al0>>>39-32|ah0<<32-(39-32)),l=(al0>>>28|ah0<<32-28)^(ah0>>>34-32|al0<<32-(34-32))^(ah0>>>39-32|al0<<32-(39-32)),a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,h=ah0&ah1^ah0&ah2^ah1&ah2,l=al0&al1^al0&al2^al1&al2,a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,bh7=c&65535|d<<16,bl7=a&65535|b<<16,h=bh3,l=bl3,a=l&65535,b=l>>>16,c=h&65535,d=h>>>16,h=th,l=tl,a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,bh3=c&65535|d<<16,bl3=a&65535|b<<16,ah1=bh0,ah2=bh1,ah3=bh2,ah4=bh3,ah5=bh4,ah6=bh5,ah7=bh6,ah0=bh7,al1=bl0,al2=bl1,al3=bl2,al4=bl3,al5=bl4,al6=bl5,al7=bl6,al0=bl7,i%16===15)for(j=0;j<16;j++)h=wh[j],l=wl[j],a=l&65535,b=l>>>16,c=h&65535,d=h>>>16,h=wh[(j+9)%16],l=wl[(j+9)%16],a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,th=wh[(j+1)%16],tl=wl[(j+1)%16],h=(th>>>1|tl<<32-1)^(th>>>8|tl<<32-8)^th>>>7,l=(tl>>>1|th<<32-1)^(tl>>>8|th<<32-8)^(tl>>>7|th<<32-7),a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,th=wh[(j+14)%16],tl=wl[(j+14)%16],h=(th>>>19|tl<<32-19)^(tl>>>61-32|th<<32-(61-32))^th>>>6,l=(tl>>>19|th<<32-19)^(th>>>61-32|tl<<32-(61-32))^(tl>>>6|th<<32-6),a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,wh[j]=c&65535|d<<16,wl[j]=a&65535|b<<16;h=ah0,l=al0,a=l&65535,b=l>>>16,c=h&65535,d=h>>>16,h=hh[0],l=hl[0],a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,hh[0]=ah0=c&65535|d<<16,hl[0]=al0=a&65535|b<<16,h=ah1,l=al1,a=l&65535,b=l>>>16,c=h&65535,d=h>>>16,h=hh[1],l=hl[1],a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,hh[1]=ah1=c&65535|d<<16,hl[1]=al1=a&65535|b<<16,h=ah2,l=al2,a=l&65535,b=l>>>16,c=h&65535,d=h>>>16,h=hh[2],l=hl[2],a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,hh[2]=ah2=c&65535|d<<16,hl[2]=al2=a&65535|b<<16,h=ah3,l=al3,a=l&65535,b=l>>>16,c=h&65535,d=h>>>16,h=hh[3],l=hl[3],a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,hh[3]=ah3=c&65535|d<<16,hl[3]=al3=a&65535|b<<16,h=ah4,l=al4,a=l&65535,b=l>>>16,c=h&65535,d=h>>>16,h=hh[4],l=hl[4],a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,hh[4]=ah4=c&65535|d<<16,hl[4]=al4=a&65535|b<<16,h=ah5,l=al5,a=l&65535,b=l>>>16,c=h&65535,d=h>>>16,h=hh[5],l=hl[5],a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,hh[5]=ah5=c&65535|d<<16,hl[5]=al5=a&65535|b<<16,h=ah6,l=al6,a=l&65535,b=l>>>16,c=h&65535,d=h>>>16,h=hh[6],l=hl[6],a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,hh[6]=ah6=c&65535|d<<16,hl[6]=al6=a&65535|b<<16,h=ah7,l=al7,a=l&65535,b=l>>>16,c=h&65535,d=h>>>16,h=hh[7],l=hl[7],a+=l&65535,b+=l>>>16,c+=h&65535,d+=h>>>16,b+=a>>>16,c+=b>>>16,d+=c>>>16,hh[7]=ah7=c&65535|d<<16,hl[7]=al7=a&65535|b<<16,pos+=128,n-=128}return n}function crypto_hash(out,m,n){var hh=new Int32Array(8),hl=new Int32Array(8),x=new Uint8Array(256),b=n,i;for(hh[0]=1779033703,hh[1]=3144134277,hh[2]=1013904242,hh[3]=2773480762,hh[4]=1359893119,hh[5]=2600822924,hh[6]=528734635,hh[7]=1541459225,hl[0]=4089235720,hl[1]=2227873595,hl[2]=4271175723,hl[3]=1595750129,hl[4]=2917565137,hl[5]=725511199,hl[6]=4215389547,hl[7]=327033209,crypto_hashblocks_hl(hh,hl,m,n),n%=128,i=0;i<n;i++)x[i]=m[b-n+i];for(x[n]=128,n=256-128*(n<112?1:0),x[n-9]=0,ts64(x,n-8,b/536870912|0,b<<3),crypto_hashblocks_hl(hh,hl,x,n),i=0;i<8;i++)ts64(out,8*i,hh[i],hl[i]);return 0}function add(p,q){var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf(),g=gf(),h=gf(),t=gf();Z(a,p[1],p[0]),Z(t,q[1],q[0]),M(a,a,t),A(b,p[0],p[1]),A(t,q[0],q[1]),M(b,b,t),M(c,p[3],q[3]),M(c,c,D2),M(d,p[2],q[2]),A(d,d,d),Z(e,b,a),Z(f,d,c),A(g,d,c),A(h,b,a),M(p[0],e,f),M(p[1],h,g),M(p[2],g,f),M(p[3],e,h)}function cswap(p,q,b){var i;for(i=0;i<4;i++)sel25519(p[i],q[i],b)}function pack(r,p){var tx=gf(),ty=gf(),zi=gf();inv25519(zi,p[2]),M(tx,p[0],zi),M(ty,p[1],zi),pack25519(r,ty),r[31]^=par25519(tx)<<7}function scalarmult(p,q,s){var b,i;for(set25519(p[0],gf0),set25519(p[1],gf1),set25519(p[2],gf1),set25519(p[3],gf0),i=255;i>=0;--i)b=s[i/8|0]>>(i&7)&1,cswap(p,q,b),add(q,p),add(p,p),cswap(p,q,b)}function scalarbase(p,s){var q=[gf(),gf(),gf(),gf()];set25519(q[0],X),set25519(q[1],Y),set25519(q[2],gf1),M(q[3],X,Y),scalarmult(p,q,s)}function crypto_sign_keypair(pk,sk,seeded){var d=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()];var i;for(!seeded&&randombytes(sk,32),crypto_hash(d,sk,32),d[0]&=248,d[31]&=127,d[31]|=64,scalarbase(p,d),pack(pk,p),i=0;i<32;i++)sk[i+32]=pk[i];return 0}function modL(r,x){var carry,i,j,k;for(i=63;i>=32;--i){for(carry=0,j=i-32,k=i-12;j<k;++j)x[j]+=carry-16*x[i]*L[j-(i-32)],carry=x[j]+128>>8,x[j]-=carry*256;x[j]+=carry,x[i]=0}for(carry=0,j=0;j<32;j++)x[j]+=carry-(x[31]>>4)*L[j],carry=x[j]>>8,x[j]&=255;for(j=0;j<32;j++)x[j]-=carry*L[j];for(i=0;i<32;i++)x[i+1]+=x[i]>>8,r[i]=x[i]&255}function reduce(r){var x=new Float64Array(64),i;for(i=0;i<64;i++)x[i]=r[i];for(i=0;i<64;i++)r[i]=0;modL(r,x)}function crypto_sign(sm,m,n,sk){var d=new Uint8Array(64),h=new Uint8Array(64),r=new Uint8Array(64);var x=new Float64Array(64),i,j;var p=[gf(),gf(),gf(),gf()];crypto_hash(d,sk,32),d[0]&=248,d[31]&=127,d[31]|=64;var smlen=n+64;for(i=0;i<n;i++)sm[64+i]=m[i];for(i=0;i<32;i++)sm[32+i]=d[32+i];for(crypto_hash(r,sm.subarray(32),n+32),reduce(r),scalarbase(p,r),pack(sm,p),i=32;i<64;i++)sm[i]=sk[i];for(crypto_hash(h,sm,n+64),reduce(h),i=0;i<64;i++)x[i]=0;for(i=0;i<32;i++)x[i]=r[i];for(i=0;i<32;i++)for(j=0;j<32;j++)x[i+j]+=h[i]*d[j];return modL(sm.subarray(32),x),smlen}function unpackneg(r,p){var t=gf(),chk=gf(),num=gf(),den=gf(),den2=gf(),den4=gf(),den6=gf();return(set25519(r[2],gf1),unpack25519(r[1],p),S(num,r[1]),M(den,num,D),Z(num,num,r[2]),A(den,r[2],den),S(den2,den),S(den4,den2),M(den6,den4,den2),M(t,den6,num),M(t,t,den),pow2523(t,t),M(t,t,num),M(t,t,den),M(t,t,den),M(r[0],t,den),S(chk,r[0]),M(chk,chk,den),neq25519(chk,num)&&M(r[0],r[0],I),S(chk,r[0]),M(chk,chk,den),neq25519(chk,num))?-1:(par25519(r[0])===p[31]>>7&&Z(r[0],gf0,r[0]),M(r[3],r[0],r[1]),0)}function crypto_sign_open(m,sm,n,pk){var i,mlen;var t=new Uint8Array(32),h=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()],q=[gf(),gf(),gf(),gf()];if(mlen=-1,n<64)return-1;if(unpackneg(q,pk))return-1;for(i=0;i<n;i++)m[i]=sm[i];for(i=0;i<32;i++)m[i+32]=pk[i];if(crypto_hash(h,m,n),reduce(h),scalarmult(p,q,h),scalarbase(q,sm.subarray(32)),add(p,q),pack(t,p),n-=64,crypto_verify_32(sm,0,t,0)){for(i=0;i<n;i++)m[i]=0;return-1}for(i=0;i<n;i++)m[i]=sm[i+64];return mlen=n,mlen}function checkLengths(k,n){if(k.length!==crypto_secretbox_KEYBYTES)throw new Error('bad key size');if(n.length!==crypto_secretbox_NONCEBYTES)throw new Error('bad nonce size')}function checkBoxLengths(pk,sk){if(pk.length!==crypto_box_PUBLICKEYBYTES)throw new Error('bad public key size');if(sk.length!==crypto_box_SECRETKEYBYTES)throw new Error('bad secret key size')}function checkArrayTypes(){var type={}.toString,t;for(var i=0;i<arguments.length;i++)if((t=type.call(arguments[i]))!=='[object Uint8Array]')throw new TypeError('unexpected type '+t+', use Uint8Array')}var gf=function(init){var r=new Float64Array(16),i;if(init)for(i=0;i<init.length;i++)r[i]=init[i];return r};var randombytes=function(){throw new Error('no PRNG')};var _0=new Uint8Array(16);var _9=new Uint8Array(32);_9[0]=9;var gf0=gf(),gf1=gf([1]),_121665=gf([56129,1]),D=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),D2=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),X=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Y=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),I=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);var sigma=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);var poly1305=function(key){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var t0,t1,t2,t3,t4,t5,t6,t7;t0=key[0]&255|(key[1]&255)<<8,this.r[0]=t0&8191,t1=key[2]&255|(key[3]&255)<<8,this.r[1]=(t0>>>13|t1<<3)&8191,t2=key[4]&255|(key[5]&255)<<8,this.r[2]=(t1>>>10|t2<<6)&7939,t3=key[6]&255|(key[7]&255)<<8,this.r[3]=(t2>>>7|t3<<9)&8191,t4=key[8]&255|(key[9]&255)<<8,this.r[4]=(t3>>>4|t4<<12)&255,this.r[5]=t4>>>1&8190,t5=key[10]&255|(key[11]&255)<<8,this.r[6]=(t4>>>14|t5<<2)&8191,t6=key[12]&255|(key[13]&255)<<8,this.r[7]=(t5>>>11|t6<<5)&8065,t7=key[14]&255|(key[15]&255)<<8,this.r[8]=(t6>>>8|t7<<8)&8191,this.r[9]=t7>>>5&127,this.pad[0]=key[16]&255|(key[17]&255)<<8,this.pad[1]=key[18]&255|(key[19]&255)<<8,this.pad[2]=key[20]&255|(key[21]&255)<<8,this.pad[3]=key[22]&255|(key[23]&255)<<8,this.pad[4]=key[24]&255|(key[25]&255)<<8,this.pad[5]=key[26]&255|(key[27]&255)<<8,this.pad[6]=key[28]&255|(key[29]&255)<<8,this.pad[7]=key[30]&255|(key[31]&255)<<8};poly1305.prototype.blocks=function(m,mpos,bytes){var hibit=this.fin?0:1<<11;var t0,t1,t2,t3,t4,t5,t6,t7,c;var d0,d1,d2,d3,d4,d5,d6,d7,d8,d9;var h0=this.h[0],h1=this.h[1],h2=this.h[2],h3=this.h[3],h4=this.h[4],h5=this.h[5],h6=this.h[6],h7=this.h[7],h8=this.h[8],h9=this.h[9];for(var r0=this.r[0],r1=this.r[1],r2=this.r[2],r3=this.r[3],r4=this.r[4],r5=this.r[5],r6=this.r[6],r7=this.r[7],r8=this.r[8],r9=this.r[9];bytes>=16;)t0=m[mpos+0]&255|(m[mpos+1]&255)<<8,h0+=t0&8191,t1=m[mpos+2]&255|(m[mpos+3]&255)<<8,h1+=(t0>>>13|t1<<3)&8191,t2=m[mpos+4]&255|(m[mpos+5]&255)<<8,h2+=(t1>>>10|t2<<6)&8191,t3=m[mpos+6]&255|(m[mpos+7]&255)<<8,h3+=(t2>>>7|t3<<9)&8191,t4=m[mpos+8]&255|(m[mpos+9]&255)<<8,h4+=(t3>>>4|t4<<12)&8191,h5+=t4>>>1&8191,t5=m[mpos+10]&255|(m[mpos+11]&255)<<8,h6+=(t4>>>14|t5<<2)&8191,t6=m[mpos+12]&255|(m[mpos+13]&255)<<8,h7+=(t5>>>11|t6<<5)&8191,t7=m[mpos+14]&255|(m[mpos+15]&255)<<8,h8+=(t6>>>8|t7<<8)&8191,h9+=t7>>>5|hibit,c=0,d0=c,d0+=h0*r0,d0+=h1*(5*r9),d0+=h2*(5*r8),d0+=h3*(5*r7),d0+=h4*(5*r6),c=d0>>>13,d0&=8191,d0+=h5*(5*r5),d0+=h6*(5*r4),d0+=h7*(5*r3),d0+=h8*(5*r2),d0+=h9*(5*r1),c+=d0>>>13,d0&=8191,d1=c,d1+=h0*r1,d1+=h1*r0,d1+=h2*(5*r9),d1+=h3*(5*r8),d1+=h4*(5*r7),c=d1>>>13,d1&=8191,d1+=h5*(5*r6),d1+=h6*(5*r5),d1+=h7*(5*r4),d1+=h8*(5*r3),d1+=h9*(5*r2),c+=d1>>>13,d1&=8191,d2=c,d2+=h0*r2,d2+=h1*r1,d2+=h2*r0,d2+=h3*(5*r9),d2+=h4*(5*r8),c=d2>>>13,d2&=8191,d2+=h5*(5*r7),d2+=h6*(5*r6),d2+=h7*(5*r5),d2+=h8*(5*r4),d2+=h9*(5*r3),c+=d2>>>13,d2&=8191,d3=c,d3+=h0*r3,d3+=h1*r2,d3+=h2*r1,d3+=h3*r0,d3+=h4*(5*r9),c=d3>>>13,d3&=8191,d3+=h5*(5*r8),d3+=h6*(5*r7),d3+=h7*(5*r6),d3+=h8*(5*r5),d3+=h9*(5*r4),c+=d3>>>13,d3&=8191,d4=c,d4+=h0*r4,d4+=h1*r3,d4+=h2*r2,d4+=h3*r1,d4+=h4*r0,c=d4>>>13,d4&=8191,d4+=h5*(5*r9),d4+=h6*(5*r8),d4+=h7*(5*r7),d4+=h8*(5*r6),d4+=h9*(5*r5),c+=d4>>>13,d4&=8191,d5=c,d5+=h0*r5,d5+=h1*r4,d5+=h2*r3,d5+=h3*r2,d5+=h4*r1,c=d5>>>13,d5&=8191,d5+=h5*r0,d5+=h6*(5*r9),d5+=h7*(5*r8),d5+=h8*(5*r7),d5+=h9*(5*r6),c+=d5>>>13,d5&=8191,d6=c,d6+=h0*r6,d6+=h1*r5,d6+=h2*r4,d6+=h3*r3,d6+=h4*r2,c=d6>>>13,d6&=8191,d6+=h5*r1,d6+=h6*r0,d6+=h7*(5*r9),d6+=h8*(5*r8),d6+=h9*(5*r7),c+=d6>>>13,d6&=8191,d7=c,d7+=h0*r7,d7+=h1*r6,d7+=h2*r5,d7+=h3*r4,d7+=h4*r3,c=d7>>>13,d7&=8191,d7+=h5*r2,d7+=h6*r1,d7+=h7*r0,d7+=h8*(5*r9),d7+=h9*(5*r8),c+=d7>>>13,d7&=8191,d8=c,d8+=h0*r8,d8+=h1*r7,d8+=h2*r6,d8+=h3*r5,d8+=h4*r4,c=d8>>>13,d8&=8191,d8+=h5*r3,d8+=h6*r2,d8+=h7*r1,d8+=h8*r0,d8+=h9*(5*r9),c+=d8>>>13,d8&=8191,d9=c,d9+=h0*r9,d9+=h1*r8,d9+=h2*r7,d9+=h3*r6,d9+=h4*r5,c=d9>>>13,d9&=8191,d9+=h5*r4,d9+=h6*r3,d9+=h7*r2,d9+=h8*r1,d9+=h9*r0,c+=d9>>>13,d9&=8191,c=(c<<2)+c|0,c=c+d0|0,d0=c&8191,c>>>=13,d1+=c,h0=d0,h1=d1,h2=d2,h3=d3,h4=d4,h5=d5,h6=d6,h7=d7,h8=d8,h9=d9,mpos+=16,bytes-=16;this.h[0]=h0,this.h[1]=h1,this.h[2]=h2,this.h[3]=h3,this.h[4]=h4,this.h[5]=h5,this.h[6]=h6,this.h[7]=h7,this.h[8]=h8,this.h[9]=h9},poly1305.prototype.finish=function(mac,macpos){var g=new Uint16Array(10);var c,mask,f,i;if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(c=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=c,c=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=c*5,c=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=c,c=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=c,g[0]=this.h[0]+5,c=g[0]>>>13,g[0]&=8191,i=1;i<10;i++)g[i]=this.h[i]+c,c=g[i]>>>13,g[i]&=8191;for(g[9]-=1<<13,mask=(g[9]>>>2*8-1)-1,i=0;i<10;i++)g[i]&=mask;for(mask=~mask,i=0;i<10;i++)this.h[i]=this.h[i]&mask|g[i];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,f=this.h[0]+this.pad[0],this.h[0]=f&65535,i=1;i<8;i++)f=(this.h[i]+this.pad[i]|0)+(f>>>16)|0,this.h[i]=f&65535;mac[macpos+0]=this.h[0]>>>0&255,mac[macpos+1]=this.h[0]>>>8&255,mac[macpos+2]=this.h[1]>>>0&255,mac[macpos+3]=this.h[1]>>>8&255,mac[macpos+4]=this.h[2]>>>0&255,mac[macpos+5]=this.h[2]>>>8&255,mac[macpos+6]=this.h[3]>>>0&255,mac[macpos+7]=this.h[3]>>>8&255,mac[macpos+8]=this.h[4]>>>0&255,mac[macpos+9]=this.h[4]>>>8&255,mac[macpos+10]=this.h[5]>>>0&255,mac[macpos+11]=this.h[5]>>>8&255,mac[macpos+12]=this.h[6]>>>0&255,mac[macpos+13]=this.h[6]>>>8&255,mac[macpos+14]=this.h[7]>>>0&255,mac[macpos+15]=this.h[7]>>>8&255},poly1305.prototype.update=function(m,mpos,bytes){var i,want;if(this.leftover){for(want=16-this.leftover,want>bytes&&(want=bytes),i=0;i<want;i++)this.buffer[this.leftover+i]=m[mpos+i];if(bytes-=want,mpos+=want,this.leftover+=want,this.leftover<16)return;this.blocks(buffer,0,16),this.leftover=0}if(bytes>=16&&(want=bytes-bytes%16,this.blocks(m,mpos,want),mpos+=want,bytes-=want),bytes){for(i=0;i<bytes;i++)this.buffer[this.leftover+i]=m[mpos+i];this.leftover+=bytes}};var crypto_box_afternm=crypto_secretbox;var crypto_box_open_afternm=crypto_secretbox_open;var K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];var L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);var crypto_secretbox_KEYBYTES=32,crypto_secretbox_NONCEBYTES=24,crypto_secretbox_ZEROBYTES=32,crypto_secretbox_BOXZEROBYTES=16,crypto_scalarmult_BYTES=32,crypto_scalarmult_SCALARBYTES=32,crypto_box_PUBLICKEYBYTES=32,crypto_box_SECRETKEYBYTES=32,crypto_box_BEFORENMBYTES=32,crypto_box_NONCEBYTES=crypto_secretbox_NONCEBYTES,crypto_box_ZEROBYTES=crypto_secretbox_ZEROBYTES,crypto_box_BOXZEROBYTES=crypto_secretbox_BOXZEROBYTES,crypto_sign_BYTES=64,crypto_sign_PUBLICKEYBYTES=32,crypto_sign_SECRETKEYBYTES=64,crypto_sign_SEEDBYTES=32,crypto_hash_BYTES=64;nacl.lowlevel={crypto_core_hsalsa20:crypto_core_hsalsa20,crypto_stream_xor:crypto_stream_xor,crypto_stream:crypto_stream,crypto_stream_salsa20_xor:crypto_stream_salsa20_xor,crypto_stream_salsa20:crypto_stream_salsa20,crypto_onetimeauth:crypto_onetimeauth,crypto_onetimeauth_verify:crypto_onetimeauth_verify,crypto_verify_16:crypto_verify_16,crypto_verify_32:crypto_verify_32,crypto_secretbox:crypto_secretbox,crypto_secretbox_open:crypto_secretbox_open,crypto_scalarmult:crypto_scalarmult,crypto_scalarmult_base:crypto_scalarmult_base,crypto_box_beforenm:crypto_box_beforenm,crypto_box_afternm:crypto_box_afternm,crypto_box:crypto_box,crypto_box_open:crypto_box_open,crypto_box_keypair:crypto_box_keypair,crypto_hash:crypto_hash,crypto_sign:crypto_sign,crypto_sign_keypair:crypto_sign_keypair,crypto_sign_open:crypto_sign_open,crypto_secretbox_KEYBYTES:crypto_secretbox_KEYBYTES,crypto_secretbox_NONCEBYTES:crypto_secretbox_NONCEBYTES,crypto_secretbox_ZEROBYTES:crypto_secretbox_ZEROBYTES,crypto_secretbox_BOXZEROBYTES:crypto_secretbox_BOXZEROBYTES,crypto_scalarmult_BYTES:crypto_scalarmult_BYTES,crypto_scalarmult_SCALARBYTES:crypto_scalarmult_SCALARBYTES,crypto_box_PUBLICKEYBYTES:crypto_box_PUBLICKEYBYTES,crypto_box_SECRETKEYBYTES:crypto_box_SECRETKEYBYTES,crypto_box_BEFORENMBYTES:crypto_box_BEFORENMBYTES,crypto_box_NONCEBYTES:crypto_box_NONCEBYTES,crypto_box_ZEROBYTES:crypto_box_ZEROBYTES,crypto_box_BOXZEROBYTES:crypto_box_BOXZEROBYTES,crypto_sign_BYTES:crypto_sign_BYTES,crypto_sign_PUBLICKEYBYTES:crypto_sign_PUBLICKEYBYTES,crypto_sign_SECRETKEYBYTES:crypto_sign_SECRETKEYBYTES,crypto_sign_SEEDBYTES:crypto_sign_SEEDBYTES,crypto_hash_BYTES:crypto_hash_BYTES},nacl.util={},nacl.util.decodeUTF8=function(s){var d=unescape(encodeURIComponent(s)),b=new Uint8Array(d.length),i;for(i=0;i<d.length;i++)b[i]=d.charCodeAt(i);return b},nacl.util.encodeUTF8=function(arr){var s=[],i;for(i=0;i<arr.length;i++)s.push(_StringfromCharCode3(arr[i]));return decodeURIComponent(escape(s.join('')))},nacl.util.encodeBase64=function(arr){if(typeof btoa==='undefined')return new Buffer(arr).toString('base64');var s=[],len=arr.length,i;for(i=0;i<len;i++)s.push(_StringfromCharCode3(arr[i]));return btoa(s.join(''))},nacl.util.decodeBase64=function(s){if(typeof atob==='undefined')return new Uint8Array(Array.prototype.slice.call(new Buffer(s,'base64'),0));var d=atob(s),b=new Uint8Array(d.length),i;for(i=0;i<d.length;i++)b[i]=d.charCodeAt(i);return b},nacl.randomBytes=function(n){var b=new Uint8Array(n);return randombytes(b,n),b},nacl.secretbox=function(msg,nonce,key){checkArrayTypes(msg,nonce,key),checkLengths(key,nonce);var m=new Uint8Array(crypto_secretbox_ZEROBYTES+msg.length);var c=new Uint8Array(m.length);for(var i=0;i<msg.length;i++)m[i+crypto_secretbox_ZEROBYTES]=msg[i];return crypto_secretbox(c,m,m.length,nonce,key),c.subarray(crypto_secretbox_BOXZEROBYTES)},nacl.secretbox.open=function(box,nonce,key){checkArrayTypes(box,nonce,key),checkLengths(key,nonce);var c=new Uint8Array(crypto_secretbox_BOXZEROBYTES+box.length);var m=new Uint8Array(c.length);for(var i=0;i<box.length;i++)c[i+crypto_secretbox_BOXZEROBYTES]=box[i];return!(c.length<32)&&!(crypto_secretbox_open(m,c,c.length,nonce,key)!==0)&&m.subarray(crypto_secretbox_ZEROBYTES)},nacl.secretbox.keyLength=crypto_secretbox_KEYBYTES,nacl.secretbox.nonceLength=crypto_secretbox_NONCEBYTES,nacl.secretbox.overheadLength=crypto_secretbox_BOXZEROBYTES,nacl.scalarMult=function(n,p){if(checkArrayTypes(n,p),n.length!==crypto_scalarmult_SCALARBYTES)throw new Error('bad n size');if(p.length!==crypto_scalarmult_BYTES)throw new Error('bad p size');var q=new Uint8Array(crypto_scalarmult_BYTES);return crypto_scalarmult(q,n,p),q},nacl.scalarMult.base=function(n){if(checkArrayTypes(n),n.length!==crypto_scalarmult_SCALARBYTES)throw new Error('bad n size');var q=new Uint8Array(crypto_scalarmult_BYTES);return crypto_scalarmult_base(q,n),q},nacl.scalarMult.scalarLength=crypto_scalarmult_SCALARBYTES,nacl.scalarMult.groupElementLength=crypto_scalarmult_BYTES,nacl.box=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox(msg,nonce,k)},nacl.box.before=function(publicKey,secretKey){checkArrayTypes(publicKey,secretKey),checkBoxLengths(publicKey,secretKey);var k=new Uint8Array(crypto_box_BEFORENMBYTES);return crypto_box_beforenm(k,publicKey,secretKey),k},nacl.box.after=nacl.secretbox,nacl.box.open=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox.open(msg,nonce,k)},nacl.box.open.after=nacl.secretbox.open,nacl.box.keyPair=function(){var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_box_SECRETKEYBYTES);return crypto_box_keypair(pk,sk),{publicKey:pk,secretKey:sk}},nacl.box.keyPair.fromSecretKey=function(secretKey){if(checkArrayTypes(secretKey),secretKey.length!==crypto_box_SECRETKEYBYTES)throw new Error('bad secret key size');var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);return crypto_scalarmult_base(pk,secretKey),{publicKey:pk,secretKey:new Uint8Array(secretKey)}},nacl.box.publicKeyLength=crypto_box_PUBLICKEYBYTES,nacl.box.secretKeyLength=crypto_box_SECRETKEYBYTES,nacl.box.sharedKeyLength=crypto_box_BEFORENMBYTES,nacl.box.nonceLength=crypto_box_NONCEBYTES,nacl.box.overheadLength=nacl.secretbox.overheadLength,nacl.sign=function(msg,secretKey){if(checkArrayTypes(msg,secretKey),secretKey.length!==crypto_sign_SECRETKEYBYTES)throw new Error('bad secret key size');var signedMsg=new Uint8Array(crypto_sign_BYTES+msg.length);return crypto_sign(signedMsg,msg,msg.length,secretKey),signedMsg},nacl.sign.open=function(signedMsg,publicKey){if(arguments.length!==2)throw new Error('nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?');if(checkArrayTypes(signedMsg,publicKey),publicKey.length!==crypto_sign_PUBLICKEYBYTES)throw new Error('bad public key size');var tmp=new Uint8Array(signedMsg.length);var mlen=crypto_sign_open(tmp,signedMsg,signedMsg.length,publicKey);if(mlen<0)return null;var m=new Uint8Array(mlen);for(var i=0;i<m.length;i++)m[i]=tmp[i];return m},nacl.sign.detached=function(msg,secretKey){var signedMsg=nacl.sign(msg,secretKey);var sig=new Uint8Array(crypto_sign_BYTES);for(var i=0;i<sig.length;i++)sig[i]=signedMsg[i];return sig},nacl.sign.detached.verify=function(msg,sig,publicKey){if(checkArrayTypes(msg,sig,publicKey),sig.length!==crypto_sign_BYTES)throw new Error('bad signature size');if(publicKey.length!==crypto_sign_PUBLICKEYBYTES)throw new Error('bad public key size');var sm=new Uint8Array(crypto_sign_BYTES+msg.length);var m=new Uint8Array(crypto_sign_BYTES+msg.length);var i;for(i=0;i<crypto_sign_BYTES;i++)sm[i]=sig[i];for(i=0;i<msg.length;i++)sm[i+crypto_sign_BYTES]=msg[i];return crypto_sign_open(m,sm,sm.length,publicKey)>=0},nacl.sign.keyPair=function(){var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);return crypto_sign_keypair(pk,sk),{publicKey:pk,secretKey:sk}},nacl.sign.keyPair.fromSecretKey=function(secretKey){if(checkArrayTypes(secretKey),secretKey.length!==crypto_sign_SECRETKEYBYTES)throw new Error('bad secret key size');var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);for(var i=0;i<pk.length;i++)pk[i]=secretKey[32+i];return{publicKey:pk,secretKey:new Uint8Array(secretKey)}},nacl.sign.keyPair.fromSeed=function(seed){if(checkArrayTypes(seed),seed.length!==crypto_sign_SEEDBYTES)throw new Error('bad seed size');var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);for(var i=0;i<32;i++)sk[i]=seed[i];return crypto_sign_keypair(pk,sk,!0),{publicKey:pk,secretKey:sk}},nacl.sign.publicKeyLength=crypto_sign_PUBLICKEYBYTES,nacl.sign.secretKeyLength=crypto_sign_SECRETKEYBYTES,nacl.sign.seedLength=crypto_sign_SEEDBYTES,nacl.sign.signatureLength=crypto_sign_BYTES,nacl.hash=function(msg){checkArrayTypes(msg);var h=new Uint8Array(crypto_hash_BYTES);return crypto_hash(h,msg,msg.length),h},nacl.hash.hashLength=crypto_hash_BYTES,nacl.verify=function(x,y){return checkArrayTypes(x,y),x.length!==0&&y.length!==0&&x.length===y.length&&vn(x,0,y,0,x.length)===0},nacl.setPRNG=function(fn){randombytes=fn},function(){var crypto;typeof window==='undefined'?typeof require!=='undefined'&&(crypto=require('crypto'),crypto&&nacl.setPRNG(function(x,n){var v=crypto.randomBytes(n),i;for(i=0;i<n;i++)x[i]=v[i]})):(window.crypto&&window.crypto.getRandomValues?crypto=window.crypto:window.msCrypto&&window.msCrypto.getRandomValues&&(crypto=window.msCrypto),crypto&&nacl.setPRNG(function(x,n){var v=new Uint8Array(n),i;for(crypto.getRandomValues(v),i=0;i<n;i++)x[i]=v[i]}))}()})(typeof module!=='undefined'&&module.exports?module.exports:window.nacl=window.nacl||{})}).call(this,require('buffer').Buffer)},{'buffer':80,'crypto':86}],201:[function(require,module,exports){(function(Buffer){(function(nacl){'use strict';function L32(x,c){return x<<c|x>>>32-c}function ld32(x,i){var u=x[i+3]&255;return u=u<<8|x[i+2]&255,u=u<<8|x[i+1]&255,u<<8|x[i+0]&255}function dl64(x,i){var h=x[i]<<24|x[i+1]<<16|x[i+2]<<8|x[i+3];var l=x[i+4]<<24|x[i+5]<<16|x[i+6]<<8|x[i+7];return new u64(h,l)}function st32(x,j,u){var i;for(i=0;i<4;i++)x[j+i]=u&255,u>>>=8}function ts64(x,i,u){x[i]=u.hi>>24&255,x[i+1]=u.hi>>16&255,x[i+2]=u.hi>>8&255,x[i+3]=u.hi&255,x[i+4]=u.lo>>24&255,x[i+5]=u.lo>>16&255,x[i+6]=u.lo>>8&255,x[i+7]=u.lo&255}function vn(x,xi,y,yi,n){var d=0,i;for(i=0;i<n;i++)d|=x[xi+i]^y[yi+i];return(1&d-1>>>8)-1}function crypto_verify_16(x,xi,y,yi){return vn(x,xi,y,yi,16)}function crypto_verify_32(x,xi,y,yi){return vn(x,xi,y,yi,32)}function core(out,inp,k,c,h){var w=new Uint32Array(16),x=new Uint32Array(16),y=new Uint32Array(16),t=new Uint32Array(4);var i,j,m;for(i=0;i<4;i++)x[5*i]=ld32(c,4*i),x[1+i]=ld32(k,4*i),x[6+i]=ld32(inp,4*i),x[11+i]=ld32(k,16+4*i);for(i=0;i<16;i++)y[i]=x[i];for(i=0;i<20;i++){for(j=0;j<4;j++){for(m=0;m<4;m++)t[m]=x[(5*j+4*m)%16];for(t[1]^=L32(t[0]+t[3]|0,7),t[2]^=L32(t[1]+t[0]|0,9),t[3]^=L32(t[2]+t[1]|0,13),t[0]^=L32(t[3]+t[2]|0,18),m=0;m<4;m++)w[4*j+(j+m)%4]=t[m]}for(m=0;m<16;m++)x[m]=w[m]}if(h){for(i=0;i<16;i++)x[i]=x[i]+y[i]|0;for(i=0;i<4;i++)x[5*i]=x[5*i]-ld32(c,4*i)|0,x[6+i]=x[6+i]-ld32(inp,4*i)|0;for(i=0;i<4;i++)st32(out,4*i,x[5*i]),st32(out,16+4*i,x[6+i])}else for(i=0;i<16;i++)st32(out,4*i,x[i]+y[i]|0)}function crypto_core_salsa20(out,inp,k,c){return core(out,inp,k,c,!1),0}function crypto_core_hsalsa20(out,inp,k,c){return core(out,inp,k,c,!0),0}function crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;if(!b)return 0;for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];for(;b>=64;){for(crypto_core_salsa20(x,z,k,sigma),i=0;i<64;i++)c[cpos+i]=(m?m[mpos+i]:0)^x[i];for(u=1,i=8;i<16;i++)u=u+(z[i]&255)|0,z[i]=u&255,u>>>=8;b-=64,cpos+=64,m&&(mpos+=64)}if(b>0)for(crypto_core_salsa20(x,z,k,sigma),i=0;i<b;i++)c[cpos+i]=(m?m[mpos+i]:0)^x[i];return 0}function crypto_stream_salsa20(c,cpos,d,n,k){return crypto_stream_salsa20_xor(c,cpos,null,0,d,n,k)}function crypto_stream(c,cpos,d,n,k){var s=new Uint8Array(32);return crypto_core_hsalsa20(s,n,k,sigma),crypto_stream_salsa20(c,cpos,d,n.subarray(16),s)}function crypto_stream_xor(c,cpos,m,mpos,d,n,k){var s=new Uint8Array(32);return crypto_core_hsalsa20(s,n,k,sigma),crypto_stream_salsa20_xor(c,cpos,m,mpos,d,n.subarray(16),s)}function add1305(h,c){var u=0,j;for(j=0;j<17;j++)u=u+(h[j]+c[j]|0)|0,h[j]=u&255,u>>>=8}function crypto_onetimeauth(out,outpos,m,mpos,n,k){var s,i,j,u;var x=new Uint32Array(17),r=new Uint32Array(17),h=new Uint32Array(17),c=new Uint32Array(17),g=new Uint32Array(17);for(j=0;j<17;j++)r[j]=h[j]=0;for(j=0;j<16;j++)r[j]=k[j];for(r[3]&=15,r[4]&=252,r[7]&=15,r[8]&=252,r[11]&=15,r[12]&=252,r[15]&=15;n>0;){for(j=0;j<17;j++)c[j]=0;for(j=0;j<16&&j<n;++j)c[j]=m[mpos+j];for(c[j]=1,mpos+=j,n-=j,add1305(h,c),i=0;i<17;i++)for(x[i]=0,j=0;j<17;j++)x[i]=x[i]+h[j]*(j<=i?r[i-j]:320*r[i+17-j]|0)|0|0;for(i=0;i<17;i++)h[i]=x[i];for(u=0,j=0;j<16;j++)u=u+h[j]|0,h[j]=u&255,u>>>=8;for(u=u+h[16]|0,h[16]=u&3,u=5*(u>>>2)|0,j=0;j<16;j++)u=u+h[j]|0,h[j]=u&255,u>>>=8;u=u+h[16]|0,h[16]=u}for(j=0;j<17;j++)g[j]=h[j];for(add1305(h,minusp),s=-(h[16]>>>7)|0,j=0;j<17;j++)h[j]^=s&(g[j]^h[j]);for(j=0;j<16;j++)c[j]=k[j+16];for(c[16]=0,add1305(h,c),j=0;j<16;j++)out[outpos+j]=h[j];return 0}function crypto_onetimeauth_verify(h,hpos,m,mpos,n,k){var x=new Uint8Array(16);return crypto_onetimeauth(x,0,m,mpos,n,k),crypto_verify_16(h,hpos,x,0)}function crypto_secretbox(c,m,d,n,k){var i;if(d<32)return-1;for(crypto_stream_xor(c,0,m,0,d,n,k),crypto_onetimeauth(c,16,c,32,d-32,c),i=0;i<16;i++)c[i]=0;return 0}function crypto_secretbox_open(m,c,d,n,k){var i;var x=new Uint8Array(32);if(d<32)return-1;if(crypto_stream(x,0,32,n,k),crypto_onetimeauth_verify(c,16,c,32,d-32,x)!==0)return-1;for(crypto_stream_xor(m,0,c,0,d,n,k),i=0;i<32;i++)m[i]=0;return 0}function set25519(r,a){var i;for(i=0;i<16;i++)r[i]=a[i]|0}function car25519(o){var c;var i;for(i=0;i<16;i++)o[i]+=65536,c=_Mathfloor3(o[i]/65536),o[(i+1)*(i<15?1:0)]+=c-1+37*(c-1)*(i===15?1:0),o[i]-=c*65536}function sel25519(p,q,b){var c=~(b-1),t;for(var i=0;i<16;i++)t=c&(p[i]^q[i]),p[i]^=t,q[i]^=t}function pack25519(o,n){var i,j,b;var m=gf(),t=gf();for(i=0;i<16;i++)t[i]=n[i];for(car25519(t),car25519(t),car25519(t),j=0;j<2;j++){for(m[0]=t[0]-65517,i=1;i<15;i++)m[i]=t[i]-65535-(m[i-1]>>16&1),m[i-1]&=65535;m[15]=t[15]-32767-(m[14]>>16&1),b=m[15]>>16&1,m[14]&=65535,sel25519(t,m,1-b)}for(i=0;i<16;i++)o[2*i]=t[i]&255,o[2*i+1]=t[i]>>8}function neq25519(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);return pack25519(c,a),pack25519(d,b),crypto_verify_32(c,0,d,0)}function par25519(a){var d=new Uint8Array(32);return pack25519(d,a),d[0]&1}function unpack25519(o,n){var i;for(i=0;i<16;i++)o[i]=n[2*i]+(n[2*i+1]<<8);o[15]&=32767}function A(o,a,b){var i;for(i=0;i<16;i++)o[i]=a[i]+b[i]|0}function Z(o,a,b){var i;for(i=0;i<16;i++)o[i]=a[i]-b[i]|0}function M(o,a,b){var t=new Float64Array(31),i,j;for(i=0;i<31;i++)t[i]=0;for(i=0;i<16;i++)for(j=0;j<16;j++)t[i+j]+=a[i]*b[j];for(i=0;i<15;i++)t[i]+=38*t[i+16];for(i=0;i<16;i++)o[i]=t[i];car25519(o),car25519(o)}function S(o,a){M(o,a,a)}function inv25519(o,i){var c=gf();var a;for(a=0;a<16;a++)c[a]=i[a];for(a=253;a>=0;a--)S(c,c),a!==2&&a!==4&&M(c,c,i);for(a=0;a<16;a++)o[a]=c[a]}function pow2523(o,i){var c=gf();var a;for(a=0;a<16;a++)c[a]=i[a];for(a=250;a>=0;a--)S(c,c),a!==1&&M(c,c,i);for(a=0;a<16;a++)o[a]=c[a]}function crypto_scalarmult(q,n,p){var z=new Uint8Array(32);var x=new Float64Array(80),r,i;var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf();for(i=0;i<31;i++)z[i]=n[i];for(z[31]=n[31]&127|64,z[0]&=248,unpack25519(x,p),i=0;i<16;i++)b[i]=x[i],d[i]=a[i]=c[i]=0;for(a[0]=d[0]=1,i=254;i>=0;--i)r=z[i>>>3]>>>(i&7)&1,sel25519(a,b,r),sel25519(c,d,r),A(e,a,c),Z(a,a,c),A(c,b,d),Z(b,b,d),S(d,e),S(f,a),M(a,c,a),M(c,b,e),A(e,a,c),Z(a,a,c),S(b,a),Z(c,d,f),M(a,c,_121665),A(a,a,d),M(c,c,a),M(a,d,f),M(d,b,x),S(b,e),sel25519(a,b,r),sel25519(c,d,r);for(i=0;i<16;i++)x[i+16]=a[i],x[i+32]=c[i],x[i+48]=b[i],x[i+64]=d[i];var x32=x.subarray(32);var x16=x.subarray(16);return inv25519(x32,x32),M(x16,x16,x32),pack25519(q,x16),0}function crypto_scalarmult_base(q,n){return crypto_scalarmult(q,n,_9)}function crypto_box_keypair(y,x){return randombytes(x,32),crypto_scalarmult_base(y,x)}function crypto_box_beforenm(k,y,x){var s=new Uint8Array(32);return crypto_scalarmult(s,x,y),crypto_core_hsalsa20(k,_0,s,sigma)}function crypto_box(c,m,d,n,y,x){var k=new Uint8Array(32);return crypto_box_beforenm(k,y,x),crypto_box_afternm(c,m,d,n,k)}function crypto_box_open(m,c,d,n,y,x){var k=new Uint8Array(32);return crypto_box_beforenm(k,y,x),crypto_box_open_afternm(m,c,d,n,k)}function add64(){var a=0,b=0,c=0,d=0,m16=65535,l,h,i;for(i=0;i<arguments.length;i++)l=arguments[i].lo,h=arguments[i].hi,a+=l&m16,b+=l>>>16,c+=h&m16,d+=h>>>16;return b+=a>>>16,c+=b>>>16,d+=c>>>16,new u64(c&m16|d<<16,a&m16|b<<16)}function shr64(x,c){return new u64(x.hi>>>c,x.lo>>>c|x.hi<<32-c)}function xor64(){var l=0,h=0,i;for(i=0;i<arguments.length;i++)l^=arguments[i].lo,h^=arguments[i].hi;return new u64(h,l)}function R(x,c){var c1=32-c,h,l;return c<32?(h=x.hi>>>c|x.lo<<c1,l=x.lo>>>c|x.hi<<c1):c<64&&(h=x.lo>>>c|x.hi<<c1,l=x.hi>>>c|x.lo<<c1),new u64(h,l)}function Ch(x,y,z){var h=x.hi&y.hi^~x.hi&z.hi,l=x.lo&y.lo^~x.lo&z.lo;return new u64(h,l)}function Maj(x,y,z){var h=x.hi&y.hi^x.hi&z.hi^y.hi&z.hi,l=x.lo&y.lo^x.lo&z.lo^y.lo&z.lo;return new u64(h,l)}function Sigma0(x){return xor64(R(x,28),R(x,34),R(x,39))}function Sigma1(x){return xor64(R(x,14),R(x,18),R(x,41))}function sigma0(x){return xor64(R(x,1),R(x,8),shr64(x,7))}function sigma1(x){return xor64(R(x,19),R(x,61),shr64(x,6))}function crypto_hashblocks(x,m,n){var z=[],b=[],a=[],w=[],t,i,j;for(i=0;i<8;i++)z[i]=a[i]=dl64(x,8*i);for(var pos=0;n>=128;){for(i=0;i<16;i++)w[i]=dl64(m,8*i+pos);for(i=0;i<80;i++){for(j=0;j<8;j++)b[j]=a[j];for(t=add64(a[7],Sigma1(a[4]),Ch(a[4],a[5],a[6]),K[i],w[i%16]),b[7]=add64(t,Sigma0(a[0]),Maj(a[0],a[1],a[2])),b[3]=add64(b[3],t),j=0;j<8;j++)a[(j+1)%8]=b[j];if(i%16===15)for(j=0;j<16;j++)w[j]=add64(w[j],w[(j+9)%16],sigma0(w[(j+1)%16]),sigma1(w[(j+14)%16]))}for(i=0;i<8;i++)a[i]=add64(a[i],z[i]),z[i]=a[i];pos+=128,n-=128}for(i=0;i<8;i++)ts64(x,8*i,z[i]);return n}function crypto_hash(out,m,n){var h=new Uint8Array(64),x=new Uint8Array(256);var b=n,i;for(i=0;i<64;i++)h[i]=iv[i];for(crypto_hashblocks(h,m,n),n%=128,i=0;i<256;i++)x[i]=0;for(i=0;i<n;i++)x[i]=m[b-n+i];for(x[n]=128,n=256-128*(n<112?1:0),x[n-9]=0,ts64(x,n-8,new u64(b/536870912|0,b<<3)),crypto_hashblocks(h,x,n),i=0;i<64;i++)out[i]=h[i];return 0}function add(p,q){var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf(),g=gf(),h=gf(),t=gf();Z(a,p[1],p[0]),Z(t,q[1],q[0]),M(a,a,t),A(b,p[0],p[1]),A(t,q[0],q[1]),M(b,b,t),M(c,p[3],q[3]),M(c,c,D2),M(d,p[2],q[2]),A(d,d,d),Z(e,b,a),Z(f,d,c),A(g,d,c),A(h,b,a),M(p[0],e,f),M(p[1],h,g),M(p[2],g,f),M(p[3],e,h)}function cswap(p,q,b){var i;for(i=0;i<4;i++)sel25519(p[i],q[i],b)}function pack(r,p){var tx=gf(),ty=gf(),zi=gf();inv25519(zi,p[2]),M(tx,p[0],zi),M(ty,p[1],zi),pack25519(r,ty),r[31]^=par25519(tx)<<7}function scalarmult(p,q,s){var b,i;for(set25519(p[0],gf0),set25519(p[1],gf1),set25519(p[2],gf1),set25519(p[3],gf0),i=255;i>=0;--i)b=s[i/8|0]>>(i&7)&1,cswap(p,q,b),add(q,p),add(p,p),cswap(p,q,b)}function scalarbase(p,s){var q=[gf(),gf(),gf(),gf()];set25519(q[0],X),set25519(q[1],Y),set25519(q[2],gf1),M(q[3],X,Y),scalarmult(p,q,s)}function crypto_sign_keypair(pk,sk,seeded){var d=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()];var i;for(!seeded&&randombytes(sk,32),crypto_hash(d,sk,32),d[0]&=248,d[31]&=127,d[31]|=64,scalarbase(p,d),pack(pk,p),i=0;i<32;i++)sk[i+32]=pk[i];return 0}function modL(r,x){var carry,i,j,k;for(i=63;i>=32;--i){for(carry=0,j=i-32,k=i-12;j<k;++j)x[j]+=carry-16*x[i]*L[j-(i-32)],carry=x[j]+128>>8,x[j]-=carry*256;x[j]+=carry,x[i]=0}for(carry=0,j=0;j<32;j++)x[j]+=carry-(x[31]>>4)*L[j],carry=x[j]>>8,x[j]&=255;for(j=0;j<32;j++)x[j]-=carry*L[j];for(i=0;i<32;i++)x[i+1]+=x[i]>>8,r[i]=x[i]&255}function reduce(r){var x=new Float64Array(64),i;for(i=0;i<64;i++)x[i]=r[i];for(i=0;i<64;i++)r[i]=0;modL(r,x)}function crypto_sign(sm,m,n,sk){var d=new Uint8Array(64),h=new Uint8Array(64),r=new Uint8Array(64);var x=new Float64Array(64),i,j;var p=[gf(),gf(),gf(),gf()];crypto_hash(d,sk,32),d[0]&=248,d[31]&=127,d[31]|=64;var smlen=n+64;for(i=0;i<n;i++)sm[64+i]=m[i];for(i=0;i<32;i++)sm[32+i]=d[32+i];for(crypto_hash(r,sm.subarray(32),n+32),reduce(r),scalarbase(p,r),pack(sm,p),i=32;i<64;i++)sm[i]=sk[i];for(crypto_hash(h,sm,n+64),reduce(h),i=0;i<64;i++)x[i]=0;for(i=0;i<32;i++)x[i]=r[i];for(i=0;i<32;i++)for(j=0;j<32;j++)x[i+j]+=h[i]*d[j];return modL(sm.subarray(32),x),smlen}function unpackneg(r,p){var t=gf(),chk=gf(),num=gf(),den=gf(),den2=gf(),den4=gf(),den6=gf();return(set25519(r[2],gf1),unpack25519(r[1],p),S(num,r[1]),M(den,num,D),Z(num,num,r[2]),A(den,r[2],den),S(den2,den),S(den4,den2),M(den6,den4,den2),M(t,den6,num),M(t,t,den),pow2523(t,t),M(t,t,num),M(t,t,den),M(t,t,den),M(r[0],t,den),S(chk,r[0]),M(chk,chk,den),neq25519(chk,num)&&M(r[0],r[0],I),S(chk,r[0]),M(chk,chk,den),neq25519(chk,num))?-1:(par25519(r[0])===p[31]>>7&&Z(r[0],gf0,r[0]),M(r[3],r[0],r[1]),0)}function crypto_sign_open(m,sm,n,pk){var i,mlen;var t=new Uint8Array(32),h=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()],q=[gf(),gf(),gf(),gf()];if(mlen=-1,n<64)return-1;if(unpackneg(q,pk))return-1;for(i=0;i<n;i++)m[i]=sm[i];for(i=0;i<32;i++)m[i+32]=pk[i];if(crypto_hash(h,m,n),reduce(h),scalarmult(p,q,h),scalarbase(q,sm.subarray(32)),add(p,q),pack(t,p),n-=64,crypto_verify_32(sm,0,t,0)){for(i=0;i<n;i++)m[i]=0;return-1}for(i=0;i<n;i++)m[i]=sm[i+64];return mlen=n,mlen}function checkLengths(k,n){if(k.length!==crypto_secretbox_KEYBYTES)throw new Error('bad key size');if(n.length!==crypto_secretbox_NONCEBYTES)throw new Error('bad nonce size')}function checkBoxLengths(pk,sk){if(pk.length!==crypto_box_PUBLICKEYBYTES)throw new Error('bad public key size');if(sk.length!==crypto_box_SECRETKEYBYTES)throw new Error('bad secret key size')}function checkArrayTypes(){var type={}.toString,t;for(var i=0;i<arguments.length;i++)if((t=type.call(arguments[i]))!=='[object Uint8Array]')throw new TypeError('unexpected type '+t+', use Uint8Array')}var u64=function(h,l){this.hi=h|0>>>0,this.lo=l|0>>>0};var gf=function(init){var r=new Float64Array(16),i;if(init)for(i=0;i<init.length;i++)r[i]=init[i];return r};var randombytes=function(){throw new Error('no PRNG')};var _0=new Uint8Array(16);var _9=new Uint8Array(32);_9[0]=9;var gf0=gf(),gf1=gf([1]),_121665=gf([56129,1]),D=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),D2=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),X=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Y=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),I=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);var sigma=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);var minusp=new Uint32Array([5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,252]);var crypto_box_afternm=crypto_secretbox;var crypto_box_open_afternm=crypto_secretbox_open;var K=[new u64(1116352408,3609767458),new u64(1899447441,602891725),new u64(3049323471,3964484399),new u64(3921009573,2173295548),new u64(961987163,4081628472),new u64(1508970993,3053834265),new u64(2453635748,2937671579),new u64(2870763221,3664609560),new u64(3624381080,2734883394),new u64(310598401,1164996542),new u64(607225278,1323610764),new u64(1426881987,3590304994),new u64(1925078388,4068182383),new u64(2162078206,991336113),new u64(2614888103,633803317),new u64(3248222580,3479774868),new u64(3835390401,2666613458),new u64(4022224774,944711139),new u64(264347078,2341262773),new u64(604807628,2007800933),new u64(770255983,1495990901),new u64(1249150122,1856431235),new u64(1555081692,3175218132),new u64(1996064986,2198950837),new u64(2554220882,3999719339),new u64(2821834349,766784016),new u64(2952996808,2566594879),new u64(3210313671,3203337956),new u64(3336571891,1034457026),new u64(3584528711,2466948901),new u64(113926993,3758326383),new u64(338241895,168717936),new u64(666307205,1188179964),new u64(773529912,1546045734),new u64(1294757372,1522805485),new u64(1396182291,2643833823),new u64(1695183700,2343527390),new u64(1986661051,1014477480),new u64(2177026350,1206759142),new u64(2456956037,344077627),new u64(2730485921,1290863460),new u64(2820302411,3158454273),new u64(3259730800,3505952657),new u64(3345764771,106217008),new u64(3516065817,3606008344),new u64(3600352804,1432725776),new u64(4094571909,1467031594),new u64(275423344,851169720),new u64(430227734,3100823752),new u64(506948616,1363258195),new u64(659060556,3750685593),new u64(883997877,3785050280),new u64(958139571,3318307427),new u64(1322822218,3812723403),new u64(1537002063,2003034995),new u64(1747873779,3602036899),new u64(1955562222,1575990012),new u64(2024104815,1125592928),new u64(2227730452,2716904306),new u64(2361852424,442776044),new u64(2428436474,593698344),new u64(2756734187,3733110249),new u64(3204031479,2999351573),new u64(3329325298,3815920427),new u64(3391569614,3928383900),new u64(3515267271,566280711),new u64(3940187606,3454069534),new u64(4118630271,4000239992),new u64(116418474,1914138554),new u64(174292421,2731055270),new u64(289380356,3203993006),new u64(460393269,320620315),new u64(685471733,587496836),new u64(852142971,1086792851),new u64(1017036298,365543100),new u64(1126000580,2618297676),new u64(1288033470,3409855158),new u64(1501505948,4234509866),new u64(1607167915,987167468),new u64(1816402316,1246189591)];var iv=new Uint8Array([106,9,230,103,243,188,201,8,187,103,174,133,132,202,167,59,60,110,243,114,254,148,248,43,165,79,245,58,95,29,54,241,81,14,82,127,173,230,130,209,155,5,104,140,43,62,108,31,31,131,217,171,251,65,189,107,91,224,205,25,19,126,33,121]);var L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);var crypto_secretbox_KEYBYTES=32,crypto_secretbox_NONCEBYTES=24,crypto_secretbox_ZEROBYTES=32,crypto_secretbox_BOXZEROBYTES=16,crypto_scalarmult_BYTES=32,crypto_scalarmult_SCALARBYTES=32,crypto_box_PUBLICKEYBYTES=32,crypto_box_SECRETKEYBYTES=32,crypto_box_BEFORENMBYTES=32,crypto_box_NONCEBYTES=crypto_secretbox_NONCEBYTES,crypto_box_ZEROBYTES=crypto_secretbox_ZEROBYTES,crypto_box_BOXZEROBYTES=crypto_secretbox_BOXZEROBYTES,crypto_sign_BYTES=64,crypto_sign_PUBLICKEYBYTES=32,crypto_sign_SECRETKEYBYTES=64,crypto_sign_SEEDBYTES=32,crypto_hash_BYTES=64;nacl.lowlevel={crypto_core_hsalsa20:crypto_core_hsalsa20,crypto_stream_xor:crypto_stream_xor,crypto_stream:crypto_stream,crypto_stream_salsa20_xor:crypto_stream_salsa20_xor,crypto_stream_salsa20:crypto_stream_salsa20,crypto_onetimeauth:crypto_onetimeauth,crypto_onetimeauth_verify:crypto_onetimeauth_verify,crypto_verify_16:crypto_verify_16,crypto_verify_32:crypto_verify_32,crypto_secretbox:crypto_secretbox,crypto_secretbox_open:crypto_secretbox_open,crypto_scalarmult:crypto_scalarmult,crypto_scalarmult_base:crypto_scalarmult_base,crypto_box_beforenm:crypto_box_beforenm,crypto_box_afternm:crypto_box_afternm,crypto_box:crypto_box,crypto_box_open:crypto_box_open,crypto_box_keypair:crypto_box_keypair,crypto_hash:crypto_hash,crypto_sign:crypto_sign,crypto_sign_keypair:crypto_sign_keypair,crypto_sign_open:crypto_sign_open,crypto_secretbox_KEYBYTES:crypto_secretbox_KEYBYTES,crypto_secretbox_NONCEBYTES:crypto_secretbox_NONCEBYTES,crypto_secretbox_ZEROBYTES:crypto_secretbox_ZEROBYTES,crypto_secretbox_BOXZEROBYTES:crypto_secretbox_BOXZEROBYTES,crypto_scalarmult_BYTES:crypto_scalarmult_BYTES,crypto_scalarmult_SCALARBYTES:crypto_scalarmult_SCALARBYTES,crypto_box_PUBLICKEYBYTES:crypto_box_PUBLICKEYBYTES,crypto_box_SECRETKEYBYTES:crypto_box_SECRETKEYBYTES,crypto_box_BEFORENMBYTES:crypto_box_BEFORENMBYTES,crypto_box_NONCEBYTES:crypto_box_NONCEBYTES,crypto_box_ZEROBYTES:crypto_box_ZEROBYTES,crypto_box_BOXZEROBYTES:crypto_box_BOXZEROBYTES,crypto_sign_BYTES:crypto_sign_BYTES,crypto_sign_PUBLICKEYBYTES:crypto_sign_PUBLICKEYBYTES,crypto_sign_SECRETKEYBYTES:crypto_sign_SECRETKEYBYTES,crypto_sign_SEEDBYTES:crypto_sign_SEEDBYTES,crypto_hash_BYTES:crypto_hash_BYTES},nacl.util={},nacl.util.decodeUTF8=function(s){var d=unescape(encodeURIComponent(s)),b=new Uint8Array(d.length),i;for(i=0;i<d.length;i++)b[i]=d.charCodeAt(i);return b},nacl.util.encodeUTF8=function(arr){var s=[],i;for(i=0;i<arr.length;i++)s.push(_StringfromCharCode3(arr[i]));return decodeURIComponent(escape(s.join('')))},nacl.util.encodeBase64=function(arr){if(typeof btoa==='undefined')return new Buffer(arr).toString('base64');var s=[],len=arr.length,i;for(i=0;i<len;i++)s.push(_StringfromCharCode3(arr[i]));return btoa(s.join(''))},nacl.util.decodeBase64=function(s){if(typeof atob==='undefined')return new Uint8Array(Array.prototype.slice.call(new Buffer(s,'base64'),0));var d=atob(s),b=new Uint8Array(d.length),i;for(i=0;i<d.length;i++)b[i]=d.charCodeAt(i);return b},nacl.randomBytes=function(n){var b=new Uint8Array(n);return randombytes(b,n),b},nacl.secretbox=function(msg,nonce,key){checkArrayTypes(msg,nonce,key),checkLengths(key,nonce);var m=new Uint8Array(crypto_secretbox_ZEROBYTES+msg.length);var c=new Uint8Array(m.length);for(var i=0;i<msg.length;i++)m[i+crypto_secretbox_ZEROBYTES]=msg[i];return crypto_secretbox(c,m,m.length,nonce,key),c.subarray(crypto_secretbox_BOXZEROBYTES)},nacl.secretbox.open=function(box,nonce,key){checkArrayTypes(box,nonce,key),checkLengths(key,nonce);var c=new Uint8Array(crypto_secretbox_BOXZEROBYTES+box.length);var m=new Uint8Array(c.length);for(var i=0;i<box.length;i++)c[i+crypto_secretbox_BOXZEROBYTES]=box[i];return!(c.length<32)&&!(crypto_secretbox_open(m,c,c.length,nonce,key)!==0)&&m.subarray(crypto_secretbox_ZEROBYTES)},nacl.secretbox.keyLength=crypto_secretbox_KEYBYTES,nacl.secretbox.nonceLength=crypto_secretbox_NONCEBYTES,nacl.secretbox.overheadLength=crypto_secretbox_BOXZEROBYTES,nacl.scalarMult=function(n,p){if(checkArrayTypes(n,p),n.length!==crypto_scalarmult_SCALARBYTES)throw new Error('bad n size');if(p.length!==crypto_scalarmult_BYTES)throw new Error('bad p size');var q=new Uint8Array(crypto_scalarmult_BYTES);return crypto_scalarmult(q,n,p),q},nacl.scalarMult.base=function(n){if(checkArrayTypes(n),n.length!==crypto_scalarmult_SCALARBYTES)throw new Error('bad n size');var q=new Uint8Array(crypto_scalarmult_BYTES);return crypto_scalarmult_base(q,n),q},nacl.scalarMult.scalarLength=crypto_scalarmult_SCALARBYTES,nacl.scalarMult.groupElementLength=crypto_scalarmult_BYTES,nacl.box=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox(msg,nonce,k)},nacl.box.before=function(publicKey,secretKey){checkArrayTypes(publicKey,secretKey),checkBoxLengths(publicKey,secretKey);var k=new Uint8Array(crypto_box_BEFORENMBYTES);return crypto_box_beforenm(k,publicKey,secretKey),k},nacl.box.after=nacl.secretbox,nacl.box.open=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox.open(msg,nonce,k)},nacl.box.open.after=nacl.secretbox.open,nacl.box.keyPair=function(){var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_box_SECRETKEYBYTES);return crypto_box_keypair(pk,sk),{publicKey:pk,secretKey:sk}},nacl.box.keyPair.fromSecretKey=function(secretKey){if(checkArrayTypes(secretKey),secretKey.length!==crypto_box_SECRETKEYBYTES)throw new Error('bad secret key size');var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);return crypto_scalarmult_base(pk,secretKey),{publicKey:pk,secretKey:new Uint8Array(secretKey)}},nacl.box.publicKeyLength=crypto_box_PUBLICKEYBYTES,nacl.box.secretKeyLength=crypto_box_SECRETKEYBYTES,nacl.box.sharedKeyLength=crypto_box_BEFORENMBYTES,nacl.box.nonceLength=crypto_box_NONCEBYTES,nacl.box.overheadLength=nacl.secretbox.overheadLength,nacl.sign=function(msg,secretKey){if(checkArrayTypes(msg,secretKey),secretKey.length!==crypto_sign_SECRETKEYBYTES)throw new Error('bad secret key size');var signedMsg=new Uint8Array(crypto_sign_BYTES+msg.length);return crypto_sign(signedMsg,msg,msg.length,secretKey),signedMsg},nacl.sign.open=function(signedMsg,publicKey){if(arguments.length!==2)throw new Error('nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?');if(checkArrayTypes(signedMsg,publicKey),publicKey.length!==crypto_sign_PUBLICKEYBYTES)throw new Error('bad public key size');var tmp=new Uint8Array(signedMsg.length);var mlen=crypto_sign_open(tmp,signedMsg,signedMsg.length,publicKey);if(mlen<0)return null;var m=new Uint8Array(mlen);for(var i=0;i<m.length;i++)m[i]=tmp[i];return m},nacl.sign.detached=function(msg,secretKey){var signedMsg=nacl.sign(msg,secretKey);var sig=new Uint8Array(crypto_sign_BYTES);for(var i=0;i<sig.length;i++)sig[i]=signedMsg[i];return sig},nacl.sign.detached.verify=function(msg,sig,publicKey){if(checkArrayTypes(msg,sig,publicKey),sig.length!==crypto_sign_BYTES)throw new Error('bad signature size');if(publicKey.length!==crypto_sign_PUBLICKEYBYTES)throw new Error('bad public key size');var sm=new Uint8Array(crypto_sign_BYTES+msg.length);var m=new Uint8Array(crypto_sign_BYTES+msg.length);var i;for(i=0;i<crypto_sign_BYTES;i++)sm[i]=sig[i];for(i=0;i<msg.length;i++)sm[i+crypto_sign_BYTES]=msg[i];return crypto_sign_open(m,sm,sm.length,publicKey)>=0},nacl.sign.keyPair=function(){var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);return crypto_sign_keypair(pk,sk),{publicKey:pk,secretKey:sk}},nacl.sign.keyPair.fromSecretKey=function(secretKey){if(checkArrayTypes(secretKey),secretKey.length!==crypto_sign_SECRETKEYBYTES)throw new Error('bad secret key size');var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);for(var i=0;i<pk.length;i++)pk[i]=secretKey[32+i];return{publicKey:pk,secretKey:new Uint8Array(secretKey)}},nacl.sign.keyPair.fromSeed=function(seed){if(checkArrayTypes(seed),seed.length!==crypto_sign_SEEDBYTES)throw new Error('bad seed size');var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);for(var i=0;i<32;i++)sk[i]=seed[i];return crypto_sign_keypair(pk,sk,!0),{publicKey:pk,secretKey:sk}},nacl.sign.publicKeyLength=crypto_sign_PUBLICKEYBYTES,nacl.sign.secretKeyLength=crypto_sign_SECRETKEYBYTES,nacl.sign.seedLength=crypto_sign_SEEDBYTES,nacl.sign.signatureLength=crypto_sign_BYTES,nacl.hash=function(msg){checkArrayTypes(msg);var h=new Uint8Array(crypto_hash_BYTES);return crypto_hash(h,msg,msg.length),h},nacl.hash.hashLength=crypto_hash_BYTES,nacl.verify=function(x,y){return checkArrayTypes(x,y),x.length!==0&&y.length!==0&&x.length===y.length&&vn(x,0,y,0,x.length)===0},nacl.setPRNG=function(fn){randombytes=fn},function(){var crypto;typeof window==='undefined'?typeof require!=='undefined'&&(crypto=require('crypto'),crypto&&nacl.setPRNG(function(x,n){var v=crypto.randomBytes(n),i;for(i=0;i<n;i++)x[i]=v[i]})):(window.crypto&&window.crypto.getRandomValues?crypto=window.crypto:window.msCrypto&&window.msCrypto.getRandomValues&&(crypto=window.msCrypto),crypto&&nacl.setPRNG(function(x,n){var v=new Uint8Array(n),i;for(crypto.getRandomValues(v),i=0;i<n;i++)x[i]=v[i]}))}()})(typeof module!=='undefined'&&module.exports?module.exports:window.nacl=window.nacl||{})}).call(this,require('buffer').Buffer)},{'buffer':80,'crypto':86}],202:[function(require,module,exports){module.exports={'name':'kbpgp','description':'Keybase\'s PGP Implementation','keywords':['crypto','pgp','keybase'],'author':'Maxwell Krohn','version':'2.0.9','license':'BSD-3-Clause','main':'./lib/main.js','directories':{'lib':'lib/'},'homepage':'http://github.com/keybase/kbpgp','bugs':'https://github.com/keybase/kbpgp/issues','repository':{'type':'git','url':'git://github.com/keybase/kbpgp.git'},'dependencies':{'bn':'^1.0.0','deep-equal':'>=0.2.1','iced-error':'>=0.0.9','iced-runtime':'>=0.0.1','keybase-compressjs':'^1.0.1-c','keybase-ecurve':'^1.0.0','pgp-utils':'>=0.0.28','purepack':'>=1.0.1','triplesec':'>=3.0.19','tweetnacl':'^0.12.2'},'devDependencies':{'browserify':'^5.9.1','colors':'0.6.2','iced-coffee-script':'1.7.1-c','iced-test':'>=0.0.21','icsify':'0.6.0','minimist':'0.0.8','optimist':'0.6.1','uglify-js':'^2.4.13'}}},{}]},{},[29])(29)})}).call(exports,__webpack_require__(7),__webpack_require__(37).setImmediate)},function(module,exports,__webpack_require__){!function(r){'use strict';function n(r,n){return r<<n|r>>>32-n}function e(r,n){var e=255&r[n+3];return e=e<<8|255&r[n+2],e=e<<8|255&r[n+1],e<<8|255&r[n+0]}function t(r,n){var e=r[n]<<24|r[n+1]<<16|r[n+2]<<8|r[n+3],t=r[n+4]<<24|r[n+5]<<16|r[n+6]<<8|r[n+7];return new sr(e,t)}function o(r,n,e){var t;for(t=0;t<4;t++)r[n+t]=255&e,e>>>=8}function i(r,n,e){r[n]=e.hi>>24&255,r[n+1]=e.hi>>16&255,r[n+2]=e.hi>>8&255,r[n+3]=255&e.hi,r[n+4]=e.lo>>24&255,r[n+5]=e.lo>>16&255,r[n+6]=e.lo>>8&255,r[n+7]=255&e.lo}function f(r,n,e,t,o){var f=0,i;for(i=0;i<o;i++)f|=r[n+i]^e[t+i];return(1&f-1>>>8)-1}function a(r,n,e,t){return f(r,n,e,t,16)}function u(r,n,e,t){return f(r,n,e,t,32)}function c(r,t,i,f,a){var y=new Uint32Array(16),l=new Uint32Array(16),s=new Uint32Array(16),h=new Uint32Array(4),u,c,w;for(u=0;u<4;u++)l[5*u]=e(f,4*u),l[1+u]=e(i,4*u),l[6+u]=e(t,4*u),l[11+u]=e(i,16+4*u);for(u=0;u<16;u++)s[u]=l[u];for(u=0;u<20;u++){for(c=0;c<4;c++){for(w=0;w<4;w++)h[w]=l[(5*c+4*w)%16];for(h[1]^=n(h[0]+h[3]|0,7),h[2]^=n(h[1]+h[0]|0,9),h[3]^=n(h[2]+h[1]|0,13),h[0]^=n(h[3]+h[2]|0,18),w=0;w<4;w++)y[4*c+(c+w)%4]=h[w]}for(w=0;w<16;w++)l[w]=y[w]}if(a){for(u=0;u<16;u++)l[u]=l[u]+s[u]|0;for(u=0;u<4;u++)l[5*u]=l[5*u]-e(f,4*u)|0,l[6+u]=l[6+u]-e(t,4*u)|0;for(u=0;u<4;u++)o(r,4*u,l[5*u]),o(r,16+4*u,l[6+u])}else for(u=0;u<16;u++)o(r,4*u,l[u]+s[u]|0)}function w(r,n,e,t){return c(r,n,e,t,!1),0}function y(r,n,e,t){return c(r,n,e,t,!0),0}function l(r,n,e,t,o,i,f){var c=new Uint8Array(16),y=new Uint8Array(64),a,u;if(!o)return 0;for(u=0;u<16;u++)c[u]=0;for(u=0;u<8;u++)c[u]=i[u];for(;o>=64;){for(w(y,c,f,Br),u=0;u<64;u++)r[n+u]=(e?e[t+u]:0)^y[u];for(a=1,u=8;u<16;u++)a=a+(255&c[u])|0,c[u]=255&a,a>>>=8;o-=64,n+=64,e&&(t+=64)}if(o>0)for(w(y,c,f,Br),u=0;u<o;u++)r[n+u]=(e?e[t+u]:0)^y[u];return 0}function s(r,n,e,t,o){return l(r,n,null,0,e,t,o)}function h(r,n,e,t,o){var i=new Uint8Array(32);return y(i,t,o,Br),s(r,n,e,t.subarray(16),i)}function v(r,n,e,t,o,i,f){var a=new Uint8Array(32);return y(a,i,f,Br),l(r,n,e,t,o,i.subarray(16),a)}function g(r,n){var t=0,e;for(e=0;e<17;e++)t=t+(r[e]+n[e]|0)|0,r[e]=255&t,t>>>=8}function b(r,n,e,t,o,i){var w=new Uint32Array(17),y=new Uint32Array(17),l=new Uint32Array(17),s=new Uint32Array(17),h=new Uint32Array(17),f,a,u,c;for(u=0;u<17;u++)y[u]=l[u]=0;for(u=0;u<16;u++)y[u]=i[u];for(y[3]&=15,y[4]&=252,y[7]&=15,y[8]&=252,y[11]&=15,y[12]&=252,y[15]&=15;o>0;){for(u=0;u<17;u++)s[u]=0;for(u=0;u<16&&u<o;++u)s[u]=e[t+u];for(s[u]=1,t+=u,o-=u,g(l,s),a=0;a<17;a++)for(w[a]=0,u=0;u<17;u++)w[a]=w[a]+l[u]*(u<=a?y[a-u]:320*y[a+17-u]|0)|0|0;for(a=0;a<17;a++)l[a]=w[a];for(c=0,u=0;u<16;u++)c=c+l[u]|0,l[u]=255&c,c>>>=8;for(c=c+l[16]|0,l[16]=3&c,c=5*(c>>>2)|0,u=0;u<16;u++)c=c+l[u]|0,l[u]=255&c,c>>>=8;c=c+l[16]|0,l[16]=c}for(u=0;u<17;u++)h[u]=l[u];for(g(l,Sr),f=0|-(l[16]>>>7),u=0;u<17;u++)l[u]^=f&(h[u]^l[u]);for(u=0;u<16;u++)s[u]=i[u+16];for(s[16]=0,g(l,s),u=0;u<16;u++)r[n+u]=l[u];return 0}function p(r,n,e,t,o,i){var f=new Uint8Array(16);return b(f,0,e,t,o,i),a(r,n,f,0)}function _(r,n,e,t,o){var i;if(e<32)return-1;for(v(r,0,n,0,e,t,o),b(r,16,r,32,e-32,r),i=0;i<16;i++)r[i]=0;return 0}function A(r,n,e,t,o){var f=new Uint8Array(32),i;if(e<32)return-1;if(h(f,0,32,t,o),0!==p(n,16,n,32,e-32,f))return-1;for(v(r,0,n,0,e,t,o),i=0;i<32;i++)r[i]=0;return 0}function U(r,n){var e;for(e=0;e<16;e++)r[e]=0|n[e]}function E(r){var n,e;for(e=0;e<16;e++)r[e]+=65536,n=Math.floor(r[e]/65536),r[(e+1)*(e<15?1:0)]+=n-1+37*(n-1)*(15===e?1:0),r[e]-=65536*n}function x(r,n,e){for(var o=~(e-1),i=0,t;i<16;i++)t=o&(r[i]^n[i]),r[i]^=t,n[i]^=t}function d(r,n){var i=hr(),f=hr(),e,t,o;for(e=0;e<16;e++)f[e]=n[e];for(E(f),E(f),E(f),t=0;t<2;t++){for(i[0]=f[0]-65517,e=1;e<15;e++)i[e]=f[e]-65535-(i[e-1]>>16&1),i[e-1]&=65535;i[15]=f[15]-32767-(i[14]>>16&1),o=i[15]>>16&1,i[14]&=65535,x(f,i,1-o)}for(e=0;e<16;e++)r[2*e]=255&f[e],r[2*e+1]=f[e]>>8}function m(r,n){var e=new Uint8Array(32),t=new Uint8Array(32);return d(e,r),d(t,n),u(e,0,t,0)}function B(r){var n=new Uint8Array(32);return d(n,r),1&n[0]}function S(r,n){var e;for(e=0;e<16;e++)r[e]=n[2*e]+(n[2*e+1]<<8);r[15]&=32767}function K(r,n,e){var t;for(t=0;t<16;t++)r[t]=n[t]+e[t]|0}function Y(r,n,e){var t;for(t=0;t<16;t++)r[t]=n[t]-e[t]|0}function T(r,n,e){var i=new Float64Array(31),t,o;for(t=0;t<31;t++)i[t]=0;for(t=0;t<16;t++)for(o=0;o<16;o++)i[t+o]+=n[t]*e[o];for(t=0;t<15;t++)i[t]+=38*i[t+16];for(t=0;t<16;t++)r[t]=i[t];E(r),E(r)}function L(r,n){T(r,n,n)}function k(r,n){var t=hr(),e;for(e=0;e<16;e++)t[e]=n[e];for(e=253;e>=0;e--)L(t,t),2!==e&&4!==e&&T(t,t,n);for(e=0;e<16;e++)r[e]=t[e]}function z(r,n){var t=hr(),e;for(e=0;e<16;e++)t[e]=n[e];for(e=250;e>=0;e--)L(t,t),1!==e&&T(t,t,n);for(e=0;e<16;e++)r[e]=t[e]}function R(r,n,e){var i=new Uint8Array(32),f=new Float64Array(80),a=hr(),u=hr(),c=hr(),w=hr(),y=hr(),l=hr(),t,o;for(o=0;o<31;o++)i[o]=n[o];for(i[31]=127&n[31]|64,i[0]&=248,S(f,e),o=0;o<16;o++)u[o]=f[o],w[o]=a[o]=c[o]=0;for(a[0]=w[0]=1,o=254;o>=0;--o)t=i[o>>>3]>>>(7&o)&1,x(a,u,t),x(c,w,t),K(y,a,c),Y(a,a,c),K(c,u,w),Y(u,u,w),L(w,y),L(l,a),T(a,c,a),T(c,u,y),K(y,a,c),Y(a,a,c),L(u,a),Y(c,w,l),T(a,c,Ar),K(a,a,w),T(c,c,a),T(a,w,l),T(w,u,f),L(u,y),x(a,u,t),x(c,w,t);for(o=0;o<16;o++)f[o+16]=a[o],f[o+32]=c[o],f[o+48]=u[o],f[o+64]=w[o];var s=f.subarray(32),h=f.subarray(16);return k(s,s),T(h,h,s),d(r,h),0}function P(r,n){return R(r,n,br)}function N(r,n){return vr(n,32),P(r,n)}function O(r,n,e){var t=new Uint8Array(32);return R(t,e,n),y(r,gr,t,Br)}function C(r,n,e,t,o,i){var f=new Uint8Array(32);return O(f,o,i),Kr(r,n,e,t,f)}function F(r,n,e,t,o,i){var f=new Uint8Array(32);return O(f,o,i),Yr(r,n,e,t,f)}function M(){var t=0,o=0,i=0,f=0,a=65535,r,n,e;for(e=0;e<arguments.length;e++)r=arguments[e].lo,n=arguments[e].hi,t+=r&a,o+=r>>>16,i+=n&a,f+=n>>>16;return o+=t>>>16,i+=o>>>16,f+=i>>>16,new sr(i&a|f<<16,t&a|o<<16)}function G(r,n){return new sr(r.hi>>>n,r.lo>>>n|r.hi<<32-n)}function Z(){var n=0,e=0,r;for(r=0;r<arguments.length;r++)n^=arguments[r].lo,e^=arguments[r].hi;return new sr(e,n)}function q(r,n){var o=32-n,e,t;return n<32?(e=r.hi>>>n|r.lo<<o,t=r.lo>>>n|r.hi<<o):n<64&&(e=r.lo>>>n|r.hi<<o,t=r.hi>>>n|r.lo<<o),new sr(e,t)}function I(r,n,e){var t=r.hi&n.hi^~r.hi&e.hi,o=r.lo&n.lo^~r.lo&e.lo;return new sr(t,o)}function V(r,n,e){var t=r.hi&n.hi^r.hi&e.hi^n.hi&e.hi,o=r.lo&n.lo^r.lo&e.lo^n.lo&e.lo;return new sr(t,o)}function X(r){return Z(q(r,28),q(r,34),q(r,39))}function D(r){return Z(q(r,14),q(r,18),q(r,41))}function j(r){return Z(q(r,1),q(r,8),G(r,7))}function H(r){return Z(q(r,19),q(r,61),G(r,6))}function J(r,n,e){var u=[],c=[],w=[],y=[],o,f,a;for(f=0;f<8;f++)u[f]=w[f]=t(r,8*f);for(var l=0;e>=128;){for(f=0;f<16;f++)y[f]=t(n,8*f+l);for(f=0;f<80;f++){for(a=0;a<8;a++)c[a]=w[a];for(o=M(w[7],D(w[4]),I(w[4],w[5],w[6]),Tr[f],y[f%16]),c[7]=M(o,X(w[0]),V(w[0],w[1],w[2])),c[3]=M(c[3],o),a=0;a<8;a++)w[(a+1)%8]=c[a];if(f%16===15)for(a=0;a<16;a++)y[a]=M(y[a],y[(a+9)%16],j(y[(a+1)%16]),H(y[(a+14)%16]))}for(f=0;f<8;f++)w[f]=M(w[f],u[f]),u[f]=w[f];l+=128,e-=128}for(f=0;f<8;f++)i(r,8*f,u[f]);return e}function Q(r,n,e){var o=new Uint8Array(64),f=new Uint8Array(256),a=e,t;for(t=0;t<64;t++)o[t]=Lr[t];for(J(o,n,e),e%=128,t=0;t<256;t++)f[t]=0;for(t=0;t<e;t++)f[t]=n[a-e+t];for(f[e]=128,e=256-128*(e<112?1:0),f[e-9]=0,i(f,e-8,new sr(a/536870912|0,a<<3)),J(o,f,e),t=0;t<64;t++)r[t]=o[t];return 0}function W(r,n){var e=hr(),t=hr(),o=hr(),i=hr(),f=hr(),a=hr(),u=hr(),c=hr(),w=hr();Y(e,r[1],r[0]),Y(w,n[1],n[0]),T(e,e,w),K(t,r[0],r[1]),K(w,n[0],n[1]),T(t,t,w),T(o,r[3],n[3]),T(o,o,Er),T(i,r[2],n[2]),K(i,i,i),Y(f,t,e),Y(a,i,o),K(u,i,o),K(c,t,e),T(r[0],f,a),T(r[1],c,u),T(r[2],u,a),T(r[3],f,c)}function $(r,n,e){var t;for(t=0;t<4;t++)x(r[t],n[t],e)}function rr(r,n){var e=hr(),t=hr(),o=hr();k(o,n[2]),T(e,n[0],o),T(t,n[1],o),d(r,t),r[31]^=B(e)<<7}function nr(r,n,e){var t,o;for(U(r[0],pr),U(r[1],_r),U(r[2],_r),U(r[3],pr),o=255;o>=0;--o)t=e[o/8|0]>>(7&o)&1,$(r,n,t),W(n,r),W(r,r),$(r,n,t)}function er(r,n){var e=[hr(),hr(),hr(),hr()];U(e[0],xr),U(e[1],dr),U(e[2],_r),T(e[3],xr,dr),nr(r,e,n)}function tr(r,n,e){var o=new Uint8Array(64),i=[hr(),hr(),hr(),hr()],t;for(e||vr(n,32),Q(o,n,32),o[0]&=248,o[31]&=127,o[31]|=64,er(i,o),rr(r,i),t=0;t<32;t++)n[t+32]=r[t];return 0}function or(r,n){var e,t,o,i;for(t=63;t>=32;--t){for(e=0,o=t-32,i=t-12;o<i;++o)n[o]+=e-16*n[t]*kr[o-(t-32)],e=n[o]+128>>8,n[o]-=256*e;n[o]+=e,n[t]=0}for(e=0,o=0;o<32;o++)n[o]+=e-(n[31]>>4)*kr[o],e=n[o]>>8,n[o]&=255;for(o=0;o<32;o++)n[o]-=e*kr[o];for(t=0;t<32;t++)n[t+1]+=n[t]>>8,r[t]=255&n[t]}function ir(r){var e=new Float64Array(64),n;for(n=0;n<64;n++)e[n]=r[n];for(n=0;n<64;n++)r[n]=0;or(r,e)}function fr(r,n,e,t){var f=new Uint8Array(64),a=new Uint8Array(64),u=new Uint8Array(64),c=new Float64Array(64),w=[hr(),hr(),hr(),hr()],o,i;Q(f,t,32),f[0]&=248,f[31]&=127,f[31]|=64;var y=e+64;for(o=0;o<e;o++)r[64+o]=n[o];for(o=0;o<32;o++)r[32+o]=f[32+o];for(Q(u,r.subarray(32),e+32),ir(u),er(w,u),rr(r,w),o=32;o<64;o++)r[o]=t[o];for(Q(a,r,e+64),ir(a),o=0;o<64;o++)c[o]=0;for(o=0;o<32;o++)c[o]=u[o];for(o=0;o<32;o++)for(i=0;i<32;i++)c[o+i]+=a[o]*f[i];return or(r.subarray(32),c),y}function ar(r,n){var e=hr(),t=hr(),o=hr(),i=hr(),f=hr(),a=hr(),u=hr();return U(r[2],_r),S(r[1],n),L(o,r[1]),T(i,o,Ur),Y(o,o,r[2]),K(i,r[2],i),L(f,i),L(a,f),T(u,a,f),T(e,u,o),T(e,e,i),z(e,e),T(e,e,o),T(e,e,i),T(e,e,i),T(r[0],e,i),L(t,r[0]),T(t,t,i),m(t,o)&&T(r[0],r[0],mr),L(t,r[0]),T(t,t,i),m(t,o)?-1:(B(r[0])===n[31]>>7&&Y(r[0],pr,r[0]),T(r[3],r[0],r[1]),0)}function ur(r,n,e,t){var f=new Uint8Array(32),a=new Uint8Array(64),c=[hr(),hr(),hr(),hr()],w=[hr(),hr(),hr(),hr()],o,i;if(i=-1,e<64)return-1;if(ar(w,t))return-1;for(o=0;o<e;o++)r[o]=n[o];for(o=0;o<32;o++)r[o+32]=t[o];if(Q(a,r,e),ir(a),nr(c,w,a),er(w,n.subarray(32)),W(c,w),rr(f,c),e-=64,u(n,0,f,0)){for(o=0;o<e;o++)r[o]=0;return-1}for(o=0;o<e;o++)r[o]=n[o+64];return i=e}function cr(r,n){if(r.length!==zr)throw new Error('bad key size');if(n.length!==Rr)throw new Error('bad nonce size')}function wr(r,n){if(r.length!==Fr)throw new Error('bad public key size');if(n.length!==Mr)throw new Error('bad secret key size')}function yr(){for(var r=0;r<arguments.length;r++)if(!(arguments[r]instanceof Uint8Array))throw new TypeError('unexpected type, use Uint8Array')}function lr(r){for(var n=0;n<r.length;n++)r[n]=0}var sr=function(r,n){this.hi=0|r,this.lo=0|n},hr=function(r){var e=new Float64Array(16),n;if(r)for(n=0;n<r.length;n++)e[n]=r[n];return e},vr=function(){throw new Error('no PRNG')},gr=new Uint8Array(16),br=new Uint8Array(32);br[0]=9;var pr=hr(),_r=hr([1]),Ar=hr([56129,1]),Ur=hr([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Er=hr([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),xr=hr([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),dr=hr([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),mr=hr([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),Br=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),Sr=new Uint32Array([5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,252]),Kr=_,Yr=A,Tr=[new sr(1116352408,3609767458),new sr(1899447441,602891725),new sr(3049323471,3964484399),new sr(3921009573,2173295548),new sr(961987163,4081628472),new sr(1508970993,3053834265),new sr(2453635748,2937671579),new sr(2870763221,3664609560),new sr(3624381080,2734883394),new sr(310598401,1164996542),new sr(607225278,1323610764),new sr(1426881987,3590304994),new sr(1925078388,4068182383),new sr(2162078206,991336113),new sr(2614888103,633803317),new sr(3248222580,3479774868),new sr(3835390401,2666613458),new sr(4022224774,944711139),new sr(264347078,2341262773),new sr(604807628,2007800933),new sr(770255983,1495990901),new sr(1249150122,1856431235),new sr(1555081692,3175218132),new sr(1996064986,2198950837),new sr(2554220882,3999719339),new sr(2821834349,766784016),new sr(2952996808,2566594879),new sr(3210313671,3203337956),new sr(3336571891,1034457026),new sr(3584528711,2466948901),new sr(113926993,3758326383),new sr(338241895,168717936),new sr(666307205,1188179964),new sr(773529912,1546045734),new sr(1294757372,1522805485),new sr(1396182291,2643833823),new sr(1695183700,2343527390),new sr(1986661051,1014477480),new sr(2177026350,1206759142),new sr(2456956037,344077627),new sr(2730485921,1290863460),new sr(2820302411,3158454273),new sr(3259730800,3505952657),new sr(3345764771,106217008),new sr(3516065817,3606008344),new sr(3600352804,1432725776),new sr(4094571909,1467031594),new sr(275423344,851169720),new sr(430227734,3100823752),new sr(506948616,1363258195),new sr(659060556,3750685593),new sr(883997877,3785050280),new sr(958139571,3318307427),new sr(1322822218,3812723403),new sr(1537002063,2003034995),new sr(1747873779,3602036899),new sr(1955562222,1575990012),new sr(2024104815,1125592928),new sr(2227730452,2716904306),new sr(2361852424,442776044),new sr(2428436474,593698344),new sr(2756734187,3733110249),new sr(3204031479,2999351573),new sr(3329325298,3815920427),new sr(3391569614,3928383900),new sr(3515267271,566280711),new sr(3940187606,3454069534),new sr(4118630271,4000239992),new sr(116418474,1914138554),new sr(174292421,2731055270),new sr(289380356,3203993006),new sr(460393269,320620315),new sr(685471733,587496836),new sr(852142971,1086792851),new sr(1017036298,365543100),new sr(1126000580,2618297676),new sr(1288033470,3409855158),new sr(1501505948,4234509866),new sr(1607167915,987167468),new sr(1816402316,1246189591)],Lr=new Uint8Array([106,9,230,103,243,188,201,8,187,103,174,133,132,202,167,59,60,110,243,114,254,148,248,43,165,79,245,58,95,29,54,241,81,14,82,127,173,230,130,209,155,5,104,140,43,62,108,31,31,131,217,171,251,65,189,107,91,224,205,25,19,126,33,121]),kr=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),zr=32,Rr=24,Pr=32,Nr=16,Or=32,Cr=32,Fr=32,Mr=32,Gr=32,Zr=Rr,qr=Pr,Ir=Nr,Vr=64,Xr=32,Dr=64,jr=32,Hr=64;r.lowlevel={crypto_core_hsalsa20:y,crypto_stream_xor:v,crypto_stream:h,crypto_stream_salsa20_xor:l,crypto_stream_salsa20:s,crypto_onetimeauth:b,crypto_onetimeauth_verify:p,crypto_verify_16:a,crypto_verify_32:u,crypto_secretbox:_,crypto_secretbox_open:A,crypto_scalarmult:R,crypto_scalarmult_base:P,crypto_box_beforenm:O,crypto_box_afternm:Kr,crypto_box:C,crypto_box_open:F,crypto_box_keypair:N,crypto_hash:Q,crypto_sign:fr,crypto_sign_keypair:tr,crypto_sign_open:ur,crypto_secretbox_KEYBYTES:zr,crypto_secretbox_NONCEBYTES:Rr,crypto_secretbox_ZEROBYTES:Pr,crypto_secretbox_BOXZEROBYTES:Nr,crypto_scalarmult_BYTES:Or,crypto_scalarmult_SCALARBYTES:Cr,crypto_box_PUBLICKEYBYTES:Fr,crypto_box_SECRETKEYBYTES:Mr,crypto_box_BEFORENMBYTES:Gr,crypto_box_NONCEBYTES:Zr,crypto_box_ZEROBYTES:qr,crypto_box_BOXZEROBYTES:Ir,crypto_sign_BYTES:Vr,crypto_sign_PUBLICKEYBYTES:Xr,crypto_sign_SECRETKEYBYTES:Dr,crypto_sign_SEEDBYTES:jr,crypto_hash_BYTES:Hr},r.randomBytes=function(r){var n=new Uint8Array(r);return vr(n,r),n},r.secretbox=function(r,n,e){yr(r,n,e),cr(e,n);for(var t=new Uint8Array(Pr+r.length),o=new Uint8Array(t.length),i=0;i<r.length;i++)t[i+Pr]=r[i];return _(o,t,t.length,n,e),o.subarray(Nr)},r.secretbox.open=function(r,n,e){yr(r,n,e),cr(e,n);for(var t=new Uint8Array(Nr+r.length),o=new Uint8Array(t.length),i=0;i<r.length;i++)t[i+Nr]=r[i];return t.length<32?null:0===A(o,t,t.length,n,e)?o.subarray(Pr):null},r.secretbox.keyLength=zr,r.secretbox.nonceLength=Rr,r.secretbox.overheadLength=Nr,r.scalarMult=function(r,n){if(yr(r,n),r.length!==Cr)throw new Error('bad n size');if(n.length!==Or)throw new Error('bad p size');var e=new Uint8Array(Or);return R(e,r,n),e},r.scalarMult.base=function(r){if(yr(r),r.length!==Cr)throw new Error('bad n size');var n=new Uint8Array(Or);return P(n,r),n},r.scalarMult.scalarLength=Cr,r.scalarMult.groupElementLength=Or,r.box=function(n,e,t,o){var i=r.box.before(t,o);return r.secretbox(n,e,i)},r.box.before=function(r,n){yr(r,n),wr(r,n);var e=new Uint8Array(Gr);return O(e,r,n),e},r.box.after=r.secretbox,r.box.open=function(n,e,t,o){var i=r.box.before(t,o);return r.secretbox.open(n,e,i)},r.box.open.after=r.secretbox.open,r.box.keyPair=function(){var r=new Uint8Array(Fr),n=new Uint8Array(Mr);return N(r,n),{publicKey:r,secretKey:n}},r.box.keyPair.fromSecretKey=function(r){if(yr(r),r.length!==Mr)throw new Error('bad secret key size');var n=new Uint8Array(Fr);return P(n,r),{publicKey:n,secretKey:new Uint8Array(r)}},r.box.publicKeyLength=Fr,r.box.secretKeyLength=Mr,r.box.sharedKeyLength=Gr,r.box.nonceLength=Zr,r.box.overheadLength=r.secretbox.overheadLength,r.sign=function(r,n){if(yr(r,n),n.length!==Dr)throw new Error('bad secret key size');var e=new Uint8Array(Vr+r.length);return fr(e,r,r.length,n),e},r.sign.open=function(r,n){if(yr(r,n),n.length!==Xr)throw new Error('bad public key size');var e=new Uint8Array(r.length),t=ur(e,r,r.length,n);if(t<0)return null;for(var o=new Uint8Array(t),i=0;i<o.length;i++)o[i]=e[i];return o},r.sign.detached=function(n,e){for(var t=r.sign(n,e),o=new Uint8Array(Vr),i=0;i<o.length;i++)o[i]=t[i];return o},r.sign.detached.verify=function(r,n,e){if(yr(r,n,e),n.length!==Vr)throw new Error('bad signature size');if(e.length!==Xr)throw new Error('bad public key size');var o=new Uint8Array(Vr+r.length),i=new Uint8Array(Vr+r.length),t;for(t=0;t<Vr;t++)o[t]=n[t];for(t=0;t<r.length;t++)o[t+Vr]=r[t];return ur(i,o,o.length,e)>=0},r.sign.keyPair=function(){var r=new Uint8Array(Xr),n=new Uint8Array(Dr);return tr(r,n),{publicKey:r,secretKey:n}},r.sign.keyPair.fromSecretKey=function(r){if(yr(r),r.length!==Dr)throw new Error('bad secret key size');for(var n=new Uint8Array(Xr),e=0;e<n.length;e++)n[e]=r[32+e];return{publicKey:n,secretKey:new Uint8Array(r)}},r.sign.keyPair.fromSeed=function(r){if(yr(r),r.length!==jr)throw new Error('bad seed size');for(var n=new Uint8Array(Xr),e=new Uint8Array(Dr),t=0;t<32;t++)e[t]=r[t];return tr(n,e,!0),{publicKey:n,secretKey:e}},r.sign.publicKeyLength=Xr,r.sign.secretKeyLength=Dr,r.sign.seedLength=jr,r.sign.signatureLength=Vr,r.hash=function(r){yr(r);var n=new Uint8Array(Hr);return Q(n,r,r.length),n},r.hash.hashLength=Hr,r.verify=function(r,n){return yr(r,n),0!==r.length&&0!==n.length&&r.length===n.length&&0===f(r,0,n,0,r.length)},r.setPRNG=function(r){vr=r},function(){var n='undefined'==typeof self?null:self.crypto||self.msCrypto;if(n&&n.getRandomValues){var e=65536;r.setPRNG(function(r,t){var i=new Uint8Array(t),o;for(o=0;o<t;o+=e)n.getRandomValues(i.subarray(o,o+Math.min(t-o,e)));for(o=0;o<t;o++)r[o]=i[o];lr(i)})}else n=__webpack_require__(107),n&&n.randomBytes&&r.setPRNG(function(r,e){var o=n.randomBytes(e),t;for(t=0;t<e;t++)r[t]=o[t];lr(o)})}()}('undefined'!=typeof module&&module.exports?module.exports:self.nacl=self.nacl||{})},function(module,exports){async function init(){navigator.userAgent.toLowerCase().indexOf('firefox')>-1||navigator.userAgent.toLowerCase().indexOf('android')>-1?(browserid=128,void 0):void 0,msg_polling({type:1,delay:0}),await wait(3000),typeof sharedsec==='undefined'&&headermsg('OnlyKey not connected! Remove/reinsert OnlyKey and then refresh page'),typeof button!=='undefined'&&button!==null&&(updateStatusFromSelection(),document.action.select_one.forEach(el=>el.addEventListener('change',updateStatusFromSelection.bind(null,!1))))}function updateStatusFromSelection(skipBtn){const val=document.action.select_one.value;_status=val,!skipBtn&&(button.textContent=val)}async function msg_polling(params={},cb){var delay=params.delay||0;const type=params.type||1;OKversion=='Original'&&(delay*=4),setTimeout(async function(){if(type==1){var message=[255,255,255,255,OKSETTIME-browserid];var currentEpochTime=Math.round(new Date().getTime()/1000).toString(16);msg('Setting current time on OnlyKey to '+new Date);var timePart=currentEpochTime.match(/.{2}/g).map(hexStrToDec);var empty=Array(23).fill(0);Array.prototype.push.apply(message,timePart),appKey=nacl.box.keyPair(),void 0,void 0,void 0,void 0,Array.prototype.push.apply(message,appKey.publicKey),Array.prototype.push.apply(message,empty);var b64keyhandle=bytes2b64(message);counter=0}else if(type==2){var message=[255,255,255,255,OKGETPUBKEY-browserid];msg('Checking to see if this key is assigned to an OnlyKey Slot '+custom_keyid);var empty=Array(50).fill(0);for(Array.prototype.push.apply(message,custom_keyid),Array.prototype.push.apply(message,empty);message.length<64;)message.push(0);var encryptedkeyHandle=await aesgcm_encrypt(message);var b64keyhandle=bytes2b64(encryptedkeyHandle)}else{if(_status=='done_challenge'&&counter++,_status=='finished')return encrypted_data;var message=[255,255,255,255];var ciphertext=new Uint8Array(60).fill(0);for(ciphertext[0]=OKPING-browserid,Array.prototype.push.apply(message,ciphertext);message.length<64;)message.push(0);var encryptedkeyHandle=await aesgcm_encrypt(message);var b64keyhandle=bytes2b64(encryptedkeyHandle);_setStatus('waiting_ping')}var challenge=mkchallenge();var req={'challenge':challenge,'keyHandle':b64keyhandle,'appId':appId,'version':version};u2f.sign(appId,challenge,[req],async function(response){var result=await custom_auth_response(response);var data=await Promise;if(_status==='finished'?void 0:_status==='waiting_ping'&&(void 0,_setStatus('pending_challenge'),data=1),result==2?(msg('Polling succeeded but no data was received'),data=1):result<=5&&(data=1),type==1){if(result){okPub=result.slice(21,53),void 0,sharedsec=nacl.box.before(Uint8Array.from(okPub),appKey.secretKey),void 0,OKversion=result[19]==99?'Color':'Original';var FWversion=bytes2string(result.slice(8,20));msg('OnlyKey '+OKversion+' '+FWversion),headermsg('OnlyKey '+OKversion+' Connected\n'+FWversion),hw_RNG.entropy=result.slice(53,result.length),msg('HW generated entropy: '+hw_RNG.entropy);var key=sha256(sharedsec)}else msg('OnlyKey Not Connected\n'+'Remove and Reinsert OnlyKey');return}if(type==2){if(result){var pubkey=result.slice(0,1);msg('Public Key found in slot'+pubkey);var entropy=result.slice(2,result.length);msg('HW generated entropy'+entropy)}else msg('OnlyKey Not Connected\n'+'Remove and Reinsert OnlyKey'),headermsg('OnlyKey Not Connected\n'+'Remove and Reinsert OnlyKey');return pubkey}if(type==3&&_status=='finished')result?data=result:(msg('OnlyKey Not Connected\n'+'Remove and Reinsert OnlyKey'),headermsg('OnlyKey Not Connected\n'+'Remove and Reinsert OnlyKey'));else if(type==4&&_status=='finished')if(result){var oksignature=result.slice(0,result.length);data=oksignature}else msg('OnlyKey Not Connected\n'+'Remove and Reinsert OnlyKey'),headermsg('OnlyKey Not Connected\n'+'Remove and Reinsert OnlyKey');typeof cb==='function'&&cb(null,data)})},delay*1000)}function auth_decrypt(ct,cb){if(typeof sharedsec==='undefined')return void(button.textContent='Insert OnlyKey and reload page');cb=cb||noop,ct.length==396?poll_delay=5:ct.length==524&&(poll_delay=7),OKversion=='Original'&&(poll_delay*=4);var padded_ct=ct.slice(12,ct.length);var keyid=ct.slice(1,8);var pin_hash=sha256(padded_ct);return void 0,void 0,pin=[get_pin(pin_hash[0]),get_pin(pin_hash[15]),get_pin(pin_hash[31])],msg('Generated PIN'+pin),u2fSignBuffer(typeof padded_ct==='string'?padded_ct.match(/.{2}/g):padded_ct,cb)}function auth_sign(ct,cb){if(typeof sharedsec==='undefined')return void(button.textContent='Insert OnlyKey and reload page');var pin_hash=sha256(ct);return cb=cb||noop,void 0,pin=[get_pin(pin_hash[0]),get_pin(pin_hash[15]),get_pin(pin_hash[31])],void 0,u2fSignBuffer(typeof ct==='string'?ct.match(/.{2}/g):ct,cb)}async function custom_auth_response(response){var err=response.errorCode;var errMes=response.errorMessage;if(void 0,void 0,browserid!=128){if(err){if(errMes==='device status code: -7f');else if(errMes==='device status code: -80')_status==='waiting_ping'&&(void 0,button.textContent='Incorrect challenge code entered',_setStatus('wrong_challenge'));else if(errMes==='device status code: -81')void 0,button.textContent='key type not set as signature/decrypt',_setStatus('wrong_type');else if(errMes==='device status code: -82')void 0,button.textContent='no key set in this slot',_setStatus('no_key');else if(errMes==='device status code: -83')void 0,button.textContent='invalid key, key check failed',_setStatus('bad_key');else if(errMes==='device status code: -84')void 0,button.textContent='invalid data, or data does not match key',_setStatus('bad_data');else if(errMes==='device status code: -85')void 0,button.textContent='no data ready';else if(errMes==='device status code: -b')void 0,counter-=3,_setStatus('done_challenge'),ping(0);else{if(err==5)return void 0,_setStatus('done_challenge'),counter-=2,1;if(err)return void 0,counter--,1}return counter++,1}}else if(err)return _setStatus('done_challenge'),1;var sigData=string2bytes(u2f_unb64(response.signatureData));var U2Fcounter=sigData.slice(1,5);var parsedData=[];var halflen;if(halflen=sigData[8]==0?256:sigData[8],Array.prototype.push.apply(parsedData,sigData.slice(9,halflen+9)),Array.prototype.push.apply(parsedData,sigData.slice(halflen+9+2,halflen+9+2+halflen)),U2Fcounter[0]+U2Fcounter[1]+U2Fcounter[2]+U2Fcounter[3]==0)return parsedData;var decryptedparsedData=await aesgcm_decrypt(parsedData);if(decryptedparsedData[0]==69&&decryptedparsedData[1]==114&&decryptedparsedData[2]==114&&decryptedparsedData[3]==111&&decryptedparsedData[4]==114){if(decryptedparsedData[6]==0);else if(decryptedparsedData[6]==1)void 0,button.textContent='Incorrect challenge code entered',_setStatus('wrong_challenge');else if(decryptedparsedData[6]==2)void 0,button.textContent='key type not set as signature/decrypt',_setStatus('wrong_type');else if(decryptedparsedData[6]==3)void 0,button.textContent='no key set in this slot',_setStatus('no_key');else if(decryptedparsedData[6]==4)void 0,button.textContent='invalid key, key check failed',_setStatus('bad_key');else if(decryptedparsedData[6]==5)void 0,button.textContent='invalid data, or data does not match key',_setStatus('bad_data');else if(decryptedparsedData[6]==6)return void 0,button.textContent='no data ready',6;return 1}return _setStatus('finished'),encrypted_data=parsedData,parsedData}function aesgcm_decrypt(encrypted){return new Promise(resolve=>{counter++,forge.options.usePureJavaScript=!0;var key=sha256(sharedsec);for(var iv=IntToByteArray(counter);iv.length<12;)iv.push(0);iv=Uint8Array.from(iv),void 0;var decipher=forge.cipher.createDecipher('AES-GCM',key);decipher.start({iv:iv,tagLength:0}),decipher.update(forge.util.createBuffer(Uint8Array.from(encrypted)));var plaintext=decipher.output.toHex();decipher.finish(),resolve(plaintext.match(/.{2}/g).map(hexStrToDec))})}function aesgcm_encrypt(plaintext){return new Promise(resolve=>{counter++,forge.options.usePureJavaScript=!0;var key=sha256(sharedsec);for(var iv=IntToByteArray(counter);iv.length<12;)iv.push(0);iv=Uint8Array.from(iv),void 0;var cipher=forge.cipher.createCipher('AES-GCM',key);cipher.start({iv:iv,tagLength:0}),void 0,cipher.update(forge.util.createBuffer(Uint8Array.from(plaintext))),cipher.finish();var ciphertext=cipher.output;ciphertext=ciphertext.toHex(),resolve(ciphertext.match(/.{2}/g).map(hexStrToDec))})}async function u2fSignBuffer(cipherText,mainCallback){var message=[255,255,255,255,type=document.getElementById('onlykey_start').value=='Encrypt and Sign'?OKSIGN-browserid:OKDECRYPT-browserid,slotId()];var maxPacketSize=57;var finalPacket=cipherText.length-maxPacketSize<=0;var ctChunk=cipherText.slice(0,maxPacketSize);message.push(finalPacket?ctChunk.length:255),Array.prototype.push.apply(message,ctChunk);var cb=finalPacket?doPinTimer.bind(null,20):u2fSignBuffer.bind(null,cipherText.slice(maxPacketSize),mainCallback);for(var challenge=mkchallenge();message.length<64;)message.push(0);var encryptedkeyHandle=await aesgcm_encrypt(message);var b64keyhandle=bytes2b64(encryptedkeyHandle);var req={'challenge':challenge,'keyHandle':b64keyhandle,'appId':appId,'version':version};void 0,void 0,void 0,u2f.sign(appId,challenge,[req],function(response){var result=custom_auth_response(response);msg((result?'Successfully sent':'Error sending')+' to OnlyKey'),result&&(finalPacket?(void 0,_setStatus('pending_challenge'),cb().then(skey=>{void 0,mainCallback(skey)}).catch(err=>msg(err))):cb())},3)}async function ping(delay){return await msg_polling({type:poll_type,delay:delay})}function get_pin(byte){return byte<6?1:byte%5+1}function id(s){return document.getElementById(s)}function msg(s){id('messages').innerHTML+='<br>'+s}function headermsg(s){id('header_messages').innerHTML+='<br>'+s}function _setStatus(newStatus){_status=newStatus,void 0}function userId(){var el=id('userid');return el&&el.value||'u2ftest'}function slotId(){return id('slotid')?id('slotid').value:type=document.getElementById('onlykey_start').value=='Encrypt and Sign'?2:1}function b64EncodeUnicode(str){return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,function toSolidBytes(match,p1){return _StringfromCharCode4('0x'+p1)}))}function u2f_b64(s){return btoa(s).replace(/\+/g,'-').replace(/\//g,'_').replace(/=/g,'')}function u2f_unb64(s){return s=s.replace(/-/g,'+').replace(/_/g,'/'),atob(s+'==='.slice((s.length+3)%4))}function string2bytes(s){var len=s.length;var bytes=new Uint8Array(len);for(var i=0;i<len;i++)bytes[i]=s.charCodeAt(i);return bytes}function hexStrToDec(hexStr){return~~new Number('0x'+hexStr).toString(10)}function bcat(buflist){var len=0;for(var i=0;i<buflist.length;i++)typeof buflist[i]=='string'&&(buflist[i]=string2bytes(buflist[i])),len+=buflist[i].length;var buf=new Uint8Array(len);len=0;for(var i=0;i<buflist.length;i++)buf.set(buflist[i],len),len+=buflist[i].length;return buf}function chr(c){return _StringfromCharCode4(c)}function bytes2string(bytes){return Array.from(bytes).map(chr).join('')}function bytes2b64(bytes){return u2f_b64(bytes2string(bytes))}function mkchallenge(){var s=[];for(i=0;i<32;i++)s[i]=_StringfromCharCode4(Math.floor(Math.random()*256));return u2f_b64(s.join())}function noop(){}var _StringfromCharCode4=String.fromCharCode;var userDict={};var keyHandleDict={};var hw_RNG={};var appId=window.location.origin;var version='U2F_V2';var OKversion;var sha256=function(s){var md=forge.md.sha256.create();return md.update(bytes2string(s)),Array.from(md.digest().toHex().match(/.{2}/g).map(hexStrToDec))};var appKey;var appPub;var appPubPart;var okPub;var sharedsec;var _status;var pin;var poll_type,poll_delay;var custom_keyid;var msgType;var keySlot;var browserid=0;var counter=0;var encrypted_data;const OKDECRYPT=240;const OKSIGN=237;const OKSETTIME=228;const OKGETPUBKEY=236;const OKGETRESPONSE=242;const OKPING=243;const button=document.getElementById('onlykey_start');let wait=ms=>new Promise(resolve=>setTimeout(resolve,ms));window.doPinTimer=async function(seconds){return new Promise(async function updateTimer(resolve,reject,secondsRemaining){if(secondsRemaining=typeof secondsRemaining==='number'?secondsRemaining:seconds||20,_status==='done_challenge'||_status==='waiting_ping'){_setStatus('done_challenge');const btmsg=`Waiting ${poll_delay} seconds for OnlyKey to process message.`;button.textContent=btmsg,void 0,await ping(poll_delay)}else if(_status==='pending_challenge'){if(secondsRemaining<=4){const err='Time expired for PIN confirmation';return reject(err)}const btmsg=`You have ${secondsRemaining} seconds to enter challenge code ${pin} on OnlyKey.`;button.textContent=btmsg,void 0,await ping(0)}if(_status==='finished'){browserid==128&&encrypted_data.length!=64&&(counter-=2);var decrypted_data=await aesgcm_decrypt(encrypted_data);if(decrypted_data.length==64){var entropy=decrypted_data.slice(36,64);decrypted_data=decrypted_data.slice(0,35),void 0}return resolve(decrypted_data)}setTimeout(updateTimer.bind(null,resolve,reject,secondsRemaining-=4),4000)})},IntToByteArray=function(int){var byteArray=[0,0,0,0];for(var index=0;index<4;index++){var byte=int&255;byteArray[3-index]=byte,int=(int-byte)/256}return byteArray}},function(module,exports,__webpack_require__){'use strict';var u2f=u2f||{};var js_api_version;u2f.EXTENSION_ID='kmendfapggjehodndflmmgagdbamhnfd',u2f.MessageTypes={'U2F_REGISTER_REQUEST':'u2f_register_request','U2F_REGISTER_RESPONSE':'u2f_register_response','U2F_SIGN_REQUEST':'u2f_sign_request','U2F_SIGN_RESPONSE':'u2f_sign_response','U2F_GET_API_VERSION_REQUEST':'u2f_get_api_version_request','U2F_GET_API_VERSION_RESPONSE':'u2f_get_api_version_response'},u2f.ErrorCodes={'OK':0,'OTHER_ERROR':1,'BAD_REQUEST':2,'CONFIGURATION_UNSUPPORTED':3,'DEVICE_INELIGIBLE':4,'TIMEOUT':5},u2f.U2fRequest,u2f.U2fResponse,u2f.Error,u2f.Transport,u2f.Transports,u2f.SignRequest,u2f.SignResponse,u2f.RegisterRequest,u2f.RegisterResponse,u2f.RegisteredKey,u2f.GetJsApiVersionResponse,u2f.getMessagePort=function(callback){if(typeof chrome!='undefined'&&chrome.runtime){var msg={type:u2f.MessageTypes.U2F_SIGN_REQUEST,signRequests:[]};chrome.runtime.sendMessage(u2f.EXTENSION_ID,msg,function(){chrome.runtime.lastError?u2f.getIframePort_(callback):u2f.getChromeRuntimePort_(callback)})}else u2f.isAndroidChrome_()?u2f.getAuthenticatorPort_(callback):u2f.isIosChrome_()?u2f.getIosPort_(callback):u2f.getIframePort_(callback)},u2f.isAndroidChrome_=function(){var userAgent=navigator.userAgent;return userAgent.indexOf('Chrome')!=-1&&userAgent.indexOf('Android')!=-1},u2f.isIosChrome_=function(){return['iPhone','iPad','iPod'].indexOf(navigator.platform)>-1},u2f.getChromeRuntimePort_=function(callback){var port=chrome.runtime.connect(u2f.EXTENSION_ID,{'includeTlsChannelId':!0});setTimeout(function(){callback(new u2f.WrappedChromeRuntimePort_(port))},0)},u2f.getAuthenticatorPort_=function(callback){setTimeout(function(){callback(new u2f.WrappedAuthenticatorPort_)},0)},u2f.getIosPort_=function(callback){setTimeout(function(){callback(new u2f.WrappedIosPort_)},0)},u2f.WrappedChromeRuntimePort_=function(port){this.port_=port},u2f.formatSignRequest_=function(appId,challenge,registeredKeys,timeoutSeconds,reqId){if(js_api_version===undefined||js_api_version<1.1){var signRequests=[];for(var i=0;i<registeredKeys.length;i++)signRequests[i]={version:registeredKeys[i].version,challenge:challenge,keyHandle:registeredKeys[i].keyHandle,appId:appId};return{type:u2f.MessageTypes.U2F_SIGN_REQUEST,signRequests:signRequests,timeoutSeconds:timeoutSeconds,requestId:reqId}}return{type:u2f.MessageTypes.U2F_SIGN_REQUEST,appId:appId,challenge:challenge,registeredKeys:registeredKeys,timeoutSeconds:timeoutSeconds,requestId:reqId}},u2f.formatRegisterRequest_=function(appId,registeredKeys,registerRequests,timeoutSeconds,reqId){if(js_api_version===undefined||js_api_version<1.1){for(var i=0;i<registerRequests.length;i++)registerRequests[i].appId=appId;var signRequests=[];for(var i=0;i<registeredKeys.length;i++)signRequests[i]={version:registeredKeys[i].version,challenge:registerRequests[0],keyHandle:registeredKeys[i].keyHandle,appId:appId};return{type:u2f.MessageTypes.U2F_REGISTER_REQUEST,signRequests:signRequests,registerRequests:registerRequests,timeoutSeconds:timeoutSeconds,requestId:reqId}}return{type:u2f.MessageTypes.U2F_REGISTER_REQUEST,appId:appId,registerRequests:registerRequests,registeredKeys:registeredKeys,timeoutSeconds:timeoutSeconds,requestId:reqId}},u2f.WrappedChromeRuntimePort_.prototype.postMessage=function(message){this.port_.postMessage(message)},u2f.WrappedChromeRuntimePort_.prototype.addEventListener=function(eventName,handler){var name=eventName.toLowerCase();name=='message'||name=='onmessage'?this.port_.onMessage.addListener(function(message){handler({'data':message})}):void 0},u2f.WrappedAuthenticatorPort_=function(){this.requestId_=-1,this.requestObject_=null},u2f.WrappedAuthenticatorPort_.prototype.postMessage=function(message){var intentUrl=u2f.WrappedAuthenticatorPort_.INTENT_URL_BASE_+';S.request='+encodeURIComponent(JSON.stringify(message))+';end';document.location=intentUrl},u2f.WrappedAuthenticatorPort_.prototype.getPortType=function(){return'WrappedAuthenticatorPort_'},u2f.WrappedAuthenticatorPort_.prototype.addEventListener=function(eventName,handler){var name=eventName.toLowerCase();if(name=='message'){var self=this;window.addEventListener('message',self.onRequestUpdate_.bind(self,handler),!1)}else;},u2f.WrappedAuthenticatorPort_.prototype.onRequestUpdate_=function(callback,message){var messageObject=JSON.parse(message.data);var intentUrl=messageObject.intentURL;var errorCode=messageObject.errorCode;var responseObject=null;messageObject.hasOwnProperty('data')&&(responseObject=JSON.parse(messageObject.data)),callback({'data':responseObject})},u2f.WrappedAuthenticatorPort_.INTENT_URL_BASE_='intent:#Intent;action=com.google.android.apps.authenticator.AUTHENTICATE',u2f.WrappedIosPort_=function(){},u2f.WrappedIosPort_.prototype.postMessage=function(message){var str=JSON.stringify(message);var url='u2f://auth?'+encodeURI(str);location.replace(url)},u2f.WrappedIosPort_.prototype.getPortType=function(){return'WrappedIosPort_'},u2f.WrappedIosPort_.prototype.addEventListener=function(eventName,handler){var name=eventName.toLowerCase();name!=='message'&&void 0},u2f.getIframePort_=function(callback){var iframeOrigin='chrome-extension://'+u2f.EXTENSION_ID;var iframe=document.createElement('iframe');iframe.src=iframeOrigin+'/u2f-comms.html',iframe.setAttribute('style','display:none'),document.body.appendChild(iframe);var channel=new MessageChannel;var ready=function(message){message.data=='ready'?(channel.port1.removeEventListener('message',ready),callback(channel.port1)):void 0};channel.port1.addEventListener('message',ready),channel.port1.start(),iframe.addEventListener('load',function(){iframe.contentWindow.postMessage('init',iframeOrigin,[channel.port2])})},u2f.EXTENSION_TIMEOUT_SEC=30,u2f.port_=null,u2f.waitingForPort_=[],u2f.reqCounter_=0,u2f.callbackMap_={},u2f.getPortSingleton_=function(callback){u2f.port_?callback(u2f.port_):(u2f.waitingForPort_.length==0&&u2f.getMessagePort(function(port){for(u2f.port_=port,u2f.port_.addEventListener('message',u2f.responseHandler_);u2f.waitingForPort_.length;)u2f.waitingForPort_.shift()(u2f.port_)}),u2f.waitingForPort_.push(callback))},u2f.responseHandler_=function(message){var response=message.data;var reqId=response.requestId;if(reqId&&u2f.callbackMap_[reqId]){var cb=u2f.callbackMap_[reqId];delete u2f.callbackMap_[reqId],cb(response.responseData)}},u2f.sign=function(appId,challenge,registeredKeys,callback,opt_timeoutSeconds){js_api_version===undefined?u2f.getApiVersion(function(response){js_api_version=response.js_api_version===undefined?0:response.js_api_version,void 0,u2f.sendSignRequest(appId,challenge,registeredKeys,callback,opt_timeoutSeconds)}):u2f.sendSignRequest(appId,challenge,registeredKeys,callback,opt_timeoutSeconds)},u2f.sendSignRequest=function(appId,challenge,registeredKeys,callback,opt_timeoutSeconds){u2f.getPortSingleton_(function(port){var reqId=++u2f.reqCounter_;u2f.callbackMap_[reqId]=callback;var timeoutSeconds=typeof opt_timeoutSeconds==='undefined'?u2f.EXTENSION_TIMEOUT_SEC:opt_timeoutSeconds;var req=u2f.formatSignRequest_(appId,challenge,registeredKeys,timeoutSeconds,reqId);port.postMessage(req)})},u2f.register=function(appId,registerRequests,registeredKeys,callback,opt_timeoutSeconds){js_api_version===undefined?u2f.getApiVersion(function(response){js_api_version=response.js_api_version===undefined?0:response.js_api_version,void 0,u2f.sendRegisterRequest(appId,registerRequests,registeredKeys,callback,opt_timeoutSeconds)}):u2f.sendRegisterRequest(appId,registerRequests,registeredKeys,callback,opt_timeoutSeconds)},u2f.sendRegisterRequest=function(appId,registerRequests,registeredKeys,callback,opt_timeoutSeconds){u2f.getPortSingleton_(function(port){var reqId=++u2f.reqCounter_;u2f.callbackMap_[reqId]=callback;var timeoutSeconds=typeof opt_timeoutSeconds==='undefined'?u2f.EXTENSION_TIMEOUT_SEC:opt_timeoutSeconds;var req=u2f.formatRegisterRequest_(appId,registeredKeys,registerRequests,timeoutSeconds,reqId);port.postMessage(req)})},u2f.getApiVersion=function(callback,opt_timeoutSeconds){u2f.getPortSingleton_(function(port){if(port.getPortType){var apiVersion;switch(port.getPortType()){case'WrappedIosPort_':case'WrappedAuthenticatorPort_':apiVersion=1.1;break;default:apiVersion=0;}return void callback({'js_api_version':apiVersion})}var reqId=++u2f.reqCounter_;u2f.callbackMap_[reqId]=callback;var req={type:u2f.MessageTypes.U2F_GET_API_VERSION_REQUEST,timeoutSeconds:typeof opt_timeoutSeconds==='undefined'?u2f.EXTENSION_TIMEOUT_SEC:opt_timeoutSeconds,requestId:reqId};port.postMessage(req)})}},function(module,exports,__webpack_require__){function Entity(name,body){this.name=name,this.body=body,this.decoders={},this.encoders={}}var asn1=__webpack_require__(12);var inherits=__webpack_require__(0);var api=exports;api.define=function define(name,body){return new Entity(name,body)};;Entity.prototype._createNamed=function createNamed(base){var named;try{named=__webpack_require__(174).runInThisContext('(function '+this.name+'(entity) {\n'+'  this._initNamed(entity);\n'+'})')}catch(e){named=function(entity){this._initNamed(entity)}}return inherits(named,base),named.prototype._initNamed=function initnamed(entity){base.call(this,entity)},new named(this)},Entity.prototype._getDecoder=function _getDecoder(enc){return enc=enc||'der',!this.decoders.hasOwnProperty(enc)&&(this.decoders[enc]=this._createNamed(asn1.decoders[enc])),this.decoders[enc]},Entity.prototype.decode=function decode(data,enc,options){return this._getDecoder(enc).decode(data,options)},Entity.prototype._getEncoder=function _getEncoder(enc){return enc=enc||'der',!this.encoders.hasOwnProperty(enc)&&(this.encoders[enc]=this._createNamed(asn1.encoders[enc])),this.encoders[enc]},Entity.prototype.encode=function encode(data,enc,reporter){return this._getEncoder(enc).encode(data,reporter)}},function(module,exports,__webpack_require__){function Node(enc,parent){var state={};this._baseState=state,state.enc=enc,state.parent=parent||null,state.children=null,state.tag=null,state.args=null,state.reverseArgs=null,state.choice=null,state.optional=!1,state.any=!1,state.obj=!1,state.use=null,state.useDecoder=null,state.key=null,state['default']=null,state.explicit=null,state.implicit=null,state.contains=null,!state.parent&&(state.children=[],this._wrap())}var Reporter=__webpack_require__(13).Reporter;var EncoderBuffer=__webpack_require__(13).EncoderBuffer;var DecoderBuffer=__webpack_require__(13).DecoderBuffer;var assert=__webpack_require__(5);var tags=['seq','seqof','set','setof','objid','bool','gentime','utctime','null_','enum','int','objDesc','bitstr','bmpstr','charstr','genstr','graphstr','ia5str','iso646str','numstr','octstr','printstr','t61str','unistr','utf8str','videostr'];var methods=['key','obj','use','optional','explicit','implicit','def','choice','any','contains'].concat(tags);var overrided=['_peekTag','_decodeTag','_use','_decodeStr','_decodeObjid','_decodeTime','_decodeNull','_decodeInt','_decodeBool','_decodeList','_encodeComposite','_encodeStr','_encodeObjid','_encodeTime','_encodeNull','_encodeInt','_encodeBool'];module.exports=Node;var stateProps=['enc','parent','children','tag','args','reverseArgs','choice','optional','any','obj','use','alteredUse','key','default','explicit','implicit','contains'];Node.prototype.clone=function clone(){var state=this._baseState;var cstate={};stateProps.forEach(function(prop){cstate[prop]=state[prop]});var res=new this.constructor(cstate.parent);return res._baseState=cstate,res},Node.prototype._wrap=function wrap(){var state=this._baseState;methods.forEach(function(method){this[method]=function _wrappedMethod(){var clone=new this.constructor(this);return state.children.push(clone),clone[method].apply(clone,arguments)}},this)},Node.prototype._init=function init(body){var state=this._baseState;assert(state.parent===null),body.call(this),state.children=state.children.filter(function(child){return child._baseState.parent===this},this),assert.equal(state.children.length,1,'Root node can have only one child')},Node.prototype._useArgs=function useArgs(args){var state=this._baseState;var children=args.filter(function(arg){return arg instanceof this.constructor},this);args=args.filter(function(arg){return!(arg instanceof this.constructor)},this),children.length!==0&&(assert(state.children===null),state.children=children,children.forEach(function(child){child._baseState.parent=this},this)),args.length!==0&&(assert(state.args===null),state.args=args,state.reverseArgs=args.map(function(arg){if(typeof arg!=='object'||arg.constructor!==Object)return arg;var res={};return Object.keys(arg).forEach(function(key){key==(key|0)&&(key|=0);var value=arg[key];res[value]=key}),res}))},overrided.forEach(function(method){Node.prototype[method]=function _overrided(){var state=this._baseState;throw new Error(method+' not implemented for encoding: '+state.enc)}}),tags.forEach(function(tag){Node.prototype[tag]=function _tagMethod(){var state=this._baseState;var args=Array.prototype.slice.call(arguments);return assert(state.tag===null),state.tag=tag,this._useArgs(args),this}}),Node.prototype.use=function use(item){assert(item);var state=this._baseState;return assert(state.use===null),state.use=item,this},Node.prototype.optional=function optional(){var state=this._baseState;return state.optional=!0,this},Node.prototype.def=function def(val){var state=this._baseState;return assert(state['default']===null),state['default']=val,state.optional=!0,this},Node.prototype.explicit=function explicit(num){var state=this._baseState;return assert(state.explicit===null&&state.implicit===null),state.explicit=num,this},Node.prototype.implicit=function implicit(num){var state=this._baseState;return assert(state.explicit===null&&state.implicit===null),state.implicit=num,this},Node.prototype.obj=function obj(){var state=this._baseState;var args=Array.prototype.slice.call(arguments);return state.obj=!0,args.length!==0&&this._useArgs(args),this},Node.prototype.key=function key(newKey){var state=this._baseState;return assert(state.key===null),state.key=newKey,this},Node.prototype.any=function any(){var state=this._baseState;return state.any=!0,this},Node.prototype.choice=function choice(obj){var state=this._baseState;return assert(state.choice===null),state.choice=obj,this._useArgs(Object.keys(obj).map(function(key){return obj[key]})),this},Node.prototype.contains=function contains(item){var state=this._baseState;return assert(state.use===null),state.contains=item,this},Node.prototype._decode=function decode(input,options){var state=this._baseState;if(state.parent===null)return input.wrapResult(state.children[0]._decode(input,options));var result=state['default'];var present=!0;var prevKey=null;if(state.key!==null&&(prevKey=input.enterKey(state.key)),state.optional){var tag=null;if(state.explicit===null?state.implicit===null?state.tag!==null&&(tag=state.tag):tag=state.implicit:tag=state.explicit,tag===null&&!state.any){var save=input.save();try{state.choice===null?this._decodeGeneric(state.tag,input,options):this._decodeChoice(input,options),present=!0}catch(e){present=!1}input.restore(save)}else if(present=this._peekTag(input,tag,state.any),input.isError(present))return present}var prevObj;if(state.obj&&present&&(prevObj=input.enterObject()),present){if(state.explicit!==null){var explicit=this._decodeTag(input,state.explicit);if(input.isError(explicit))return explicit;input=explicit}var start=input.offset;if(state.use===null&&state.choice===null){if(state.any)var save=input.save();var body=this._decodeTag(input,state.implicit===null?state.tag:state.implicit,state.any);if(input.isError(body))return body;state.any?result=input.raw(save):input=body}if(options&&options.track&&state.tag!==null&&options.track(input.path(),start,input.length,'tagged'),options&&options.track&&state.tag!==null&&options.track(input.path(),input.offset,input.length,'content'),result=state.any?result:state.choice===null?this._decodeGeneric(state.tag,input,options):this._decodeChoice(input,options),input.isError(result))return result;if(!state.any&&state.choice===null&&state.children!==null&&state.children.forEach(function decodeChildren(child){child._decode(input,options)}),state.contains&&(state.tag==='octstr'||state.tag==='bitstr')){var data=new DecoderBuffer(result);result=this._getUse(state.contains,input._reporterState.obj)._decode(data,options)}}return state.obj&&present&&(result=input.leaveObject(prevObj)),state.key!==null&&(result!==null||present===!0)?input.leaveKey(prevKey,state.key,result):prevKey!==null&&input.exitKey(prevKey),result},Node.prototype._decodeGeneric=function decodeGeneric(tag,input,options){var state=this._baseState;if(tag==='seq'||tag==='set')return null;return tag==='seqof'||tag==='setof'?this._decodeList(input,tag,state.args[0],options):/str$/.test(tag)?this._decodeStr(input,tag,options):tag==='objid'&&state.args?this._decodeObjid(input,state.args[0],state.args[1],options):tag==='objid'?this._decodeObjid(input,null,null,options):tag==='gentime'||tag==='utctime'?this._decodeTime(input,tag,options):tag==='null_'?this._decodeNull(input,options):tag==='bool'?this._decodeBool(input,options):tag==='objDesc'?this._decodeStr(input,tag,options):tag==='int'||tag==='enum'?this._decodeInt(input,state.args&&state.args[0],options):state.use===null?input.error('unknown tag: '+tag):this._getUse(state.use,input._reporterState.obj)._decode(input,options)},Node.prototype._getUse=function _getUse(entity,obj){var state=this._baseState;return state.useDecoder=this._use(entity,obj),assert(state.useDecoder._baseState.parent===null),state.useDecoder=state.useDecoder._baseState.children[0],state.implicit!==state.useDecoder._baseState.implicit&&(state.useDecoder=state.useDecoder.clone(),state.useDecoder._baseState.implicit=state.implicit),state.useDecoder},Node.prototype._decodeChoice=function decodeChoice(input,options){var state=this._baseState;var result=null;var match=!1;return Object.keys(state.choice).some(function(key){var save=input.save();var node=state.choice[key];try{var value=node._decode(input,options);if(input.isError(value))return!1;result={type:key,value:value},match=!0}catch(e){return input.restore(save),!1}return!0},this),match?result:input.error('Choice not matched')},Node.prototype._createEncoderBuffer=function createEncoderBuffer(data){return new EncoderBuffer(data,this.reporter)},Node.prototype._encode=function encode(data,reporter,parent){var state=this._baseState;if(state['default']===null||state['default']!==data){var result=this._encodeValue(data,reporter,parent);return result===undefined||this._skipDefault(result,reporter,parent)?void 0:result}},Node.prototype._encodeValue=function encode(data,reporter,parent){var state=this._baseState;if(state.parent===null)return state.children[0]._encode(data,reporter||new Reporter);var result=null;if(this.reporter=reporter,state.optional&&data===undefined)if(state['default']!==null)data=state['default'];else return;var content=null;var primitive=!1;if(state.any)result=this._createEncoderBuffer(data);else if(state.choice)result=this._encodeChoice(data,reporter);else if(state.contains)content=this._getUse(state.contains,parent)._encode(data,reporter),primitive=!0;else if(state.children)content=state.children.map(function(child){if(child._baseState.tag==='null_')return child._encode(null,reporter,data);if(child._baseState.key===null)return reporter.error('Child should have a key');var prevKey=reporter.enterKey(child._baseState.key);if(typeof data!=='object')return reporter.error('Child expected, but input is not object');var res=child._encode(data[child._baseState.key],reporter,data);return reporter.leaveKey(prevKey),res},this).filter(function(child){return child}),content=this._createEncoderBuffer(content);else if(state.tag==='seqof'||state.tag==='setof'){if(!(state.args&&state.args.length===1))return reporter.error('Too many args for : '+state.tag);if(!Array.isArray(data))return reporter.error('seqof/setof, but data is not Array');var child=this.clone();child._baseState.implicit=null,content=this._createEncoderBuffer(data.map(function(item){var state=this._baseState;return this._getUse(state.args[0],data)._encode(item,reporter)},child))}else state.use===null?(content=this._encodePrimitive(state.tag,data),primitive=!0):result=this._getUse(state.use,parent)._encode(data,reporter);var result;if(!state.any&&state.choice===null){var tag=state.implicit===null?state.tag:state.implicit;var cls=state.implicit===null?'universal':'context';tag===null?state.use===null&&reporter.error('Tag could be ommited only for .use()'):state.use===null&&(result=this._encodeComposite(tag,primitive,cls,content))}return state.explicit!==null&&(result=this._encodeComposite(state.explicit,!1,'context',result)),result},Node.prototype._encodeChoice=function encodeChoice(data,reporter){var state=this._baseState;var node=state.choice[data.type];return!node&&assert(!1,data.type+' not found in '+JSON.stringify(Object.keys(state.choice))),node._encode(data.value,reporter)},Node.prototype._encodePrimitive=function encodePrimitive(tag,data){var state=this._baseState;if(/str$/.test(tag))return this._encodeStr(data,tag);if(tag==='objid'&&state.args)return this._encodeObjid(data,state.reverseArgs[0],state.args[1]);if(tag==='objid')return this._encodeObjid(data,null,null);if(tag==='gentime'||tag==='utctime')return this._encodeTime(data,tag);if(tag==='null_')return this._encodeNull();if(tag==='int'||tag==='enum')return this._encodeInt(data,state.args&&state.reverseArgs[0]);if(tag==='bool')return this._encodeBool(data);if(tag==='objDesc')return this._encodeStr(data,tag);throw new Error('Unsupported tag: '+tag)},Node.prototype._isNumstr=function isNumstr(str){return /^[0-9 ]*$/.test(str)},Node.prototype._isPrintstr=function isPrintstr(str){return /^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(str)}},function(module,exports,__webpack_require__){function Reporter(options){this._reporterState={obj:null,path:[],options:options||{},errors:[]}}function ReporterError(path,msg){this.path=path,this.rethrow(msg)}var inherits=__webpack_require__(0);exports.Reporter=Reporter,Reporter.prototype.isError=function isError(obj){return obj instanceof ReporterError},Reporter.prototype.save=function save(){var state=this._reporterState;return{obj:state.obj,pathLen:state.path.length}},Reporter.prototype.restore=function restore(data){var state=this._reporterState;state.obj=data.obj,state.path=state.path.slice(0,data.pathLen)},Reporter.prototype.enterKey=function enterKey(key){return this._reporterState.path.push(key)},Reporter.prototype.exitKey=function exitKey(index){var state=this._reporterState;state.path=state.path.slice(0,index-1)},Reporter.prototype.leaveKey=function leaveKey(index,key,value){var state=this._reporterState;this.exitKey(index),state.obj!==null&&(state.obj[key]=value)},Reporter.prototype.path=function path(){return this._reporterState.path.join('/')},Reporter.prototype.enterObject=function enterObject(){var state=this._reporterState;var prev=state.obj;return state.obj={},prev},Reporter.prototype.leaveObject=function leaveObject(prev){var state=this._reporterState;var now=state.obj;return state.obj=prev,now},Reporter.prototype.error=function error(msg){var err;var state=this._reporterState;var inherited=msg instanceof ReporterError;if(err=inherited?msg:new ReporterError(state.path.map(function(elem){return'['+JSON.stringify(elem)+']'}).join(''),msg.message||msg,msg.stack),!state.options.partial)throw err;return!inherited&&state.errors.push(err),err},Reporter.prototype.wrapResult=function wrapResult(result){var state=this._reporterState;return state.options.partial?{result:this.isError(result)?null:result,errors:state.errors}:result};;inherits(ReporterError,Error),ReporterError.prototype.rethrow=function rethrow(msg){if(this.message=msg+' at: '+(this.path||'(shallow)'),Error.captureStackTrace&&Error.captureStackTrace(this,ReporterError),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},function(module,exports,__webpack_require__){var constants=__webpack_require__(40);exports.tagClass={0:'universal',1:'application',2:'context',3:'private'},exports.tagClassByName=constants._reverse(exports.tagClass),exports.tag={0:'end',1:'bool',2:'int',3:'bitstr',4:'octstr',5:'null_',6:'objid',7:'objDesc',8:'external',9:'real',10:'enum',11:'embed',12:'utf8str',13:'relativeOid',16:'seq',17:'set',18:'numstr',19:'printstr',20:'t61str',21:'videostr',22:'ia5str',23:'utctime',24:'gentime',25:'graphstr',26:'iso646str',27:'genstr',28:'unistr',29:'charstr',30:'bmpstr'},exports.tagByName=constants._reverse(exports.tag)},function(module,exports,__webpack_require__){var decoders=exports;decoders.der=__webpack_require__(41),decoders.pem=__webpack_require__(83)},function(module,exports,__webpack_require__){function PEMDecoder(entity){DERDecoder.call(this,entity),this.enc='pem'}var inherits=__webpack_require__(0);var Buffer=__webpack_require__(1).Buffer;var DERDecoder=__webpack_require__(41);;inherits(PEMDecoder,DERDecoder),module.exports=PEMDecoder,PEMDecoder.prototype.decode=function decode(data,options){var lines=data.toString().split(/[\r\n]+/g);var label=options.label.toUpperCase();var re=/^-----(BEGIN|END) ([^-]+)-----$/;var start=-1;var end=-1;for(var i=0;i<lines.length;i++){var match=lines[i].match(re);if(match!==null&&match[2]===label)if(start===-1){if(match[1]!=='BEGIN')break;start=i}else{if(match[1]!=='END')break;end=i;break}}if(start===-1||end===-1)throw new Error('PEM section not found for: '+label);var base64=lines.slice(start+1,end).join('');base64.replace(/[^a-z0-9\+\/=]+/gi,'');var input=new Buffer(base64,'base64');return DERDecoder.prototype.decode.call(this,input,options)}},function(module,exports,__webpack_require__){var encoders=exports;encoders.der=__webpack_require__(42),encoders.pem=__webpack_require__(85)},function(module,exports,__webpack_require__){function PEMEncoder(entity){DEREncoder.call(this,entity),this.enc='pem'}var inherits=__webpack_require__(0);var DEREncoder=__webpack_require__(42);;inherits(PEMEncoder,DEREncoder),module.exports=PEMEncoder,PEMEncoder.prototype.encode=function encode(data,options){var buf=DEREncoder.prototype.encode.call(this,data);var p=buf.toString('base64');var out=['-----BEGIN '+options.label+'-----'];for(var i=0;i<p.length;i+=64)out.push(p.slice(i,i+64));return out.push('-----END '+options.label+'-----'),out.join('\n')}},function(module,exports,__webpack_require__){'use strict';function placeHoldersCount(b64){var len=b64.length;if(len%4>0)throw new Error('Invalid string. Length must be a multiple of 4');return b64[len-2]==='='?2:b64[len-1]==='='?1:0}function byteLength(b64){return b64.length*3/4-placeHoldersCount(b64)}function toByteArray(b64){var i,l,tmp,placeHolders,arr;var len=b64.length;placeHolders=placeHoldersCount(b64),arr=new Arr(len*3/4-placeHolders),l=placeHolders>0?len-4:len;var L=0;for(i=0;i<l;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[L++]=tmp>>16&255,arr[L++]=tmp>>8&255,arr[L++]=tmp&255;return placeHolders===2?(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[L++]=tmp&255):placeHolders===1&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[L++]=tmp>>8&255,arr[L++]=tmp&255),arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3)tmp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2],output.push(tripletToBase64(tmp));return output.join('')}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var output='';var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength)parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength));return extraBytes===1?(tmp=uint8[len-1],output+=lookup[tmp>>2],output+=lookup[tmp<<4&63],output+='=='):extraBytes===2&&(tmp=(uint8[len-2]<<8)+uint8[len-1],output+=lookup[tmp>>10],output+=lookup[tmp>>4&63],output+=lookup[tmp<<2&63],output+='='),parts.push(output),parts.join('')}exports.byteLength=byteLength,exports.toByteArray=toByteArray,exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array==='undefined'?Array:Uint8Array;var code='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup['-'.charCodeAt(0)]=62,revLookup['_'.charCodeAt(0)]=63},function(module,exports,__webpack_require__){function Decipher(mode,key,iv){Transform.call(this),this._cache=new Splitter,this._last=void 0,this._cipher=new aes.AES(key),this._prev=Buffer.from(iv),this._mode=mode,this._autopadding=!0}function Splitter(){this.cache=Buffer.allocUnsafe(0)}function unpad(last){var padded=last[15];for(var i=-1;++i<padded;)if(last[i+(16-padded)]!==padded)throw new Error('unable to decrypt data');return padded===16?void 0:last.slice(0,16-padded)}function createDecipheriv(suite,password,iv){var config=MODES[suite.toLowerCase()];if(!config)throw new TypeError('invalid suite type');if(typeof iv==='string'&&(iv=Buffer.from(iv)),iv.length!==config.iv)throw new TypeError('invalid iv length '+iv.length);if(typeof password==='string'&&(password=Buffer.from(password)),password.length!==config.key/8)throw new TypeError('invalid key length '+password.length);return config.type==='stream'?new StreamCipher(config.module,password,iv,!0):config.type==='auth'?new AuthCipher(config.module,password,iv,!0):new Decipher(config.module,password,iv)}function createDecipher(suite,password){var config=MODES[suite.toLowerCase()];if(!config)throw new TypeError('invalid suite type');var keys=ebtk(password,!1,config.key,config.iv);return createDecipheriv(suite,keys.key,keys.iv)}var AuthCipher=__webpack_require__(44);var Buffer=__webpack_require__(3).Buffer;var MODES=__webpack_require__(26);var StreamCipher=__webpack_require__(47);var Transform=__webpack_require__(8);var aes=__webpack_require__(19);var ebtk=__webpack_require__(21);var inherits=__webpack_require__(0);inherits(Decipher,Transform),Decipher.prototype._update=function(data){this._cache.add(data);var chunk;var thing;for(var out=[];chunk=this._cache.get(this._autopadding);)thing=this._mode.decrypt(this,chunk),out.push(thing);return Buffer.concat(out)},Decipher.prototype._final=function(){var chunk=this._cache.flush();if(this._autopadding)return unpad(this._mode.decrypt(this,chunk));if(chunk)throw new Error('data not multiple of block length')},Decipher.prototype.setAutoPadding=function(setTo){return this._autopadding=!!setTo,this},Splitter.prototype.add=function(data){this.cache=Buffer.concat([this.cache,data])},Splitter.prototype.get=function(autoPadding){var out;if(autoPadding){if(this.cache.length>16)return out=this.cache.slice(0,16),this.cache=this.cache.slice(16),out;}else if(this.cache.length>=16)return out=this.cache.slice(0,16),this.cache=this.cache.slice(16),out;return null},Splitter.prototype.flush=function(){if(this.cache.length)return this.cache},exports.createDecipher=createDecipher,exports.createDecipheriv=createDecipheriv},function(module,exports,__webpack_require__){function Cipher(mode,key,iv){Transform.call(this),this._cache=new Splitter,this._cipher=new aes.AES(key),this._prev=Buffer.from(iv),this._mode=mode,this._autopadding=!0}function Splitter(){this.cache=Buffer.allocUnsafe(0)}function createCipheriv(suite,password,iv){var config=MODES[suite.toLowerCase()];if(!config)throw new TypeError('invalid suite type');if(typeof password==='string'&&(password=Buffer.from(password)),password.length!==config.key/8)throw new TypeError('invalid key length '+password.length);if(typeof iv==='string'&&(iv=Buffer.from(iv)),iv.length!==config.iv)throw new TypeError('invalid iv length '+iv.length);return config.type==='stream'?new StreamCipher(config.module,password,iv):config.type==='auth'?new AuthCipher(config.module,password,iv):new Cipher(config.module,password,iv)}function createCipher(suite,password){var config=MODES[suite.toLowerCase()];if(!config)throw new TypeError('invalid suite type');var keys=ebtk(password,!1,config.key,config.iv);return createCipheriv(suite,keys.key,keys.iv)}var MODES=__webpack_require__(26);var AuthCipher=__webpack_require__(44);var Buffer=__webpack_require__(3).Buffer;var StreamCipher=__webpack_require__(47);var Transform=__webpack_require__(8);var aes=__webpack_require__(19);var ebtk=__webpack_require__(21);var inherits=__webpack_require__(0);inherits(Cipher,Transform),Cipher.prototype._update=function(data){this._cache.add(data);var chunk;var thing;for(var out=[];chunk=this._cache.get();)thing=this._mode.encrypt(this,chunk),out.push(thing);return Buffer.concat(out)};var PADDING=Buffer.alloc(16,16);Cipher.prototype._final=function(){var chunk=this._cache.flush();if(this._autopadding)return chunk=this._mode.encrypt(this,chunk),this._cipher.scrub(),chunk;if(!chunk.equals(PADDING))throw this._cipher.scrub(),new Error('data not multiple of block length')},Cipher.prototype.setAutoPadding=function(setTo){return this._autopadding=!!setTo,this},Splitter.prototype.add=function(data){this.cache=Buffer.concat([this.cache,data])},Splitter.prototype.get=function(){if(this.cache.length>15){var out=this.cache.slice(0,16);return this.cache=this.cache.slice(16),out}return null},Splitter.prototype.flush=function(){var len=16-this.cache.length;var padBuff=Buffer.allocUnsafe(len);for(var i=-1;++i<len;)padBuff.writeUInt8(len,i);return Buffer.concat([this.cache,padBuff])},exports.createCipheriv=createCipheriv,exports.createCipher=createCipher},function(module,exports,__webpack_require__){function toArray(buf){return[buf.readUInt32BE(0),buf.readUInt32BE(4),buf.readUInt32BE(8),buf.readUInt32BE(12)]}function fromArray(out){var buf=Buffer.allocUnsafe(16);return buf.writeUInt32BE(out[0]>>>0,0),buf.writeUInt32BE(out[1]>>>0,4),buf.writeUInt32BE(out[2]>>>0,8),buf.writeUInt32BE(out[3]>>>0,12),buf}function GHASH(key){this.h=key,this.state=Buffer.alloc(16,0),this.cache=Buffer.allocUnsafe(0)}var Buffer=__webpack_require__(3).Buffer;var ZEROES=Buffer.alloc(16,0);GHASH.prototype.ghash=function(block){for(var i=-1;++i<block.length;)this.state[i]^=block[i];this._multiply()},GHASH.prototype._multiply=function(){var Vi=toArray(this.h);var Zi=[0,0,0,0];var j,xi,lsbVi;for(var i=-1;++i<128;){for(xi=(this.state[~~(i/8)]&1<<7-i%8)!==0,xi&&(Zi[0]^=Vi[0],Zi[1]^=Vi[1],Zi[2]^=Vi[2],Zi[3]^=Vi[3]),lsbVi=(Vi[3]&1)!==0,j=3;j>0;j--)Vi[j]=Vi[j]>>>1|(Vi[j-1]&1)<<31;Vi[0]>>>=1,lsbVi&&(Vi[0]^=225<<24)}this.state=fromArray(Zi)},GHASH.prototype.update=function(buf){this.cache=Buffer.concat([this.cache,buf]);for(var chunk;this.cache.length>=16;)chunk=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(chunk)},GHASH.prototype.final=function(abl,bl){return this.cache.length&&this.ghash(Buffer.concat([this.cache,ZEROES],16)),this.ghash(fromArray([0,abl,0,bl])),this.state},module.exports=GHASH},function(module,exports,__webpack_require__){var xor=__webpack_require__(14);exports.encrypt=function(self,block){var data=xor(block,self._prev);return self._prev=self._cipher.encryptBlock(data),self._prev},exports.decrypt=function(self,block){var pad=self._prev;self._prev=block;var out=self._cipher.decryptBlock(block);return xor(out,pad)}},function(module,exports,__webpack_require__){function encryptStart(self,data,decrypt){var len=data.length;var out=xor(data,self._cache);return self._cache=self._cache.slice(len),self._prev=Buffer.concat([self._prev,decrypt?data:out]),out}var Buffer=__webpack_require__(3).Buffer;var xor=__webpack_require__(14);exports.encrypt=function(self,data,decrypt){var out=Buffer.allocUnsafe(0);for(var len;data.length;)if(self._cache.length===0&&(self._cache=self._cipher.encryptBlock(self._prev),self._prev=Buffer.allocUnsafe(0)),self._cache.length<=data.length)len=self._cache.length,out=Buffer.concat([out,encryptStart(self,data.slice(0,len),decrypt)]),data=data.slice(len);else{out=Buffer.concat([out,encryptStart(self,data,decrypt)]);break}return out}},function(module,exports,__webpack_require__){function encryptByte(self,byteParam,decrypt){var pad;var i=-1;var len=8;var out=0;for(var bit,value;++i<len;)pad=self._cipher.encryptBlock(self._prev),bit=byteParam&1<<7-i?128:0,value=pad[0]^bit,out+=(value&128)>>i%8,self._prev=shiftIn(self._prev,decrypt?bit:value);return out}function shiftIn(buffer,value){var len=buffer.length;var i=-1;var out=Buffer.allocUnsafe(buffer.length);for(buffer=Buffer.concat([buffer,Buffer.from([value])]);++i<len;)out[i]=buffer[i]<<1|buffer[i+1]>>7;return out}var Buffer=__webpack_require__(3).Buffer;exports.encrypt=function(self,chunk,decrypt){var len=chunk.length;var out=Buffer.allocUnsafe(len);for(var i=-1;++i<len;)out[i]=encryptByte(self,chunk[i],decrypt);return out}},function(module,exports,__webpack_require__){(function(Buffer){function encryptByte(self,byteParam,decrypt){var pad=self._cipher.encryptBlock(self._prev);var out=pad[0]^byteParam;return self._prev=Buffer.concat([self._prev.slice(1),Buffer.from([decrypt?byteParam:out])]),out}exports.encrypt=function(self,chunk,decrypt){var len=chunk.length;var out=Buffer.allocUnsafe(len);for(var i=-1;++i<len;)out[i]=encryptByte(self,chunk[i],decrypt);return out}}).call(exports,__webpack_require__(1).Buffer)},function(module,exports){exports.encrypt=function(self,block){return self._cipher.encryptBlock(block)},exports.decrypt=function(self,block){return self._cipher.decryptBlock(block)}},function(module,exports,__webpack_require__){(function(Buffer){function getBlock(self){return self._prev=self._cipher.encryptBlock(self._prev),self._prev}var xor=__webpack_require__(14);exports.encrypt=function(self,chunk){for(;self._cache.length<chunk.length;)self._cache=Buffer.concat([self._cache,getBlock(self)]);var pad=self._cache.slice(0,chunk.length);return self._cache=self._cache.slice(chunk.length),xor(chunk,pad)}}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){function createCipher(suite,password){var keyLen,ivLen;if(suite=suite.toLowerCase(),aesModes[suite])keyLen=aesModes[suite].key,ivLen=aesModes[suite].iv;else if(desModes[suite])keyLen=desModes[suite].key*8,ivLen=desModes[suite].iv;else throw new TypeError('invalid suite type');var keys=ebtk(password,!1,keyLen,ivLen);return createCipheriv(suite,keys.key,keys.iv)}function createDecipher(suite,password){var keyLen,ivLen;if(suite=suite.toLowerCase(),aesModes[suite])keyLen=aesModes[suite].key,ivLen=aesModes[suite].iv;else if(desModes[suite])keyLen=desModes[suite].key*8,ivLen=desModes[suite].iv;else throw new TypeError('invalid suite type');var keys=ebtk(password,!1,keyLen,ivLen);return createDecipheriv(suite,keys.key,keys.iv)}function createCipheriv(suite,key,iv){if(suite=suite.toLowerCase(),aesModes[suite])return aes.createCipheriv(suite,key,iv);if(desModes[suite])return new DES({key:key,iv:iv,mode:suite});throw new TypeError('invalid suite type')}function createDecipheriv(suite,key,iv){if(suite=suite.toLowerCase(),aesModes[suite])return aes.createDecipheriv(suite,key,iv);if(desModes[suite])return new DES({key:key,iv:iv,mode:suite,decrypt:!0});throw new TypeError('invalid suite type')}function getCiphers(){return Object.keys(desModes).concat(aes.getCiphers())}var ebtk=__webpack_require__(21);var aes=__webpack_require__(25);var DES=__webpack_require__(97);var desModes=__webpack_require__(98);var aesModes=__webpack_require__(26);exports.createCipher=exports.Cipher=createCipher,exports.createCipheriv=exports.Cipheriv=createCipheriv,exports.createDecipher=exports.Decipher=createDecipher,exports.createDecipheriv=exports.Decipheriv=createDecipheriv,exports.listCiphers=exports.getCiphers=getCiphers},function(module,exports,__webpack_require__){(function(Buffer){function DES(opts){CipherBase.call(this);var modeName=opts.mode.toLowerCase();var mode=modes[modeName];var type;type=opts.decrypt?'decrypt':'encrypt';var key=opts.key;(modeName==='des-ede'||modeName==='des-ede-cbc')&&(key=Buffer.concat([key,key.slice(0,8)]));var iv=opts.iv;this._des=mode.create({key:key,iv:iv,type:type})}var CipherBase=__webpack_require__(8);var des=__webpack_require__(29);var inherits=__webpack_require__(0);var modes={'des-ede3-cbc':des.CBC.instantiate(des.EDE),'des-ede3':des.EDE,'des-ede-cbc':des.CBC.instantiate(des.EDE),'des-ede':des.EDE,'des-cbc':des.CBC.instantiate(des.DES),'des-ecb':des.DES};modes.des=modes['des-cbc'],modes.des3=modes['des-ede3-cbc'],module.exports=DES,inherits(DES,CipherBase),DES.prototype._update=function(data){return new Buffer(this._des.update(data))},DES.prototype._final=function(){return new Buffer(this._des.final())}}).call(exports,__webpack_require__(1).Buffer)},function(module,exports){exports['des-ecb']={key:8,iv:0},exports['des-cbc']=exports.des={key:8,iv:8},exports['des-ede3-cbc']=exports.des3={key:24,iv:8},exports['des-ede3']={key:24,iv:0},exports['des-ede-cbc']={key:16,iv:8},exports['des-ede']={key:16,iv:0}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(48)},function(module,exports,__webpack_require__){(function(Buffer){function Sign(algorithm){stream.Writable.call(this);var data=algorithms[algorithm];if(!data)throw new Error('Unknown message digest');this._hashType=data.hash,this._hash=createHash(data.hash),this._tag=data.id,this._signType=data.sign}function Verify(algorithm){stream.Writable.call(this);var data=algorithms[algorithm];if(!data)throw new Error('Unknown message digest');this._hash=createHash(data.hash),this._tag=data.id,this._signType=data.sign}function createSign(algorithm){return new Sign(algorithm)}function createVerify(algorithm){return new Verify(algorithm)}var createHash=__webpack_require__(16);var stream=__webpack_require__(24);var inherits=__webpack_require__(0);var sign=__webpack_require__(101);var verify=__webpack_require__(102);var algorithms=__webpack_require__(48);Object.keys(algorithms).forEach(function(key){algorithms[key].id=new Buffer(algorithms[key].id,'hex'),algorithms[key.toLowerCase()]=algorithms[key]}),inherits(Sign,stream.Writable),Sign.prototype._write=function _write(data,_,done){this._hash.update(data),done()},Sign.prototype.update=function update(data,enc){return typeof data==='string'&&(data=new Buffer(data,enc)),this._hash.update(data),this},Sign.prototype.sign=function signMethod(key,enc){this.end();var hash=this._hash.digest();var sig=sign(hash,key,this._hashType,this._signType,this._tag);return enc?sig.toString(enc):sig},inherits(Verify,stream.Writable),Verify.prototype._write=function _write(data,_,done){this._hash.update(data),done()},Verify.prototype.update=function update(data,enc){return typeof data==='string'&&(data=new Buffer(data,enc)),this._hash.update(data),this},Verify.prototype.verify=function verifyMethod(key,sig,enc){typeof sig==='string'&&(sig=new Buffer(sig,enc)),this.end();var hash=this._hash.digest();return verify(sig,hash,key,this._signType,this._tag)},module.exports={Sign:createSign,Verify:createVerify,createSign:createSign,createVerify:createVerify}}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){function sign(hash,key,hashType,signType,tag){var priv=parseKeys(key);if(priv.curve){if(signType!=='ecdsa'&&signType!=='ecdsa/rsa')throw new Error('wrong private key type');return ecSign(hash,priv)}if(priv.type==='dsa'){if(signType!=='dsa')throw new Error('wrong private key type');return dsaSign(hash,priv,hashType)}if(signType!=='rsa'&&signType!=='ecdsa/rsa')throw new Error('wrong private key type');hash=Buffer.concat([tag,hash]);var len=priv.modulus.byteLength();for(var pad=[0,1];hash.length+pad.length+1<len;)pad.push(255);pad.push(0);for(var i=-1;++i<hash.length;)pad.push(hash[i]);var out=crt(pad,priv);return out}function ecSign(hash,priv){var curveId=curves[priv.curve.join('.')];if(!curveId)throw new Error('unknown curve '+priv.curve.join('.'));var curve=new EC(curveId);var key=curve.keyFromPrivate(priv.privateKey);var out=key.sign(hash);return new Buffer(out.toDER())}function dsaSign(hash,priv,algo){var x=priv.params.priv_key;var p=priv.params.p;var q=priv.params.q;var g=priv.params.g;var r=new BN(0);var k;var H=bits2int(hash,q).mod(q);var s=!1;for(var kv=getKey(x,q,hash,algo);s===!1;)k=makeKey(q,kv,algo),r=makeR(g,k,p,q),s=k.invm(q).imul(H.add(x.mul(r))).mod(q),s.cmpn(0)===0&&(s=!1,r=new BN(0));return toDER(r,s)}function toDER(r,s){r=r.toArray(),s=s.toArray(),r[0]&128&&(r=[0].concat(r)),s[0]&128&&(s=[0].concat(s));var total=r.length+s.length+4;var res=[48,total,2,r.length];return res=res.concat(r,[2,s.length],s),new Buffer(res)}function getKey(x,q,hash,algo){if(x=new Buffer(x.toArray()),x.length<q.byteLength()){var zeros=new Buffer(q.byteLength()-x.length);zeros.fill(0),x=Buffer.concat([zeros,x])}var hlen=hash.length;var hbits=bits2octets(hash,q);var v=new Buffer(hlen);v.fill(1);var k=new Buffer(hlen);return k.fill(0),k=createHmac(algo,k).update(v).update(new Buffer([0])).update(x).update(hbits).digest(),v=createHmac(algo,k).update(v).digest(),k=createHmac(algo,k).update(v).update(new Buffer([1])).update(x).update(hbits).digest(),v=createHmac(algo,k).update(v).digest(),{k:k,v:v}}function bits2int(obits,q){var bits=new BN(obits);var shift=(obits.length<<3)-q.bitLength();return shift>0&&bits.ishrn(shift),bits}function bits2octets(bits,q){bits=bits2int(bits,q),bits=bits.mod(q);var out=new Buffer(bits.toArray());if(out.length<q.byteLength()){var zeros=new Buffer(q.byteLength()-out.length);zeros.fill(0),out=Buffer.concat([zeros,out])}return out}function makeKey(q,kv,algo){var t;var k;do{for(t=new Buffer(0);t.length*8<q.bitLength();)kv.v=createHmac(algo,kv.k).update(kv.v).digest(),t=Buffer.concat([t,kv.v]);k=bits2int(t,q),kv.k=createHmac(algo,kv.k).update(kv.v).update(new Buffer([0])).digest(),kv.v=createHmac(algo,kv.k).update(kv.v).digest()}while(k.cmp(q)!==-1);return k}function makeR(g,k,p,q){return g.toRed(BN.mont(p)).redPow(k).fromRed().mod(q)}var createHmac=__webpack_require__(50);var crt=__webpack_require__(27);var EC=__webpack_require__(4).ec;var BN=__webpack_require__(2);var parseKeys=__webpack_require__(22);var curves=__webpack_require__(49);module.exports=sign,module.exports.getKey=getKey,module.exports.makeKey=makeKey}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){function verify(sig,hash,key,signType,tag){var pub=parseKeys(key);if(pub.type==='ec'){if(signType!=='ecdsa'&&signType!=='ecdsa/rsa')throw new Error('wrong public key type');return ecVerify(sig,hash,pub)}if(pub.type==='dsa'){if(signType!=='dsa')throw new Error('wrong public key type');return dsaVerify(sig,hash,pub)}if(signType!=='rsa'&&signType!=='ecdsa/rsa')throw new Error('wrong public key type');hash=Buffer.concat([tag,hash]);var len=pub.modulus.byteLength();var pad=[1];for(var padNum=0;hash.length+pad.length+2<len;)pad.push(255),padNum++;pad.push(0);for(var i=-1;++i<hash.length;)pad.push(hash[i]);pad=new Buffer(pad);var red=BN.mont(pub.modulus);sig=new BN(sig).toRed(red),sig=sig.redPow(new BN(pub.publicExponent)),sig=new Buffer(sig.fromRed().toArray());var out=padNum<8?1:0;for(len=Math.min(sig.length,pad.length),sig.length!==pad.length&&(out=1),i=-1;++i<len;)out|=sig[i]^pad[i];return out===0}function ecVerify(sig,hash,pub){var curveId=curves[pub.data.algorithm.curve.join('.')];if(!curveId)throw new Error('unknown curve '+pub.data.algorithm.curve.join('.'));var curve=new EC(curveId);var pubkey=pub.data.subjectPrivateKey.data;return curve.verify(hash,sig,pubkey)}function dsaVerify(sig,hash,pub){var p=pub.data.p;var q=pub.data.q;var g=pub.data.g;var y=pub.data.pub_key;var unpacked=parseKeys.signature.decode(sig,'der');var s=unpacked.s;var r=unpacked.r;checkValue(s,q),checkValue(r,q);var montp=BN.mont(p);var w=s.invm(q);var v=g.toRed(montp).redPow(new BN(hash).mul(w).mod(q)).fromRed().mul(y.toRed(montp).redPow(r.mul(w).mod(q)).fromRed()).mod(p).mod(q);return v.cmp(r)===0}function checkValue(b,q){if(b.cmpn(0)<=0)throw new Error('invalid sig');if(b.cmp(q)>=q)throw new Error('invalid sig')}var BN=__webpack_require__(2);var EC=__webpack_require__(4).ec;var parseKeys=__webpack_require__(22);var curves=__webpack_require__(49);module.exports=verify}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}module.exports=Emitter;;Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks['$'+event]=this._callbacks['$'+event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){this.off(event,on),fn.apply(this,arguments)}return on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var callbacks=this._callbacks['$'+event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks['$'+event],this;var cb;for(var i=0;i<callbacks.length;i++)if(cb=callbacks[i],cb===fn||cb.fn===fn){callbacks.splice(i,1);break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks['$'+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks['$'+event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},function(module,exports,__webpack_require__){(function(Buffer){function ECDH(curve){this.curveType=aliases[curve],!this.curveType&&(this.curveType={name:curve}),this.curve=new elliptic.ec(this.curveType.name),this.keys=void 0}function formatReturnValue(bn,enc,len){!Array.isArray(bn)&&(bn=bn.toArray());var buf=new Buffer(bn);if(len&&buf.length<len){var zeros=new Buffer(len-buf.length);zeros.fill(0),buf=Buffer.concat([zeros,buf])}return enc?buf.toString(enc):buf}var elliptic=__webpack_require__(4);var BN=__webpack_require__(2);module.exports=function createECDH(curve){return new ECDH(curve)};var aliases={secp256k1:{name:'secp256k1',byteLength:32},secp224r1:{name:'p224',byteLength:28},prime256v1:{name:'p256',byteLength:32},prime192v1:{name:'p192',byteLength:24},ed25519:{name:'ed25519',byteLength:32},secp384r1:{name:'p384',byteLength:48},secp521r1:{name:'p521',byteLength:66}};aliases.p224=aliases.secp224r1,aliases.p256=aliases.secp256r1=aliases.prime256v1,aliases.p192=aliases.secp192r1=aliases.prime192v1,aliases.p384=aliases.secp384r1,aliases.p521=aliases.secp521r1,ECDH.prototype.generateKeys=function(enc,format){return this.keys=this.curve.genKeyPair(),this.getPublicKey(enc,format)},ECDH.prototype.computeSecret=function(other,inenc,enc){inenc=inenc||'utf8',!Buffer.isBuffer(other)&&(other=new Buffer(other,inenc));var otherPub=this.curve.keyFromPublic(other).getPublic();var out=otherPub.mul(this.keys.getPrivate()).getX();return formatReturnValue(out,enc,this.curveType.byteLength)},ECDH.prototype.getPublicKey=function(enc,format){var key=this.keys.getPublic(format==='compressed',!0);return format==='hybrid'&&(key[key.length-1]%2?key[0]=7:key[0]=6),formatReturnValue(key,enc)},ECDH.prototype.getPrivateKey=function(enc){return formatReturnValue(this.keys.getPrivate(),enc)},ECDH.prototype.setPublicKey=function(pub,enc){return enc=enc||'utf8',!Buffer.isBuffer(pub)&&(pub=new Buffer(pub,enc)),this.keys._importPublic(pub),this},ECDH.prototype.setPrivateKey=function(priv,enc){enc=enc||'utf8',!Buffer.isBuffer(priv)&&(priv=new Buffer(priv,enc));var _priv=new BN(priv);return _priv=_priv.toString(16),this.keys._importPrivate(_priv),this}}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){'use strict';(function(Buffer){function toArray(buf){if(buf.length%intSize!==0){var len=buf.length+(intSize-buf.length%intSize);buf=Buffer.concat([buf,zeroBuffer],len)}var arr=Array(buf.length>>>2);for(var i=0,j=0;i<buf.length;i+=intSize,j++)arr[j]=buf.readInt32LE(i);return arr}var intSize=4;var zeroBuffer=new Buffer(intSize);zeroBuffer.fill(0);var charSize=8;var hashSize=16;module.exports=function hash(buf,fn){var arr=fn(toArray(buf),buf.length*charSize);buf=new Buffer(hashSize);for(var i=0;i<arr.length;i++)buf.writeInt32LE(arr[i],i<<2,!0);return buf}}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){'use strict';function Hmac(alg,key){Base.call(this,'digest'),typeof key==='string'&&(key=Buffer.from(key)),this._alg=alg,this._key=key,key.length>blocksize?key=alg(key):key.length<blocksize&&(key=Buffer.concat([key,ZEROS],blocksize));var ipad=this._ipad=Buffer.allocUnsafe(blocksize);var opad=this._opad=Buffer.allocUnsafe(blocksize);for(var i=0;i<blocksize;i++)ipad[i]=key[i]^54,opad[i]=key[i]^92;this._hash=[ipad]}var inherits=__webpack_require__(0);var Buffer=__webpack_require__(3).Buffer;var Base=__webpack_require__(8);var ZEROS=Buffer.alloc(128);var blocksize=64;inherits(Hmac,Base),Hmac.prototype._update=function(data){this._hash.push(data)},Hmac.prototype._final=function(){var h=this._alg(Buffer.concat(this._hash));return this._alg(Buffer.concat([this._opad,h]))},module.exports=Hmac},function(module,exports,__webpack_require__){'use strict';exports.randomBytes=exports.rng=exports.pseudoRandomBytes=exports.prng=__webpack_require__(18),exports.createHash=exports.Hash=__webpack_require__(16),exports.createHmac=exports.Hmac=__webpack_require__(50);var algos=__webpack_require__(99);var algoKeys=Object.keys(algos);var hashes=['sha1','sha224','sha256','sha384','sha512','md5','rmd160'].concat(algoKeys);exports.getHashes=function(){return hashes};var p=__webpack_require__(58);exports.pbkdf2=p.pbkdf2,exports.pbkdf2Sync=p.pbkdf2Sync;var aes=__webpack_require__(96);exports.Cipher=aes.Cipher,exports.createCipher=aes.createCipher,exports.Cipheriv=aes.Cipheriv,exports.createCipheriv=aes.createCipheriv,exports.Decipher=aes.Decipher,exports.createDecipher=aes.createDecipher,exports.Decipheriv=aes.Decipheriv,exports.createDecipheriv=aes.createDecipheriv,exports.getCiphers=aes.getCiphers,exports.listCiphers=aes.listCiphers;var dh=__webpack_require__(113);exports.DiffieHellmanGroup=dh.DiffieHellmanGroup,exports.createDiffieHellmanGroup=dh.createDiffieHellmanGroup,exports.getDiffieHellman=dh.getDiffieHellman,exports.createDiffieHellman=dh.createDiffieHellman,exports.DiffieHellman=dh.DiffieHellman;var sign=__webpack_require__(100);exports.createSign=sign.createSign,exports.Sign=sign.Sign,exports.createVerify=sign.createVerify,exports.Verify=sign.Verify,exports.createECDH=__webpack_require__(104);var publicEncrypt=__webpack_require__(147);exports.publicEncrypt=publicEncrypt.publicEncrypt,exports.privateEncrypt=publicEncrypt.privateEncrypt,exports.publicDecrypt=publicEncrypt.publicDecrypt,exports.privateDecrypt=publicEncrypt.privateDecrypt,exports.createCredentials=function(){throw new Error(['sorry, createCredentials is not implemented yet','we accept pull requests','https://github.com/crypto-browserify/crypto-browserify'].join('\n'))},exports.constants={'DH_CHECK_P_NOT_SAFE_PRIME':2,'DH_CHECK_P_NOT_PRIME':1,'DH_UNABLE_TO_CHECK_GENERATOR':4,'DH_NOT_SUITABLE_GENERATOR':8,'NPN_ENABLED':1,'ALPN_ENABLED':1,'RSA_PKCS1_PADDING':1,'RSA_SSLV23_PADDING':2,'RSA_NO_PADDING':3,'RSA_PKCS1_OAEP_PADDING':4,'RSA_X931_PADDING':5,'RSA_PKCS1_PSS_PADDING':6,'POINT_CONVERSION_COMPRESSED':2,'POINT_CONVERSION_UNCOMPRESSED':4,'POINT_CONVERSION_HYBRID':6}},function(module,exports,__webpack_require__){'use strict';function CBCState(iv){assert.equal(iv.length,8,'Invalid IV length'),this.iv=Array(8);for(var i=0;i<this.iv.length;i++)this.iv[i]=iv[i]}function instantiate(Base){function CBC(options){Base.call(this,options),this._cbcInit()}inherits(CBC,Base);var keys=Object.keys(proto);for(var i=0;i<keys.length;i++){var key=keys[i];CBC.prototype[key]=proto[key]}return CBC.create=function create(options){return new CBC(options)},CBC}var assert=__webpack_require__(5);var inherits=__webpack_require__(0);var proto={};exports.instantiate=instantiate,proto._cbcInit=function _cbcInit(){var state=new CBCState(this.options.iv);this._cbcState=state},proto._update=function _update(inp,inOff,out,outOff){var state=this._cbcState;var superProto=this.constructor.super_.prototype;var iv=state.iv;if(this.type==='encrypt'){for(var i=0;i<this.blockSize;i++)iv[i]^=inp[inOff+i];superProto._update.call(this,iv,0,out,outOff);for(var i=0;i<this.blockSize;i++)iv[i]=out[outOff+i]}else{superProto._update.call(this,inp,inOff,out,outOff);for(var i=0;i<this.blockSize;i++)out[outOff+i]^=iv[i];for(var i=0;i<this.blockSize;i++)iv[i]=inp[inOff+i]}}},function(module,exports,__webpack_require__){'use strict';function Cipher(options){this.options=options,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=Array(this.blockSize),this.bufferOff=0}var assert=__webpack_require__(5);module.exports=Cipher,Cipher.prototype._init=function _init(){},Cipher.prototype.update=function update(data){return data.length===0?[]:this.type==='decrypt'?this._updateDecrypt(data):this._updateEncrypt(data)},Cipher.prototype._buffer=function _buffer(data,off){var min=Math.min(this.buffer.length-this.bufferOff,data.length-off);for(var i=0;i<min;i++)this.buffer[this.bufferOff+i]=data[off+i];return this.bufferOff+=min,min},Cipher.prototype._flushBuffer=function _flushBuffer(out,off){return this._update(this.buffer,0,out,off),this.bufferOff=0,this.blockSize},Cipher.prototype._updateEncrypt=function _updateEncrypt(data){var inputOff=0;var outputOff=0;var count=(this.bufferOff+data.length)/this.blockSize|0;var out=Array(count*this.blockSize);this.bufferOff!==0&&(inputOff+=this._buffer(data,inputOff),this.bufferOff===this.buffer.length&&(outputOff+=this._flushBuffer(out,outputOff)));for(var max=data.length-(data.length-inputOff)%this.blockSize;inputOff<max;inputOff+=this.blockSize)this._update(data,inputOff,out,outputOff),outputOff+=this.blockSize;for(;inputOff<data.length;inputOff++,this.bufferOff++)this.buffer[this.bufferOff]=data[inputOff];return out},Cipher.prototype._updateDecrypt=function _updateDecrypt(data){var inputOff=0;var outputOff=0;var count=Math.ceil((this.bufferOff+data.length)/this.blockSize)-1;for(var out=Array(count*this.blockSize);count>0;count--)inputOff+=this._buffer(data,inputOff),outputOff+=this._flushBuffer(out,outputOff);return inputOff+=this._buffer(data,inputOff),out},Cipher.prototype.final=function final(buffer){var first;buffer&&(first=this.update(buffer));var last;return last=this.type==='encrypt'?this._finalEncrypt():this._finalDecrypt(),first?first.concat(last):last},Cipher.prototype._pad=function _pad(buffer,off){if(off===0)return!1;for(;off<buffer.length;)buffer[off++]=0;return!0},Cipher.prototype._finalEncrypt=function _finalEncrypt(){if(!this._pad(this.buffer,this.bufferOff))return[];var out=Array(this.blockSize);return this._update(this.buffer,0,out,0),out},Cipher.prototype._unpad=function _unpad(buffer){return buffer},Cipher.prototype._finalDecrypt=function _finalDecrypt(){assert.equal(this.bufferOff,this.blockSize,'Not enough data to decrypt');var out=Array(this.blockSize);return this._flushBuffer(out,0),this._unpad(out)}},function(module,exports,__webpack_require__){'use strict';function DESState(){this.tmp=[,,],this.keys=null}function DES(options){Cipher.call(this,options);var state=new DESState;this._desState=state,this.deriveKeys(state,options.key)}var assert=__webpack_require__(5);var inherits=__webpack_require__(0);var des=__webpack_require__(29);var utils=des.utils;var Cipher=des.Cipher;inherits(DES,Cipher),module.exports=DES,DES.create=function create(options){return new DES(options)};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES.prototype.deriveKeys=function deriveKeys(state,key){state.keys=Array(16*2),assert.equal(key.length,this.blockSize,'Invalid key length');var kL=utils.readUInt32BE(key,0);var kR=utils.readUInt32BE(key,4);utils.pc1(kL,kR,state.tmp,0),kL=state.tmp[0],kR=state.tmp[1];for(var i=0;i<state.keys.length;i+=2){var shift=shiftTable[i>>>1];kL=utils.r28shl(kL,shift),kR=utils.r28shl(kR,shift),utils.pc2(kL,kR,state.keys,i)}},DES.prototype._update=function _update(inp,inOff,out,outOff){var state=this._desState;var l=utils.readUInt32BE(inp,inOff);var r=utils.readUInt32BE(inp,inOff+4);utils.ip(l,r,state.tmp,0),l=state.tmp[0],r=state.tmp[1],this.type==='encrypt'?this._encrypt(state,l,r,state.tmp,0):this._decrypt(state,l,r,state.tmp,0),l=state.tmp[0],r=state.tmp[1],utils.writeUInt32BE(out,l,outOff),utils.writeUInt32BE(out,r,outOff+4)},DES.prototype._pad=function _pad(buffer,off){var value=buffer.length-off;for(var i=off;i<buffer.length;i++)buffer[i]=value;return!0},DES.prototype._unpad=function _unpad(buffer){var pad=buffer[buffer.length-1];for(var i=buffer.length-pad;i<buffer.length;i++)assert.equal(buffer[i],pad);return buffer.slice(0,buffer.length-pad)},DES.prototype._encrypt=function _encrypt(state,lStart,rStart,out,off){var l=lStart;var r=rStart;for(var i=0;i<state.keys.length;i+=2){var keyL=state.keys[i];var keyR=state.keys[i+1];utils.expand(r,state.tmp,0),keyL^=state.tmp[0],keyR^=state.tmp[1];var s=utils.substitute(keyL,keyR);var f=utils.permute(s);var t=r;r=(l^f)>>>0,l=t}utils.rip(r,l,out,off)},DES.prototype._decrypt=function _decrypt(state,lStart,rStart,out,off){var l=rStart;var r=lStart;for(var i=state.keys.length-2;i>=0;i-=2){var keyL=state.keys[i];var keyR=state.keys[i+1];utils.expand(l,state.tmp,0),keyL^=state.tmp[0],keyR^=state.tmp[1];var s=utils.substitute(keyL,keyR);var f=utils.permute(s);var t=l;l=(r^f)>>>0,r=t}utils.rip(l,r,out,off)}},function(module,exports,__webpack_require__){'use strict';function EDEState(type,key){assert.equal(key.length,24,'Invalid key length');var k1=key.slice(0,8);var k2=key.slice(8,16);var k3=key.slice(16,24);this.ciphers=type==='encrypt'?[DES.create({type:'encrypt',key:k1}),DES.create({type:'decrypt',key:k2}),DES.create({type:'encrypt',key:k3})]:[DES.create({type:'decrypt',key:k3}),DES.create({type:'encrypt',key:k2}),DES.create({type:'decrypt',key:k1})]}function EDE(options){Cipher.call(this,options);var state=new EDEState(this.type,this.options.key);this._edeState=state}var assert=__webpack_require__(5);var inherits=__webpack_require__(0);var des=__webpack_require__(29);var Cipher=des.Cipher;var DES=des.DES;inherits(EDE,Cipher),module.exports=EDE,EDE.create=function create(options){return new EDE(options)},EDE.prototype._update=function _update(inp,inOff,out,outOff){var state=this._edeState;state.ciphers[0]._update(inp,inOff,out,outOff),state.ciphers[1]._update(out,outOff,out,outOff),state.ciphers[2]._update(out,outOff,out,outOff)},EDE.prototype._pad=DES.prototype._pad,EDE.prototype._unpad=DES.prototype._unpad},function(module,exports,__webpack_require__){'use strict';exports.readUInt32BE=function readUInt32BE(bytes,off){var res=bytes[0+off]<<24|bytes[1+off]<<16|bytes[2+off]<<8|bytes[3+off];return res>>>0},exports.writeUInt32BE=function writeUInt32BE(bytes,value,off){bytes[0+off]=value>>>24,bytes[1+off]=value>>>16&255,bytes[2+off]=value>>>8&255,bytes[3+off]=value&255},exports.ip=function ip(inL,inR,out,off){var outL=0;var outR=0;for(var i=6;i>=0;i-=2){for(var j=0;j<=24;j+=8)outL<<=1,outL|=inR>>>j+i&1;for(var j=0;j<=24;j+=8)outL<<=1,outL|=inL>>>j+i&1}for(var i=6;i>=0;i-=2){for(var j=1;j<=25;j+=8)outR<<=1,outR|=inR>>>j+i&1;for(var j=1;j<=25;j+=8)outR<<=1,outR|=inL>>>j+i&1}out[off+0]=outL>>>0,out[off+1]=outR>>>0},exports.rip=function rip(inL,inR,out,off){var outL=0;var outR=0;for(var i=0;i<4;i++)for(var j=24;j>=0;j-=8)outL<<=1,outL|=inR>>>j+i&1,outL<<=1,outL|=inL>>>j+i&1;for(var i=4;i<8;i++)for(var j=24;j>=0;j-=8)outR<<=1,outR|=inR>>>j+i&1,outR<<=1,outR|=inL>>>j+i&1;out[off+0]=outL>>>0,out[off+1]=outR>>>0},exports.pc1=function pc1(inL,inR,out,off){var outL=0;var outR=0;for(var i=7;i>=5;i--){for(var j=0;j<=24;j+=8)outL<<=1,outL|=inR>>j+i&1;for(var j=0;j<=24;j+=8)outL<<=1,outL|=inL>>j+i&1}for(var j=0;j<=24;j+=8)outL<<=1,outL|=inR>>j+i&1;for(var i=1;i<=3;i++){for(var j=0;j<=24;j+=8)outR<<=1,outR|=inR>>j+i&1;for(var j=0;j<=24;j+=8)outR<<=1,outR|=inL>>j+i&1}for(var j=0;j<=24;j+=8)outR<<=1,outR|=inL>>j+i&1;out[off+0]=outL>>>0,out[off+1]=outR>>>0},exports.r28shl=function r28shl(num,shift){return num<<shift&268435455|num>>>28-shift};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];exports.pc2=function pc2(inL,inR,out,off){var outL=0;var outR=0;var len=pc2table.length>>>1;for(var i=0;i<len;i++)outL<<=1,outL|=inL>>>pc2table[i]&1;for(var i=len;i<pc2table.length;i++)outR<<=1,outR|=inR>>>pc2table[i]&1;out[off+0]=outL>>>0,out[off+1]=outR>>>0},exports.expand=function expand(r,out,off){var outL=0;var outR=0;outL=(r&1)<<5|r>>>27;for(var i=23;i>=15;i-=4)outL<<=6,outL|=r>>>i&63;for(var i=11;i>=3;i-=4)outR|=r>>>i&63,outR<<=6;outR|=(r&31)<<1|r>>>31,out[off+0]=outL>>>0,out[off+1]=outR>>>0};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];exports.substitute=function substitute(inL,inR){var out=0;for(var i=0;i<4;i++){var b=inL>>>18-i*6&63;var sb=sTable[i*64+b];out<<=4,out|=sb}for(var i=0;i<4;i++){var b=inR>>>18-i*6&63;var sb=sTable[4*64+i*64+b];out<<=4,out|=sb}return out>>>0};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];exports.permute=function permute(num){var out=0;for(var i=0;i<permuteTable.length;i++)out<<=1,out|=num>>>permuteTable[i]&1;return out>>>0},exports.padSplit=function padSplit(num,size,group){for(var str=num.toString(2);str.length<size;)str='0'+str;var out=[];for(var i=0;i<size;i+=group)out.push(str.slice(i,i+group));return out.join(' ')}},function(module,exports,__webpack_require__){(function(Buffer){function getDiffieHellman(mod){var prime=new Buffer(primes[mod].prime,'hex');var gen=new Buffer(primes[mod].gen,'hex');return new DH(prime,gen)}function createDiffieHellman(prime,enc,generator,genc){return Buffer.isBuffer(enc)||ENCODINGS[enc]===undefined?createDiffieHellman(prime,'binary',enc,generator):(enc=enc||'binary',genc=genc||'binary',generator=generator||new Buffer([2]),!Buffer.isBuffer(generator)&&(generator=new Buffer(generator,genc)),typeof prime==='number')?new DH(generatePrime(prime,generator),generator,!0):(!Buffer.isBuffer(prime)&&(prime=new Buffer(prime,enc)),new DH(prime,generator,!0))}var generatePrime=__webpack_require__(51);var primes=__webpack_require__(115);var DH=__webpack_require__(114);var ENCODINGS={'binary':!0,'hex':!0,'base64':!0};exports.DiffieHellmanGroup=exports.createDiffieHellmanGroup=exports.getDiffieHellman=getDiffieHellman,exports.createDiffieHellman=exports.DiffieHellman=createDiffieHellman}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){function setPublicKey(pub,enc){return enc=enc||'utf8',!Buffer.isBuffer(pub)&&(pub=new Buffer(pub,enc)),this._pub=new BN(pub),this}function setPrivateKey(priv,enc){return enc=enc||'utf8',!Buffer.isBuffer(priv)&&(priv=new Buffer(priv,enc)),this._priv=new BN(priv),this}function checkPrime(prime,generator){var gen=generator.toString('hex');var hex=[gen,prime.toString(16)].join('_');if(hex in primeCache)return primeCache[hex];var error=0;if(prime.isEven()||!primes.simpleSieve||!primes.fermatTest(prime)||!millerRabin.test(prime))return error+=1,error+=gen==='02'||gen==='05'?8:4,primeCache[hex]=error,error;!millerRabin.test(prime.shrn(1))&&(error+=2);var rem;return gen==='02'?prime.mod(TWENTYFOUR).cmp(ELEVEN)&&(error+=8):gen==='05'?(rem=prime.mod(TEN),rem.cmp(THREE)&&rem.cmp(SEVEN)&&(error+=8)):error+=4,primeCache[hex]=error,error}function DH(prime,generator,malleable){this.setGenerator(generator),this.__prime=new BN(prime),this._prime=BN.mont(this.__prime),this._primeLen=prime.length,this._pub=undefined,this._priv=undefined,this._primeCode=undefined,malleable?(this.setPublicKey=setPublicKey,this.setPrivateKey=setPrivateKey):this._primeCode=8}function formatReturnValue(bn,enc){var buf=new Buffer(bn.toArray());return enc?buf.toString(enc):buf}var BN=__webpack_require__(2);var MillerRabin=__webpack_require__(56);var millerRabin=new MillerRabin;var TWENTYFOUR=new BN(24);var ELEVEN=new BN(11);var TEN=new BN(10);var THREE=new BN(3);var SEVEN=new BN(7);var primes=__webpack_require__(51);var randomBytes=__webpack_require__(18);module.exports=DH;var primeCache={};Object.defineProperty(DH.prototype,'verifyError',{enumerable:!0,get:function(){return typeof this._primeCode!=='number'&&(this._primeCode=checkPrime(this.__prime,this.__gen)),this._primeCode}}),DH.prototype.generateKeys=function(){return!this._priv&&(this._priv=new BN(randomBytes(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},DH.prototype.computeSecret=function(other){other=new BN(other),other=other.toRed(this._prime);var secret=other.redPow(this._priv).fromRed();var out=new Buffer(secret.toArray());var prime=this.getPrime();if(out.length<prime.length){var front=new Buffer(prime.length-out.length);front.fill(0),out=Buffer.concat([front,out])}return out},DH.prototype.getPublicKey=function getPublicKey(enc){return formatReturnValue(this._pub,enc)},DH.prototype.getPrivateKey=function getPrivateKey(enc){return formatReturnValue(this._priv,enc)},DH.prototype.getPrime=function(enc){return formatReturnValue(this.__prime,enc)},DH.prototype.getGenerator=function(enc){return formatReturnValue(this._gen,enc)},DH.prototype.setGenerator=function(gen,enc){return enc=enc||'utf8',!Buffer.isBuffer(gen)&&(gen=new Buffer(gen,enc)),this.__gen=gen,this._gen=new BN(gen),this}}).call(exports,__webpack_require__(1).Buffer)},function(module,exports){module.exports={'modp1':{'gen':'02','prime':'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff'},'modp2':{'gen':'02','prime':'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff'},'modp5':{'gen':'02','prime':'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff'},'modp14':{'gen':'02','prime':'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff'},'modp15':{'gen':'02','prime':'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff'},'modp16':{'gen':'02','prime':'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff'},'modp17':{'gen':'02','prime':'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff'},'modp18':{'gen':'02','prime':'ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff'}}},function(module,exports,__webpack_require__){'use strict';function BaseCurve(type,conf){this.type=type,this.p=new BN(conf.p,16),this.red=conf.prime?BN.red(conf.prime):BN.mont(this.p),this.zero=new BN(0).toRed(this.red),this.one=new BN(1).toRed(this.red),this.two=new BN(2).toRed(this.red),this.n=conf.n&&new BN(conf.n,16),this.g=conf.g&&this.pointFromJSON(conf.g,conf.gRed),this._wnafT1=[,,,,],this._wnafT2=[,,,,],this._wnafT3=[,,,,],this._wnafT4=[,,,,];var adjustCount=this.n&&this.p.div(this.n);!adjustCount||adjustCount.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function BasePoint(curve,type){this.curve=curve,this.type=type,this.precomputed=null}var _Mathmax5=Math.max;var BN=__webpack_require__(2);var elliptic=__webpack_require__(4);var utils=elliptic.utils;var getNAF=utils.getNAF;var getJSF=utils.getJSF;var assert=utils.assert;module.exports=BaseCurve,BaseCurve.prototype.point=function point(){throw new Error('Not implemented')},BaseCurve.prototype.validate=function validate(){throw new Error('Not implemented')},BaseCurve.prototype._fixedNafMul=function _fixedNafMul(p,k){assert(p.precomputed);var doubles=p._getDoubles();var naf=getNAF(k,1);var I=(1<<doubles.step+1)-(doubles.step%2===0?2:1);I/=3;var repr=[];for(var j=0;j<naf.length;j+=doubles.step){var nafW=0;for(var k=j+doubles.step-1;k>=j;k--)nafW=(nafW<<1)+naf[k];repr.push(nafW)}var a=this.jpoint(null,null,null);var b=this.jpoint(null,null,null);for(var i=I;i>0;i--){for(var j=0;j<repr.length;j++){var nafW=repr[j];nafW===i?b=b.mixedAdd(doubles.points[j]):nafW===-i&&(b=b.mixedAdd(doubles.points[j].neg()))}a=a.add(b)}return a.toP()},BaseCurve.prototype._wnafMul=function _wnafMul(p,k){var w=4;var nafPoints=p._getNAFPoints(w);w=nafPoints.wnd;var wnd=nafPoints.points;var naf=getNAF(k,w);var acc=this.jpoint(null,null,null);for(var i=naf.length-1;i>=0;i--){for(var k=0;i>=0&&naf[i]===0;i--)k++;if(i>=0&&k++,acc=acc.dblp(k),i<0)break;var z=naf[i];assert(z!==0),acc=p.type==='affine'?z>0?acc.mixedAdd(wnd[z-1>>1]):acc.mixedAdd(wnd[-z-1>>1].neg()):z>0?acc.add(wnd[z-1>>1]):acc.add(wnd[-z-1>>1].neg())}return p.type==='affine'?acc.toP():acc},BaseCurve.prototype._wnafMulAdd=function _wnafMulAdd(defW,points,coeffs,len,jacobianResult){var wndWidth=this._wnafT1;var wnd=this._wnafT2;var naf=this._wnafT3;var max=0;for(var i=0;i<len;i++){var p=points[i];var nafPoints=p._getNAFPoints(defW);wndWidth[i]=nafPoints.wnd,wnd[i]=nafPoints.points}for(var i=len-1;i>=1;i-=2){var a=i-1;var b=i;if(wndWidth[a]!==1||wndWidth[b]!==1){naf[a]=getNAF(coeffs[a],wndWidth[a]),naf[b]=getNAF(coeffs[b],wndWidth[b]),max=_Mathmax5(naf[a].length,max),max=_Mathmax5(naf[b].length,max);continue}var comb=[points[a],null,null,points[b]];points[a].y.cmp(points[b].y)===0?(comb[1]=points[a].add(points[b]),comb[2]=points[a].toJ().mixedAdd(points[b].neg())):points[a].y.cmp(points[b].y.redNeg())===0?(comb[1]=points[a].toJ().mixedAdd(points[b]),comb[2]=points[a].add(points[b].neg())):(comb[1]=points[a].toJ().mixedAdd(points[b]),comb[2]=points[a].toJ().mixedAdd(points[b].neg()));var index=[-3,-1,-5,-7,0,7,5,1,3];var jsf=getJSF(coeffs[a],coeffs[b]);max=_Mathmax5(jsf[0].length,max),naf[a]=Array(max),naf[b]=Array(max);for(var j=0;j<max;j++){var ja=jsf[0][j]|0;var jb=jsf[1][j]|0;naf[a][j]=index[(ja+1)*3+(jb+1)],naf[b][j]=0,wnd[a]=comb}}var acc=this.jpoint(null,null,null);var tmp=this._wnafT4;for(var i=max;i>=0;i--){for(var k=0;i>=0;){var zero=!0;for(var j=0;j<len;j++)tmp[j]=naf[j][i]|0,tmp[j]!==0&&(zero=!1);if(!zero)break;k++,i--}if(i>=0&&k++,acc=acc.dblp(k),i<0)break;for(var j=0;j<len;j++){var z=tmp[j];var p;if(z===0)continue;else z>0?p=wnd[j][z-1>>1]:z<0&&(p=wnd[j][-z-1>>1].neg());acc=p.type==='affine'?acc.mixedAdd(p):acc.add(p)}}for(var i=0;i<len;i++)wnd[i]=null;return jacobianResult?acc:acc.toP()},BaseCurve.BasePoint=BasePoint,BasePoint.prototype.eq=function eq(){throw new Error('Not implemented')},BasePoint.prototype.validate=function validate(){return this.curve.validate(this)},BaseCurve.prototype.decodePoint=function decodePoint(bytes,enc){bytes=utils.toArray(bytes,enc);var len=this.p.byteLength();if((bytes[0]===4||bytes[0]===6||bytes[0]===7)&&bytes.length-1===2*len){bytes[0]===6?assert(bytes[bytes.length-1]%2===0):bytes[0]===7&&assert(bytes[bytes.length-1]%2===1);var res=this.point(bytes.slice(1,1+len),bytes.slice(1+len,1+2*len));return res}if((bytes[0]===2||bytes[0]===3)&&bytes.length-1===len)return this.pointFromX(bytes.slice(1,1+len),bytes[0]===3);throw new Error('Unknown point format')},BasePoint.prototype.encodeCompressed=function encodeCompressed(enc){return this.encode(enc,!0)},BasePoint.prototype._encode=function _encode(compact){var len=this.curve.p.byteLength();var x=this.getX().toArray('be',len);return compact?[this.getY().isEven()?2:3].concat(x):[4].concat(x,this.getY().toArray('be',len))},BasePoint.prototype.encode=function encode(enc,compact){return utils.encode(this._encode(compact),enc)},BasePoint.prototype.precompute=function precompute(power){if(this.precomputed)return this;var precomputed={doubles:null,naf:null,beta:null};return precomputed.naf=this._getNAFPoints(8),precomputed.doubles=this._getDoubles(4,power),precomputed.beta=this._getBeta(),this.precomputed=precomputed,this},BasePoint.prototype._hasDoubles=function _hasDoubles(k){if(!this.precomputed)return!1;var doubles=this.precomputed.doubles;return!!doubles&&doubles.points.length>=Math.ceil((k.bitLength()+1)/doubles.step)},BasePoint.prototype._getDoubles=function _getDoubles(step,power){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var doubles=[this];var acc=this;for(var i=0;i<power;i+=step){for(var j=0;j<step;j++)acc=acc.dbl();doubles.push(acc)}return{step:step,points:doubles}},BasePoint.prototype._getNAFPoints=function _getNAFPoints(wnd){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var res=[this];var max=(1<<wnd)-1;var dbl=max===1?null:this.dbl();for(var i=1;i<max;i++)res[i]=res[i-1].add(dbl);return{wnd:wnd,points:res}},BasePoint.prototype._getBeta=function _getBeta(){return null},BasePoint.prototype.dblp=function dblp(k){var r=this;for(var i=0;i<k;i++)r=r.dbl();return r}},function(module,exports,__webpack_require__){'use strict';function EdwardsCurve(conf){this.twisted=(conf.a|0)!==1,this.mOneA=this.twisted&&(conf.a|0)===-1,this.extended=this.mOneA,Base.call(this,'edwards',conf),this.a=new BN(conf.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN(conf.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN(conf.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(conf.c|0)===1}function Point(curve,x,y,z,t){Base.BasePoint.call(this,curve,'projective'),x===null&&y===null&&z===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN(x,16),this.y=new BN(y,16),this.z=z?new BN(z,16):this.curve.one,this.t=t&&new BN(t,16),!this.x.red&&(this.x=this.x.toRed(this.curve.red)),!this.y.red&&(this.y=this.y.toRed(this.curve.red)),!this.z.red&&(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),!this.zOne&&(this.t=this.t.redMul(this.z.redInvm()))))}var curve=__webpack_require__(20);var elliptic=__webpack_require__(4);var BN=__webpack_require__(2);var inherits=__webpack_require__(0);var Base=curve.base;var assert=elliptic.utils.assert;inherits(EdwardsCurve,Base),module.exports=EdwardsCurve,EdwardsCurve.prototype._mulA=function _mulA(num){return this.mOneA?num.redNeg():this.a.redMul(num)},EdwardsCurve.prototype._mulC=function _mulC(num){return this.oneC?num:this.c.redMul(num)},EdwardsCurve.prototype.jpoint=function jpoint(x,y,z,t){return this.point(x,y,z,t)},EdwardsCurve.prototype.pointFromX=function pointFromX(x,odd){x=new BN(x,16),!x.red&&(x=x.toRed(this.red));var x2=x.redSqr();var rhs=this.c2.redSub(this.a.redMul(x2));var lhs=this.one.redSub(this.c2.redMul(this.d).redMul(x2));var y2=rhs.redMul(lhs.redInvm());var y=y2.redSqrt();if(y.redSqr().redSub(y2).cmp(this.zero)!==0)throw new Error('invalid point');var isOdd=y.fromRed().isOdd();return(odd&&!isOdd||!odd&&isOdd)&&(y=y.redNeg()),this.point(x,y)},EdwardsCurve.prototype.pointFromY=function pointFromY(y,odd){y=new BN(y,16),!y.red&&(y=y.toRed(this.red));var y2=y.redSqr();var lhs=y2.redSub(this.one);var rhs=y2.redMul(this.d).redAdd(this.one);var x2=lhs.redMul(rhs.redInvm());if(x2.cmp(this.zero)===0)if(odd)throw new Error('invalid point');else return this.point(this.zero,y);var x=x2.redSqrt();if(x.redSqr().redSub(x2).cmp(this.zero)!==0)throw new Error('invalid point');return x.isOdd()!==odd&&(x=x.redNeg()),this.point(x,y)},EdwardsCurve.prototype.validate=function validate(point){if(point.isInfinity())return!0;point.normalize();var x2=point.x.redSqr();var y2=point.y.redSqr();var lhs=x2.redMul(this.a).redAdd(y2);var rhs=this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));return lhs.cmp(rhs)===0},inherits(Point,Base.BasePoint),EdwardsCurve.prototype.pointFromJSON=function pointFromJSON(obj){return Point.fromJSON(this,obj)},EdwardsCurve.prototype.point=function point(x,y,z,t){return new Point(this,x,y,z,t)},Point.fromJSON=function fromJSON(curve,obj){return new Point(curve,obj[0],obj[1],obj[2])},Point.prototype.inspect=function inspect(){return this.isInfinity()?'<EC Point Infinity>':'<EC Point x: '+this.x.fromRed().toString(16,2)+' y: '+this.y.fromRed().toString(16,2)+' z: '+this.z.fromRed().toString(16,2)+'>'},Point.prototype.isInfinity=function isInfinity(){return this.x.cmpn(0)===0&&this.y.cmp(this.z)===0},Point.prototype._extDbl=function _extDbl(){var a=this.x.redSqr();var b=this.y.redSqr();var c=this.z.redSqr();c=c.redIAdd(c);var d=this.curve._mulA(a);var e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(b);var g=d.redAdd(b);var f=g.redSub(c);var h=d.redSub(b);var nx=e.redMul(f);var ny=g.redMul(h);var nt=e.redMul(h);var nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt)},Point.prototype._projDbl=function _projDbl(){var b=this.x.redAdd(this.y).redSqr();var c=this.x.redSqr();var d=this.y.redSqr();var nx;var ny;var nz;if(this.curve.twisted){var e=this.curve._mulA(c);var f=e.redAdd(d);if(this.zOne)nx=b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two)),ny=f.redMul(e.redSub(d)),nz=f.redSqr().redSub(f).redSub(f);else{var h=this.z.redSqr();var j=f.redSub(h).redISub(h);nx=b.redSub(c).redISub(d).redMul(j),ny=f.redMul(e.redSub(d)),nz=f.redMul(j)}}else{var e=c.redAdd(d);var h=this.curve._mulC(this.c.redMul(this.z)).redSqr();var j=e.redSub(h).redSub(h);nx=this.curve._mulC(b.redISub(e)).redMul(j),ny=this.curve._mulC(e).redMul(c.redISub(d)),nz=e.redMul(j)}return this.curve.point(nx,ny,nz)},Point.prototype.dbl=function dbl(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Point.prototype._extAdd=function _extAdd(p){var a=this.y.redSub(this.x).redMul(p.y.redSub(p.x));var b=this.y.redAdd(this.x).redMul(p.y.redAdd(p.x));var c=this.t.redMul(this.curve.dd).redMul(p.t);var d=this.z.redMul(p.z.redAdd(p.z));var e=b.redSub(a);var f=d.redSub(c);var g=d.redAdd(c);var h=b.redAdd(a);var nx=e.redMul(f);var ny=g.redMul(h);var nt=e.redMul(h);var nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt)},Point.prototype._projAdd=function _projAdd(p){var a=this.z.redMul(p.z);var b=a.redSqr();var c=this.x.redMul(p.x);var d=this.y.redMul(p.y);var e=this.curve.d.redMul(c).redMul(d);var f=b.redSub(e);var g=b.redAdd(e);var tmp=this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d);var nx=a.redMul(f).redMul(tmp);var ny;var nz;return this.curve.twisted?(ny=a.redMul(g).redMul(d.redSub(this.curve._mulA(c))),nz=f.redMul(g)):(ny=a.redMul(g).redMul(d.redSub(c)),nz=this.curve._mulC(f).redMul(g)),this.curve.point(nx,ny,nz)},Point.prototype.add=function add(p){return this.isInfinity()?p:p.isInfinity()?this:this.curve.extended?this._extAdd(p):this._projAdd(p)},Point.prototype.mul=function mul(k){return this._hasDoubles(k)?this.curve._fixedNafMul(this,k):this.curve._wnafMul(this,k)},Point.prototype.mulAdd=function mulAdd(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2,!1)},Point.prototype.jmulAdd=function jmulAdd(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2,!0)},Point.prototype.normalize=function normalize(){if(this.zOne)return this;var zi=this.z.redInvm();return this.x=this.x.redMul(zi),this.y=this.y.redMul(zi),this.t&&(this.t=this.t.redMul(zi)),this.z=this.curve.one,this.zOne=!0,this},Point.prototype.neg=function neg(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Point.prototype.getX=function getX(){return this.normalize(),this.x.fromRed()},Point.prototype.getY=function getY(){return this.normalize(),this.y.fromRed()},Point.prototype.eq=function eq(other){return this===other||this.getX().cmp(other.getX())===0&&this.getY().cmp(other.getY())===0},Point.prototype.eqXToP=function eqXToP(x){var rx=x.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(rx)===0)return!0;var xc=x.clone();for(var t=this.curve.redN.redMul(this.z);;){if(xc.iadd(this.curve.n),xc.cmp(this.curve.p)>=0)return!1;if(rx.redIAdd(t),this.x.cmp(rx)===0)return!0}return!1},Point.prototype.toP=Point.prototype.normalize,Point.prototype.mixedAdd=Point.prototype.add},function(module,exports,__webpack_require__){'use strict';function MontCurve(conf){Base.call(this,'mont',conf),this.a=new BN(conf.a,16).toRed(this.red),this.b=new BN(conf.b,16).toRed(this.red),this.i4=new BN(4).toRed(this.red).redInvm(),this.two=new BN(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function Point(curve,x,z){Base.BasePoint.call(this,curve,'projective'),x===null&&z===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN(x,16),this.z=new BN(z,16),!this.x.red&&(this.x=this.x.toRed(this.curve.red)),!this.z.red&&(this.z=this.z.toRed(this.curve.red)))}var curve=__webpack_require__(20);var BN=__webpack_require__(2);var inherits=__webpack_require__(0);var Base=curve.base;var elliptic=__webpack_require__(4);var utils=elliptic.utils;inherits(MontCurve,Base),module.exports=MontCurve,MontCurve.prototype.validate=function validate(point){var x=point.normalize().x;var x2=x.redSqr();var rhs=x2.redMul(x).redAdd(x2.redMul(this.a)).redAdd(x);var y=rhs.redSqrt();return y.redSqr().cmp(rhs)===0},inherits(Point,Base.BasePoint),MontCurve.prototype.decodePoint=function decodePoint(bytes,enc){return this.point(utils.toArray(bytes,enc),1)},MontCurve.prototype.point=function point(x,z){return new Point(this,x,z)},MontCurve.prototype.pointFromJSON=function pointFromJSON(obj){return Point.fromJSON(this,obj)},Point.prototype.precompute=function precompute(){},Point.prototype._encode=function _encode(){return this.getX().toArray('be',this.curve.p.byteLength())},Point.fromJSON=function fromJSON(curve,obj){return new Point(curve,obj[0],obj[1]||curve.one)},Point.prototype.inspect=function inspect(){return this.isInfinity()?'<EC Point Infinity>':'<EC Point x: '+this.x.fromRed().toString(16,2)+' z: '+this.z.fromRed().toString(16,2)+'>'},Point.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0},Point.prototype.dbl=function dbl(){var a=this.x.redAdd(this.z);var aa=a.redSqr();var b=this.x.redSub(this.z);var bb=b.redSqr();var c=aa.redSub(bb);var nx=aa.redMul(bb);var nz=c.redMul(bb.redAdd(this.curve.a24.redMul(c)));return this.curve.point(nx,nz)},Point.prototype.add=function add(){throw new Error('Not supported on Montgomery curve')},Point.prototype.diffAdd=function diffAdd(p,diff){var a=this.x.redAdd(this.z);var b=this.x.redSub(this.z);var c=p.x.redAdd(p.z);var d=p.x.redSub(p.z);var da=d.redMul(a);var cb=c.redMul(b);var nx=diff.z.redMul(da.redAdd(cb).redSqr());var nz=diff.x.redMul(da.redISub(cb).redSqr());return this.curve.point(nx,nz)},Point.prototype.mul=function mul(k){var t=k.clone();var a=this;var b=this.curve.point(null,null);var c=this;for(var bits=[];t.cmpn(0)!==0;t.iushrn(1))bits.push(t.andln(1));for(var i=bits.length-1;i>=0;i--)bits[i]===0?(a=a.diffAdd(b,c),b=b.dbl()):(b=a.diffAdd(b,c),a=a.dbl());return b},Point.prototype.mulAdd=function mulAdd(){throw new Error('Not supported on Montgomery curve')},Point.prototype.jumlAdd=function jumlAdd(){throw new Error('Not supported on Montgomery curve')},Point.prototype.eq=function eq(other){return this.getX().cmp(other.getX())===0},Point.prototype.normalize=function normalize(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Point.prototype.getX=function getX(){return this.normalize(),this.x.fromRed()}},function(module,exports,__webpack_require__){'use strict';function ShortCurve(conf){Base.call(this,'short',conf),this.a=new BN(conf.a,16).toRed(this.red),this.b=new BN(conf.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(conf),this._endoWnafT1=[,,,,],this._endoWnafT2=[,,,,]}function Point(curve,x,y,isRed){Base.BasePoint.call(this,curve,'affine'),x===null&&y===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN(x,16),this.y=new BN(y,16),isRed&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),!this.x.red&&(this.x=this.x.toRed(this.curve.red)),!this.y.red&&(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function JPoint(curve,x,y,z){Base.BasePoint.call(this,curve,'jacobian'),x===null&&y===null&&z===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN(0)):(this.x=new BN(x,16),this.y=new BN(y,16),this.z=new BN(z,16)),!this.x.red&&(this.x=this.x.toRed(this.curve.red)),!this.y.red&&(this.y=this.y.toRed(this.curve.red)),!this.z.red&&(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}var curve=__webpack_require__(20);var elliptic=__webpack_require__(4);var BN=__webpack_require__(2);var inherits=__webpack_require__(0);var Base=curve.base;var assert=elliptic.utils.assert;inherits(ShortCurve,Base),module.exports=ShortCurve,ShortCurve.prototype._getEndomorphism=function _getEndomorphism(conf){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var beta;var lambda;if(conf.beta)beta=new BN(conf.beta,16).toRed(this.red);else{var betas=this._getEndoRoots(this.p);beta=betas[0].cmp(betas[1])<0?betas[0]:betas[1],beta=beta.toRed(this.red)}if(conf.lambda)lambda=new BN(conf.lambda,16);else{var lambdas=this._getEndoRoots(this.n);this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta))===0?lambda=lambdas[0]:(lambda=lambdas[1],assert(this.g.mul(lambda).x.cmp(this.g.x.redMul(beta))===0))}var basis;return basis=conf.basis?conf.basis.map(function(vec){return{a:new BN(vec.a,16),b:new BN(vec.b,16)}}):this._getEndoBasis(lambda),{beta:beta,lambda:lambda,basis:basis}}},ShortCurve.prototype._getEndoRoots=function _getEndoRoots(num){var red=num===this.p?this.red:BN.mont(num);var tinv=new BN(2).toRed(red).redInvm();var ntinv=tinv.redNeg();var s=new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);var l1=ntinv.redAdd(s).fromRed();var l2=ntinv.redSub(s).fromRed();return[l1,l2]},ShortCurve.prototype._getEndoBasis=function _getEndoBasis(lambda){var aprxSqrt=this.n.ushrn(Math.floor(this.n.bitLength()/2));var u=lambda;var v=this.n.clone();var x1=new BN(1);var y1=new BN(0);var x2=new BN(0);var y2=new BN(1);var a0;var b0;var a1;var b1;var a2;var b2;var prevR;var i=0;var r;for(var x;u.cmpn(0)!==0;){var q=v.div(u);r=v.sub(q.mul(u)),x=x2.sub(q.mul(x1));var y=y2.sub(q.mul(y1));if(!a1&&r.cmp(aprxSqrt)<0)a0=prevR.neg(),b0=x1,a1=r.neg(),b1=x;else if(a1&&++i===2)break;prevR=r,v=u,u=r,x2=x1,x1=x,y2=y1,y1=y}a2=r.neg(),b2=x;var len1=a1.sqr().add(b1.sqr());var len2=a2.sqr().add(b2.sqr());return len2.cmp(len1)>=0&&(a2=a0,b2=b0),a1.negative&&(a1=a1.neg(),b1=b1.neg()),a2.negative&&(a2=a2.neg(),b2=b2.neg()),[{a:a1,b:b1},{a:a2,b:b2}]},ShortCurve.prototype._endoSplit=function _endoSplit(k){var basis=this.endo.basis;var v1=basis[0];var v2=basis[1];var c1=v2.b.mul(k).divRound(this.n);var c2=v1.b.neg().mul(k).divRound(this.n);var p1=c1.mul(v1.a);var p2=c2.mul(v2.a);var q1=c1.mul(v1.b);var q2=c2.mul(v2.b);var k1=k.sub(p1).sub(p2);var k2=q1.add(q2).neg();return{k1:k1,k2:k2}},ShortCurve.prototype.pointFromX=function pointFromX(x,odd){x=new BN(x,16),!x.red&&(x=x.toRed(this.red));var y2=x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b);var y=y2.redSqrt();if(y.redSqr().redSub(y2).cmp(this.zero)!==0)throw new Error('invalid point');var isOdd=y.fromRed().isOdd();return(odd&&!isOdd||!odd&&isOdd)&&(y=y.redNeg()),this.point(x,y)},ShortCurve.prototype.validate=function validate(point){if(point.inf)return!0;var x=point.x;var y=point.y;var ax=this.a.redMul(x);var rhs=x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);return y.redSqr().redISub(rhs).cmpn(0)===0},ShortCurve.prototype._endoWnafMulAdd=function _endoWnafMulAdd(points,coeffs,jacobianResult){var npoints=this._endoWnafT1;var ncoeffs=this._endoWnafT2;for(var i=0;i<points.length;i++){var split=this._endoSplit(coeffs[i]);var p=points[i];var beta=p._getBeta();split.k1.negative&&(split.k1.ineg(),p=p.neg(!0)),split.k2.negative&&(split.k2.ineg(),beta=beta.neg(!0)),npoints[i*2]=p,npoints[i*2+1]=beta,ncoeffs[i*2]=split.k1,ncoeffs[i*2+1]=split.k2}var res=this._wnafMulAdd(1,npoints,ncoeffs,i*2,jacobianResult);for(var j=0;j<i*2;j++)npoints[j]=null,ncoeffs[j]=null;return res},inherits(Point,Base.BasePoint),ShortCurve.prototype.point=function point(x,y,isRed){return new Point(this,x,y,isRed)},ShortCurve.prototype.pointFromJSON=function pointFromJSON(obj,red){return Point.fromJSON(this,obj,red)},Point.prototype._getBeta=function _getBeta(){if(this.curve.endo){var pre=this.precomputed;if(pre&&pre.beta)return pre.beta;var beta=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(pre){var curve=this.curve;var endoMul=function(p){return curve.point(p.x.redMul(curve.endo.beta),p.y)};pre.beta=beta,beta.precomputed={beta:null,naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(endoMul)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(endoMul)}}}return beta}},Point.prototype.toJSON=function toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Point.fromJSON=function fromJSON(curve,obj,red){function obj2point(obj){return curve.point(obj[0],obj[1],red)}typeof obj==='string'&&(obj=JSON.parse(obj));var res=curve.point(obj[0],obj[1],red);if(!obj[2])return res;var pre=obj[2];return res.precomputed={beta:null,doubles:pre.doubles&&{step:pre.doubles.step,points:[res].concat(pre.doubles.points.map(obj2point))},naf:pre.naf&&{wnd:pre.naf.wnd,points:[res].concat(pre.naf.points.map(obj2point))}},res},Point.prototype.inspect=function inspect(){return this.isInfinity()?'<EC Point Infinity>':'<EC Point x: '+this.x.fromRed().toString(16,2)+' y: '+this.y.fromRed().toString(16,2)+'>'},Point.prototype.isInfinity=function isInfinity(){return this.inf},Point.prototype.add=function add(p){if(this.inf)return p;if(p.inf)return this;if(this.eq(p))return this.dbl();if(this.neg().eq(p))return this.curve.point(null,null);if(this.x.cmp(p.x)===0)return this.curve.point(null,null);var c=this.y.redSub(p.y);c.cmpn(0)!==0&&(c=c.redMul(this.x.redSub(p.x).redInvm()));var nx=c.redSqr().redISub(this.x).redISub(p.x);var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny)},Point.prototype.dbl=function dbl(){if(this.inf)return this;var ys1=this.y.redAdd(this.y);if(ys1.cmpn(0)===0)return this.curve.point(null,null);var a=this.curve.a;var x2=this.x.redSqr();var dyinv=ys1.redInvm();var c=x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv);var nx=c.redSqr().redISub(this.x.redAdd(this.x));var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny)},Point.prototype.getX=function getX(){return this.x.fromRed()},Point.prototype.getY=function getY(){return this.y.fromRed()},Point.prototype.mul=function mul(k){return k=new BN(k,16),this._hasDoubles(k)?this.curve._fixedNafMul(this,k):this.curve.endo?this.curve._endoWnafMulAdd([this],[k]):this.curve._wnafMul(this,k)},Point.prototype.mulAdd=function mulAdd(k1,p2,k2){var points=[this,p2];var coeffs=[k1,k2];return this.curve.endo?this.curve._endoWnafMulAdd(points,coeffs):this.curve._wnafMulAdd(1,points,coeffs,2)},Point.prototype.jmulAdd=function jmulAdd(k1,p2,k2){var points=[this,p2];var coeffs=[k1,k2];return this.curve.endo?this.curve._endoWnafMulAdd(points,coeffs,!0):this.curve._wnafMulAdd(1,points,coeffs,2,!0)},Point.prototype.eq=function eq(p){return this===p||this.inf===p.inf&&(this.inf||this.x.cmp(p.x)===0&&this.y.cmp(p.y)===0)},Point.prototype.neg=function neg(_precompute){if(this.inf)return this;var res=this.curve.point(this.x,this.y.redNeg());if(_precompute&&this.precomputed){var pre=this.precomputed;var negate=function(p){return p.neg()};res.precomputed={naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(negate)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(negate)}}}return res},Point.prototype.toJ=function toJ(){if(this.inf)return this.curve.jpoint(null,null,null);var res=this.curve.jpoint(this.x,this.y,this.curve.one);return res},inherits(JPoint,Base.BasePoint),ShortCurve.prototype.jpoint=function jpoint(x,y,z){return new JPoint(this,x,y,z)},JPoint.prototype.toP=function toP(){if(this.isInfinity())return this.curve.point(null,null);var zinv=this.z.redInvm();var zinv2=zinv.redSqr();var ax=this.x.redMul(zinv2);var ay=this.y.redMul(zinv2).redMul(zinv);return this.curve.point(ax,ay)},JPoint.prototype.neg=function neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JPoint.prototype.add=function add(p){if(this.isInfinity())return p;if(p.isInfinity())return this;var pz2=p.z.redSqr();var z2=this.z.redSqr();var u1=this.x.redMul(pz2);var u2=p.x.redMul(z2);var s1=this.y.redMul(pz2.redMul(p.z));var s2=p.y.redMul(z2.redMul(this.z));var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0)return r.cmpn(0)===0?this.dbl():this.curve.jpoint(null,null,null);var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(p.z).redMul(h);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.mixedAdd=function mixedAdd(p){if(this.isInfinity())return p.toJ();if(p.isInfinity())return this;var z2=this.z.redSqr();var u1=this.x;var u2=p.x.redMul(z2);var s1=this.y;var s2=p.y.redMul(z2).redMul(this.z);var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0)return r.cmpn(0)===0?this.dbl():this.curve.jpoint(null,null,null);var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(h);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.dblp=function dblp(pow){if(pow===0)return this;if(this.isInfinity())return this;if(!pow)return this.dbl();if(this.curve.zeroA||this.curve.threeA){var r=this;for(var i=0;i<pow;i++)r=r.dbl();return r}var a=this.curve.a;var tinv=this.curve.tinv;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jyd=jy.redAdd(jy);for(var i=0;i<pow;i++){var jx2=jx.redSqr();var jyd2=jyd.redSqr();var jyd4=jyd2.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var t1=jx.redMul(jyd2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var dny=c.redMul(t2);dny=dny.redIAdd(dny).redISub(jyd4);var nz=jyd.redMul(jz);i+1<pow&&(jz4=jz4.redMul(jyd4)),jx=nx,jz=nz,jyd=dny}return this.curve.jpoint(jx,jyd.redMul(tinv),jz)},JPoint.prototype.dbl=function dbl(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JPoint.prototype._zeroDbl=function _zeroDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx);var t=m.redSqr().redISub(s).redISub(s);var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8),yyyy8=yyyy8.redIAdd(yyyy8),nx=t,ny=m.redMul(s.redISub(t)).redISub(yyyy8),nz=this.y.redAdd(this.y)}else{var a=this.x.redSqr();var b=this.y.redSqr();var c=b.redSqr();var d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a);var f=e.redSqr();var c8=c.redIAdd(c);c8=c8.redIAdd(c8),c8=c8.redIAdd(c8),nx=f.redISub(d).redISub(d),ny=e.redMul(d.redISub(nx)).redISub(c8),nz=this.y.redMul(this.z),nz=nz.redIAdd(nz)}return this.curve.jpoint(nx,ny,nz)},JPoint.prototype._threeDbl=function _threeDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a);var t=m.redSqr().redISub(s).redISub(s);nx=t;var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8),yyyy8=yyyy8.redIAdd(yyyy8),ny=m.redMul(s.redISub(t)).redISub(yyyy8),nz=this.y.redAdd(this.y)}else{var delta=this.z.redSqr();var gamma=this.y.redSqr();var beta=this.x.redMul(gamma);var alpha=this.x.redSub(delta).redMul(this.x.redAdd(delta));alpha=alpha.redAdd(alpha).redIAdd(alpha);var beta4=beta.redIAdd(beta);beta4=beta4.redIAdd(beta4);var beta8=beta4.redAdd(beta4);nx=alpha.redSqr().redISub(beta8),nz=this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);var ggamma8=gamma.redSqr();ggamma8=ggamma8.redIAdd(ggamma8),ggamma8=ggamma8.redIAdd(ggamma8),ggamma8=ggamma8.redIAdd(ggamma8),ny=alpha.redMul(beta4.redISub(nx)).redISub(ggamma8)}return this.curve.jpoint(nx,ny,nz)},JPoint.prototype._dbl=function _dbl(){var a=this.curve.a;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jx2=jx.redSqr();var jy2=jy.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var jxd4=jx.redAdd(jx);jxd4=jxd4.redIAdd(jxd4);var t1=jxd4.redMul(jy2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var jyd8=jy2.redSqr();jyd8=jyd8.redIAdd(jyd8),jyd8=jyd8.redIAdd(jyd8),jyd8=jyd8.redIAdd(jyd8);var ny=c.redMul(t2).redISub(jyd8);var nz=jy.redAdd(jy).redMul(jz);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.trpl=function trpl(){if(!this.curve.zeroA)return this.dbl().add(this);var xx=this.x.redSqr();var yy=this.y.redSqr();var zz=this.z.redSqr();var yyyy=yy.redSqr();var m=xx.redAdd(xx).redIAdd(xx);var mm=m.redSqr();var e=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);e=e.redIAdd(e),e=e.redAdd(e).redIAdd(e),e=e.redISub(mm);var ee=e.redSqr();var t=yyyy.redIAdd(yyyy);t=t.redIAdd(t),t=t.redIAdd(t),t=t.redIAdd(t);var u=m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t);var yyu4=yy.redMul(u);yyu4=yyu4.redIAdd(yyu4),yyu4=yyu4.redIAdd(yyu4);var nx=this.x.redMul(ee).redISub(yyu4);nx=nx.redIAdd(nx),nx=nx.redIAdd(nx);var ny=this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));ny=ny.redIAdd(ny),ny=ny.redIAdd(ny),ny=ny.redIAdd(ny);var nz=this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.mul=function mul(k,kbase){return k=new BN(k,kbase),this.curve._wnafMul(this,k)},JPoint.prototype.eq=function eq(p){if(p.type==='affine')return this.eq(p.toJ());if(this===p)return!0;var z2=this.z.redSqr();var pz2=p.z.redSqr();if(this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0)!==0)return!1;var z3=z2.redMul(this.z);var pz3=pz2.redMul(p.z);return this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0)===0},JPoint.prototype.eqXToP=function eqXToP(x){var zs=this.z.redSqr();var rx=x.toRed(this.curve.red).redMul(zs);if(this.x.cmp(rx)===0)return!0;var xc=x.clone();for(var t=this.curve.redN.redMul(zs);;){if(xc.iadd(this.curve.n),xc.cmp(this.curve.p)>=0)return!1;if(rx.redIAdd(t),this.x.cmp(rx)===0)return!0}return!1},JPoint.prototype.inspect=function inspect(){return this.isInfinity()?'<EC JPoint Infinity>':'<EC JPoint x: '+this.x.toString(16,2)+' y: '+this.y.toString(16,2)+' z: '+this.z.toString(16,2)+'>'},JPoint.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0}},function(module,exports,__webpack_require__){'use strict';function PresetCurve(options){this.curve=options.type==='short'?new elliptic.curve.short(options):options.type==='edwards'?new elliptic.curve.edwards(options):new elliptic.curve.mont(options),this.g=this.curve.g,this.n=this.curve.n,this.hash=options.hash,assert(this.g.validate(),'Invalid curve'),assert(this.g.mul(this.n).isInfinity(),'Invalid curve, G*N != O')}function defineCurve(name,options){Object.defineProperty(curves,name,{configurable:!0,enumerable:!0,get:function(){var curve=new PresetCurve(options);return Object.defineProperty(curves,name,{configurable:!0,enumerable:!0,value:curve}),curve}})}var curves=exports;var hash=__webpack_require__(31);var elliptic=__webpack_require__(4);var assert=elliptic.utils.assert;curves.PresetCurve=PresetCurve,defineCurve('p192',{type:'short',prime:'p192',p:'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff',a:'ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc',b:'64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1',n:'ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831',hash:hash.sha256,gRed:!1,g:['188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012','07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811']}),defineCurve('p224',{type:'short',prime:'p224',p:'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001',a:'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe',b:'b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4',n:'ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d',hash:hash.sha256,gRed:!1,g:['b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21','bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34']}),defineCurve('p256',{type:'short',prime:null,p:'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff',a:'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc',b:'5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b',n:'ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551',hash:hash.sha256,gRed:!1,g:['6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296','4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5']}),defineCurve('p384',{type:'short',prime:null,p:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+'fffffffe ffffffff 00000000 00000000 ffffffff',a:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+'fffffffe ffffffff 00000000 00000000 fffffffc',b:'b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f '+'5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef',n:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 '+'f4372ddf 581a0db2 48b0a77a ecec196a ccc52973',hash:hash.sha384,gRed:!1,g:['aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 '+'5502f25d bf55296c 3a545e38 72760ab7','3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 '+'0a60b1ce 1d7e819d 7a431d7c 90ea0e5f']}),defineCurve('p521',{type:'short',prime:null,p:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff ffffffff ffffffff ffffffff',a:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff ffffffff ffffffff fffffffc',b:'00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b '+'99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd '+'3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00',n:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff '+'ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 '+'f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409',hash:hash.sha512,gRed:!1,g:['000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 '+'053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 '+'a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66','00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 '+'579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 '+'3fad0761 353c7086 a272c240 88be9476 9fd16650']}),defineCurve('curve25519',{type:'mont',prime:'p25519',p:'7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',a:'76d06',b:'1',n:'1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',hash:hash.sha256,gRed:!1,g:['9']}),defineCurve('ed25519',{type:'edwards',prime:'p25519',p:'7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',a:'-1',c:'1',d:'52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3',n:'1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',hash:hash.sha256,gRed:!1,g:['216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a','6666666666666666666666666666666666666666666666666666666666666658']});var pre;try{pre=__webpack_require__(127)}catch(e){pre=undefined}defineCurve('secp256k1',{type:'short',prime:'k256',p:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f',a:'0',b:'7',n:'ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141',h:'1',hash:hash.sha256,beta:'7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee',lambda:'5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72',basis:[{a:'3086d221a7d46bcde86c90e49284eb15',b:'-e4437ed6010e88286f547fa90abfe4c3'},{a:'114ca50f7a8e2f3f657c1108d9d44cfd8',b:'3086d221a7d46bcde86c90e49284eb15'}],gRed:!1,g:['79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798','483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8',pre]})},function(module,exports,__webpack_require__){'use strict';function EC(options){return this instanceof EC?void(typeof options==='string'&&(assert(elliptic.curves.hasOwnProperty(options),'Unknown curve '+options),options=elliptic.curves[options]),options instanceof elliptic.curves.PresetCurve&&(options={curve:options}),this.curve=options.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=options.curve.g,this.g.precompute(options.curve.n.bitLength()+1),this.hash=options.hash||options.curve.hash):new EC(options)}var BN=__webpack_require__(2);var HmacDRBG=__webpack_require__(137);var elliptic=__webpack_require__(4);var utils=elliptic.utils;var assert=utils.assert;var KeyPair=__webpack_require__(122);var Signature=__webpack_require__(123);module.exports=EC,EC.prototype.keyPair=function keyPair(options){return new KeyPair(this,options)},EC.prototype.keyFromPrivate=function keyFromPrivate(priv,enc){return KeyPair.fromPrivate(this,priv,enc)},EC.prototype.keyFromPublic=function keyFromPublic(pub,enc){return KeyPair.fromPublic(this,pub,enc)},EC.prototype.genKeyPair=function genKeyPair(options){!options&&(options={});var drbg=new HmacDRBG({hash:this.hash,pers:options.pers,persEnc:options.persEnc||'utf8',entropy:options.entropy||elliptic.rand(this.hash.hmacStrength),entropyEnc:options.entropy&&options.entropyEnc||'utf8',nonce:this.n.toArray()});var bytes=this.n.byteLength();var ns2=this.n.sub(new BN(2));do{var priv=new BN(drbg.generate(bytes));if(priv.cmp(ns2)>0)continue;return priv.iaddn(1),this.keyFromPrivate(priv)}while(!0)},EC.prototype._truncateToN=function truncateToN(msg,truncOnly){var delta=msg.byteLength()*8-this.n.bitLength();return delta>0&&(msg=msg.ushrn(delta)),!truncOnly&&msg.cmp(this.n)>=0?msg.sub(this.n):msg},EC.prototype.sign=function sign(msg,key,enc,options){typeof enc==='object'&&(options=enc,enc=null),!options&&(options={}),key=this.keyFromPrivate(key,enc),msg=this._truncateToN(new BN(msg,16));var bytes=this.n.byteLength();var bkey=key.getPrivate().toArray('be',bytes);var nonce=msg.toArray('be',bytes);var drbg=new HmacDRBG({hash:this.hash,entropy:bkey,nonce:nonce,pers:options.pers,persEnc:options.persEnc||'utf8'});var ns1=this.n.sub(new BN(1));for(var iter=0;!0;iter++){var k=options.k?options.k(iter):new BN(drbg.generate(this.n.byteLength()));if(k=this._truncateToN(k,!0),!(k.cmpn(1)<=0||k.cmp(ns1)>=0)){var kp=this.g.mul(k);if(!kp.isInfinity()){var kpX=kp.getX();var r=kpX.umod(this.n);if(r.cmpn(0)!==0){var s=k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));if(s=s.umod(this.n),s.cmpn(0)!==0){var recoveryParam=(kp.getY().isOdd()?1:0)|(kpX.cmp(r)===0?0:2);return options.canonical&&s.cmp(this.nh)>0&&(s=this.n.sub(s),recoveryParam^=1),new Signature({r:r,s:s,recoveryParam:recoveryParam})}}}}}},EC.prototype.verify=function verify(msg,signature,key,enc){msg=this._truncateToN(new BN(msg,16)),key=this.keyFromPublic(key,enc),signature=new Signature(signature,'hex');var r=signature.r;var s=signature.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var sinv=s.invm(this.n);var u1=sinv.mul(msg).umod(this.n);var u2=sinv.mul(r).umod(this.n);if(!this.curve._maxwellTrick){var p=this.g.mulAdd(u1,key.getPublic(),u2);return!p.isInfinity()&&p.getX().umod(this.n).cmp(r)===0}var p=this.g.jmulAdd(u1,key.getPublic(),u2);return!p.isInfinity()&&p.eqXToP(r)},EC.prototype.recoverPubKey=function(msg,signature,j,enc){assert((3&j)===j,'The recovery param is more than two bits'),signature=new Signature(signature,enc);var n=this.n;var e=new BN(msg);var r=signature.r;var s=signature.s;var isYOdd=j&1;var isSecondKey=j>>1;if(r.cmp(this.curve.p.umod(this.curve.n))>=0&&isSecondKey)throw new Error('Unable to find sencond key candinate');r=isSecondKey?this.curve.pointFromX(r.add(this.curve.n),isYOdd):this.curve.pointFromX(r,isYOdd);var rInv=signature.r.invm(n);var s1=n.sub(e).mul(rInv).umod(n);var s2=s.mul(rInv).umod(n);return this.g.mulAdd(s1,r,s2)},EC.prototype.getKeyRecoveryParam=function(e,signature,Q,enc){if(signature=new Signature(signature,enc),signature.recoveryParam!==null)return signature.recoveryParam;for(var i=0;i<4;i++){var Qprime;try{Qprime=this.recoverPubKey(e,signature,i)}catch(e){continue}if(Qprime.eq(Q))return i}throw new Error('Unable to find valid recovery factor')}},function(module,exports,__webpack_require__){'use strict';function KeyPair(ec,options){this.ec=ec,this.priv=null,this.pub=null,options.priv&&this._importPrivate(options.priv,options.privEnc),options.pub&&this._importPublic(options.pub,options.pubEnc)}var BN=__webpack_require__(2);var elliptic=__webpack_require__(4);var utils=elliptic.utils;var assert=utils.assert;module.exports=KeyPair,KeyPair.fromPublic=function fromPublic(ec,pub,enc){return pub instanceof KeyPair?pub:new KeyPair(ec,{pub:pub,pubEnc:enc})},KeyPair.fromPrivate=function fromPrivate(ec,priv,enc){return priv instanceof KeyPair?priv:new KeyPair(ec,{priv:priv,privEnc:enc})},KeyPair.prototype.validate=function validate(){var pub=this.getPublic();return pub.isInfinity()?{result:!1,reason:'Invalid public key'}:pub.validate()?pub.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:'Public key * N != O'}:{result:!1,reason:'Public key is not a point'}},KeyPair.prototype.getPublic=function getPublic(compact,enc){return typeof compact==='string'&&(enc=compact,compact=null),!this.pub&&(this.pub=this.ec.g.mul(this.priv)),enc?this.pub.encode(enc,compact):this.pub},KeyPair.prototype.getPrivate=function getPrivate(enc){return enc==='hex'?this.priv.toString(16,2):this.priv},KeyPair.prototype._importPrivate=function _importPrivate(key,enc){this.priv=new BN(key,enc||16),this.priv=this.priv.umod(this.ec.curve.n)},KeyPair.prototype._importPublic=function _importPublic(key,enc){return key.x||key.y?(this.ec.curve.type==='mont'?assert(key.x,'Need x coordinate'):(this.ec.curve.type==='short'||this.ec.curve.type==='edwards')&&assert(key.x&&key.y,'Need both x and y coordinate'),void(this.pub=this.ec.curve.point(key.x,key.y))):void(this.pub=this.ec.curve.decodePoint(key,enc))},KeyPair.prototype.derive=function derive(pub){return pub.mul(this.priv).getX()},KeyPair.prototype.sign=function sign(msg,enc,options){return this.ec.sign(msg,this,enc,options)},KeyPair.prototype.verify=function verify(msg,signature){return this.ec.verify(msg,signature,this)},KeyPair.prototype.inspect=function inspect(){return'<Key priv: '+(this.priv&&this.priv.toString(16,2))+' pub: '+(this.pub&&this.pub.inspect())+' >'}},function(module,exports,__webpack_require__){'use strict';function Signature(options,enc){return options instanceof Signature?options:void(this._importDER(options,enc)||(assert(options.r&&options.s,'Signature without r or s'),this.r=new BN(options.r,16),this.s=new BN(options.s,16),this.recoveryParam=options.recoveryParam===undefined?null:options.recoveryParam))}function Position(){this.place=0}function getLength(buf,p){var initial=buf[p.place++];if(!(initial&128))return initial;var octetLen=initial&15;var val=0;for(var i=0,off=p.place;i<octetLen;i++,off++)val<<=8,val|=buf[off];return p.place=off,val}function rmPadding(buf){var i=0;for(var len=buf.length-1;!buf[i]&&!(buf[i+1]&128)&&i<len;)i++;return i===0?buf:buf.slice(i)}function constructLength(arr,len){if(len<128)return void arr.push(len);var octets=1+(Math.log(len)/Math.LN2>>>3);for(arr.push(octets|128);--octets;)arr.push(len>>>(octets<<3)&255);arr.push(len)}var BN=__webpack_require__(2);var elliptic=__webpack_require__(4);var utils=elliptic.utils;var assert=utils.assert;module.exports=Signature,Signature.prototype._importDER=function _importDER(data,enc){data=utils.toArray(data,enc);var p=new Position;if(data[p.place++]!==48)return!1;var len=getLength(data,p);if(len+p.place!==data.length)return!1;if(data[p.place++]!==2)return!1;var rlen=getLength(data,p);var r=data.slice(p.place,rlen+p.place);if(p.place+=rlen,data[p.place++]!==2)return!1;var slen=getLength(data,p);if(data.length!==slen+p.place)return!1;var s=data.slice(p.place,slen+p.place);return r[0]===0&&r[1]&128&&(r=r.slice(1)),s[0]===0&&s[1]&128&&(s=s.slice(1)),this.r=new BN(r),this.s=new BN(s),this.recoveryParam=null,!0},Signature.prototype.toDER=function toDER(enc){var r=this.r.toArray();var s=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),s[0]&128&&(s=[0].concat(s)),r=rmPadding(r),s=rmPadding(s);!s[0]&&!(s[1]&128);)s=s.slice(1);var arr=[2];constructLength(arr,r.length),arr=arr.concat(r),arr.push(2),constructLength(arr,s.length);var backHalf=arr.concat(s);var res=[48];return constructLength(res,backHalf.length),res=res.concat(backHalf),utils.encode(res,enc)}},function(module,exports,__webpack_require__){'use strict';function EDDSA(curve){if(assert(curve==='ed25519','only tested with ed25519 so far'),!(this instanceof EDDSA))return new EDDSA(curve);var curve=elliptic.curves[curve].curve;this.curve=curve,this.g=curve.g,this.g.precompute(curve.n.bitLength()+1),this.pointClass=curve.point().constructor,this.encodingLength=Math.ceil(curve.n.bitLength()/8),this.hash=hash.sha512}var hash=__webpack_require__(31);var elliptic=__webpack_require__(4);var utils=elliptic.utils;var assert=utils.assert;var parseBytes=utils.parseBytes;var KeyPair=__webpack_require__(125);var Signature=__webpack_require__(126);module.exports=EDDSA,EDDSA.prototype.sign=function sign(message,secret){message=parseBytes(message);var key=this.keyFromSecret(secret);var r=this.hashInt(key.messagePrefix(),message);var R=this.g.mul(r);var Rencoded=this.encodePoint(R);var s_=this.hashInt(Rencoded,key.pubBytes(),message).mul(key.priv());var S=r.add(s_).umod(this.curve.n);return this.makeSignature({R:R,S:S,Rencoded:Rencoded})},EDDSA.prototype.verify=function verify(message,sig,pub){message=parseBytes(message),sig=this.makeSignature(sig);var key=this.keyFromPublic(pub);var h=this.hashInt(sig.Rencoded(),key.pubBytes(),message);var SG=this.g.mul(sig.S());var RplusAh=sig.R().add(key.pub().mul(h));return RplusAh.eq(SG)},EDDSA.prototype.hashInt=function hashInt(){var hash=this.hash();for(var i=0;i<arguments.length;i++)hash.update(arguments[i]);return utils.intFromLE(hash.digest()).umod(this.curve.n)},EDDSA.prototype.keyFromPublic=function keyFromPublic(pub){return KeyPair.fromPublic(this,pub)},EDDSA.prototype.keyFromSecret=function keyFromSecret(secret){return KeyPair.fromSecret(this,secret)},EDDSA.prototype.makeSignature=function makeSignature(sig){return sig instanceof Signature?sig:new Signature(this,sig)},EDDSA.prototype.encodePoint=function encodePoint(point){var enc=point.getY().toArray('le',this.encodingLength);return enc[this.encodingLength-1]|=point.getX().isOdd()?128:0,enc},EDDSA.prototype.decodePoint=function decodePoint(bytes){bytes=utils.parseBytes(bytes);var lastIx=bytes.length-1;var normed=bytes.slice(0,lastIx).concat(bytes[lastIx]&~128);var xIsOdd=(bytes[lastIx]&128)!==0;var y=utils.intFromLE(normed);return this.curve.pointFromY(y,xIsOdd)},EDDSA.prototype.encodeInt=function encodeInt(num){return num.toArray('le',this.encodingLength)},EDDSA.prototype.decodeInt=function decodeInt(bytes){return utils.intFromLE(bytes)},EDDSA.prototype.isPoint=function isPoint(val){return val instanceof this.pointClass}},function(module,exports,__webpack_require__){'use strict';function KeyPair(eddsa,params){this.eddsa=eddsa,this._secret=parseBytes(params.secret),eddsa.isPoint(params.pub)?this._pub=params.pub:this._pubBytes=parseBytes(params.pub)}var elliptic=__webpack_require__(4);var utils=elliptic.utils;var assert=utils.assert;var parseBytes=utils.parseBytes;var cachedProperty=utils.cachedProperty;KeyPair.fromPublic=function fromPublic(eddsa,pub){return pub instanceof KeyPair?pub:new KeyPair(eddsa,{pub:pub})},KeyPair.fromSecret=function fromSecret(eddsa,secret){return secret instanceof KeyPair?secret:new KeyPair(eddsa,{secret:secret})},KeyPair.prototype.secret=function secret(){return this._secret},cachedProperty(KeyPair,'pubBytes',function pubBytes(){return this.eddsa.encodePoint(this.pub())}),cachedProperty(KeyPair,'pub',function pub(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),cachedProperty(KeyPair,'privBytes',function privBytes(){var eddsa=this.eddsa;var hash=this.hash();var lastIx=eddsa.encodingLength-1;var a=hash.slice(0,eddsa.encodingLength);return a[0]&=248,a[lastIx]&=127,a[lastIx]|=64,a}),cachedProperty(KeyPair,'priv',function priv(){return this.eddsa.decodeInt(this.privBytes())}),cachedProperty(KeyPair,'hash',function hash(){return this.eddsa.hash().update(this.secret()).digest()}),cachedProperty(KeyPair,'messagePrefix',function messagePrefix(){return this.hash().slice(this.eddsa.encodingLength)}),KeyPair.prototype.sign=function sign(message){return assert(this._secret,'KeyPair can only verify'),this.eddsa.sign(message,this)},KeyPair.prototype.verify=function verify(message,sig){return this.eddsa.verify(message,sig,this)},KeyPair.prototype.getSecret=function getSecret(enc){return assert(this._secret,'KeyPair is public only'),utils.encode(this.secret(),enc)},KeyPair.prototype.getPublic=function getPublic(enc){return utils.encode(this.pubBytes(),enc)},module.exports=KeyPair},function(module,exports,__webpack_require__){'use strict';function Signature(eddsa,sig){this.eddsa=eddsa,typeof sig!=='object'&&(sig=parseBytes(sig)),Array.isArray(sig)&&(sig={R:sig.slice(0,eddsa.encodingLength),S:sig.slice(eddsa.encodingLength)}),assert(sig.R&&sig.S,'Signature without R or S'),eddsa.isPoint(sig.R)&&(this._R=sig.R),sig.S instanceof BN&&(this._S=sig.S),this._Rencoded=Array.isArray(sig.R)?sig.R:sig.Rencoded,this._Sencoded=Array.isArray(sig.S)?sig.S:sig.Sencoded}var BN=__webpack_require__(2);var elliptic=__webpack_require__(4);var utils=elliptic.utils;var assert=utils.assert;var cachedProperty=utils.cachedProperty;var parseBytes=utils.parseBytes;cachedProperty(Signature,'S',function S(){return this.eddsa.decodeInt(this.Sencoded())}),cachedProperty(Signature,'R',function R(){return this.eddsa.decodePoint(this.Rencoded())}),cachedProperty(Signature,'Rencoded',function Rencoded(){return this.eddsa.encodePoint(this.R())}),cachedProperty(Signature,'Sencoded',function Sencoded(){return this.eddsa.encodeInt(this.S())}),Signature.prototype.toBytes=function toBytes(){return this.Rencoded().concat(this.Sencoded())},Signature.prototype.toHex=function toHex(){return utils.encode(this.toBytes(),'hex').toUpperCase()},module.exports=Signature},function(module,exports){module.exports={doubles:{step:4,points:[['e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a','f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821'],['8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508','11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf'],['175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739','d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695'],['363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640','4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9'],['8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c','4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36'],['723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda','96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f'],['eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa','5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999'],['100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0','cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09'],['e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d','9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d'],['feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d','e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088'],['da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1','9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d'],['53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0','5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8'],['8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047','10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a'],['385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862','283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453'],['6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7','7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160'],['3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd','56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0'],['85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83','7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6'],['948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a','53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589'],['6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8','bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17'],['e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d','4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda'],['e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725','7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd'],['213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754','4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2'],['4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c','17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6'],['fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6','6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f'],['76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39','c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01'],['c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891','893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3'],['d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b','febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f'],['b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03','2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7'],['e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d','eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78'],['a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070','7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1'],['90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4','e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150'],['8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da','662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82'],['e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11','1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc'],['8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e','efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b'],['e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41','2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51'],['b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef','67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45'],['d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8','db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120'],['324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d','648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84'],['4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96','35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d'],['9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd','ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d'],['6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5','9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8'],['a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266','40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8'],['7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71','34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac'],['928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac','c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f'],['85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751','1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962'],['ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e','493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907'],['827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241','c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec'],['eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3','be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d'],['e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f','4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414'],['1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19','aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd'],['146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be','b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0'],['fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9','6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811'],['da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2','8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1'],['a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13','7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c'],['174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c','ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73'],['959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba','2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd'],['d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151','e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405'],['64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073','d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589'],['8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458','38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e'],['13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b','69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27'],['bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366','d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1'],['8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa','40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482'],['8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0','620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945'],['dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787','7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573'],['f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e','ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82']]},naf:{wnd:7,points:[['f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9','388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672'],['2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4','d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6'],['5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc','6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da'],['acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe','cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37'],['774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb','d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b'],['f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8','ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81'],['d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e','581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58'],['defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34','4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77'],['2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c','85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a'],['352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5','321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c'],['2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f','2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67'],['9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714','73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402'],['daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729','a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55'],['c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db','2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482'],['6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4','e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82'],['1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5','b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396'],['605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479','2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49'],['62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d','80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf'],['80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f','1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a'],['7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb','d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7'],['d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9','eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933'],['49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963','758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a'],['77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74','958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6'],['f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530','e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37'],['463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b','5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e'],['f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247','cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6'],['caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1','cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476'],['2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120','4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40'],['7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435','91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61'],['754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18','673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683'],['e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8','59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5'],['186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb','3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b'],['df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f','55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417'],['5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143','efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868'],['290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba','e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a'],['af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45','f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6'],['766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a','744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996'],['59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e','c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e'],['f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8','e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d'],['7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c','30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2'],['948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519','e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e'],['7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab','100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437'],['3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca','ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311'],['d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf','8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4'],['1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610','68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575'],['733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4','f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d'],['15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c','d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d'],['a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940','edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629'],['e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980','a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06'],['311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3','66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374'],['34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf','9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee'],['f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63','4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1'],['d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448','fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b'],['32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf','5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661'],['7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5','8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6'],['ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6','8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e'],['16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5','5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d'],['eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99','f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc'],['78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51','f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4'],['494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5','42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c'],['a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5','204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b'],['c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997','4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913'],['841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881','73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154'],['5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5','39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865'],['36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66','d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc'],['336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726','ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224'],['8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede','6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e'],['1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94','60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6'],['85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31','3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511'],['29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51','b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b'],['a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252','ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2'],['4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5','cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c'],['d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b','6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3'],['ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4','322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d'],['af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f','6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700'],['e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889','2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4'],['591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246','b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196'],['11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984','998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4'],['3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a','b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257'],['cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030','bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13'],['c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197','6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096'],['c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593','c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38'],['a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef','21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f'],['347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38','60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448'],['da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a','49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a'],['c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111','5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4'],['4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502','7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437'],['3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea','be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7'],['cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26','8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d'],['b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986','39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a'],['d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e','62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54'],['48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4','25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77'],['dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda','ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517'],['6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859','cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10'],['e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f','f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125'],['eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c','6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e'],['13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942','fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1'],['ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a','1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2'],['b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80','5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423'],['ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d','438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8'],['8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1','cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758'],['52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63','c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375'],['e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352','6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d'],['7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193','ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec'],['5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00','9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0'],['32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58','ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c'],['e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7','d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4'],['8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8','c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f'],['4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e','67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649'],['3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d','cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826'],['674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b','299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5'],['d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f','f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87'],['30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6','462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b'],['be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297','62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc'],['93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a','7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c'],['b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c','ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f'],['d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52','4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a'],['d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb','bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46'],['463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065','bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f'],['7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917','603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03'],['74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9','cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08'],['30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3','553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8'],['9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57','712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373'],['176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66','ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3'],['75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8','9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8'],['809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721','9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1'],['1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180','4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9']]}}},function(module,exports,__webpack_require__){'use strict';function getNAF(num,w){var naf=[];var ws=1<<w+1;for(var k=num.clone();k.cmpn(1)>=0;){var z;if(k.isOdd()){var mod=k.andln(ws-1);z=mod>(ws>>1)-1?(ws>>1)-mod:mod,k.isubn(z)}else z=0;naf.push(z);var shift=k.cmpn(0)!==0&&k.andln(ws-1)===0?w+1:1;for(var i=1;i<shift;i++)naf.push(0);k.iushrn(shift)}return naf}function getJSF(k1,k2){var jsf=[[],[]];k1=k1.clone(),k2=k2.clone();var d1=0;for(var d2=0;k1.cmpn(-d1)>0||k2.cmpn(-d2)>0;){var m14=k1.andln(3)+d1&3;var m24=k2.andln(3)+d2&3;m14===3&&(m14=-1),m24===3&&(m24=-1);var u1;if((m14&1)===0)u1=0;else{var m8=k1.andln(7)+d1&7;u1=(m8===3||m8===5)&&m24===2?-m14:m14}jsf[0].push(u1);var u2;if((m24&1)===0)u2=0;else{var m8=k2.andln(7)+d2&7;u2=(m8===3||m8===5)&&m14===2?-m24:m24}jsf[1].push(u2),2*d1===u1+1&&(d1=1-d1),2*d2===u2+1&&(d2=1-d2),k1.iushrn(1),k2.iushrn(1)}return jsf}function cachedProperty(obj,name,computer){var key='_'+name;obj.prototype[name]=function cachedProperty(){return this[key]===undefined?this[key]=computer.call(this):this[key]}}function parseBytes(bytes){return typeof bytes==='string'?utils.toArray(bytes,'hex'):bytes}function intFromLE(bytes){return new BN(bytes,'hex','le')}var utils=exports;var BN=__webpack_require__(2);var minAssert=__webpack_require__(5);var minUtils=__webpack_require__(57);utils.assert=minAssert,utils.toArray=minUtils.toArray,utils.zero2=minUtils.zero2,utils.toHex=minUtils.toHex,utils.encode=minUtils.encode,utils.getNAF=getNAF,utils.getJSF=getJSF,utils.cachedProperty=cachedProperty,utils.parseBytes=parseBytes,utils.intFromLE=intFromLE},function(module,exports){module.exports={'_args':[['elliptic@6.4.0','/Users/t/Documents/onlykey.github.io']],'_development':!0,'_from':'elliptic@6.4.0','_id':'elliptic@6.4.0','_inBundle':!1,'_integrity':'sha1-ysmvh2LIWDYYcAPI3+GT5eLq5d8=','_location':'/elliptic','_phantomChildren':{},'_requested':{'type':'version','registry':!0,'raw':'elliptic@6.4.0','name':'elliptic','escapedName':'elliptic','rawSpec':'6.4.0','saveSpec':null,'fetchSpec':'6.4.0'},'_requiredBy':['/browserify-sign','/create-ecdh'],'_resolved':'https://registry.npmjs.org/elliptic/-/elliptic-6.4.0.tgz','_spec':'6.4.0','_where':'/Users/t/Documents/onlykey.github.io','author':{'name':'Fedor Indutny','email':'fedor@indutny.com'},'bugs':{'url':'https://github.com/indutny/elliptic/issues'},'dependencies':{'bn.js':'^4.4.0','brorand':'^1.0.1','hash.js':'^1.0.0','hmac-drbg':'^1.0.0','inherits':'^2.0.1','minimalistic-assert':'^1.0.0','minimalistic-crypto-utils':'^1.0.0'},'description':'EC cryptography','devDependencies':{'brfs':'^1.4.3','coveralls':'^2.11.3','grunt':'^0.4.5','grunt-browserify':'^5.0.0','grunt-cli':'^1.2.0','grunt-contrib-connect':'^1.0.0','grunt-contrib-copy':'^1.0.0','grunt-contrib-uglify':'^1.0.1','grunt-mocha-istanbul':'^3.0.1','grunt-saucelabs':'^8.6.2','istanbul':'^0.4.2','jscs':'^2.9.0','jshint':'^2.6.0','mocha':'^2.1.0'},'files':['lib'],'homepage':'https://github.com/indutny/elliptic','keywords':['EC','Elliptic','curve','Cryptography'],'license':'MIT','main':'lib/elliptic.js','name':'elliptic','repository':{'type':'git','url':'git+ssh://git@github.com/indutny/elliptic.git'},'scripts':{'jscs':'jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js','jshint':'jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js','lint':'npm run jscs && npm run jshint','test':'npm run lint && npm run unit','unit':'istanbul test _mocha --reporter=spec test/index.js','version':'grunt dist && git add dist/'},'version':'6.4.0'}},function(module,exports,__webpack_require__){'use strict';(function(Buffer){function HashBase(blockSize){Transform.call(this),this._block=new Buffer(blockSize),this._blockSize=blockSize,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}var Transform=__webpack_require__(24).Transform;var inherits=__webpack_require__(0);inherits(HashBase,Transform),HashBase.prototype._transform=function(chunk,encoding,callback){var error=null;try{encoding!=='buffer'&&(chunk=new Buffer(chunk,encoding)),this.update(chunk)}catch(err){error=err}callback(error)},HashBase.prototype._flush=function(callback){var error=null;try{this.push(this._digest())}catch(err){error=err}callback(error)},HashBase.prototype.update=function(data,encoding){if(!Buffer.isBuffer(data)&&typeof data!=='string')throw new TypeError('Data must be a string or a buffer');if(this._finalized)throw new Error('Digest already called');!Buffer.isBuffer(data)&&(data=new Buffer(data,encoding||'binary'));var block=this._block;for(var offset=0;this._blockOffset+data.length-offset>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)block[i++]=data[offset++];this._update(),this._blockOffset=0}for(;offset<data.length;)block[this._blockOffset++]=data[offset++];for(var j=0,carry=data.length*8;carry>0;++j)this._length[j]+=carry,carry=this._length[j]/4294967296|0,carry>0&&(this._length[j]-=4294967296*carry);return this},HashBase.prototype._update=function(data){throw new Error('_update is not implemented')},HashBase.prototype.digest=function(encoding){if(this._finalized)throw new Error('Digest already called');this._finalized=!0;var digest=this._digest();return encoding!==undefined&&(digest=digest.toString(encoding)),digest},HashBase.prototype._digest=function(){throw new Error('_digest is not implemented')},module.exports=HashBase}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){'use strict';function Hmac(hash,key,enc){return this instanceof Hmac?void(this.Hash=hash,this.blockSize=hash.blockSize/8,this.outSize=hash.outSize/8,this.inner=null,this.outer=null,this._init(utils.toArray(key,enc))):new Hmac(hash,key,enc)}var utils=__webpack_require__(6);var assert=__webpack_require__(5);module.exports=Hmac,Hmac.prototype._init=function init(key){key.length>this.blockSize&&(key=new this.Hash().update(key).digest()),assert(key.length<=this.blockSize);for(var i=key.length;i<this.blockSize;i++)key.push(0);for(i=0;i<key.length;i++)key[i]^=54;for(this.inner=new this.Hash().update(key),i=0;i<key.length;i++)key[i]^=106;this.outer=new this.Hash().update(key)},Hmac.prototype.update=function update(msg,enc){return this.inner.update(msg,enc),this},Hmac.prototype.digest=function digest(enc){return this.outer.update(this.inner.digest()),this.outer.digest(enc)}},function(module,exports,__webpack_require__){'use strict';function RIPEMD160(){return this instanceof RIPEMD160?void(BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian='little'):new RIPEMD160}function f(j,x,y,z){return j<=15?x^y^z:j<=31?x&y|~x&z:j<=47?(x|~y)^z:j<=63?x&z|y&~z:x^(y|~z)}function K(j){return j<=15?0:j<=31?1518500249:j<=47?1859775393:j<=63?2400959708:2840853838}function Kh(j){return j<=15?1352829926:j<=31?1548603684:j<=47?1836072691:j<=63?2053994217:0}var utils=__webpack_require__(6);var common=__webpack_require__(17);var rotl32=utils.rotl32;var sum32=utils.sum32;var sum32_3=utils.sum32_3;var sum32_4=utils.sum32_4;var BlockHash=common.BlockHash;utils.inherits(RIPEMD160,BlockHash),exports.ripemd160=RIPEMD160,RIPEMD160.blockSize=512,RIPEMD160.outSize=160,RIPEMD160.hmacStrength=192,RIPEMD160.padLength=64,RIPEMD160.prototype._update=function update(msg,start){var A=this.h[0];var B=this.h[1];var C=this.h[2];var D=this.h[3];var E=this.h[4];var Ah=A;var Bh=B;var Ch=C;var Dh=D;var Eh=E;for(var j=0;j<80;j++){var T=sum32(rotl32(sum32_4(A,f(j,B,C,D),msg[r[j]+start],K(j)),s[j]),E);A=E,E=D,D=rotl32(C,10),C=B,B=T,T=sum32(rotl32(sum32_4(Ah,f(79-j,Bh,Ch,Dh),msg[rh[j]+start],Kh(j)),sh[j]),Eh),Ah=Eh,Eh=Dh,Dh=rotl32(Ch,10),Ch=Bh,Bh=T}T=sum32_3(this.h[1],C,Dh),this.h[1]=sum32_3(this.h[2],D,Eh),this.h[2]=sum32_3(this.h[3],E,Ah),this.h[3]=sum32_3(this.h[4],A,Bh),this.h[4]=sum32_3(this.h[0],B,Ch),this.h[0]=T},RIPEMD160.prototype._digest=function digest(enc){return enc==='hex'?utils.toHex32(this.h,'little'):utils.split32(this.h,'little')};var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(module,exports,__webpack_require__){'use strict';exports.sha1=__webpack_require__(134),exports.sha224=__webpack_require__(135),exports.sha256=__webpack_require__(52),exports.sha384=__webpack_require__(136),exports.sha512=__webpack_require__(53)},function(module,exports,__webpack_require__){'use strict';function SHA1(){return this instanceof SHA1?void(BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=Array(80)):new SHA1}var utils=__webpack_require__(6);var common=__webpack_require__(17);var shaCommon=__webpack_require__(54);var rotl32=utils.rotl32;var sum32=utils.sum32;var sum32_5=utils.sum32_5;var ft_1=shaCommon.ft_1;var BlockHash=common.BlockHash;var sha1_K=[1518500249,1859775393,2400959708,3395469782];utils.inherits(SHA1,BlockHash),module.exports=SHA1,SHA1.blockSize=512,SHA1.outSize=160,SHA1.hmacStrength=80,SHA1.padLength=64,SHA1.prototype._update=function _update(msg,start){var W=this.W;for(var i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=rotl32(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);var a=this.h[0];var b=this.h[1];var c=this.h[2];var d=this.h[3];var e=this.h[4];for(i=0;i<W.length;i++){var s=~~(i/20);var t=sum32_5(rotl32(a,5),ft_1(s,b,c,d),e,W[i],sha1_K[s]);e=d,d=c,c=rotl32(b,30),b=a,a=t}this.h[0]=sum32(this.h[0],a),this.h[1]=sum32(this.h[1],b),this.h[2]=sum32(this.h[2],c),this.h[3]=sum32(this.h[3],d),this.h[4]=sum32(this.h[4],e)},SHA1.prototype._digest=function digest(enc){return enc==='hex'?utils.toHex32(this.h,'big'):utils.split32(this.h,'big')}},function(module,exports,__webpack_require__){'use strict';function SHA224(){return this instanceof SHA224?void(SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]):new SHA224}var utils=__webpack_require__(6);var SHA256=__webpack_require__(52);utils.inherits(SHA224,SHA256),module.exports=SHA224,SHA224.blockSize=512,SHA224.outSize=224,SHA224.hmacStrength=192,SHA224.padLength=64,SHA224.prototype._digest=function digest(enc){return enc==='hex'?utils.toHex32(this.h.slice(0,7),'big'):utils.split32(this.h.slice(0,7),'big')}},function(module,exports,__webpack_require__){'use strict';function SHA384(){return this instanceof SHA384?void(SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]):new SHA384}var utils=__webpack_require__(6);var SHA512=__webpack_require__(53);utils.inherits(SHA384,SHA512),module.exports=SHA384,SHA384.blockSize=1024,SHA384.outSize=384,SHA384.hmacStrength=192,SHA384.padLength=128,SHA384.prototype._digest=function digest(enc){return enc==='hex'?utils.toHex32(this.h.slice(0,12),'big'):utils.split32(this.h.slice(0,12),'big')}},function(module,exports,__webpack_require__){'use strict';function HmacDRBG(options){if(!(this instanceof HmacDRBG))return new HmacDRBG(options);this.hash=options.hash,this.predResist=!!options.predResist,this.outLen=this.hash.outSize,this.minEntropy=options.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var entropy=utils.toArray(options.entropy,options.entropyEnc||'hex');var nonce=utils.toArray(options.nonce,options.nonceEnc||'hex');var pers=utils.toArray(options.pers,options.persEnc||'hex');assert(entropy.length>=this.minEntropy/8,'Not enough entropy. Minimum is: '+this.minEntropy+' bits'),this._init(entropy,nonce,pers)}var hash=__webpack_require__(31);var utils=__webpack_require__(57);var assert=__webpack_require__(5);module.exports=HmacDRBG,HmacDRBG.prototype._init=function init(entropy,nonce,pers){var seed=entropy.concat(nonce).concat(pers);this.K=Array(this.outLen/8),this.V=Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(seed),this._reseed=1,this.reseedInterval=281474976710656},HmacDRBG.prototype._hmac=function hmac(){return new hash.hmac(this.hash,this.K)},HmacDRBG.prototype._update=function update(seed){var kmac=this._hmac().update(this.V).update([0]);seed&&(kmac=kmac.update(seed)),this.K=kmac.digest(),this.V=this._hmac().update(this.V).digest();!seed||(this.K=this._hmac().update(this.V).update([1]).update(seed).digest(),this.V=this._hmac().update(this.V).digest())},HmacDRBG.prototype.reseed=function reseed(entropy,entropyEnc,add,addEnc){typeof entropyEnc!=='string'&&(addEnc=add,add=entropyEnc,entropyEnc=null),entropy=utils.toArray(entropy,entropyEnc),add=utils.toArray(add,addEnc),assert(entropy.length>=this.minEntropy/8,'Not enough entropy. Minimum is: '+this.minEntropy+' bits'),this._update(entropy.concat(add||[])),this._reseed=1},HmacDRBG.prototype.generate=function generate(len,enc,add,addEnc){if(this._reseed>this.reseedInterval)throw new Error('Reseed is required');typeof enc!=='string'&&(addEnc=add,add=enc,enc=null),add&&(add=utils.toArray(add,addEnc||'hex'),this._update(add));for(var temp=[];temp.length<len;)this.V=this._hmac().update(this.V).digest(),temp=temp.concat(this.V);var res=temp.slice(0,len);return this._update(add),this._reseed++,utils.encode(res,enc)}},function(module,exports){var _Mathpow4=Math.pow;exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8);if(e===0)e=1-eBias;else{if(e===eMax)return m?NaN:(s?-1:1)*Infinity;m+=_Mathpow4(2,mLen),e-=eBias}return(s?-1:1)*m*_Mathpow4(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?5.960464477539063e-8-6.617444900424222e-24:0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===Infinity?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=_Mathpow4(2,-e))<1&&(e--,c*=2),value+=e+eBias>=1?rt/c:rt*_Mathpow4(2,1-eBias),value*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*_Mathpow4(2,mLen),e+=eBias):(m=value*_Mathpow4(2,eBias-1)*_Mathpow4(2,mLen),e=0));mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=s*128}},function(module,exports){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i)if(arr[i]===obj)return i;return-1}},function(module,exports,__webpack_require__){'use strict';(function(Buffer){function MD5(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function rotl(x,n){return x<<n|x>>>32-n}function fnF(a,b,c,d,m,k,s){return rotl(a+(b&c|~b&d)+m+k|0,s)+b|0}function fnG(a,b,c,d,m,k,s){return rotl(a+(b&d|c&~d)+m+k|0,s)+b|0}function fnH(a,b,c,d,m,k,s){return rotl(a+(b^c^d)+m+k|0,s)+b|0}function fnI(a,b,c,d,m,k,s){return rotl(a+(c^(b|~d))+m+k|0,s)+b|0}var inherits=__webpack_require__(0);var HashBase=__webpack_require__(141);var ARRAY16=Array(16);inherits(MD5,HashBase),MD5.prototype._update=function(){var M=ARRAY16;for(var i=0;i<16;++i)M[i]=this._block.readInt32LE(i*4);var a=this._a;var b=this._b;var c=this._c;var d=this._d;a=fnF(a,b,c,d,M[0],3614090360,7),d=fnF(d,a,b,c,M[1],3905402710,12),c=fnF(c,d,a,b,M[2],606105819,17),b=fnF(b,c,d,a,M[3],3250441966,22),a=fnF(a,b,c,d,M[4],4118548399,7),d=fnF(d,a,b,c,M[5],1200080426,12),c=fnF(c,d,a,b,M[6],2821735955,17),b=fnF(b,c,d,a,M[7],4249261313,22),a=fnF(a,b,c,d,M[8],1770035416,7),d=fnF(d,a,b,c,M[9],2336552879,12),c=fnF(c,d,a,b,M[10],4294925233,17),b=fnF(b,c,d,a,M[11],2304563134,22),a=fnF(a,b,c,d,M[12],1804603682,7),d=fnF(d,a,b,c,M[13],4254626195,12),c=fnF(c,d,a,b,M[14],2792965006,17),b=fnF(b,c,d,a,M[15],1236535329,22),a=fnG(a,b,c,d,M[1],4129170786,5),d=fnG(d,a,b,c,M[6],3225465664,9),c=fnG(c,d,a,b,M[11],643717713,14),b=fnG(b,c,d,a,M[0],3921069994,20),a=fnG(a,b,c,d,M[5],3593408605,5),d=fnG(d,a,b,c,M[10],38016083,9),c=fnG(c,d,a,b,M[15],3634488961,14),b=fnG(b,c,d,a,M[4],3889429448,20),a=fnG(a,b,c,d,M[9],568446438,5),d=fnG(d,a,b,c,M[14],3275163606,9),c=fnG(c,d,a,b,M[3],4107603335,14),b=fnG(b,c,d,a,M[8],1163531501,20),a=fnG(a,b,c,d,M[13],2850285829,5),d=fnG(d,a,b,c,M[2],4243563512,9),c=fnG(c,d,a,b,M[7],1735328473,14),b=fnG(b,c,d,a,M[12],2368359562,20),a=fnH(a,b,c,d,M[5],4294588738,4),d=fnH(d,a,b,c,M[8],2272392833,11),c=fnH(c,d,a,b,M[11],1839030562,16),b=fnH(b,c,d,a,M[14],4259657740,23),a=fnH(a,b,c,d,M[1],2763975236,4),d=fnH(d,a,b,c,M[4],1272893353,11),c=fnH(c,d,a,b,M[7],4139469664,16),b=fnH(b,c,d,a,M[10],3200236656,23),a=fnH(a,b,c,d,M[13],681279174,4),d=fnH(d,a,b,c,M[0],3936430074,11),c=fnH(c,d,a,b,M[3],3572445317,16),b=fnH(b,c,d,a,M[6],76029189,23),a=fnH(a,b,c,d,M[9],3654602809,4),d=fnH(d,a,b,c,M[12],3873151461,11),c=fnH(c,d,a,b,M[15],530742520,16),b=fnH(b,c,d,a,M[2],3299628645,23),a=fnI(a,b,c,d,M[0],4096336452,6),d=fnI(d,a,b,c,M[7],1126891415,10),c=fnI(c,d,a,b,M[14],2878612391,15),b=fnI(b,c,d,a,M[5],4237533241,21),a=fnI(a,b,c,d,M[12],1700485571,6),d=fnI(d,a,b,c,M[3],2399980690,10),c=fnI(c,d,a,b,M[10],4293915773,15),b=fnI(b,c,d,a,M[1],2240044497,21),a=fnI(a,b,c,d,M[8],1873313359,6),d=fnI(d,a,b,c,M[15],4264355552,10),c=fnI(c,d,a,b,M[6],2734768916,15),b=fnI(b,c,d,a,M[13],1309151649,21),a=fnI(a,b,c,d,M[4],4149444226,6),d=fnI(d,a,b,c,M[11],3174756917,10),c=fnI(c,d,a,b,M[2],718787259,15),b=fnI(b,c,d,a,M[9],3951481745,21),this._a=this._a+a|0,this._b=this._b+b|0,this._c=this._c+c|0,this._d=this._d+d|0},MD5.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var buffer=new Buffer(16);return buffer.writeInt32LE(this._a,0),buffer.writeInt32LE(this._b,4),buffer.writeInt32LE(this._c,8),buffer.writeInt32LE(this._d,12),buffer},module.exports=MD5}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){'use strict';function throwIfNotStringOrBuffer(val,prefix){if(!Buffer.isBuffer(val)&&typeof val!=='string')throw new TypeError(prefix+' must be a string or a buffer')}function HashBase(blockSize){Transform.call(this),this._block=Buffer.allocUnsafe(blockSize),this._blockSize=blockSize,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}var Buffer=__webpack_require__(3).Buffer;var Transform=__webpack_require__(24).Transform;var inherits=__webpack_require__(0);inherits(HashBase,Transform),HashBase.prototype._transform=function(chunk,encoding,callback){var error=null;try{this.update(chunk,encoding)}catch(err){error=err}callback(error)},HashBase.prototype._flush=function(callback){var error=null;try{this.push(this.digest())}catch(err){error=err}callback(error)},HashBase.prototype.update=function(data,encoding){if(throwIfNotStringOrBuffer(data,'Data'),this._finalized)throw new Error('Digest already called');!Buffer.isBuffer(data)&&(data=Buffer.from(data,encoding));var block=this._block;for(var offset=0;this._blockOffset+data.length-offset>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)block[i++]=data[offset++];this._update(),this._blockOffset=0}for(;offset<data.length;)block[this._blockOffset++]=data[offset++];for(var j=0,carry=data.length*8;carry>0;++j)this._length[j]+=carry,carry=this._length[j]/4294967296|0,carry>0&&(this._length[j]-=4294967296*carry);return this},HashBase.prototype._update=function(){throw new Error('_update is not implemented')},HashBase.prototype.digest=function(encoding){if(this._finalized)throw new Error('Digest already called');this._finalized=!0;var digest=this._digest();encoding!==undefined&&(digest=digest.toString(encoding)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return digest},HashBase.prototype._digest=function(){throw new Error('_digest is not implemented')},module.exports=HashBase},function(module,exports){module.exports={'2.16.840.1.101.3.4.1.1':'aes-128-ecb','2.16.840.1.101.3.4.1.2':'aes-128-cbc','2.16.840.1.101.3.4.1.3':'aes-128-ofb','2.16.840.1.101.3.4.1.4':'aes-128-cfb','2.16.840.1.101.3.4.1.21':'aes-192-ecb','2.16.840.1.101.3.4.1.22':'aes-192-cbc','2.16.840.1.101.3.4.1.23':'aes-192-ofb','2.16.840.1.101.3.4.1.24':'aes-192-cfb','2.16.840.1.101.3.4.1.41':'aes-256-ecb','2.16.840.1.101.3.4.1.42':'aes-256-cbc','2.16.840.1.101.3.4.1.43':'aes-256-ofb','2.16.840.1.101.3.4.1.44':'aes-256-cfb'}},function(module,exports,__webpack_require__){'use strict';var asn1=__webpack_require__(12);exports.certificate=__webpack_require__(144);var RSAPrivateKey=asn1.define('RSAPrivateKey',function(){this.seq().obj(this.key('version').int(),this.key('modulus').int(),this.key('publicExponent').int(),this.key('privateExponent').int(),this.key('prime1').int(),this.key('prime2').int(),this.key('exponent1').int(),this.key('exponent2').int(),this.key('coefficient').int())});exports.RSAPrivateKey=RSAPrivateKey;var RSAPublicKey=asn1.define('RSAPublicKey',function(){this.seq().obj(this.key('modulus').int(),this.key('publicExponent').int())});exports.RSAPublicKey=RSAPublicKey;var PublicKey=asn1.define('SubjectPublicKeyInfo',function(){this.seq().obj(this.key('algorithm').use(AlgorithmIdentifier),this.key('subjectPublicKey').bitstr())});exports.PublicKey=PublicKey;var AlgorithmIdentifier=asn1.define('AlgorithmIdentifier',function(){this.seq().obj(this.key('algorithm').objid(),this.key('none').null_().optional(),this.key('curve').objid().optional(),this.key('params').seq().obj(this.key('p').int(),this.key('q').int(),this.key('g').int()).optional())});var PrivateKeyInfo=asn1.define('PrivateKeyInfo',function(){this.seq().obj(this.key('version').int(),this.key('algorithm').use(AlgorithmIdentifier),this.key('subjectPrivateKey').octstr())});exports.PrivateKey=PrivateKeyInfo;var EncryptedPrivateKeyInfo=asn1.define('EncryptedPrivateKeyInfo',function(){this.seq().obj(this.key('algorithm').seq().obj(this.key('id').objid(),this.key('decrypt').seq().obj(this.key('kde').seq().obj(this.key('id').objid(),this.key('kdeparams').seq().obj(this.key('salt').octstr(),this.key('iters').int())),this.key('cipher').seq().obj(this.key('algo').objid(),this.key('iv').octstr()))),this.key('subjectPrivateKey').octstr())});exports.EncryptedPrivateKey=EncryptedPrivateKeyInfo;var DSAPrivateKey=asn1.define('DSAPrivateKey',function(){this.seq().obj(this.key('version').int(),this.key('p').int(),this.key('q').int(),this.key('g').int(),this.key('pub_key').int(),this.key('priv_key').int())});exports.DSAPrivateKey=DSAPrivateKey,exports.DSAparam=asn1.define('DSAparam',function(){this.int()});var ECPrivateKey=asn1.define('ECPrivateKey',function(){this.seq().obj(this.key('version').int(),this.key('privateKey').octstr(),this.key('parameters').optional().explicit(0).use(ECParameters),this.key('publicKey').optional().explicit(1).bitstr())});exports.ECPrivateKey=ECPrivateKey;var ECParameters=asn1.define('ECParameters',function(){this.choice({namedCurve:this.objid()})});exports.signature=asn1.define('signature',function(){this.seq().obj(this.key('r').int(),this.key('s').int())})},function(module,exports,__webpack_require__){'use strict';var asn=__webpack_require__(12);var Time=asn.define('Time',function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})});var AttributeTypeValue=asn.define('AttributeTypeValue',function(){this.seq().obj(this.key('type').objid(),this.key('value').any())});var AlgorithmIdentifier=asn.define('AlgorithmIdentifier',function(){this.seq().obj(this.key('algorithm').objid(),this.key('parameters').optional())});var SubjectPublicKeyInfo=asn.define('SubjectPublicKeyInfo',function(){this.seq().obj(this.key('algorithm').use(AlgorithmIdentifier),this.key('subjectPublicKey').bitstr())});var RelativeDistinguishedName=asn.define('RelativeDistinguishedName',function(){this.setof(AttributeTypeValue)});var RDNSequence=asn.define('RDNSequence',function(){this.seqof(RelativeDistinguishedName)});var Name=asn.define('Name',function(){this.choice({rdnSequence:this.use(RDNSequence)})});var Validity=asn.define('Validity',function(){this.seq().obj(this.key('notBefore').use(Time),this.key('notAfter').use(Time))});var Extension=asn.define('Extension',function(){this.seq().obj(this.key('extnID').objid(),this.key('critical').bool().def(!1),this.key('extnValue').octstr())});var TBSCertificate=asn.define('TBSCertificate',function(){this.seq().obj(this.key('version').explicit(0).int(),this.key('serialNumber').int(),this.key('signature').use(AlgorithmIdentifier),this.key('issuer').use(Name),this.key('validity').use(Validity),this.key('subject').use(Name),this.key('subjectPublicKeyInfo').use(SubjectPublicKeyInfo),this.key('issuerUniqueID').implicit(1).bitstr().optional(),this.key('subjectUniqueID').implicit(2).bitstr().optional(),this.key('extensions').explicit(3).seqof(Extension).optional())});var X509Certificate=asn.define('X509Certificate',function(){this.seq().obj(this.key('tbsCertificate').use(TBSCertificate),this.key('signatureAlgorithm').use(AlgorithmIdentifier),this.key('signatureValue').bitstr())});module.exports=X509Certificate},function(module,exports,__webpack_require__){(function(Buffer){var findProc=/Proc-Type: 4,ENCRYPTED\n\r?DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\n\r?\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?/m;var startRegex=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----\n/m;var fullRegex=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?-----END \1-----$/m;var evp=__webpack_require__(21);var ciphers=__webpack_require__(25);module.exports=function(okey,password){var key=okey.toString();var match=key.match(findProc);var decrypted;if(!match){var match2=key.match(fullRegex);decrypted=new Buffer(match2[2].replace(/\r?\n/g,''),'base64')}else{var suite='aes'+match[1];var iv=new Buffer(match[2],'hex');var cipherText=new Buffer(match[3].replace(/\r?\n/g,''),'base64');var cipherKey=evp(password,iv.slice(0,8),parseInt(match[1],10)).key;var out=[];var cipher=ciphers.createDecipheriv(suite,cipherKey,iv);out.push(cipher.update(cipherText)),out.push(cipher.final()),decrypted=Buffer.concat(out)}var tag=key.match(startRegex)[1];return{tag:tag,data:decrypted}}}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){(function(global,process){function checkNative(algo){if(global.process&&!global.process.browser)return Promise.resolve(!1);if(!subtle||!subtle.importKey||!subtle.deriveBits)return Promise.resolve(!1);if(checks[algo]!==undefined)return checks[algo];ZERO_BUF=ZERO_BUF||Buffer.alloc(8);var prom=browserPbkdf2(ZERO_BUF,ZERO_BUF,10,128,algo).then(function(){return!0}).catch(function(){return!1});return checks[algo]=prom,prom}function browserPbkdf2(password,salt,iterations,length,algo){return subtle.importKey('raw',password,{name:'PBKDF2'},!1,['deriveBits']).then(function(key){return subtle.deriveBits({name:'PBKDF2',salt:salt,iterations:iterations,hash:{name:algo}},key,length<<3)}).then(function(res){return Buffer.from(res)})}function resolvePromise(promise,callback){promise.then(function(out){process.nextTick(function(){callback(null,out)})},function(e){process.nextTick(function(){callback(e)})})}var checkParameters=__webpack_require__(60);var defaultEncoding=__webpack_require__(59);var sync=__webpack_require__(61);var Buffer=__webpack_require__(3).Buffer;var ZERO_BUF;var subtle=global.crypto&&global.crypto.subtle;var toBrowser={'sha':'SHA-1','sha-1':'SHA-1','sha1':'SHA-1','sha256':'SHA-256','sha-256':'SHA-256','sha384':'SHA-384','sha-384':'SHA-384','sha-512':'SHA-512','sha512':'SHA-512'};var checks=[];module.exports=function(password,salt,iterations,keylen,digest,callback){if(!Buffer.isBuffer(password)&&(password=Buffer.from(password,defaultEncoding)),!Buffer.isBuffer(salt)&&(salt=Buffer.from(salt,defaultEncoding)),checkParameters(iterations,keylen),typeof digest==='function'&&(callback=digest,digest=undefined),typeof callback!=='function')throw new Error('No callback provided to pbkdf2');digest=digest||'sha1';var algo=toBrowser[digest.toLowerCase()];return algo&&typeof global.Promise==='function'?void resolvePromise(checkNative(algo).then(function(resp){return resp?browserPbkdf2(password,salt,iterations,keylen,algo):sync(password,salt,iterations,keylen,digest)}),callback):process.nextTick(function(){var out;try{out=sync(password,salt,iterations,keylen,digest)}catch(e){return callback(e)}callback(null,out)})}}).call(exports,__webpack_require__(7),__webpack_require__(9))},function(module,exports,__webpack_require__){exports.publicEncrypt=__webpack_require__(149),exports.privateDecrypt=__webpack_require__(148),exports.privateEncrypt=function privateEncrypt(key,buf){return exports.publicEncrypt(key,buf,!0)},exports.publicDecrypt=function publicDecrypt(key,buf){return exports.privateDecrypt(key,buf,!0)}},function(module,exports,__webpack_require__){(function(Buffer){function oaep(key,msg){var n=key.modulus;var k=key.modulus.byteLength();var mLen=msg.length;var iHash=createHash('sha1').update(new Buffer('')).digest();var hLen=iHash.length;var hLen2=2*hLen;if(msg[0]!==0)throw new Error('decryption error');var maskedSeed=msg.slice(1,hLen+1);var maskedDb=msg.slice(hLen+1);var seed=xor(maskedSeed,mgf(maskedDb,hLen));var db=xor(maskedDb,mgf(seed,k-hLen-1));if(compare(iHash,db.slice(0,hLen)))throw new Error('decryption error');for(var i=hLen;db[i]===0;)i++;if(db[i++]!==1)throw new Error('decryption error');return db.slice(i)}function pkcs1(key,msg,reverse){var p1=msg.slice(0,2);var i=2;for(var status=0;msg[i++]!==0;)if(i>=msg.length){status++;break}var ps=msg.slice(2,i-1);var p2=msg.slice(i-1,i);if((p1.toString('hex')!=='0002'&&!reverse||p1.toString('hex')!=='0001'&&reverse)&&status++,ps.length<8&&status++,status)throw new Error('decryption error');return msg.slice(i)}function compare(a,b){a=new Buffer(a),b=new Buffer(b);var dif=0;var len=a.length;a.length!==b.length&&(dif++,len=Math.min(a.length,b.length));for(var i=-1;++i<len;)dif+=a[i]^b[i];return dif}var parseKeys=__webpack_require__(22);var mgf=__webpack_require__(62);var xor=__webpack_require__(64);var bn=__webpack_require__(2);var crt=__webpack_require__(27);var createHash=__webpack_require__(16);var withPublic=__webpack_require__(63);module.exports=function privateDecrypt(private_key,enc,reverse){var padding;padding=private_key.padding?private_key.padding:reverse?1:4;var key=parseKeys(private_key);var k=key.modulus.byteLength();if(enc.length>k||new bn(enc).cmp(key.modulus)>=0)throw new Error('decryption error');var msg;msg=reverse?withPublic(new bn(enc),key):crt(enc,key);var zBuffer=new Buffer(k-msg.length);if(zBuffer.fill(0),msg=Buffer.concat([zBuffer,msg],k),padding===4)return oaep(key,msg);if(padding===1)return pkcs1(key,msg,reverse);if(padding===3)return msg;throw new Error('unknown padding')}}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){function oaep(key,msg){var k=key.modulus.byteLength();var mLen=msg.length;var iHash=createHash('sha1').update(new Buffer('')).digest();var hLen=iHash.length;var hLen2=2*hLen;if(mLen>k-hLen2-2)throw new Error('message too long');var ps=new Buffer(k-mLen-hLen2-2);ps.fill(0);var dblen=k-hLen-1;var seed=randomBytes(hLen);var maskedDb=xor(Buffer.concat([iHash,ps,new Buffer([1]),msg],dblen),mgf(seed,dblen));var maskedSeed=xor(seed,mgf(maskedDb,hLen));return new bn(Buffer.concat([new Buffer([0]),maskedSeed,maskedDb],k))}function pkcs1(key,msg,reverse){var mLen=msg.length;var k=key.modulus.byteLength();if(mLen>k-11)throw new Error('message too long');var ps;return reverse?(ps=new Buffer(k-mLen-3),ps.fill(255)):ps=nonZero(k-mLen-3),new bn(Buffer.concat([new Buffer([0,reverse?1:2]),ps,new Buffer([0]),msg],k))}function nonZero(len,crypto){var out=new Buffer(len);var i=0;var cache=randomBytes(len*2);var cur=0;for(var num;i<len;)cur===cache.length&&(cache=randomBytes(len*2),cur=0),num=cache[cur++],num&&(out[i++]=num);return out}var parseKeys=__webpack_require__(22);var randomBytes=__webpack_require__(18);var createHash=__webpack_require__(16);var mgf=__webpack_require__(62);var xor=__webpack_require__(64);var bn=__webpack_require__(2);var withPublic=__webpack_require__(63);var crt=__webpack_require__(27);var constants={RSA_PKCS1_OAEP_PADDING:4,RSA_PKCS1_PADDIN:1,RSA_NO_PADDING:3};module.exports=function publicEncrypt(public_key,msg,reverse){var padding;padding=public_key.padding?public_key.padding:reverse?1:4;var key=parseKeys(public_key);var paddedMsg;if(padding===4)paddedMsg=oaep(key,msg);else if(padding===1)paddedMsg=pkcs1(key,msg,reverse);else if(padding!==3)throw new Error('unknown padding');else if(paddedMsg=new bn(msg),paddedMsg.cmp(key.modulus)>=0)throw new Error('data too long for modulus');return reverse?crt(paddedMsg,key):withPublic(paddedMsg,key)}}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;/*! https://mths.be/punycode v1.4.1 by @mathias */;(function(root){function error(type){throw new RangeError(errors[type])}function map(array,fn){var length=array.length;for(var result=[];length--;)result[length]=fn(array[length]);return result}function mapDomain(string,fn){var parts=string.split('@');var result='';parts.length>1&&(result=parts[0]+'@',string=parts[1]),string=string.replace(regexSeparators,'.');var labels=string.split('.');var encoded=map(labels,fn).join('.');return result+encoded}function ucs2decode(string){for(var output=[],counter=0,length=string.length,value,extra;counter<length;)value=string.charCodeAt(counter++),value>=55296&&value<=56319&&counter<length?(extra=string.charCodeAt(counter++),(extra&64512)==56320?output.push(((value&1023)<<10)+(extra&1023)+65536):(output.push(value),counter--)):output.push(value);return output}function ucs2encode(array){return map(array,function(value){var output='';return value>65535&&(value-=65536,output+=stringFromCharCode(value>>>10&1023|55296),value=56320|value&1023),output+=stringFromCharCode(value),output}).join('')}function basicToDigit(codePoint){return codePoint-48<10?codePoint-22:codePoint-65<26?codePoint-65:codePoint-97<26?codePoint-97:base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/damp):delta>>1,delta+=floor(delta/numPoints);delta>baseMinusTMin*tMax>>1;k+=base)delta=floor(delta/baseMinusTMin);return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,i=0,n=initialN,bias=initialBias,out,basic,j,index,oldi,w,k,digit,t,baseMinusT;for(basic=input.lastIndexOf(delimiter),basic<0&&(basic=0),j=0;j<basic;++j)input.charCodeAt(j)>=128&&error('not-basic'),output.push(input.charCodeAt(j));for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength&&error('invalid-input'),digit=basicToDigit(input.charCodeAt(index++)),(digit>=base||digit>floor((maxInt-i)/w))&&error('overflow'),i+=digit*w,t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias,digit<t)break;baseMinusT=base-t,w>floor(maxInt/baseMinusT)&&error('overflow'),w*=baseMinusT}out=output.length+1,bias=adapt(i-oldi,out,oldi==0),floor(i/out)>maxInt-n&&error('overflow'),n+=floor(i/out),i%=out,output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var output=[],n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;for(input=ucs2decode(input),inputLength=input.length,n=initialN,delta=0,bias=initialBias,j=0;j<inputLength;++j)currentValue=input[j],currentValue<128&&output.push(stringFromCharCode(currentValue));for(handledCPCount=basicLength=output.length,basicLength&&output.push(delimiter);handledCPCount<inputLength;){for(m=maxInt,j=0;j<inputLength;++j)currentValue=input[j],currentValue>=n&&currentValue<m&&(m=currentValue);for(handledCPCountPlusOne=handledCPCount+1,m-n>floor((maxInt-delta)/handledCPCountPlusOne)&&error('overflow'),delta+=(m-n)*handledCPCountPlusOne,n=m,j=0;j<inputLength;++j)if(currentValue=input[j],currentValue<n&&++delta>maxInt&&error('overflow'),currentValue==n){for(q=delta,k=base;;k+=base){if(t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias,q<t)break;qMinusT=q-t,baseMinusT=base-t,output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0))),q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,++handledCPCount}++delta,++n}return output.join('')}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?'xn--'+encode(string):string})}var freeExports=typeof exports=='object'&&exports&&!exports.nodeType&&exports;var freeModule=typeof module=='object'&&module&&!module.nodeType&&module;var freeGlobal=typeof global=='object'&&global;(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal)&&(root=freeGlobal);var maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter='-',regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={'overflow':'Overflow: input needs wider integers to process','not-basic':'Illegal input >= 0x80 (not a basic code point)','invalid-input':'Invalid input'},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,punycode,key;if(punycode={'version':'1.4.1','ucs2':{'decode':ucs2decode,'encode':ucs2encode},'decode':decode,'encode':encode,'toASCII':toASCII,'toUnicode':toUnicode},!0)__WEBPACK_AMD_DEFINE_RESULT__=function(){return punycode}.call(exports,__webpack_require__,exports,module),!(__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));else if(!(freeExports&&freeModule))root.punycode=punycode;else if(module.exports==freeExports)freeModule.exports=punycode;else for(key in punycode)punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key])})(this)}).call(exports,__webpack_require__(38)(module),__webpack_require__(7))},function(module,exports,__webpack_require__){'use strict';function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||'&',eq=eq||'=';var obj={};if(typeof qs!=='string'||qs.length===0)return obj;var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1000;options&&typeof options.maxKeys==='number'&&(maxKeys=options.maxKeys);var len=qs.length;maxKeys>0&&len>maxKeys&&(len=maxKeys);for(var i=0;i<len;++i){var x=qs[i].replace(regexp,'%20'),idx=x.indexOf(eq),kstr,vstr,k,v;idx>=0?(kstr=x.substr(0,idx),vstr=x.substr(idx+1)):(kstr=x,vstr=''),k=decodeURIComponent(kstr),v=decodeURIComponent(vstr),hasOwnProperty(obj,k)?isArray(obj[k])?obj[k].push(v):obj[k]=[obj[k],v]:obj[k]=v}return obj};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==='[object Array]'}},function(module,exports,__webpack_require__){'use strict';function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++)res.push(f(xs[i],i));return res}var stringifyPrimitive=function(v){switch(typeof v){case'string':return v;case'boolean':return v?'true':'false';case'number':return isFinite(v)?v:'';default:return'';}};module.exports=function(obj,sep,eq,name){return sep=sep||'&',eq=eq||'=',obj===null&&(obj=undefined),typeof obj==='object'?map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;return isArray(obj[k])?map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep):ks+encodeURIComponent(stringifyPrimitive(obj[k]))}).join(sep):name?encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj)):''};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==='[object Array]'};var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&res.push(key);return res}},function(module,exports,__webpack_require__){'use strict';exports.decode=exports.parse=__webpack_require__(151),exports.encode=exports.stringify=__webpack_require__(152)},function(module,exports,__webpack_require__){var _Mathfloor4=Math.floor;(function(module){;(function(root,factory){if(!0){var randomColor=factory();typeof module==='object'&&module&&module.exports&&(exports=module.exports=randomColor),exports.randomColor=randomColor}else typeof define==='function'&&define.amd?define([],factory):root.randomColor=factory()})(this,function(){function pickHue(options){var hueRange=getHueRange(options.hue),hue=randomWithin(hueRange);return hue<0&&(hue=360+hue),hue}function pickSaturation(hue,options){if(options.hue==='monochrome')return 0;if(options.luminosity==='random')return randomWithin([0,100]);var saturationRange=getSaturationRange(hue);var sMin=saturationRange[0],sMax=saturationRange[1];switch(options.luminosity){case'bright':sMin=55;break;case'dark':sMin=sMax-10;break;case'light':sMax=55;}return randomWithin([sMin,sMax])}function pickBrightness(H,S,options){var bMin=getMinimumBrightness(H,S),bMax=100;switch(options.luminosity){case'dark':bMax=bMin+20;break;case'light':bMin=(bMax+bMin)/2;break;case'random':bMin=0,bMax=100;}return randomWithin([bMin,bMax])}function setFormat(hsv,options){switch(options.format){case'hsvArray':return hsv;case'hslArray':return HSVtoHSL(hsv);case'hsl':var hsl=HSVtoHSL(hsv);return'hsl('+hsl[0]+', '+hsl[1]+'%, '+hsl[2]+'%)';case'hsla':var hslColor=HSVtoHSL(hsv);var alpha=options.alpha||Math.random();return'hsla('+hslColor[0]+', '+hslColor[1]+'%, '+hslColor[2]+'%, '+alpha+')';case'rgbArray':return HSVtoRGB(hsv);case'rgb':var rgb=HSVtoRGB(hsv);return'rgb('+rgb.join(', ')+')';case'rgba':var rgbColor=HSVtoRGB(hsv);var alpha=options.alpha||Math.random();return'rgba('+rgbColor.join(', ')+', '+alpha+')';default:return HSVtoHex(hsv);}}function getMinimumBrightness(H,S){var lowerBounds=getColorInfo(H).lowerBounds;for(var i=0;i<lowerBounds.length-1;i++){var s1=lowerBounds[i][0],v1=lowerBounds[i][1];var s2=lowerBounds[i+1][0],v2=lowerBounds[i+1][1];if(S>=s1&&S<=s2){var m=(v2-v1)/(s2-s1),b=v1-m*s1;return m*S+b}}return 0}function getHueRange(colorInput){if(typeof parseInt(colorInput)==='number'){var number=parseInt(colorInput);if(number<360&&number>0)return[number,number]}if(typeof colorInput==='string')if(colorDictionary[colorInput]){var color=colorDictionary[colorInput];if(color.hueRange)return color.hueRange}else if(colorInput.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var hue=HexToHSB(colorInput)[0];return[hue,hue]}return[0,360]}function getSaturationRange(hue){return getColorInfo(hue).saturationRange}function getColorInfo(hue){for(var colorName in hue>=334&&hue<=360&&(hue-=360),colorDictionary){var color=colorDictionary[colorName];if(color.hueRange&&hue>=color.hueRange[0]&&hue<=color.hueRange[1])return colorDictionary[colorName]}return'Color not found'}function randomWithin(range){if(seed===null)return _Mathfloor4(range[0]+Math.random()*(range[1]+1-range[0]));var max=range[1]||1;var min=range[0]||0;seed=(seed*9301+49297)%233280;var rnd=seed/233280;return _Mathfloor4(min+rnd*(max-min))}function HSVtoHex(hsv){function componentToHex(c){var hex=c.toString(16);return hex.length==1?'0'+hex:hex}var rgb=HSVtoRGB(hsv);var hex='#'+componentToHex(rgb[0])+componentToHex(rgb[1])+componentToHex(rgb[2]);return hex}function defineColor(name,hueRange,lowerBounds){var sMin=lowerBounds[0][0],sMax=lowerBounds[lowerBounds.length-1][0],bMin=lowerBounds[lowerBounds.length-1][1],bMax=lowerBounds[0][1];colorDictionary[name]={hueRange:hueRange,lowerBounds:lowerBounds,saturationRange:[sMin,sMax],brightnessRange:[bMin,bMax]}}function loadColorBounds(){defineColor('monochrome',null,[[0,0],[100,0]]),defineColor('red',[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),defineColor('orange',[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),defineColor('yellow',[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),defineColor('green',[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),defineColor('blue',[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),defineColor('purple',[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),defineColor('pink',[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function HSVtoRGB(hsv){var h=hsv[0];h===0&&(h=1),h===360&&(h=359),h/=360;var s=hsv[1]/100,v=hsv[2]/100;var h_i=_Mathfloor4(h*6),f=h*6-h_i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),r=256,g=256,b=256;h_i===0?(r=v,g=t,b=p):h_i===1?(r=q,g=v,b=p):h_i===2?(r=p,g=v,b=t):h_i===3?(r=p,g=q,b=v):h_i===4?(r=t,g=p,b=v):h_i===5?(r=v,g=p,b=q):void 0;var result=[_Mathfloor4(r*255),_Mathfloor4(g*255),_Mathfloor4(b*255)];return result}function HexToHSB(hex){hex=hex.replace(/^#/,''),hex=hex.length===3?hex.replace(/(.)/g,'$1$1'):hex;var red=parseInt(hex.substr(0,2),16)/255,green=parseInt(hex.substr(2,2),16)/255,blue=parseInt(hex.substr(4,2),16)/255;var cMax=Math.max(red,green,blue),delta=cMax-Math.min(red,green,blue),saturation=cMax?delta/cMax:0;return cMax===red?[60*((green-blue)/delta%6)||0,saturation,cMax]:cMax===green?[60*((blue-red)/delta+2)||0,saturation,cMax]:cMax===blue?[60*((red-green)/delta+4)||0,saturation,cMax]:void 0}function HSVtoHSL(hsv){var h=hsv[0],s=hsv[1]/100,v=hsv[2]/100,k=(2-s)*v;return[h,Math.round(s*v/(k<1?k:2-k)*10000)/100,k/2*100]}function stringToInteger(string){var total=0;for(var i=0;i!==string.length&&!(total>=Number.MAX_SAFE_INTEGER);i++)total+=string.charCodeAt(i);return total}var seed=null;var colorDictionary={};loadColorBounds();var randomColor=function(options){if(options=options||{},options.seed!==undefined&&options.seed!==null&&options.seed===parseInt(options.seed,10))seed=options.seed;else if(typeof options.seed==='string')seed=stringToInteger(options.seed);else if(options.seed!==undefined&&options.seed!==null)throw new TypeError('The seed value must be an integer or string');else seed=null;var H,S,B;if(options.count!==null&&options.count!==undefined){var totalColors=options.count,colors=[];for(options.count=null;totalColors>colors.length;)seed&&options.seed&&(options.seed+=1),colors.push(randomColor(options));return options.count=totalColors,colors}return H=pickHue(options),S=pickSaturation(H,options),B=pickBrightness(H,S,options),setFormat([H,S,B],options)};return randomColor})}).call(exports,__webpack_require__(38)(module))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(10)},function(module,exports,__webpack_require__){'use strict';function PassThrough(options){return this instanceof PassThrough?void Transform.call(this,options):new PassThrough(options)}module.exports=PassThrough;var Transform=__webpack_require__(66);var util=__webpack_require__(15);util.inherits=__webpack_require__(0),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},function(module,exports,__webpack_require__){'use strict';function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}function copyBuffer(src,target,offset){src.copy(target,offset)}var Buffer=__webpack_require__(3).Buffer;module.exports=function(){function BufferList(){_classCallCheck(this,BufferList),this.head=null,this.tail=null,this.length=0}return BufferList.prototype.push=function push(v){var entry={data:v,next:null};this.length>0?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length},BufferList.prototype.unshift=function unshift(v){var entry={data:v,next:this.head};this.length===0&&(this.tail=entry),this.head=entry,++this.length},BufferList.prototype.shift=function shift(){if(this.length!==0){var ret=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,ret}},BufferList.prototype.clear=function clear(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function join(s){if(this.length===0)return'';var p=this.head;for(var ret=''+p.data;p=p.next;)ret+=s+p.data;return ret},BufferList.prototype.concat=function concat(n){if(this.length===0)return Buffer.alloc(0);if(this.length===1)return this.head.data;var ret=Buffer.allocUnsafe(n>>>0);var p=this.head;for(var i=0;p;)copyBuffer(p.data,ret,i),i+=p.data.length,p=p.next;return ret},BufferList}()},function(module,exports,__webpack_require__){module.exports=__webpack_require__(34).PassThrough},function(module,exports,__webpack_require__){module.exports=__webpack_require__(34).Transform},function(module,exports,__webpack_require__){module.exports=__webpack_require__(33)},function(module,exports,__webpack_require__){(function(global,process){(function(global,undefined){'use strict';function setImmediate(callback){typeof callback!=='function'&&(callback=new Function(''+callback));var args=Array(arguments.length-1);for(var i=0;i<args.length;i++)args[i]=arguments[i+1];var task={callback:callback,args:args};return tasksByHandle[nextHandle]=task,registerImmediate(nextHandle),nextHandle++}function clearImmediate(handle){delete tasksByHandle[handle]}function run(task){var callback=task.callback;var args=task.args;switch(args.length){case 0:callback();break;case 1:callback(args[0]);break;case 2:callback(args[0],args[1]);break;case 3:callback(args[0],args[1],args[2]);break;default:callback.apply(undefined,args);}}function runIfPresent(handle){if(currentlyRunningATask)setTimeout(runIfPresent,0,handle);else{var task=tasksByHandle[handle];if(task){currentlyRunningATask=!0;try{run(task)}finally{clearImmediate(handle),currentlyRunningATask=!1}}}}function installNextTickImplementation(){registerImmediate=function(handle){process.nextTick(function(){runIfPresent(handle)})}}function canUsePostMessage(){if(global.postMessage&&!global.importScripts){var postMessageIsAsynchronous=!0;var oldOnMessage=global.onmessage;return global.onmessage=function(){postMessageIsAsynchronous=!1},global.postMessage('','*'),global.onmessage=oldOnMessage,postMessageIsAsynchronous}}function installPostMessageImplementation(){var messagePrefix='setImmediate$'+Math.random()+'$';var onGlobalMessage=function(event){event.source===global&&typeof event.data==='string'&&event.data.indexOf(messagePrefix)===0&&runIfPresent(+event.data.slice(messagePrefix.length))};global.addEventListener?global.addEventListener('message',onGlobalMessage,!1):global.attachEvent('onmessage',onGlobalMessage),registerImmediate=function(handle){global.postMessage(messagePrefix+handle,'*')}}function installMessageChannelImplementation(){var channel=new MessageChannel;channel.port1.onmessage=function(event){var handle=event.data;runIfPresent(handle)},registerImmediate=function(handle){channel.port2.postMessage(handle)}}function installReadyStateChangeImplementation(){var html=doc.documentElement;registerImmediate=function(handle){var script=doc.createElement('script');script.onreadystatechange=function(){runIfPresent(handle),script.onreadystatechange=null,html.removeChild(script),script=null},html.appendChild(script)}}function installSetTimeoutImplementation(){registerImmediate=function(handle){setTimeout(runIfPresent,0,handle)}}if(!global.setImmediate){var nextHandle=1;var tasksByHandle={};var currentlyRunningATask=!1;var doc=global.document;var registerImmediate;var attachTo=Object.getPrototypeOf&&Object.getPrototypeOf(global);attachTo=attachTo&&attachTo.setTimeout?attachTo:global,{}.toString.call(global.process)==='[object process]'?installNextTickImplementation():canUsePostMessage()?installPostMessageImplementation():global.MessageChannel?installMessageChannelImplementation():doc&&'onreadystatechange'in doc.createElement('script')?installReadyStateChangeImplementation():installSetTimeoutImplementation(),attachTo.setImmediate=setImmediate,attachTo.clearImmediate=clearImmediate}})(typeof self==='undefined'?typeof global==='undefined'?this:global:self)}).call(exports,__webpack_require__(7),__webpack_require__(9))},function(module,exports,__webpack_require__){(function(Buffer){function Sha(){this.init(),this._w=W,Hash.call(this,64,56)}function rotl5(num){return num<<5|num>>>27}function rotl30(num){return num<<30|num>>>2}function ft(s,b,c,d){return s===0?b&c|~b&d:s===2?b&c|b&d|c&d:b^c^d}var inherits=__webpack_require__(0);var Hash=__webpack_require__(11);var K=[1518500249,1859775393,2400959708|0,3395469782|0];var W=Array(80);inherits(Sha,Hash),Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha.prototype._update=function(M){var W=this._w;var a=this._a|0;var b=this._b|0;var c=this._c|0;var d=this._d|0;var e=this._e|0;for(var i=0;i<16;++i)W[i]=M.readInt32BE(i*4);for(;i<80;++i)W[i]=W[i-3]^W[i-8]^W[i-14]^W[i-16];for(var j=0;j<80;++j){var s=~~(j/20);var t=rotl5(a)+ft(s,b,c,d)+e+W[j]+K[s]|0;e=d,d=c,c=rotl30(b),b=a,a=t}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0},Sha.prototype._hash=function(){var H=new Buffer(20);return H.writeInt32BE(this._a|0,0),H.writeInt32BE(this._b|0,4),H.writeInt32BE(this._c|0,8),H.writeInt32BE(this._d|0,12),H.writeInt32BE(this._e|0,16),H},module.exports=Sha}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){function Sha1(){this.init(),this._w=W,Hash.call(this,64,56)}function rotl1(num){return num<<1|num>>>31}function rotl5(num){return num<<5|num>>>27}function rotl30(num){return num<<30|num>>>2}function ft(s,b,c,d){return s===0?b&c|~b&d:s===2?b&c|b&d|c&d:b^c^d}var inherits=__webpack_require__(0);var Hash=__webpack_require__(11);var K=[1518500249,1859775393,2400959708|0,3395469782|0];var W=Array(80);inherits(Sha1,Hash),Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha1.prototype._update=function(M){var W=this._w;var a=this._a|0;var b=this._b|0;var c=this._c|0;var d=this._d|0;var e=this._e|0;for(var i=0;i<16;++i)W[i]=M.readInt32BE(i*4);for(;i<80;++i)W[i]=rotl1(W[i-3]^W[i-8]^W[i-14]^W[i-16]);for(var j=0;j<80;++j){var s=~~(j/20);var t=rotl5(a)+ft(s,b,c,d)+e+W[j]+K[s]|0;e=d,d=c,c=rotl30(b),b=a,a=t}this._a=a+this._a|0,this._b=b+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=e+this._e|0},Sha1.prototype._hash=function(){var H=new Buffer(20);return H.writeInt32BE(this._a|0,0),H.writeInt32BE(this._b|0,4),H.writeInt32BE(this._c|0,8),H.writeInt32BE(this._d|0,12),H.writeInt32BE(this._e|0,16),H},module.exports=Sha1}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){function Sha224(){this.init(),this._w=W,Hash.call(this,64,56)}var inherits=__webpack_require__(0);var Sha256=__webpack_require__(69);var Hash=__webpack_require__(11);var W=Array(64);inherits(Sha224,Sha256),Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},Sha224.prototype._hash=function(){var H=new Buffer(28);return H.writeInt32BE(this._a,0),H.writeInt32BE(this._b,4),H.writeInt32BE(this._c,8),H.writeInt32BE(this._d,12),H.writeInt32BE(this._e,16),H.writeInt32BE(this._f,20),H.writeInt32BE(this._g,24),H},module.exports=Sha224}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){function Sha384(){this.init(),this._w=W,Hash.call(this,128,112)}var inherits=__webpack_require__(0);var SHA512=__webpack_require__(70);var Hash=__webpack_require__(11);var W=Array(160);inherits(Sha384,SHA512),Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},Sha384.prototype._hash=function(){function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset),H.writeInt32BE(l,offset+4)}var H=new Buffer(48);return writeInt64BE(this._ah,this._al,0),writeInt64BE(this._bh,this._bl,8),writeInt64BE(this._ch,this._cl,16),writeInt64BE(this._dh,this._dl,24),writeInt64BE(this._eh,this._el,32),writeInt64BE(this._fh,this._fl,40),H},module.exports=Sha384}).call(exports,__webpack_require__(1).Buffer)},function(module,exports,__webpack_require__){function noop(){}function serialize(obj){if(!isObject(obj))return obj;var pairs=[];for(var key in obj)pushEncodedKeyValuePair(pairs,key,obj[key]);return pairs.join('&')}function pushEncodedKeyValuePair(pairs,key,val){if(!(val!=null))val===null&&pairs.push(encodeURIComponent(key));else if(Array.isArray(val))val.forEach(function(v){pushEncodedKeyValuePair(pairs,key,v)});else if(isObject(val))for(var subkey in val)pushEncodedKeyValuePair(pairs,key+'['+subkey+']',val[subkey]);else pairs.push(encodeURIComponent(key)+'='+encodeURIComponent(val))}function parseString(str){var obj={};var pairs=str.split('&');var pair;var pos;for(var i=0,len=pairs.length;i<len;++i)pair=pairs[i],pos=pair.indexOf('='),pos==-1?obj[decodeURIComponent(pair)]='':obj[decodeURIComponent(pair.slice(0,pos))]=decodeURIComponent(pair.slice(pos+1));return obj}function parseHeader(str){var lines=str.split(/\r?\n/);var fields={};var index;var line;var field;var val;lines.pop();for(var i=0,len=lines.length;i<len;++i)line=lines[i],index=line.indexOf(':'),field=line.slice(0,index).toLowerCase(),val=trim(line.slice(index+1)),fields[field]=val;return fields}function isJSON(mime){return /[\/+]json\b/.test(mime)}function Response(req){this.req=req,this.xhr=this.req.xhr,this.text=this.req.method!='HEAD'&&(this.xhr.responseType===''||this.xhr.responseType==='text')||typeof this.xhr.responseType==='undefined'?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var status=this.xhr.status;status===1223&&(status=204),this._setStatusProperties(status),this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders()),this.header['content-type']=this.xhr.getResponseHeader('content-type'),this._setHeaderProperties(this.header),this.body=null===this.text&&req._responseType?this.xhr.response:this.req.method=='HEAD'?null:this._parseBody(this.text?this.text:this.xhr.response)}function Request(method,url){var self=this;this._query=this._query||[],this.method=method,this.url=url,this.header={},this._header={},this.on('end',function(){var err=null;var res=null;try{res=new Response(self)}catch(e){return err=new Error('Parser is unable to parse the response'),err.parse=!0,err.original=e,self.xhr?(err.rawResponse=typeof self.xhr.responseType=='undefined'?self.xhr.responseText:self.xhr.response,err.status=self.xhr.status?self.xhr.status:null,err.statusCode=err.status):(err.rawResponse=null,err.status=null),self.callback(err)}self.emit('response',res);var new_err;try{!self._isResponseOK(res)&&(new_err=new Error(res.statusText||'Unsuccessful HTTP response'),new_err.original=err,new_err.response=res,new_err.status=res.status)}catch(e){new_err=e}new_err?self.callback(new_err,res):self.callback(null,res)})}function del(url,data,fn){var req=request('DELETE',url);return'function'==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req}var root;typeof window==='undefined'?typeof self==='undefined'?(void 0,root=this):root=self:root=window;var Emitter=__webpack_require__(103);var RequestBase=__webpack_require__(167);var isObject=__webpack_require__(71);var ResponseBase=__webpack_require__(168);var shouldRetry=__webpack_require__(169);;var request=exports=module.exports=function(method,url){return'function'==typeof url?new exports.Request('GET',method).end(url):1==arguments.length?new exports.Request('GET',method):new exports.Request(method,url)};exports.Request=Request,request.getXHR=function(){if(root.XMLHttpRequest&&(!root.location||'file:'!=root.location.protocol||!root.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject('Microsoft.XMLHTTP')}catch(e){}try{return new ActiveXObject('Msxml2.XMLHTTP.6.0')}catch(e){}try{return new ActiveXObject('Msxml2.XMLHTTP.3.0')}catch(e){}try{return new ActiveXObject('Msxml2.XMLHTTP')}catch(e){}throw Error('Browser-only version of superagent could not find XHR')};var trim=''.trim?function(s){return s.trim()}:function(s){return s.replace(/(^\s*|\s*$)/g,'')};request.serializeObject=serialize,request.parseString=parseString,request.types={html:'text/html',json:'application/json',xml:'text/xml',urlencoded:'application/x-www-form-urlencoded','form':'application/x-www-form-urlencoded','form-data':'application/x-www-form-urlencoded'},request.serialize={'application/x-www-form-urlencoded':serialize,'application/json':JSON.stringify},request.parse={'application/x-www-form-urlencoded':parseString,'application/json':JSON.parse},ResponseBase(Response.prototype),Response.prototype._parseBody=function(str){var parse=request.parse[this.type];return this.req._parser?this.req._parser(this,str):(!parse&&isJSON(this.type)&&(parse=request.parse['application/json']),parse&&str&&(str.length||str instanceof Object)?parse(str):null)},Response.prototype.toError=function(){var req=this.req;var method=req.method;var url=req.url;var msg='cannot '+method+' '+url+' ('+this.status+')';var err=new Error(msg);return err.status=this.status,err.method=method,err.url=url,err},request.Response=Response,Emitter(Request.prototype),RequestBase(Request.prototype),Request.prototype.type=function(type){return this.set('Content-Type',request.types[type]||type),this},Request.prototype.accept=function(type){return this.set('Accept',request.types[type]||type),this},Request.prototype.auth=function(user,pass,options){switch(typeof pass==='object'&&pass!==null&&(options=pass),!options&&(options={type:'function'===typeof btoa?'basic':'auto'}),options.type){case'basic':this.set('Authorization','Basic '+btoa(user+':'+pass));break;case'auto':this.username=user,this.password=pass;break;case'bearer':this.set('Authorization','Bearer '+user);}return this},Request.prototype.query=function(val){return'string'!=typeof val&&(val=serialize(val)),val&&this._query.push(val),this},Request.prototype.attach=function(field,file,options){if(file){if(this._data)throw Error('superagent can\'t mix .send() and .attach()');this._getFormData().append(field,file,options||file.name)}return this},Request.prototype._getFormData=function(){return!this._formData&&(this._formData=new root.FormData),this._formData},Request.prototype.callback=function(err,res){if(this._maxRetries&&this._retries++<this._maxRetries&&shouldRetry(err,res))return this._retry();var fn=this._callback;this.clearTimeout(),err&&(this._maxRetries&&(err.retries=this._retries-1),this.emit('error',err)),fn(err,res)},Request.prototype.crossDomainError=function(){var err=new Error('Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.');err.crossDomain=!0,err.status=this.status,err.method=this.method,err.url=this.url,this.callback(err)},Request.prototype.buffer=Request.prototype.ca=Request.prototype.agent=function(){return this},Request.prototype.pipe=Request.prototype.write=function(){throw Error('Streaming is not supported in browser version of superagent')},Request.prototype._isHost=function _isHost(obj){return obj&&'object'===typeof obj&&!Array.isArray(obj)&&Object.prototype.toString.call(obj)!=='[object Object]'},Request.prototype.end=function(fn){return this._endCalled&&void 0,this._endCalled=!0,this._callback=fn||noop,this._finalizeQueryString(),this._end()},Request.prototype._end=function(){var self=this;var xhr=this.xhr=request.getXHR();var data=this._formData||this._data;this._setTimeouts(),xhr.onreadystatechange=function(){var readyState=xhr.readyState;if(readyState>=2&&self._responseTimeoutTimer&&clearTimeout(self._responseTimeoutTimer),4==readyState){var status;try{status=xhr.status}catch(e){status=0}return status?void self.emit('end'):self.timedout||self._aborted?void 0:self.crossDomainError()}};var handleProgress=function(direction,e){e.total>0&&(e.percent=e.loaded/e.total*100),e.direction=direction,self.emit('progress',e)};if(this.hasListeners('progress'))try{xhr.onprogress=handleProgress.bind(null,'download'),xhr.upload&&(xhr.upload.onprogress=handleProgress.bind(null,'upload'))}catch(e){}try{this.username&&this.password?xhr.open(this.method,this.url,!0,this.username,this.password):xhr.open(this.method,this.url,!0)}catch(err){return this.callback(err)}if(this._withCredentials&&(xhr.withCredentials=!0),!this._formData&&'GET'!=this.method&&'HEAD'!=this.method&&'string'!=typeof data&&!this._isHost(data)){var contentType=this._header['content-type'];var serialize=this._serializer||request.serialize[contentType?contentType.split(';')[0]:''];!serialize&&isJSON(contentType)&&(serialize=request.serialize['application/json']),serialize&&(data=serialize(data))}for(var field in this.header)null!=this.header[field]&&this.header.hasOwnProperty(field)&&xhr.setRequestHeader(field,this.header[field]);return this._responseType&&(xhr.responseType=this._responseType),this.emit('request',this),xhr.send(typeof data==='undefined'?null:data),this},request.get=function(url,data,fn){var req=request('GET',url);return'function'==typeof data&&(fn=data,data=null),data&&req.query(data),fn&&req.end(fn),req},request.head=function(url,data,fn){var req=request('HEAD',url);return'function'==typeof data&&(fn=data,data=null),data&&req.query(data),fn&&req.end(fn),req},request.options=function(url,data,fn){var req=request('OPTIONS',url);return'function'==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req};;request.del=del,request['delete']=del,request.patch=function(url,data,fn){var req=request('PATCH',url);return'function'==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.post=function(url,data,fn){var req=request('POST',url);return'function'==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.put=function(url,data,fn){var req=request('PUT',url);return'function'==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req}},function(module,exports,__webpack_require__){function RequestBase(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in RequestBase.prototype)obj[key]=RequestBase.prototype[key];return obj}var isObject=__webpack_require__(71);module.exports=RequestBase,RequestBase.prototype.clearTimeout=function _clearTimeout(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},RequestBase.prototype.parse=function parse(fn){return this._parser=fn,this},RequestBase.prototype.responseType=function(val){return this._responseType=val,this},RequestBase.prototype.serialize=function serialize(fn){return this._serializer=fn,this},RequestBase.prototype.timeout=function timeout(options){if(!options||'object'!==typeof options)return this._timeout=options,this._responseTimeout=0,this;for(var option in options)switch(option){case'deadline':this._timeout=options.deadline;break;case'response':this._responseTimeout=options.response;break;default:}return this},RequestBase.prototype.retry=function retry(count){return(arguments.length===0||count===!0)&&(count=1),count<=0&&(count=0),this._maxRetries=count,this._retries=0,this},RequestBase.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},RequestBase.prototype.then=function then(resolve,reject){if(!this._fullfilledPromise){var self=this;this._endCalled&&void 0,this._fullfilledPromise=new Promise(function(innerResolve,innerReject){self.end(function(err,res){err?innerReject(err):innerResolve(res)})})}return this._fullfilledPromise.then(resolve,reject)},RequestBase.prototype.catch=function(cb){return this.then(undefined,cb)},RequestBase.prototype.use=function use(fn){return fn(this),this},RequestBase.prototype.ok=function(cb){if('function'!==typeof cb)throw Error('Callback required');return this._okCallback=cb,this},RequestBase.prototype._isResponseOK=function(res){return!!res&&(this._okCallback?this._okCallback(res):res.status>=200&&res.status<300)},RequestBase.prototype.get=function(field){return this._header[field.toLowerCase()]},RequestBase.prototype.getHeader=RequestBase.prototype.get,RequestBase.prototype.set=function(field,val){if(isObject(field)){for(var key in field)this.set(key,field[key]);return this}return this._header[field.toLowerCase()]=val,this.header[field]=val,this},RequestBase.prototype.unset=function(field){return delete this._header[field.toLowerCase()],delete this.header[field],this},RequestBase.prototype.field=function(name,val){if(null===name||undefined===name)throw new Error('.field(name, val) name can not be empty');if(this._data&&void 0,isObject(name)){for(var key in name)this.field(key,name[key]);return this}if(Array.isArray(val)){for(var i in val)this.field(name,val[i]);return this}if(null===val||undefined===val)throw new Error('.field(name, val) val can not be empty');return'boolean'===typeof val&&(val=''+val),this._getFormData().append(name,val),this},RequestBase.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit('abort'),this)},RequestBase.prototype.withCredentials=function(on){return on==undefined&&(on=!0),this._withCredentials=on,this},RequestBase.prototype.redirects=function(n){return this._maxRedirects=n,this},RequestBase.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},RequestBase.prototype.send=function(data){var isObj=isObject(data);var type=this._header['content-type'];if(this._formData&&void 0,isObj&&!this._data)Array.isArray(data)?this._data=[]:!this._isHost(data)&&(this._data={});else if(data&&this._data&&this._isHost(this._data))throw Error('Can\'t merge these send calls');if(isObj&&isObject(this._data))for(var key in data)this._data[key]=data[key];else'string'==typeof data?(!type&&this.type('form'),type=this._header['content-type'],this._data='application/x-www-form-urlencoded'==type?this._data?this._data+'&'+data:data:(this._data||'')+data):this._data=data;return!isObj||this._isHost(data)?this:(!type&&this.type('json'),this)},RequestBase.prototype.sortQuery=function(sort){return this._sort=typeof sort==='undefined'||sort,this},RequestBase.prototype._finalizeQueryString=function(){var query=this._query.join('&');if(query&&(this.url+=(this.url.indexOf('?')>=0?'&':'?')+query),this._query.length=0,this._sort){var index=this.url.indexOf('?');if(index>=0){var queryArr=this.url.substring(index+1).split('&');'function'===typeof this._sort?queryArr.sort(this._sort):queryArr.sort(),this.url=this.url.substring(0,index)+'?'+queryArr.join('&')}}},RequestBase.prototype._appendQueryString=function(){},RequestBase.prototype._timeoutError=function(reason,timeout,errno){if(!this._aborted){var err=new Error(reason+timeout+'ms exceeded');err.timeout=timeout,err.code='ECONNABORTED',err.errno=errno,this.timedout=!0,this.abort(),this.callback(err)}},RequestBase.prototype._setTimeouts=function(){var self=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){self._timeoutError('Timeout of ',self._timeout,'ETIME')},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){self._timeoutError('Response timeout of ',self._responseTimeout,'ETIMEDOUT')},this._responseTimeout))}},function(module,exports,__webpack_require__){function ResponseBase(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in ResponseBase.prototype)obj[key]=ResponseBase.prototype[key];return obj}var utils=__webpack_require__(170);module.exports=ResponseBase,ResponseBase.prototype.get=function(field){return this.header[field.toLowerCase()]},ResponseBase.prototype._setHeaderProperties=function(header){var ct=header['content-type']||'';this.type=utils.type(ct);var params=utils.params(ct);for(var key in params)this[key]=params[key];this.links={};try{header.link&&(this.links=utils.parseLinks(header.link))}catch(err){}},ResponseBase.prototype._setStatusProperties=function(status){var type=status/100|0;this.status=this.statusCode=status,this.statusType=type,this.info=1==type,this.ok=2==type,this.redirect=3==type,this.clientError=4==type,this.serverError=5==type,this.error=!(4!=type&&5!=type)&&this.toError(),this.accepted=202==status,this.noContent=204==status,this.badRequest=400==status,this.unauthorized=401==status,this.notAcceptable=406==status,this.forbidden=403==status,this.notFound=404==status}},function(module,exports){var ERROR_CODES=['ECONNRESET','ETIMEDOUT','EADDRINFO','ESOCKETTIMEDOUT'];module.exports=function shouldRetry(err,res){return!!(err&&err.code&&~ERROR_CODES.indexOf(err.code))||!!(res&&res.status&&res.status>=500)||!!(err&&'timeout'in err&&err.code=='ECONNABORTED')||!!(err&&'crossDomain'in err)}},function(module,exports){exports.type=function(str){return str.split(/ *; */).shift()},exports.params=function(str){return str.split(/ *; */).reduce(function(obj,str){var parts=str.split(/ *= */);var key=parts.shift();var val=parts.shift();return key&&val&&(obj[key]=val),obj},{})},exports.parseLinks=function(str){return str.split(/ *, */).reduce(function(obj,str){var parts=str.split(/ *; */);var url=parts[0].slice(1,-1);var rel=parts[1].split(/ *= */)[1].slice(1,-1);return obj[rel]=url,obj},{})},exports.cleanHeader=function(header,shouldStripCookie){return delete header['content-type'],delete header['content-length'],delete header['transfer-encoding'],delete header.host,shouldStripCookie&&delete header.cookie,header}},function(module,exports,__webpack_require__){'use strict';function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url;return u.parse(url,parseQueryString,slashesDenoteHost),u}function urlFormat(obj){return util.isString(obj)&&(obj=urlParse(obj)),obj instanceof Url?obj.format():Url.prototype.format.call(obj)}function urlResolve(source,relative){return urlParse(source,!1,!0).resolve(relative)}function urlResolveObject(source,relative){return source?urlParse(source,!1,!0).resolveObject(relative):relative}var punycode=__webpack_require__(150);var util=__webpack_require__(172);exports.parse=urlParse,exports.resolve=urlResolve,exports.resolveObject=urlResolveObject,exports.format=urlFormat,exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=['<','>','"','`',' ','\r','\n','\t'],unwise=['{','}','|','\\','^','`'].concat(delims),autoEscape=['\''].concat(unwise),nonHostChars=['%','/','?',';','#'].concat(autoEscape),hostEndingChars=['/','?','#'],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={'javascript':!0,'javascript:':!0},hostlessProtocol={'javascript':!0,'javascript:':!0},slashedProtocol={'http':!0,'https':!0,'ftp':!0,'gopher':!0,'file':!0,'http:':!0,'https:':!0,'ftp:':!0,'gopher:':!0,'file:':!0},querystring=__webpack_require__(153);Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url))throw new TypeError('Parameter \'url\' must be a string, not '+typeof url);var queryIndex=url.indexOf('?'),splitter=queryIndex!==-1&&queryIndex<url.indexOf('#')?'?':'#',uSplit=url.split(splitter),slashRegex=/\\/g;uSplit[0]=uSplit[0].replace(slashRegex,'/'),url=uSplit.join(splitter);var rest=url;if(rest=rest.trim(),!slashesDenoteHost&&url.split('#').length===1){var simplePath=simplePathPattern.exec(rest);if(simplePath)return this.path=rest,this.href=rest,this.pathname=simplePath[1],simplePath[2]?(this.search=simplePath[2],this.query=parseQueryString?querystring.parse(this.search.substr(1)):this.search.substr(1)):parseQueryString&&(this.search='',this.query={}),this}var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto,rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==='//';slashes&&!(proto&&hostlessProtocol[proto])&&(rest=rest.substr(2),this.slashes=!0)}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);hec!==-1&&(hostEnd===-1||hec<hostEnd)&&(hostEnd=hec)}var auth,atSign;atSign=hostEnd===-1?rest.lastIndexOf('@'):rest.lastIndexOf('@',hostEnd),atSign!==-1&&(auth=rest.slice(0,atSign),rest=rest.slice(atSign+1),this.auth=decodeURIComponent(auth)),hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);hec!==-1&&(hostEnd===-1||hec<hostEnd)&&(hostEnd=hec)}hostEnd===-1&&(hostEnd=rest.length),this.host=rest.slice(0,hostEnd),rest=rest.slice(hostEnd),this.parseHost(),this.hostname=this.hostname||'';var ipv6Hostname=this.hostname[0]==='['&&this.hostname[this.hostname.length-1]===']';if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(part&&!part.match(hostnamePartPattern)){var newpart='';for(var j=0,k=part.length;j<k;j++)newpart+=part.charCodeAt(j)>127?'x':part[j];if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);bit&&(validParts.push(bit[1]),notHost.unshift(bit[2])),notHost.length&&(rest='/'+notHost.join('.')+rest),this.hostname=validParts.join('.');break}}}}this.hostname=this.hostname.length>hostnameMaxLen?'':this.hostname.toLowerCase(),!ipv6Hostname&&(this.hostname=punycode.toASCII(this.hostname));var p=this.port?':'+this.port:'';var h=this.hostname||'';this.host=h+p,this.href+=this.host,ipv6Hostname&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),rest[0]!=='/'&&(rest='/'+rest))}if(!unsafeProtocol[lowerProto])for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];if(rest.indexOf(ae)!==-1){var esc=encodeURIComponent(ae);esc===ae&&(esc=escape(ae)),rest=rest.split(ae).join(esc)}}var hash=rest.indexOf('#');hash!==-1&&(this.hash=rest.substr(hash),rest=rest.slice(0,hash));var qm=rest.indexOf('?');if(qm===-1?parseQueryString&&(this.search='',this.query={}):(this.search=rest.substr(qm),this.query=rest.substr(qm+1),parseQueryString&&(this.query=querystring.parse(this.query)),rest=rest.slice(0,qm)),rest&&(this.pathname=rest),slashedProtocol[lowerProto]&&this.hostname&&!this.pathname&&(this.pathname='/'),this.pathname||this.search){var p=this.pathname||'';var s=this.search||'';this.path=p+s}return this.href=this.format(),this},Url.prototype.format=function(){var auth=this.auth||'';auth&&(auth=encodeURIComponent(auth),auth=auth.replace(/%3A/i,':'),auth+='@');var protocol=this.protocol||'',pathname=this.pathname||'',hash=this.hash||'',host=!1,query='';this.host?host=auth+this.host:this.hostname&&(host=auth+(this.hostname.indexOf(':')===-1?this.hostname:'['+this.hostname+']'),this.port&&(host+=':'+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(query=querystring.stringify(this.query));var search=this.search||query&&'?'+query||'';return protocol&&protocol.substr(-1)!==':'&&(protocol+=':'),this.slashes||(!protocol||slashedProtocol[protocol])&&host!==!1?(host='//'+(host||''),pathname&&pathname.charAt(0)!=='/'&&(pathname='/'+pathname)):!host&&(host=''),hash&&hash.charAt(0)!=='#'&&(hash='#'+hash),search&&search.charAt(0)!=='?'&&(search='?'+search),pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)}),search=search.replace('#','%23'),protocol+host+pathname+search+hash},Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,!1,!0)).format()},Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url;rel.parse(relative,!1,!0),relative=rel}var result=new Url;var tkeys=Object.keys(this);for(var tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey]}if(result.hash=relative.hash,relative.href==='')return result.href=result.format(),result;if(relative.slashes&&!relative.protocol){var rkeys=Object.keys(relative);for(var rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];rkey!=='protocol'&&(result[rkey]=relative[rkey])}return slashedProtocol[result.protocol]&&result.hostname&&!result.pathname&&(result.path=result.pathname='/'),result.href=result.format(),result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){var keys=Object.keys(relative);for(var v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k]}return result.href=result.format(),result}if(result.protocol=relative.protocol,!relative.host&&!hostlessProtocol[relative.protocol]){for(var relPath=(relative.pathname||'').split('/');relPath.length&&!(relative.host=relPath.shift()););!relative.host&&(relative.host=''),!relative.hostname&&(relative.hostname=''),relPath[0]!==''&&relPath.unshift(''),relPath.length<2&&relPath.unshift(''),result.pathname=relPath.join('/')}else result.pathname=relative.pathname;if(result.search=relative.search,result.query=relative.query,result.host=relative.host||'',result.auth=relative.auth,result.hostname=relative.hostname||relative.host,result.port=relative.port,result.pathname||result.search){var p=result.pathname||'';var s=result.search||'';result.path=p+s}return result.slashes=result.slashes||relative.slashes,result.href=result.format(),result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==='/',isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==='/',mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split('/')||[],relPath=relative.pathname&&relative.pathname.split('/')||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic&&(result.hostname='',result.port=null,result.host&&(srcPath[0]===''?srcPath[0]=result.host:srcPath.unshift(result.host)),result.host='',relative.protocol&&(relative.hostname=null,relative.port=null,relative.host&&(relPath[0]===''?relPath[0]=relative.host:relPath.unshift(relative.host)),relative.host=null),mustEndAbs=mustEndAbs&&(relPath[0]===''||srcPath[0]==='')),isRelAbs)result.host=relative.host||relative.host===''?relative.host:result.host,result.hostname=relative.hostname||relative.hostname===''?relative.hostname:result.hostname,result.search=relative.search,result.query=relative.query,srcPath=relPath;else if(relPath.length)!srcPath&&(srcPath=[]),srcPath.pop(),srcPath=srcPath.concat(relPath),result.search=relative.search,result.query=relative.query;else if(!util.isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=!!(result.host&&result.host.indexOf('@')>0)&&result.host.split('@');authInHost&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift())}return result.search=relative.search,result.query=relative.query,(!util.isNull(result.pathname)||!util.isNull(result.search))&&(result.path=(result.pathname?result.pathname:'')+(result.search?result.search:'')),result.href=result.format(),result}if(!srcPath.length)return result.pathname=null,result.path=result.search?'/'+result.search:null,result.href=result.format(),result;var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host||srcPath.length>1)&&(last==='.'||last==='..')||last==='';var up=0;for(var i=srcPath.length;i>=0;i--)last=srcPath[i],last==='.'?srcPath.splice(i,1):last==='..'?(srcPath.splice(i,1),up++):up&&(srcPath.splice(i,1),up--);if(!mustEndAbs&&!removeAllDots)for(;up--;up)srcPath.unshift('..');mustEndAbs&&srcPath[0]!==''&&(!srcPath[0]||srcPath[0].charAt(0)!=='/')&&srcPath.unshift(''),hasTrailingSlash&&srcPath.join('/').substr(-1)!=='/'&&srcPath.push('');var isAbsolute=srcPath[0]===''||srcPath[0]&&srcPath[0].charAt(0)==='/';if(psychotic){result.hostname=result.host=isAbsolute?'':srcPath.length?srcPath.shift():'';var authInHost=!!(result.host&&result.host.indexOf('@')>0)&&result.host.split('@');authInHost&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift())}return mustEndAbs=mustEndAbs||result.host&&srcPath.length,mustEndAbs&&!isAbsolute&&srcPath.unshift(''),srcPath.length?result.pathname=srcPath.join('/'):(result.pathname=null,result.path=null),(!util.isNull(result.pathname)||!util.isNull(result.search))&&(result.path=(result.pathname?result.pathname:'')+(result.search?result.search:'')),result.auth=relative.auth||result.auth,result.slashes=result.slashes||relative.slashes,result.href=result.format(),result},Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);port&&(port=port[0],port!==':'&&(this.port=port.substr(1)),host=host.substr(0,host.length-port.length)),host&&(this.hostname=host)}},function(module,exports,__webpack_require__){'use strict';module.exports={isString:function(arg){return typeof arg==='string'},isObject:function(arg){return typeof arg==='object'&&arg!==null},isNull:function(arg){return arg===null},isNullOrUndefined:function(arg){return arg==null}}},function(module,exports,__webpack_require__){(function(global){function deprecate(fn,msg){function deprecated(){if(!warned){if(config('throwDeprecation'))throw new Error(msg);else if(config('traceDeprecation'));else;warned=!0}return fn.apply(this,arguments)}if(config('noDeprecation'))return fn;var warned=!1;return deprecated}function config(name){try{if(!global.localStorage)return!1}catch(_){return!1}var val=global.localStorage[name];return null!=val&&(val+'').toLowerCase()==='true'}module.exports=deprecate}).call(exports,__webpack_require__(7))},function(module,exports,__webpack_require__){function Context(){}var indexOf=__webpack_require__(139);var Object_keys=function(obj){if(Object.keys)return Object.keys(obj);var res=[];for(var key in obj)res.push(key);return res};var forEach=function(xs,fn){if(xs.forEach)return xs.forEach(fn);for(var i=0;i<xs.length;i++)fn(xs[i],i,xs)};var defineProp=function(){try{return Object.defineProperty({},'_',{}),function(obj,name,value){Object.defineProperty(obj,name,{writable:!0,enumerable:!1,configurable:!0,value:value})}}catch(e){return function(obj,name,value){obj[name]=value}}}();var globals=['Array','Boolean','Date','Error','EvalError','Function','Infinity','JSON','Math','NaN','Number','Object','RangeError','ReferenceError','RegExp','String','SyntaxError','TypeError','URIError','decodeURI','decodeURIComponent','encodeURI','encodeURIComponent','escape','eval','isFinite','isNaN','parseFloat','parseInt','undefined','unescape'];Context.prototype={};var Script=exports.Script=function NodeScript(code){return this instanceof Script?void(this.code=code):new Script(code)};Script.prototype.runInContext=function(context){if(!(context instanceof Context))throw new TypeError('needs a \'context\' argument.');var iframe=document.createElement('iframe');!iframe.style&&(iframe.style={}),iframe.style.display='none',document.body.appendChild(iframe);var win=iframe.contentWindow;var wEval=win.eval,wExecScript=win.execScript;!wEval&&wExecScript&&(wExecScript.call(win,'null'),wEval=win.eval),forEach(Object_keys(context),function(key){win[key]=context[key]}),forEach(globals,function(key){context[key]&&(win[key]=context[key])});var winKeys=Object_keys(win);var res=wEval.call(win,this.code);return forEach(Object_keys(win),function(key){(key in context||indexOf(winKeys,key)===-1)&&(context[key]=win[key])}),forEach(globals,function(key){!(key in context)&&defineProp(context,key,win[key])}),document.body.removeChild(iframe),res},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(context){var ctx=Script.createContext(context);var res=this.runInContext(ctx);return forEach(Object_keys(ctx),function(key){context[key]=ctx[key]}),res},forEach(Object_keys(Script.prototype),function(name){exports[name]=Script[name]=function(code){var s=Script(code);return s[name].apply(s,[].slice.call(arguments,1))}}),exports.createScript=function(code){return exports.Script(code)},exports.createContext=Script.createContext=function(context){var copy=new Context;return typeof context==='object'&&forEach(Object_keys(context),function(key){copy[key]=context[key]}),copy}},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports,__webpack_require__){__webpack_require__(72),__webpack_require__(73),__webpack_require__(74),__webpack_require__(76),__webpack_require__(77),module.exports=__webpack_require__(75)}]);